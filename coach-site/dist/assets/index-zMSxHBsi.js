var Jh=t=>{throw TypeError(t)};var Qh=(t,e,i)=>e.has(t)||Jh("Cannot "+i);var Zh=(t,e,i)=>(Qh(t,e,"read from private field"),i?i.call(t):e.get(t)),Xh=(t,e,i)=>e.has(t)?Jh("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,i),ef=(t,e,i,s)=>(Qh(t,e,"write to private field"),s?s.call(t,i):e.set(t,i),i);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const o of n.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function i(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerPolicy&&(n.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?n.credentials="include":r.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(r){if(r.ep)return;r.ep=!0;const n=i(r);fetch(r.href,n)}})();/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function lu(t){const e=Object.create(null);for(const i of t.split(","))e[i]=1;return i=>i in e}const je={},ur=[],Qi=()=>{},iw=()=>!1,Il=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),du=t=>t.startsWith("onUpdate:"),At=Object.assign,cu=(t,e)=>{const i=t.indexOf(e);i>-1&&t.splice(i,1)},sw=Object.prototype.hasOwnProperty,We=(t,e)=>sw.call(t,e),_e=Array.isArray,hr=t=>Go(t)==="[object Map]",Vr=t=>Go(t)==="[object Set]",tf=t=>Go(t)==="[object Date]",Te=t=>typeof t=="function",ht=t=>typeof t=="string",Ci=t=>typeof t=="symbol",Ge=t=>t!==null&&typeof t=="object",ig=t=>(Ge(t)||Te(t))&&Te(t.then)&&Te(t.catch),sg=Object.prototype.toString,Go=t=>sg.call(t),nw=t=>Go(t).slice(8,-1),ng=t=>Go(t)==="[object Object]",uu=t=>ht(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,co=lu(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Dl=t=>{const e=Object.create(null);return i=>e[i]||(e[i]=t(i))},rw=/-(\w)/g,mi=Dl(t=>t.replace(rw,(e,i)=>i?i.toUpperCase():"")),ow=/\B([A-Z])/g,on=Dl(t=>t.replace(ow,"-$1").toLowerCase()),kl=Dl(t=>t.charAt(0).toUpperCase()+t.slice(1)),_d=Dl(t=>t?`on${kl(t)}`:""),Us=(t,e)=>!Object.is(t,e),ja=(t,...e)=>{for(let i=0;i<t.length;i++)t[i](...e)},rg=(t,e,i,s=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:s,value:i})},tl=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let sf;const Cl=()=>sf||(sf=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function ue(t){if(_e(t)){const e={};for(let i=0;i<t.length;i++){const s=t[i],r=ht(s)?cw(s):ue(s);if(r)for(const n in r)e[n]=r[n]}return e}else if(ht(t)||Ge(t))return t}const aw=/;(?![^(]*\))/g,lw=/:([^]+)/,dw=/\/\*[^]*?\*\//g;function cw(t){const e={};return t.replace(dw,"").split(aw).forEach(i=>{if(i){const s=i.split(lw);s.length>1&&(e[s[0].trim()]=s[1].trim())}}),e}function O(t){let e="";if(ht(t))e=t;else if(_e(t))for(let i=0;i<t.length;i++){const s=O(t[i]);s&&(e+=s+" ")}else if(Ge(t))for(const i in t)t[i]&&(e+=i+" ");return e.trim()}const uw="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",hw=lu(uw);function og(t){return!!t||t===""}function fw(t,e){if(t.length!==e.length)return!1;let i=!0;for(let s=0;i&&s<t.length;s++)i=Cn(t[s],e[s]);return i}function Cn(t,e){if(t===e)return!0;let i=tf(t),s=tf(e);if(i||s)return i&&s?t.getTime()===e.getTime():!1;if(i=Ci(t),s=Ci(e),i||s)return t===e;if(i=_e(t),s=_e(e),i||s)return i&&s?fw(t,e):!1;if(i=Ge(t),s=Ge(e),i||s){if(!i||!s)return!1;const r=Object.keys(t).length,n=Object.keys(e).length;if(r!==n)return!1;for(const o in t){const a=t.hasOwnProperty(o),l=e.hasOwnProperty(o);if(a&&!l||!a&&l||!Cn(t[o],e[o]))return!1}}return String(t)===String(e)}function hu(t,e){return t.findIndex(i=>Cn(i,e))}const ag=t=>!!(t&&t.__v_isRef===!0),S=t=>ht(t)?t:t==null?"":_e(t)||Ge(t)&&(t.toString===sg||!Te(t.toString))?ag(t)?S(t.value):JSON.stringify(t,lg,2):String(t),lg=(t,e)=>ag(e)?lg(t,e.value):hr(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((i,[s,r],n)=>(i[yd(s,n)+" =>"]=r,i),{})}:Vr(e)?{[`Set(${e.size})`]:[...e.values()].map(i=>yd(i))}:Ci(e)?yd(e):Ge(e)&&!_e(e)&&!ng(e)?String(e):e,yd=(t,e="")=>{var i;return Ci(t)?`Symbol(${(i=t.description)!=null?i:e})`:t};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Vt;class dg{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Vt,!e&&Vt&&(this.index=(Vt.scopes||(Vt.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,i;if(this.scopes)for(e=0,i=this.scopes.length;e<i;e++)this.scopes[e].pause();for(e=0,i=this.effects.length;e<i;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,i;if(this.scopes)for(e=0,i=this.scopes.length;e<i;e++)this.scopes[e].resume();for(e=0,i=this.effects.length;e<i;e++)this.effects[e].resume()}}run(e){if(this._active){const i=Vt;try{return Vt=this,e()}finally{Vt=i}}}on(){Vt=this}off(){Vt=this.parent}stop(e){if(this._active){this._active=!1;let i,s;for(i=0,s=this.effects.length;i<s;i++)this.effects[i].stop();for(this.effects.length=0,i=0,s=this.cleanups.length;i<s;i++)this.cleanups[i]();if(this.cleanups.length=0,this.scopes){for(i=0,s=this.scopes.length;i<s;i++)this.scopes[i].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0}}}function cg(t){return new dg(t)}function ug(){return Vt}function mw(t,e=!1){Vt&&Vt.cleanups.push(t)}let Ye;const bd=new WeakSet;class hg{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Vt&&Vt.active&&Vt.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,bd.has(this)&&(bd.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||mg(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,nf(this),pg(this);const e=Ye,i=ki;Ye=this,ki=!0;try{return this.fn()}finally{gg(this),Ye=e,ki=i,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)pu(e);this.deps=this.depsTail=void 0,nf(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?bd.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){xc(this)&&this.run()}get dirty(){return xc(this)}}let fg=0,uo,ho;function mg(t,e=!1){if(t.flags|=8,e){t.next=ho,ho=t;return}t.next=uo,uo=t}function fu(){fg++}function mu(){if(--fg>0)return;if(ho){let e=ho;for(ho=void 0;e;){const i=e.next;e.next=void 0,e.flags&=-9,e=i}}let t;for(;uo;){let e=uo;for(uo=void 0;e;){const i=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(s){t||(t=s)}e=i}}if(t)throw t}function pg(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function gg(t){let e,i=t.depsTail,s=i;for(;s;){const r=s.prevDep;s.version===-1?(s===i&&(i=r),pu(s),pw(s)):e=s,s.dep.activeLink=s.prevActiveLink,s.prevActiveLink=void 0,s=r}t.deps=e,t.depsTail=i}function xc(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(vg(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function vg(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===Io))return;t.globalVersion=Io;const e=t.dep;if(t.flags|=2,e.version>0&&!t.isSSR&&t.deps&&!xc(t)){t.flags&=-3;return}const i=Ye,s=ki;Ye=t,ki=!0;try{pg(t);const r=t.fn(t._value);(e.version===0||Us(r,t._value))&&(t._value=r,e.version++)}catch(r){throw e.version++,r}finally{Ye=i,ki=s,gg(t),t.flags&=-3}}function pu(t,e=!1){const{dep:i,prevSub:s,nextSub:r}=t;if(s&&(s.nextSub=r,t.prevSub=void 0),r&&(r.prevSub=s,t.nextSub=void 0),i.subs===t&&(i.subs=s,!s&&i.computed)){i.computed.flags&=-5;for(let n=i.computed.deps;n;n=n.nextDep)pu(n,!0)}!e&&!--i.sc&&i.map&&i.map.delete(i.key)}function pw(t){const{prevDep:e,nextDep:i}=t;e&&(e.nextDep=i,t.prevDep=void 0),i&&(i.prevDep=e,t.nextDep=void 0)}let ki=!0;const _g=[];function an(){_g.push(ki),ki=!1}function ln(){const t=_g.pop();ki=t===void 0?!0:t}function nf(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const i=Ye;Ye=void 0;try{e()}finally{Ye=i}}}let Io=0;class gw{constructor(e,i){this.sub=e,this.dep=i,this.version=i.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class gu{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(e){if(!Ye||!ki||Ye===this.computed)return;let i=this.activeLink;if(i===void 0||i.sub!==Ye)i=this.activeLink=new gw(Ye,this),Ye.deps?(i.prevDep=Ye.depsTail,Ye.depsTail.nextDep=i,Ye.depsTail=i):Ye.deps=Ye.depsTail=i,yg(i);else if(i.version===-1&&(i.version=this.version,i.nextDep)){const s=i.nextDep;s.prevDep=i.prevDep,i.prevDep&&(i.prevDep.nextDep=s),i.prevDep=Ye.depsTail,i.nextDep=void 0,Ye.depsTail.nextDep=i,Ye.depsTail=i,Ye.deps===i&&(Ye.deps=s)}return i}trigger(e){this.version++,Io++,this.notify(e)}notify(e){fu();try{for(let i=this.subs;i;i=i.prevSub)i.sub.notify()&&i.sub.dep.notify()}finally{mu()}}}function yg(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let s=e.deps;s;s=s.nextDep)yg(s)}const i=t.dep.subs;i!==t&&(t.prevSub=i,i&&(i.nextSub=t)),t.dep.subs=t}}const il=new WeakMap,Sn=Symbol(""),Ec=Symbol(""),Do=Symbol("");function kt(t,e,i){if(ki&&Ye){let s=il.get(t);s||il.set(t,s=new Map);let r=s.get(i);r||(s.set(i,r=new gu),r.map=s,r.key=i),r.track()}}function ms(t,e,i,s,r,n){const o=il.get(t);if(!o){Io++;return}const a=l=>{l&&l.trigger()};if(fu(),e==="clear")o.forEach(a);else{const l=_e(t),d=l&&uu(i);if(l&&i==="length"){const u=Number(s);o.forEach((h,p)=>{(p==="length"||p===Do||!Ci(p)&&p>=u)&&a(h)})}else switch((i!==void 0||o.has(void 0))&&a(o.get(i)),d&&a(o.get(Do)),e){case"add":l?d&&a(o.get("length")):(a(o.get(Sn)),hr(t)&&a(o.get(Ec)));break;case"delete":l||(a(o.get(Sn)),hr(t)&&a(o.get(Ec)));break;case"set":hr(t)&&a(o.get(Sn));break}}mu()}function vw(t,e){const i=il.get(t);return i&&i.get(e)}function Yn(t){const e=$e(t);return e===t?e:(kt(e,"iterate",Do),ui(t)?e:e.map(Ct))}function Pl(t){return kt(t=$e(t),"iterate",Do),t}const _w={__proto__:null,[Symbol.iterator](){return wd(this,Symbol.iterator,Ct)},concat(...t){return Yn(this).concat(...t.map(e=>_e(e)?Yn(e):e))},entries(){return wd(this,"entries",t=>(t[1]=Ct(t[1]),t))},every(t,e){return ls(this,"every",t,e,void 0,arguments)},filter(t,e){return ls(this,"filter",t,e,i=>i.map(Ct),arguments)},find(t,e){return ls(this,"find",t,e,Ct,arguments)},findIndex(t,e){return ls(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return ls(this,"findLast",t,e,Ct,arguments)},findLastIndex(t,e){return ls(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return ls(this,"forEach",t,e,void 0,arguments)},includes(...t){return Sd(this,"includes",t)},indexOf(...t){return Sd(this,"indexOf",t)},join(t){return Yn(this).join(t)},lastIndexOf(...t){return Sd(this,"lastIndexOf",t)},map(t,e){return ls(this,"map",t,e,void 0,arguments)},pop(){return Zr(this,"pop")},push(...t){return Zr(this,"push",t)},reduce(t,...e){return rf(this,"reduce",t,e)},reduceRight(t,...e){return rf(this,"reduceRight",t,e)},shift(){return Zr(this,"shift")},some(t,e){return ls(this,"some",t,e,void 0,arguments)},splice(...t){return Zr(this,"splice",t)},toReversed(){return Yn(this).toReversed()},toSorted(t){return Yn(this).toSorted(t)},toSpliced(...t){return Yn(this).toSpliced(...t)},unshift(...t){return Zr(this,"unshift",t)},values(){return wd(this,"values",Ct)}};function wd(t,e,i){const s=Pl(t),r=s[e]();return s!==t&&!ui(t)&&(r._next=r.next,r.next=()=>{const n=r._next();return n.value&&(n.value=i(n.value)),n}),r}const yw=Array.prototype;function ls(t,e,i,s,r,n){const o=Pl(t),a=o!==t&&!ui(t),l=o[e];if(l!==yw[e]){const h=l.apply(t,n);return a?Ct(h):h}let d=i;o!==t&&(a?d=function(h,p){return i.call(this,Ct(h),p,t)}:i.length>2&&(d=function(h,p){return i.call(this,h,p,t)}));const u=l.call(o,d,s);return a&&r?r(u):u}function rf(t,e,i,s){const r=Pl(t);let n=i;return r!==t&&(ui(t)?i.length>3&&(n=function(o,a,l){return i.call(this,o,a,l,t)}):n=function(o,a,l){return i.call(this,o,Ct(a),l,t)}),r[e](n,...s)}function Sd(t,e,i){const s=$e(t);kt(s,"iterate",Do);const r=s[e](...i);return(r===-1||r===!1)&&yu(i[0])?(i[0]=$e(i[0]),s[e](...i)):r}function Zr(t,e,i=[]){an(),fu();const s=$e(t)[e].apply(t,i);return mu(),ln(),s}const bw=lu("__proto__,__v_isRef,__isVue"),bg=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Ci));function ww(t){Ci(t)||(t=String(t));const e=$e(this);return kt(e,"has",t),e.hasOwnProperty(t)}class wg{constructor(e=!1,i=!1){this._isReadonly=e,this._isShallow=i}get(e,i,s){if(i==="__v_skip")return e.__v_skip;const r=this._isReadonly,n=this._isShallow;if(i==="__v_isReactive")return!r;if(i==="__v_isReadonly")return r;if(i==="__v_isShallow")return n;if(i==="__v_raw")return s===(r?n?Mw:Eg:n?xg:Tg).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(s)?e:void 0;const o=_e(e);if(!r){let l;if(o&&(l=_w[i]))return l;if(i==="hasOwnProperty")return ww}const a=Reflect.get(e,i,ot(e)?e:s);return(Ci(i)?bg.has(i):bw(i))||(r||kt(e,"get",i),n)?a:ot(a)?o&&uu(i)?a:a.value:Ge(a)?r?Dg(a):Ko(a):a}}class Sg extends wg{constructor(e=!1){super(!1,e)}set(e,i,s,r){let n=e[i];if(!this._isShallow){const l=Pn(n);if(!ui(s)&&!Pn(s)&&(n=$e(n),s=$e(s)),!_e(e)&&ot(n)&&!ot(s))return l?!1:(n.value=s,!0)}const o=_e(e)&&uu(i)?Number(i)<e.length:We(e,i),a=Reflect.set(e,i,s,ot(e)?e:r);return e===$e(r)&&(o?Us(s,n)&&ms(e,"set",i,s):ms(e,"add",i,s)),a}deleteProperty(e,i){const s=We(e,i);e[i];const r=Reflect.deleteProperty(e,i);return r&&s&&ms(e,"delete",i,void 0),r}has(e,i){const s=Reflect.has(e,i);return(!Ci(i)||!bg.has(i))&&kt(e,"has",i),s}ownKeys(e){return kt(e,"iterate",_e(e)?"length":Sn),Reflect.ownKeys(e)}}class Sw extends wg{constructor(e=!1){super(!0,e)}set(e,i){return!0}deleteProperty(e,i){return!0}}const Tw=new Sg,xw=new Sw,Ew=new Sg(!0);const Ic=t=>t,ga=t=>Reflect.getPrototypeOf(t);function Iw(t,e,i){return function(...s){const r=this.__v_raw,n=$e(r),o=hr(n),a=t==="entries"||t===Symbol.iterator&&o,l=t==="keys"&&o,d=r[t](...s),u=i?Ic:e?Dc:Ct;return!e&&kt(n,"iterate",l?Ec:Sn),{next(){const{value:h,done:p}=d.next();return p?{value:h,done:p}:{value:a?[u(h[0]),u(h[1])]:u(h),done:p}},[Symbol.iterator](){return this}}}}function va(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function Dw(t,e){const i={get(r){const n=this.__v_raw,o=$e(n),a=$e(r);t||(Us(r,a)&&kt(o,"get",r),kt(o,"get",a));const{has:l}=ga(o),d=e?Ic:t?Dc:Ct;if(l.call(o,r))return d(n.get(r));if(l.call(o,a))return d(n.get(a));n!==o&&n.get(r)},get size(){const r=this.__v_raw;return!t&&kt($e(r),"iterate",Sn),Reflect.get(r,"size",r)},has(r){const n=this.__v_raw,o=$e(n),a=$e(r);return t||(Us(r,a)&&kt(o,"has",r),kt(o,"has",a)),r===a?n.has(r):n.has(r)||n.has(a)},forEach(r,n){const o=this,a=o.__v_raw,l=$e(a),d=e?Ic:t?Dc:Ct;return!t&&kt(l,"iterate",Sn),a.forEach((u,h)=>r.call(n,d(u),d(h),o))}};return At(i,t?{add:va("add"),set:va("set"),delete:va("delete"),clear:va("clear")}:{add(r){!e&&!ui(r)&&!Pn(r)&&(r=$e(r));const n=$e(this);return ga(n).has.call(n,r)||(n.add(r),ms(n,"add",r,r)),this},set(r,n){!e&&!ui(n)&&!Pn(n)&&(n=$e(n));const o=$e(this),{has:a,get:l}=ga(o);let d=a.call(o,r);d||(r=$e(r),d=a.call(o,r));const u=l.call(o,r);return o.set(r,n),d?Us(n,u)&&ms(o,"set",r,n):ms(o,"add",r,n),this},delete(r){const n=$e(this),{has:o,get:a}=ga(n);let l=o.call(n,r);l||(r=$e(r),l=o.call(n,r)),a&&a.call(n,r);const d=n.delete(r);return l&&ms(n,"delete",r,void 0),d},clear(){const r=$e(this),n=r.size!==0,o=r.clear();return n&&ms(r,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(r=>{i[r]=Iw(r,t,e)}),i}function vu(t,e){const i=Dw(t,e);return(s,r,n)=>r==="__v_isReactive"?!t:r==="__v_isReadonly"?t:r==="__v_raw"?s:Reflect.get(We(i,r)&&r in s?i:s,r,n)}const kw={get:vu(!1,!1)},Cw={get:vu(!1,!0)},Pw={get:vu(!0,!1)};const Tg=new WeakMap,xg=new WeakMap,Eg=new WeakMap,Mw=new WeakMap;function Aw(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Ow(t){return t.__v_skip||!Object.isExtensible(t)?0:Aw(nw(t))}function Ko(t){return Pn(t)?t:_u(t,!1,Tw,kw,Tg)}function Ig(t){return _u(t,!1,Ew,Cw,xg)}function Dg(t){return _u(t,!0,xw,Pw,Eg)}function _u(t,e,i,s,r){if(!Ge(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const n=r.get(t);if(n)return n;const o=Ow(t);if(o===0)return t;const a=new Proxy(t,o===2?s:i);return r.set(t,a),a}function Ys(t){return Pn(t)?Ys(t.__v_raw):!!(t&&t.__v_isReactive)}function Pn(t){return!!(t&&t.__v_isReadonly)}function ui(t){return!!(t&&t.__v_isShallow)}function yu(t){return t?!!t.__v_raw:!1}function $e(t){const e=t&&t.__v_raw;return e?$e(e):t}function bu(t){return!We(t,"__v_skip")&&Object.isExtensible(t)&&rg(t,"__v_skip",!0),t}const Ct=t=>Ge(t)?Ko(t):t,Dc=t=>Ge(t)?Dg(t):t;function ot(t){return t?t.__v_isRef===!0:!1}function fr(t){return kg(t,!1)}function Rw(t){return kg(t,!0)}function kg(t,e){return ot(t)?t:new $w(t,e)}class $w{constructor(e,i){this.dep=new gu,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=i?e:$e(e),this._value=i?e:Ct(e),this.__v_isShallow=i}get value(){return this.dep.track(),this._value}set value(e){const i=this._rawValue,s=this.__v_isShallow||ui(e)||Pn(e);e=s?e:$e(e),Us(e,i)&&(this._rawValue=e,this._value=s?e:Ct(e),this.dep.trigger())}}function mr(t){return ot(t)?t.value:t}const Nw={get:(t,e,i)=>e==="__v_raw"?t:mr(Reflect.get(t,e,i)),set:(t,e,i,s)=>{const r=t[e];return ot(r)&&!ot(i)?(r.value=i,!0):Reflect.set(t,e,i,s)}};function Cg(t){return Ys(t)?t:new Proxy(t,Nw)}function Lw(t){const e=_e(t)?new Array(t.length):{};for(const i in t)e[i]=Ww(t,i);return e}class Vw{constructor(e,i,s){this._object=e,this._key=i,this._defaultValue=s,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return vw($e(this._object),this._key)}}function Ww(t,e,i){const s=t[e];return ot(s)?s:new Vw(t,e,i)}class zw{constructor(e,i,s){this.fn=e,this.setter=i,this._value=void 0,this.dep=new gu(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Io-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!i,this.isSSR=s}notify(){if(this.flags|=16,!(this.flags&8)&&Ye!==this)return mg(this,!0),!0}get value(){const e=this.dep.track();return vg(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function Fw(t,e,i=!1){let s,r;return Te(t)?s=t:(s=t.get,r=t.set),new zw(s,r,i)}const _a={},sl=new WeakMap;let _n;function jw(t,e=!1,i=_n){if(i){let s=sl.get(i);s||sl.set(i,s=[]),s.push(t)}}function Bw(t,e,i=je){const{immediate:s,deep:r,once:n,scheduler:o,augmentJob:a,call:l}=i,d=A=>r?A:ui(A)||r===!1||r===0?ps(A,1):ps(A);let u,h,p,g,w=!1,_=!1;if(ot(t)?(h=()=>t.value,w=ui(t)):Ys(t)?(h=()=>d(t),w=!0):_e(t)?(_=!0,w=t.some(A=>Ys(A)||ui(A)),h=()=>t.map(A=>{if(ot(A))return A.value;if(Ys(A))return d(A);if(Te(A))return l?l(A,2):A()})):Te(t)?e?h=l?()=>l(t,2):t:h=()=>{if(p){an();try{p()}finally{ln()}}const A=_n;_n=u;try{return l?l(t,3,[g]):t(g)}finally{_n=A}}:h=Qi,e&&r){const A=h,Z=r===!0?1/0:r;h=()=>ps(A(),Z)}const P=ug(),k=()=>{u.stop(),P&&P.active&&cu(P.effects,u)};if(n&&e){const A=e;e=(...Z)=>{A(...Z),k()}}let R=_?new Array(t.length).fill(_a):_a;const $=A=>{if(!(!(u.flags&1)||!u.dirty&&!A))if(e){const Z=u.run();if(r||w||(_?Z.some((le,te)=>Us(le,R[te])):Us(Z,R))){p&&p();const le=_n;_n=u;try{const te=[Z,R===_a?void 0:_&&R[0]===_a?[]:R,g];l?l(e,3,te):e(...te),R=Z}finally{_n=le}}}else u.run()};return a&&a($),u=new hg(h),u.scheduler=o?()=>o($,!1):$,g=A=>jw(A,!1,u),p=u.onStop=()=>{const A=sl.get(u);if(A){if(l)l(A,4);else for(const Z of A)Z();sl.delete(u)}},e?s?$(!0):R=u.run():o?o($.bind(null,!0),!0):u.run(),k.pause=u.pause.bind(u),k.resume=u.resume.bind(u),k.stop=k,k}function ps(t,e=1/0,i){if(e<=0||!Ge(t)||t.__v_skip||(i=i||new Set,i.has(t)))return t;if(i.add(t),e--,ot(t))ps(t.value,e,i);else if(_e(t))for(let s=0;s<t.length;s++)ps(t[s],e,i);else if(Vr(t)||hr(t))t.forEach(s=>{ps(s,e,i)});else if(ng(t)){for(const s in t)ps(t[s],e,i);for(const s of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,s)&&ps(t[s],e,i)}return t}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function qo(t,e,i,s){try{return s?t(...s):t()}catch(r){Jo(r,e,i)}}function ts(t,e,i,s){if(Te(t)){const r=qo(t,e,i,s);return r&&ig(r)&&r.catch(n=>{Jo(n,e,i)}),r}if(_e(t)){const r=[];for(let n=0;n<t.length;n++)r.push(ts(t[n],e,i,s));return r}}function Jo(t,e,i,s=!0){const r=e?e.vnode:null,{errorHandler:n,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||je;if(e){let a=e.parent;const l=e.proxy,d=`https://vuejs.org/error-reference/#runtime-${i}`;for(;a;){const u=a.ec;if(u){for(let h=0;h<u.length;h++)if(u[h](t,l,d)===!1)return}a=a.parent}if(n){an(),qo(n,null,10,[t,l,d]),ln();return}}Hw(t,i,r,s,o)}function Hw(t,e,i,s=!0,r=!1){if(r)throw t;console.error(t)}const Wt=[];let Gi=-1;const pr=[];let zs=null,er=0;const Pg=Promise.resolve();let nl=null;function Ml(t){const e=nl||Pg;return t?e.then(this?t.bind(this):t):e}function Uw(t){let e=Gi+1,i=Wt.length;for(;e<i;){const s=e+i>>>1,r=Wt[s],n=ko(r);n<t||n===t&&r.flags&2?e=s+1:i=s}return e}function wu(t){if(!(t.flags&1)){const e=ko(t),i=Wt[Wt.length-1];!i||!(t.flags&2)&&e>=ko(i)?Wt.push(t):Wt.splice(Uw(e),0,t),t.flags|=1,Mg()}}function Mg(){nl||(nl=Pg.then(Og))}function Yw(t){_e(t)?pr.push(...t):zs&&t.id===-1?zs.splice(er+1,0,t):t.flags&1||(pr.push(t),t.flags|=1),Mg()}function of(t,e,i=Gi+1){for(;i<Wt.length;i++){const s=Wt[i];if(s&&s.flags&2){if(t&&s.id!==t.uid)continue;Wt.splice(i,1),i--,s.flags&4&&(s.flags&=-2),s(),s.flags&4||(s.flags&=-2)}}}function Ag(t){if(pr.length){const e=[...new Set(pr)].sort((i,s)=>ko(i)-ko(s));if(pr.length=0,zs){zs.push(...e);return}for(zs=e,er=0;er<zs.length;er++){const i=zs[er];i.flags&4&&(i.flags&=-2),i.flags&8||i(),i.flags&=-2}zs=null,er=0}}const ko=t=>t.id==null?t.flags&2?-1:1/0:t.id;function Og(t){try{for(Gi=0;Gi<Wt.length;Gi++){const e=Wt[Gi];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),qo(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;Gi<Wt.length;Gi++){const e=Wt[Gi];e&&(e.flags&=-2)}Gi=-1,Wt.length=0,Ag(),nl=null,(Wt.length||pr.length)&&Og()}}let St=null,Rg=null;function rl(t){const e=St;return St=t,Rg=t&&t.type.__scopeId||null,e}function $g(t,e=St,i){if(!e||t._n)return t;const s=(...r)=>{s._d&&vf(-1);const n=rl(e);let o;try{o=t(...r)}finally{rl(n),s._d&&vf(1)}return o};return s._n=!0,s._c=!0,s._d=!0,s}function H(t,e){if(St===null)return t;const i=$l(St),s=t.dirs||(t.dirs=[]);for(let r=0;r<e.length;r++){let[n,o,a,l=je]=e[r];n&&(Te(n)&&(n={mounted:n,updated:n}),n.deep&&ps(o),s.push({dir:n,instance:i,value:o,oldValue:void 0,arg:a,modifiers:l}))}return t}function mn(t,e,i,s){const r=t.dirs,n=e&&e.dirs;for(let o=0;o<r.length;o++){const a=r[o];n&&(a.oldValue=n[o].value);let l=a.dir[s];l&&(an(),ts(l,i,8,[t.el,a,t,e]),ln())}}const Gw=Symbol("_vte"),Kw=t=>t.__isTeleport;function Su(t,e){t.shapeFlag&6&&t.component?(t.transition=e,Su(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}/*! #__NO_SIDE_EFFECTS__ */function Tu(t,e){return Te(t)?At({name:t.name},e,{setup:t}):t}function xu(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function ol(t,e,i,s,r=!1){if(_e(t)){t.forEach((w,_)=>ol(w,e&&(_e(e)?e[_]:e),i,s,r));return}if(gr(s)&&!r){s.shapeFlag&512&&s.type.__asyncResolved&&s.component.subTree.component&&ol(t,e,i,s.component.subTree);return}const n=s.shapeFlag&4?$l(s.component):s.el,o=r?null:n,{i:a,r:l}=t,d=e&&e.r,u=a.refs===je?a.refs={}:a.refs,h=a.setupState,p=$e(h),g=h===je?()=>!1:w=>We(p,w);if(d!=null&&d!==l&&(ht(d)?(u[d]=null,g(d)&&(h[d]=null)):ot(d)&&(d.value=null)),Te(l))qo(l,a,12,[o,u]);else{const w=ht(l),_=ot(l);if(w||_){const P=()=>{if(t.f){const k=w?g(l)?h[l]:u[l]:l.value;r?_e(k)&&cu(k,n):_e(k)?k.includes(n)||k.push(n):w?(u[l]=[n],g(l)&&(h[l]=u[l])):(l.value=[n],t.k&&(u[t.k]=l.value))}else w?(u[l]=o,g(l)&&(h[l]=o)):_&&(l.value=o,t.k&&(u[t.k]=o))};o?(P.id=-1,Jt(P,i)):P()}}}const af=t=>t.nodeType===8;Cl().requestIdleCallback;Cl().cancelIdleCallback;function qw(t,e){if(af(t)&&t.data==="["){let i=1,s=t.nextSibling;for(;s;){if(s.nodeType===1){if(e(s)===!1)break}else if(af(s))if(s.data==="]"){if(--i===0)break}else s.data==="["&&i++;s=s.nextSibling}}else e(t)}const gr=t=>!!t.type.__asyncLoader;/*! #__NO_SIDE_EFFECTS__ */function Jw(t){Te(t)&&(t={loader:t});const{loader:e,loadingComponent:i,errorComponent:s,delay:r=200,hydrate:n,timeout:o,suspensible:a=!0,onError:l}=t;let d=null,u,h=0;const p=()=>(h++,d=null,g()),g=()=>{let w;return d||(w=d=e().catch(_=>{if(_=_ instanceof Error?_:new Error(String(_)),l)return new Promise((P,k)=>{l(_,()=>P(p()),()=>k(_),h+1)});throw _}).then(_=>w!==d&&d?d:(_&&(_.__esModule||_[Symbol.toStringTag]==="Module")&&(_=_.default),u=_,_)))};return Tu({name:"AsyncComponentWrapper",__asyncLoader:g,__asyncHydrate(w,_,P){const k=n?()=>{const R=n(P,$=>qw(w,$));R&&(_.bum||(_.bum=[])).push(R)}:P;u?k():g().then(()=>!_.isUnmounted&&k())},get __asyncResolved(){return u},setup(){const w=bt;if(xu(w),u)return()=>Td(u,w);const _=$=>{d=null,Jo($,w,13,!s)};if(a&&w.suspense||Sr)return g().then($=>()=>Td($,w)).catch($=>(_($),()=>s?D(s,{error:$}):null));const P=fr(!1),k=fr(),R=fr(!!r);return r&&setTimeout(()=>{R.value=!1},r),o!=null&&setTimeout(()=>{if(!P.value&&!k.value){const $=new Error(`Async component timed out after ${o}ms.`);_($),k.value=$}},o),g().then(()=>{P.value=!0,w.parent&&Eu(w.parent.vnode)&&w.parent.update()}).catch($=>{_($),k.value=$}),()=>{if(P.value&&u)return Td(u,w);if(k.value&&s)return D(s,{error:k.value});if(i&&!R.value)return D(i)}}})}function Td(t,e){const{ref:i,props:s,children:r,ce:n}=e.vnode,o=D(t,s,r);return o.ref=i,o.ce=n,delete e.vnode.ce,o}const Eu=t=>t.type.__isKeepAlive;function Qw(t,e){Ng(t,"a",e)}function Zw(t,e){Ng(t,"da",e)}function Ng(t,e,i=bt){const s=t.__wdc||(t.__wdc=()=>{let r=i;for(;r;){if(r.isDeactivated)return;r=r.parent}return t()});if(Al(e,s,i),i){let r=i.parent;for(;r&&r.parent;)Eu(r.parent.vnode)&&Xw(s,e,i,r),r=r.parent}}function Xw(t,e,i,s){const r=Al(e,t,s,!0);Lg(()=>{cu(s[e],r)},i)}function Al(t,e,i=bt,s=!1){if(i){const r=i[t]||(i[t]=[]),n=e.__weh||(e.__weh=(...o)=>{an();const a=Qo(i),l=ts(e,i,t,o);return a(),ln(),l});return s?r.unshift(n):r.push(n),n}}const Ps=t=>(e,i=bt)=>{(!Sr||t==="sp")&&Al(t,(...s)=>e(...s),i)},eS=Ps("bm"),tS=Ps("m"),iS=Ps("bu"),sS=Ps("u"),nS=Ps("bum"),Lg=Ps("um"),rS=Ps("sp"),oS=Ps("rtg"),aS=Ps("rtc");function lS(t,e=bt){Al("ec",t,e)}const dS="components";function T(t,e){return uS(dS,t,!0,e)||t}const cS=Symbol.for("v-ndc");function uS(t,e,i=!0,s=!1){const r=St||bt;if(r){const n=r.type;{const a=XS(n,!1);if(a&&(a===e||a===mi(e)||a===kl(mi(e))))return n}const o=lf(r[t]||n[t],e)||lf(r.appContext[t],e);return!o&&s?n:o}}function lf(t,e){return t&&(t[e]||t[mi(e)]||t[kl(mi(e))])}function N(t,e,i,s){let r;const n=i,o=_e(t);if(o||ht(t)){const a=o&&Ys(t);let l=!1;a&&(l=!ui(t),t=Pl(t)),r=new Array(t.length);for(let d=0,u=t.length;d<u;d++)r[d]=e(l?Ct(t[d]):t[d],d,void 0,n)}else if(typeof t=="number"){r=new Array(t);for(let a=0;a<t;a++)r[a]=e(a+1,a,void 0,n)}else if(Ge(t))if(t[Symbol.iterator])r=Array.from(t,(a,l)=>e(a,l,void 0,n));else{const a=Object.keys(t);r=new Array(a.length);for(let l=0,d=a.length;l<d;l++){const u=a[l];r[l]=e(t[u],u,l,n)}}else r=[];return r}function hS(t,e,i={},s,r){if(St.ce||St.parent&&gr(St.parent)&&St.parent.ce)return f(),K(M,null,[D("slot",i,s)],64);let n=t[e];n&&n._c&&(n._d=!1),f();const o=n&&Vg(n(i)),a=i.key||o&&o.key,l=K(M,{key:(a&&!Ci(a)?a:`_${e}`)+""},o||[],o&&t._===1?64:-2);return n&&n._c&&(n._d=!0),l}function Vg(t){return t.some(e=>Po(e)?!(e.type===qs||e.type===M&&!Vg(e.children)):!0)?t:null}const kc=t=>t?ov(t)?$l(t):kc(t.parent):null,fo=At(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>kc(t.parent),$root:t=>kc(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>zg(t),$forceUpdate:t=>t.f||(t.f=()=>{wu(t.update)}),$nextTick:t=>t.n||(t.n=Ml.bind(t.proxy)),$watch:t=>RS.bind(t)}),xd=(t,e)=>t!==je&&!t.__isScriptSetup&&We(t,e),fS={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:i,setupState:s,data:r,props:n,accessCache:o,type:a,appContext:l}=t;let d;if(e[0]!=="$"){const g=o[e];if(g!==void 0)switch(g){case 1:return s[e];case 2:return r[e];case 4:return i[e];case 3:return n[e]}else{if(xd(s,e))return o[e]=1,s[e];if(r!==je&&We(r,e))return o[e]=2,r[e];if((d=t.propsOptions[0])&&We(d,e))return o[e]=3,n[e];if(i!==je&&We(i,e))return o[e]=4,i[e];Cc&&(o[e]=0)}}const u=fo[e];let h,p;if(u)return e==="$attrs"&&kt(t.attrs,"get",""),u(t);if((h=a.__cssModules)&&(h=h[e]))return h;if(i!==je&&We(i,e))return o[e]=4,i[e];if(p=l.config.globalProperties,We(p,e))return p[e]},set({_:t},e,i){const{data:s,setupState:r,ctx:n}=t;return xd(r,e)?(r[e]=i,!0):s!==je&&We(s,e)?(s[e]=i,!0):We(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(n[e]=i,!0)},has({_:{data:t,setupState:e,accessCache:i,ctx:s,appContext:r,propsOptions:n}},o){let a;return!!i[o]||t!==je&&We(t,o)||xd(e,o)||(a=n[0])&&We(a,o)||We(s,o)||We(fo,o)||We(r.config.globalProperties,o)},defineProperty(t,e,i){return i.get!=null?t._.accessCache[e]=0:We(i,"value")&&this.set(t,e,i.value,null),Reflect.defineProperty(t,e,i)}};function df(t){return _e(t)?t.reduce((e,i)=>(e[i]=null,e),{}):t}let Cc=!0;function mS(t){const e=zg(t),i=t.proxy,s=t.ctx;Cc=!1,e.beforeCreate&&cf(e.beforeCreate,t,"bc");const{data:r,computed:n,methods:o,watch:a,provide:l,inject:d,created:u,beforeMount:h,mounted:p,beforeUpdate:g,updated:w,activated:_,deactivated:P,beforeDestroy:k,beforeUnmount:R,destroyed:$,unmounted:A,render:Z,renderTracked:le,renderTriggered:te,errorCaptured:ie,serverPrefetch:ae,expose:pe,inheritAttrs:ke,components:Oe,directives:Me,filters:Ze}=e;if(d&&pS(d,s,null),o)for(const ce in o){const Se=o[ce];Te(Se)&&(s[ce]=Se.bind(i))}if(r){const ce=r.call(i,i);Ge(ce)&&(t.data=Ko(ce))}if(Cc=!0,n)for(const ce in n){const Se=n[ce],et=Te(Se)?Se.bind(i,i):Te(Se.get)?Se.get.bind(i,i):Qi,dt=!Te(Se)&&Te(Se.set)?Se.set.bind(i):Qi,ct=di({get:et,set:dt});Object.defineProperty(s,ce,{enumerable:!0,configurable:!0,get:()=>ct.value,set:nt=>ct.value=nt})}if(a)for(const ce in a)Wg(a[ce],s,i,ce);if(l){const ce=Te(l)?l.call(i):l;Reflect.ownKeys(ce).forEach(Se=>{Ba(Se,ce[Se])})}u&&cf(u,t,"c");function we(ce,Se){_e(Se)?Se.forEach(et=>ce(et.bind(i))):Se&&ce(Se.bind(i))}if(we(eS,h),we(tS,p),we(iS,g),we(sS,w),we(Qw,_),we(Zw,P),we(lS,ie),we(aS,le),we(oS,te),we(nS,R),we(Lg,A),we(rS,ae),_e(pe))if(pe.length){const ce=t.exposed||(t.exposed={});pe.forEach(Se=>{Object.defineProperty(ce,Se,{get:()=>i[Se],set:et=>i[Se]=et})})}else t.exposed||(t.exposed={});Z&&t.render===Qi&&(t.render=Z),ke!=null&&(t.inheritAttrs=ke),Oe&&(t.components=Oe),Me&&(t.directives=Me),ae&&xu(t)}function pS(t,e,i=Qi){_e(t)&&(t=Pc(t));for(const s in t){const r=t[s];let n;Ge(r)?"default"in r?n=Zi(r.from||s,r.default,!0):n=Zi(r.from||s):n=Zi(r),ot(n)?Object.defineProperty(e,s,{enumerable:!0,configurable:!0,get:()=>n.value,set:o=>n.value=o}):e[s]=n}}function cf(t,e,i){ts(_e(t)?t.map(s=>s.bind(e.proxy)):t.bind(e.proxy),e,i)}function Wg(t,e,i,s){let r=s.includes(".")?ev(i,s):()=>i[s];if(ht(t)){const n=e[t];Te(n)&&mo(r,n)}else if(Te(t))mo(r,t.bind(i));else if(Ge(t))if(_e(t))t.forEach(n=>Wg(n,e,i,s));else{const n=Te(t.handler)?t.handler.bind(i):e[t.handler];Te(n)&&mo(r,n,t)}}function zg(t){const e=t.type,{mixins:i,extends:s}=e,{mixins:r,optionsCache:n,config:{optionMergeStrategies:o}}=t.appContext,a=n.get(e);let l;return a?l=a:!r.length&&!i&&!s?l=e:(l={},r.length&&r.forEach(d=>al(l,d,o,!0)),al(l,e,o)),Ge(e)&&n.set(e,l),l}function al(t,e,i,s=!1){const{mixins:r,extends:n}=e;n&&al(t,n,i,!0),r&&r.forEach(o=>al(t,o,i,!0));for(const o in e)if(!(s&&o==="expose")){const a=gS[o]||i&&i[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const gS={data:uf,props:hf,emits:hf,methods:lo,computed:lo,beforeCreate:Lt,created:Lt,beforeMount:Lt,mounted:Lt,beforeUpdate:Lt,updated:Lt,beforeDestroy:Lt,beforeUnmount:Lt,destroyed:Lt,unmounted:Lt,activated:Lt,deactivated:Lt,errorCaptured:Lt,serverPrefetch:Lt,components:lo,directives:lo,watch:_S,provide:uf,inject:vS};function uf(t,e){return e?t?function(){return At(Te(t)?t.call(this,this):t,Te(e)?e.call(this,this):e)}:e:t}function vS(t,e){return lo(Pc(t),Pc(e))}function Pc(t){if(_e(t)){const e={};for(let i=0;i<t.length;i++)e[t[i]]=t[i];return e}return t}function Lt(t,e){return t?[...new Set([].concat(t,e))]:e}function lo(t,e){return t?At(Object.create(null),t,e):e}function hf(t,e){return t?_e(t)&&_e(e)?[...new Set([...t,...e])]:At(Object.create(null),df(t),df(e??{})):e}function _S(t,e){if(!t)return e;if(!e)return t;const i=At(Object.create(null),t);for(const s in e)i[s]=Lt(t[s],e[s]);return i}function Fg(){return{app:null,config:{isNativeTag:iw,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let yS=0;function bS(t,e){return function(s,r=null){Te(s)||(s=At({},s)),r!=null&&!Ge(r)&&(r=null);const n=Fg(),o=new WeakSet,a=[];let l=!1;const d=n.app={_uid:yS++,_component:s,_props:r,_container:null,_context:n,_instance:null,version:tT,get config(){return n.config},set config(u){},use(u,...h){return o.has(u)||(u&&Te(u.install)?(o.add(u),u.install(d,...h)):Te(u)&&(o.add(u),u(d,...h))),d},mixin(u){return n.mixins.includes(u)||n.mixins.push(u),d},component(u,h){return h?(n.components[u]=h,d):n.components[u]},directive(u,h){return h?(n.directives[u]=h,d):n.directives[u]},mount(u,h,p){if(!l){const g=d._ceVNode||D(s,r);return g.appContext=n,p===!0?p="svg":p===!1&&(p=void 0),t(g,u,p),l=!0,d._container=u,u.__vue_app__=d,$l(g.component)}},onUnmount(u){a.push(u)},unmount(){l&&(ts(a,d._instance,16),t(null,d._container),delete d._container.__vue_app__)},provide(u,h){return n.provides[u]=h,d},runWithContext(u){const h=Tn;Tn=d;try{return u()}finally{Tn=h}}};return d}}let Tn=null;function Ba(t,e){if(bt){let i=bt.provides;const s=bt.parent&&bt.parent.provides;s===i&&(i=bt.provides=Object.create(s)),i[t]=e}}function Zi(t,e,i=!1){const s=bt||St;if(s||Tn){const r=Tn?Tn._context.provides:s?s.parent==null?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:void 0;if(r&&t in r)return r[t];if(arguments.length>1)return i&&Te(e)?e.call(s&&s.proxy):e}}function wS(){return!!(bt||St||Tn)}const jg={},Bg=()=>Object.create(jg),Hg=t=>Object.getPrototypeOf(t)===jg;function SS(t,e,i,s=!1){const r={},n=Bg();t.propsDefaults=Object.create(null),Ug(t,e,r,n);for(const o in t.propsOptions[0])o in r||(r[o]=void 0);i?t.props=s?r:Ig(r):t.type.props?t.props=r:t.props=n,t.attrs=n}function TS(t,e,i,s){const{props:r,attrs:n,vnode:{patchFlag:o}}=t,a=$e(r),[l]=t.propsOptions;let d=!1;if((s||o>0)&&!(o&16)){if(o&8){const u=t.vnode.dynamicProps;for(let h=0;h<u.length;h++){let p=u[h];if(Ol(t.emitsOptions,p))continue;const g=e[p];if(l)if(We(n,p))g!==n[p]&&(n[p]=g,d=!0);else{const w=mi(p);r[w]=Mc(l,a,w,g,t,!1)}else g!==n[p]&&(n[p]=g,d=!0)}}}else{Ug(t,e,r,n)&&(d=!0);let u;for(const h in a)(!e||!We(e,h)&&((u=on(h))===h||!We(e,u)))&&(l?i&&(i[h]!==void 0||i[u]!==void 0)&&(r[h]=Mc(l,a,h,void 0,t,!0)):delete r[h]);if(n!==a)for(const h in n)(!e||!We(e,h))&&(delete n[h],d=!0)}d&&ms(t.attrs,"set","")}function Ug(t,e,i,s){const[r,n]=t.propsOptions;let o=!1,a;if(e)for(let l in e){if(co(l))continue;const d=e[l];let u;r&&We(r,u=mi(l))?!n||!n.includes(u)?i[u]=d:(a||(a={}))[u]=d:Ol(t.emitsOptions,l)||(!(l in s)||d!==s[l])&&(s[l]=d,o=!0)}if(n){const l=$e(i),d=a||je;for(let u=0;u<n.length;u++){const h=n[u];i[h]=Mc(r,l,h,d[h],t,!We(d,h))}}return o}function Mc(t,e,i,s,r,n){const o=t[i];if(o!=null){const a=We(o,"default");if(a&&s===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&Te(l)){const{propsDefaults:d}=r;if(i in d)s=d[i];else{const u=Qo(r);s=d[i]=l.call(null,e),u()}}else s=l;r.ce&&r.ce._setProp(i,s)}o[0]&&(n&&!a?s=!1:o[1]&&(s===""||s===on(i))&&(s=!0))}return s}const xS=new WeakMap;function Yg(t,e,i=!1){const s=i?xS:e.propsCache,r=s.get(t);if(r)return r;const n=t.props,o={},a=[];let l=!1;if(!Te(t)){const u=h=>{l=!0;const[p,g]=Yg(h,e,!0);At(o,p),g&&a.push(...g)};!i&&e.mixins.length&&e.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}if(!n&&!l)return Ge(t)&&s.set(t,ur),ur;if(_e(n))for(let u=0;u<n.length;u++){const h=mi(n[u]);ff(h)&&(o[h]=je)}else if(n)for(const u in n){const h=mi(u);if(ff(h)){const p=n[u],g=o[h]=_e(p)||Te(p)?{type:p}:At({},p),w=g.type;let _=!1,P=!0;if(_e(w))for(let k=0;k<w.length;++k){const R=w[k],$=Te(R)&&R.name;if($==="Boolean"){_=!0;break}else $==="String"&&(P=!1)}else _=Te(w)&&w.name==="Boolean";g[0]=_,g[1]=P,(_||We(g,"default"))&&a.push(h)}}const d=[o,a];return Ge(t)&&s.set(t,d),d}function ff(t){return t[0]!=="$"&&!co(t)}const Gg=t=>t[0]==="_"||t==="$stable",Iu=t=>_e(t)?t.map(Ki):[Ki(t)],ES=(t,e,i)=>{if(e._n)return e;const s=$g((...r)=>Iu(e(...r)),i);return s._c=!1,s},Kg=(t,e,i)=>{const s=t._ctx;for(const r in t){if(Gg(r))continue;const n=t[r];if(Te(n))e[r]=ES(r,n,s);else if(n!=null){const o=Iu(n);e[r]=()=>o}}},qg=(t,e)=>{const i=Iu(e);t.slots.default=()=>i},Jg=(t,e,i)=>{for(const s in e)(i||s!=="_")&&(t[s]=e[s])},IS=(t,e,i)=>{const s=t.slots=Bg();if(t.vnode.shapeFlag&32){const r=e._;r?(Jg(s,e,i),i&&rg(s,"_",r,!0)):Kg(e,s)}else e&&qg(t,e)},DS=(t,e,i)=>{const{vnode:s,slots:r}=t;let n=!0,o=je;if(s.shapeFlag&32){const a=e._;a?i&&a===1?n=!1:Jg(r,e,i):(n=!e.$stable,Kg(e,r)),o=e}else e&&(qg(t,e),o={default:1});if(n)for(const a in r)!Gg(a)&&o[a]==null&&delete r[a]},Jt=FS;function kS(t){return CS(t)}function CS(t,e){const i=Cl();i.__VUE__=!0;const{insert:s,remove:r,patchProp:n,createElement:o,createText:a,createComment:l,setText:d,setElementText:u,parentNode:h,nextSibling:p,setScopeId:g=Qi,insertStaticContent:w}=t,_=(v,b,E,L=null,F=null,j=null,se=void 0,ee=null,X=!!b.dynamicChildren)=>{if(v===b)return;v&&!Xr(v,b)&&(L=x(v),nt(v,F,j,!0),v=null),b.patchFlag===-2&&(X=!1,b.dynamicChildren=null);const{type:G,ref:ve,shapeFlag:ne}=b;switch(G){case Rl:P(v,b,E,L);break;case qs:k(v,b,E,L);break;case Ha:v==null&&R(b,E,L,se);break;case M:Oe(v,b,E,L,F,j,se,ee,X);break;default:ne&1?Z(v,b,E,L,F,j,se,ee,X):ne&6?Me(v,b,E,L,F,j,se,ee,X):(ne&64||ne&128)&&G.process(v,b,E,L,F,j,se,ee,X,B)}ve!=null&&F&&ol(ve,v&&v.ref,j,b||v,!b)},P=(v,b,E,L)=>{if(v==null)s(b.el=a(b.children),E,L);else{const F=b.el=v.el;b.children!==v.children&&d(F,b.children)}},k=(v,b,E,L)=>{v==null?s(b.el=l(b.children||""),E,L):b.el=v.el},R=(v,b,E,L)=>{[v.el,v.anchor]=w(v.children,b,E,L,v.el,v.anchor)},$=({el:v,anchor:b},E,L)=>{let F;for(;v&&v!==b;)F=p(v),s(v,E,L),v=F;s(b,E,L)},A=({el:v,anchor:b})=>{let E;for(;v&&v!==b;)E=p(v),r(v),v=E;r(b)},Z=(v,b,E,L,F,j,se,ee,X)=>{b.type==="svg"?se="svg":b.type==="math"&&(se="mathml"),v==null?le(b,E,L,F,j,se,ee,X):ae(v,b,F,j,se,ee,X)},le=(v,b,E,L,F,j,se,ee)=>{let X,G;const{props:ve,shapeFlag:ne,transition:he,dirs:be}=v;if(X=v.el=o(v.type,j,ve&&ve.is,ve),ne&8?u(X,v.children):ne&16&&ie(v.children,X,null,L,F,Ed(v,j),se,ee),be&&mn(v,null,L,"created"),te(X,v,v.scopeId,se,L),ve){for(const ze in ve)ze!=="value"&&!co(ze)&&n(X,ze,null,ve[ze],j,L);"value"in ve&&n(X,"value",null,ve.value,j),(G=ve.onVnodeBeforeMount)&&Hi(G,L,v)}be&&mn(v,null,L,"beforeMount");const Ce=PS(F,he);Ce&&he.beforeEnter(X),s(X,b,E),((G=ve&&ve.onVnodeMounted)||Ce||be)&&Jt(()=>{G&&Hi(G,L,v),Ce&&he.enter(X),be&&mn(v,null,L,"mounted")},F)},te=(v,b,E,L,F)=>{if(E&&g(v,E),L)for(let j=0;j<L.length;j++)g(v,L[j]);if(F){let j=F.subTree;if(b===j||iv(j.type)&&(j.ssContent===b||j.ssFallback===b)){const se=F.vnode;te(v,se,se.scopeId,se.slotScopeIds,F.parent)}}},ie=(v,b,E,L,F,j,se,ee,X=0)=>{for(let G=X;G<v.length;G++){const ve=v[G]=ee?Fs(v[G]):Ki(v[G]);_(null,ve,b,E,L,F,j,se,ee)}},ae=(v,b,E,L,F,j,se)=>{const ee=b.el=v.el;let{patchFlag:X,dynamicChildren:G,dirs:ve}=b;X|=v.patchFlag&16;const ne=v.props||je,he=b.props||je;let be;if(E&&pn(E,!1),(be=he.onVnodeBeforeUpdate)&&Hi(be,E,b,v),ve&&mn(b,v,E,"beforeUpdate"),E&&pn(E,!0),(ne.innerHTML&&he.innerHTML==null||ne.textContent&&he.textContent==null)&&u(ee,""),G?pe(v.dynamicChildren,G,ee,E,L,Ed(b,F),j):se||Se(v,b,ee,null,E,L,Ed(b,F),j,!1),X>0){if(X&16)ke(ee,ne,he,E,F);else if(X&2&&ne.class!==he.class&&n(ee,"class",null,he.class,F),X&4&&n(ee,"style",ne.style,he.style,F),X&8){const Ce=b.dynamicProps;for(let ze=0;ze<Ce.length;ze++){const Re=Ce[ze],Kt=ne[Re],Bt=he[Re];(Bt!==Kt||Re==="value")&&n(ee,Re,Kt,Bt,F,E)}}X&1&&v.children!==b.children&&u(ee,b.children)}else!se&&G==null&&ke(ee,ne,he,E,F);((be=he.onVnodeUpdated)||ve)&&Jt(()=>{be&&Hi(be,E,b,v),ve&&mn(b,v,E,"updated")},L)},pe=(v,b,E,L,F,j,se)=>{for(let ee=0;ee<b.length;ee++){const X=v[ee],G=b[ee],ve=X.el&&(X.type===M||!Xr(X,G)||X.shapeFlag&70)?h(X.el):E;_(X,G,ve,null,L,F,j,se,!0)}},ke=(v,b,E,L,F)=>{if(b!==E){if(b!==je)for(const j in b)!co(j)&&!(j in E)&&n(v,j,b[j],null,F,L);for(const j in E){if(co(j))continue;const se=E[j],ee=b[j];se!==ee&&j!=="value"&&n(v,j,ee,se,F,L)}"value"in E&&n(v,"value",b.value,E.value,F)}},Oe=(v,b,E,L,F,j,se,ee,X)=>{const G=b.el=v?v.el:a(""),ve=b.anchor=v?v.anchor:a("");let{patchFlag:ne,dynamicChildren:he,slotScopeIds:be}=b;be&&(ee=ee?ee.concat(be):be),v==null?(s(G,E,L),s(ve,E,L),ie(b.children||[],E,ve,F,j,se,ee,X)):ne>0&&ne&64&&he&&v.dynamicChildren?(pe(v.dynamicChildren,he,E,F,j,se,ee),(b.key!=null||F&&b===F.subTree)&&Qg(v,b,!0)):Se(v,b,E,ve,F,j,se,ee,X)},Me=(v,b,E,L,F,j,se,ee,X)=>{b.slotScopeIds=ee,v==null?b.shapeFlag&512?F.ctx.activate(b,E,L,se,X):Ze(b,E,L,F,j,se,X):st(v,b,X)},Ze=(v,b,E,L,F,j,se)=>{const ee=v.component=KS(v,L,F);if(Eu(v)&&(ee.ctx.renderer=B),qS(ee,!1,se),ee.asyncDep){if(F&&F.registerDep(ee,we,se),!v.el){const X=ee.subTree=D(qs);k(null,X,b,E)}}else we(ee,v,b,E,F,j,se)},st=(v,b,E)=>{const L=b.component=v.component;if(WS(v,b,E))if(L.asyncDep&&!L.asyncResolved){ce(L,b,E);return}else L.next=b,L.update();else b.el=v.el,L.vnode=b},we=(v,b,E,L,F,j,se)=>{const ee=()=>{if(v.isMounted){let{next:ne,bu:he,u:be,parent:Ce,vnode:ze}=v;{const ji=Zg(v);if(ji){ne&&(ne.el=ze.el,ce(v,ne,se)),ji.asyncDep.then(()=>{v.isUnmounted||ee()});return}}let Re=ne,Kt;pn(v,!1),ne?(ne.el=ze.el,ce(v,ne,se)):ne=ze,he&&ja(he),(Kt=ne.props&&ne.props.onVnodeBeforeUpdate)&&Hi(Kt,Ce,ne,ze),pn(v,!0);const Bt=pf(v),Fi=v.subTree;v.subTree=Bt,_(Fi,Bt,h(Fi.el),x(Fi),v,F,j),ne.el=Bt.el,Re===null&&zS(v,Bt.el),be&&Jt(be,F),(Kt=ne.props&&ne.props.onVnodeUpdated)&&Jt(()=>Hi(Kt,Ce,ne,ze),F)}else{let ne;const{el:he,props:be}=b,{bm:Ce,m:ze,parent:Re,root:Kt,type:Bt}=v,Fi=gr(b);pn(v,!1),Ce&&ja(Ce),!Fi&&(ne=be&&be.onVnodeBeforeMount)&&Hi(ne,Re,b),pn(v,!0);{Kt.ce&&Kt.ce._injectChildStyle(Bt);const ji=v.subTree=pf(v);_(null,ji,E,L,v,F,j),b.el=ji.el}if(ze&&Jt(ze,F),!Fi&&(ne=be&&be.onVnodeMounted)){const ji=b;Jt(()=>Hi(ne,Re,ji),F)}(b.shapeFlag&256||Re&&gr(Re.vnode)&&Re.vnode.shapeFlag&256)&&v.a&&Jt(v.a,F),v.isMounted=!0,b=E=L=null}};v.scope.on();const X=v.effect=new hg(ee);v.scope.off();const G=v.update=X.run.bind(X),ve=v.job=X.runIfDirty.bind(X);ve.i=v,ve.id=v.uid,X.scheduler=()=>wu(ve),pn(v,!0),G()},ce=(v,b,E)=>{b.component=v;const L=v.vnode.props;v.vnode=b,v.next=null,TS(v,b.props,L,E),DS(v,b.children,E),an(),of(v),ln()},Se=(v,b,E,L,F,j,se,ee,X=!1)=>{const G=v&&v.children,ve=v?v.shapeFlag:0,ne=b.children,{patchFlag:he,shapeFlag:be}=b;if(he>0){if(he&128){dt(G,ne,E,L,F,j,se,ee,X);return}else if(he&256){et(G,ne,E,L,F,j,se,ee,X);return}}be&8?(ve&16&&ut(G,F,j),ne!==G&&u(E,ne)):ve&16?be&16?dt(G,ne,E,L,F,j,se,ee,X):ut(G,F,j,!0):(ve&8&&u(E,""),be&16&&ie(ne,E,L,F,j,se,ee,X))},et=(v,b,E,L,F,j,se,ee,X)=>{v=v||ur,b=b||ur;const G=v.length,ve=b.length,ne=Math.min(G,ve);let he;for(he=0;he<ne;he++){const be=b[he]=X?Fs(b[he]):Ki(b[he]);_(v[he],be,E,null,F,j,se,ee,X)}G>ve?ut(v,F,j,!0,!1,ne):ie(b,E,L,F,j,se,ee,X,ne)},dt=(v,b,E,L,F,j,se,ee,X)=>{let G=0;const ve=b.length;let ne=v.length-1,he=ve-1;for(;G<=ne&&G<=he;){const be=v[G],Ce=b[G]=X?Fs(b[G]):Ki(b[G]);if(Xr(be,Ce))_(be,Ce,E,null,F,j,se,ee,X);else break;G++}for(;G<=ne&&G<=he;){const be=v[ne],Ce=b[he]=X?Fs(b[he]):Ki(b[he]);if(Xr(be,Ce))_(be,Ce,E,null,F,j,se,ee,X);else break;ne--,he--}if(G>ne){if(G<=he){const be=he+1,Ce=be<ve?b[be].el:L;for(;G<=he;)_(null,b[G]=X?Fs(b[G]):Ki(b[G]),E,Ce,F,j,se,ee,X),G++}}else if(G>he)for(;G<=ne;)nt(v[G],F,j,!0),G++;else{const be=G,Ce=G,ze=new Map;for(G=Ce;G<=he;G++){const qt=b[G]=X?Fs(b[G]):Ki(b[G]);qt.key!=null&&ze.set(qt.key,G)}let Re,Kt=0;const Bt=he-Ce+1;let Fi=!1,ji=0;const Qr=new Array(Bt);for(G=0;G<Bt;G++)Qr[G]=0;for(G=be;G<=ne;G++){const qt=v[G];if(Kt>=Bt){nt(qt,F,j,!0);continue}let Bi;if(qt.key!=null)Bi=ze.get(qt.key);else for(Re=Ce;Re<=he;Re++)if(Qr[Re-Ce]===0&&Xr(qt,b[Re])){Bi=Re;break}Bi===void 0?nt(qt,F,j,!0):(Qr[Bi-Ce]=G+1,Bi>=ji?ji=Bi:Fi=!0,_(qt,b[Bi],E,null,F,j,se,ee,X),Kt++)}const Kh=Fi?MS(Qr):ur;for(Re=Kh.length-1,G=Bt-1;G>=0;G--){const qt=Ce+G,Bi=b[qt],qh=qt+1<ve?b[qt+1].el:L;Qr[G]===0?_(null,Bi,E,qh,F,j,se,ee,X):Fi&&(Re<0||G!==Kh[Re]?ct(Bi,E,qh,2):Re--)}}},ct=(v,b,E,L,F=null)=>{const{el:j,type:se,transition:ee,children:X,shapeFlag:G}=v;if(G&6){ct(v.component.subTree,b,E,L);return}if(G&128){v.suspense.move(b,E,L);return}if(G&64){se.move(v,b,E,B);return}if(se===M){s(j,b,E);for(let ne=0;ne<X.length;ne++)ct(X[ne],b,E,L);s(v.anchor,b,E);return}if(se===Ha){$(v,b,E);return}if(L!==2&&G&1&&ee)if(L===0)ee.beforeEnter(j),s(j,b,E),Jt(()=>ee.enter(j),F);else{const{leave:ne,delayLeave:he,afterLeave:be}=ee,Ce=()=>s(j,b,E),ze=()=>{ne(j,()=>{Ce(),be&&be()})};he?he(j,Ce,ze):ze()}else s(j,b,E)},nt=(v,b,E,L=!1,F=!1)=>{const{type:j,props:se,ref:ee,children:X,dynamicChildren:G,shapeFlag:ve,patchFlag:ne,dirs:he,cacheIndex:be}=v;if(ne===-2&&(F=!1),ee!=null&&ol(ee,null,E,v,!0),be!=null&&(b.renderCache[be]=void 0),ve&256){b.ctx.deactivate(v);return}const Ce=ve&1&&he,ze=!gr(v);let Re;if(ze&&(Re=se&&se.onVnodeBeforeUnmount)&&Hi(Re,b,v),ve&6)Nt(v.component,E,L);else{if(ve&128){v.suspense.unmount(E,L);return}Ce&&mn(v,null,b,"beforeUnmount"),ve&64?v.type.remove(v,b,E,B,L):G&&!G.hasOnce&&(j!==M||ne>0&&ne&64)?ut(G,b,E,!1,!0):(j===M&&ne&384||!F&&ve&16)&&ut(X,b,E),L&&mt(v)}(ze&&(Re=se&&se.onVnodeUnmounted)||Ce)&&Jt(()=>{Re&&Hi(Re,b,v),Ce&&mn(v,null,b,"unmounted")},E)},mt=v=>{const{type:b,el:E,anchor:L,transition:F}=v;if(b===M){It(E,L);return}if(b===Ha){A(v);return}const j=()=>{r(E),F&&!F.persisted&&F.afterLeave&&F.afterLeave()};if(v.shapeFlag&1&&F&&!F.persisted){const{leave:se,delayLeave:ee}=F,X=()=>se(E,j);ee?ee(v.el,j,X):X()}else j()},It=(v,b)=>{let E;for(;v!==b;)E=p(v),r(v),v=E;r(b)},Nt=(v,b,E)=>{const{bum:L,scope:F,job:j,subTree:se,um:ee,m:X,a:G}=v;mf(X),mf(G),L&&ja(L),F.stop(),j&&(j.flags|=8,nt(se,v,b,E)),ee&&Jt(ee,b),Jt(()=>{v.isUnmounted=!0},b),b&&b.pendingBranch&&!b.isUnmounted&&v.asyncDep&&!v.asyncResolved&&v.suspenseId===b.pendingId&&(b.deps--,b.deps===0&&b.resolve())},ut=(v,b,E,L=!1,F=!1,j=0)=>{for(let se=j;se<v.length;se++)nt(v[se],b,E,L,F)},x=v=>{if(v.shapeFlag&6)return x(v.component.subTree);if(v.shapeFlag&128)return v.suspense.next();const b=p(v.anchor||v.el),E=b&&b[Gw];return E?p(E):b};let I=!1;const C=(v,b,E)=>{v==null?b._vnode&&nt(b._vnode,null,null,!0):_(b._vnode||null,v,b,null,null,null,E),b._vnode=v,I||(I=!0,of(),Ag(),I=!1)},B={p:_,um:nt,m:ct,r:mt,mt:Ze,mc:ie,pc:Se,pbc:pe,n:x,o:t};return{render:C,hydrate:void 0,createApp:bS(C)}}function Ed({type:t,props:e},i){return i==="svg"&&t==="foreignObject"||i==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:i}function pn({effect:t,job:e},i){i?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function PS(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function Qg(t,e,i=!1){const s=t.children,r=e.children;if(_e(s)&&_e(r))for(let n=0;n<s.length;n++){const o=s[n];let a=r[n];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=r[n]=Fs(r[n]),a.el=o.el),!i&&a.patchFlag!==-2&&Qg(o,a)),a.type===Rl&&(a.el=o.el)}}function MS(t){const e=t.slice(),i=[0];let s,r,n,o,a;const l=t.length;for(s=0;s<l;s++){const d=t[s];if(d!==0){if(r=i[i.length-1],t[r]<d){e[s]=r,i.push(s);continue}for(n=0,o=i.length-1;n<o;)a=n+o>>1,t[i[a]]<d?n=a+1:o=a;d<t[i[n]]&&(n>0&&(e[s]=i[n-1]),i[n]=s)}}for(n=i.length,o=i[n-1];n-- >0;)i[n]=o,o=e[o];return i}function Zg(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:Zg(e)}function mf(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const AS=Symbol.for("v-scx"),OS=()=>Zi(AS);function mo(t,e,i){return Xg(t,e,i)}function Xg(t,e,i=je){const{immediate:s,deep:r,flush:n,once:o}=i,a=At({},i),l=e&&s||!e&&n!=="post";let d;if(Sr){if(n==="sync"){const g=OS();d=g.__watcherHandles||(g.__watcherHandles=[])}else if(!l){const g=()=>{};return g.stop=Qi,g.resume=Qi,g.pause=Qi,g}}const u=bt;a.call=(g,w,_)=>ts(g,u,w,_);let h=!1;n==="post"?a.scheduler=g=>{Jt(g,u&&u.suspense)}:n!=="sync"&&(h=!0,a.scheduler=(g,w)=>{w?g():wu(g)}),a.augmentJob=g=>{e&&(g.flags|=4),h&&(g.flags|=2,u&&(g.id=u.uid,g.i=u))};const p=Bw(t,e,a);return Sr&&(d?d.push(p):l&&p()),p}function RS(t,e,i){const s=this.proxy,r=ht(t)?t.includes(".")?ev(s,t):()=>s[t]:t.bind(s,s);let n;Te(e)?n=e:(n=e.handler,i=e);const o=Qo(this),a=Xg(r,n.bind(s),i);return o(),a}function ev(t,e){const i=e.split(".");return()=>{let s=t;for(let r=0;r<i.length&&s;r++)s=s[i[r]];return s}}const $S=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${mi(e)}Modifiers`]||t[`${on(e)}Modifiers`];function NS(t,e,...i){if(t.isUnmounted)return;const s=t.vnode.props||je;let r=i;const n=e.startsWith("update:"),o=n&&$S(s,e.slice(7));o&&(o.trim&&(r=i.map(u=>ht(u)?u.trim():u)),o.number&&(r=i.map(tl)));let a,l=s[a=_d(e)]||s[a=_d(mi(e))];!l&&n&&(l=s[a=_d(on(e))]),l&&ts(l,t,6,r);const d=s[a+"Once"];if(d){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,ts(d,t,6,r)}}function tv(t,e,i=!1){const s=e.emitsCache,r=s.get(t);if(r!==void 0)return r;const n=t.emits;let o={},a=!1;if(!Te(t)){const l=d=>{const u=tv(d,e,!0);u&&(a=!0,At(o,u))};!i&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!n&&!a?(Ge(t)&&s.set(t,null),null):(_e(n)?n.forEach(l=>o[l]=null):At(o,n),Ge(t)&&s.set(t,o),o)}function Ol(t,e){return!t||!Il(e)?!1:(e=e.slice(2).replace(/Once$/,""),We(t,e[0].toLowerCase()+e.slice(1))||We(t,on(e))||We(t,e))}function pf(t){const{type:e,vnode:i,proxy:s,withProxy:r,propsOptions:[n],slots:o,attrs:a,emit:l,render:d,renderCache:u,props:h,data:p,setupState:g,ctx:w,inheritAttrs:_}=t,P=rl(t);let k,R;try{if(i.shapeFlag&4){const A=r||s,Z=A;k=Ki(d.call(Z,A,u,h,g,p,w)),R=a}else{const A=e;k=Ki(A.length>1?A(h,{attrs:a,slots:o,emit:l}):A(h,null)),R=e.props?a:LS(a)}}catch(A){po.length=0,Jo(A,t,1),k=D(qs)}let $=k;if(R&&_!==!1){const A=Object.keys(R),{shapeFlag:Z}=$;A.length&&Z&7&&(n&&A.some(du)&&(R=VS(R,n)),$=wr($,R,!1,!0))}return i.dirs&&($=wr($,null,!1,!0),$.dirs=$.dirs?$.dirs.concat(i.dirs):i.dirs),i.transition&&Su($,i.transition),k=$,rl(P),k}const LS=t=>{let e;for(const i in t)(i==="class"||i==="style"||Il(i))&&((e||(e={}))[i]=t[i]);return e},VS=(t,e)=>{const i={};for(const s in t)(!du(s)||!(s.slice(9)in e))&&(i[s]=t[s]);return i};function WS(t,e,i){const{props:s,children:r,component:n}=t,{props:o,children:a,patchFlag:l}=e,d=n.emitsOptions;if(e.dirs||e.transition)return!0;if(i&&l>=0){if(l&1024)return!0;if(l&16)return s?gf(s,o,d):!!o;if(l&8){const u=e.dynamicProps;for(let h=0;h<u.length;h++){const p=u[h];if(o[p]!==s[p]&&!Ol(d,p))return!0}}}else return(r||a)&&(!a||!a.$stable)?!0:s===o?!1:s?o?gf(s,o,d):!0:!!o;return!1}function gf(t,e,i){const s=Object.keys(e);if(s.length!==Object.keys(t).length)return!0;for(let r=0;r<s.length;r++){const n=s[r];if(e[n]!==t[n]&&!Ol(i,n))return!0}return!1}function zS({vnode:t,parent:e},i){for(;e;){const s=e.subTree;if(s.suspense&&s.suspense.activeBranch===t&&(s.el=t.el),s===t)(t=e.vnode).el=i,e=e.parent;else break}}const iv=t=>t.__isSuspense;function FS(t,e){e&&e.pendingBranch?_e(t)?e.effects.push(...t):e.effects.push(t):Yw(t)}const M=Symbol.for("v-fgt"),Rl=Symbol.for("v-txt"),qs=Symbol.for("v-cmt"),Ha=Symbol.for("v-stc"),po=[];let Zt=null;function f(t=!1){po.push(Zt=t?null:[])}function jS(){po.pop(),Zt=po[po.length-1]||null}let Co=1;function vf(t,e=!1){Co+=t,t<0&&Zt&&e&&(Zt.hasOnce=!0)}function sv(t){return t.dynamicChildren=Co>0?Zt||ur:null,jS(),Co>0&&Zt&&Zt.push(t),t}function m(t,e,i,s,r,n){return sv(c(t,e,i,s,r,n,!0))}function K(t,e,i,s,r){return sv(D(t,e,i,s,r,!0))}function Po(t){return t?t.__v_isVNode===!0:!1}function Xr(t,e){return t.type===e.type&&t.key===e.key}const nv=({key:t})=>t??null,Ua=({ref:t,ref_key:e,ref_for:i})=>(typeof t=="number"&&(t=""+t),t!=null?ht(t)||ot(t)||Te(t)?{i:St,r:t,k:e,f:!!i}:t:null);function c(t,e=null,i=null,s=0,r=null,n=t===M?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&nv(e),ref:e&&Ua(e),scopeId:Rg,slotScopeIds:null,children:i,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:n,patchFlag:s,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:St};return a?(Du(l,i),n&128&&t.normalize(l)):i&&(l.shapeFlag|=ht(i)?8:16),Co>0&&!o&&Zt&&(l.patchFlag>0||n&6)&&l.patchFlag!==32&&Zt.push(l),l}const D=BS;function BS(t,e=null,i=null,s=0,r=null,n=!1){if((!t||t===cS)&&(t=qs),Po(t)){const a=wr(t,e,!0);return i&&Du(a,i),Co>0&&!n&&Zt&&(a.shapeFlag&6?Zt[Zt.indexOf(t)]=a:Zt.push(a)),a.patchFlag=-2,a}if(eT(t)&&(t=t.__vccOpts),e){e=HS(e);let{class:a,style:l}=e;a&&!ht(a)&&(e.class=O(a)),Ge(l)&&(yu(l)&&!_e(l)&&(l=At({},l)),e.style=ue(l))}const o=ht(t)?1:iv(t)?128:Kw(t)?64:Ge(t)?4:Te(t)?2:0;return c(t,e,i,s,r,o,n,!0)}function HS(t){return t?yu(t)||Hg(t)?At({},t):t:null}function wr(t,e,i=!1,s=!1){const{props:r,ref:n,patchFlag:o,children:a,transition:l}=t,d=e?US(r||{},e):r,u={__v_isVNode:!0,__v_skip:!0,type:t.type,props:d,key:d&&nv(d),ref:e&&e.ref?i&&n?_e(n)?n.concat(Ua(e)):[n,Ua(e)]:Ua(e):n,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==M?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:l,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&wr(t.ssContent),ssFallback:t.ssFallback&&wr(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return l&&s&&Su(u,l.clone(u)),u}function Js(t=" ",e=0){return D(Rl,null,t,e)}function rv(t,e){const i=D(Ha,null,t);return i.staticCount=e,i}function y(t="",e=!1){return e?(f(),K(qs,null,t)):D(qs,null,t)}function Ki(t){return t==null||typeof t=="boolean"?D(qs):_e(t)?D(M,null,t.slice()):Po(t)?Fs(t):D(Rl,null,String(t))}function Fs(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:wr(t)}function Du(t,e){let i=0;const{shapeFlag:s}=t;if(e==null)e=null;else if(_e(e))i=16;else if(typeof e=="object")if(s&65){const r=e.default;r&&(r._c&&(r._d=!1),Du(t,r()),r._c&&(r._d=!0));return}else{i=32;const r=e._;!r&&!Hg(e)?e._ctx=St:r===3&&St&&(St.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else Te(e)?(e={default:e,_ctx:St},i=32):(e=String(e),s&64?(i=16,e=[Js(e)]):i=8);t.children=e,t.shapeFlag|=i}function US(...t){const e={};for(let i=0;i<t.length;i++){const s=t[i];for(const r in s)if(r==="class")e.class!==s.class&&(e.class=O([e.class,s.class]));else if(r==="style")e.style=ue([e.style,s.style]);else if(Il(r)){const n=e[r],o=s[r];o&&n!==o&&!(_e(n)&&n.includes(o))&&(e[r]=n?[].concat(n,o):o)}else r!==""&&(e[r]=s[r])}return e}function Hi(t,e,i,s=null){ts(t,e,7,[i,s])}const YS=Fg();let GS=0;function KS(t,e,i){const s=t.type,r=(e?e.appContext:t.appContext)||YS,n={uid:GS++,vnode:t,type:s,parent:e,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new dg(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(r.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Yg(s,r),emitsOptions:tv(s,r),emit:null,emitted:null,propsDefaults:je,inheritAttrs:s.inheritAttrs,ctx:je,data:je,props:je,attrs:je,slots:je,refs:je,setupState:je,setupContext:null,suspense:i,suspenseId:i?i.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return n.ctx={_:n},n.root=e?e.root:n,n.emit=NS.bind(null,n),t.ce&&t.ce(n),n}let bt=null,ll,Ac;{const t=Cl(),e=(i,s)=>{let r;return(r=t[i])||(r=t[i]=[]),r.push(s),n=>{r.length>1?r.forEach(o=>o(n)):r[0](n)}};ll=e("__VUE_INSTANCE_SETTERS__",i=>bt=i),Ac=e("__VUE_SSR_SETTERS__",i=>Sr=i)}const Qo=t=>{const e=bt;return ll(t),t.scope.on(),()=>{t.scope.off(),ll(e)}},_f=()=>{bt&&bt.scope.off(),ll(null)};function ov(t){return t.vnode.shapeFlag&4}let Sr=!1;function qS(t,e=!1,i=!1){e&&Ac(e);const{props:s,children:r}=t.vnode,n=ov(t);SS(t,s,n,e),IS(t,r,i);const o=n?JS(t,e):void 0;return e&&Ac(!1),o}function JS(t,e){const i=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,fS);const{setup:s}=i;if(s){an();const r=t.setupContext=s.length>1?ZS(t):null,n=Qo(t),o=qo(s,t,0,[t.props,r]),a=ig(o);if(ln(),n(),(a||t.sp)&&!gr(t)&&xu(t),a){if(o.then(_f,_f),e)return o.then(l=>{yf(t,l)}).catch(l=>{Jo(l,t,0)});t.asyncDep=o}else yf(t,o)}else av(t)}function yf(t,e,i){Te(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:Ge(e)&&(t.setupState=Cg(e)),av(t)}function av(t,e,i){const s=t.type;t.render||(t.render=s.render||Qi);{const r=Qo(t);an();try{mS(t)}finally{ln(),r()}}}const QS={get(t,e){return kt(t,"get",""),t[e]}};function ZS(t){const e=i=>{t.exposed=i||{}};return{attrs:new Proxy(t.attrs,QS),slots:t.slots,emit:t.emit,expose:e}}function $l(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(Cg(bu(t.exposed)),{get(e,i){if(i in e)return e[i];if(i in fo)return fo[i](t)},has(e,i){return i in e||i in fo}})):t.proxy}function XS(t,e=!0){return Te(t)?t.displayName||t.name:t.name||e&&t.__name}function eT(t){return Te(t)&&"__vccOpts"in t}const di=(t,e)=>Fw(t,e,Sr);function lv(t,e,i){const s=arguments.length;return s===2?Ge(e)&&!_e(e)?Po(e)?D(t,null,[e]):D(t,e):D(t,null,e):(s>3?i=Array.prototype.slice.call(arguments,2):s===3&&Po(i)&&(i=[i]),D(t,e,i))}const tT="3.5.13";/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Oc;const bf=typeof window<"u"&&window.trustedTypes;if(bf)try{Oc=bf.createPolicy("vue",{createHTML:t=>t})}catch{}const dv=Oc?t=>Oc.createHTML(t):t=>t,iT="http://www.w3.org/2000/svg",sT="http://www.w3.org/1998/Math/MathML",hs=typeof document<"u"?document:null,wf=hs&&hs.createElement("template"),nT={insert:(t,e,i)=>{e.insertBefore(t,i||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,i,s)=>{const r=e==="svg"?hs.createElementNS(iT,t):e==="mathml"?hs.createElementNS(sT,t):i?hs.createElement(t,{is:i}):hs.createElement(t);return t==="select"&&s&&s.multiple!=null&&r.setAttribute("multiple",s.multiple),r},createText:t=>hs.createTextNode(t),createComment:t=>hs.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>hs.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,i,s,r,n){const o=i?i.previousSibling:e.lastChild;if(r&&(r===n||r.nextSibling))for(;e.insertBefore(r.cloneNode(!0),i),!(r===n||!(r=r.nextSibling)););else{wf.innerHTML=dv(s==="svg"?`<svg>${t}</svg>`:s==="mathml"?`<math>${t}</math>`:t);const a=wf.content;if(s==="svg"||s==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,i)}return[o?o.nextSibling:e.firstChild,i?i.previousSibling:e.lastChild]}},rT=Symbol("_vtc");function oT(t,e,i){const s=t[rT];s&&(e=(e?[e,...s]:[...s]).join(" ")),e==null?t.removeAttribute("class"):i?t.setAttribute("class",e):t.className=e}const dl=Symbol("_vod"),cv=Symbol("_vsh"),Ie={beforeMount(t,{value:e},{transition:i}){t[dl]=t.style.display==="none"?"":t.style.display,i&&e?i.beforeEnter(t):eo(t,e)},mounted(t,{value:e},{transition:i}){i&&e&&i.enter(t)},updated(t,{value:e,oldValue:i},{transition:s}){!e!=!i&&(s?e?(s.beforeEnter(t),eo(t,!0),s.enter(t)):s.leave(t,()=>{eo(t,!1)}):eo(t,e))},beforeUnmount(t,{value:e}){eo(t,e)}};function eo(t,e){t.style.display=e?t[dl]:"none",t[cv]=!e}const aT=Symbol(""),lT=/(^|;)\s*display\s*:/;function dT(t,e,i){const s=t.style,r=ht(i);let n=!1;if(i&&!r){if(e)if(ht(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();i[a]==null&&Ya(s,a,"")}else for(const o in e)i[o]==null&&Ya(s,o,"");for(const o in i)o==="display"&&(n=!0),Ya(s,o,i[o])}else if(r){if(e!==i){const o=s[aT];o&&(i+=";"+o),s.cssText=i,n=lT.test(i)}}else e&&t.removeAttribute("style");dl in t&&(t[dl]=n?s.display:"",t[cv]&&(s.display="none"))}const Sf=/\s*!important$/;function Ya(t,e,i){if(_e(i))i.forEach(s=>Ya(t,e,s));else if(i==null&&(i=""),e.startsWith("--"))t.setProperty(e,i);else{const s=cT(t,e);Sf.test(i)?t.setProperty(on(s),i.replace(Sf,""),"important"):t[s]=i}}const Tf=["Webkit","Moz","ms"],Id={};function cT(t,e){const i=Id[e];if(i)return i;let s=mi(e);if(s!=="filter"&&s in t)return Id[e]=s;s=kl(s);for(let r=0;r<Tf.length;r++){const n=Tf[r]+s;if(n in t)return Id[e]=n}return e}const xf="http://www.w3.org/1999/xlink";function Ef(t,e,i,s,r,n=hw(e)){s&&e.startsWith("xlink:")?i==null?t.removeAttributeNS(xf,e.slice(6,e.length)):t.setAttributeNS(xf,e,i):i==null||n&&!og(i)?t.removeAttribute(e):t.setAttribute(e,n?"":Ci(i)?String(i):i)}function If(t,e,i,s,r){if(e==="innerHTML"||e==="textContent"){i!=null&&(t[e]=e==="innerHTML"?dv(i):i);return}const n=t.tagName;if(e==="value"&&n!=="PROGRESS"&&!n.includes("-")){const a=n==="OPTION"?t.getAttribute("value")||"":t.value,l=i==null?t.type==="checkbox"?"on":"":String(i);(a!==l||!("_value"in t))&&(t.value=l),i==null&&t.removeAttribute(e),t._value=i;return}let o=!1;if(i===""||i==null){const a=typeof t[e];a==="boolean"?i=og(i):i==null&&a==="string"?(i="",o=!0):a==="number"&&(i=0,o=!0)}try{t[e]=i}catch{}o&&t.removeAttribute(r||e)}function gs(t,e,i,s){t.addEventListener(e,i,s)}function uT(t,e,i,s){t.removeEventListener(e,i,s)}const Df=Symbol("_vei");function hT(t,e,i,s,r=null){const n=t[Df]||(t[Df]={}),o=n[e];if(s&&o)o.value=s;else{const[a,l]=fT(e);if(s){const d=n[e]=gT(s,r);gs(t,a,d,l)}else o&&(uT(t,a,o,l),n[e]=void 0)}}const kf=/(?:Once|Passive|Capture)$/;function fT(t){let e;if(kf.test(t)){e={};let s;for(;s=t.match(kf);)t=t.slice(0,t.length-s[0].length),e[s[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):on(t.slice(2)),e]}let Dd=0;const mT=Promise.resolve(),pT=()=>Dd||(mT.then(()=>Dd=0),Dd=Date.now());function gT(t,e){const i=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=i.attached)return;ts(vT(s,i.value),e,5,[s])};return i.value=t,i.attached=pT(),i}function vT(t,e){if(_e(e)){const i=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{i.call(t),t._stopped=!0},e.map(s=>r=>!r._stopped&&s&&s(r))}else return e}const Cf=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,_T=(t,e,i,s,r,n)=>{const o=r==="svg";e==="class"?oT(t,s,o):e==="style"?dT(t,i,s):Il(e)?du(e)||hT(t,e,i,s,n):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):yT(t,e,s,o))?(If(t,e,s),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&Ef(t,e,s,o,n,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!ht(s))?If(t,mi(e),s,n,e):(e==="true-value"?t._trueValue=s:e==="false-value"&&(t._falseValue=s),Ef(t,e,s,o))};function yT(t,e,i,s){if(s)return!!(e==="innerHTML"||e==="textContent"||e in t&&Cf(e)&&Te(i));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const r=t.tagName;if(r==="IMG"||r==="VIDEO"||r==="CANVAS"||r==="SOURCE")return!1}return Cf(e)&&ht(i)?!1:e in t}const Qs=t=>{const e=t.props["onUpdate:modelValue"]||!1;return _e(e)?i=>ja(e,i):e};function bT(t){t.target.composing=!0}function Pf(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const hi=Symbol("_assign"),Pe={created(t,{modifiers:{lazy:e,trim:i,number:s}},r){t[hi]=Qs(r);const n=s||r.props&&r.props.type==="number";gs(t,e?"change":"input",o=>{if(o.target.composing)return;let a=t.value;i&&(a=a.trim()),n&&(a=tl(a)),t[hi](a)}),i&&gs(t,"change",()=>{t.value=t.value.trim()}),e||(gs(t,"compositionstart",bT),gs(t,"compositionend",Pf),gs(t,"change",Pf))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:i,modifiers:{lazy:s,trim:r,number:n}},o){if(t[hi]=Qs(o),t.composing)return;const a=(n||t.type==="number")&&!/^0\d/.test(t.value)?tl(t.value):t.value,l=e??"";a!==l&&(document.activeElement===t&&t.type!=="range"&&(s&&e===i||r&&t.value.trim()===l)||(t.value=l))}},ci={deep:!0,created(t,e,i){t[hi]=Qs(i),gs(t,"change",()=>{const s=t._modelValue,r=Tr(t),n=t.checked,o=t[hi];if(_e(s)){const a=hu(s,r),l=a!==-1;if(n&&!l)o(s.concat(r));else if(!n&&l){const d=[...s];d.splice(a,1),o(d)}}else if(Vr(s)){const a=new Set(s);n?a.add(r):a.delete(r),o(a)}else o(uv(t,n))})},mounted:Mf,beforeUpdate(t,e,i){t[hi]=Qs(i),Mf(t,e,i)}};function Mf(t,{value:e,oldValue:i},s){t._modelValue=e;let r;if(_e(e))r=hu(e,s.props.value)>-1;else if(Vr(e))r=e.has(s.props.value);else{if(e===i)return;r=Cn(e,uv(t,!0))}t.checked!==r&&(t.checked=r)}const or={created(t,{value:e},i){t.checked=Cn(e,i.props.value),t[hi]=Qs(i),gs(t,"change",()=>{t[hi](Tr(t))})},beforeUpdate(t,{value:e,oldValue:i},s){t[hi]=Qs(s),e!==i&&(t.checked=Cn(e,s.props.value))}},is={deep:!0,created(t,{value:e,modifiers:{number:i}},s){const r=Vr(e);gs(t,"change",()=>{const n=Array.prototype.filter.call(t.options,o=>o.selected).map(o=>i?tl(Tr(o)):Tr(o));t[hi](t.multiple?r?new Set(n):n:n[0]),t._assigning=!0,Ml(()=>{t._assigning=!1})}),t[hi]=Qs(s)},mounted(t,{value:e}){Af(t,e)},beforeUpdate(t,e,i){t[hi]=Qs(i)},updated(t,{value:e}){t._assigning||Af(t,e)}};function Af(t,e){const i=t.multiple,s=_e(e);if(!(i&&!s&&!Vr(e))){for(let r=0,n=t.options.length;r<n;r++){const o=t.options[r],a=Tr(o);if(i)if(s){const l=typeof a;l==="string"||l==="number"?o.selected=e.some(d=>String(d)===String(a)):o.selected=hu(e,a)>-1}else o.selected=e.has(a);else if(Cn(Tr(o),e)){t.selectedIndex!==r&&(t.selectedIndex=r);return}}!i&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function Tr(t){return"_value"in t?t._value:t.value}function uv(t,e){const i=e?"_trueValue":"_falseValue";return i in t?t[i]:e}const wT=["ctrl","shift","alt","meta"],ST={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>wT.some(i=>t[`${i}Key`]&&!e.includes(i))},fe=(t,e)=>{const i=t._withMods||(t._withMods={}),s=e.join(".");return i[s]||(i[s]=(r,...n)=>{for(let o=0;o<e.length;o++){const a=ST[e[o]];if(a&&a(r,e))return}return t(r,...n)})},TT={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},wt=(t,e)=>{const i=t._withKeys||(t._withKeys={}),s=e.join(".");return i[s]||(i[s]=r=>{if(!("key"in r))return;const n=on(r.key);if(e.some(o=>o===n||TT[o]===n))return t(r)})},xT=At({patchProp:_T},nT);let Of;function ET(){return Of||(Of=kS(xT))}const IT=(...t)=>{const e=ET().createApp(...t),{mount:i}=e;return e.mount=s=>{const r=kT(s);if(!r)return;const n=e._component;!Te(n)&&!n.render&&!n.template&&(n.template=r.innerHTML),r.nodeType===1&&(r.textContent="");const o=i(r,!1,DT(r));return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),o},e};function DT(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function kT(t){return ht(t)?document.querySelector(t):t}/*!
 * pinia v2.3.1
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let hv;const Nl=t=>hv=t,fv=Symbol();function Rc(t){return t&&typeof t=="object"&&Object.prototype.toString.call(t)==="[object Object]"&&typeof t.toJSON!="function"}var go;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(go||(go={}));function CT(){const t=cg(!0),e=t.run(()=>fr({}));let i=[],s=[];const r=bu({install(n){Nl(r),r._a=n,n.provide(fv,r),n.config.globalProperties.$pinia=r,s.forEach(o=>i.push(o)),s=[]},use(n){return this._a?i.push(n):s.push(n),this},_p:i,_a:null,_e:t,_s:new Map,state:e});return r}const mv=()=>{};function Rf(t,e,i,s=mv){t.push(e);const r=()=>{const n=t.indexOf(e);n>-1&&(t.splice(n,1),s())};return!i&&ug()&&mw(r),r}function Gn(t,...e){t.slice().forEach(i=>{i(...e)})}const PT=t=>t(),$f=Symbol(),kd=Symbol();function $c(t,e){t instanceof Map&&e instanceof Map?e.forEach((i,s)=>t.set(s,i)):t instanceof Set&&e instanceof Set&&e.forEach(t.add,t);for(const i in e){if(!e.hasOwnProperty(i))continue;const s=e[i],r=t[i];Rc(r)&&Rc(s)&&t.hasOwnProperty(i)&&!ot(s)&&!Ys(s)?t[i]=$c(r,s):t[i]=s}return t}const MT=Symbol();function AT(t){return!Rc(t)||!t.hasOwnProperty(MT)}const{assign:Ws}=Object;function OT(t){return!!(ot(t)&&t.effect)}function RT(t,e,i,s){const{state:r,actions:n,getters:o}=e,a=i.state.value[t];let l;function d(){a||(i.state.value[t]=r?r():{});const u=Lw(i.state.value[t]);return Ws(u,n,Object.keys(o||{}).reduce((h,p)=>(h[p]=bu(di(()=>{Nl(i);const g=i._s.get(t);return o[p].call(g,g)})),h),{}))}return l=pv(t,d,e,i,s,!0),l}function pv(t,e,i={},s,r,n){let o;const a=Ws({actions:{}},i),l={deep:!0};let d,u,h=[],p=[],g;const w=s.state.value[t];!n&&!w&&(s.state.value[t]={}),fr({});let _;function P(ie){let ae;d=u=!1,typeof ie=="function"?(ie(s.state.value[t]),ae={type:go.patchFunction,storeId:t,events:g}):($c(s.state.value[t],ie),ae={type:go.patchObject,payload:ie,storeId:t,events:g});const pe=_=Symbol();Ml().then(()=>{_===pe&&(d=!0)}),u=!0,Gn(h,ae,s.state.value[t])}const k=n?function(){const{state:ae}=i,pe=ae?ae():{};this.$patch(ke=>{Ws(ke,pe)})}:mv;function R(){o.stop(),h=[],p=[],s._s.delete(t)}const $=(ie,ae="")=>{if($f in ie)return ie[kd]=ae,ie;const pe=function(){Nl(s);const ke=Array.from(arguments),Oe=[],Me=[];function Ze(ce){Oe.push(ce)}function st(ce){Me.push(ce)}Gn(p,{args:ke,name:pe[kd],store:Z,after:Ze,onError:st});let we;try{we=ie.apply(this&&this.$id===t?this:Z,ke)}catch(ce){throw Gn(Me,ce),ce}return we instanceof Promise?we.then(ce=>(Gn(Oe,ce),ce)).catch(ce=>(Gn(Me,ce),Promise.reject(ce))):(Gn(Oe,we),we)};return pe[$f]=!0,pe[kd]=ae,pe},A={_p:s,$id:t,$onAction:Rf.bind(null,p),$patch:P,$reset:k,$subscribe(ie,ae={}){const pe=Rf(h,ie,ae.detached,()=>ke()),ke=o.run(()=>mo(()=>s.state.value[t],Oe=>{(ae.flush==="sync"?u:d)&&ie({storeId:t,type:go.direct,events:g},Oe)},Ws({},l,ae)));return pe},$dispose:R},Z=Ko(A);s._s.set(t,Z);const te=(s._a&&s._a.runWithContext||PT)(()=>s._e.run(()=>(o=cg()).run(()=>e({action:$}))));for(const ie in te){const ae=te[ie];if(ot(ae)&&!OT(ae)||Ys(ae))n||(w&&AT(ae)&&(ot(ae)?ae.value=w[ie]:$c(ae,w[ie])),s.state.value[t][ie]=ae);else if(typeof ae=="function"){const pe=$(ae,ie);te[ie]=pe,a.actions[ie]=ae}}return Ws(Z,te),Ws($e(Z),te),Object.defineProperty(Z,"$state",{get:()=>s.state.value[t],set:ie=>{P(ae=>{Ws(ae,ie)})}}),s._p.forEach(ie=>{Ws(Z,o.run(()=>ie({store:Z,app:s._a,pinia:s,options:a})))}),w&&n&&i.hydrate&&i.hydrate(Z.$state,w),d=!0,u=!0,Z}/*! #__NO_SIDE_EFFECTS__ */function Li(t,e,i){let s,r;const n=typeof e=="function";typeof t=="string"?(s=t,r=n?i:e):(r=t,s=t.id);function o(a,l){const d=wS();return a=a||(d?Zi(fv,null):null),a&&Nl(a),a=hv,a._s.has(s)||(n?pv(s,e,r,a):RT(s,r,a)),a._s.get(s)}return o.$id=s,o}let Kn={PHYSICAL:1,SOCIAL:2,MENTAL:3,EMOTIONAL:4,FINANCIAL:5},gv={TASKROUTINE:13,LIFESTYLE:14,MAINTAINANCE:15,HOUSEKEEPING:16},Zo={MILLISECOND:39,SECOND:40,MINUTE:41,HOUR:42,DAY:43,WORKDAY:44,WEEKDAY:45,WEEKENDDAY:46,WEEKEND:47,WEEK:48,MONTH:49,SEASON:50,QUARTER:51,TRIMESTER:52,BIMESTER:53,SEMESTER:54,YEAR:55,MILESTONE:56,LIFE:57},Cd={DAILY:63,WEEKLY:68,MONTHLY:69},$T={SCHEDULED:80,RECOMMENDED:81,DUE:82},vv={DATE:87,TIME:88,DATETIME:89},NT={SELF:140},_v={CONTROL:105,SLIDER:106,NUMBERPAD:107,COUNTER:108,TEXTBOX:109,TEXTAREA:110,TEXTBLOCK:111,DROPDOWN:112},vs={EVENTTYPE:122,EVENT:123,ALLDAY:124,TODO:125,TASK:126,ROUTINE:127,ROUTINE2:128,TASKROUTINE:129,SUBTYPE:130,SLEEP:131,BRIEFING:132,MEAL:133,WORKOUT:134,LOG:135,INVENTORY:136,TIME:137,REPETITIVE:138},Ga={ADVICE:162,REASON:163,MEASUREOFSUCCESS:164,NOTE:165,BLURB:166,QUESTION:167,ANSWER:168,INSECURITY:169,REMINDER:170,BRIEFING:172,DEBRIEFING:173},Yi={WEEK:"week",MONTH:"month"};const re="http://localhost:7104";async function LT(){return fetch(`${re}/api/Physical/GetWorkoutInfo`,{method:"POST",headers:{"Content-Type":"application/json"}}).then(t=>t.json()).then(t=>{if(t.errorMessage)this.errorMessage=t.errorMessage;else return t}).catch(t=>{console.error("Error:",t)})}async function VT(){return fetch(`${re}/api/Physical/GetWorkouts`,{method:"POST",headers:{"Content-Type":"application/json"}}).then(t=>t.json()).then(t=>{if(t.errorMessage)this.errorMessage=t.errorMessage;else return t}).catch(t=>{console.error("Error:",t)})}async function WT(){return fetch(`${re}/api/Physical/GetExercises`,{method:"POST",headers:{"Content-Type":"application/json"}}).then(t=>t.json()).then(t=>{if(t.errorMessage)this.errorMessage=t.errorMessage;else return t}).catch(t=>{console.error("Error:",t)})}async function yv(t){let e={eventID:t};return fetch(`${re}/api/Physical/GetWorkoutIDFromEvent`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(i=>i.json()).then(i=>{if(i.status.errorCode)console.error("Error:",i.status.errorMessage);else return i.result}).catch(i=>{console.error("Error:",i)})}async function zT(t){return fetch(`${re}/api/Physical/SaveWorkout`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then(e=>e.json()).then(e=>{if(e.status.errorCode)console.error("Error:",e.status.errorMessage);else return e.result}).catch(e=>{console.error("Error:",e)})}async function FT(t){return fetch(`${re}/api/Physical/SaveExercise`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then(e=>e.json()).then(e=>{if(e.errorMessage)this.errorMessage=e.errorMessage;else return e}).catch(e=>{console.error("Error:",e)})}async function jT(t){let e={workoutID:t};return fetch(`${re}/api/Physical/CopyAndStartWorkout`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(i=>i.json()).then(i=>{if(i.errorMessage)this.errorMessage=i.errorMessage;else return i}).catch(i=>{console.error("Error:",i)})}async function BT(t,e){let i={setID:t,completedAt:e};return fetch(`${re}/api/Physical/LogSet`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}).then(s=>s.json()).then(s=>{if(s.errorMessage)this.errorMessage=s.errorMessage;else return s}).catch(s=>{console.error("Error:",s)})}async function HT(t,e,i,s){let r={workoutID:t,startAt:e,endAt:i,createEvent:s};return fetch(`${re}/api/Physical/CompleteWorkout`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}).then(n=>n.json()).then(n=>{if(n.errorMessage)this.errorMessage=n.errorMessage;else return n}).catch(n=>{console.error("Error:",n)})}async function UT(t,e,i){let s={workoutID:t,exerciseID:e,position:i};return fetch(`${re}/api/Physical/RepositionExercise`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}).then(r=>r.json()).then(r=>{if(r.errorMessage)this.errorMessage=r.errorMessage;else return r}).catch(r=>{console.error("Error:",r)})}//! moment.js
//! version : 2.29.1
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com
var bv;function z(){return bv.apply(null,arguments)}function YT(t){bv=t}function Pi(t){return t instanceof Array||Object.prototype.toString.call(t)==="[object Array]"}function xn(t){return t!=null&&Object.prototype.toString.call(t)==="[object Object]"}function Le(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function ku(t){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(t).length===0;var e;for(e in t)if(Le(t,e))return!1;return!0}function Ht(t){return t===void 0}function Ds(t){return typeof t=="number"||Object.prototype.toString.call(t)==="[object Number]"}function Xo(t){return t instanceof Date||Object.prototype.toString.call(t)==="[object Date]"}function wv(t,e){var i=[],s;for(s=0;s<t.length;++s)i.push(e(t[s],s));return i}function Bs(t,e){for(var i in e)Le(e,i)&&(t[i]=e[i]);return Le(e,"toString")&&(t.toString=e.toString),Le(e,"valueOf")&&(t.valueOf=e.valueOf),t}function os(t,e,i,s){return Uv(t,e,i,s,!0).utc()}function GT(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function Ee(t){return t._pf==null&&(t._pf=GT()),t._pf}var Nc;Array.prototype.some?Nc=Array.prototype.some:Nc=function(t){var e=Object(this),i=e.length>>>0,s;for(s=0;s<i;s++)if(s in e&&t.call(this,e[s],s,e))return!0;return!1};function Cu(t){if(t._isValid==null){var e=Ee(t),i=Nc.call(e.parsedDateParts,function(r){return r!=null}),s=!isNaN(t._d.getTime())&&e.overflow<0&&!e.empty&&!e.invalidEra&&!e.invalidMonth&&!e.invalidWeekday&&!e.weekdayMismatch&&!e.nullInput&&!e.invalidFormat&&!e.userInvalidated&&(!e.meridiem||e.meridiem&&i);if(t._strict&&(s=s&&e.charsLeftOver===0&&e.unusedTokens.length===0&&e.bigHour===void 0),Object.isFrozen==null||!Object.isFrozen(t))t._isValid=s;else return s}return t._isValid}function Ll(t){var e=os(NaN);return t!=null?Bs(Ee(e),t):Ee(e).userInvalidated=!0,e}var Pd=z.momentProperties=[],Md=!1;function Pu(t,e){var i,s,r;if(Ht(e._isAMomentObject)||(t._isAMomentObject=e._isAMomentObject),Ht(e._i)||(t._i=e._i),Ht(e._f)||(t._f=e._f),Ht(e._l)||(t._l=e._l),Ht(e._strict)||(t._strict=e._strict),Ht(e._tzm)||(t._tzm=e._tzm),Ht(e._isUTC)||(t._isUTC=e._isUTC),Ht(e._offset)||(t._offset=e._offset),Ht(e._pf)||(t._pf=Ee(e)),Ht(e._locale)||(t._locale=e._locale),Pd.length>0)for(i=0;i<Pd.length;i++)s=Pd[i],r=e[s],Ht(r)||(t[s]=r);return t}function ea(t){Pu(this,t),this._d=new Date(t._d!=null?t._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),Md===!1&&(Md=!0,z.updateOffset(this),Md=!1)}function Mi(t){return t instanceof ea||t!=null&&t._isAMomentObject!=null}function Sv(t){z.suppressDeprecationWarnings===!1&&typeof console<"u"&&console.warn&&console.warn("Deprecation warning: "+t)}function vi(t,e){var i=!0;return Bs(function(){if(z.deprecationHandler!=null&&z.deprecationHandler(null,t),i){var s=[],r,n,o;for(n=0;n<arguments.length;n++){if(r="",typeof arguments[n]=="object"){r+=`
[`+n+"] ";for(o in arguments[0])Le(arguments[0],o)&&(r+=o+": "+arguments[0][o]+", ");r=r.slice(0,-2)}else r=arguments[n];s.push(r)}Sv(t+`
Arguments: `+Array.prototype.slice.call(s).join("")+`
`+new Error().stack),i=!1}return e.apply(this,arguments)},e)}var Nf={};function Tv(t,e){z.deprecationHandler!=null&&z.deprecationHandler(t,e),Nf[t]||(Sv(e),Nf[t]=!0)}z.suppressDeprecationWarnings=!1;z.deprecationHandler=null;function as(t){return typeof Function<"u"&&t instanceof Function||Object.prototype.toString.call(t)==="[object Function]"}function KT(t){var e,i;for(i in t)Le(t,i)&&(e=t[i],as(e)?this[i]=e:this["_"+i]=e);this._config=t,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function Lc(t,e){var i=Bs({},t),s;for(s in e)Le(e,s)&&(xn(t[s])&&xn(e[s])?(i[s]={},Bs(i[s],t[s]),Bs(i[s],e[s])):e[s]!=null?i[s]=e[s]:delete i[s]);for(s in t)Le(t,s)&&!Le(e,s)&&xn(t[s])&&(i[s]=Bs({},i[s]));return i}function Mu(t){t!=null&&this.set(t)}var Vc;Object.keys?Vc=Object.keys:Vc=function(t){var e,i=[];for(e in t)Le(t,e)&&i.push(e);return i};var qT={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function JT(t,e,i){var s=this._calendar[t]||this._calendar.sameElse;return as(s)?s.call(e,i):s}function ss(t,e,i){var s=""+Math.abs(t),r=e-s.length,n=t>=0;return(n?i?"+":"":"-")+Math.pow(10,Math.max(0,r)).toString().substr(1)+s}var Au=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,ya=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Ad={},vr={};function me(t,e,i,s){var r=s;typeof s=="string"&&(r=function(){return this[s]()}),t&&(vr[t]=r),e&&(vr[e[0]]=function(){return ss(r.apply(this,arguments),e[1],e[2])}),i&&(vr[i]=function(){return this.localeData().ordinal(r.apply(this,arguments),t)})}function QT(t){return t.match(/\[[\s\S]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"")}function ZT(t){var e=t.match(Au),i,s;for(i=0,s=e.length;i<s;i++)vr[e[i]]?e[i]=vr[e[i]]:e[i]=QT(e[i]);return function(r){var n="",o;for(o=0;o<s;o++)n+=as(e[o])?e[o].call(r,t):e[o];return n}}function Ka(t,e){return t.isValid()?(e=xv(e,t.localeData()),Ad[e]=Ad[e]||ZT(e),Ad[e](t)):t.localeData().invalidDate()}function xv(t,e){var i=5;function s(r){return e.longDateFormat(r)||r}for(ya.lastIndex=0;i>=0&&ya.test(t);)t=t.replace(ya,s),ya.lastIndex=0,i-=1;return t}var XT={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function e1(t){var e=this._longDateFormat[t],i=this._longDateFormat[t.toUpperCase()];return e||!i?e:(this._longDateFormat[t]=i.match(Au).map(function(s){return s==="MMMM"||s==="MM"||s==="DD"||s==="dddd"?s.slice(1):s}).join(""),this._longDateFormat[t])}var t1="Invalid date";function i1(){return this._invalidDate}var s1="%d",n1=/\d{1,2}/;function r1(t){return this._ordinal.replace("%d",t)}var o1={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function a1(t,e,i,s){var r=this._relativeTime[i];return as(r)?r(t,e,i,s):r.replace(/%d/i,t)}function l1(t,e){var i=this._relativeTime[t>0?"future":"past"];return as(i)?i(e):i.replace(/%s/i,e)}var vo={};function Rt(t,e){var i=t.toLowerCase();vo[i]=vo[i+"s"]=vo[e]=t}function _i(t){return typeof t=="string"?vo[t]||vo[t.toLowerCase()]:void 0}function Ou(t){var e={},i,s;for(s in t)Le(t,s)&&(i=_i(s),i&&(e[i]=t[s]));return e}var Ev={};function $t(t,e){Ev[t]=e}function d1(t){var e=[],i;for(i in t)Le(t,i)&&e.push({unit:i,priority:Ev[i]});return e.sort(function(s,r){return s.priority-r.priority}),e}function Vl(t){return t%4===0&&t%100!==0||t%400===0}function li(t){return t<0?Math.ceil(t)||0:Math.floor(t)}function De(t){var e=+t,i=0;return e!==0&&isFinite(e)&&(i=li(e)),i}function Wr(t,e){return function(i){return i!=null?(Iv(this,t,i),z.updateOffset(this,e),this):cl(this,t)}}function cl(t,e){return t.isValid()?t._d["get"+(t._isUTC?"UTC":"")+e]():NaN}function Iv(t,e,i){t.isValid()&&!isNaN(i)&&(e==="FullYear"&&Vl(t.year())&&t.month()===1&&t.date()===29?(i=De(i),t._d["set"+(t._isUTC?"UTC":"")+e](i,t.month(),Hl(i,t.month()))):t._d["set"+(t._isUTC?"UTC":"")+e](i))}function c1(t){return t=_i(t),as(this[t])?this[t]():this}function u1(t,e){if(typeof t=="object"){t=Ou(t);var i=d1(t),s;for(s=0;s<i.length;s++)this[i[s].unit](t[i[s].unit])}else if(t=_i(t),as(this[t]))return this[t](e);return this}var Dv=/\d/,ri=/\d\d/,kv=/\d{3}/,Ru=/\d{4}/,Wl=/[+-]?\d{6}/,Qe=/\d\d?/,Cv=/\d\d\d\d?/,Pv=/\d\d\d\d\d\d?/,zl=/\d{1,3}/,$u=/\d{1,4}/,Fl=/[+-]?\d{1,6}/,zr=/\d+/,jl=/[+-]?\d+/,h1=/Z|[+-]\d\d:?\d\d/gi,Bl=/Z|[+-]\d\d(?::?\d\d)?/gi,f1=/[+-]?\d+(\.\d{1,3})?/,ta=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,ul;ul={};function oe(t,e,i){ul[t]=as(e)?e:function(s,r){return s&&i?i:e}}function m1(t,e){return Le(ul,t)?ul[t](e._strict,e._locale):new RegExp(p1(t))}function p1(t){return Qt(t.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,i,s,r,n){return i||s||r||n}))}function Qt(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var Wc={};function Fe(t,e){var i,s=e;for(typeof t=="string"&&(t=[t]),Ds(e)&&(s=function(r,n){n[e]=De(r)}),i=0;i<t.length;i++)Wc[t[i]]=s}function ia(t,e){Fe(t,function(i,s,r,n){r._w=r._w||{},e(i,r._w,r,n)})}function g1(t,e,i){e!=null&&Le(Wc,t)&&Wc[t](e,i._a,i,t)}var Mt=0,_s=1,qi=2,pt=3,Ii=4,ys=5,yn=6,v1=7,_1=8;function y1(t,e){return(t%e+e)%e}var rt;Array.prototype.indexOf?rt=Array.prototype.indexOf:rt=function(t){var e;for(e=0;e<this.length;++e)if(this[e]===t)return e;return-1};function Hl(t,e){if(isNaN(t)||isNaN(e))return NaN;var i=y1(e,12);return t+=(e-i)/12,i===1?Vl(t)?29:28:31-i%7%2}me("M",["MM",2],"Mo",function(){return this.month()+1});me("MMM",0,0,function(t){return this.localeData().monthsShort(this,t)});me("MMMM",0,0,function(t){return this.localeData().months(this,t)});Rt("month","M");$t("month",8);oe("M",Qe);oe("MM",Qe,ri);oe("MMM",function(t,e){return e.monthsShortRegex(t)});oe("MMMM",function(t,e){return e.monthsRegex(t)});Fe(["M","MM"],function(t,e){e[_s]=De(t)-1});Fe(["MMM","MMMM"],function(t,e,i,s){var r=i._locale.monthsParse(t,s,i._strict);r!=null?e[_s]=r:Ee(i).invalidMonth=t});var b1="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),Mv="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),Av=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,w1=ta,S1=ta;function T1(t,e){return t?Pi(this._months)?this._months[t.month()]:this._months[(this._months.isFormat||Av).test(e)?"format":"standalone"][t.month()]:Pi(this._months)?this._months:this._months.standalone}function x1(t,e){return t?Pi(this._monthsShort)?this._monthsShort[t.month()]:this._monthsShort[Av.test(e)?"format":"standalone"][t.month()]:Pi(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function E1(t,e,i){var s,r,n,o=t.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],s=0;s<12;++s)n=os([2e3,s]),this._shortMonthsParse[s]=this.monthsShort(n,"").toLocaleLowerCase(),this._longMonthsParse[s]=this.months(n,"").toLocaleLowerCase();return i?e==="MMM"?(r=rt.call(this._shortMonthsParse,o),r!==-1?r:null):(r=rt.call(this._longMonthsParse,o),r!==-1?r:null):e==="MMM"?(r=rt.call(this._shortMonthsParse,o),r!==-1?r:(r=rt.call(this._longMonthsParse,o),r!==-1?r:null)):(r=rt.call(this._longMonthsParse,o),r!==-1?r:(r=rt.call(this._shortMonthsParse,o),r!==-1?r:null))}function I1(t,e,i){var s,r,n;if(this._monthsParseExact)return E1.call(this,t,e,i);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),s=0;s<12;s++){if(r=os([2e3,s]),i&&!this._longMonthsParse[s]&&(this._longMonthsParse[s]=new RegExp("^"+this.months(r,"").replace(".","")+"$","i"),this._shortMonthsParse[s]=new RegExp("^"+this.monthsShort(r,"").replace(".","")+"$","i")),!i&&!this._monthsParse[s]&&(n="^"+this.months(r,"")+"|^"+this.monthsShort(r,""),this._monthsParse[s]=new RegExp(n.replace(".",""),"i")),i&&e==="MMMM"&&this._longMonthsParse[s].test(t))return s;if(i&&e==="MMM"&&this._shortMonthsParse[s].test(t))return s;if(!i&&this._monthsParse[s].test(t))return s}}function Ov(t,e){var i;if(!t.isValid())return t;if(typeof e=="string"){if(/^\d+$/.test(e))e=De(e);else if(e=t.localeData().monthsParse(e),!Ds(e))return t}return i=Math.min(t.date(),Hl(t.year(),e)),t._d["set"+(t._isUTC?"UTC":"")+"Month"](e,i),t}function Rv(t){return t!=null?(Ov(this,t),z.updateOffset(this,!0),this):cl(this,"Month")}function D1(){return Hl(this.year(),this.month())}function k1(t){return this._monthsParseExact?(Le(this,"_monthsRegex")||$v.call(this),t?this._monthsShortStrictRegex:this._monthsShortRegex):(Le(this,"_monthsShortRegex")||(this._monthsShortRegex=w1),this._monthsShortStrictRegex&&t?this._monthsShortStrictRegex:this._monthsShortRegex)}function C1(t){return this._monthsParseExact?(Le(this,"_monthsRegex")||$v.call(this),t?this._monthsStrictRegex:this._monthsRegex):(Le(this,"_monthsRegex")||(this._monthsRegex=S1),this._monthsStrictRegex&&t?this._monthsStrictRegex:this._monthsRegex)}function $v(){function t(o,a){return a.length-o.length}var e=[],i=[],s=[],r,n;for(r=0;r<12;r++)n=os([2e3,r]),e.push(this.monthsShort(n,"")),i.push(this.months(n,"")),s.push(this.months(n,"")),s.push(this.monthsShort(n,""));for(e.sort(t),i.sort(t),s.sort(t),r=0;r<12;r++)e[r]=Qt(e[r]),i[r]=Qt(i[r]);for(r=0;r<24;r++)s[r]=Qt(s[r]);this._monthsRegex=new RegExp("^("+s.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+i.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+e.join("|")+")","i")}me("Y",0,0,function(){var t=this.year();return t<=9999?ss(t,4):"+"+t});me(0,["YY",2],0,function(){return this.year()%100});me(0,["YYYY",4],0,"year");me(0,["YYYYY",5],0,"year");me(0,["YYYYYY",6,!0],0,"year");Rt("year","y");$t("year",1);oe("Y",jl);oe("YY",Qe,ri);oe("YYYY",$u,Ru);oe("YYYYY",Fl,Wl);oe("YYYYYY",Fl,Wl);Fe(["YYYYY","YYYYYY"],Mt);Fe("YYYY",function(t,e){e[Mt]=t.length===2?z.parseTwoDigitYear(t):De(t)});Fe("YY",function(t,e){e[Mt]=z.parseTwoDigitYear(t)});Fe("Y",function(t,e){e[Mt]=parseInt(t,10)});function _o(t){return Vl(t)?366:365}z.parseTwoDigitYear=function(t){return De(t)+(De(t)>68?1900:2e3)};var Nv=Wr("FullYear",!0);function P1(){return Vl(this.year())}function M1(t,e,i,s,r,n,o){var a;return t<100&&t>=0?(a=new Date(t+400,e,i,s,r,n,o),isFinite(a.getFullYear())&&a.setFullYear(t)):a=new Date(t,e,i,s,r,n,o),a}function Mo(t){var e,i;return t<100&&t>=0?(i=Array.prototype.slice.call(arguments),i[0]=t+400,e=new Date(Date.UTC.apply(null,i)),isFinite(e.getUTCFullYear())&&e.setUTCFullYear(t)):e=new Date(Date.UTC.apply(null,arguments)),e}function hl(t,e,i){var s=7+e-i,r=(7+Mo(t,0,s).getUTCDay()-e)%7;return-r+s-1}function Lv(t,e,i,s,r){var n=(7+i-s)%7,o=hl(t,s,r),a=1+7*(e-1)+n+o,l,d;return a<=0?(l=t-1,d=_o(l)+a):a>_o(t)?(l=t+1,d=a-_o(t)):(l=t,d=a),{year:l,dayOfYear:d}}function Ao(t,e,i){var s=hl(t.year(),e,i),r=Math.floor((t.dayOfYear()-s-1)/7)+1,n,o;return r<1?(o=t.year()-1,n=r+Ts(o,e,i)):r>Ts(t.year(),e,i)?(n=r-Ts(t.year(),e,i),o=t.year()+1):(o=t.year(),n=r),{week:n,year:o}}function Ts(t,e,i){var s=hl(t,e,i),r=hl(t+1,e,i);return(_o(t)-s+r)/7}me("w",["ww",2],"wo","week");me("W",["WW",2],"Wo","isoWeek");Rt("week","w");Rt("isoWeek","W");$t("week",5);$t("isoWeek",5);oe("w",Qe);oe("ww",Qe,ri);oe("W",Qe);oe("WW",Qe,ri);ia(["w","ww","W","WW"],function(t,e,i,s){e[s.substr(0,1)]=De(t)});function A1(t){return Ao(t,this._week.dow,this._week.doy).week}var O1={dow:0,doy:6};function R1(){return this._week.dow}function $1(){return this._week.doy}function N1(t){var e=this.localeData().week(this);return t==null?e:this.add((t-e)*7,"d")}function L1(t){var e=Ao(this,1,4).week;return t==null?e:this.add((t-e)*7,"d")}me("d",0,"do","day");me("dd",0,0,function(t){return this.localeData().weekdaysMin(this,t)});me("ddd",0,0,function(t){return this.localeData().weekdaysShort(this,t)});me("dddd",0,0,function(t){return this.localeData().weekdays(this,t)});me("e",0,0,"weekday");me("E",0,0,"isoWeekday");Rt("day","d");Rt("weekday","e");Rt("isoWeekday","E");$t("day",11);$t("weekday",11);$t("isoWeekday",11);oe("d",Qe);oe("e",Qe);oe("E",Qe);oe("dd",function(t,e){return e.weekdaysMinRegex(t)});oe("ddd",function(t,e){return e.weekdaysShortRegex(t)});oe("dddd",function(t,e){return e.weekdaysRegex(t)});ia(["dd","ddd","dddd"],function(t,e,i,s){var r=i._locale.weekdaysParse(t,s,i._strict);r!=null?e.d=r:Ee(i).invalidWeekday=t});ia(["d","e","E"],function(t,e,i,s){e[s]=De(t)});function V1(t,e){return typeof t!="string"?t:isNaN(t)?(t=e.weekdaysParse(t),typeof t=="number"?t:null):parseInt(t,10)}function W1(t,e){return typeof t=="string"?e.weekdaysParse(t)%7||7:isNaN(t)?null:t}function Nu(t,e){return t.slice(e,7).concat(t.slice(0,e))}var z1="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Vv="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),F1="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),j1=ta,B1=ta,H1=ta;function U1(t,e){var i=Pi(this._weekdays)?this._weekdays:this._weekdays[t&&t!==!0&&this._weekdays.isFormat.test(e)?"format":"standalone"];return t===!0?Nu(i,this._week.dow):t?i[t.day()]:i}function Y1(t){return t===!0?Nu(this._weekdaysShort,this._week.dow):t?this._weekdaysShort[t.day()]:this._weekdaysShort}function G1(t){return t===!0?Nu(this._weekdaysMin,this._week.dow):t?this._weekdaysMin[t.day()]:this._weekdaysMin}function K1(t,e,i){var s,r,n,o=t.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],s=0;s<7;++s)n=os([2e3,1]).day(s),this._minWeekdaysParse[s]=this.weekdaysMin(n,"").toLocaleLowerCase(),this._shortWeekdaysParse[s]=this.weekdaysShort(n,"").toLocaleLowerCase(),this._weekdaysParse[s]=this.weekdays(n,"").toLocaleLowerCase();return i?e==="dddd"?(r=rt.call(this._weekdaysParse,o),r!==-1?r:null):e==="ddd"?(r=rt.call(this._shortWeekdaysParse,o),r!==-1?r:null):(r=rt.call(this._minWeekdaysParse,o),r!==-1?r:null):e==="dddd"?(r=rt.call(this._weekdaysParse,o),r!==-1||(r=rt.call(this._shortWeekdaysParse,o),r!==-1)?r:(r=rt.call(this._minWeekdaysParse,o),r!==-1?r:null)):e==="ddd"?(r=rt.call(this._shortWeekdaysParse,o),r!==-1||(r=rt.call(this._weekdaysParse,o),r!==-1)?r:(r=rt.call(this._minWeekdaysParse,o),r!==-1?r:null)):(r=rt.call(this._minWeekdaysParse,o),r!==-1||(r=rt.call(this._weekdaysParse,o),r!==-1)?r:(r=rt.call(this._shortWeekdaysParse,o),r!==-1?r:null))}function q1(t,e,i){var s,r,n;if(this._weekdaysParseExact)return K1.call(this,t,e,i);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),s=0;s<7;s++){if(r=os([2e3,1]).day(s),i&&!this._fullWeekdaysParse[s]&&(this._fullWeekdaysParse[s]=new RegExp("^"+this.weekdays(r,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[s]=new RegExp("^"+this.weekdaysShort(r,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[s]=new RegExp("^"+this.weekdaysMin(r,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[s]||(n="^"+this.weekdays(r,"")+"|^"+this.weekdaysShort(r,"")+"|^"+this.weekdaysMin(r,""),this._weekdaysParse[s]=new RegExp(n.replace(".",""),"i")),i&&e==="dddd"&&this._fullWeekdaysParse[s].test(t))return s;if(i&&e==="ddd"&&this._shortWeekdaysParse[s].test(t))return s;if(i&&e==="dd"&&this._minWeekdaysParse[s].test(t))return s;if(!i&&this._weekdaysParse[s].test(t))return s}}function J1(t){if(!this.isValid())return t!=null?this:NaN;var e=this._isUTC?this._d.getUTCDay():this._d.getDay();return t!=null?(t=V1(t,this.localeData()),this.add(t-e,"d")):e}function Q1(t){if(!this.isValid())return t!=null?this:NaN;var e=(this.day()+7-this.localeData()._week.dow)%7;return t==null?e:this.add(t-e,"d")}function Z1(t){if(!this.isValid())return t!=null?this:NaN;if(t!=null){var e=W1(t,this.localeData());return this.day(this.day()%7?e:e-7)}else return this.day()||7}function X1(t){return this._weekdaysParseExact?(Le(this,"_weekdaysRegex")||Lu.call(this),t?this._weekdaysStrictRegex:this._weekdaysRegex):(Le(this,"_weekdaysRegex")||(this._weekdaysRegex=j1),this._weekdaysStrictRegex&&t?this._weekdaysStrictRegex:this._weekdaysRegex)}function e0(t){return this._weekdaysParseExact?(Le(this,"_weekdaysRegex")||Lu.call(this),t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(Le(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=B1),this._weekdaysShortStrictRegex&&t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function t0(t){return this._weekdaysParseExact?(Le(this,"_weekdaysRegex")||Lu.call(this),t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(Le(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=H1),this._weekdaysMinStrictRegex&&t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function Lu(){function t(u,h){return h.length-u.length}var e=[],i=[],s=[],r=[],n,o,a,l,d;for(n=0;n<7;n++)o=os([2e3,1]).day(n),a=Qt(this.weekdaysMin(o,"")),l=Qt(this.weekdaysShort(o,"")),d=Qt(this.weekdays(o,"")),e.push(a),i.push(l),s.push(d),r.push(a),r.push(l),r.push(d);e.sort(t),i.sort(t),s.sort(t),r.sort(t),this._weekdaysRegex=new RegExp("^("+r.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+i.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+e.join("|")+")","i")}function Vu(){return this.hours()%12||12}function i0(){return this.hours()||24}me("H",["HH",2],0,"hour");me("h",["hh",2],0,Vu);me("k",["kk",2],0,i0);me("hmm",0,0,function(){return""+Vu.apply(this)+ss(this.minutes(),2)});me("hmmss",0,0,function(){return""+Vu.apply(this)+ss(this.minutes(),2)+ss(this.seconds(),2)});me("Hmm",0,0,function(){return""+this.hours()+ss(this.minutes(),2)});me("Hmmss",0,0,function(){return""+this.hours()+ss(this.minutes(),2)+ss(this.seconds(),2)});function Wv(t,e){me(t,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)})}Wv("a",!0);Wv("A",!1);Rt("hour","h");$t("hour",13);function zv(t,e){return e._meridiemParse}oe("a",zv);oe("A",zv);oe("H",Qe);oe("h",Qe);oe("k",Qe);oe("HH",Qe,ri);oe("hh",Qe,ri);oe("kk",Qe,ri);oe("hmm",Cv);oe("hmmss",Pv);oe("Hmm",Cv);oe("Hmmss",Pv);Fe(["H","HH"],pt);Fe(["k","kk"],function(t,e,i){var s=De(t);e[pt]=s===24?0:s});Fe(["a","A"],function(t,e,i){i._isPm=i._locale.isPM(t),i._meridiem=t});Fe(["h","hh"],function(t,e,i){e[pt]=De(t),Ee(i).bigHour=!0});Fe("hmm",function(t,e,i){var s=t.length-2;e[pt]=De(t.substr(0,s)),e[Ii]=De(t.substr(s)),Ee(i).bigHour=!0});Fe("hmmss",function(t,e,i){var s=t.length-4,r=t.length-2;e[pt]=De(t.substr(0,s)),e[Ii]=De(t.substr(s,2)),e[ys]=De(t.substr(r)),Ee(i).bigHour=!0});Fe("Hmm",function(t,e,i){var s=t.length-2;e[pt]=De(t.substr(0,s)),e[Ii]=De(t.substr(s))});Fe("Hmmss",function(t,e,i){var s=t.length-4,r=t.length-2;e[pt]=De(t.substr(0,s)),e[Ii]=De(t.substr(s,2)),e[ys]=De(t.substr(r))});function s0(t){return(t+"").toLowerCase().charAt(0)==="p"}var n0=/[ap]\.?m?\.?/i,r0=Wr("Hours",!0);function o0(t,e,i){return t>11?i?"pm":"PM":i?"am":"AM"}var Fv={calendar:qT,longDateFormat:XT,invalidDate:t1,ordinal:s1,dayOfMonthOrdinalParse:n1,relativeTime:o1,months:b1,monthsShort:Mv,week:O1,weekdays:z1,weekdaysMin:F1,weekdaysShort:Vv,meridiemParse:n0},Xe={},to={},Oo;function a0(t,e){var i,s=Math.min(t.length,e.length);for(i=0;i<s;i+=1)if(t[i]!==e[i])return i;return s}function Lf(t){return t&&t.toLowerCase().replace("_","-")}function l0(t){for(var e=0,i,s,r,n;e<t.length;){for(n=Lf(t[e]).split("-"),i=n.length,s=Lf(t[e+1]),s=s?s.split("-"):null;i>0;){if(r=Ul(n.slice(0,i).join("-")),r)return r;if(s&&s.length>=i&&a0(n,s)>=i-1)break;i--}e++}return Oo}function Ul(t){var e=null,i;if(Xe[t]===void 0&&typeof module<"u"&&module&&module.exports)try{e=Oo._abbr,i=require,i("./locale/"+t),Gs(e)}catch{Xe[t]=null}return Xe[t]}function Gs(t,e){var i;return t&&(Ht(e)?i=Ms(t):i=Wu(t,e),i?Oo=i:typeof console<"u"&&console.warn&&console.warn("Locale "+t+" not found. Did you forget to load it?")),Oo._abbr}function Wu(t,e){if(e!==null){var i,s=Fv;if(e.abbr=t,Xe[t]!=null)Tv("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),s=Xe[t]._config;else if(e.parentLocale!=null)if(Xe[e.parentLocale]!=null)s=Xe[e.parentLocale]._config;else if(i=Ul(e.parentLocale),i!=null)s=i._config;else return to[e.parentLocale]||(to[e.parentLocale]=[]),to[e.parentLocale].push({name:t,config:e}),null;return Xe[t]=new Mu(Lc(s,e)),to[t]&&to[t].forEach(function(r){Wu(r.name,r.config)}),Gs(t),Xe[t]}else return delete Xe[t],null}function d0(t,e){if(e!=null){var i,s,r=Fv;Xe[t]!=null&&Xe[t].parentLocale!=null?Xe[t].set(Lc(Xe[t]._config,e)):(s=Ul(t),s!=null&&(r=s._config),e=Lc(r,e),s==null&&(e.abbr=t),i=new Mu(e),i.parentLocale=Xe[t],Xe[t]=i),Gs(t)}else Xe[t]!=null&&(Xe[t].parentLocale!=null?(Xe[t]=Xe[t].parentLocale,t===Gs()&&Gs(t)):Xe[t]!=null&&delete Xe[t]);return Xe[t]}function Ms(t){var e;if(t&&t._locale&&t._locale._abbr&&(t=t._locale._abbr),!t)return Oo;if(!Pi(t)){if(e=Ul(t),e)return e;t=[t]}return l0(t)}function c0(){return Vc(Xe)}function zu(t){var e,i=t._a;return i&&Ee(t).overflow===-2&&(e=i[_s]<0||i[_s]>11?_s:i[qi]<1||i[qi]>Hl(i[Mt],i[_s])?qi:i[pt]<0||i[pt]>24||i[pt]===24&&(i[Ii]!==0||i[ys]!==0||i[yn]!==0)?pt:i[Ii]<0||i[Ii]>59?Ii:i[ys]<0||i[ys]>59?ys:i[yn]<0||i[yn]>999?yn:-1,Ee(t)._overflowDayOfYear&&(e<Mt||e>qi)&&(e=qi),Ee(t)._overflowWeeks&&e===-1&&(e=v1),Ee(t)._overflowWeekday&&e===-1&&(e=_1),Ee(t).overflow=e),t}var u0=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,h0=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,f0=/Z|[+-]\d\d(?::?\d\d)?/,ba=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],Od=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],m0=/^\/?Date\((-?\d+)/i,p0=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,g0={UT:0,GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function jv(t){var e,i,s=t._i,r=u0.exec(s)||h0.exec(s),n,o,a,l;if(r){for(Ee(t).iso=!0,e=0,i=ba.length;e<i;e++)if(ba[e][1].exec(r[1])){o=ba[e][0],n=ba[e][2]!==!1;break}if(o==null){t._isValid=!1;return}if(r[3]){for(e=0,i=Od.length;e<i;e++)if(Od[e][1].exec(r[3])){a=(r[2]||" ")+Od[e][0];break}if(a==null){t._isValid=!1;return}}if(!n&&a!=null){t._isValid=!1;return}if(r[4])if(f0.exec(r[4]))l="Z";else{t._isValid=!1;return}t._f=o+(a||"")+(l||""),ju(t)}else t._isValid=!1}function v0(t,e,i,s,r,n){var o=[_0(t),Mv.indexOf(e),parseInt(i,10),parseInt(s,10),parseInt(r,10)];return n&&o.push(parseInt(n,10)),o}function _0(t){var e=parseInt(t,10);return e<=49?2e3+e:e<=999?1900+e:e}function y0(t){return t.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function b0(t,e,i){if(t){var s=Vv.indexOf(t),r=new Date(e[0],e[1],e[2]).getDay();if(s!==r)return Ee(i).weekdayMismatch=!0,i._isValid=!1,!1}return!0}function w0(t,e,i){if(t)return g0[t];if(e)return 0;var s=parseInt(i,10),r=s%100,n=(s-r)/100;return n*60+r}function Bv(t){var e=p0.exec(y0(t._i)),i;if(e){if(i=v0(e[4],e[3],e[2],e[5],e[6],e[7]),!b0(e[1],i,t))return;t._a=i,t._tzm=w0(e[8],e[9],e[10]),t._d=Mo.apply(null,t._a),t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),Ee(t).rfc2822=!0}else t._isValid=!1}function S0(t){var e=m0.exec(t._i);if(e!==null){t._d=new Date(+e[1]);return}if(jv(t),t._isValid===!1)delete t._isValid;else return;if(Bv(t),t._isValid===!1)delete t._isValid;else return;t._strict?t._isValid=!1:z.createFromInputFallback(t)}z.createFromInputFallback=vi("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(t){t._d=new Date(t._i+(t._useUTC?" UTC":""))});function tr(t,e,i){return t??e??i}function T0(t){var e=new Date(z.now());return t._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}function Fu(t){var e,i,s=[],r,n,o;if(!t._d){for(r=T0(t),t._w&&t._a[qi]==null&&t._a[_s]==null&&x0(t),t._dayOfYear!=null&&(o=tr(t._a[Mt],r[Mt]),(t._dayOfYear>_o(o)||t._dayOfYear===0)&&(Ee(t)._overflowDayOfYear=!0),i=Mo(o,0,t._dayOfYear),t._a[_s]=i.getUTCMonth(),t._a[qi]=i.getUTCDate()),e=0;e<3&&t._a[e]==null;++e)t._a[e]=s[e]=r[e];for(;e<7;e++)t._a[e]=s[e]=t._a[e]==null?e===2?1:0:t._a[e];t._a[pt]===24&&t._a[Ii]===0&&t._a[ys]===0&&t._a[yn]===0&&(t._nextDay=!0,t._a[pt]=0),t._d=(t._useUTC?Mo:M1).apply(null,s),n=t._useUTC?t._d.getUTCDay():t._d.getDay(),t._tzm!=null&&t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),t._nextDay&&(t._a[pt]=24),t._w&&typeof t._w.d<"u"&&t._w.d!==n&&(Ee(t).weekdayMismatch=!0)}}function x0(t){var e,i,s,r,n,o,a,l,d;e=t._w,e.GG!=null||e.W!=null||e.E!=null?(n=1,o=4,i=tr(e.GG,t._a[Mt],Ao(Je(),1,4).year),s=tr(e.W,1),r=tr(e.E,1),(r<1||r>7)&&(l=!0)):(n=t._locale._week.dow,o=t._locale._week.doy,d=Ao(Je(),n,o),i=tr(e.gg,t._a[Mt],d.year),s=tr(e.w,d.week),e.d!=null?(r=e.d,(r<0||r>6)&&(l=!0)):e.e!=null?(r=e.e+n,(e.e<0||e.e>6)&&(l=!0)):r=n),s<1||s>Ts(i,n,o)?Ee(t)._overflowWeeks=!0:l!=null?Ee(t)._overflowWeekday=!0:(a=Lv(i,s,r,n,o),t._a[Mt]=a.year,t._dayOfYear=a.dayOfYear)}z.ISO_8601=function(){};z.RFC_2822=function(){};function ju(t){if(t._f===z.ISO_8601){jv(t);return}if(t._f===z.RFC_2822){Bv(t);return}t._a=[],Ee(t).empty=!0;var e=""+t._i,i,s,r,n,o,a=e.length,l=0,d;for(r=xv(t._f,t._locale).match(Au)||[],i=0;i<r.length;i++)n=r[i],s=(e.match(m1(n,t))||[])[0],s&&(o=e.substr(0,e.indexOf(s)),o.length>0&&Ee(t).unusedInput.push(o),e=e.slice(e.indexOf(s)+s.length),l+=s.length),vr[n]?(s?Ee(t).empty=!1:Ee(t).unusedTokens.push(n),g1(n,s,t)):t._strict&&!s&&Ee(t).unusedTokens.push(n);Ee(t).charsLeftOver=a-l,e.length>0&&Ee(t).unusedInput.push(e),t._a[pt]<=12&&Ee(t).bigHour===!0&&t._a[pt]>0&&(Ee(t).bigHour=void 0),Ee(t).parsedDateParts=t._a.slice(0),Ee(t).meridiem=t._meridiem,t._a[pt]=E0(t._locale,t._a[pt],t._meridiem),d=Ee(t).era,d!==null&&(t._a[Mt]=t._locale.erasConvertYear(d,t._a[Mt])),Fu(t),zu(t)}function E0(t,e,i){var s;return i==null?e:t.meridiemHour!=null?t.meridiemHour(e,i):(t.isPM!=null&&(s=t.isPM(i),s&&e<12&&(e+=12),!s&&e===12&&(e=0)),e)}function I0(t){var e,i,s,r,n,o,a=!1;if(t._f.length===0){Ee(t).invalidFormat=!0,t._d=new Date(NaN);return}for(r=0;r<t._f.length;r++)n=0,o=!1,e=Pu({},t),t._useUTC!=null&&(e._useUTC=t._useUTC),e._f=t._f[r],ju(e),Cu(e)&&(o=!0),n+=Ee(e).charsLeftOver,n+=Ee(e).unusedTokens.length*10,Ee(e).score=n,a?n<s&&(s=n,i=e):(s==null||n<s||o)&&(s=n,i=e,o&&(a=!0));Bs(t,i||e)}function D0(t){if(!t._d){var e=Ou(t._i),i=e.day===void 0?e.date:e.day;t._a=wv([e.year,e.month,i,e.hour,e.minute,e.second,e.millisecond],function(s){return s&&parseInt(s,10)}),Fu(t)}}function k0(t){var e=new ea(zu(Hv(t)));return e._nextDay&&(e.add(1,"d"),e._nextDay=void 0),e}function Hv(t){var e=t._i,i=t._f;return t._locale=t._locale||Ms(t._l),e===null||i===void 0&&e===""?Ll({nullInput:!0}):(typeof e=="string"&&(t._i=e=t._locale.preparse(e)),Mi(e)?new ea(zu(e)):(Xo(e)?t._d=e:Pi(i)?I0(t):i?ju(t):C0(t),Cu(t)||(t._d=null),t))}function C0(t){var e=t._i;Ht(e)?t._d=new Date(z.now()):Xo(e)?t._d=new Date(e.valueOf()):typeof e=="string"?S0(t):Pi(e)?(t._a=wv(e.slice(0),function(i){return parseInt(i,10)}),Fu(t)):xn(e)?D0(t):Ds(e)?t._d=new Date(e):z.createFromInputFallback(t)}function Uv(t,e,i,s,r){var n={};return(e===!0||e===!1)&&(s=e,e=void 0),(i===!0||i===!1)&&(s=i,i=void 0),(xn(t)&&ku(t)||Pi(t)&&t.length===0)&&(t=void 0),n._isAMomentObject=!0,n._useUTC=n._isUTC=r,n._l=i,n._i=t,n._f=e,n._strict=s,k0(n)}function Je(t,e,i,s){return Uv(t,e,i,s,!1)}var P0=vi("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=Je.apply(null,arguments);return this.isValid()&&t.isValid()?t<this?this:t:Ll()}),M0=vi("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=Je.apply(null,arguments);return this.isValid()&&t.isValid()?t>this?this:t:Ll()});function Yv(t,e){var i,s;if(e.length===1&&Pi(e[0])&&(e=e[0]),!e.length)return Je();for(i=e[0],s=1;s<e.length;++s)(!e[s].isValid()||e[s][t](i))&&(i=e[s]);return i}function A0(){var t=[].slice.call(arguments,0);return Yv("isBefore",t)}function O0(){var t=[].slice.call(arguments,0);return Yv("isAfter",t)}var R0=function(){return Date.now?Date.now():+new Date},io=["year","quarter","month","week","day","hour","minute","second","millisecond"];function $0(t){var e,i=!1,s;for(e in t)if(Le(t,e)&&!(rt.call(io,e)!==-1&&(t[e]==null||!isNaN(t[e]))))return!1;for(s=0;s<io.length;++s)if(t[io[s]]){if(i)return!1;parseFloat(t[io[s]])!==De(t[io[s]])&&(i=!0)}return!0}function N0(){return this._isValid}function L0(){return Vi(NaN)}function Yl(t){var e=Ou(t),i=e.year||0,s=e.quarter||0,r=e.month||0,n=e.week||e.isoWeek||0,o=e.day||0,a=e.hour||0,l=e.minute||0,d=e.second||0,u=e.millisecond||0;this._isValid=$0(e),this._milliseconds=+u+d*1e3+l*6e4+a*1e3*60*60,this._days=+o+n*7,this._months=+r+s*3+i*12,this._data={},this._locale=Ms(),this._bubble()}function qa(t){return t instanceof Yl}function zc(t){return t<0?Math.round(-1*t)*-1:Math.round(t)}function V0(t,e,i){var s=Math.min(t.length,e.length),r=Math.abs(t.length-e.length),n=0,o;for(o=0;o<s;o++)De(t[o])!==De(e[o])&&n++;return n+r}function Gv(t,e){me(t,0,0,function(){var i=this.utcOffset(),s="+";return i<0&&(i=-i,s="-"),s+ss(~~(i/60),2)+e+ss(~~i%60,2)})}Gv("Z",":");Gv("ZZ","");oe("Z",Bl);oe("ZZ",Bl);Fe(["Z","ZZ"],function(t,e,i){i._useUTC=!0,i._tzm=Bu(Bl,t)});var W0=/([\+\-]|\d\d)/gi;function Bu(t,e){var i=(e||"").match(t),s,r,n;return i===null?null:(s=i[i.length-1]||[],r=(s+"").match(W0)||["-",0,0],n=+(r[1]*60)+De(r[2]),n===0?0:r[0]==="+"?n:-n)}function Hu(t,e){var i,s;return e._isUTC?(i=e.clone(),s=(Mi(t)||Xo(t)?t.valueOf():Je(t).valueOf())-i.valueOf(),i._d.setTime(i._d.valueOf()+s),z.updateOffset(i,!1),i):Je(t).local()}function Fc(t){return-Math.round(t._d.getTimezoneOffset())}z.updateOffset=function(){};function z0(t,e,i){var s=this._offset||0,r;if(!this.isValid())return t!=null?this:NaN;if(t!=null){if(typeof t=="string"){if(t=Bu(Bl,t),t===null)return this}else Math.abs(t)<16&&!i&&(t=t*60);return!this._isUTC&&e&&(r=Fc(this)),this._offset=t,this._isUTC=!0,r!=null&&this.add(r,"m"),s!==t&&(!e||this._changeInProgress?Jv(this,Vi(t-s,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,z.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?s:Fc(this)}function F0(t,e){return t!=null?(typeof t!="string"&&(t=-t),this.utcOffset(t,e),this):-this.utcOffset()}function j0(t){return this.utcOffset(0,t)}function B0(t){return this._isUTC&&(this.utcOffset(0,t),this._isUTC=!1,t&&this.subtract(Fc(this),"m")),this}function H0(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var t=Bu(h1,this._i);t!=null?this.utcOffset(t):this.utcOffset(0,!0)}return this}function U0(t){return this.isValid()?(t=t?Je(t).utcOffset():0,(this.utcOffset()-t)%60===0):!1}function Y0(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function G0(){if(!Ht(this._isDSTShifted))return this._isDSTShifted;var t={},e;return Pu(t,this),t=Hv(t),t._a?(e=t._isUTC?os(t._a):Je(t._a),this._isDSTShifted=this.isValid()&&V0(t._a,e.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function K0(){return this.isValid()?!this._isUTC:!1}function q0(){return this.isValid()?this._isUTC:!1}function Kv(){return this.isValid()?this._isUTC&&this._offset===0:!1}var J0=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,Q0=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Vi(t,e){var i=t,s=null,r,n,o;return qa(t)?i={ms:t._milliseconds,d:t._days,M:t._months}:Ds(t)||!isNaN(+t)?(i={},e?i[e]=+t:i.milliseconds=+t):(s=J0.exec(t))?(r=s[1]==="-"?-1:1,i={y:0,d:De(s[qi])*r,h:De(s[pt])*r,m:De(s[Ii])*r,s:De(s[ys])*r,ms:De(zc(s[yn]*1e3))*r}):(s=Q0.exec(t))?(r=s[1]==="-"?-1:1,i={y:gn(s[2],r),M:gn(s[3],r),w:gn(s[4],r),d:gn(s[5],r),h:gn(s[6],r),m:gn(s[7],r),s:gn(s[8],r)}):i==null?i={}:typeof i=="object"&&("from"in i||"to"in i)&&(o=Z0(Je(i.from),Je(i.to)),i={},i.ms=o.milliseconds,i.M=o.months),n=new Yl(i),qa(t)&&Le(t,"_locale")&&(n._locale=t._locale),qa(t)&&Le(t,"_isValid")&&(n._isValid=t._isValid),n}Vi.fn=Yl.prototype;Vi.invalid=L0;function gn(t,e){var i=t&&parseFloat(t.replace(",","."));return(isNaN(i)?0:i)*e}function Vf(t,e){var i={};return i.months=e.month()-t.month()+(e.year()-t.year())*12,t.clone().add(i.months,"M").isAfter(e)&&--i.months,i.milliseconds=+e-+t.clone().add(i.months,"M"),i}function Z0(t,e){var i;return t.isValid()&&e.isValid()?(e=Hu(e,t),t.isBefore(e)?i=Vf(t,e):(i=Vf(e,t),i.milliseconds=-i.milliseconds,i.months=-i.months),i):{milliseconds:0,months:0}}function qv(t,e){return function(i,s){var r,n;return s!==null&&!isNaN(+s)&&(Tv(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),n=i,i=s,s=n),r=Vi(i,s),Jv(this,r,t),this}}function Jv(t,e,i,s){var r=e._milliseconds,n=zc(e._days),o=zc(e._months);t.isValid()&&(s=s??!0,o&&Ov(t,cl(t,"Month")+o*i),n&&Iv(t,"Date",cl(t,"Date")+n*i),r&&t._d.setTime(t._d.valueOf()+r*i),s&&z.updateOffset(t,n||o))}var X0=qv(1,"add"),ex=qv(-1,"subtract");function Qv(t){return typeof t=="string"||t instanceof String}function tx(t){return Mi(t)||Xo(t)||Qv(t)||Ds(t)||sx(t)||ix(t)||t===null||t===void 0}function ix(t){var e=xn(t)&&!ku(t),i=!1,s=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],r,n;for(r=0;r<s.length;r+=1)n=s[r],i=i||Le(t,n);return e&&i}function sx(t){var e=Pi(t),i=!1;return e&&(i=t.filter(function(s){return!Ds(s)&&Qv(t)}).length===0),e&&i}function nx(t){var e=xn(t)&&!ku(t),i=!1,s=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],r,n;for(r=0;r<s.length;r+=1)n=s[r],i=i||Le(t,n);return e&&i}function rx(t,e){var i=t.diff(e,"days",!0);return i<-6?"sameElse":i<-1?"lastWeek":i<0?"lastDay":i<1?"sameDay":i<2?"nextDay":i<7?"nextWeek":"sameElse"}function ox(t,e){arguments.length===1&&(arguments[0]?tx(arguments[0])?(t=arguments[0],e=void 0):nx(arguments[0])&&(e=arguments[0],t=void 0):(t=void 0,e=void 0));var i=t||Je(),s=Hu(i,this).startOf("day"),r=z.calendarFormat(this,s)||"sameElse",n=e&&(as(e[r])?e[r].call(this,i):e[r]);return this.format(n||this.localeData().calendar(r,this,Je(i)))}function ax(){return new ea(this)}function lx(t,e){var i=Mi(t)?t:Je(t);return this.isValid()&&i.isValid()?(e=_i(e)||"millisecond",e==="millisecond"?this.valueOf()>i.valueOf():i.valueOf()<this.clone().startOf(e).valueOf()):!1}function dx(t,e){var i=Mi(t)?t:Je(t);return this.isValid()&&i.isValid()?(e=_i(e)||"millisecond",e==="millisecond"?this.valueOf()<i.valueOf():this.clone().endOf(e).valueOf()<i.valueOf()):!1}function cx(t,e,i,s){var r=Mi(t)?t:Je(t),n=Mi(e)?e:Je(e);return this.isValid()&&r.isValid()&&n.isValid()?(s=s||"()",(s[0]==="("?this.isAfter(r,i):!this.isBefore(r,i))&&(s[1]===")"?this.isBefore(n,i):!this.isAfter(n,i))):!1}function ux(t,e){var i=Mi(t)?t:Je(t),s;return this.isValid()&&i.isValid()?(e=_i(e)||"millisecond",e==="millisecond"?this.valueOf()===i.valueOf():(s=i.valueOf(),this.clone().startOf(e).valueOf()<=s&&s<=this.clone().endOf(e).valueOf())):!1}function hx(t,e){return this.isSame(t,e)||this.isAfter(t,e)}function fx(t,e){return this.isSame(t,e)||this.isBefore(t,e)}function mx(t,e,i){var s,r,n;if(!this.isValid())return NaN;if(s=Hu(t,this),!s.isValid())return NaN;switch(r=(s.utcOffset()-this.utcOffset())*6e4,e=_i(e),e){case"year":n=Ja(this,s)/12;break;case"month":n=Ja(this,s);break;case"quarter":n=Ja(this,s)/3;break;case"second":n=(this-s)/1e3;break;case"minute":n=(this-s)/6e4;break;case"hour":n=(this-s)/36e5;break;case"day":n=(this-s-r)/864e5;break;case"week":n=(this-s-r)/6048e5;break;default:n=this-s}return i?n:li(n)}function Ja(t,e){if(t.date()<e.date())return-Ja(e,t);var i=(e.year()-t.year())*12+(e.month()-t.month()),s=t.clone().add(i,"months"),r,n;return e-s<0?(r=t.clone().add(i-1,"months"),n=(e-s)/(s-r)):(r=t.clone().add(i+1,"months"),n=(e-s)/(r-s)),-(i+n)||0}z.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";z.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function px(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function gx(t){if(!this.isValid())return null;var e=t!==!0,i=e?this.clone().utc():this;return i.year()<0||i.year()>9999?Ka(i,e?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):as(Date.prototype.toISOString)?e?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",Ka(i,"Z")):Ka(i,e?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function vx(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var t="moment",e="",i,s,r,n;return this.isLocal()||(t=this.utcOffset()===0?"moment.utc":"moment.parseZone",e="Z"),i="["+t+'("]',s=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",r="-MM-DD[T]HH:mm:ss.SSS",n=e+'[")]',this.format(i+s+r+n)}function _x(t){t||(t=this.isUtc()?z.defaultFormatUtc:z.defaultFormat);var e=Ka(this,t);return this.localeData().postformat(e)}function yx(t,e){return this.isValid()&&(Mi(t)&&t.isValid()||Je(t).isValid())?Vi({to:this,from:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function bx(t){return this.from(Je(),t)}function wx(t,e){return this.isValid()&&(Mi(t)&&t.isValid()||Je(t).isValid())?Vi({from:this,to:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function Sx(t){return this.to(Je(),t)}function Zv(t){var e;return t===void 0?this._locale._abbr:(e=Ms(t),e!=null&&(this._locale=e),this)}var Xv=vi("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(t){return t===void 0?this.localeData():this.locale(t)});function e_(){return this._locale}var fl=1e3,_r=60*fl,ml=60*_r,t_=(365*400+97)*24*ml;function yr(t,e){return(t%e+e)%e}function i_(t,e,i){return t<100&&t>=0?new Date(t+400,e,i)-t_:new Date(t,e,i).valueOf()}function s_(t,e,i){return t<100&&t>=0?Date.UTC(t+400,e,i)-t_:Date.UTC(t,e,i)}function Tx(t){var e,i;if(t=_i(t),t===void 0||t==="millisecond"||!this.isValid())return this;switch(i=this._isUTC?s_:i_,t){case"year":e=i(this.year(),0,1);break;case"quarter":e=i(this.year(),this.month()-this.month()%3,1);break;case"month":e=i(this.year(),this.month(),1);break;case"week":e=i(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":e=i(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":e=i(this.year(),this.month(),this.date());break;case"hour":e=this._d.valueOf(),e-=yr(e+(this._isUTC?0:this.utcOffset()*_r),ml);break;case"minute":e=this._d.valueOf(),e-=yr(e,_r);break;case"second":e=this._d.valueOf(),e-=yr(e,fl);break}return this._d.setTime(e),z.updateOffset(this,!0),this}function xx(t){var e,i;if(t=_i(t),t===void 0||t==="millisecond"||!this.isValid())return this;switch(i=this._isUTC?s_:i_,t){case"year":e=i(this.year()+1,0,1)-1;break;case"quarter":e=i(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":e=i(this.year(),this.month()+1,1)-1;break;case"week":e=i(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":e=i(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":e=i(this.year(),this.month(),this.date()+1)-1;break;case"hour":e=this._d.valueOf(),e+=ml-yr(e+(this._isUTC?0:this.utcOffset()*_r),ml)-1;break;case"minute":e=this._d.valueOf(),e+=_r-yr(e,_r)-1;break;case"second":e=this._d.valueOf(),e+=fl-yr(e,fl)-1;break}return this._d.setTime(e),z.updateOffset(this,!0),this}function Ex(){return this._d.valueOf()-(this._offset||0)*6e4}function Ix(){return Math.floor(this.valueOf()/1e3)}function Dx(){return new Date(this.valueOf())}function kx(){var t=this;return[t.year(),t.month(),t.date(),t.hour(),t.minute(),t.second(),t.millisecond()]}function Cx(){var t=this;return{years:t.year(),months:t.month(),date:t.date(),hours:t.hours(),minutes:t.minutes(),seconds:t.seconds(),milliseconds:t.milliseconds()}}function Px(){return this.isValid()?this.toISOString():null}function Mx(){return Cu(this)}function Ax(){return Bs({},Ee(this))}function Ox(){return Ee(this).overflow}function Rx(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}me("N",0,0,"eraAbbr");me("NN",0,0,"eraAbbr");me("NNN",0,0,"eraAbbr");me("NNNN",0,0,"eraName");me("NNNNN",0,0,"eraNarrow");me("y",["y",1],"yo","eraYear");me("y",["yy",2],0,"eraYear");me("y",["yyy",3],0,"eraYear");me("y",["yyyy",4],0,"eraYear");oe("N",Uu);oe("NN",Uu);oe("NNN",Uu);oe("NNNN",Ux);oe("NNNNN",Yx);Fe(["N","NN","NNN","NNNN","NNNNN"],function(t,e,i,s){var r=i._locale.erasParse(t,s,i._strict);r?Ee(i).era=r:Ee(i).invalidEra=t});oe("y",zr);oe("yy",zr);oe("yyy",zr);oe("yyyy",zr);oe("yo",Gx);Fe(["y","yy","yyy","yyyy"],Mt);Fe(["yo"],function(t,e,i,s){var r;i._locale._eraYearOrdinalRegex&&(r=t.match(i._locale._eraYearOrdinalRegex)),i._locale.eraYearOrdinalParse?e[Mt]=i._locale.eraYearOrdinalParse(t,r):e[Mt]=parseInt(t,10)});function $x(t,e){var i,s,r,n=this._eras||Ms("en")._eras;for(i=0,s=n.length;i<s;++i){switch(typeof n[i].since){case"string":r=z(n[i].since).startOf("day"),n[i].since=r.valueOf();break}switch(typeof n[i].until){case"undefined":n[i].until=1/0;break;case"string":r=z(n[i].until).startOf("day").valueOf(),n[i].until=r.valueOf();break}}return n}function Nx(t,e,i){var s,r,n=this.eras(),o,a,l;for(t=t.toUpperCase(),s=0,r=n.length;s<r;++s)if(o=n[s].name.toUpperCase(),a=n[s].abbr.toUpperCase(),l=n[s].narrow.toUpperCase(),i)switch(e){case"N":case"NN":case"NNN":if(a===t)return n[s];break;case"NNNN":if(o===t)return n[s];break;case"NNNNN":if(l===t)return n[s];break}else if([o,a,l].indexOf(t)>=0)return n[s]}function Lx(t,e){var i=t.since<=t.until?1:-1;return e===void 0?z(t.since).year():z(t.since).year()+(e-t.offset)*i}function Vx(){var t,e,i,s=this.localeData().eras();for(t=0,e=s.length;t<e;++t)if(i=this.clone().startOf("day").valueOf(),s[t].since<=i&&i<=s[t].until||s[t].until<=i&&i<=s[t].since)return s[t].name;return""}function Wx(){var t,e,i,s=this.localeData().eras();for(t=0,e=s.length;t<e;++t)if(i=this.clone().startOf("day").valueOf(),s[t].since<=i&&i<=s[t].until||s[t].until<=i&&i<=s[t].since)return s[t].narrow;return""}function zx(){var t,e,i,s=this.localeData().eras();for(t=0,e=s.length;t<e;++t)if(i=this.clone().startOf("day").valueOf(),s[t].since<=i&&i<=s[t].until||s[t].until<=i&&i<=s[t].since)return s[t].abbr;return""}function Fx(){var t,e,i,s,r=this.localeData().eras();for(t=0,e=r.length;t<e;++t)if(i=r[t].since<=r[t].until?1:-1,s=this.clone().startOf("day").valueOf(),r[t].since<=s&&s<=r[t].until||r[t].until<=s&&s<=r[t].since)return(this.year()-z(r[t].since).year())*i+r[t].offset;return this.year()}function jx(t){return Le(this,"_erasNameRegex")||Yu.call(this),t?this._erasNameRegex:this._erasRegex}function Bx(t){return Le(this,"_erasAbbrRegex")||Yu.call(this),t?this._erasAbbrRegex:this._erasRegex}function Hx(t){return Le(this,"_erasNarrowRegex")||Yu.call(this),t?this._erasNarrowRegex:this._erasRegex}function Uu(t,e){return e.erasAbbrRegex(t)}function Ux(t,e){return e.erasNameRegex(t)}function Yx(t,e){return e.erasNarrowRegex(t)}function Gx(t,e){return e._eraYearOrdinalRegex||zr}function Yu(){var t=[],e=[],i=[],s=[],r,n,o=this.eras();for(r=0,n=o.length;r<n;++r)e.push(Qt(o[r].name)),t.push(Qt(o[r].abbr)),i.push(Qt(o[r].narrow)),s.push(Qt(o[r].name)),s.push(Qt(o[r].abbr)),s.push(Qt(o[r].narrow));this._erasRegex=new RegExp("^("+s.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+e.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+t.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+i.join("|")+")","i")}me(0,["gg",2],0,function(){return this.weekYear()%100});me(0,["GG",2],0,function(){return this.isoWeekYear()%100});function Gl(t,e){me(0,[t,t.length],0,e)}Gl("gggg","weekYear");Gl("ggggg","weekYear");Gl("GGGG","isoWeekYear");Gl("GGGGG","isoWeekYear");Rt("weekYear","gg");Rt("isoWeekYear","GG");$t("weekYear",1);$t("isoWeekYear",1);oe("G",jl);oe("g",jl);oe("GG",Qe,ri);oe("gg",Qe,ri);oe("GGGG",$u,Ru);oe("gggg",$u,Ru);oe("GGGGG",Fl,Wl);oe("ggggg",Fl,Wl);ia(["gggg","ggggg","GGGG","GGGGG"],function(t,e,i,s){e[s.substr(0,2)]=De(t)});ia(["gg","GG"],function(t,e,i,s){e[s]=z.parseTwoDigitYear(t)});function Kx(t){return n_.call(this,t,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function qx(t){return n_.call(this,t,this.isoWeek(),this.isoWeekday(),1,4)}function Jx(){return Ts(this.year(),1,4)}function Qx(){return Ts(this.isoWeekYear(),1,4)}function Zx(){var t=this.localeData()._week;return Ts(this.year(),t.dow,t.doy)}function Xx(){var t=this.localeData()._week;return Ts(this.weekYear(),t.dow,t.doy)}function n_(t,e,i,s,r){var n;return t==null?Ao(this,s,r).year:(n=Ts(t,s,r),e>n&&(e=n),eE.call(this,t,e,i,s,r))}function eE(t,e,i,s,r){var n=Lv(t,e,i,s,r),o=Mo(n.year,0,n.dayOfYear);return this.year(o.getUTCFullYear()),this.month(o.getUTCMonth()),this.date(o.getUTCDate()),this}me("Q",0,"Qo","quarter");Rt("quarter","Q");$t("quarter",7);oe("Q",Dv);Fe("Q",function(t,e){e[_s]=(De(t)-1)*3});function tE(t){return t==null?Math.ceil((this.month()+1)/3):this.month((t-1)*3+this.month()%3)}me("D",["DD",2],"Do","date");Rt("date","D");$t("date",9);oe("D",Qe);oe("DD",Qe,ri);oe("Do",function(t,e){return t?e._dayOfMonthOrdinalParse||e._ordinalParse:e._dayOfMonthOrdinalParseLenient});Fe(["D","DD"],qi);Fe("Do",function(t,e){e[qi]=De(t.match(Qe)[0])});var r_=Wr("Date",!0);me("DDD",["DDDD",3],"DDDo","dayOfYear");Rt("dayOfYear","DDD");$t("dayOfYear",4);oe("DDD",zl);oe("DDDD",kv);Fe(["DDD","DDDD"],function(t,e,i){i._dayOfYear=De(t)});function iE(t){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return t==null?e:this.add(t-e,"d")}me("m",["mm",2],0,"minute");Rt("minute","m");$t("minute",14);oe("m",Qe);oe("mm",Qe,ri);Fe(["m","mm"],Ii);var sE=Wr("Minutes",!1);me("s",["ss",2],0,"second");Rt("second","s");$t("second",15);oe("s",Qe);oe("ss",Qe,ri);Fe(["s","ss"],ys);var nE=Wr("Seconds",!1);me("S",0,0,function(){return~~(this.millisecond()/100)});me(0,["SS",2],0,function(){return~~(this.millisecond()/10)});me(0,["SSS",3],0,"millisecond");me(0,["SSSS",4],0,function(){return this.millisecond()*10});me(0,["SSSSS",5],0,function(){return this.millisecond()*100});me(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3});me(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4});me(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5});me(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6});Rt("millisecond","ms");$t("millisecond",16);oe("S",zl,Dv);oe("SS",zl,ri);oe("SSS",zl,kv);var Hs,o_;for(Hs="SSSS";Hs.length<=9;Hs+="S")oe(Hs,zr);function rE(t,e){e[yn]=De(("0."+t)*1e3)}for(Hs="S";Hs.length<=9;Hs+="S")Fe(Hs,rE);o_=Wr("Milliseconds",!1);me("z",0,0,"zoneAbbr");me("zz",0,0,"zoneName");function oE(){return this._isUTC?"UTC":""}function aE(){return this._isUTC?"Coordinated Universal Time":""}var Q=ea.prototype;Q.add=X0;Q.calendar=ox;Q.clone=ax;Q.diff=mx;Q.endOf=xx;Q.format=_x;Q.from=yx;Q.fromNow=bx;Q.to=wx;Q.toNow=Sx;Q.get=c1;Q.invalidAt=Ox;Q.isAfter=lx;Q.isBefore=dx;Q.isBetween=cx;Q.isSame=ux;Q.isSameOrAfter=hx;Q.isSameOrBefore=fx;Q.isValid=Mx;Q.lang=Xv;Q.locale=Zv;Q.localeData=e_;Q.max=M0;Q.min=P0;Q.parsingFlags=Ax;Q.set=u1;Q.startOf=Tx;Q.subtract=ex;Q.toArray=kx;Q.toObject=Cx;Q.toDate=Dx;Q.toISOString=gx;Q.inspect=vx;typeof Symbol<"u"&&Symbol.for!=null&&(Q[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"});Q.toJSON=Px;Q.toString=px;Q.unix=Ix;Q.valueOf=Ex;Q.creationData=Rx;Q.eraName=Vx;Q.eraNarrow=Wx;Q.eraAbbr=zx;Q.eraYear=Fx;Q.year=Nv;Q.isLeapYear=P1;Q.weekYear=Kx;Q.isoWeekYear=qx;Q.quarter=Q.quarters=tE;Q.month=Rv;Q.daysInMonth=D1;Q.week=Q.weeks=N1;Q.isoWeek=Q.isoWeeks=L1;Q.weeksInYear=Zx;Q.weeksInWeekYear=Xx;Q.isoWeeksInYear=Jx;Q.isoWeeksInISOWeekYear=Qx;Q.date=r_;Q.day=Q.days=J1;Q.weekday=Q1;Q.isoWeekday=Z1;Q.dayOfYear=iE;Q.hour=Q.hours=r0;Q.minute=Q.minutes=sE;Q.second=Q.seconds=nE;Q.millisecond=Q.milliseconds=o_;Q.utcOffset=z0;Q.utc=j0;Q.local=B0;Q.parseZone=H0;Q.hasAlignedHourOffset=U0;Q.isDST=Y0;Q.isLocal=K0;Q.isUtcOffset=q0;Q.isUtc=Kv;Q.isUTC=Kv;Q.zoneAbbr=oE;Q.zoneName=aE;Q.dates=vi("dates accessor is deprecated. Use date instead.",r_);Q.months=vi("months accessor is deprecated. Use month instead",Rv);Q.years=vi("years accessor is deprecated. Use year instead",Nv);Q.zone=vi("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",F0);Q.isDSTShifted=vi("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",G0);function lE(t){return Je(t*1e3)}function dE(){return Je.apply(null,arguments).parseZone()}function a_(t){return t}var Ve=Mu.prototype;Ve.calendar=JT;Ve.longDateFormat=e1;Ve.invalidDate=i1;Ve.ordinal=r1;Ve.preparse=a_;Ve.postformat=a_;Ve.relativeTime=a1;Ve.pastFuture=l1;Ve.set=KT;Ve.eras=$x;Ve.erasParse=Nx;Ve.erasConvertYear=Lx;Ve.erasAbbrRegex=Bx;Ve.erasNameRegex=jx;Ve.erasNarrowRegex=Hx;Ve.months=T1;Ve.monthsShort=x1;Ve.monthsParse=I1;Ve.monthsRegex=C1;Ve.monthsShortRegex=k1;Ve.week=A1;Ve.firstDayOfYear=$1;Ve.firstDayOfWeek=R1;Ve.weekdays=U1;Ve.weekdaysMin=G1;Ve.weekdaysShort=Y1;Ve.weekdaysParse=q1;Ve.weekdaysRegex=X1;Ve.weekdaysShortRegex=e0;Ve.weekdaysMinRegex=t0;Ve.isPM=s0;Ve.meridiem=o0;function pl(t,e,i,s){var r=Ms(),n=os().set(s,e);return r[i](n,t)}function l_(t,e,i){if(Ds(t)&&(e=t,t=void 0),t=t||"",e!=null)return pl(t,e,i,"month");var s,r=[];for(s=0;s<12;s++)r[s]=pl(t,s,i,"month");return r}function Gu(t,e,i,s){typeof t=="boolean"?(Ds(e)&&(i=e,e=void 0),e=e||""):(e=t,i=e,t=!1,Ds(e)&&(i=e,e=void 0),e=e||"");var r=Ms(),n=t?r._week.dow:0,o,a=[];if(i!=null)return pl(e,(i+n)%7,s,"day");for(o=0;o<7;o++)a[o]=pl(e,(o+n)%7,s,"day");return a}function cE(t,e){return l_(t,e,"months")}function uE(t,e){return l_(t,e,"monthsShort")}function hE(t,e,i){return Gu(t,e,i,"weekdays")}function fE(t,e,i){return Gu(t,e,i,"weekdaysShort")}function mE(t,e,i){return Gu(t,e,i,"weekdaysMin")}Gs("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var e=t%10,i=De(t%100/10)===1?"th":e===1?"st":e===2?"nd":e===3?"rd":"th";return t+i}});z.lang=vi("moment.lang is deprecated. Use moment.locale instead.",Gs);z.langData=vi("moment.langData is deprecated. Use moment.localeData instead.",Ms);var ds=Math.abs;function pE(){var t=this._data;return this._milliseconds=ds(this._milliseconds),this._days=ds(this._days),this._months=ds(this._months),t.milliseconds=ds(t.milliseconds),t.seconds=ds(t.seconds),t.minutes=ds(t.minutes),t.hours=ds(t.hours),t.months=ds(t.months),t.years=ds(t.years),this}function d_(t,e,i,s){var r=Vi(e,i);return t._milliseconds+=s*r._milliseconds,t._days+=s*r._days,t._months+=s*r._months,t._bubble()}function gE(t,e){return d_(this,t,e,1)}function vE(t,e){return d_(this,t,e,-1)}function Wf(t){return t<0?Math.floor(t):Math.ceil(t)}function _E(){var t=this._milliseconds,e=this._days,i=this._months,s=this._data,r,n,o,a,l;return t>=0&&e>=0&&i>=0||t<=0&&e<=0&&i<=0||(t+=Wf(jc(i)+e)*864e5,e=0,i=0),s.milliseconds=t%1e3,r=li(t/1e3),s.seconds=r%60,n=li(r/60),s.minutes=n%60,o=li(n/60),s.hours=o%24,e+=li(o/24),l=li(c_(e)),i+=l,e-=Wf(jc(l)),a=li(i/12),i%=12,s.days=e,s.months=i,s.years=a,this}function c_(t){return t*4800/146097}function jc(t){return t*146097/4800}function yE(t){if(!this.isValid())return NaN;var e,i,s=this._milliseconds;if(t=_i(t),t==="month"||t==="quarter"||t==="year")switch(e=this._days+s/864e5,i=this._months+c_(e),t){case"month":return i;case"quarter":return i/3;case"year":return i/12}else switch(e=this._days+Math.round(jc(this._months)),t){case"week":return e/7+s/6048e5;case"day":return e+s/864e5;case"hour":return e*24+s/36e5;case"minute":return e*1440+s/6e4;case"second":return e*86400+s/1e3;case"millisecond":return Math.floor(e*864e5)+s;default:throw new Error("Unknown unit "+t)}}function bE(){return this.isValid()?this._milliseconds+this._days*864e5+this._months%12*2592e6+De(this._months/12)*31536e6:NaN}function As(t){return function(){return this.as(t)}}var wE=As("ms"),SE=As("s"),TE=As("m"),xE=As("h"),EE=As("d"),IE=As("w"),DE=As("M"),kE=As("Q"),CE=As("y");function PE(){return Vi(this)}function ME(t){return t=_i(t),this.isValid()?this[t+"s"]():NaN}function Wn(t){return function(){return this.isValid()?this._data[t]:NaN}}var AE=Wn("milliseconds"),OE=Wn("seconds"),RE=Wn("minutes"),$E=Wn("hours"),NE=Wn("days"),LE=Wn("months"),VE=Wn("years");function WE(){return li(this.days()/7)}var fs=Math.round,ar={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function zE(t,e,i,s,r){return r.relativeTime(e||1,!!i,t,s)}function FE(t,e,i,s){var r=Vi(t).abs(),n=fs(r.as("s")),o=fs(r.as("m")),a=fs(r.as("h")),l=fs(r.as("d")),d=fs(r.as("M")),u=fs(r.as("w")),h=fs(r.as("y")),p=n<=i.ss&&["s",n]||n<i.s&&["ss",n]||o<=1&&["m"]||o<i.m&&["mm",o]||a<=1&&["h"]||a<i.h&&["hh",a]||l<=1&&["d"]||l<i.d&&["dd",l];return i.w!=null&&(p=p||u<=1&&["w"]||u<i.w&&["ww",u]),p=p||d<=1&&["M"]||d<i.M&&["MM",d]||h<=1&&["y"]||["yy",h],p[2]=e,p[3]=+t>0,p[4]=s,zE.apply(null,p)}function jE(t){return t===void 0?fs:typeof t=="function"?(fs=t,!0):!1}function BE(t,e){return ar[t]===void 0?!1:e===void 0?ar[t]:(ar[t]=e,t==="s"&&(ar.ss=e-1),!0)}function HE(t,e){if(!this.isValid())return this.localeData().invalidDate();var i=!1,s=ar,r,n;return typeof t=="object"&&(e=t,t=!1),typeof t=="boolean"&&(i=t),typeof e=="object"&&(s=Object.assign({},ar,e),e.s!=null&&e.ss==null&&(s.ss=e.s-1)),r=this.localeData(),n=FE(this,!i,s,r),i&&(n=r.pastFuture(+this,n)),r.postformat(n)}var Rd=Math.abs;function qn(t){return(t>0)-(t<0)||+t}function Kl(){if(!this.isValid())return this.localeData().invalidDate();var t=Rd(this._milliseconds)/1e3,e=Rd(this._days),i=Rd(this._months),s,r,n,o,a=this.asSeconds(),l,d,u,h;return a?(s=li(t/60),r=li(s/60),t%=60,s%=60,n=li(i/12),i%=12,o=t?t.toFixed(3).replace(/\.?0+$/,""):"",l=a<0?"-":"",d=qn(this._months)!==qn(a)?"-":"",u=qn(this._days)!==qn(a)?"-":"",h=qn(this._milliseconds)!==qn(a)?"-":"",l+"P"+(n?d+n+"Y":"")+(i?d+i+"M":"")+(e?u+e+"D":"")+(r||s||t?"T":"")+(r?h+r+"H":"")+(s?h+s+"M":"")+(t?h+o+"S":"")):"P0D"}var Ae=Yl.prototype;Ae.isValid=N0;Ae.abs=pE;Ae.add=gE;Ae.subtract=vE;Ae.as=yE;Ae.asMilliseconds=wE;Ae.asSeconds=SE;Ae.asMinutes=TE;Ae.asHours=xE;Ae.asDays=EE;Ae.asWeeks=IE;Ae.asMonths=DE;Ae.asQuarters=kE;Ae.asYears=CE;Ae.valueOf=bE;Ae._bubble=_E;Ae.clone=PE;Ae.get=ME;Ae.milliseconds=AE;Ae.seconds=OE;Ae.minutes=RE;Ae.hours=$E;Ae.days=NE;Ae.weeks=WE;Ae.months=LE;Ae.years=VE;Ae.humanize=HE;Ae.toISOString=Kl;Ae.toString=Kl;Ae.toJSON=Kl;Ae.locale=Zv;Ae.localeData=e_;Ae.toIsoString=vi("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Kl);Ae.lang=Xv;me("X",0,0,"unix");me("x",0,0,"valueOf");oe("x",jl);oe("X",f1);Fe("X",function(t,e,i){i._d=new Date(parseFloat(t)*1e3)});Fe("x",function(t,e,i){i._d=new Date(De(t))});//! moment.js
z.version="2.29.1";YT(Je);z.fn=Q;z.min=A0;z.max=O0;z.now=R0;z.utc=os;z.unix=lE;z.months=cE;z.isDate=Xo;z.locale=Gs;z.invalid=Ll;z.duration=Vi;z.isMoment=Mi;z.weekdays=hE;z.parseZone=dE;z.localeData=Ms;z.isDuration=qa;z.monthsShort=uE;z.weekdaysMin=mE;z.defineLocale=Wu;z.updateLocale=d0;z.locales=c0;z.weekdaysShort=fE;z.normalizeUnits=_i;z.relativeTimeRounding=jE;z.relativeTimeThreshold=BE;z.calendarFormat=rx;z.prototype=Q;z.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"};/**
 * @preserve date-and-time (c) KNOWLEDGECODE | MIT
 */var de={},ql={},zf={},Ks="en",UE={MMMM:["January","February","March","April","May","June","July","August","September","October","November","December"],MMM:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dddd:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],ddd:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dd:["Su","Mo","Tu","We","Th","Fr","Sa"],A:["AM","PM"]},YE={YYYY:function(t){return("000"+t.getFullYear()).slice(-4)},YY:function(t){return("0"+t.getFullYear()).slice(-2)},Y:function(t){return""+t.getFullYear()},MMMM:function(t){return this.res.MMMM[t.getMonth()]},MMM:function(t){return this.res.MMM[t.getMonth()]},MM:function(t){return("0"+(t.getMonth()+1)).slice(-2)},M:function(t){return""+(t.getMonth()+1)},DD:function(t){return("0"+t.getDate()).slice(-2)},D:function(t){return""+t.getDate()},HH:function(t){return("0"+t.getHours()).slice(-2)},H:function(t){return""+t.getHours()},A:function(t){return this.res.A[t.getHours()>11|0]},hh:function(t){return("0"+(t.getHours()%12||12)).slice(-2)},h:function(t){return""+(t.getHours()%12||12)},mm:function(t){return("0"+t.getMinutes()).slice(-2)},m:function(t){return""+t.getMinutes()},ss:function(t){return("0"+t.getSeconds()).slice(-2)},s:function(t){return""+t.getSeconds()},SSS:function(t){return("00"+t.getMilliseconds()).slice(-3)},SS:function(t){return("0"+(t.getMilliseconds()/10|0)).slice(-2)},S:function(t){return""+(t.getMilliseconds()/100|0)},dddd:function(t){return this.res.dddd[t.getDay()]},ddd:function(t){return this.res.ddd[t.getDay()]},dd:function(t){return this.res.dd[t.getDay()]},Z:function(t){var e=t.utc?0:t.getTimezoneOffset()/.6;return(e>0?"-":"+")+("000"+Math.abs(e-e%100*.4)).slice(-4)},post:function(t){return t}},GE={YYYY:function(t){return this.exec(/^\d{4}/,t)},Y:function(t){return this.exec(/^\d{1,4}/,t)},MMMM:function(t){var e=this.find(this.res.MMMM,t);return e.value++,e},MMM:function(t){var e=this.find(this.res.MMM,t);return e.value++,e},MM:function(t){return this.exec(/^\d\d/,t)},M:function(t){return this.exec(/^\d\d?/,t)},DD:function(t){return this.exec(/^\d\d/,t)},D:function(t){return this.exec(/^\d\d?/,t)},HH:function(t){return this.exec(/^\d\d/,t)},H:function(t){return this.exec(/^\d\d?/,t)},A:function(t){return this.find(this.res.A,t)},hh:function(t){return this.exec(/^\d\d/,t)},h:function(t){return this.exec(/^\d\d?/,t)},mm:function(t){return this.exec(/^\d\d/,t)},m:function(t){return this.exec(/^\d\d?/,t)},ss:function(t){return this.exec(/^\d\d/,t)},s:function(t){return this.exec(/^\d\d?/,t)},SSS:function(t){return this.exec(/^\d{1,3}/,t)},SS:function(t){var e=this.exec(/^\d\d?/,t);return e.value*=10,e},S:function(t){var e=this.exec(/^\d/,t);return e.value*=100,e},Z:function(t){var e=this.exec(/^[\+-]\d{2}[0-5]\d/,t);return e.value=(e.value/100|0)*-60-e.value%100,e},h12:function(t,e){return(t===12?0:t)+e*12},exec:function(t,e){var i=(t.exec(e)||[""])[0];return{value:i|0,length:i.length}},find:function(t,e){for(var i=-1,s=0,r=0,n=t.length,o;r<n;r++)o=t[r],!e.indexOf(o)&&o.length>s&&(i=r,s=o.length);return{value:i,length:s}},pre:function(t){return t}},u_=function(t,e,i){var s=function(n,o,a){var l=function(p){p&&(this.res=p)};l.prototype=n,l.prototype.constructor=l;var d=new l(a),u;for(var h in o||{})u=o[h],d[h]=u.slice?u.slice():u;return d},r={res:s(e.res,i.res)};r.formatter=s(e.formatter,i.formatter,r.res),r.parser=s(e.parser,i.parser,r.res),ql[t]=r};de.compile=function(t){for(var e=/\[([^\[\]]|\[[^\[\]]*])*]|([A-Za-z])\2+|\.{3}|./g,i,s=[t];i=e.exec(t);)s[s.length]=i[0];return s};de.format=function(t,e,i){var s=typeof e=="string"?de.compile(e):e,r=de.addMinutes(t,i?t.getTimezoneOffset():0),n=ql[Ks].formatter,o="";r.utc=i||!1;for(var a=1,l=s.length,d;a<l;a++)d=s[a],o+=n[d]?n.post(n[d](r,s[0])):d.replace(/\[(.*)]/,"$1");return o};de.preparse=function(t,e){var i=typeof e=="string"?de.compile(e):e,s={Y:1970,M:1,D:1,H:0,A:0,h:0,m:0,s:0,S:0,Z:0,_index:0,_length:0,_match:0},r=/\[(.*)]/,n=ql[Ks].parser,o=0;t=n.pre(t);for(var a=1,l=i.length,d,u;a<l;a++)if(d=i[a],n[d]){if(u=n[d](t.slice(o),i[0]),!u.length)break;o+=u.length,s[d.charAt(0)]=u.value,s._match++}else if(d===t.charAt(o)||d===" ")o++;else if(r.test(d)&&!t.slice(o).indexOf(r.exec(d)[1]))o+=d.length-2;else if(d==="..."){o=t.length;break}else break;return s.H=s.H||n.h12(s.h,s.A),s._index=o,s._length=t.length,s};de.isValid=function(t,e){var i=typeof t=="string"?de.preparse(t,e):t,s=[31,28+de.isLeapYear(i.Y)|0,31,30,31,30,31,31,30,31,30,31][i.M-1];return!(i._index<1||i._length<1||i._index-i._length||i._match<1||i.Y<1||i.Y>9999||i.M<1||i.M>12||i.D<1||i.D>s||i.H<0||i.H>23||i.m<0||i.m>59||i.s<0||i.s>59||i.S<0||i.S>999||i.Z<-720||i.Z>840)};de.parse=function(t,e,i){var s=de.preparse(t,e);return de.isValid(s)?(s.M-=s.Y<100?22801:1,i||s.Z?new Date(Date.UTC(s.Y,s.M,s.D,s.H,s.m+s.Z,s.s,s.S)):new Date(s.Y,s.M,s.D,s.H,s.m,s.s,s.S)):new Date(NaN)};de.transform=function(t,e,i,s){return de.format(de.parse(t,e),i,s)};de.addYears=function(t,e){return de.addMonths(t,e*12)};de.addMonths=function(t,e){var i=new Date(t.getTime());return i.setMonth(i.getMonth()+e),i};de.addDays=function(t,e){var i=new Date(t.getTime());return i.setDate(i.getDate()+e),i};de.addHours=function(t,e){return de.addMinutes(t,e*60)};de.addMinutes=function(t,e){return de.addSeconds(t,e*60)};de.addSeconds=function(t,e){return de.addMilliseconds(t,e*1e3)};de.addMilliseconds=function(t,e){return new Date(t.getTime()+e)};de.subtract=function(t,e){var i=t.getTime()-e.getTime();return{toMilliseconds:function(){return i},toSeconds:function(){return i/1e3},toMinutes:function(){return i/6e4},toHours:function(){return i/36e5},toDays:function(){return i/864e5}}};de.isLeapYear=function(t){return!(t%4)&&!!(t%100)||!(t%400)};de.isSameDay=function(t,e){return t.toDateString()===e.toDateString()};de.locale=function(t,e){return e?u_(t,{res:UE,formatter:YE,parser:GE},e):Ks=(typeof t=="function"?t:de.locale[t]||function(){})(de)||Ks,Ks};de.extend=function(t){var e=t.extender||{};for(var i in e)de[i]||(de[i]=e[i]);(t.formatter||t.parser||t.res)&&u_(Ks,ql[Ks],t)};de.plugin=function(t,e){e?zf[t]||de.extend(zf[t]=e):(typeof t=="function"?t:de.plugin[t]||function(){})(de)};de.locale(Ks,{});function Ku(t,e=2){return(Math.round(t*100)/100).toFixed(e)}function KE(t,e=2){return new Intl.NumberFormat([],{minimumFractionDigits:e,maximumFractionDigits:e}).format(t)}function xe(t,e){return e=e||"id",t.sort((i,s)=>i[e]-s[e])}function Jl(t,e){return e=e||"id",t.sort((i,s)=>s[e]-i[e])}function h_(t,e){return t.toSorted((i,s)=>new Date(i[e])-new Date(s[e]))}function qE(t,e){return t.toSorted((i,s)=>new Date(s[e])-new Date(i[e]))}function gl(t,e){return e?t.sort((i,s)=>i[e].toLowerCase()<s[e].toLowerCase()?-1:i[e].toLowerCase()>s[e].toLowerCase()?1:0):t.sort((i,s)=>i.toLowerCase()<s.toLowerCase()?-1:i.toLowerCase()>s.toLowerCase()?1:0)}function Ff(t,e){return t.sort((i,s)=>!i[e]&&s[e]?-1:i[e]&&!s[e]?1:0)}function Ql(t,e){let i="";try{let s=0;t.forEach(r=>{s++!==0&&(i+=", "),i+=r[e]})}catch{console.log()}return i}function En(t,e,i){var s=t.sort((r,n)=>{let o=r.positions.find(l=>l.parentType==e&&l.parentID==i).position,a=n.positions.find(l=>l.parentType==e&&l.parentID==i).position;return o-a});return s}function Fr(t,e){var i=r=>r.id==t.id,s=e.findIndex(i);return s===-1?!1:(e.splice(s,1),!0)}function xs(t,e){var i=r=>r.id==t,s=e.findIndex(i);return s===-1?!1:(e.splice(s,1),!0)}function Ai(t,e){var i=r=>r.id==t.id,s=e.findIndex(i);return s===-1?!1:(e.splice(s,1,t),!0)}function Be(t,e){var i=r=>r.id==t.id,s=e.findIndex(i);return s===-1?(e.push(t),!1):(e.splice(s,1,t),!0)}function bs(t,e){var i=r=>r.id==t.id,s=e.findIndex(i);return s===-1?(e.push(t),!1):(e.splice(s,1,t),!0)}function q(t){return JSON.parse(JSON.stringify(t))}function JE(t){return t.replace(/(?:^\w|[A-Z]|\b\w)/g,function(e,i){return i===0?e.toLowerCase():e.toUpperCase()}).replace(/\s+/g,"")}function Zs(t){return t.charAt(0).toUpperCase()+t.slice(1)}function Zl(t){let i=t.split("T")[0].split("-");return`${i[0]}-${i[1]}-${i[2]}`}function QE(t){let i=t.split("T")[1].split(":");return`${i[0]}:${i[1]}`}function ZE(t){let e=t.split("T"),i=e[0].split("-"),s=e[1].split(":");return`${i[0]}-${i[1]}-${i[2]} ${s[0]}:${s[1]}`}function f_(t){return t.slice(19,25)}function it(t){return z(t).startOf("day").toDate()}function qu(t){return z(t).hour(0).minute(0).second(0).millisecond(0).toDate()}function m_(t=new Date){return de.format(t,"YYYY")}function p_(t=new Date){return de.format(t,"MMMM")}function g_(t=new Date,e=1){return z(t).add(e,"day").toDate()}function XE(t=new Date,e=1){return z(t).add(-e,"day").toDate()}function xr(t=new Date,e=1){return z(t).add(e,"month").toDate()}function Ju(t=new Date,e=1){return z(t).add(-e,"month").toDate()}class Er extends Error{constructor(e,i){const s=new.target.prototype;super(`${e}: Status code '${i}'`),this.statusCode=i,this.__proto__=s}}class Qu extends Error{constructor(e="A timeout occurred."){const i=new.target.prototype;super(e),this.__proto__=i}}class Di extends Error{constructor(e="An abort occurred."){const i=new.target.prototype;super(e),this.__proto__=i}}class eI extends Error{constructor(e,i){const s=new.target.prototype;super(e),this.transport=i,this.errorType="UnsupportedTransportError",this.__proto__=s}}class tI extends Error{constructor(e,i){const s=new.target.prototype;super(e),this.transport=i,this.errorType="DisabledTransportError",this.__proto__=s}}class iI extends Error{constructor(e,i){const s=new.target.prototype;super(e),this.transport=i,this.errorType="FailedToStartTransportError",this.__proto__=s}}class sI extends Error{constructor(e){const i=new.target.prototype;super(e),this.errorType="FailedToNegotiateWithServerError",this.__proto__=i}}class nI extends Error{constructor(e,i){const s=new.target.prototype;super(e),this.innerErrors=i,this.__proto__=s}}class v_{constructor(e,i,s){this.statusCode=e,this.statusText=i,this.content=s}}class Xl{get(e,i){return this.send({...i,method:"GET",url:e})}post(e,i){return this.send({...i,method:"POST",url:e})}delete(e,i){return this.send({...i,method:"DELETE",url:e})}getCookieString(e){return""}}var W;(function(t){t[t.Trace=0]="Trace",t[t.Debug=1]="Debug",t[t.Information=2]="Information",t[t.Warning=3]="Warning",t[t.Error=4]="Error",t[t.Critical=5]="Critical",t[t.None=6]="None"})(W||(W={}));class Ro{constructor(){}log(e,i){}}Ro.instance=new Ro;const rI="7.0.0";class Tt{static isRequired(e,i){if(e==null)throw new Error(`The '${i}' argument is required.`)}static isNotEmpty(e,i){if(!e||e.match(/^\s*$/))throw new Error(`The '${i}' argument should not be empty.`)}static isIn(e,i,s){if(!(e in i))throw new Error(`Unknown ${s} value: ${e}.`)}}class yt{static get isBrowser(){return typeof window=="object"&&typeof window.document=="object"}static get isWebWorker(){return typeof self=="object"&&"importScripts"in self}static get isReactNative(){return typeof window=="object"&&typeof window.document>"u"}static get isNode(){return!this.isBrowser&&!this.isWebWorker&&!this.isReactNative}}function $o(t,e){let i="";return sa(t)?(i=`Binary data of length ${t.byteLength}`,e&&(i+=`. Content: '${oI(t)}'`)):typeof t=="string"&&(i=`String data of length ${t.length}`,e&&(i+=`. Content: '${t}'`)),i}function oI(t){const e=new Uint8Array(t);let i="";return e.forEach(s=>{const r=s<16?"0":"";i+=`0x${r}${s.toString(16)} `}),i.substr(0,i.length-1)}function sa(t){return t&&typeof ArrayBuffer<"u"&&(t instanceof ArrayBuffer||t.constructor&&t.constructor.name==="ArrayBuffer")}async function __(t,e,i,s,r,n){const o={},[a,l]=Ir();o[a]=l,t.log(W.Trace,`(${e} transport) sending data. ${$o(r,n.logMessageContent)}.`);const d=sa(r)?"arraybuffer":"text",u=await i.post(s,{content:r,headers:{...o,...n.headers},responseType:d,timeout:n.timeout,withCredentials:n.withCredentials});t.log(W.Trace,`(${e} transport) request complete. Response status: ${u.statusCode}.`)}function aI(t){return t===void 0?new vl(W.Information):t===null?Ro.instance:t.log!==void 0?t:new vl(t)}class lI{constructor(e,i){this._subject=e,this._observer=i}dispose(){const e=this._subject.observers.indexOf(this._observer);e>-1&&this._subject.observers.splice(e,1),this._subject.observers.length===0&&this._subject.cancelCallback&&this._subject.cancelCallback().catch(i=>{})}}class vl{constructor(e){this._minLevel=e,this.out=console}log(e,i){if(e>=this._minLevel){const s=`[${new Date().toISOString()}] ${W[e]}: ${i}`;switch(e){case W.Critical:case W.Error:this.out.error(s);break;case W.Warning:this.out.warn(s);break;case W.Information:this.out.info(s);break;default:this.out.log(s);break}}}}function Ir(){let t="X-SignalR-User-Agent";return yt.isNode&&(t="User-Agent"),[t,dI(rI,cI(),hI(),uI())]}function dI(t,e,i,s){let r="Microsoft SignalR/";const n=t.split(".");return r+=`${n[0]}.${n[1]}`,r+=` (${t}; `,e&&e!==""?r+=`${e}; `:r+="Unknown OS; ",r+=`${i}`,s?r+=`; ${s}`:r+="; Unknown Runtime Version",r+=")",r}function cI(){if(yt.isNode)switch(process.platform){case"win32":return"Windows NT";case"darwin":return"macOS";case"linux":return"Linux";default:return process.platform}else return""}function uI(){if(yt.isNode)return process.versions.node}function hI(){return yt.isNode?"NodeJS":"Browser"}function jf(t){return t.stack?t.stack:t.message?t.message:`${t}`}function fI(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("could not find global")}class mI extends Xl{constructor(e){if(super(),this._logger=e,typeof fetch>"u"){const i=typeof __webpack_require__=="function"?__non_webpack_require__:require;this._jar=new(i("tough-cookie")).CookieJar,this._fetchType=i("node-fetch"),this._fetchType=i("fetch-cookie")(this._fetchType,this._jar)}else this._fetchType=fetch.bind(fI());if(typeof AbortController>"u"){const i=typeof __webpack_require__=="function"?__non_webpack_require__:require;this._abortControllerType=i("abort-controller")}else this._abortControllerType=AbortController}async send(e){if(e.abortSignal&&e.abortSignal.aborted)throw new Di;if(!e.method)throw new Error("No method defined.");if(!e.url)throw new Error("No url defined.");const i=new this._abortControllerType;let s;e.abortSignal&&(e.abortSignal.onabort=()=>{i.abort(),s=new Di});let r=null;if(e.timeout){const l=e.timeout;r=setTimeout(()=>{i.abort(),this._logger.log(W.Warning,"Timeout from HTTP request."),s=new Qu},l)}e.content===""&&(e.content=void 0),e.content&&(e.headers=e.headers||{},sa(e.content)?e.headers["Content-Type"]="application/octet-stream":e.headers["Content-Type"]="text/plain;charset=UTF-8");let n;try{n=await this._fetchType(e.url,{body:e.content,cache:"no-cache",credentials:e.withCredentials===!0?"include":"same-origin",headers:{"X-Requested-With":"XMLHttpRequest",...e.headers},method:e.method,mode:"cors",redirect:"follow",signal:i.signal})}catch(l){throw s||(this._logger.log(W.Warning,`Error from HTTP request. ${l}.`),l)}finally{r&&clearTimeout(r),e.abortSignal&&(e.abortSignal.onabort=null)}if(!n.ok){const l=await Bf(n,"text");throw new Er(l||n.statusText,n.status)}const a=await Bf(n,e.responseType);return new v_(n.status,n.statusText,a)}getCookieString(e){let i="";return yt.isNode&&this._jar&&this._jar.getCookies(e,(s,r)=>i=r.join("; ")),i}}function Bf(t,e){let i;switch(e){case"arraybuffer":i=t.arrayBuffer();break;case"text":i=t.text();break;case"blob":case"document":case"json":throw new Error(`${e} is not supported.`);default:i=t.text();break}return i}class pI extends Xl{constructor(e){super(),this._logger=e}send(e){return e.abortSignal&&e.abortSignal.aborted?Promise.reject(new Di):e.method?e.url?new Promise((i,s)=>{const r=new XMLHttpRequest;r.open(e.method,e.url,!0),r.withCredentials=e.withCredentials===void 0?!0:e.withCredentials,r.setRequestHeader("X-Requested-With","XMLHttpRequest"),e.content===""&&(e.content=void 0),e.content&&(sa(e.content)?r.setRequestHeader("Content-Type","application/octet-stream"):r.setRequestHeader("Content-Type","text/plain;charset=UTF-8"));const n=e.headers;n&&Object.keys(n).forEach(o=>{r.setRequestHeader(o,n[o])}),e.responseType&&(r.responseType=e.responseType),e.abortSignal&&(e.abortSignal.onabort=()=>{r.abort(),s(new Di)}),e.timeout&&(r.timeout=e.timeout),r.onload=()=>{e.abortSignal&&(e.abortSignal.onabort=null),r.status>=200&&r.status<300?i(new v_(r.status,r.statusText,r.response||r.responseText)):s(new Er(r.response||r.responseText||r.statusText,r.status))},r.onerror=()=>{this._logger.log(W.Warning,`Error from HTTP request. ${r.status}: ${r.statusText}.`),s(new Er(r.statusText,r.status))},r.ontimeout=()=>{this._logger.log(W.Warning,"Timeout from HTTP request."),s(new Qu)},r.send(e.content)}):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))}}class gI extends Xl{constructor(e){if(super(),typeof fetch<"u"||yt.isNode)this._httpClient=new mI(e);else if(typeof XMLHttpRequest<"u")this._httpClient=new pI(e);else throw new Error("No usable HttpClient found.")}send(e){return e.abortSignal&&e.abortSignal.aborted?Promise.reject(new Di):e.method?e.url?this._httpClient.send(e):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))}getCookieString(e){return this._httpClient.getCookieString(e)}}class Xt{static write(e){return`${e}${Xt.RecordSeparator}`}static parse(e){if(e[e.length-1]!==Xt.RecordSeparator)throw new Error("Message is incomplete.");const i=e.split(Xt.RecordSeparator);return i.pop(),i}}Xt.RecordSeparatorCode=30;Xt.RecordSeparator=String.fromCharCode(Xt.RecordSeparatorCode);class vI{writeHandshakeRequest(e){return Xt.write(JSON.stringify(e))}parseHandshakeResponse(e){let i,s;if(sa(e)){const a=new Uint8Array(e),l=a.indexOf(Xt.RecordSeparatorCode);if(l===-1)throw new Error("Message is incomplete.");const d=l+1;i=String.fromCharCode.apply(null,Array.prototype.slice.call(a.slice(0,d))),s=a.byteLength>d?a.slice(d).buffer:null}else{const a=e,l=a.indexOf(Xt.RecordSeparator);if(l===-1)throw new Error("Message is incomplete.");const d=l+1;i=a.substring(0,d),s=a.length>d?a.substring(d):null}const r=Xt.parse(i),n=JSON.parse(r[0]);if(n.type)throw new Error("Expected a handshake response from the server.");return[s,n]}}var Ue;(function(t){t[t.Invocation=1]="Invocation",t[t.StreamItem=2]="StreamItem",t[t.Completion=3]="Completion",t[t.StreamInvocation=4]="StreamInvocation",t[t.CancelInvocation=5]="CancelInvocation",t[t.Ping=6]="Ping",t[t.Close=7]="Close"})(Ue||(Ue={}));class _I{constructor(){this.observers=[]}next(e){for(const i of this.observers)i.next(e)}error(e){for(const i of this.observers)i.error&&i.error(e)}complete(){for(const e of this.observers)e.complete&&e.complete()}subscribe(e){return this.observers.push(e),new lI(this,e)}}const yI=30*1e3,bI=15*1e3;var tt;(function(t){t.Disconnected="Disconnected",t.Connecting="Connecting",t.Connected="Connected",t.Disconnecting="Disconnecting",t.Reconnecting="Reconnecting"})(tt||(tt={}));class Zu{constructor(e,i,s,r){this._nextKeepAlive=0,this._freezeEventListener=()=>{this._logger.log(W.Warning,"The page is being frozen, this will likely lead to the connection being closed and messages being lost. For more information see the docs at https://docs.microsoft.com/aspnet/core/signalr/javascript-client#bsleep")},Tt.isRequired(e,"connection"),Tt.isRequired(i,"logger"),Tt.isRequired(s,"protocol"),this.serverTimeoutInMilliseconds=yI,this.keepAliveIntervalInMilliseconds=bI,this._logger=i,this._protocol=s,this.connection=e,this._reconnectPolicy=r,this._handshakeProtocol=new vI,this.connection.onreceive=n=>this._processIncomingData(n),this.connection.onclose=n=>this._connectionClosed(n),this._callbacks={},this._methods={},this._closedCallbacks=[],this._reconnectingCallbacks=[],this._reconnectedCallbacks=[],this._invocationId=0,this._receivedHandshakeResponse=!1,this._connectionState=tt.Disconnected,this._connectionStarted=!1,this._cachedPingMessage=this._protocol.writeMessage({type:Ue.Ping})}static create(e,i,s,r){return new Zu(e,i,s,r)}get state(){return this._connectionState}get connectionId(){return this.connection&&this.connection.connectionId||null}get baseUrl(){return this.connection.baseUrl||""}set baseUrl(e){if(this._connectionState!==tt.Disconnected&&this._connectionState!==tt.Reconnecting)throw new Error("The HubConnection must be in the Disconnected or Reconnecting state to change the url.");if(!e)throw new Error("The HubConnection url must be a valid url.");this.connection.baseUrl=e}start(){return this._startPromise=this._startWithStateTransitions(),this._startPromise}async _startWithStateTransitions(){if(this._connectionState!==tt.Disconnected)return Promise.reject(new Error("Cannot start a HubConnection that is not in the 'Disconnected' state."));this._connectionState=tt.Connecting,this._logger.log(W.Debug,"Starting HubConnection.");try{await this._startInternal(),yt.isBrowser&&window.document.addEventListener("freeze",this._freezeEventListener),this._connectionState=tt.Connected,this._connectionStarted=!0,this._logger.log(W.Debug,"HubConnection connected successfully.")}catch(e){return this._connectionState=tt.Disconnected,this._logger.log(W.Debug,`HubConnection failed to start successfully because of error '${e}'.`),Promise.reject(e)}}async _startInternal(){this._stopDuringStartError=void 0,this._receivedHandshakeResponse=!1;const e=new Promise((i,s)=>{this._handshakeResolver=i,this._handshakeRejecter=s});await this.connection.start(this._protocol.transferFormat);try{const i={protocol:this._protocol.name,version:this._protocol.version};if(this._logger.log(W.Debug,"Sending handshake request."),await this._sendMessage(this._handshakeProtocol.writeHandshakeRequest(i)),this._logger.log(W.Information,`Using HubProtocol '${this._protocol.name}'.`),this._cleanupTimeout(),this._resetTimeoutPeriod(),this._resetKeepAliveInterval(),await e,this._stopDuringStartError)throw this._stopDuringStartError;this.connection.features.inherentKeepAlive||await this._sendMessage(this._cachedPingMessage)}catch(i){throw this._logger.log(W.Debug,`Hub handshake failed with error '${i}' during start(). Stopping HubConnection.`),this._cleanupTimeout(),this._cleanupPingTimer(),await this.connection.stop(i),i}}async stop(){const e=this._startPromise;this._stopPromise=this._stopInternal(),await this._stopPromise;try{await e}catch{}}_stopInternal(e){return this._connectionState===tt.Disconnected?(this._logger.log(W.Debug,`Call to HubConnection.stop(${e}) ignored because it is already in the disconnected state.`),Promise.resolve()):this._connectionState===tt.Disconnecting?(this._logger.log(W.Debug,`Call to HttpConnection.stop(${e}) ignored because the connection is already in the disconnecting state.`),this._stopPromise):(this._connectionState=tt.Disconnecting,this._logger.log(W.Debug,"Stopping HubConnection."),this._reconnectDelayHandle?(this._logger.log(W.Debug,"Connection stopped during reconnect delay. Done reconnecting."),clearTimeout(this._reconnectDelayHandle),this._reconnectDelayHandle=void 0,this._completeClose(),Promise.resolve()):(this._cleanupTimeout(),this._cleanupPingTimer(),this._stopDuringStartError=e||new Di("The connection was stopped before the hub handshake could complete."),this.connection.stop(e)))}stream(e,...i){const[s,r]=this._replaceStreamingParams(i),n=this._createStreamInvocation(e,i,r);let o;const a=new _I;return a.cancelCallback=()=>{const l=this._createCancelInvocation(n.invocationId);return delete this._callbacks[n.invocationId],o.then(()=>this._sendWithProtocol(l))},this._callbacks[n.invocationId]=(l,d)=>{if(d){a.error(d);return}else l&&(l.type===Ue.Completion?l.error?a.error(new Error(l.error)):a.complete():a.next(l.item))},o=this._sendWithProtocol(n).catch(l=>{a.error(l),delete this._callbacks[n.invocationId]}),this._launchStreams(s,o),a}_sendMessage(e){return this._resetKeepAliveInterval(),this.connection.send(e)}_sendWithProtocol(e){return this._sendMessage(this._protocol.writeMessage(e))}send(e,...i){const[s,r]=this._replaceStreamingParams(i),n=this._sendWithProtocol(this._createInvocation(e,i,!0,r));return this._launchStreams(s,n),n}invoke(e,...i){const[s,r]=this._replaceStreamingParams(i),n=this._createInvocation(e,i,!1,r);return new Promise((a,l)=>{this._callbacks[n.invocationId]=(u,h)=>{if(h){l(h);return}else u&&(u.type===Ue.Completion?u.error?l(new Error(u.error)):a(u.result):l(new Error(`Unexpected message type: ${u.type}`)))};const d=this._sendWithProtocol(n).catch(u=>{l(u),delete this._callbacks[n.invocationId]});this._launchStreams(s,d)})}on(e,i){!e||!i||(e=e.toLowerCase(),this._methods[e]||(this._methods[e]=[]),this._methods[e].indexOf(i)===-1&&this._methods[e].push(i))}off(e,i){if(!e)return;e=e.toLowerCase();const s=this._methods[e];if(s)if(i){const r=s.indexOf(i);r!==-1&&(s.splice(r,1),s.length===0&&delete this._methods[e])}else delete this._methods[e]}onclose(e){e&&this._closedCallbacks.push(e)}onreconnecting(e){e&&this._reconnectingCallbacks.push(e)}onreconnected(e){e&&this._reconnectedCallbacks.push(e)}_processIncomingData(e){if(this._cleanupTimeout(),this._receivedHandshakeResponse||(e=this._processHandshakeResponse(e),this._receivedHandshakeResponse=!0),e){const i=this._protocol.parseMessages(e,this._logger);for(const s of i)switch(s.type){case Ue.Invocation:this._invokeClientMethod(s);break;case Ue.StreamItem:case Ue.Completion:{const r=this._callbacks[s.invocationId];if(r){s.type===Ue.Completion&&delete this._callbacks[s.invocationId];try{r(s)}catch(n){this._logger.log(W.Error,`Stream callback threw error: ${jf(n)}`)}}break}case Ue.Ping:break;case Ue.Close:{this._logger.log(W.Information,"Close message received from server.");const r=s.error?new Error("Server returned an error on close: "+s.error):void 0;s.allowReconnect===!0?this.connection.stop(r):this._stopPromise=this._stopInternal(r);break}default:this._logger.log(W.Warning,`Invalid message type: ${s.type}.`);break}}this._resetTimeoutPeriod()}_processHandshakeResponse(e){let i,s;try{[s,i]=this._handshakeProtocol.parseHandshakeResponse(e)}catch(r){const n="Error parsing handshake response: "+r;this._logger.log(W.Error,n);const o=new Error(n);throw this._handshakeRejecter(o),o}if(i.error){const r="Server returned handshake error: "+i.error;this._logger.log(W.Error,r);const n=new Error(r);throw this._handshakeRejecter(n),n}else this._logger.log(W.Debug,"Server handshake complete.");return this._handshakeResolver(),s}_resetKeepAliveInterval(){this.connection.features.inherentKeepAlive||(this._nextKeepAlive=new Date().getTime()+this.keepAliveIntervalInMilliseconds,this._cleanupPingTimer())}_resetTimeoutPeriod(){if((!this.connection.features||!this.connection.features.inherentKeepAlive)&&(this._timeoutHandle=setTimeout(()=>this.serverTimeout(),this.serverTimeoutInMilliseconds),this._pingServerHandle===void 0)){let e=this._nextKeepAlive-new Date().getTime();e<0&&(e=0),this._pingServerHandle=setTimeout(async()=>{if(this._connectionState===tt.Connected)try{await this._sendMessage(this._cachedPingMessage)}catch{this._cleanupPingTimer()}},e)}}serverTimeout(){this.connection.stop(new Error("Server timeout elapsed without receiving a message from the server."))}async _invokeClientMethod(e){const i=e.target.toLowerCase(),s=this._methods[i];if(!s){this._logger.log(W.Warning,`No client method with the name '${i}' found.`),e.invocationId&&(this._logger.log(W.Warning,`No result given for '${i}' method and invocation ID '${e.invocationId}'.`),await this._sendWithProtocol(this._createCompletionMessage(e.invocationId,"Client didn't provide a result.",null)));return}const r=s.slice(),n=!!e.invocationId;let o,a,l;for(const d of r)try{const u=o;o=await d.apply(this,e.arguments),n&&o&&u&&(this._logger.log(W.Error,`Multiple results provided for '${i}'. Sending error to server.`),l=this._createCompletionMessage(e.invocationId,"Client provided multiple results.",null)),a=void 0}catch(u){a=u,this._logger.log(W.Error,`A callback for the method '${i}' threw error '${u}'.`)}l?await this._sendWithProtocol(l):n?(a?l=this._createCompletionMessage(e.invocationId,`${a}`,null):o!==void 0?l=this._createCompletionMessage(e.invocationId,null,o):(this._logger.log(W.Warning,`No result given for '${i}' method and invocation ID '${e.invocationId}'.`),l=this._createCompletionMessage(e.invocationId,"Client didn't provide a result.",null)),await this._sendWithProtocol(l)):o&&this._logger.log(W.Error,`Result given for '${i}' method but server is not expecting a result.`)}_connectionClosed(e){this._logger.log(W.Debug,`HubConnection.connectionClosed(${e}) called while in state ${this._connectionState}.`),this._stopDuringStartError=this._stopDuringStartError||e||new Di("The underlying connection was closed before the hub handshake could complete."),this._handshakeResolver&&this._handshakeResolver(),this._cancelCallbacksWithError(e||new Error("Invocation canceled due to the underlying connection being closed.")),this._cleanupTimeout(),this._cleanupPingTimer(),this._connectionState===tt.Disconnecting?this._completeClose(e):this._connectionState===tt.Connected&&this._reconnectPolicy?this._reconnect(e):this._connectionState===tt.Connected&&this._completeClose(e)}_completeClose(e){if(this._connectionStarted){this._connectionState=tt.Disconnected,this._connectionStarted=!1,yt.isBrowser&&window.document.removeEventListener("freeze",this._freezeEventListener);try{this._closedCallbacks.forEach(i=>i.apply(this,[e]))}catch(i){this._logger.log(W.Error,`An onclose callback called with error '${e}' threw error '${i}'.`)}}}async _reconnect(e){const i=Date.now();let s=0,r=e!==void 0?e:new Error("Attempting to reconnect due to a unknown error."),n=this._getNextRetryDelay(s++,0,r);if(n===null){this._logger.log(W.Debug,"Connection not reconnecting because the IRetryPolicy returned null on the first reconnect attempt."),this._completeClose(e);return}if(this._connectionState=tt.Reconnecting,e?this._logger.log(W.Information,`Connection reconnecting because of error '${e}'.`):this._logger.log(W.Information,"Connection reconnecting."),this._reconnectingCallbacks.length!==0){try{this._reconnectingCallbacks.forEach(o=>o.apply(this,[e]))}catch(o){this._logger.log(W.Error,`An onreconnecting callback called with error '${e}' threw error '${o}'.`)}if(this._connectionState!==tt.Reconnecting){this._logger.log(W.Debug,"Connection left the reconnecting state in onreconnecting callback. Done reconnecting.");return}}for(;n!==null;){if(this._logger.log(W.Information,`Reconnect attempt number ${s} will start in ${n} ms.`),await new Promise(o=>{this._reconnectDelayHandle=setTimeout(o,n)}),this._reconnectDelayHandle=void 0,this._connectionState!==tt.Reconnecting){this._logger.log(W.Debug,"Connection left the reconnecting state during reconnect delay. Done reconnecting.");return}try{if(await this._startInternal(),this._connectionState=tt.Connected,this._logger.log(W.Information,"HubConnection reconnected successfully."),this._reconnectedCallbacks.length!==0)try{this._reconnectedCallbacks.forEach(o=>o.apply(this,[this.connection.connectionId]))}catch(o){this._logger.log(W.Error,`An onreconnected callback called with connectionId '${this.connection.connectionId}; threw error '${o}'.`)}return}catch(o){if(this._logger.log(W.Information,`Reconnect attempt failed because of error '${o}'.`),this._connectionState!==tt.Reconnecting){this._logger.log(W.Debug,`Connection moved to the '${this._connectionState}' from the reconnecting state during reconnect attempt. Done reconnecting.`),this._connectionState===tt.Disconnecting&&this._completeClose();return}r=o instanceof Error?o:new Error(o.toString()),n=this._getNextRetryDelay(s++,Date.now()-i,r)}}this._logger.log(W.Information,`Reconnect retries have been exhausted after ${Date.now()-i} ms and ${s} failed attempts. Connection disconnecting.`),this._completeClose()}_getNextRetryDelay(e,i,s){try{return this._reconnectPolicy.nextRetryDelayInMilliseconds({elapsedMilliseconds:i,previousRetryCount:e,retryReason:s})}catch(r){return this._logger.log(W.Error,`IRetryPolicy.nextRetryDelayInMilliseconds(${e}, ${i}) threw error '${r}'.`),null}}_cancelCallbacksWithError(e){const i=this._callbacks;this._callbacks={},Object.keys(i).forEach(s=>{const r=i[s];try{r(null,e)}catch(n){this._logger.log(W.Error,`Stream 'error' callback called with '${e}' threw error: ${jf(n)}`)}})}_cleanupPingTimer(){this._pingServerHandle&&(clearTimeout(this._pingServerHandle),this._pingServerHandle=void 0)}_cleanupTimeout(){this._timeoutHandle&&clearTimeout(this._timeoutHandle)}_createInvocation(e,i,s,r){if(s)return r.length!==0?{arguments:i,streamIds:r,target:e,type:Ue.Invocation}:{arguments:i,target:e,type:Ue.Invocation};{const n=this._invocationId;return this._invocationId++,r.length!==0?{arguments:i,invocationId:n.toString(),streamIds:r,target:e,type:Ue.Invocation}:{arguments:i,invocationId:n.toString(),target:e,type:Ue.Invocation}}}_launchStreams(e,i){if(e.length!==0){i||(i=Promise.resolve());for(const s in e)e[s].subscribe({complete:()=>{i=i.then(()=>this._sendWithProtocol(this._createCompletionMessage(s)))},error:r=>{let n;r instanceof Error?n=r.message:r&&r.toString?n=r.toString():n="Unknown error",i=i.then(()=>this._sendWithProtocol(this._createCompletionMessage(s,n)))},next:r=>{i=i.then(()=>this._sendWithProtocol(this._createStreamItemMessage(s,r)))}})}}_replaceStreamingParams(e){const i=[],s=[];for(let r=0;r<e.length;r++){const n=e[r];if(this._isObservable(n)){const o=this._invocationId;this._invocationId++,i[o]=n,s.push(o.toString()),e.splice(r,1)}}return[i,s]}_isObservable(e){return e&&e.subscribe&&typeof e.subscribe=="function"}_createStreamInvocation(e,i,s){const r=this._invocationId;return this._invocationId++,s.length!==0?{arguments:i,invocationId:r.toString(),streamIds:s,target:e,type:Ue.StreamInvocation}:{arguments:i,invocationId:r.toString(),target:e,type:Ue.StreamInvocation}}_createCancelInvocation(e){return{invocationId:e,type:Ue.CancelInvocation}}_createStreamItemMessage(e,i){return{invocationId:e,item:i,type:Ue.StreamItem}}_createCompletionMessage(e,i,s){return i?{error:i,invocationId:e,type:Ue.Completion}:{invocationId:e,result:s,type:Ue.Completion}}}const wI=[0,2e3,1e4,3e4,null];class Hf{constructor(e){this._retryDelays=e!==void 0?[...e,null]:wI}nextRetryDelayInMilliseconds(e){return this._retryDelays[e.previousRetryCount]}}class In{}In.Authorization="Authorization";In.Cookie="Cookie";class SI extends Xl{constructor(e,i){super(),this._innerClient=e,this._accessTokenFactory=i}async send(e){let i=!0;this._accessTokenFactory&&(!this._accessToken||e.url&&e.url.indexOf("/negotiate?")>0)&&(i=!1,this._accessToken=await this._accessTokenFactory()),this._setAuthorizationHeader(e);const s=await this._innerClient.send(e);return i&&s.statusCode===401&&this._accessTokenFactory?(this._accessToken=await this._accessTokenFactory(),this._setAuthorizationHeader(e),await this._innerClient.send(e)):s}_setAuthorizationHeader(e){e.headers||(e.headers={}),this._accessToken?e.headers[In.Authorization]=`Bearer ${this._accessToken}`:this._accessTokenFactory&&e.headers[In.Authorization]&&delete e.headers[In.Authorization]}getCookieString(e){return this._innerClient.getCookieString(e)}}var _t;(function(t){t[t.None=0]="None",t[t.WebSockets=1]="WebSockets",t[t.ServerSentEvents=2]="ServerSentEvents",t[t.LongPolling=4]="LongPolling"})(_t||(_t={}));var Pt;(function(t){t[t.Text=1]="Text",t[t.Binary=2]="Binary"})(Pt||(Pt={}));let TI=class{constructor(){this._isAborted=!1,this.onabort=null}abort(){this._isAborted||(this._isAborted=!0,this.onabort&&this.onabort())}get signal(){return this}get aborted(){return this._isAborted}};class Uf{constructor(e,i,s){this._httpClient=e,this._logger=i,this._pollAbort=new TI,this._options=s,this._running=!1,this.onreceive=null,this.onclose=null}get pollAborted(){return this._pollAbort.aborted}async connect(e,i){if(Tt.isRequired(e,"url"),Tt.isRequired(i,"transferFormat"),Tt.isIn(i,Pt,"transferFormat"),this._url=e,this._logger.log(W.Trace,"(LongPolling transport) Connecting."),i===Pt.Binary&&typeof XMLHttpRequest<"u"&&typeof new XMLHttpRequest().responseType!="string")throw new Error("Binary protocols over XmlHttpRequest not implementing advanced features are not supported.");const[s,r]=Ir(),n={[s]:r,...this._options.headers},o={abortSignal:this._pollAbort.signal,headers:n,timeout:1e5,withCredentials:this._options.withCredentials};i===Pt.Binary&&(o.responseType="arraybuffer");const a=`${e}&_=${Date.now()}`;this._logger.log(W.Trace,`(LongPolling transport) polling: ${a}.`);const l=await this._httpClient.get(a,o);l.statusCode!==200?(this._logger.log(W.Error,`(LongPolling transport) Unexpected response code: ${l.statusCode}.`),this._closeError=new Er(l.statusText||"",l.statusCode),this._running=!1):this._running=!0,this._receiving=this._poll(this._url,o)}async _poll(e,i){try{for(;this._running;)try{const s=`${e}&_=${Date.now()}`;this._logger.log(W.Trace,`(LongPolling transport) polling: ${s}.`);const r=await this._httpClient.get(s,i);r.statusCode===204?(this._logger.log(W.Information,"(LongPolling transport) Poll terminated by server."),this._running=!1):r.statusCode!==200?(this._logger.log(W.Error,`(LongPolling transport) Unexpected response code: ${r.statusCode}.`),this._closeError=new Er(r.statusText||"",r.statusCode),this._running=!1):r.content?(this._logger.log(W.Trace,`(LongPolling transport) data received. ${$o(r.content,this._options.logMessageContent)}.`),this.onreceive&&this.onreceive(r.content)):this._logger.log(W.Trace,"(LongPolling transport) Poll timed out, reissuing.")}catch(s){this._running?s instanceof Qu?this._logger.log(W.Trace,"(LongPolling transport) Poll timed out, reissuing."):(this._closeError=s,this._running=!1):this._logger.log(W.Trace,`(LongPolling transport) Poll errored after shutdown: ${s.message}`)}}finally{this._logger.log(W.Trace,"(LongPolling transport) Polling complete."),this.pollAborted||this._raiseOnClose()}}async send(e){return this._running?__(this._logger,"LongPolling",this._httpClient,this._url,e,this._options):Promise.reject(new Error("Cannot send until the transport is connected"))}async stop(){this._logger.log(W.Trace,"(LongPolling transport) Stopping polling."),this._running=!1,this._pollAbort.abort();try{await this._receiving,this._logger.log(W.Trace,`(LongPolling transport) sending DELETE request to ${this._url}.`);const e={},[i,s]=Ir();e[i]=s;const r={headers:{...e,...this._options.headers},timeout:this._options.timeout,withCredentials:this._options.withCredentials};await this._httpClient.delete(this._url,r),this._logger.log(W.Trace,"(LongPolling transport) DELETE request sent.")}finally{this._logger.log(W.Trace,"(LongPolling transport) Stop finished."),this._raiseOnClose()}}_raiseOnClose(){if(this.onclose){let e="(LongPolling transport) Firing onclose event.";this._closeError&&(e+=" Error: "+this._closeError),this._logger.log(W.Trace,e),this.onclose(this._closeError)}}}class xI{constructor(e,i,s,r){this._httpClient=e,this._accessToken=i,this._logger=s,this._options=r,this.onreceive=null,this.onclose=null}async connect(e,i){return Tt.isRequired(e,"url"),Tt.isRequired(i,"transferFormat"),Tt.isIn(i,Pt,"transferFormat"),this._logger.log(W.Trace,"(SSE transport) Connecting."),this._url=e,this._accessToken&&(e+=(e.indexOf("?")<0?"?":"&")+`access_token=${encodeURIComponent(this._accessToken)}`),new Promise((s,r)=>{let n=!1;if(i!==Pt.Text){r(new Error("The Server-Sent Events transport only supports the 'Text' transfer format"));return}let o;if(yt.isBrowser||yt.isWebWorker)o=new this._options.EventSource(e,{withCredentials:this._options.withCredentials});else{const a=this._httpClient.getCookieString(e),l={};l.Cookie=a;const[d,u]=Ir();l[d]=u,o=new this._options.EventSource(e,{withCredentials:this._options.withCredentials,headers:{...l,...this._options.headers}})}try{o.onmessage=a=>{if(this.onreceive)try{this._logger.log(W.Trace,`(SSE transport) data received. ${$o(a.data,this._options.logMessageContent)}.`),this.onreceive(a.data)}catch(l){this._close(l);return}},o.onerror=a=>{n?this._close():r(new Error("EventSource failed to connect. The connection could not be found on the server, either the connection ID is not present on the server, or a proxy is refusing/buffering the connection. If you have multiple servers check that sticky sessions are enabled."))},o.onopen=()=>{this._logger.log(W.Information,`SSE connected to ${this._url}`),this._eventSource=o,n=!0,s()}}catch(a){r(a);return}})}async send(e){return this._eventSource?__(this._logger,"SSE",this._httpClient,this._url,e,this._options):Promise.reject(new Error("Cannot send until the transport is connected"))}stop(){return this._close(),Promise.resolve()}_close(e){this._eventSource&&(this._eventSource.close(),this._eventSource=void 0,this.onclose&&this.onclose(e))}}class EI{constructor(e,i,s,r,n,o){this._logger=s,this._accessTokenFactory=i,this._logMessageContent=r,this._webSocketConstructor=n,this._httpClient=e,this.onreceive=null,this.onclose=null,this._headers=o}async connect(e,i){Tt.isRequired(e,"url"),Tt.isRequired(i,"transferFormat"),Tt.isIn(i,Pt,"transferFormat"),this._logger.log(W.Trace,"(WebSockets transport) Connecting.");let s;return this._accessTokenFactory&&(s=await this._accessTokenFactory()),new Promise((r,n)=>{e=e.replace(/^http/,"ws");let o;const a=this._httpClient.getCookieString(e);let l=!1;if(yt.isNode||yt.isReactNative){const d={},[u,h]=Ir();d[u]=h,s&&(d[In.Authorization]=`Bearer ${s}`),a&&(d[In.Cookie]=a),o=new this._webSocketConstructor(e,void 0,{headers:{...d,...this._headers}})}else s&&(e+=(e.indexOf("?")<0?"?":"&")+`access_token=${encodeURIComponent(s)}`);o||(o=new this._webSocketConstructor(e)),i===Pt.Binary&&(o.binaryType="arraybuffer"),o.onopen=d=>{this._logger.log(W.Information,`WebSocket connected to ${e}.`),this._webSocket=o,l=!0,r()},o.onerror=d=>{let u=null;typeof ErrorEvent<"u"&&d instanceof ErrorEvent?u=d.error:u="There was an error with the transport",this._logger.log(W.Information,`(WebSockets transport) ${u}.`)},o.onmessage=d=>{if(this._logger.log(W.Trace,`(WebSockets transport) data received. ${$o(d.data,this._logMessageContent)}.`),this.onreceive)try{this.onreceive(d.data)}catch(u){this._close(u);return}},o.onclose=d=>{if(l)this._close(d);else{let u=null;typeof ErrorEvent<"u"&&d instanceof ErrorEvent?u=d.error:u="WebSocket failed to connect. The connection could not be found on the server, either the endpoint may not be a SignalR endpoint, the connection ID is not present on the server, or there is a proxy blocking WebSockets. If you have multiple servers check that sticky sessions are enabled.",n(new Error(u))}}})}send(e){return this._webSocket&&this._webSocket.readyState===this._webSocketConstructor.OPEN?(this._logger.log(W.Trace,`(WebSockets transport) sending data. ${$o(e,this._logMessageContent)}.`),this._webSocket.send(e),Promise.resolve()):Promise.reject("WebSocket is not in the OPEN state")}stop(){return this._webSocket&&this._close(void 0),Promise.resolve()}_close(e){this._webSocket&&(this._webSocket.onclose=()=>{},this._webSocket.onmessage=()=>{},this._webSocket.onerror=()=>{},this._webSocket.close(),this._webSocket=void 0),this._logger.log(W.Trace,"(WebSockets transport) socket closed."),this.onclose&&(this._isCloseEvent(e)&&(e.wasClean===!1||e.code!==1e3)?this.onclose(new Error(`WebSocket closed with status code: ${e.code} (${e.reason||"no reason given"}).`)):e instanceof Error?this.onclose(e):this.onclose())}_isCloseEvent(e){return e&&typeof e.wasClean=="boolean"&&typeof e.code=="number"}}const Yf=100;class II{constructor(e,i={}){if(this._stopPromiseResolver=()=>{},this.features={},this._negotiateVersion=1,Tt.isRequired(e,"url"),this._logger=aI(i.logger),this.baseUrl=this._resolveUrl(e),i=i||{},i.logMessageContent=i.logMessageContent===void 0?!1:i.logMessageContent,typeof i.withCredentials=="boolean"||i.withCredentials===void 0)i.withCredentials=i.withCredentials===void 0?!0:i.withCredentials;else throw new Error("withCredentials option was not a 'boolean' or 'undefined' value");i.timeout=i.timeout===void 0?100*1e3:i.timeout;let s=null,r=null;if(yt.isNode&&typeof require<"u"){const n=typeof __webpack_require__=="function"?__non_webpack_require__:require;s=n("ws"),r=n("eventsource")}!yt.isNode&&typeof WebSocket<"u"&&!i.WebSocket?i.WebSocket=WebSocket:yt.isNode&&!i.WebSocket&&s&&(i.WebSocket=s),!yt.isNode&&typeof EventSource<"u"&&!i.EventSource?i.EventSource=EventSource:yt.isNode&&!i.EventSource&&typeof r<"u"&&(i.EventSource=r),this._httpClient=new SI(i.httpClient||new gI(this._logger),i.accessTokenFactory),this._connectionState="Disconnected",this._connectionStarted=!1,this._options=i,this.onreceive=null,this.onclose=null}async start(e){if(e=e||Pt.Binary,Tt.isIn(e,Pt,"transferFormat"),this._logger.log(W.Debug,`Starting connection with transfer format '${Pt[e]}'.`),this._connectionState!=="Disconnected")return Promise.reject(new Error("Cannot start an HttpConnection that is not in the 'Disconnected' state."));if(this._connectionState="Connecting",this._startInternalPromise=this._startInternal(e),await this._startInternalPromise,this._connectionState==="Disconnecting"){const i="Failed to start the HttpConnection before stop() was called.";return this._logger.log(W.Error,i),await this._stopPromise,Promise.reject(new Di(i))}else if(this._connectionState!=="Connected"){const i="HttpConnection.startInternal completed gracefully but didn't enter the connection into the connected state!";return this._logger.log(W.Error,i),Promise.reject(new Di(i))}this._connectionStarted=!0}send(e){return this._connectionState!=="Connected"?Promise.reject(new Error("Cannot send data if the connection is not in the 'Connected' State.")):(this._sendQueue||(this._sendQueue=new Xu(this.transport)),this._sendQueue.send(e))}async stop(e){if(this._connectionState==="Disconnected")return this._logger.log(W.Debug,`Call to HttpConnection.stop(${e}) ignored because the connection is already in the disconnected state.`),Promise.resolve();if(this._connectionState==="Disconnecting")return this._logger.log(W.Debug,`Call to HttpConnection.stop(${e}) ignored because the connection is already in the disconnecting state.`),this._stopPromise;this._connectionState="Disconnecting",this._stopPromise=new Promise(i=>{this._stopPromiseResolver=i}),await this._stopInternal(e),await this._stopPromise}async _stopInternal(e){this._stopError=e;try{await this._startInternalPromise}catch{}if(this.transport){try{await this.transport.stop()}catch(i){this._logger.log(W.Error,`HttpConnection.transport.stop() threw error '${i}'.`),this._stopConnection()}this.transport=void 0}else this._logger.log(W.Debug,"HttpConnection.transport is undefined in HttpConnection.stop() because start() failed.")}async _startInternal(e){let i=this.baseUrl;this._accessTokenFactory=this._options.accessTokenFactory,this._httpClient._accessTokenFactory=this._accessTokenFactory;try{if(this._options.skipNegotiation)if(this._options.transport===_t.WebSockets)this.transport=this._constructTransport(_t.WebSockets),await this._startTransport(i,e);else throw new Error("Negotiation can only be skipped when using the WebSocket transport directly.");else{let s=null,r=0;do{if(s=await this._getNegotiationResponse(i),this._connectionState==="Disconnecting"||this._connectionState==="Disconnected")throw new Di("The connection was stopped during negotiation.");if(s.error)throw new Error(s.error);if(s.ProtocolVersion)throw new Error("Detected a connection attempt to an ASP.NET SignalR Server. This client only supports connecting to an ASP.NET Core SignalR Server. See https://aka.ms/signalr-core-differences for details.");if(s.url&&(i=s.url),s.accessToken){const n=s.accessToken;this._accessTokenFactory=()=>n,this._httpClient._accessToken=n,this._httpClient._accessTokenFactory=void 0}r++}while(s.url&&r<Yf);if(r===Yf&&s.url)throw new Error("Negotiate redirection limit exceeded.");await this._createTransport(i,this._options.transport,s,e)}this.transport instanceof Uf&&(this.features.inherentKeepAlive=!0),this._connectionState==="Connecting"&&(this._logger.log(W.Debug,"The HttpConnection connected successfully."),this._connectionState="Connected")}catch(s){return this._logger.log(W.Error,"Failed to start the connection: "+s),this._connectionState="Disconnected",this.transport=void 0,this._stopPromiseResolver(),Promise.reject(s)}}async _getNegotiationResponse(e){const i={},[s,r]=Ir();i[s]=r;const n=this._resolveNegotiateUrl(e);this._logger.log(W.Debug,`Sending negotiation request: ${n}.`);try{const o=await this._httpClient.post(n,{content:"",headers:{...i,...this._options.headers},timeout:this._options.timeout,withCredentials:this._options.withCredentials});if(o.statusCode!==200)return Promise.reject(new Error(`Unexpected status code returned from negotiate '${o.statusCode}'`));const a=JSON.parse(o.content);return(!a.negotiateVersion||a.negotiateVersion<1)&&(a.connectionToken=a.connectionId),a}catch(o){let a="Failed to complete negotiation with the server: "+o;return o instanceof Er&&o.statusCode===404&&(a=a+" Either this is not a SignalR endpoint or there is a proxy blocking the connection."),this._logger.log(W.Error,a),Promise.reject(new sI(a))}}_createConnectUrl(e,i){return i?e+(e.indexOf("?")===-1?"?":"&")+`id=${i}`:e}async _createTransport(e,i,s,r){let n=this._createConnectUrl(e,s.connectionToken);if(this._isITransport(i)){this._logger.log(W.Debug,"Connection was provided an instance of ITransport, using that directly."),this.transport=i,await this._startTransport(n,r),this.connectionId=s.connectionId;return}const o=[],a=s.availableTransports||[];let l=s;for(const d of a){const u=this._resolveTransportOrError(d,i,r);if(u instanceof Error)o.push(`${d.transport} failed:`),o.push(u);else if(this._isITransport(u)){if(this.transport=u,!l){try{l=await this._getNegotiationResponse(e)}catch(h){return Promise.reject(h)}n=this._createConnectUrl(e,l.connectionToken)}try{await this._startTransport(n,r),this.connectionId=l.connectionId;return}catch(h){if(this._logger.log(W.Error,`Failed to start the transport '${d.transport}': ${h}`),l=void 0,o.push(new iI(`${d.transport} failed: ${h}`,_t[d.transport])),this._connectionState!=="Connecting"){const p="Failed to select transport before stop() was called.";return this._logger.log(W.Debug,p),Promise.reject(new Di(p))}}}}return o.length>0?Promise.reject(new nI(`Unable to connect to the server with any of the available transports. ${o.join(" ")}`,o)):Promise.reject(new Error("None of the transports supported by the client are supported by the server."))}_constructTransport(e){switch(e){case _t.WebSockets:if(!this._options.WebSocket)throw new Error("'WebSocket' is not supported in your environment.");return new EI(this._httpClient,this._accessTokenFactory,this._logger,this._options.logMessageContent,this._options.WebSocket,this._options.headers||{});case _t.ServerSentEvents:if(!this._options.EventSource)throw new Error("'EventSource' is not supported in your environment.");return new xI(this._httpClient,this._httpClient._accessToken,this._logger,this._options);case _t.LongPolling:return new Uf(this._httpClient,this._logger,this._options);default:throw new Error(`Unknown transport: ${e}.`)}}_startTransport(e,i){return this.transport.onreceive=this.onreceive,this.transport.onclose=s=>this._stopConnection(s),this.transport.connect(e,i)}_resolveTransportOrError(e,i,s){const r=_t[e.transport];if(r==null)return this._logger.log(W.Debug,`Skipping transport '${e.transport}' because it is not supported by this client.`),new Error(`Skipping transport '${e.transport}' because it is not supported by this client.`);if(DI(i,r))if(e.transferFormats.map(o=>Pt[o]).indexOf(s)>=0){if(r===_t.WebSockets&&!this._options.WebSocket||r===_t.ServerSentEvents&&!this._options.EventSource)return this._logger.log(W.Debug,`Skipping transport '${_t[r]}' because it is not supported in your environment.'`),new eI(`'${_t[r]}' is not supported in your environment.`,r);this._logger.log(W.Debug,`Selecting transport '${_t[r]}'.`);try{return this._constructTransport(r)}catch(o){return o}}else return this._logger.log(W.Debug,`Skipping transport '${_t[r]}' because it does not support the requested transfer format '${Pt[s]}'.`),new Error(`'${_t[r]}' does not support ${Pt[s]}.`);else return this._logger.log(W.Debug,`Skipping transport '${_t[r]}' because it was disabled by the client.`),new tI(`'${_t[r]}' is disabled by the client.`,r)}_isITransport(e){return e&&typeof e=="object"&&"connect"in e}_stopConnection(e){if(this._logger.log(W.Debug,`HttpConnection.stopConnection(${e}) called while in state ${this._connectionState}.`),this.transport=void 0,e=this._stopError||e,this._stopError=void 0,this._connectionState==="Disconnected"){this._logger.log(W.Debug,`Call to HttpConnection.stopConnection(${e}) was ignored because the connection is already in the disconnected state.`);return}if(this._connectionState==="Connecting")throw this._logger.log(W.Warning,`Call to HttpConnection.stopConnection(${e}) was ignored because the connection is still in the connecting state.`),new Error(`HttpConnection.stopConnection(${e}) was called while the connection is still in the connecting state.`);if(this._connectionState==="Disconnecting"&&this._stopPromiseResolver(),e?this._logger.log(W.Error,`Connection disconnected with error '${e}'.`):this._logger.log(W.Information,"Connection disconnected."),this._sendQueue&&(this._sendQueue.stop().catch(i=>{this._logger.log(W.Error,`TransportSendQueue.stop() threw error '${i}'.`)}),this._sendQueue=void 0),this.connectionId=void 0,this._connectionState="Disconnected",this._connectionStarted){this._connectionStarted=!1;try{this.onclose&&this.onclose(e)}catch(i){this._logger.log(W.Error,`HttpConnection.onclose(${e}) threw error '${i}'.`)}}}_resolveUrl(e){if(e.lastIndexOf("https://",0)===0||e.lastIndexOf("http://",0)===0)return e;if(!yt.isBrowser)throw new Error(`Cannot resolve '${e}'.`);const i=window.document.createElement("a");return i.href=e,this._logger.log(W.Information,`Normalizing '${e}' to '${i.href}'.`),i.href}_resolveNegotiateUrl(e){const i=e.indexOf("?");let s=e.substring(0,i===-1?e.length:i);return s[s.length-1]!=="/"&&(s+="/"),s+="negotiate",s+=i===-1?"":e.substring(i),s.indexOf("negotiateVersion")===-1&&(s+=i===-1?"?":"&",s+="negotiateVersion="+this._negotiateVersion),s}}function DI(t,e){return!t||(e&t)!==0}class Xu{constructor(e){this._transport=e,this._buffer=[],this._executing=!0,this._sendBufferedData=new wa,this._transportResult=new wa,this._sendLoopPromise=this._sendLoop()}send(e){return this._bufferData(e),this._transportResult||(this._transportResult=new wa),this._transportResult.promise}stop(){return this._executing=!1,this._sendBufferedData.resolve(),this._sendLoopPromise}_bufferData(e){if(this._buffer.length&&typeof this._buffer[0]!=typeof e)throw new Error(`Expected data to be of type ${typeof this._buffer} but was of type ${typeof e}`);this._buffer.push(e),this._sendBufferedData.resolve()}async _sendLoop(){for(;;){if(await this._sendBufferedData.promise,!this._executing){this._transportResult&&this._transportResult.reject("Connection stopped.");break}this._sendBufferedData=new wa;const e=this._transportResult;this._transportResult=void 0;const i=typeof this._buffer[0]=="string"?this._buffer.join(""):Xu._concatBuffers(this._buffer);this._buffer.length=0;try{await this._transport.send(i),e.resolve()}catch(s){e.reject(s)}}}static _concatBuffers(e){const i=e.map(n=>n.byteLength).reduce((n,o)=>n+o),s=new Uint8Array(i);let r=0;for(const n of e)s.set(new Uint8Array(n),r),r+=n.byteLength;return s.buffer}}class wa{constructor(){this.promise=new Promise((e,i)=>[this._resolver,this._rejecter]=[e,i])}resolve(){this._resolver()}reject(e){this._rejecter(e)}}const kI="json";class CI{constructor(){this.name=kI,this.version=1,this.transferFormat=Pt.Text}parseMessages(e,i){if(typeof e!="string")throw new Error("Invalid input for JSON hub protocol. Expected a string.");if(!e)return[];i===null&&(i=Ro.instance);const s=Xt.parse(e),r=[];for(const n of s){const o=JSON.parse(n);if(typeof o.type!="number")throw new Error("Invalid payload.");switch(o.type){case Ue.Invocation:this._isInvocationMessage(o);break;case Ue.StreamItem:this._isStreamItemMessage(o);break;case Ue.Completion:this._isCompletionMessage(o);break;case Ue.Ping:break;case Ue.Close:break;default:i.log(W.Information,"Unknown message type '"+o.type+"' ignored.");continue}r.push(o)}return r}writeMessage(e){return Xt.write(JSON.stringify(e))}_isInvocationMessage(e){this._assertNotEmptyString(e.target,"Invalid payload for Invocation message."),e.invocationId!==void 0&&this._assertNotEmptyString(e.invocationId,"Invalid payload for Invocation message.")}_isStreamItemMessage(e){if(this._assertNotEmptyString(e.invocationId,"Invalid payload for StreamItem message."),e.item===void 0)throw new Error("Invalid payload for StreamItem message.")}_isCompletionMessage(e){if(e.result&&e.error)throw new Error("Invalid payload for Completion message.");!e.result&&e.error&&this._assertNotEmptyString(e.error,"Invalid payload for Completion message."),this._assertNotEmptyString(e.invocationId,"Invalid payload for Completion message.")}_assertNotEmptyString(e,i){if(typeof e!="string"||e==="")throw new Error(i)}}const PI={trace:W.Trace,debug:W.Debug,info:W.Information,information:W.Information,warn:W.Warning,warning:W.Warning,error:W.Error,critical:W.Critical,none:W.None};function MI(t){const e=PI[t.toLowerCase()];if(typeof e<"u")return e;throw new Error(`Unknown log level: ${t}`)}class AI{configureLogging(e){if(Tt.isRequired(e,"logging"),OI(e))this.logger=e;else if(typeof e=="string"){const i=MI(e);this.logger=new vl(i)}else this.logger=new vl(e);return this}withUrl(e,i){return Tt.isRequired(e,"url"),Tt.isNotEmpty(e,"url"),this.url=e,typeof i=="object"?this.httpConnectionOptions={...this.httpConnectionOptions,...i}:this.httpConnectionOptions={...this.httpConnectionOptions,transport:i},this}withHubProtocol(e){return Tt.isRequired(e,"protocol"),this.protocol=e,this}withAutomaticReconnect(e){if(this.reconnectPolicy)throw new Error("A reconnectPolicy has already been set.");return e?Array.isArray(e)?this.reconnectPolicy=new Hf(e):this.reconnectPolicy=e:this.reconnectPolicy=new Hf,this}build(){const e=this.httpConnectionOptions||{};if(e.logger===void 0&&(e.logger=this.logger),!this.url)throw new Error("The 'HubConnectionBuilder.withUrl' method must be called before building the connection.");const i=new II(this.url,e);return Zu.create(i,this.logger||Ro.instance,this.protocol||new CI,this.reconnectPolicy)}}function OI(t){return t.log!==void 0}var $d={metricHub:void 0,goalHub:void 0,todoHub:void 0,routineHub:void 0,plannerHub:void 0};function Os(t){if($d[t]==null){let e=new AI().withUrl(`${re}/${t}`,{withCredentials:!1,timeout:12e4}).withAutomaticReconnect().build();e.keepAliveIntervalInMilliseconds=6e4,e.serverTimeoutInMilliseconds=12e4,e.start(),$d[t]=e}return $d[t]}let Gf=!1;const yi=Li("workout",{state:()=>({workouts:[],exercises:[],variations:[],muscleGroups:[],muscles:[],dragged:{exerciseID:void 0},selectedWorkoutID:void 0}),getters:{getDragged(){return this.dragged}},actions:{async initialize(){let t=this.fill();return this.connectSocket(),Gf=!0,t},async refresh(){return this.fill()},async fill(){return LT().then(e=>{this.workouts=e.workouts,this.exercises=e.exercises,this.variations=e.variations,this.muscleGroups=e.muscleGroups,this.muscles=e.muscles})},initializeItems(){let t=this;this.workouts.forEach(e=>{e.exercises.forEach(i=>{let s=t.exercises.find(r=>r.id==i.exercise.id);s&&(i.exercise=s)})})},getWorkout(t){return this.workouts.find(e=>e.id==t)},getWorkouts(t){const e=this;return t&&VT().then(i=>(i.forEach(s=>{Be(s,e.workouts)}),i)),this.workouts},getExercise(t){return this.exercises.find(e=>e.id==t)},getExercises(t){const e=this;return t&&WT().then(i=>(i.forEach(s=>{Be(s,e.exercises)}),i)),this.exercises},getVariation(t){return this.variations.find(e=>e.id==t)},getVariations(){return this.variations},addVariation(t,e,i){if(!this.variations.find(r=>r.name==t&&r.type.id==e)){let r={name:t,description:void 0,type:{id:e,text:i}};this.variations.splice(0,0,r)}},getMuscleGroup(t){return this.muscleGroups.find(e=>e.id==t)},getMuscleGroups(){return this.muscleGroups},async getWorkoutIDFromEvent(t){return yv(t)},async saveExercise(t){return FT(t)},async saveWorkout(t){return zT(t)},async copyAndStartWorkout(t){let e=this;return jT(t).then(i=>(Be(i,e.workouts),i))},async logSet(t,e){return BT(t,e)},async completeWorkout(t,e,i,s){return HT(t,e,i,s)},async repositionExercise(t,e,i){UT(t,e,i)},setDraggedProps(t){this.dragged.exerciseID=t},clearDraggedProps(){this.dragged.exerciseID=void 0},selectWorkout(t){this.selectedWorkoutID=t},connectSocket(){if(!Gf){let t=Os("metricHub"),e=this;t.on("UpdateWorkouts",i=>{i.forEach(s=>{Be(s,e.workouts)}),xe(e.workouts)}),t.on("RemoveWorkouts",i=>{i.forEach(s=>{xs(s,e.workouts)}),xe(e.events)}),t.on("UpdateExercises",i=>{i.forEach(s=>{Be(s,e.exercises)}),xe(e.exercises)})}}}}),eh=Object.freeze(Object.defineProperty({__proto__:null,useWorkoutStore:yi},Symbol.toStringTag,{value:"Module"})),Gt=Li("app",{state:()=>({windowWidth:void 0,windowHeight:void 0,windowOuterWidth:void 0,windowOuterHeight:void 0,browserType:void 0,isTouchscreen:void 0,isExtraSmall:void 0,selectedItemPanel:"todo",isTabBarShown:!0,navbar:{active:"main"},isMobileCalendarShown:!1,calendarMobile:{isShown:!0,type:Yi.WEEK},thumbnailCalendar:{monthCount:1},itemPanel:{selected:"todo",briefing:{title:"Briefing"},todo:{showRepeat:!0,showTimeline:!1,showRecommended:!0,showHierarchy:!0,sort:{by:"Default",items:[{id:1,text:"Default"},{id:2,text:"Backlog"},{id:3,text:"Custom"},{id:4,text:"Repetition"},{id:5,text:"Metric"}]}},goal:{showReverse:!0,showTimeline:!1,showHierarchy:!0,sort:{by:"Timeframe",items:[{id:1,text:"Dashboard"},{id:2,text:"Timeframe"},{id:3,text:"Custom"},{id:4,text:"Repetition"},{id:5,text:"Metric"},{id:6,text:"Date"}]}},inventory:{title:"Inventory",showPrimary:!0,showSecondary:!1,showTertiary:!1,primaryToggled:void 0,secondaryToggled:void 0,tertiaryToggled:void 0,clear:0},event:{type:void 0,event:void 0}}}),getters:{},actions:{setWindowSize(t,e){this.windowWidth=t,this.windowHeight=e,t<576?this.isExtraSmall=!0:this.isExtraSmall=!1},setWindowOuterSize(t,e){this.windowOuterWidth=t,this.windowOuterHeight=e},onMenuButtonClicked(){this.navbar.active=="main"?this.isTabBarShown?(this.navbar.active="itemPanel",this.isTabBarShown=!1):this.isTabBarShown=!0:(this.navbar.active="main",this.isTabBarShown||(this.isTabBarShown=!0))},initItemPanels(){},onItemPanelTabButtonClicked(t){this.itemPanel.selected==t?this.navbar.active=="main"?this.navbar.active="itemPanel":this.isTabBarShown=!1:(this.itemPanel.selected=t,this.navbar.active="itemPanel")},setSelectedItemPanel(t){this.itemPanel.selected=t},setItemPanelSetting(t,e,i){this.itemPanel[t][e]=i},setItemPanelSortBy(t,e){this.itemPanel[t].sort.by=e,localStorage.setItem(`${t}-panel-sort-by`,e)},async setSelectedEvent(t){if(t.type.id==vs.WORKOUT){let e=yi(),i=await yv(t.id);e.selectWorkout(i),this.itemPanel.selected="workout"}else t.type.id==vs.TODO?(this.itemPanel.selected="event",this.itemPanel.event.type=vs.TODO,this.itemPanel.event.event=t):t.type.id==vs.ROUTINE&&(this.itemPanel.selected="event",this.itemPanel.event.type=vs.ROUTINE,this.itemPanel.event.event=t)},toggleTabBar(){this.isTabBarShown=!this.isTabBarShown},toggleMobileCalendar(){this.calendarMobile.isShown==!1?(this.calendarMobile.type=Yi.WEEK,this.calendarMobile.isShown=!0):this.calendarMobile.type==Yi.WEEK?(this.calendarMobile.type=Yi.MONTH,this.calendarMobile.isShown=!0):this.calendarMobile.type==Yi.MONTH&&(this.calendarMobile.type=void 0,this.calendarMobile.isShown=!1)},setCalendarMobileType(t){t==Yi.WEEK?this.calendarMobile.type=Yi.WEEK:t==Yi.MONTH&&(this.calendarMobile.type=Yi.MONTH)}}}),dn=Object.freeze(Object.defineProperty({__proto__:null,useAppStore:Gt},Symbol.toStringTag,{value:"Module"})),RI="modulepreload",$I=function(t){return"/"+t},Kf={},U=function(e,i,s){let r=Promise.resolve();if(i&&i.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));r=Promise.allSettled(i.map(l=>{if(l=$I(l),l in Kf)return;Kf[l]=!0;const d=l.endsWith(".css"),u=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${u}`))return;const h=document.createElement("link");if(h.rel=d?"stylesheet":RI,d||(h.as="script"),h.crossOrigin="",h.href=l,a&&h.setAttribute("nonce",a),document.head.appendChild(h),d)return new Promise((p,g)=>{h.addEventListener("load",p),h.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${l}`)))})}))}function n(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return r.then(o=>{for(const a of o||[])a.status==="rejected"&&n(a.reason);return e().catch(n)})},V=(t,e)=>{const i=t.__vccOpts||t;for(const[s,r]of e)i[s]=r;return i},NI={name:"MenuButton",props:{src:String,width:Number,height:Number},data:function(){return{iconWidth:48,iconHeight:48}},created:function(){this.iconWidth=this.width?this.width:this.iconWidth,this.iconHeight=this.height?this.height:this.iconHeight},methods:{click:LI}};function LI(){this.$emit("clicked")}const VI=["src","width","height"];function WI(t,e,i,s,r,n){return f(),m("img",{class:"icon-button",src:i.src,width:t.iconWidth,height:t.iconHeight,onClick:e[0]||(e[0]=(...o)=>n.click&&n.click(...o))},null,8,VI)}const zn=V(NI,[["render",WI]]),zI={name:"NavbarMenuButton",components:{IconButton:zn},props:{},data:function(){return{appStore:void 0}},created:function(){this.appStore=Gt()},methods:{onClick(){console.log("hello"),this.appStore.onMenuButtonClicked()}}};function FI(t,e,i,s,r,n){const o=T("IconButton");return f(),K(o,{class:"menu-button float-left",src:"/icon/menu-button.png",width:40,height:40,onClicked:n.onClick},null,8,["onClicked"])}const y_=V(zI,[["render",FI],["__scopeId","data-v-5f415dbf"]]),b_="/icon/planner-icon.png",jI={name:"NavbarCalendarButton",components:{},props:{},data:function(){return{appStore:void 0}},created:function(){this.appStore=Gt()},methods:{toggleCalendar(){this.appStore.toggleMobileCalendar()}}};function BI(t,e,i,s,r,n){return f(),m("img",{class:"icon calendar-button",src:b_,width:36,height:36,onClick:e[0]||(e[0]=(...o)=>n.toggleCalendar&&n.toggleCalendar(...o))})}const w_=V(jI,[["render",BI],["__scopeId","data-v-03d16cec"]]),HI={components:{NavbarMenuButton:y_,NavbarCalendarButton:w_},name:"ItemPanelHeader",props:{title:String,sort:Object,nextPages:Array},data:function(){return{appStore:void 0,sortBy:this.sort?this.sort.by:void 0,sortItems:this.sort?this.sort.items:void 0}},created:function(){this.appStore=Gt()},computed:{isExtraSmall(){return this.appStore?this.appStore.isExtraSmall:!0}},methods:{onSortChange:UI},watch:{sort(t){this.sortBy=t?t.by:void 0,this.sortItems=t?t.items:void 0}}};function UI(){this.$emit("onSortChange",this.sortBy)}const YI={class:"header d-flex flex-row justify-content-between"},GI={class:"d-flex flex-row"},KI={class:"labels d-flex flex-column justify-content-center"},qI=["value"],JI={class:"d-flex flex-row"};function QI(t,e,i,s,r,n){const o=T("NavbarMenuButton"),a=T("NavbarCalendarButton");return f(),m("div",null,[c("div",YI,[c("div",GI,[n.isExtraSmall?(f(),K(o,{key:0,class:"float-left"})):y("",!0),c("div",KI,[c("h1",null,S(i.title),1),i.sort?H((f(),m("select",{key:0,class:"form-select panel-select","aria-label":"select",onChange:e[0]||(e[0]=(...l)=>n.onSortChange&&n.onSortChange(...l)),"onUpdate:modelValue":e[1]||(e[1]=l=>t.sortBy=l)},[(f(!0),m(M,null,N(t.sortItems,l=>(f(),m("option",{key:l.id,value:l.text},S(l.text),9,qI))),128))],544)),[[is,t.sortBy]]):y("",!0)])]),c("div",JI,[hS(t.$slots,"default",{},void 0),n.isExtraSmall?(f(),K(a,{key:0})):y("",!0)])])])}const ed=V(HI,[["render",QI],["__scopeId","data-v-1e8454e0"]]),ZI="/icon/button/repeat.png",qf="/icon/button/timeline.png",XI="/icon/button/thumbs-up.png",Jf="/icon/button/hierarchy.png",eD="/icon/button/reverse.png",tD="/icon/button/eraser.png",iD="/icon/button/one.png",sD="/icon/button/two.png",nD="/icon/button/three.png",rD={name:"ItemPanelNavbar",components:{ItemPanelHeader:ed},data:function(){return{appStore:void 0}},created:async function(){let t=await U(()=>Promise.resolve().then(()=>dn),void 0);this.appStore=t.useAppStore()},computed:{isExtraSmall(){return this.appStore?this.appStore.isExtraSmall:!0},selectedPanel(){return this.appStore?this.appStore.itemPanel.selected:"todo"},title(){return this.selectedPanel=="inventory"?"Inventory":this.selectedPanel=="briefing"?"Briefing":`${this.selectedPanel}s`},sort(){return this.appStore&&this.appStore.itemPanel[this.selectedPanel]?this.appStore.itemPanel[this.selectedPanel].sort:void 0},showReverse(){return this.appStore?this.appStore.itemPanel[this.selectedPanel].showReverse:void 0},showRepeat(){return this.appStore?this.appStore.itemPanel[this.selectedPanel].showRepeat:void 0},showTimeline(){return this.appStore?this.appStore.itemPanel[this.selectedPanel].showTimeline:void 0},showRecommended(){return this.appStore?this.appStore.itemPanel[this.selectedPanel].showRecommended:void 0},showHierarchy(){return this.appStore?this.appStore.itemPanel[this.selectedPanel].showHierarchy:void 0},showPrimary(){return this.appStore?this.appStore.itemPanel.inventory.showPrimary:!0},showSecondary(){return this.appStore?this.appStore.itemPanel.inventory.showSecondary:!1},showTertiary(){return this.appStore?this.appStore.itemPanel.inventory.showTertiary:!1},primaryToggled(){return this.appStore?this.appStore.itemPanel.inventory.primaryToggled:void 0},secondaryToggled(){return this.appStore?this.appStore.itemPanel.inventory.secondaryToggled:void 0},tertiaryToggled(){return this.appStore?this.appStore.itemPanel.inventory.tertiaryToggled:void 0}},methods:{onSortChange(t){this.appStore.setItemPanelSortBy(this.selectedPanel,t)},setSetting(t){this.appStore.setItemPanelSetting(this.selectedPanel,t,!this[t])},setInventorySetting(t,e){this.appStore.itemPanel.inventory[t]=e},clearInventoryValues(){this.appStore.itemPanel.inventory.showPrimary=!0,this.appStore.itemPanel.inventory.showSecondary=!1,this.appStore.itemPanel.inventory.showTertiary=!1,this.appStore.itemPanel.inventory.primaryToggled=void 0,this.appStore.itemPanel.inventory.secondaryToggled=void 0,this.appStore.itemPanel.inventory.tertiaryToggled=void 0,this.appStore.itemPanel.inventory.clear++}}};function oD(t,e,i,s,r,n){const o=T("ItemPanelHeader");return f(),m("div",{class:O(["item-panel-navbar",n.selectedPanel])},[D(o,{title:`${n.title}`,sort:n.sort,onOnSortChange:n.onSortChange},{default:$g(()=>[t.appStore?(f(),m("div",{key:0,class:O(["buttons d-flex flex-row justify-content-end pe-2 mt-auto",[{"mb-auto":n.isExtraSmall}]])},[n.selectedPanel=="todo"?(f(),m(M,{key:0},[c("img",{class:O(["header-button me-1",{active:n.showRepeat}]),src:ZI,width:"24",height:"24",onClick:e[0]||(e[0]=fe(a=>n.setSetting("showRepeat"),["prevent"]))},null,2),c("img",{class:O(["header-button me-1",{active:n.showTimeline}]),src:qf,width:"24",height:"24",onClick:e[1]||(e[1]=fe(a=>n.setSetting("showTimeline"),["prevent"]))},null,2),c("img",{class:O(["header-button me-1",{active:n.showRecommended}]),src:XI,width:"24",height:"24",onClick:e[2]||(e[2]=fe(a=>n.setSetting("showRecommended"),["prevent"]))},null,2),c("img",{class:O(["header-button me-1",{active:n.showHierarchy}]),src:Jf,width:"24",height:"24",onClick:e[3]||(e[3]=fe(a=>n.setSetting("showHierarchy"),["prevent"]))},null,2)],64)):y("",!0),n.selectedPanel=="goal"?(f(),m(M,{key:1},[c("img",{class:O(["header-button me-1",{active:n.showReverse}]),src:eD,width:"24",height:"24",onClick:e[4]||(e[4]=fe(a=>n.setSetting("showReverse"),["prevent"]))},null,2),c("img",{class:O(["header-button me-1",{active:n.showTimeline}]),src:qf,width:"24",height:"24",onClick:e[5]||(e[5]=fe(a=>n.setSetting("showTimeline"),["prevent"]))},null,2),c("img",{class:O(["header-button me-1",{active:n.showHierarchy}]),src:Jf,width:"24",height:"24",onClick:e[6]||(e[6]=fe(a=>n.setSetting("showHierarchy"),["prevent"]))},null,2)],64)):y("",!0),n.selectedPanel=="inventory"?(f(),m(M,{key:2},[c("img",{class:"header-button me-1",src:tD,width:"24",height:"24",onClick:e[7]||(e[7]=fe((...a)=>n.clearInventoryValues&&n.clearInventoryValues(...a),["prevent"]))}),c("img",{class:O(["header-button me-1",{active:n.primaryToggled==null?n.showPrimary:n.primaryToggled}]),src:iD,width:"24",height:"24",onClick:e[8]||(e[8]=fe(a=>n.setInventorySetting("primaryToggled",n.primaryToggled==null?!n.showPrimary:!n.primaryToggled),["prevent"]))},null,2),c("img",{class:O(["header-button me-1",{active:n.secondaryToggled==null?n.showSecondary:n.secondaryToggled}]),src:sD,width:"24",height:"24",onClick:e[9]||(e[9]=fe(a=>n.setInventorySetting("secondaryToggled",n.secondaryToggled==null?!n.showSecondary:!n.secondaryToggled),["prevent"]))},null,2),c("img",{class:O(["header-button me-1",{active:n.tertiaryToggled==null?n.showTertiary:n.tertiaryToggled}]),src:nD,width:"24",height:"24",onClick:e[10]||(e[10]=fe(a=>n.setInventorySetting("tertiaryToggled",n.tertiaryToggled==null?!n.showTertiary:!n.tertiaryToggled),["prevent"]))},null,2)],64)):y("",!0),n.selectedPanel=="briefing"?(f(),m(M,{key:3},[],64)):y("",!0)],2)):y("",!0)]),_:1},8,["title","sort","onOnSortChange"])],2)}const na=V(rD,[["render",oD],["__scopeId","data-v-796c1476"]]),aD={name:"MobileNavbar",components:{NavbarMenuButton:y_,NavbarCalendarButton:w_,ItemPanelNavbar:na},props:{},data:function(){return{appStore:void 0,itemPanelHeaders:["todo","goal","inventory"]}},created:function(){this.appStore=Gt()},computed:{activeNavbar(){return this.appStore?this.appStore.navbar.active:"main"},selectedPanel(){return this.appStore?this.appStore.itemPanel.selected:"todo"}},methods:{selectPage:lD}};function lD(){}const dD={key:0,id:"navbar",class:"navbar navbar-expand-sm navbar-light"},cD={class:"d-flex flex-row justify-content-between w-100"},uD={class:"d-flex flex-row"},hD={class:"d-flex flex-row"},fD={key:1};function mD(t,e,i,s,r,n){const o=T("NavbarMenuButton"),a=T("NavbarCalendarButton"),l=T("ItemPanelNavbar");return!t.itemPanelHeaders.includes(n.selectedPanel)||n.activeNavbar=="main"?(f(),m("nav",dD,[c("div",cD,[c("div",uD,[D(o),e[3]||(e[3]=c("a",{class:"navbar-brand float-left",href:"#"},"Coach",-1))]),c("div",hD,[c("button",{class:"btn btn-sm",type:"button",onClick:e[0]||(e[0]=d=>n.selectPage("planner"))},"Planner"),c("button",{class:"btn btn-sm",type:"button",onClick:e[1]||(e[1]=d=>n.selectPage("items"))},"Items"),c("button",{class:"btn btn-sm",type:"button",onClick:e[2]||(e[2]=d=>n.selectPage("metrics"))},"Metrics")]),D(a)])])):(f(),m("nav",fD,[t.itemPanelHeaders.includes(n.selectedPanel)?(f(),K(l,{key:0})):y("",!0)]))}const pD=V(aD,[["render",mD],["__scopeId","data-v-6c8f4a73"]]),S_="/icon/dashboard-icon.png",th="/icon/todo-icon.png",T_="/icon/routine-icon.png",ih="/icon/goal-icon.png",x_="/icon/task-routine-icon.png",E_="/icon/inventory-icon.png",I_="/icon/nutrition-icon.png",D_="/icon/workout-icon.png",gD={name:"ItemPanelTabBar",components:{},props:{},data:function(){return{appStore:void 0}},created:function(){this.appStore=Gt()},computed:{selectedPanel(){return this.appStore?this.appStore.itemPanel.selected:"dashboard"},isTabBarShown(){return this.appStore?this.appStore.isTabBarShown:!0}},methods:{setSelectedPanel:vD}};function vD(t){this.appStore.onItemPanelTabButtonClicked(t)}const _D={class:"button d-flex flex-row mb-1"},yD={key:0},bD={class:"button d-flex flex-row mb-1"},wD={key:0},SD={class:"button d-flex flex-row mb-1"},TD={key:0},xD={class:"button d-flex flex-row mb-1"},ED={key:0},ID={class:"button d-flex flex-row mb-1"},DD={key:0},kD={class:"button d-flex flex-row mb-1"},CD={key:0},PD={class:"button d-flex flex-row mb-1"},MD={key:0},AD={class:"button d-flex flex-row mb-1"},OD={key:0};function RD(t,e,i,s,r,n){return f(),m("div",{class:O(["item-panel-tab-bar",{hidden:!n.isTabBarShown}])},[c("div",_D,[c("img",{class:O(["dashboard",[{active:n.selectedPanel=="dashboard"}]]),src:S_,width:"40",height:"40",style:{"margin-top":"8px"},onClick:e[0]||(e[0]=o=>n.setSelectedPanel("dashboard"))},null,2),n.selectedPanel=="dashboard"?(f(),m("div",yD,e[8]||(e[8]=[c("div",{style:{width:"12px",height:"40px","background-color":"#4285F4","margin-left":"3px","margin-top":"8px","border-radius":"4px"}},null,-1)]))):y("",!0)]),c("div",bD,[c("img",{class:O(["todo",[{active:n.selectedPanel=="todo"}]]),src:th,width:"40",height:"40",onClick:e[1]||(e[1]=o=>n.setSelectedPanel("todo"))},null,2),n.selectedPanel=="todo"?(f(),m("div",wD,e[9]||(e[9]=[c("div",{style:{width:"12px",height:"40px","background-color":"#4285F4","margin-left":"3px","border-radius":"4px"}},null,-1)]))):y("",!0)]),c("div",SD,[c("img",{class:O(["planner",[{active:n.selectedPanel=="planner"}]]),src:T_,width:"40",height:"40",onClick:e[2]||(e[2]=o=>n.setSelectedPanel("planner"))},null,2),n.selectedPanel=="planner"?(f(),m("div",TD,e[10]||(e[10]=[c("div",{style:{width:"12px",height:"40px","background-color":"#4C6EF5","margin-left":"3px","border-radius":"4px"}},null,-1)]))):y("",!0)]),c("div",xD,[c("img",{class:O(["goal",[{active:n.selectedPanel=="goal"}]]),src:ih,width:"40",height:"40",onClick:e[3]||(e[3]=o=>n.setSelectedPanel("goal"))},null,2),n.selectedPanel=="goal"?(f(),m("div",ED,e[11]||(e[11]=[c("div",{style:{width:"12px",height:"40px","background-color":"#9013FE","margin-left":"3px","border-radius":"4px"}},null,-1)]))):y("",!0)]),c("div",ID,[c("img",{class:O(["event",[{active:n.selectedPanel=="event"}]]),src:x_,width:"40",height:"40",onClick:e[4]||(e[4]=o=>n.setSelectedPanel("event"))},null,2),n.selectedPanel=="event"?(f(),m("div",DD,e[12]||(e[12]=[c("div",{style:{width:"12px",height:"40px","background-color":"#F4511E","margin-left":"3px","border-radius":"4px"}},null,-1)]))):y("",!0)]),c("div",kD,[c("img",{class:O(["inventory",[{active:n.selectedPanel=="inventory"}]]),src:E_,width:"40",height:"40",onClick:e[5]||(e[5]=o=>n.setSelectedPanel("inventory"))},null,2),n.selectedPanel=="inventory"?(f(),m("div",CD,e[13]||(e[13]=[c("div",{style:{width:"12px",height:"40px","background-color":"#3B99FC","margin-left":"3px","border-radius":"4px"}},null,-1)]))):y("",!0)]),c("div",PD,[c("img",{class:O(["nutrition",[{active:n.selectedPanel=="nutrition"}]]),src:I_,width:"40",height:"40",onClick:e[6]||(e[6]=o=>n.setSelectedPanel("nutrition"))},null,2),n.selectedPanel=="nutrition"?(f(),m("div",MD,e[14]||(e[14]=[c("div",{style:{width:"12px",height:"40px","background-color":"#F4511E","margin-left":"3px","border-radius":"4px"}},null,-1)]))):y("",!0)]),c("div",AD,[c("img",{class:O(["workout",[{active:n.selectedPanel=="workout"}]]),src:D_,width:"40",height:"40",onClick:e[7]||(e[7]=o=>n.setSelectedPanel("workout"))},null,2),n.selectedPanel=="workout"?(f(),m("div",OD,e[15]||(e[15]=[c("div",{style:{width:"12px",height:"40px","background-color":"#F4511E","margin-left":"3px","border-radius":"4px"}},null,-1)]))):y("",!0)])],2)}const $D=V(gD,[["render",RD],["__scopeId","data-v-f798c193"]]),jr=Li("planner",{state:()=>({currentTime:new Date,selectedDate:it(new Date)}),getters:{},actions:{startClock(){this.currentTime=new Date;let t=this.currentTime.getSeconds();setTimeout(()=>{this.currentTime=new Date,setInterval(()=>{this.currentTime=new Date},6e4)},(60-t)*1e3)},selectDate(t){this.selectedDate=qu(new Date(t))},createRepeat(){return{id:null,routineRepeatID:null,startRepeat:{id:null,dateTime:it(new Date).toISOString(),type:80,endPoint:84,moment:87,idType:80,idEndPoint:84,idMoment:87},endRepeat:null,startIteration:null,endIteration:null,duration:null,type:80,timeframe:63,moment:0,points:null,position:null,isRecommended:!1,isEventVisible:!1,idInheritance:142,idType:80,idTimeframe:63,idMoment:0,todoIDs:[],interval:1,frequency:1,pointInTime:null,pointInTimeIndex:0,dayIndecies:[],routineRepeat:null,todoRepeats:[],positions:[]}},createTimePair(){return{id:null,idTodo:null,idParent:null,idTimeType:80,idInheritance:140,idTimeframe:null,points:null,startTime:{id:null,dateTime:it(new Date).toISOString(),idType:81,idEndPoint:84,idMoment:89},endTime:{id:null,dateTime:it(new Date).toISOString(),idType:81,idEndPoint:84,idMoment:89},isOwner:!0,isRecommended:!1,isEventVisible:!1,todoIDs:[]}}}}),He=Object.freeze(Object.defineProperty({__proto__:null,usePlannerStore:jr},Symbol.toStringTag,{value:"Module"}));function ND(t){return t.toLocaleTimeString([],{hour:"numeric",minute:"2-digit"})}function LD(t){let i=t.split("T")[0].split("-");return`${i[0]}-${i[1]}-${i[2]}`}function Dr(t,e){let i=new Date(t);return e?de.format(i,"ddd MMM D"):de.format(i,"ddd, MMM D")}function k_(t){let e=new Date(t);return de.format(e,"h:mm A")}function C_(t){if(!t)return"";let e=new Date(t.dateTime);if(t.idMoment==87)return z(e).format("LL");if(t.idMoment==88)return z(e).format("LT");if(t.idMoment==89)return z(e).format("LLL")}function VD(t){let e=new Date(t);return z(e).format("M/D/YY h:mm A")}function P_(t,e){e=e||Date.now();let s=(e-t.getTime())/1e3/60/60,r=Math.floor(s),n=(s-r)*60,o=Math.floor(n),l=Math.floor((n-o)*60).toLocaleString(void 0,{minimumIntegerDigits:2,useGrouping:!1});return`${r}:${o}:${l}`}function WD(t){return z(t).format()}function sh(t){return+ft(new Date)==+z(t).startOf("day").toDate()}function zD(t,e){return+z(t).startOf("day").toDate()==+z(e).startOf("day").toDate()}function Qf(t,e){let i=z(t).startOf("day").add(1,"day").toDate(),s=z(e).startOf("day").toDate();return+i==+s}function ft(t){return z(t).startOf("day").toDate()}function ei(t){return z(t).startOf("day").toDate()}function Ne(t){return z(t).endOf("day").millisecond(0).toDate()}function lt(t){return z(t).startOf("week").toDate()}function gt(t){return z(t).startOf("month").toDate()}function ra(t){return z(t).startOf("year").toDate()}function vt(t){return z(t).endOf("week").toDate()}function Ot(t){return z(t).endOf("month").toDate()}function ti(t){return z(t).endOf("year").toDate()}function No(t){return z(t).weekday(0).toDate()}function M_(t=new Date){return de.format(t,"D")}function A_(t=new Date){return de.format(t,"ddd")}function FD(t=new Date){return de.format(t,"dddd")}function O_(t=new Date){return de.format(t,"MMM")}function R_(t=new Date){return z(t).format("MMM D, h:mm A")}function jD(t=new Date){return z(t).format("l")}function $_(t=1,e=new Date){return z(e).add(t,"minute").toDate()}function N_(t=1,e=new Date){return z(e).add(-t,"minute").toDate()}function ks(t=new Date,e=1){return z(t).add(e,"day").toDate()}function Nd(t=new Date,e=1){return z(t).add(e,"month").toDate()}function Bc(t,e){return de.subtract(e,t).toMinutes()}function L_(t,e){return de.subtract(e,t).toDays()}function nh(t,e){t.setHours(e.getHours(),e.getMinutes(),e.getSeconds())}const BD={name:"CalendarToolbar",components:{},props:{},data:function(){return{plannerStore:void 0}},created:function(){this.plannerStore=jr()},computed:{initialDate(){let t=ft(new Date);return this.selectDate(t),t},daysOfWeek(){let t=lt(this.initialDate),e=[this.getDayObject(t)];for(let i=1;i<7;i++)t=ks(t),e.push(this.getDayObject(t));return e}},methods:{getDayObject(t){return{dateObject:t,dow:A_(t),date:`${O_(t)} ${M_(t)}`}},selectDate(t){this.$emit("selectDate",t)}}},HD={class:"week-toolbar d-flex flex-row flex-grow-1 justify-content-evenly"},UD=["onClick"],YD={class:"day"},GD={class:"date"};function KD(t,e,i,s,r,n){return f(),m("div",HD,[(f(!0),m(M,null,N(n.daysOfWeek,(o,a)=>(f(),m("div",{key:a,class:"day-of-week d-flex flex-column",onClick:l=>n.selectDate(o.dateObject)},[c("span",YD,S(o.dow),1),c("span",GD,S(o.date),1)],8,UD))),128))])}const qD=V(BD,[["render",KD],["__scopeId","data-v-603dbf54"]]),JD={name:"DashboardRoutine",components:{},props:{_event:Object},data:function(){return{eventStore:void 0}},created:async function(){let t=await U(()=>Promise.resolve().then(()=>$s),void 0);this.eventStore=t.useEventStore()},computed:{eventt(){if(this.eventStore)return this.eventStore.events.find(e=>e.id==this._event.id)},routineName(){return this.eventt?this.eventt.text:""},iterations(){let t=[];return this.eventt&&(t=this.eventt.iterations.filter(e=>e.routineIterationID)),t}},methods:{}},QD={class:"dashboard-routine d-flex flex-column"},ZD={class:"text-start ms-2 mb-1"},XD={class:"d-flex flex-row justify-content-evenly flex-grow-1"};function ek(t,e,i,s,r,n){return f(),m("div",QD,[c("span",ZD,S(n.routineName),1),c("div",XD,[(f(!0),m(M,null,N(n.iterations,o=>(f(),m("span",{key:o.id,class:O(["dot",{complete:o.attemptedAt}])},null,2))),128))])])}const tk=V(JD,[["render",ek],["__scopeId","data-v-a076ca09"]]),ik={name:"DashboardView",components:{CalendarToolbar:qD,DashboardRoutine:tk},props:{},data:function(){return{eventStore:void 0,selectedDate:void 0}},created:async function(){let t=await U(()=>Promise.resolve().then(()=>$s),void 0);this.eventStore=t.useEventStore()},computed:{morningRoutineEvent(){if(this.eventStore&&this.selectedDate)return this.eventStore.events.find(e=>{let i=e.text=="Morning",s=zD(this.selectedDate,new Date(e.startAt));return i&&s})}},methods:{selectDate(t){this.selectedDate=t}}},sk={class:"d-flex flex-column"};function nk(t,e,i,s,r,n){const o=T("CalendarToolbar"),a=T("DashboardRoutine");return f(),m("div",sk,[D(o,{class:"mt-2 mb-2",onSelectDate:n.selectDate},null,8,["onSelectDate"]),D(a,{_event:n.morningRoutineEvent},null,8,["_event"])])}const rk=V(ik,[["render",nk]]),bi="/icon/previous.png",ok={name:"DashboardPanel",components:{DashboardView:rk},props:{showHead:{type:Boolean,default:!0}},data:function(){return{plannerStore:void 0}},created:async function(){let t=await U(()=>Promise.resolve().then(()=>He),void 0);this.plannerStore=t.usePlannerStore()},computed:{selectedDate(){return this.plannerStore?this.plannerStore.selectedDate:ft}},methods:{}},ak={class:"row g-0 h-100"},lk={class:"col h-100 d-flex flex-column"},dk={class:"dashboard d-flex flex-column flex-grow-1 overflow-hidden"},ck={class:"head align-content-center"},uk={class:"body d-flex flex-column flex-grow-1"};function hk(t,e,i,s,r,n){const o=T("DashboardView");return f(),m("div",ak,[c("div",lk,[c("div",dk,[H(c("div",ck,e[0]||(e[0]=[c("span",{class:"label"},"Dashboard",-1),c("div",{class:"d-flex flex-row justify-content-start ps-2"},[c("img",{class:"icon-button",src:bi,width:"20",height:"20"})],-1)]),512),[[Ie,i.showHead]]),c("div",uk,[D(o)])])])])}const V_=V(ok,[["render",hk],["__scopeId","data-v-7cd870ac"]]),fk={name:"MetricPanel",props:{showHead:{type:Boolean,default:!0}},data:function(){return{plannerStore:void 0}},created:async function(){let t=await U(()=>Promise.resolve().then(()=>He),void 0);this.plannerStore=t.usePlannerStore()},computed:{selectedDate(){return this.plannerStore?this.plannerStore.selectedDate:ft}}};function mk(t,e,i,s,r,n){return f(),m("div")}const W_=V(fk,[["render",mk]]),pk={name:"ItemCheckbox",props:{width:Number,height:Number,checked:Boolean},data:function(){return{width_:this.width?this.width:40,height_:this.height?this.height:40,hovered:!1,pressed:!1,disabled:!1}},computed:{state(){return this.disabled?"disabled":this.pressed?"pressed":this.hovered?"hovered":"enabled"}},methods:{click:gk}};function gk(){this.checked?this.$emit("onUnchecked"):this.$emit("onChecked")}const vk=["src","width","height"],_k=["src","width","height"];function yk(t,e,i,s,r,n){return f(),m("div",{onClick:e[0]||(e[0]=(...o)=>n.click&&n.click(...o)),onMouseover:e[1]||(e[1]=o=>t.hovered=!0),onMouseleave:e[2]||(e[2]=o=>{t.hovered=!1,t.pressed=!1}),onMousedown:e[3]||(e[3]=o=>t.pressed=!0),onMouseup:e[4]||(e[4]=o=>t.pressed=!1)},[i.checked?y("",!0):(f(),m("img",{key:0,class:"checked",src:`/icon/checkbox/unchecked/${n.state}.png`,width:t.width_,height:t.height_},null,8,vk)),i.checked?(f(),m("img",{key:1,class:"checked",src:`/icon/checkbox/checked/${n.state}.png`,width:t.width_,height:t.height_},null,8,_k)):y("",!0)],32)}const Br=V(pk,[["render",yk],["__scopeId","data-v-950b583c"]]),td="/icon/edit-button.png",Mn="/icon/delete-button.png",bk={name:"ListItem",components:{ItemCheckbox:Br},props:{iteration:Object,parent:Object,parentType:String,isUnplanned:Boolean,size:String},data:function(){return{iterationStore:void 0}},created:async function(){let t=await U(()=>Promise.resolve().then(()=>Et),void 0);this.iterationStore=t.useIterationStore()},computed:{checked(){return!!this.iteration.attemptedAt},fontSize(){return this.size&&this.size=="sm"||this.size&&this.size=="md","14px"}},methods:{markComplete:wk,markIncomplete:Sk,onEdit:Tk,onDelete:xk,onDragStart:Ek,onDragEnd:Ik}};function wk(){let t=new Date().toJSON();this.iteration.attemptedAt=t,this.iteration.completedAt=t,this.iterationStore.toggleCompletion(this.iteration.id,this.iteration.attemptedAt,this.iteration.completedAt)}function Sk(){this.iteration.attemptedAt=null,this.iteration.completedAt=null,this.iterationStore.toggleCompletion(this.iteration.id,this.iteration.attemptedAt,this.iteration.completedAt)}function Tk(){let t=q(this.iteration);delete t.__typename,this.$emit("onEdit",t)}function xk(){this.iterationStore.deleteIteration(this.iteration.id)}function Ek(t){let e={id:this.iteration.id,type:this.parentType=="goal"?"todo":"task",parentType:this.parentType,parentID:this.parent.id};e=JSON.stringify(e),console.log("Drag Started"),t.target.classList.add("drag"),t.dataTransfer.dropEffect="move",t.dataTransfer.effectAllowed="move",t.dataTransfer.setData("text",e)}function Ik(t){t.target.classList.remove("drag")}const Dk={key:0,class:"points"},kk={class:"text"},Ck={class:"button-group d-flex flex-column justify-content-between"};function Pk(t,e,i,s,r,n){const o=T("ItemCheckbox");return f(),m("div",null,[c("div",{class:O(["iteration d-flex flex-row justify-content-between align-items-center",[{complete:n.checked,unplanned:i.isUnplanned,recommended:i.iteration.isRecommended}]]),style:ue({"font-size":n.fontSize}),draggable:"true",onDragstart:e[2]||(e[2]=a=>n.onDragStart(a)),onDragend:e[3]||(e[3]=a=>n.onDragEnd(a))},[D(o,{class:"checkbox align-self-start",checked:n.checked,onOnChecked:n.markComplete,onOnUnchecked:n.markIncomplete,onOnDelete:n.onDelete},null,8,["checked","onOnChecked","onOnUnchecked","onOnDelete"]),c("div",{class:O(["d-flex flex-fill",{"flex-column":i.iteration.points}])},[i.iteration.points?(f(),m("span",Dk,S(i.iteration.points)+" pts",1)):y("",!0),c("span",kk,S(i.iteration.text),1)],2),c("div",Ck,[c("img",{class:"icon-button",src:td,width:"16",height:"16",onClick:e[0]||(e[0]=(...a)=>n.onEdit&&n.onEdit(...a))}),c("img",{class:"icon-button",src:Mn,width:"16",height:"16",onClick:e[1]||(e[1]=(...a)=>n.onDelete&&n.onDelete(...a))})])],38)])}const Fn=V(bk,[["render",Pk],["__scopeId","data-v-591ca173"]]),Mk={name:"TodoItem",components:{ItemCheckbox:Br},props:{todo:Object,parent:Object,parentType:String,isUnplanned:Boolean,size:String},data:function(){return{todoStore:void 0,isAttempted:!1}},created:async function(){let t=await U(()=>Promise.resolve().then(()=>Oi),void 0);this.todoStore=t.useTodoStore()},computed:{checked(){return!!this.isAttempted},fontSize(){return this.size&&this.size=="sm"||this.size&&this.size=="md","14px"}},methods:{markComplete:Ak,markIncomplete:Ok,onDelete:Rk,onDragStart:$k,onDragEnd:Nk}};function Ak(){let t=new Date().toJSON();this.iteration.attemptedAt=t,this.iteration.completedAt=t,this.iterationStore.toggleCompletion(this.iteration.id,this.iteration.attemptedAt,this.iteration.completedAt)}function Ok(){this.iteration.attemptedAt=null,this.iteration.completedAt=null,this.iterationStore.toggleCompletion(this.iteration.id,this.iteration.attemptedAt,this.iteration.completedAt)}function Rk(){this.iterationStore.deleteIteration(this.iteration.id)}function $k(t){let e={id:this.iteration.id,type:this.parentType=="goal"?"todo":"task",parentType:this.parentType,parentID:this.parent.id};e=JSON.stringify(e),console.log("Drag Started"),t.target.classList.add("drag"),t.dataTransfer.dropEffect="move",t.dataTransfer.effectAllowed="move",t.dataTransfer.setData("text",e)}function Nk(t){t.target.classList.remove("drag")}const Lk={key:0,class:"points"},Vk={class:"text"};function Wk(t,e,i,s,r,n){const o=T("ItemCheckbox");return f(),m("div",null,[c("div",{class:O(["todo d-flex flex-row justify-content-between align-items-center",[{complete:n.checked,unplanned:i.isUnplanned}]]),style:ue({"font-size":n.fontSize}),draggable:"true",onDragstart:e[0]||(e[0]=a=>n.onDragStart(a)),onDragend:e[1]||(e[1]=a=>n.onDragEnd(a))},[D(o,{class:"checkbox align-self-start",checked:n.checked,onOnChecked:n.markComplete,onOnUnchecked:n.markIncomplete,onOnDelete:n.onDelete},null,8,["checked","onOnChecked","onOnUnchecked","onOnDelete"]),c("div",{class:O(["d-flex flex-fill",{"flex-column":i.todo.points}])},[i.todo.points?(f(),m("span",Lk,S(i.todo.points)+" pts",1)):y("",!0),c("span",Vk,S(i.todo.text),1)],2)],38)])}const zk=V(Mk,[["render",Wk],["__scopeId","data-v-620bc8fb"]]);let Fk=[{id:1,text:"Physcial"},{id:2,text:"Social"},{id:3,text:"Mental"},{id:4,text:"Emotional"},{id:5,text:"Financial"}],jk=[{id:9,text:"Reminder"},{id:10,text:"Tally"},{id:11,text:"Inverse"},{id:12,text:"Errand"}],Bk=[{id:28,text:"Mobile"},{id:29,text:"Computer"},{id:30,text:"Travel"},{id:31,text:"Brick & Mortar"},{id:32,text:"Home"},{id:33,text:"Any"}],Xs=[{id:43,text:"Day",isActive:!0},{id:48,text:"Week",isActive:!0},{id:49,text:"Month",isActive:!0},{id:52,text:"Trimester",isActive:!1},{id:54,text:"Semester",isActive:!1},{id:55,text:"Year",isActive:!0},{id:56,text:"Milestone",isActive:!0},{id:57,text:"Life",isActive:!0}],z_=[{id:140,text:"Self"},{id:141,text:"Children"},{id:142,text:"Descendants"}],Hk=[{id:144,text:"Angle"},{id:151,text:"Hand Position"},{id:145,text:"Arm Position"},{id:146,text:"Body Position"},{id:152,text:"Leg Position"},{id:147,text:"Equipment"},{id:148,text:"Misc"}],Uk=[{id:157,text:"Log",color:"#3B99FC"},{id:153,text:"Sleep",color:void 0},{id:154,text:"Briefing",color:void 0},{id:155,text:"Meal",color:"#FC3B3B"},{id:156,text:"Workout",color:"#F4511E"},{id:158,text:"Exercise",color:"#F4511E"},{id:159,text:"Water",color:void 0}];const Yk={name:"TimeframeRadio",props:{container:String,timeframe:String,timeframeIDs:{type:Array,default:function(){return[]}},isToggle:Boolean},data:function(){return{TIMEFRAME:q(Zo),timeframes:q(Xs)}},computed:{picked:{get(){return this.timeframe},set(t){this.$emit("timeframeSelected",t)}},selectedTimeframeIDs:{get(){return this.timeframeIDs},set(t){this.$emit("timeframesSelected",t)}},timeframesFirstRow(){let t=this;return this.timeframes.filter(i=>[t.TIMEFRAME.DAY,t.TIMEFRAME.WEEK,t.TIMEFRAME.MONTH,t.TIMEFRAME.YEAR].includes(i.id))},timeframesSecondRow(){let t=this;return this.timeframes.filter(i=>[t.TIMEFRAME.MILESTONE,t.TIMEFRAME.LIFE].includes(i.id))}},methods:{isSelected(t){return this.isToggle?this.selectedTimeframeIDs.includes(t):this.timeframes.find(i=>i.id=t).text.toLowerCase()==this.timeframe.toLowerCase()},toggleTimeframe(t){this.$emit("toggleTimeframe",t)}}},Gk={class:"d-flex flex-column"},Kk={key:0,class:"btn-group",role:"group","aria-label":"moment"},qk=["id","checked","onChange"],Jk=["for"],Qk=["id","checked","onChange"],Zk=["for"],Xk={key:1,class:"btn-group",role:"group","aria-label":"moment"},eC=["id"],tC=["for"],iC=["id"],sC=["for"],nC=["id"],rC=["for"],oC=["id"],aC=["for"];function lC(t,e,i,s,r,n){return f(),m("div",Gk,[i.isToggle?(f(),m("div",Kk,[(f(!0),m(M,null,N(n.timeframesFirstRow,o=>(f(),m(M,{key:-o.id},[c("input",{type:"checkbox",class:"btn-check",id:`${o.text}-${i.container}`,checked:n.isSelected(o.id),onChange:a=>n.toggleTimeframe(o.id)},null,40,qk),c("label",{class:"btn btn-outline-primary",for:`${o.text}-${i.container}`},S(o.text),9,Jk)],64))),128)),(f(!0),m(M,null,N(n.timeframesSecondRow,o=>(f(),m(M,{key:o.id},[c("input",{type:"checkbox",class:"btn-check",id:`${o.text}-${i.container}`,checked:n.isSelected(o.id),onChange:a=>n.toggleTimeframe(o.id)},null,40,Qk),c("label",{class:"btn btn-outline-primary",for:`${o.text}-${i.container}`},S(o.text),9,Zk)],64))),128))])):y("",!0),i.isToggle?y("",!0):(f(),m("div",Xk,[H(c("input",{type:"radio",class:"btn-check",id:`day-${i.container}`,"onUpdate:modelValue":e[0]||(e[0]=o=>n.picked=o),value:"day"},null,8,eC),[[or,n.picked]]),c("label",{class:"btn btn-outline-primary",for:`day-${i.container}`},"Day",8,tC),H(c("input",{type:"radio",class:"btn-check",id:`week-${i.container}`,"onUpdate:modelValue":e[1]||(e[1]=o=>n.picked=o),value:"week"},null,8,iC),[[or,n.picked]]),c("label",{class:"btn btn-outline-primary",for:`week-${i.container}`},"Week",8,sC),H(c("input",{type:"radio",class:"btn-check",id:`month-${i.container}`,"onUpdate:modelValue":e[2]||(e[2]=o=>n.picked=o),value:"month"},null,8,nC),[[or,n.picked]]),c("label",{class:"btn btn-outline-primary",for:`month-${i.container}`},"Month",8,rC),H(c("input",{type:"radio",class:"btn-check",id:`year-${i.container}`,"onUpdate:modelValue":e[3]||(e[3]=o=>n.picked=o),value:"year"},null,8,oC),[[or,n.picked]]),c("label",{class:"btn btn-outline-primary",for:`year-${i.container}`},"Year",8,aC)]))])}const Hr=V(Yk,[["render",lC],["__scopeId","data-v-71223678"]]),dC={name:"GoalPanelByCustom",components:{ListItem:Fn,TodoItem:zk,TimeframeRadio:Hr},props:{},data:function(){return{plannerStore:void 0,goalStore:null,goals:[],timeframe:"month",goalInTimeframe:{allCollapsed:!1,completedCollapsed:!0},taskInTimeframe:{allCollapsed:!1,completedCollapsed:!0},goalTimeCollapsed:!1,taskTimeCollapsed:!1}},created:async function(){let t=await U(()=>Promise.resolve().then(()=>He),void 0);this.plannerStore=t.usePlannerStore();let e=await U(()=>Promise.resolve().then(()=>Ri),void 0);this.goalStore=e.useGoalStore(),this.goals=await this.goalStore.getTimeframeItems(this.start,this.end)},computed:{start(){return this.timeframe=="day"?this.selectedDate:this.timeframe=="week"?lt(this.selectedDate):this.timeframe=="month"?gt(this.selectedDate):this.timeframe=="year"?ra(this.selectedDate):null},end(){return this.timeframe=="day"?this.selectedDate:this.timeframe=="week"?vt(this.selectedDate):this.timeframe=="month"?Ot(this.selectedDate):this.timeframe=="year"?ti(this.selectedDate):null},selectedDate(){return this.plannerStore?this.plannerStore.selectedDate:ft},goalsMappedToTimeframe(){let t=this;return this.goals.filter(e=>{let i=d=>d.startTime&&t.start.getTime()>=new Date(d.startTime.dateTime).getTime(),s=d=>d.startTime&&t.start.getTime()<=new Date(d.endTime.dateTime).getTime(),r=d=>d.endTime&&t.end.getTime()>=new Date(d.startTime.dateTime).getTime(),n=d=>d.endTime&&t.end.getTime()<=new Date(d.endTime.dateTime).getTime(),o=d=>i(d)&&s(d),a=d=>r(d)&&n(d);return e.timePairs.filter(d=>o(d)||a(d)).length>0})},goalsWithIterationMappedToTimeframe(){let t=this.goalsMappedToTimeframe.map(e=>e.id);return this.goals.filter(e=>!t.includes(e.id))},iterationsMappedToTimeframe(){return this.goals.filter(t=>{let e=l=>l.startAt&&new Date(l.startAt).getTime()>this.start.getTime(),i=l=>l.startAt&&new Date(l.startAt).getTime()>this.end.getTime(),s=l=>l.endAt&&new Date(l.endAt).getTime()>this.start.getTime(),r=l=>l.endAt&&new Date(l.endAt).getTime()>this.end.getTime(),n=l=>e(l)&&i(l),o=l=>s(l)&&r(l),a=t.todos.flat().flatMap(l=>l.iterations);return a=a.filter(l=>n(l)||o(l)),a.length>0})}},methods:{incompleteIterations(t){let e=[];return t.todos.forEach(i=>{let s=i.iterations.filter(r=>!r.attemptedAt);e=e.concat(s)}),e},completeIterations(t){let e=[];return t.todos.forEach(i=>{let s=i.iterations.filter(r=>r.attemptedAt);e=e.concat(s)}),e},iterationsInTimeframe(t){let e=this,i=d=>d.startAt&&new Date(d.startAt).getTime()>=e.start.getTime(),s=d=>d.startAt&&new Date(d.startAt).getTime()<=e.end.getTime(),r=d=>d.endAt&&new Date(d.endAt).getTime()>=e.start.getTime(),n=d=>d.endAt&&new Date(d.endAt).getTime()<=e.end.getTime(),o=d=>i(d)&&s(d),a=d=>r(d)&&n(d),l=t.todos.flat().flatMap(d=>d.iterations);return l=l.filter(d=>o(d)||a(d)),l},getTodoQueue(t){let e=this,i=[];return t.todos.forEach(s=>{let r=e.getTodoChildren(s);i=i.concat(r),i.push(s)}),i},getTodoChildren(t){let e=this,i=[];return t.children.forEach(s=>{let r=e.getTodoChildren(s);i=i.concat(r),i.push(s)}),i}},watch:{async timeframe(){this.goalStore&&(this.goals=await this.goalStore.getTimeframeItems(this.start,this.end))},async selectedDate(){this.goalStore&&(this.goals=await this.goalStore.getTimeframeItems(this.start,this.end))}}},cC={class:"row g-0"},uC={key:0,class:"d-flex flex-column",style:{"margin-top":"8px"}},hC={class:"d-flex flex-column"},fC={key:0,class:"d-flex flex-column"};function mC(t,e,i,s,r,n){const o=T("TimeframeRadio"),a=T("TodoItem"),l=T("ListItem");return f(),m("div",cC,[D(o,{timeframe:t.timeframe,onTimeframeSelected:e[0]||(e[0]=d=>t.timeframe=d),container:"goalPanelCustom"},null,8,["timeframe"]),t.goals?(f(),m("div",uC,[H(c("ul",null,[(f(!0),m(M,null,N(n.goalsMappedToTimeframe,d=>(f(),m("li",{key:d.id,class:"goal"},[c("div",hC,[c("h1",null,S(d.text),1),c("ul",null,[(f(!0),m(M,null,N(n.getTodoQueue(d),u=>(f(),m("li",{key:u.id,class:"todo"},[D(a,{todo:u,parentType:"goal",parent:d,size:"sm"},null,8,["todo","parent"])]))),128))]),c("ul",null,[(f(!0),m(M,null,N(n.incompleteIterations(d),u=>(f(),m("li",{key:u.id,class:"todo"},[D(l,{iteration:u,parentType:"goal",parent:d,size:"sm"},null,8,["iteration","parent"])]))),128))]),n.iterationsInTimeframe(d).filter(u=>u.attemptedAt).length>0?(f(),m("div",fC,[c("h2",{onClick:e[1]||(e[1]=u=>t.goalInTimeframe.completedCollapsed=!t.goalInTimeframe.completedCollapsed)},"Complete ("+S(n.iterationsInTimeframe(d).filter(u=>u.attemptedAt).length)+")",1),H(c("ul",null,[(f(!0),m(M,null,N(n.completeIterations(d),u=>(f(),m("li",{key:u.id,class:"todo"},[D(l,{iteration:u,parentType:"goal",parent:d,size:"sm"},null,8,["iteration","parent"])]))),128))],512),[[Ie,!t.goalInTimeframe.completedCollapsed]])])):y("",!0)])]))),128))],512),[[Ie,!t.goalInTimeframe.allCollapsed]])])):y("",!0)])}const pC=V(dC,[["render",mC],["__scopeId","data-v-a3d3188b"]]),gC={name:"GoalTimeframeTodoItem",components:{ItemCheckbox:Br},props:{todoID:Number,goalTimePairTodoID:Number,completedAt:String,size:{type:String,default:"sm"}},data:function(){return{plannerStore:void 0,goalStore:void 0,todoStore:void 0}},created:async function(){let t=await U(()=>Promise.resolve().then(()=>He),void 0);this.plannerStore=t.usePlannerStore();let e=await U(()=>Promise.resolve().then(()=>Ri),void 0);this.goalStore=e.useGoalStore();let i=await U(()=>Promise.resolve().then(()=>Oi),void 0);this.todoStore=i.useTodoStore()},computed:{selectedDate(){return this.plannerStore?this.plannerStore.selectedDate:ft()},todo(){if(this.todoStore)return this.todoStore.getItem(this.todoID)},points(){},checked(){return!!this.completedAt},fontSize(){return this.size&&this.size=="sm"||this.size&&this.size=="md","14px"}},methods:{markComplete(){this.todoStore.toggleGoalTimePairTodoCompletion(this.goalTimePairTodoID,this.selectedDate)},markIncomplete(){this.todoStore.toggleGoalTimePairTodoCompletion(this.goalTimePairTodoID,null)},markAttempted(){this.todoStore.createTask(this.todoID,this.selectedDate)},unmapTodo(){this.goalStore.unmapTodoFromGoalTimePair(this.goalTimePairTodoID)}}},vC={class:"text"},_C={class:"button-group d-flex flex-column justify-content-between"};function yC(t,e,i,s,r,n){const o=T("ItemCheckbox");return n.todo?(f(),m("div",{key:0,class:O(["todo d-flex flex-row justify-content-between align-items-center",[{complete:n.checked}]]),style:ue({"font-size":n.fontSize})},[D(o,{class:"checkbox align-self-start",checked:n.checked,onOnChecked:n.markComplete,onOnUnchecked:n.markIncomplete},null,8,["checked","onOnChecked","onOnUnchecked"]),c("div",{class:O(["d-flex flex-fill",{"flex-column":n.points}])},[c("span",vC,S(n.todo.text),1)],2),c("div",_C,[c("img",{class:"attempted button",width:"14",height:"14",src:"/icon/thumbs-up-dark-2.png",onClick:e[0]||(e[0]=a=>n.markAttempted())}),c("img",{class:"icon-button",src:Mn,width:"16",height:"16",onClick:e[1]||(e[1]=(...a)=>n.unmapTodo&&n.unmapTodo(...a))})])],6)):y("",!0)}const bC=V(gC,[["render",yC],["__scopeId","data-v-b44a4a3c"]]),wC={name:"GoalTimeframeItem",components:{GoalTimeframeTodoItem:bC},props:{goalID:Number,timeframeID:Number},data:function(){return{plannerStore:void 0,goalStore:void 0,showTodos:!1}},created:async function(){let t=await U(()=>Promise.resolve().then(()=>He),void 0);this.plannerStore=t.usePlannerStore();let e=await U(()=>Promise.resolve().then(()=>Ri),void 0);this.goalStore=e.useGoalStore()},computed:{selectedDate(){return this.plannerStore?this.plannerStore.selectedDate:ft()},goal(){if(this.goalStore)return this.goalStore.getItem(this.goalID)},goalTimePairTodos(){if(this.goal){var t=this.goal.timePairs.findIndex(i=>{if(i.idTimeframe!=this.timeframeID)return!1;let s=i.startTime?new Date(i.startTime.dateTime):void 0,r=i.endTime?new Date(i.endTime.dateTime):void 0;return!!(s&&+s<=+this.selectedDate&&r&&+r>=+this.selectedDate)});return this.goal.timePairs[t].goalTimePairTodos}return[]}},methods:{}},SC={key:0},TC={key:0,class:"d-flex flex-column"};function xC(t,e,i,s,r,n){const o=T("GoalTimeframeTodoItem");return n.goal?(f(),m("div",SC,[c("div",{class:"goal",onClick:e[0]||(e[0]=a=>t.showTodos=!t.showTodos)},S(n.goal.text),1),t.showTodos?(f(),m("div",TC,[(f(!0),m(M,null,N(n.goalTimePairTodos,a=>(f(),K(o,{key:a.id,todoID:a.todoID,goalTimePairTodoID:a.id,completedAt:a.completedAt},null,8,["todoID","goalTimePairTodoID","completedAt"]))),128))])):y("",!0)])):y("",!0)}const EC=V(wC,[["render",xC],["__scopeId","data-v-5eab1dc5"]]),IC={name:"GoalsInTimeframe",components:{GoalTimeframeItem:EC},props:{timeframeID:Number},data:function(){return{plannerStore:void 0,goalStore:void 0,timeframes:q(Xs),TIMEFRAME:q(Zo)}},created:async function(){let t=await U(()=>Promise.resolve().then(()=>He),void 0);this.plannerStore=t.usePlannerStore();let e=await U(()=>Promise.resolve().then(()=>Ri),void 0);this.goalStore=e.useGoalStore()},computed:{selectedDate(){return this.plannerStore?this.plannerStore.selectedDate:it()},date(){return Dr(this.selectedDate,!0)},isToday(){return sh(this.selectedDate)},timeframe(){var t=this.timeframes.find(e=>e.id==this.timeframeID);return t?t.text:""},goals(){return this.goalStore?this.goalStore.getGoalsInTimeframe(this.timeframeID,this.selectedDate):[]}},methods:{}},DC={class:"goals-in-timeframe d-flex flex-column text-start"},kC={key:0,class:"d-flex flex-row"},CC={key:0,class:"timeframe"},PC={key:1,class:"timeframe"},MC={class:"date"},AC={key:1,class:"timeframe"};function OC(t,e,i,s,r,n){const o=T("GoalTimeframeItem");return f(),m("div",DC,[i.timeframeID==t.TIMEFRAME.DAY?(f(),m("div",kC,[n.isToday?(f(),m("span",CC,"Today")):y("",!0),n.isToday?y("",!0):(f(),m("span",PC,"Day")),e[0]||(e[0]=c("span",{class:"dash"},"-",-1)),c("span",MC,S(n.date),1)])):(f(),m("span",AC,S(n.timeframe),1)),(f(!0),m(M,null,N(n.goals,a=>(f(),K(o,{key:a.id,class:"mb-2",goalID:a.id,timeframeID:i.timeframeID},null,8,["goalID","timeframeID"]))),128))])}const RC=V(IC,[["render",OC],["__scopeId","data-v-0a1a5ba5"]]),$C={name:"GoalPanelByTimeframe",components:{GoalsInTimeframe:RC,TimeframeRadio:Hr},props:{},data:function(){return{appStore:void 0,timeframes:q(Xs),timeframeIDs:[]}},created:async function(){let t=await U(()=>Promise.resolve().then(()=>dn),void 0);this.appStore=t.useAppStore();let e=this.timeframes.filter(i=>i.isActive).map(i=>i.id);this.timeframeIDs=this.showReverse?e.reverse():e},computed:{showReverse(){return this.appStore?this.appStore.itemPanel.goal.showReverse:void 0},showTimeline(){return this.appStore?this.appStore.itemPanel.goal.showTimeline:void 0},showHierarchy(){return this.appStore?this.appStore.itemPanel.goal.showHierarchy:void 0}},methods:{toggleTimeframe(t){let e=this.timeframes.find(s=>s.id==t);e.isActive=!e.isActive;let i=this.timeframes.filter(s=>s.isActive).map(s=>s.id);this.timeframeIDs=this.showReverse?i.reverse():i}},watch:{timeframes:{handler(t){let e=t.filter(i=>i.isActive).map(i=>i.id);this.timeframeIDs=this.showReverse==!0?e.reverse():e},deep:!0},showReverse(){this.timeframeIDs=this.timeframeIDs.reverse()}}},NC={class:"goal-panel-by-timeframe"};function LC(t,e,i,s,r,n){const o=T("TimeframeRadio"),a=T("GoalsInTimeframe");return f(),m("div",NC,[D(o,{timeframeIDs:t.timeframeIDs,isToggle:!0,container:"goal-by-timeframe",onToggleTimeframe:n.toggleTimeframe},null,8,["timeframeIDs","onToggleTimeframe"]),(f(!0),m(M,null,N(t.timeframeIDs,l=>(f(),K(a,{key:l,class:"pt-2",timeframeID:l},null,8,["timeframeID"]))),128))])}const VC=V($C,[["render",LC]]),WC={name:"GoalPanelByDefault",components:{},props:{},data:function(){return{plannerStore:void 0,goalStore:null,mainGoalIDs:[48,211,182,232,6],skillGoalIDs:[211,6,233,234]}},created:async function(){let t=await U(()=>Promise.resolve().then(()=>He),void 0);this.plannerStore=t.usePlannerStore();let e=await U(()=>Promise.resolve().then(()=>Ri),void 0);this.goalStore=e.useGoalStore()},computed:{selectedDate(){return this.plannerStore?this.plannerStore.selectedDate:ft},mainGoals(){let t=[];return this.goalStore&&this.mainGoalIDs.forEach(e=>{let i=this.goalStore.getItem(e);t.push(i)}),t},skillGoals(){if(this.goalStore){let t=this.goalStore.getItems();return t=t.filter(e=>this.skillGoalIDs.includes(e.id)),t}return[]}},methods:{}},zC={class:"goal-panel-dashboard d-flex flex-column"},FC={class:"d-flex flex-column"},jC={class:"d-flex flex-column"};function BC(t,e,i,s,r,n){return f(),m("div",zC,[c("div",{class:"main card",onClick:e[0]||(e[0]=o=>t.$emit("selectView",{panel:"main"}))},e[3]||(e[3]=[c("span",null,"Main",-1)])),c("div",FC,[(f(!0),m(M,null,N(n.mainGoals,o=>(f(),m("div",{key:o.id,class:"goal text-start"},S(o.text),1))),128))]),c("div",{class:"skill card",onClick:e[1]||(e[1]=o=>t.$emit("selectView",{panel:"skill"}))},e[4]||(e[4]=[c("span",null,"Skills",-1)])),c("div",jC,[(f(!0),m(M,null,N(n.skillGoals,o=>(f(),m("div",{key:o.id,class:"goal text-start"},S(o.text),1))),128))]),c("div",{class:"metrics card",onClick:e[2]||(e[2]=o=>t.$emit("selectView",{panel:"metrics"}))},e[5]||(e[5]=[c("span",null,"Metrics",-1)]))])}const HC=V(WC,[["render",BC],["__scopeId","data-v-171b807e"]]);var UC=[{id:3,text:"Timeframe"},{id:4,text:"Repetition"},{id:5,text:"Custom"},{id:6,text:"Dashboard"}];const YC={name:"GoalPanel",components:{ItemPanelNavbar:na,GoalPanelByTimeframe:VC,GoalPanelByCustom:pC,GoalPanelByDashboard:HC},props:{showHead:{type:Boolean,default:!0}},data:function(){return{appStore:void 0,title:"Goals",sort:{by:"Timeframe",items:UC}}},created:async function(){let t=await U(()=>Promise.resolve().then(()=>dn),void 0);this.appStore=t.useAppStore(),localStorage.getItem("goal-panel-sort-by")||localStorage.setItem("goal-panel-sort-by",this.sortBy)},computed:{sortBy(){if(this.appStore)return this.appStore.itemPanel.goal.sort.by}},methods:{onSortChange:GC}};function GC(t){localStorage.setItem("goal-panel-sort-by",t)}const KC={class:"row g-0"},qC={class:"col"};function JC(t,e,i,s,r,n){const o=T("ItemPanelNavbar"),a=T("GoalPanelByCustom"),l=T("GoalPanelByTimeframe"),d=T("GoalPanelByDashboard");return f(),m("div",KC,[c("div",qC,[i.showHead?(f(),K(o,{key:0})):y("",!0),n.sortBy=="Custom"?(f(),K(a,{key:1})):y("",!0),n.sortBy=="Timeframe"?(f(),K(l,{key:2})):y("",!0),n.sortBy=="Dashboard"?(f(),K(d,{key:3})):y("",!0)])])}const F_=V(YC,[["render",JC],["__scopeId","data-v-d92151c1"]]),QC={name:"MetricSelector",props:{selected:{type:Object,default:()=>({physical:!0,emotional:!0,mental:!0,social:!0,financial:!0})}}},ZC={class:"d-flex flex-row justify-content-between"};function XC(t,e,i,s,r,n){return f(),m("div",ZC,[c("span",{class:O(["metric physical",[{selected:i.selected.physical}]]),onClick:e[0]||(e[0]=o=>i.selected.physical=!i.selected.physical)},"P",2),c("span",{class:O(["metric emotional",[{selected:i.selected.emotional}]]),onClick:e[1]||(e[1]=o=>i.selected.emotional=!i.selected.emotional)},"E",2),c("span",{class:O(["metric mental",[{selected:i.selected.mental}]]),onClick:e[2]||(e[2]=o=>i.selected.mental=!i.selected.mental)},"M",2),c("span",{class:O(["metric social",[{selected:i.selected.social}]]),onClick:e[3]||(e[3]=o=>i.selected.social=!i.selected.social)},"S",2),c("span",{class:O(["metric financial",[{selected:i.selected.financial}]]),onClick:e[4]||(e[4]=o=>i.selected.financial=!i.selected.financial)},"F",2)])}const j_=V(QC,[["render",XC],["__scopeId","data-v-940d5c70"]]);let B_={itemType:"todo",itemName:"Todo",properties:[{id:0,text:"Order",position:1,isSelected:!0},{id:1,text:"ID",position:2,isSelected:!0},{id:2,text:"Text",position:3,isSelected:!0},{id:3,text:"Time",position:4,isSelected:!0},{id:4,text:"Repeat",position:5,isSelected:!0},{id:5,text:"Type",position:6,isSelected:!1},{id:6,text:"Parents",position:7,isSelected:!0},{id:7,text:"Children",position:8,isSelected:!0},{id:8,text:"Metrics",position:9,isSelected:!0},{id:9,text:"Goals",position:10,isSelected:!0},{id:11,position:12,text:"Routines",isSelected:!0},{id:12,position:13,text:"Iterations",isSelected:!1},{id:13,text:"Events",position:14,isSelected:!1}],props:[{id:1,name:"ID",prop:"id",queryField:"id",type:"int",isColumn:!0},{id:2,name:"Name",prop:"text",queryField:"text",type:"string",isColumn:!0},{id:3,name:"Description",prop:"description",queryField:"description",type:"blurd",isColumn:!0},{id:4,name:"Repeats",prop:"repeats",queryField:"repeats",type:"length",isColumn:!0},{id:5,name:"Parents",prop:"parents",queryField:"todos",type:"objects",isItem:!0,isColumn:!0,icon:"/icon/parent-icon.png"},{id:6,name:"Children",prop:"children",queryField:"todos",type:"objects",isItem:!0,isColumn:!0,icon:"/icon/child-icon.png"},{id:7,name:"Metrics",prop:"metrics",queryField:"metrics",type:"objects",isItem:!0,isColumn:!0},{id:8,name:"Goals",prop:"goals",queryField:"goals",type:"objects",isItem:!0,isColumn:!0,icon:"/icon/goal-icon.png"},{id:9,name:"Routines",prop:"routines",queryField:"routines",type:"objects",isItem:!0,isColumn:!0,icon:"/icon/routine-icon.png"},{id:10,name:"Repeats",prop:"repeats",queryField:"repeats",type:"objects",isItem:!1,isColumn:!1},{id:11,name:"TimePairs",prop:"timePairs",queryField:"timePairs",type:"objects",isItem:!1,isColumn:!1}],itemModel:{text:"",description:null,parents:[],children:[],metrics:[],goals:[],routines:[],timePairs:[{id:-1,timeType:{id:80},startTime:{id:-1,type:{id:80},endpoint:{id:84},moment:{id:87,text:"Date"},flexibility:{id:25},dateTime:WD(ft())},endTime:null}],repeats:[],iterations:[]}};const eP={name:"TodoPanelByMetric",components:{MetricSelector:j_,IconButton:zn,ListItem:Fn,TimeframeRadio:Hr},props:{selectedDate:Date},data:function(){return{iterationStore:void 0,todoStore:void 0,config:B_,selectedMetrics:{physical:!0,emotional:!0,mental:!0,social:!0,financial:!0},timeframe:"day",metrics:[]}},created:async function(){let t=await U(()=>Promise.resolve().then(()=>Et),void 0);this.iterationStore=t.useIterationStore(),this.iterationStore.getIterationsInRange(this.startAt,this.endAt,!0);let e=await U(()=>Promise.resolve().then(()=>Oi),void 0);this.todoStore=e.useTodoStore()},computed:{start(){return this.timeframe=="day"?this.selectedDate:this.timeframe=="week"?lt(this.selectedDate):this.timeframe=="month"?gt(this.selectedDate):null},end(){return this.timeframe=="day"?Ne(this.selectedDate):this.timeframe=="week"?vt(this.selectedDate):this.timeframe=="month"?Ot(this.selectedDate):null},iterations2(){if(this.iterationStore){let t=this.iterationStore.iterations;return t=t.filter(e=>+new Date(e.startAt)>=+this.start&&+Ne(new Date(e.endAt))<=+this.end&&!e.isRepeat),t=t.filter(e=>e.idRoutine==null&&e.idRoutineIteration==null),t=xe(t,"startAt"),t}else return[]},todos(){if(this.todoStore){let t=this.iterations2.map(i=>i.todo.id);return this.todoStore.getItemsByID(t)}else return[]},physicalTodos(){return this.getMetricTodos("physical")},emotionalTodos(){return this.getMetricTodos("emotional")},mentalTodos(){return this.getMetricTodos("mental")},socialTodos(){return this.getMetricTodos("social")},financialTodos(){return this.getMetricTodos("financial")}},methods:{getMetricTodos:tP},watch:{iterations2:{handler(){this.metrics=[{id:1,name:"physical",todos:this.physicalTodos,selected:this.selectedMetrics.physical,collapsed:!1},{id:2,name:"emotional",todos:this.emotionalTodos,selected:this.selectedMetrics.emotional,collapsed:!1},{id:3,name:"mental",todos:this.mentalTodos,selected:this.selectedMetrics.mental,collapsed:!1},{id:4,name:"social",todos:this.socialTodos,selected:this.selectedMetrics.social,collapsed:!1},{id:5,name:"financial",todos:this.financialTodos,selected:this.selectedMetrics.financial,collapsed:!1}]},deep:!0}}};function tP(t){let e=[];return this.iterations2&&this.todos.filter(i=>{i.metrics.some(s=>s.text.toLowerCase()==t)&&e.push(this.iterations2.filter(s=>s.todo.id==i.id))}),e.flat()}const iP={class:"row g-0"},sP={class:"metric-selector-wrapper col-12 d-flex flex-column justify-content-between"},nP={class:"d-flex flex-column"},rP=["onClick"];function oP(t,e,i,s,r,n){const o=T("TimeframeRadio"),a=T("MetricSelector"),l=T("IconButton"),d=T("ListItem");return f(),m("div",iP,[D(o,{timeframe:t.timeframe,onTimeframeSelected:e[0]||(e[0]=u=>t.timeframe=u),container:"todoPanelCustom"},null,8,["timeframe"]),c("div",sP,[D(a,{class:"metric-selector",selected:t.selectedMetrics},null,8,["selected"])]),c("div",nP,[(f(!0),m(M,null,N(t.metrics,u=>(f(),m("div",{key:u.id,class:O(["d-flex flex-column",u.name])},[H(c("div",null,[c("div",{class:"metric-header d-flex flex-row justify-content-between align-items-center",onClick:h=>u.collapsed=!u.collapsed},[c("h1",null,S(u.name),1),u.collapsed?y("",!0):(f(),K(l,{key:0,class:"caret",src:"/icon/icon-expanded.png",width:24,height:24})),u.collapsed?(f(),K(l,{key:1,class:"caret",src:"/icon/icon-collapsed.png",width:24,height:24})):y("",!0)],8,rP),H(c("ul",null,[(f(!0),m(M,null,N(u.todos,h=>(f(),m("li",{key:h.id,class:"todo"},[D(d,{iteration:h},null,8,["iteration"])]))),128))],512),[[Ie,!u.collapsed]])],512),[[Ie,u.selected.selected]])],2))),128))])])}const aP=V(eP,[["render",oP],["__scopeId","data-v-6731fb34"]]),lP={name:"TodoPanelBacklog",components:{ListItem:Fn},data:function(){return{appStore:void 0,iterationStore:void 0,newTaskText:void 0}},created:async function(){let t=await U(()=>Promise.resolve().then(()=>dn),void 0);this.appStore=t.useAppStore();let e=await U(()=>Promise.resolve().then(()=>Et),void 0);this.iterationStore=e.useIterationStore(),this.iterationStore.getUnplannedIterations(!0)},computed:{iterations(){if(this.iterationStore){let t=this.iterationStore.iterations;return t=t.filter(e=>!e.startAt&&!e.isRepeat),t=t.filter(e=>e.idRoutine==null&&e.idRoutineIteration==null),Jl(t,"id")}else return[]}}},dP={class:"backlog d-flex flex-column flex-grow-1 overflow-scroll"},cP={key:0,class:"item-list mt-2"};function uP(t,e,i,s,r,n){const o=T("ListItem");return f(),m("div",dP,[n.iterations?(f(),m("ul",cP,[(f(!0),m(M,null,N(n.iterations,(a,l)=>(f(),m("li",{key:a.id,style:ue({"z-index":-l})},[D(o,{iteration:a,onOnEdit:d=>t.$emit("editIteration",a)},null,8,["iteration","onOnEdit"])],4))),128))])):y("",!0)])}const hP=V(lP,[["render",uP],["__scopeId","data-v-f62f97e2"]]),fP={name:"TodoPanelByRepetition",components:{ListItem:Fn,TimeframeRadio:Hr},props:{selectedDate:Date},created:async function(){let t=await U(()=>Promise.resolve().then(()=>Et),void 0);this.iterationStore=t.useIterationStore(),this.iterationStore.getRepetitiveTodoIterations(this.start,this.end)},data:function(){return{iterationStore:void 0,tasks:{complete:[],pending:[],new:null},newItemID:-1,today:it(),allIterations:[],timeframe:"day",showGoals:!1,showRoutineTasks:!1}},computed:{start(){return this.timeframe=="day"?this.selectedDate:this.timeframe=="week"?lt(this.selectedDate):this.timeframe=="month"?gt(this.selectedDate):null},end(){return this.timeframe=="day"?Ne(this.selectedDate):this.timeframe=="week"?vt(this.selectedDate):this.timeframe=="month"?Ot(this.selectedDate):null},iterations(){if(this.iterationStore){let t=this.iterationStore.iterations;return t=t.filter(e=>+new Date(e.startAt)==+this.start&&+ei(new Date(e.endAt))==+ei(this.end)&&e.isRepeat),t=t.filter(e=>e.idRoutine==null&&e.idRoutineIteration==null),t=xe(t,"startAt"),t}else return[]},complete(){return this.iterations.filter(t=>t.attemptedAt)},pending(){return this.iterations.filter(t=>!t.attemptedAt)},goals(){return this.iterations.map(e=>e.todo).map(e=>e.goals).flat()}},methods:{initIteration:mP,replaceItem:Ai,removeItem:Fr,show(t){this.showGoals=!t,console.log(this.goals)}},watch:{selectedDate(){this.iterationStore.getRepetitiveTodoIterations(this.start,this.end,!0)},timeframe(){this.iterationStore.getRepetitiveTodoIterations(this.start,this.end,!0)}}};function mP(){return{id:this.newItemID--,text:"",startAt:this.start,endAt:this.end,attemptedAt:null,completedAt:null,isRecommended:!1}}const pP={class:"custom d-flex flex-column flex-grow-1"},gP={class:"d-flex flex-column flex-grow-1 justify-content-start"},vP={key:0,class:"complete d-flex flex-column"},_P={class:"header"},yP={class:"item-list"},bP={class:"d-flex flex-column flex-grow-1 justify-content-between"},wP={class:"item-list pending"},SP={class:"complete d-flex flex-column"},TP={class:"header"},xP={key:0,class:"item-list"};function EP(t,e,i,s,r,n){const o=T("TimeframeRadio"),a=T("ListItem");return f(),m("div",pP,[D(o,{timeframe:t.timeframe,onTimeframeSelected:e[0]||(e[0]=l=>t.timeframe=l),container:"todoPanelRepetition"},null,8,["timeframe"]),c("div",gP,[t.showGoals?(f(),m("div",vP,[c("div",_P,"Goals ("+S(n.goals.length)+")",1),c("ul",yP,[(f(!0),m(M,null,N(n.goals,(l,d)=>(f(),m("li",{key:d,style:ue({"z-index":-d})},S(l.text),5))),128))])])):y("",!0),c("div",bP,[c("ul",wP,[(f(!0),m(M,null,N(n.pending,(l,d)=>(f(),m("li",{key:l.id,style:ue({"z-index":-d})},[D(a,{iteration:l,onOnEdit:u=>t.$emit("editIteration",l)},null,8,["iteration","onOnEdit"])],4))),128))]),c("div",SP,[c("div",TP,"Completed ("+S(n.complete.length)+")",1),n.complete?(f(),m("ul",xP,[(f(!0),m(M,null,N(n.complete,(l,d)=>(f(),m("li",{key:d,style:ue({"z-index":-d})},[D(a,{class:"complete",iteration:l,onOnEdit:u=>t.$emit("editIteration",l)},null,8,["iteration","onOnEdit"])],4))),128))])):y("",!0)])])])])}const IP=V(fP,[["render",EP],["__scopeId","data-v-64352747"]]),DP={name:"AddTaskButton",methods:{onClick:kP}};function kP(){this.$emit("click")}function CP(t,e,i,s,r,n){return f(),m("button",{class:"add-item",onClick:e[0]||(e[0]=(...o)=>n.onClick&&n.onClick(...o))},e[1]||(e[1]=[c("div",{class:"d-flex align-items-center"},[c("i",{class:"fas fa-check"}),c("div",{class:"text"},"Add a task")],-1)]))}const rh=V(DP,[["render",CP],["__scopeId","data-v-97904de5"]]),PP={name:"TodoPanelByCustom",components:{AddTaskButton:rh,IconButton:zn,ListItem:Fn,TimeframeRadio:Hr},props:{selectedDate:Date},created:async function(){let t=await U(()=>Promise.resolve().then(()=>Et),void 0);this.iterationStore=t.useIterationStore(),this.iterationStore.getIterationsInRange(this.startAt,this.endAt,!0)},data:function(){return{iterationStore:void 0,todos:{complete:[],pending:[],new:null},newItemID:-1,today:it(),allIterations:[],timeframe:"day",showGoals:!1,showRoutineTasks:!1}},computed:{start(){return this.timeframe=="day"?this.selectedDate:this.timeframe=="week"?lt(this.selectedDate):this.timeframe=="month"?gt(this.selectedDate):null},end(){return this.timeframe=="day"?this.selectedDate:this.timeframe=="week"?vt(this.selectedDate):this.timeframe=="month"?Ot(this.selectedDate):null},iterations(){if(this.iterationStore){let t=this.iterationStore.iterations;return t=t.filter(e=>+new Date(e.startAt)>=+this.start&&+new Date(e.endAt)<=+this.end&&!e.isRepeat),t=t.filter(e=>e.idRoutine==null&&e.idRoutineIteration==null),t=xe(t,"startAt"),t}else return[]},complete(){return this.iterations.filter(t=>t.attemptedAt)},pending(){return this.iterations.filter(t=>!t.attemptedAt)},goals(){return this.iterations.map(e=>e.todo).map(e=>e.goals).flat()}},methods:{initIteration:MP,addNewTask:AP,cancelAddTask:OP,replaceItem:Ai,removeItem:Fr,show(t){this.showGoals=!t,console.log(this.goals)},temp(){console.log("Temp")},isUnplanned(t){if(this.start.toDateString()!=this.end.toDateString())return new Date(t.startAt).toDateString()==this.start.toDateString()&&t.endAt!=null&&new Date(t.endAt).toDateString()==this.end.toDateString()}},watch:{selectedDate(){this.iterationStore.getIterationsInRange(this.start,this.end,!0)},timeframe(){this.iterationStore.getIterationsInRange(this.start,this.end,!0)}}};function MP(){return{id:this.newItemID--,text:"",startAt:this.start,endAt:this.end,attemptedAt:null,completedAt:null,isRecommended:!1}}function AP(){this.todos.new=this.initIteration(),this.$nextTick(()=>this.$refs.newTask.focus())}function OP(){this.todos.new=null}const RP={class:"custom d-flex flex-column flex-grow-1"},$P={class:"toolbar d-flex flex-row justify-content-between align-items-center"},NP={class:"d-flex flex-column flex-grow-1 justify-content-start"},LP={key:0,class:"complete d-flex flex-column"},VP={class:"header"},WP={class:"item-list"},zP={class:"d-flex flex-column flex-grow-1 justify-content-between"},FP={key:0,class:"item-list pending"},jP={class:"complete d-flex flex-column"},BP={class:"header"},HP={key:0,class:"item-list"};function UP(t,e,i,s,r,n){const o=T("TimeframeRadio"),a=T("AddTaskButton"),l=T("IconButton"),d=T("ListItem");return f(),m("div",RP,[D(o,{timeframe:t.timeframe,onTimeframeSelected:e[0]||(e[0]=u=>t.timeframe=u),container:"todoPanelCustom"},null,8,["timeframe"]),c("div",$P,[D(a,{onClick:n.addNewTask},null,8,["onClick"]),D(l,{src:"/icon/goal-icon.png",width:32,height:32,onClicked:e[1]||(e[1]=u=>n.show(t.showGoals))})]),c("div",NP,[t.showGoals?(f(),m("div",LP,[c("div",VP,"Goals ("+S(n.goals.length)+")",1),c("ul",WP,[(f(!0),m(M,null,N(n.goals,(u,h)=>(f(),m("li",{key:h,style:ue({"z-index":-h})},S(u.text),5))),128))])])):y("",!0),c("div",zP,[n.pending?(f(),m("ul",FP,[(f(!0),m(M,null,N(n.pending,(u,h)=>(f(),m("li",{key:u.id,style:ue({"z-index":-h})},[D(d,{iteration:u,isUnplanned:n.isUnplanned(u),onOnEdit:p=>t.$emit("editIteration",u)},null,8,["iteration","isUnplanned","onOnEdit"])],4))),128))])):y("",!0),c("div",jP,[c("div",BP,"Completed ("+S(n.complete.length)+")",1),n.complete?(f(),m("ul",HP,[(f(!0),m(M,null,N(n.complete,(u,h)=>(f(),m("li",{key:h,style:ue({"z-index":-h})},[D(d,{class:"complete",iteration:u,onOnEdit:p=>t.$emit("editIteration",u)},null,8,["iteration","onOnEdit"])],4))),128))])):y("",!0)])])])])}const YP=V(PP,[["render",UP],["__scopeId","data-v-1aa14e96"]]),jn="/icon/caret-right.png",oa="/icon/caret-down.png",GP="/icon/repeat.png",KP={name:"HierarchicalListItem",components:{ItemCheckbox:Br},props:{viewModel:Object,level:Number,parent:Object,parentType:String,isUnplanned:Boolean,size:String},data:function(){return{iterationStore:void 0,iteration:void 0,showChildren:!1,padding:12}},created:async function(){this.iteration=this.viewModel.iterations[0];let t=await U(()=>Promise.resolve().then(()=>Et),void 0);this.iterationStore=t.useIterationStore()},computed:{checked(){return!!this.iteration.attemptedAt},fontSize(){return this.size&&this.size=="sm"||this.size&&this.size=="md","14px"},isParent(){return this.viewModel.children.length>0}},methods:{markComplete:JP,markIncomplete:QP,onEdit:ZP,onDelete:XP,toggleChildren:qP},watch:{viewModel(){this.iteration=this.viewModel.iterations[0]}}};function qP(){this.isParent&&(this.showChildren=!this.showChildren)}function JP(){let t=new Date().toJSON();this.iteration.attemptedAt=t,this.iteration.completedAt=t,this.iterationStore.toggleCompletion(this.iteration.id,this.iteration.attemptedAt,this.iteration.completedAt)}function QP(){this.iteration.attemptedAt=null,this.iteration.completedAt=null,this.iterationStore.toggleCompletion(this.iteration.id,this.iteration.attemptedAt,this.iteration.completedAt)}function ZP(){let t=q(this.iteration);delete t.__typename,this.$emit("onEdit",t)}function XP(){this.iterationStore.deleteIteration(this.iteration.id)}const eM={class:"d-flex flex-row align-items-center flex-grow-1 justify-content-between"},tM={class:"d-flex flex-row"},iM={key:0,class:"points"},sM={key:0,class:"caret d-flex flex-row me-2"},nM={key:0,class:"caret-right",src:jn,width:"5",height:"8"},rM={key:1,class:"caret-down",src:oa,width:"8",height:"5"},oM={class:"text flex-fill"},aM={key:0,class:"icon-button",src:GP,width:"12",height:"12"},lM={class:"button-group d-flex flex-column justify-content-between"},dM={key:0,class:"children d-flex flex-column"};function cM(t,e,i,s,r,n){const o=T("ItemCheckbox"),a=T("HierarchicalListItem",!0);return f(),m("div",null,[c("div",{class:O(["iteration d-flex flex-row justify-content-between align-items-center",[{complete:n.checked,unplanned:i.isUnplanned,recommended:t.iteration.isRecommended}]]),style:ue({"font-size":n.fontSize})},[c("div",eM,[c("div",tM,[D(o,{class:"checkbox align-self-start",style:ue({"padding-left":`${(i.level-2)*t.padding}px`}),checked:n.checked,onOnChecked:n.markComplete,onOnUnchecked:n.markIncomplete,onOnDelete:n.onDelete},null,8,["style","checked","onOnChecked","onOnUnchecked","onOnDelete"]),c("div",{class:O(["d-flex",{"flex-column":t.iteration.points}])},[t.iteration.points?(f(),m("span",iM,S(t.iteration.points)+" pts",1)):y("",!0),c("div",{class:"d-flex flex-row align-items-center",onClick:e[0]||(e[0]=(...l)=>n.toggleChildren&&n.toggleChildren(...l))},[n.isParent?(f(),m("div",sM,[t.showChildren?y("",!0):(f(),m("img",nM)),t.showChildren?(f(),m("img",rM)):y("",!0)])):y("",!0),c("span",oM,S(t.iteration.text),1)])],2)]),i.viewModel.repeatID?(f(),m("img",aM)):y("",!0)]),c("div",lM,[c("img",{class:"icon-button",src:td,width:"16",height:"16",onClick:e[1]||(e[1]=(...l)=>n.onEdit&&n.onEdit(...l))}),c("img",{class:"icon-button",src:Mn,width:"16",height:"16",onClick:e[2]||(e[2]=(...l)=>n.onDelete&&n.onDelete(...l))})])],6),t.showChildren?(f(),m("div",dM,[(f(!0),m(M,null,N(i.viewModel.children,l=>(f(),K(a,{key:l.id,viewModel:l,level:i.level+1},null,8,["viewModel","level"]))),128))])):y("",!0)])}const uM=V(KP,[["render",cM],["__scopeId","data-v-775eace6"]]),hM={name:"TodoPanelDefault",components:{AddTaskButton:rh,ItemCheckbox:Br,HierarchicalListItem:uM},props:{selectedDate:Date},data:function(){return{appStore:void 0,iterationStore:void 0,todoStore:void 0,TIMEFRAME:q(Zo),newTaskText:void 0}},created:async function(){let t=await U(()=>Promise.resolve().then(()=>dn),void 0);this.appStore=t.useAppStore();let e=await U(()=>Promise.resolve().then(()=>Oi),void 0);this.todoStore=e.useTodoStore();let i=await U(()=>Promise.resolve().then(()=>Et),void 0);this.iterationStore=i.useIterationStore(),this.iterationStore.getIterationsInRange(this.start,this.end,!0)},computed:{date(){return Dr(this.selectedDate,!0)},start(){return lt(gt(this.selectedDate))},end(){return vt(Ot(this.selectedDate))},isToday(){return sh(this.selectedDate)},iterations(){if(this.iterationStore){let t=this.iterationStore.iterations;return t=t.filter(e=>+new Date(e.startAt)>=+this.start&&+new Date(e.endAt)<=+this.end&&e.eventID==null),t=t.filter(e=>e.idRoutine==null&&e.routineIterationID==null),t=xe(t,"startAt"),this.showRepeat||(t=t.filter(e=>!e.isRepeat)),this.showRecommended||(t=t.filter(e=>!e.isRecommended)),t}else return[]},todayPending(){return this.iterations.length>0?this.getViewModels(this.TIMEFRAME.DAY,!1):[]},todayComplete(){return this.iterations.length>0?this.getViewModels(this.TIMEFRAME.DAY,!0):[]},todayPoints(){let t=0,e=0;this.todayPending.forEach(s=>{s.iterations.forEach(r=>{r.points&&(e+=r.points)})}),this.todayComplete.forEach(s=>{s.iterations.forEach(r=>{r.points&&(t+=r.points)})});let i=t+e;return{complete:t,incomplete:e,total:i,text:`${t}/${i}`}},weekPending(){return this.iterations.length>0?this.getViewModels(this.TIMEFRAME.WEEK,!1):[]},weekComplete(){return this.iterations.length>0?this.getViewModels(this.TIMEFRAME.WEEK,!0):[]},completeCount(){return this.todayComplete.length+this.weekComplete.length},showRepeat(){return this.appStore?this.appStore.itemPanel.todo.showRepeat:void 0},showTimeline(){return this.appStore?this.appStore.itemPanel.todo.showTimeline:void 0},showRecommended(){return this.appStore?this.appStore.itemPanel.todo.showRecommended:void 0},showHierarchy(){return this.appStore?this.appStore.itemPanel.todo.showHierarchy:void 0}},methods:{initNewTask(){this.newTaskText="",this.$nextTick(()=>this.$refs.newTask.focus())},addTask(t){let e=this.newTaskText.trim();if(e!=""){let i=ei(this.selectedDate);this.todoStore.createDefaultTask(e,t,i),this.newTaskText=void 0}},getViewModels(t,e){let i=this,s,r;t==this.TIMEFRAME.DAY&&(s=this.selectedDate,r=this.selectedDate),t==this.TIMEFRAME.WEEK&&(s=lt(this.selectedDate),r=vt(this.selectedDate)),t==this.TIMEFRAME.MONTH&&(s=gt(this.selectedDate),r=Ot(this.selectedDate));let n=this.iterations.filter(l=>l.isRepeat).map(l=>l.repeatID),o=[],a=this.iterations.filter(l=>+new Date(l.startAt)==+s&&+ei(new Date(l.endAt))==+ei(r));return e?a=a.filter(l=>l.attemptedAt):a=a.filter(l=>!l.attemptedAt),a=Ff(a,"isRecommended"),a=Ff(a,"isRepeat"),a.forEach(l=>{let d,u=i.todoStore.getItem(l.todoID);if(l.isRepeat?d=o.find(h=>h.todoID==l.todoID&&h.repeatID==l.RepeatID):d=o.find(h=>h.todoID==l.todoID),d==null&&(u==null&&console.log("Todo undefined"),d={id:l.id,timeframeID:void 0,todoID:l.todoID,text:u.text,children:[],iterationIDs:[],iterations:[],isChild:!1,repeatID:void 0,repeatParentID:void 0,isRepeatOwner:!1,isRepeatChild:!1}),o.push(d),d.iterationIDs.push(l.id),d.iterations.push(l),l.isRepeat){let h=i.todoStore.getItem(d.todoID),p=h.repeats.find(g=>g.id==l.repeatID);p?(d.repeatID=p.id,d.repeatParentID=p.parentID,d.timeframeID=p.idTimeframe,d.isRepeatOwner=p.ownerID==d.todoID,d.isRepeatChild=p.parentID!=null&&n.includes(p.id)):console.log(`Not repeat for todo, ${h.text}`)}}),i.showHierarchy?(o.forEach(d=>{i.todoStore.getItem(d.todoID).children.forEach(h=>{let p=[];d.repeatID!=null?p=o.filter(g=>g.todoID==h.id&&(g.repeatID==d.repeatID||g.repeatParentID==d.repeatID)):p=o.filter(g=>g.todoID==h.id),p.forEach(g=>{g.isChild=!0,d.children.push(g)})})}),o.filter(d=>d.isRepeatOwner&&!d.isChild||d.repeatID==null||!d.isChild)):o}}},fM={class:"default d-flex flex-column flex-grow-1 overflow-scroll"},mM={class:"toolbar d-flex flex-row justify-content-between align-items-center"},pM={class:"d-flex flex-column flex-grow-1"},gM={class:"d-flex flex-column flex-grow-1"},vM={class:"d-flex flex-column"},_M={class:"d-flex flex-row"},yM={key:0,class:"timeframe"},bM={key:1,class:"timeframe"},wM={class:"date"},SM={class:"item-list pending"},TM={key:0},xM={class:"new-task d-flex flex-row align-items-center"},EM={key:0,class:"d-flex flex-column"},IM={class:"item-list pending"},DM={class:"complete d-flex flex-column"},kM={class:"header float-start"},CM={key:0,class:"d-flex flex-column"},PM={class:"d-flex flex-row justify-content-between"},MM={class:"d-flex flex-row"},AM={key:0,class:"timeframe"},OM={key:1,class:"timeframe"},RM={class:"date"},$M={class:"d-flex flex-row"},NM={class:"points"},LM={class:"item-list"},VM={key:1,class:"d-flex flex-column"},WM={class:"item-list pending"};function zM(t,e,i,s,r,n){const o=T("AddTaskButton"),a=T("ItemCheckbox"),l=T("HierarchicalListItem");return f(),m("div",fM,[c("div",mM,[D(o,{onClick:n.initNewTask},null,8,["onClick"])]),c("div",pM,[c("div",gM,[c("div",vM,[c("div",_M,[n.isToday?(f(),m("span",yM,"Today")):y("",!0),n.isToday?y("",!0):(f(),m("span",bM,"Day")),e[8]||(e[8]=c("span",{class:"dash"},"-",-1)),c("span",wM,S(n.date),1)]),c("ul",SM,[t.newTaskText!=null?(f(),m("li",TM,[c("div",xM,[D(a,{width:40,height:40,onOnChecked:e[0]||(e[0]=d=>n.addTask(!0))}),H(c("input",{id:"newTask",ref:"newTask",class:"form-control form-control-sm",type:"text","onUpdate:modelValue":e[1]||(e[1]=d=>t.newTaskText=d),onKeyup:[e[2]||(e[2]=wt(d=>n.addTask(!1),["enter"])),e[3]||(e[3]=wt(d=>t.newTaskText=void 0,["esc"]))],autofocus:""},null,544),[[Pe,t.newTaskText]])])])):y("",!0),(f(!0),m(M,null,N(n.todayPending,(d,u)=>(f(),m("li",{key:d.id,style:ue({"z-index":-u})},[D(l,{viewModel:d,onOnEdit:e[4]||(e[4]=h=>t.$emit("editIteration",h))},null,8,["viewModel"])],4))),128))])]),n.weekPending.length>0?(f(),m("div",EM,[e[9]||(e[9]=c("div",{class:"d-flex flex-row"},[c("span",{class:"timeframe"},"Week")],-1)),c("ul",IM,[(f(!0),m(M,null,N(n.weekPending,(d,u)=>(f(),m("li",{key:d.id,style:ue({"z-index":-u})},[D(l,{viewModel:d,level:2,onOnEdit:e[5]||(e[5]=h=>t.$emit("editIteration",h))},null,8,["viewModel"])],4))),128))])])):y("",!0)]),c("div",DM,[c("div",kM,"Completed ("+S(n.completeCount)+")",1),n.todayComplete.length>0?(f(),m("div",CM,[c("div",PM,[c("div",MM,[n.isToday?(f(),m("span",AM,"Today")):y("",!0),n.isToday?y("",!0):(f(),m("span",OM,"Day")),e[10]||(e[10]=c("span",{class:"dash"},"-",-1)),c("span",RM,S(n.date),1)]),c("div",$M,[c("span",NM,S(n.todayPoints.text),1)])]),c("ul",LM,[(f(!0),m(M,null,N(n.todayComplete,(d,u)=>(f(),m("li",{key:d.id,style:ue({"z-index":-u})},[D(l,{viewModel:d,level:2,onOnEdit:e[6]||(e[6]=h=>t.$emit("editIteration",h))},null,8,["viewModel"])],4))),128))])])):y("",!0),n.weekComplete.length>0?(f(),m("div",VM,[e[11]||(e[11]=c("div",{class:"d-flex flex-row"},[c("span",{class:"timeframe"},"Week")],-1)),c("ul",WM,[(f(!0),m(M,null,N(n.weekComplete,(d,u)=>(f(),m("li",{key:d.id,style:ue({"z-index":-u})},[D(l,{viewModel:d,level:2,onOnEdit:e[7]||(e[7]=h=>t.$emit("editIteration",h))},null,8,["viewModel"])],4))),128))])])):y("",!0)])])])}const FM=V(hM,[["render",zM],["__scopeId","data-v-910a07fd"]]),jM={name:"DateSelector",props:{date:String},data:function(){return{}},computed:{dateTimeString(){return this.date?this.toDateString(this.date):""}},methods:{setDateTime:BM,toDateString:Zl,toTimezoneOffset:f_}};function BM(t){if(t=t.currentTarget.value,t){let e=this.toTimezoneOffset(new Date(t).toJSON()),i=t+"T00:00:00"+e;this.$emit("onChange",i)}else this.$emit("onChange",null)}const HM=["value"];function UM(t,e,i,s,r,n){return f(),m("input",{class:"date-picker",type:"date",value:n.dateTimeString,onChange:e[0]||(e[0]=(...o)=>n.setDateTime&&n.setDateTime(...o))},null,40,HM)}const YM=V(jM,[["render",UM]]),GM={name:"IterationForm",components:{DateSelector:YM},props:{iteration:Object},data:function(){return{iterationStore:void 0,iteration_updated:void 0,isValid:!0}},created:async function(){let t=await U(()=>Promise.resolve().then(()=>Et),void 0);this.iterationStore=t.useIterationStore(),this.initUpdatedIteration()},methods:{initUpdatedIteration:KM,validateTimes:qM,save:JM,close:QM},watch:{iteration(){this.initUpdatedIteration()},"iteration_updated.startAt"(){this.validateTimes()},"iteration_updated.endAt"(){this.validateTimes()}}};function KM(){this.iteration_updated={id:this.iteration.id,text:this.iteration.text,points:this.iteration.points,startAt:this.iteration.startAt,endAt:this.iteration.endAt}}function qM(){this.iteration_updated.startAt&&this.iteration_updated.endAt?+new Date(this.iteration_updated.startAt)>+new Date(this.iteration_updated.endAt)?this.isValid=!1:+new Date(this.iteration_updated.startAt)<=+new Date(this.iteration_updated.endAt)&&(this.isValid=!0):this.isValid=!0}function JM(){var t=this.iteration_updated.text.trim();t!=""&&(this.iterationStore.updateIteration(this.iteration_updated.id,this.iteration_updated.text,this.iteration_updated.points,this.iteration_updated.startAt,this.iteration_updated.endAt),this.close())}function QM(){this.$emit("closeForm")}const ZM={class:"d-flex flew-row justify-content-between mt-2"},XM={class:"form-group d-flex justify-content-start"},eA={class:"mt-1 float-start"},tA={class:"form-group mt-3"},iA={class:"points d-flex flex-row align-items-center mt-1"},sA={class:"form-group mt-1"},nA={class:"d-flex flew-row justify-content-end mt-3"},rA={class:"form-group d-flex justify-content-end"},oA=["disabled"];function aA(t,e,i,s,r,n){const o=T("DateSelector");return t.iteration_updated?(f(),m("form",{key:0,id:"iteration-form",class:"pb-2",onSubmit:e[8]||(e[8]=fe(()=>{},["prevent"]))},[c("div",ZM,[c("div",XM,[c("img",{class:"icon-button",src:bi,width:"16",height:"16",onClick:e[0]||(e[0]=fe((...a)=>n.close&&n.close(...a),["prevent"]))})])]),c("span",eA,S(i.iteration.id),1),c("div",tA,[H(c("input",{class:"title textbox",type:"text",ref:"text",placeholder:"Title","onUpdate:modelValue":e[1]||(e[1]=a=>t.iteration_updated.text=a),onKeyup:e[2]||(e[2]=wt((...a)=>n.save&&n.save(...a),["enter"])),spellcheck:"true"},null,544),[[Pe,t.iteration_updated.text,void 0,{lazy:!0,trim:!0}]])]),c("div",iA,[e[9]||(e[9]=c("span",{class:"me-1"},"Points",-1)),H(c("input",{class:"form-control form-control-sm me-1",type:"number",min:"1","onUpdate:modelValue":e[3]||(e[3]=a=>t.iteration_updated.points=a),style:{width:"41px"},required:""},null,512),[[Pe,t.iteration_updated.points]])]),c("div",sA,[D(o,{class:O(["date-selector mt-1",{invalid:!t.isValid}]),date:t.iteration_updated.startAt,onOnChange:e[4]||(e[4]=a=>t.iteration_updated.startAt=a)},null,8,["class","date"]),D(o,{class:O(["date-selector mt-3",{invalid:!t.isValid}]),date:t.iteration_updated.endAt,onOnChange:e[5]||(e[5]=a=>t.iteration_updated.endAt=a)},null,8,["class","date"])]),c("div",nA,[c("div",rA,[c("button",{class:O(["btn-sm btn-primary me-2",{"btn-primary":t.isValid,"btn-danger":!t.isValid}]),type:"button",disabled:!t.isValid,onClick:e[6]||(e[6]=fe((...a)=>n.save&&n.save(...a),["prevent"]))},"Save",10,oA),c("button",{class:"btn-sm btn-warning",type:"button",onClick:e[7]||(e[7]=fe((...a)=>n.close&&n.close(...a),["prevent"]))},"Cancel")])])],32)):y("",!0)}const lA=V(GM,[["render",aA],["__scopeId","data-v-fe2bface"]]),dA={name:"TodoPanel",components:{ItemPanelNavbar:na,TodoPanelByMetric:aP,TodoPanelBacklog:hP,TodoPanelByRepetition:IP,TodoPanelByCustom:YP,TodoPanelDefault:FM,IterationForm:lA},props:{showHead:{type:Boolean,default:!0}},data:function(){return{appStore:void 0,plannerStore:void 0,iteration_Form:null}},created:async function(){let t=await U(()=>Promise.resolve().then(()=>dn),void 0);this.appStore=t.useAppStore();let e=await U(()=>Promise.resolve().then(()=>He),void 0);this.plannerStore=e.usePlannerStore()},computed:{selectedDate(){return this.plannerStore?this.plannerStore.selectedDate:ft()},sortBy(){if(this.appStore)return this.appStore.itemPanel.todo.sort.by}},methods:{}},cA={class:"row g-0 h-100"},uA={class:"col h-100 d-flex flex-column flex-grow-1 overflow-hidden"};function hA(t,e,i,s,r,n){const o=T("ItemPanelNavbar"),a=T("TodoPanelByMetric"),l=T("TodoPanelBacklog"),d=T("TodoPanelByRepetition"),u=T("TodoPanelByCustom"),h=T("TodoPanelDefault"),p=T("IterationForm");return f(),m("div",cA,[c("div",uA,[i.showHead?(f(),K(o,{key:0})):y("",!0),t.iteration_Form?y("",!0):(f(),m(M,{key:1},[n.sortBy=="Metric"?(f(),K(a,{key:0,selectedDate:n.selectedDate,onEditIteration:e[0]||(e[0]=g=>t.iteration_Form=g)},null,8,["selectedDate"])):y("",!0),n.sortBy=="Backlog"?(f(),K(l,{key:1,selectedDate:n.selectedDate,onEditIteration:e[1]||(e[1]=g=>t.iteration_Form=g)},null,8,["selectedDate"])):y("",!0),n.sortBy=="Repetition"?(f(),K(d,{key:2,selectedDate:n.selectedDate,onEditIteration:e[2]||(e[2]=g=>t.iteration_Form=g)},null,8,["selectedDate"])):y("",!0),n.sortBy=="Custom"?(f(),K(u,{key:3,selectedDate:n.selectedDate,onEditIteration:e[3]||(e[3]=g=>t.iteration_Form=g)},null,8,["selectedDate"])):y("",!0),n.sortBy=="Default"?(f(),K(h,{key:4,selectedDate:n.selectedDate,onEditIteration:e[4]||(e[4]=g=>t.iteration_Form=g)},null,8,["selectedDate"])):y("",!0)],64)),t.iteration_Form?(f(),K(p,{key:2,iteration:t.iteration_Form,onCloseForm:e[5]||(e[5]=g=>t.iteration_Form=null)},null,8,["iteration"])):y("",!0)])])}const H_=V(dA,[["render",hA],["__scopeId","data-v-3c2163f8"]]),fA={name:"RoutinePanelByTask",components:{},props:{},data:function(){return{plannerStore:void 0,routineStore:void 0}},created:async function(){let t=await U(()=>Promise.resolve().then(()=>He),void 0);this.plannerStore=t.usePlannerStore();let e=await U(()=>Promise.resolve().then(()=>Lo),void 0);this.routineStore=e.useRoutineStore()},computed:{selectedDate(){return this.plannerStore?this.plannerStore.selectedDate:ft()},taskRoutines(){let t=this;if(this.routineStore){let e=this.routineStore.getTaskRoutines();return e=e.filter(i=>{let s=!1;return i.repeats.forEach(r=>{if(!(!r.startRepeat||r.startRepeat&&new Date(r.startRepeat.dateTime)>this.selectedDate)){if(r.idTimeframe==Cd.DAILY)s=!0;else if(r.idTimeframe==Cd.WEEKLY){let n=FD(t.selectedDate);(r.dayIndecies.findIndex(o=>o==1)>-1&&n=="Sunday"||r.dayIndecies.findIndex(o=>o==2)>-1&&n=="Monday"||r.dayIndecies.findIndex(o=>o==3)>-1&&n=="Tuesday"||r.dayIndecies.findIndex(o=>o==4)>-1&&n=="Wednesday"||r.dayIndecies.findIndex(o=>o==5)>-1&&n=="Thursday"||r.dayIndecies.findIndex(o=>o==6)>-1&&n=="Friday"||r.dayIndecies.findIndex(o=>o==7)>-1&&n=="Saturday")&&(s=!0)}else if(r.idTimeframe==Cd.MONTHLY){let n=this.selectedDate.getDate();r.dayIndecies.findIndex(o=>o==n)>-1&&(s=!0)}}}),s}),e}return[]}},methods:{}},mA={class:"routine-panel-by-task d-flex flex-column"};function pA(t,e,i,s,r,n){return f(),m("div",mA,[(f(!0),m(M,null,N(n.taskRoutines,o=>(f(),m("span",{key:o.id},S(o.text),1))),128))])}const gA=V(fA,[["render",pA]]);var vA=[{id:1,text:"Task Routine"}];const _A={name:"RoutinePanel",components:{ItemPanelHeader:ed,RoutinePanelByTask:gA},props:{showHead:{type:Boolean,default:!0}},data:function(){return{sort:{by:"Task Routine",items:vA}}},created:function(){let t=localStorage.getItem("routine-panel-sort-by");t?this.sort.by=t:localStorage.setItem("routine-panel-sort-by",this.sort.by)},methods:{onSortChange:yA}};function yA(t){this.sort.by=t,localStorage.setItem("routine-panel-sort-by",t)}const bA={class:"row g-0 h-100"},wA={class:"col h-100"};function SA(t,e,i,s,r,n){const o=T("ItemPanelHeader"),a=T("RoutinePanelByTask");return f(),m("div",bA,[c("div",wA,[H(D(o,{title:"routine",sort:t.sort,onOnSortChange:n.onSortChange},null,8,["sort","onOnSortChange"]),[[Ie,i.showHead]]),t.sort.by=="Task Routine"?(f(),K(a,{key:0})):y("",!0)])])}const U_=V(_A,[["render",SA]]),TA={name:"TaskRoutinePanel"};function xA(t,e,i,s,r,n){return f(),m("div")}const Y_=V(TA,[["render",xA]]),EA={name:"Task",props:{task:Object},created:async function(){let t=await U(()=>Promise.resolve().then(()=>Et),void 0);this.iterationStore=t.useIterationStore()},data:function(){return{iterationStore:void 0}},computed:{isComplete(){return!!this.task.attemptedAt}},methods:{toNextDay:IA,markAttempted:DA,markComplete:kA,markIncomplete:CA,deleteTask:PA,onDragStart:MA,onDragEnd:AA}};function IA(){let t=g_(new Date(this.task.startAt));this.iterationStore.rescheduleIteration(this.task.id,t,t)}function DA(){this.iterationStore.attemptIteration(this.task.id,new Date(this.task.startAt))}function kA(){let t=new Date().toJSON();this.task.attemptedAt=t,this.task.completedAt=t,this.iterationStore.toggleCompletion(this.task.id,this.task.attemptedAt,this.task.completedAt)}function CA(){this.task.attemptedAt=null,this.task.completedAt=null,this.iterationStore.toggleCompletion(this.task.id,this.task.attemptedAt,this.task.completedAt)}function PA(){this.iterationStore.deleteIteration(this.task.id)}function MA(t){let e={type:"task",id:this.task.id};e=JSON.stringify(e),console.log("Drag Started"),t.target.classList.add("drag"),t.dataTransfer.dropEffect="move",t.dataTransfer.effectAllowed="move",t.dataTransfer.setData("text",e)}function AA(t){t.target.classList.remove("drag")}const OA={class:"actions d-flex align-items-center"},RA=["src"],$A=["src"],NA=["src"],LA=["src"],VA={class:"text"};function WA(t,e,i,s,r,n){return f(),m("div",{class:O(["task d-flex",{complete:n.isComplete,incomplete:!n.isComplete}]),draggable:"true",onDragstart:e[4]||(e[4]=o=>n.onDragStart(o)),onDragend:e[5]||(e[5]=o=>n.onDragEnd(o))},[c("div",OA,[c("img",{class:"check button",width:"14",height:"14",src:`/icon/task-icon-${n.isComplete?"black":"white"}.png`,onClick:e[0]||(e[0]=o=>n.isComplete?n.markIncomplete():n.markComplete())},null,8,RA),c("img",{class:"attempted button vanishing",width:"14",height:"14",src:`/icon/thumbs-up-${n.isComplete?"dark":"lite"}-2.png`,onClick:e[1]||(e[1]=o=>n.markAttempted())},null,8,$A),c("img",{class:"delete button vanishing",width:"14",height:"14",src:`/icon/delete-${n.isComplete?"dark":"lite"}.png`,onClick:e[2]||(e[2]=o=>n.deleteTask())},null,8,NA),c("img",{class:"next button vanishing",width:"14",height:"14",src:`/icon/next-${n.isComplete?"dark":"lite"}.png`,onClick:e[3]||(e[3]=o=>n.toNextDay())},null,8,LA)]),c("div",VA,S(i.task.text),1)],34)}const zA=V(EA,[["render",WA],["__scopeId","data-v-e04af934"]]),FA={name:"TaskList",components:{Task:zA},props:{date:Date,taskList:Array,minHeight:Number},created:async function(){let t=await U(()=>Promise.resolve().then(()=>Et),void 0);this.iterationStore=t.useIterationStore()},data:function(){return{iterationStore:void 0,showRoutineTasks:!1}},computed:{height(){return this.minHeight?this.minHeight+"px":"22px"},iterations(){if(this.iterationStore){let t=ei(this.date),e=ei(this.date),i=this.iterationStore.iterations;return i=i.filter(s=>+new Date(s.startAt)>=+t&&+new Date(s.endAt)<=+e&&!s.isRepeat),i=i.filter(s=>s.idRoutine==null&&s.idRoutineIteration==null),i=xe(i,"startAt"),i}else return[]}},methods:{onDrop:jA}};function jA(t){t.preventDefault();let e=t.dataTransfer.getData("text");e=JSON.parse(e),e.type&&e.type=="task"&&(e.parentType&&e.parentType=="routineEvent"?console.log("this.unmapTaskFromRoutineEvent(data.id, data.parentID, this.date, null, null, this.$apollo)"):this.iterationStore.rescheduleIteration(e.id,this.date,this.date))}function BA(t,e,i,s,r,n){const o=T("Task");return f(),m("div",{class:"task-list d-flex flex-column flex-fill",style:ue({"min-height":n.height}),onDrop:e[0]||(e[0]=a=>n.onDrop(a)),onDragover:e[1]||(e[1]=fe(()=>{},["prevent"])),onDragenter:e[2]||(e[2]=fe(()=>{},["prevent"]))},[(f(!0),m(M,null,N(n.iterations,(a,l)=>(f(),K(o,{key:l,task:a},null,8,["task"]))),128))],36)}const oh=V(FA,[["render",BA],["__scopeId","data-v-729e778e"]]),HA={name:"DayPoints",components:{},props:{date:Date},created:async function(){let t=await U(()=>Promise.resolve().then(()=>Et),void 0);this.iterationStore=t.useIterationStore()},data:function(){return{iterationStore:void 0}},computed:{iterations(){if(this.iterationStore){let t=ei(this.date),e=Ne(this.date),i=this.iterationStore.iterations;return i=i.filter(s=>+new Date(s.startAt)>=+t&&+new Date(s.endAt)<=+e),i=xe(i,"startAt"),i}else return[]},pointTotal(){var t=0;return this.iterations.forEach(e=>{e.points!=null&&(t+=e.points)}),t},pointCompleted(){var t=0;return this.iterations.forEach(e=>{e.points!=null&&e.attemptedAt&&(t+=e.points)}),t}},methods:{}},UA={class:"points"};function YA(t,e,i,s,r,n){return f(),m("div",null,[c("span",UA,S(`${n.pointCompleted}`),1)])}const G_=V(HA,[["render",YA],["__scopeId","data-v-fb12fccb"]]),GA={name:"Event",props:{_event:Object,minuteHeight:Number,zIndex:Number},data:function(){return{appStore:void 0,plannerStore:void 0}},created:function(){this.appStore=Gt(),this.plannerStore=jr()},computed:{minutes(){return Bc(new Date(this._event.startAt),new Date(this._event.endAt))},height(){return this.minuteHeight*this.minutes},top(){let e=new Date(this._event.startAt).getMinutes();return this.minuteHeight*e},size(){return this.minutes<=30?"sm":this.minutes>30&&this.minutes<=60?"md":"lg"},flexDirection(){return this.size=="sm"?"flex-row":"flex-column"},paddingTopBottom(){return this.size=="sm"?4:6},todoIterations(){return this._event.iterations.filter(t=>t.routineIteration==null)},routineTodoIterations(){let t=this._event.iterations.filter(e=>e.routineIteration!=null).flat();return t=t.map(e=>e.routineIteration),t.map(e=>e.todoIterations).flat()},iterations(){let t=[];return t=t.concat(this.routineTodoIterations).concat(this.todoIterations),this._event.type.id==vs.ROUTINE&&(t=t.filter(e=>e.text!=this._event.text)),Jl(t,"id")},complete(){return this.iterations.filter(t=>t.attemptedAt)},pending(){return this.iterations.filter(t=>!t.attemptedAt)},percentComplete(){return this.iterations.length==0?100:this.complete.length/this.iterations.length*100},successStatus(){return this.percentComplete>=90?"success":this.percentComplete>=50&&this.percentComplete<90?"close":this.percentComplete<50?"fail":""},color(){return this._event.type.id==vs.ROUTINE?"#4C6EF5":this._event.type.id==vs.WORKOUT?"#F54C70":"#039BE5"}},methods:{getDurationInMinutes:Bc,getTimeString:ND,onDrop:KA,selectEvent:qA}};function KA(t){t.preventDefault();let e=t.dataTransfer.getData("text");e=JSON.parse(e),e.type&&e.type=="task"?e.parentType&&e.parentType=="routineEvent"?console.log("this.unmapTaskFromRoutineEvent(data.id, data.parentID, this._event.startAt, this._event.endAt, this._event.id, this.$apollo)"):console.log("this.mapIterationToEvent(data.id, this._event.id, this.$apollo)"):e.type&&e.type=="todo"&&e.parentType&&e.parentType=="goal"&&console.log("this.mapTodoToEvent(data.id, this._event.id, this.$apollo)")}function qA(){this.appStore.setSelectedEvent(this._event),this.plannerStore.selectDate(new Date(this._event.startAt))}const JA={class:"title"},QA={key:0},ZA={class:"time"};function XA(t,e,i,s,r,n){return f(),m("div",{class:O(["event position-relative d-flex w-100",[n.size,n.successStatus]]),style:ue({top:`${n.top}px`,"padding-top":`${n.paddingTopBottom}px`,"padding-bottom":`${n.paddingTopBottom}px`,"z-index":1,"background-color":n.color}),onClick:e[0]||(e[0]=(...o)=>n.selectEvent&&n.selectEvent(...o)),onDrop:e[1]||(e[1]=o=>n.onDrop(o)),onDragover:e[2]||(e[2]=fe(()=>{},["prevent"])),onDragenter:e[3]||(e[3]=fe(()=>{},["prevent"]))},[c("div",{class:O(["d-flex","overflow-scroll",n.flexDirection]),style:ue({height:`${n.height-n.paddingTopBottom*2}px`})},[c("div",JA,[Js(S(i._event.text)+" ",1),n.size=="sm"?(f(),m("span",QA,",")):y("",!0)]),c("div",ZA,S(n.getTimeString(new Date(i._event.startAt))),1)],6)],38)}const eO=V(GA,[["render",XA],["__scopeId","data-v-44a79055"]]),tO={components:{Event:eO},name:"HourBlock",props:{date:Date,hour:Object,blockHeight:Number,zIndex:Number},computed:{timeTop(){return this.minuteHeight*this.minute},minuteHeight(){return this.blockHeight/60},currentTime(){return this.plannerStore?this.plannerStore.currentTime:new Date},minute(){return this.currentTime.getMinutes()},isCurrentHour(){return this.currentTime.toDateString()==this.date.toDateString()&&this.currentTime.getHours()==this.hour.military},events(){if(this.eventStore){let t=ei(this.date);t.setHours(this.hour.military);let e=ei(this.date);e.setHours(this.hour.military,59,59,59);let i=this.eventStore.getEvents(t,e,!1);return i=i.filter(s=>new Date(s.startAt).getTime()>=t&&new Date(s.startAt).getTime()<=e),i}else return[]}},data:function(){return{plannerStore:void 0,eventStore:void 0}},created:async function(){let t=await U(()=>Promise.resolve().then(()=>He),void 0);this.plannerStore=t.usePlannerStore();let e=await U(()=>Promise.resolve().then(()=>$s),void 0);this.eventStore=e.useEventStore()},methods:{}};function iO(t,e,i,s,r,n){const o=T("Event");return f(),m("div",{class:"hour-block position-relative",style:ue({height:`${i.blockHeight}px`})},[n.isCurrentHour?(f(),m("span",{key:0,class:"time circle",style:ue({top:`${n.timeTop-4}px`})},null,4)):y("",!0),n.isCurrentHour?(f(),m("span",{key:1,class:"time line",style:ue({top:`${n.timeTop}px`})},null,4)):y("",!0),(f(!0),m(M,null,N(n.events,(a,l)=>(f(),K(o,{key:l,_event:a,minuteHeight:n.minuteHeight,zIndex:i.zIndex},null,8,["_event","minuteHeight","zIndex"]))),128))],4)}const sO=V(tO,[["render",iO],["__scopeId","data-v-e9697f10"]]);function ah(){let t=[];for(let e=4;e<24;e++){let i={};if(t.push(i),e<13){let s=e>0?e:12,r=e<12?"AM":"PM";i.military=e,i.militaryString=e<10?`0${e}`:`${e}`,i.twelveHour=s,i.meridian=r,i.twelveHourString=`${s} ${r}`}else if(e>12){let s=e%12;i.military=e,i.militaryString=`${e}`,i.twelveHour=s,i.meridian="PM",i.twelveHourString=`${s} PM`}}return t}const nO={name:"HourBlocks",components:{HourBlock:sO},props:{date:Date,blockHeight:Number},created:function(){this.initHours()},data:function(){return{hours:[]}},methods:{initHours:rO,getHoursObjectArray:ah}};function rO(){this.hours=this.getHoursObjectArray()}const oO={class:"d-flex flex-column"};function aO(t,e,i,s,r,n){const o=T("HourBlock");return f(),m("div",oO,[(f(!0),m(M,null,N(t.hours,(a,l)=>(f(),m("div",{key:l,class:"text-start"},[D(o,{hour:a,date:i.date,blockHeight:i.blockHeight,zIndex:l*100,onSelectEvent:e[0]||(e[0]=d=>t.$emit("selectEvent",d))},null,8,["hour","date","blockHeight","zIndex"])]))),128))])}const K_=V(nO,[["render",aO]]),lO={name:"PlannerPanel",components:{TaskList:oh,DayPoints:G_,HourBlocks:K_},props:{dayCount:Number},data:function(){return{padding:60,days:[],dayModels:[],date:de,maxTasks:0,width:0,grid:"",hour:{hours:[],labelWidth:50,blockHeight:48},events:[],tasks:[],firstDay:null,lastDay:null,plannerStore:void 0,eventStore:void 0,iterationStore:void 0}},computed:{selectedDate(){return this.plannerStore?this.plannerStore.selectedDate:ft},startAt(){return lt(this.selectedDate)},endAt(){return vt(this.selectedDate)}},created:async function(){let t=await U(()=>Promise.resolve().then(()=>$s),void 0);this.eventStore=t.useEventStore();let e=await U(()=>Promise.resolve().then(()=>Et),void 0);this.iterationStore=e.useIterationStore();let i=await U(()=>Promise.resolve().then(()=>He),void 0);this.plannerStore=i.usePlannerStore(),this.plannerStore.startClock()},beforeMount:function(){},mounted:function(){this.width=this.$refs.weekView.clientWidth,this.initHours()},methods:{initHours:dO,initTimeline:cO,newDay:uO,replaceItem:Ai,removeItem:Fr,getHoursObjectArray:ah,onScroll:hO,taskList(t){return t.tasks.filter(e=>!e.isInEvent)}},watch:{dayCount(){this.initTimeline()},selectedDate(){this.initTimeline(),this.eventStore.getEvents(this.startAt,this.endAt,!0),this.iterationStore.getIterationsInRange(this.startAt,this.endAt,!0)}}};function dO(){this.hour.hours=this.getHoursObjectArray()}function cO(){let t=this.dayCount==7?lt(this.selectedDate):ks(new Date(this.selectedDate),-1);this.firstDay=new Date(t),this.days=[];let e=[];for(let i=0;i<this.dayCount;i++)this.days.push(t),e.push(this.newDay(t)),t=ks(t,1);this.lastDay=new Date(t),this.dayModels=e}function uO(t){let e=this.tasks.filter(s=>new Date(s.startAt).toDateString()==t.toDateString()&&(s.endAt==null||new Date(s.endAt).toDateString()==t.toDateString()));e=e.filter(s=>s.events.length==0);let i="";return t.getTime()<this.selectedDate.getTime()?i="past":t.getTime()==this.selectedDate.getTime()?i="present":t.getTime()>this.selectedDate.getTime()&&(i="future"),{dow:de.format(t,"ddd"),day:de.format(t,"D"),date:new Date(t.getTime()),dateString:t.toDateString(),tasks:e,pointInTime:i}}function hO(){}const fO={class:"row g-0 h-100"},mO={class:"col h-100"},pO={class:"date-label d-flex flex-column justify-content-between"},gO={class:"dow"},vO={class:"date-icon"},_O={class:"body d-flex h-100 overflow-scroll"},yO={key:0},bO={class:"hour-label"};function wO(t,e,i,s,r,n){const o=T("TaskList"),a=T("DayPoints"),l=T("HourBlocks");return f(),m("div",fO,[c("div",mO,[c("div",{class:"week-view d-flex flex-column h-100 w-100",ref:"weekView",style:ue({"min-width":`${64*i.dayCount}px`})},[c("div",{class:"header d-flex",style:ue({"padding-left":`${t.hour.labelWidth}px`})},[(f(!0),m(M,null,N(t.dayModels,(d,u)=>(f(),m("div",{key:u,class:O(["head day-view d-flex flex-column flex-grow-1 h-100",d.pointInTime]),style:{"flex-basis":0}},[c("div",pO,[c("div",gO,S(d.dow),1),c("div",vO,S(d.day),1)]),D(o,{date:d.date,taskList:n.taskList(d)},null,8,["date","taskList"]),D(a,{date:d.date},null,8,["date"])],2))),128))],4),c("div",_O,[c("div",{class:"hour-labels overflow-hidden",style:ue({"min-width":`${t.hour.labelWidth}px`,height:"fit-content"})},[(f(!0),m(M,null,N(t.hour.hours,(d,u)=>(f(),m("div",{key:u,style:ue({height:`${t.hour.blockHeight}px`})},[u!=0?(f(),m("div",yO,[c("p",bO,S(d.twelveHourString),1)])):y("",!0)],4))),128))],4),t.dayModels.length>0?(f(),m("div",{key:0,class:"hour-blocks d-flex w-100 overflow-hidden",ref:"hourBlocks",style:{height:"fit-content"},onScroll:e[1]||(e[1]=(...d)=>n.onScroll&&n.onScroll(...d))},[(f(!0),m(M,null,N(t.dayModels,(d,u)=>(f(),K(l,{key:u,class:"day-view flex-grow-1",date:d.date,style:{"flex-basis":0},blockHeight:t.hour.blockHeight,onSelectEvent:e[0]||(e[0]=h=>t.$emit("selectEvent",h))},null,8,["date","blockHeight"]))),128))],544)):y("",!0)])],4)])])}const SO=V(lO,[["render",wO],["__scopeId","data-v-f4f0049f"]]),TO={name:"EventTodoPanel",components:{ListItem:Fn,AddTaskButton:rh,IconButton:zn},props:{_event:Object},data:function(){return{eventStore:void 0,iterations:{new:null}}},created:async function(){let t=await U(()=>Promise.resolve().then(()=>$s),void 0);this.eventStore=t.useEventStore()},computed:{eventt(){if(this.eventStore)return this.eventStore.events.find(e=>e.id==this._event.id)},completeIterations(){if(this.eventt){var t=this.eventt.iterations.filter(e=>e.attemptedAt);return xe(t,"id")}else return[]},incompleteIterations(){if(this.eventt){var t=this.eventt.iterations.filter(e=>!e.attemptedAt);return xe(t,"id")}else return[]}},methods:{initIteration:xO,addNewTask:EO,cancelAddTask:IO,replaceItem:Ai,removeItem:Fr,today:it,toShortWeekdayString:Dr}};function xO(){return{id:this.newItemID--,text:"",startAt:ei(this._event.startAt),endAt:null,attemptedAt:null,completedAt:null,isRecommended:!1}}function EO(){this.iterations.new=this.initIteration(),this.$nextTick(()=>this.$refs.newTask.focus())}function IO(){this.iterations.new=null}const DO={class:"todo-event d-flex flex-column flex-grow-1"},kO={class:"head d-flex flex-column px-3 pt-2"},CO={class:"title text-start"},PO={class:"date text-start"},MO={class:"toolbar d-flex flex-row justify-content-between align-items-center"},AO={key:0,class:"d-flex flex-column flex-grow-1 justify-content-between"},OO={key:0,class:"item-list pending"},RO={class:"complete d-flex flex-column"},$O={class:"header"},NO={key:0,class:"item-list"};function LO(t,e,i,s,r,n){const o=T("AddTaskButton"),a=T("IconButton"),l=T("ListItem");return f(),m("div",DO,[c("div",kO,[c("span",CO,S(n.toShortWeekdayString(i._event.startAt)),1),c("span",PO,S(i._event.text),1)]),c("div",MO,[D(o,{onClick:n.addNewTask},null,8,["onClick"]),D(a,{src:"/icon/goal-icon.png",width:32,height:32})]),i._event?(f(),m("div",AO,[n.incompleteIterations?(f(),m("ul",OO,[(f(!0),m(M,null,N(n.incompleteIterations,(d,u)=>(f(),m("li",{key:d.id,style:ue({"z-index":-u})},[D(l,{iteration:d},null,8,["iteration"])],4))),128))])):y("",!0),c("div",RO,[c("div",$O,"Completed ("+S(n.completeIterations.length)+")",1),n.completeIterations?(f(),m("ul",NO,[(f(!0),m(M,null,N(n.completeIterations,(d,u)=>(f(),m("li",{key:u,style:ue({"z-index":-u})},[D(l,{class:"complete",iteration:d},null,8,["iteration"])],4))),128))])):y("",!0)])])):y("",!0)])}const VO=V(TO,[["render",LO],["__scopeId","data-v-03704607"]]),WO={name:"EventRoutinePanel",components:{ListItem:Fn},props:{_event:Object},data:function(){return{eventStore:void 0,iterations:{new:null}}},created:async function(){let t=await U(()=>Promise.resolve().then(()=>$s),void 0);this.eventStore=t.useEventStore()},computed:{eventt(){if(this.eventStore)return this.eventStore.events.find(e=>e.id==this._event.id)},completeIterations(){if(this.eventt){var t=this.eventt.iterations.filter(e=>e.attemptedAt&&e.routineIterationID);return xe(t,"id")}else return[]},incompleteIterations(){if(this.eventt){var t=this.eventt.iterations.filter(e=>!e.attemptedAt&&e.routineIterationID);return xe(t,"id")}else return[]},date(){return this.eventt?Dr(this.eventt.startAt,!0):""},isToday(){if(this.eventt)return sh(this.eventt.startAt)},points(){let t=0,e=0;this.incompleteIterations.forEach(s=>{s.points&&(e+=s.points)}),this.completeIterations.forEach(s=>{s.points&&(t+=s.points)});let i=t+e;return{complete:t,incomplete:e,total:i,text:`${t}/${i}`}}},methods:{initIteration:zO,addNewTask:FO,cancelAddTask:jO,replaceItem:Ai,removeItem:Fr,today:it,toShortWeekdayString:Dr,sortAsc:xe}};function zO(){return{id:this.newItemID--,text:"",startAt:ei(this._event.startAt),endAt:null,attemptedAt:null,completedAt:null,isRecommended:!1}}function FO(){this.iterations.new=this.initIteration(),this.$nextTick(()=>this.$refs.newTask.focus())}function jO(){this.iterations.new=null}const BO={class:"routine-event d-flex flex-column flex-grow-1"},HO={class:"head d-flex flex-column px-3 pt-2"},UO={class:"label text-start"},YO={class:"d-flex flex-row"},GO={key:0,class:"timeframe"},KO={key:1,class:"timeframe"},qO={class:"date"},JO={class:"points text-start mt-1"},QO={key:0,class:"d-flex flex-column flex-grow-1 justify-content-between"},ZO={key:0,class:"item-list pending"},XO={class:"complete d-flex flex-column"},eR={class:"header"},tR={key:0,class:"item-list"};function iR(t,e,i,s,r,n){const o=T("ListItem");return f(),m("div",BO,[c("div",HO,[c("span",UO,S(i._event.text),1),c("div",YO,[n.isToday?(f(),m("span",GO,"Today")):y("",!0),n.isToday?y("",!0):(f(),m("span",KO,"Day")),e[0]||(e[0]=c("span",{class:"dash"},"-",-1)),c("span",qO,S(n.date),1)]),c("span",JO,S(n.points.text),1)]),i._event?(f(),m("div",QO,[n.incompleteIterations?(f(),m("ul",ZO,[(f(!0),m(M,null,N(n.incompleteIterations,(a,l)=>(f(),m("li",{key:a.id,style:ue({"z-index":-l})},[D(o,{iteration:a,parent:i._event,parentType:"routineEvent"},null,8,["iteration","parent"])],4))),128))])):y("",!0),c("div",XO,[c("div",eR,"Completed ("+S(n.completeIterations.length)+")",1),n.completeIterations?(f(),m("ul",tR,[(f(!0),m(M,null,N(n.completeIterations,(a,l)=>(f(),m("li",{key:l,style:ue({"z-index":-l})},[D(o,{class:"complete",iteration:a},null,8,["iteration"])],4))),128))])):y("",!0)])])):y("",!0)])}const sR=V(WO,[["render",iR],["__scopeId","data-v-f3c561c8"]]);var nR=[{id:1,text:"Metric"},{id:2,text:"Date"},{id:3,text:"Type"}];const rR={name:"EventPanel",components:{ItemPanelHeader:ed,EventTodoPanel:VO,EventRoutinePanel:sR},props:{props:Object,showHead:{type:Boolean,default:!0}},data:function(){return{appStore:void 0,EVENTTYPE:{...vs},activeType:"SortBy",sort:{by:"Date",items:nR}}},created:function(){this.appStore=Gt();let t=localStorage.getItem("event-panel-sort-by");t?this.sort.by=t:localStorage.setItem("event-panel-sort-by",this.sort.by)},computed:{type(){return this.appStore?this.appStore.itemPanel.event.type:void 0},eventt(){return this.appStore?this.appStore.itemPanel.event.event:void 0}},methods:{onSortChange:oR}};function oR(t){this.sort.by=t,localStorage.setItem("event-panel-sort-by",t)}const aR={class:"row g-0 h-100"},lR={class:"col h-100"};function dR(t,e,i,s,r,n){const o=T("ItemPanelHeader"),a=T("EventTodoPanel"),l=T("EventRoutinePanel");return f(),m("div",aR,[c("div",lR,[H(D(o,{title:"events",sort:t.sort,onOnSortChange:n.onSortChange},null,8,["sort","onOnSortChange"]),[[Ie,i.showHead]]),n.type==t.EVENTTYPE.TODO?(f(),K(a,{key:0,_event:n.eventt},null,8,["_event"])):y("",!0),n.type==t.EVENTTYPE.ROUTINE?(f(),K(l,{key:1,_event:n.eventt},null,8,["_event"])):y("",!0)])])}const q_=V(rR,[["render",dR]]),cR={name:"DateTimeSelector",props:{dateTime:String},data:function(){return{}},computed:{dateTimeString(){if(this.dateTime){let i=new Date(this.dateTime).toJSON().split("T"),s=i[0].split("-"),r=i[1].split(":");return`${s[0]}-${s[1]}-${s[2]} ${r[0]}:${r[1]}`}else return""}},methods:{onChange:uR}};function uR(t){if(t){let i=new Date(t).toISOString();this.$emit("onChange",i)}else this.$emit("onChange",null)}const hR=["value"];function fR(t,e,i,s,r,n){return f(),m("input",{class:"date-picker",type:"datetime-local",value:n.dateTimeString,onChange:e[0]||(e[0]=(...o)=>n.onChange&&n.onChange(...o))},null,40,hR)}const id=V(cR,[["render",fR]]);async function mR(){return fetch(`${re}/api/Metric/GetMetrics`,{method:"POST",headers:{"Content-Type":"application/json"}}).then(t=>t.json()).then(t=>{if(t.errorMessage)this.errorMessage=t.errorMessage;else return t}).catch(t=>{console.error("Error:",t)})}async function pR(){return fetch(`${re}/api/Metric/GetLogItems`,{method:"POST",headers:{"Content-Type":"application/json"}}).then(t=>t.json()).then(t=>{if(t.errorMessage)this.errorMessage=t.errorMessage;else return t}).catch(t=>{console.error("Error:",t)})}async function gR(t){return fetch(`${re}/api/Metric/LogLogItem`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then(e=>e.json()).then(e=>{if(e.errorMessage)this.errorMessage=e.errorMessage;else return e}).catch(e=>{console.error("Error:",e)})}async function vR(t){return fetch(`${re}/api/Metric/DeleteLogEntry`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({logEntryID:t})}).then(e=>e.json()).then(e=>{if(e.errorMessage)this.errorMessage=e.errorMessage;else return e}).catch(e=>{console.error("Error:",e)})}async function sd(t,e,i,s,r){var n={newPosition:r};return n[`${t}ID`]=i,n.itemID=s,e=Zs(e),t=Zs(t),fetch(`${re}/api/${t}/Reposition${e}In${t}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then(o=>o.json()).then(o=>{if(o.errorMessage)this.errorMessage=o.errorMessage;else return o}).catch(o=>{console.error("Error:",o)})}async function _R(){return fetch(`${re}/api/Goal/GetGoals`,{method:"POST",headers:{"Content-Type":"application/json"}}).then(t=>t.json()).then(t=>{if(t.errorMessage)this.errorMessage=t.errorMessage;else return t}).catch(t=>{console.error("Error:",t)})}async function yR(t,e){let i={start:t,end:e};return fetch(`${re}/api/Goal/GetGoalsWithTimeframe`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}).then(s=>s.json()).then(s=>{if(s.errorMessage)this.errorMessage=s.errorMessage;else return s}).catch(s=>{console.error("Error:",s)})}async function Hc(t){return fetch(`${re}/api/Goal/SaveGoal`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then(e=>e.json()).then(e=>{if(e.status.success)return e.result;console.error("Error:",e.status.errorMessage)}).catch(e=>{console.error("Error:",e)})}async function bR(t,e,i){let s={id:t,datetime:e,text:i};return fetch(`${re}/api/Goal/AddReason`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}).then(r=>r.json()).then(r=>{if(r.status.success)return r.result;console.error("Error:",r.status.errorMessage)}).catch(r=>{console.error("Error:",r)})}async function J_(t){let e={timePair:t};return fetch(`${re}/api/Goal/SaveGoalTimePair`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(i=>i.json()).then(i=>{if(i.status.success)return i.result;console.error("Error:",i.status.errorMessage)}).catch(i=>{console.error("Error:",i)})}async function wR(t){let e={goalTimePairID:t};return fetch(`${re}/api/Goal/DeleteGoalTimePair`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(i=>i.json()).then(i=>{if(i.status.success)return i.result;console.error("Error:",i.status.errorMessage)}).catch(i=>{console.error("Error:",i)})}async function SR(t){let e={goalTimePairTodoID:t};return fetch(`${re}/api/Goal/UnmapTodoFromGoalTimePair`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(i=>i.json()).then(i=>{if(i.status.success)return i.result;console.error("Error:",i.status.errorMessage)}).catch(i=>{console.error("Error:",i)})}async function TR(t,e,i){let s={goalID:t,itemType:e,itemText:i};return fetch(`${re}/api/Goal/CreateAndMapItemToGoal`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}).then(r=>r.json()).then(r=>{if(r.status.errorCode)console.error("Error:",r.status.errorMessage);else return r.result}).catch(r=>{console.error("Error:",r)})}async function xR(t,e,i,s){let r={goalID:t,itemType:e,addedIDs:i,removedIDs:s};return fetch(`${re}/api/Goal/MapItemsToGoal`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}).then(n=>n.json()).then(n=>{if(n.status.errorCode)console.error("Error:",n.status.errorMessage);else return n.result}).catch(n=>{console.error("Error:",n)})}async function ER(){return fetch(`${re}/api/Todo/GetTodos`,{method:"POST",headers:{"Content-Type":"application/json"}}).then(t=>t.json()).then(t=>{if(t.errorMessage)this.errorMessage=t.errorMessage;else return t}).catch(t=>{console.error("Error:",t)})}async function Jn(t){return fetch(`${re}/api/Todo/SaveTodo`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then(e=>e.json()).then(e=>{if(e.status.success)return e.result;console.error("Error:",e.status.errorMessage)}).catch(e=>{console.error("Error:",e)})}async function IR(t){let e={id:t};return fetch(`${re}/api/Todo/DeleteTodo`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(i=>i.json()).then(i=>{if(i.status.success)return i.result;console.error("Error:",i.status.errorMessage)}).catch(i=>{console.error("Error:",i)})}async function DR(t){let e={repeat:t};return fetch(`${re}/api/Todo/SaveTodoRepeat`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(i=>i.json()).then(i=>{if(i.status.success)return i.result;console.error("Error:",i.status.errorMessage)}).catch(i=>{console.error("Error:",i)})}async function kR(t){let e={timePair:t};return fetch(`${re}/api/Todo/SaveTodoTimePair`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(i=>i.json()).then(i=>{if(i.status.success)return i.result;console.error("Error:",i.status.errorMessage)}).catch(i=>{console.error("Error:",i)})}async function CR(t){let e={id:t};return fetch(`${re}/api/Todo/DeleteTodoTimePair`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(i=>i.json()).then(i=>{if(i.status.success)return i.result;console.error("Error:",i.status.errorMessage)}).catch(i=>{console.error("Error:",i)})}async function PR(t,e,i){let s={text:t,isComplete:e,datetime:i};return fetch(`${re}/api/Todo/CreateDefaultTask`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}).then(r=>r.json()).then(r=>{if(r.status.success)return r.result;console.error("Error:",r.status.errorMessage)}).catch(r=>{console.error("Error:",r)})}async function MR(t,e){let i={todoID:t,datetime:e};return fetch(`${re}/api/Todo/CreateTaskForTodo`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}).then(s=>s.json()).then(s=>{if(s.status.success)return s.result;console.error("Error:",s.status.errorMessage)}).catch(s=>{console.error("Error:",s)})}async function AR(t,e,i){let s={todoID:t,itemType:e,itemText:i};return fetch(`${re}/api/Todo/CreateAndMapItemToTodo`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}).then(r=>r.json()).then(r=>{if(r.status.errorCode)console.error("Error:",r.status.errorMessage);else return r.result}).catch(r=>{console.error("Error:",r)})}async function OR(t,e,i,s){let r={todoID:t,itemType:e,addedIDs:i,removedIDs:s};return fetch(`${re}/api/Todo/MapItemsToTodo`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}).then(n=>n.json()).then(n=>{if(n.status.success)return n.result;console.error("Error:",n.status.errorMessage)}).catch(n=>{console.error("Error:",n)})}async function RR(t,e,i){let s={todoID:t,addedIDs:e,removedIDs:i};return fetch(`${re}/api/Todo/MapTypesToTodo`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}).then(r=>r.json()).then(r=>{if(r.status.success)return r.result;console.error("Error:",r.status.errorMessage)}).catch(r=>{console.error("Error:",r)})}async function $R(t,e){let i={id:t,repeatID:e};return fetch(`${re}/api/Todo/RefreshRepetitionForTodo`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}).then(s=>s.json()).then(s=>{if(s.errorMessage)this.errorMessage=s.errorMessage;else return s}).catch(s=>{console.error("Error:",s)})}async function NR(t,e,i){let s={id:t,repeatID:e,from:i};return fetch(`${re}/api/Todo/DeleteFutureRepetitionsForTodo`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}).then(r=>r.json()).then(r=>{if(r.errorMessage)this.errorMessage=r.errorMessage;else return r}).catch(r=>{console.error("Error:",r)})}async function LR(t,e){let i={startAt:t,endAt:e};return fetch(`${re}/api/Todo/GetRepetitiveTodoIterations`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}).then(s=>s.json()).then(s=>{if(s.errorMessage)this.errorMessage=s.errorMessage;else return s}).catch(s=>{console.error("Error:",s)})}async function VR(t,e){let i={goalTimePairTodoID:t,completedAt:e};return fetch(`${re}/api/Todo/ToggleGoalTimePairTodoCompletion`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}).then(s=>s.json()).then(s=>{if(s.status.success)return s.result;console.error("Error:",s.status.errorMessage)}).catch(s=>{console.error("Error:",s)})}async function WR(t){let e={repeatID:t};return fetch(`${re}/api/Todo/DeleteOrArchiveRepeat`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(i=>i.json()).then(i=>{if(i.status.success)return i.result;console.error("Error:",i.status.errorMessage)}).catch(i=>{console.error("Error:",i)})}async function zR(){return fetch(`${re}/api/Routine/GetRoutines`,{method:"POST",headers:{"Content-Type":"application/json"}}).then(t=>t.json()).then(t=>{if(t.errorMessage)this.errorMessage=t.errorMessage;else return t}).catch(t=>{console.error("Error:",t)})}async function Q_(t){return fetch(`${re}/api/Routine/SaveRoutine`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then(e=>e.json()).then(e=>{if(e.status.success)return e.result;console.error("Error:",e.status.errorMessage)}).catch(e=>{console.error("Error:",e)})}async function FR(t){let e={repeat:t};return fetch(`${re}/api/Routine/SaveRoutineRepeat`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(i=>i.json()).then(i=>{if(i.errorMessage)this.errorMessage=i.errorMessage;else return i}).catch(i=>{console.error("Error:",i)})}async function jR(t,e,i){let s={routineID:t,addedIDs:e,removedIDs:i};return fetch(`${re}/api/Routine/MapTodosToRoutine`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}).then(r=>r.json()).then(r=>{if(r.errorMessage)this.errorMessage=r.errorMessage;else return r}).catch(r=>{console.error("Error:",r)})}async function BR(t,e,i){let s={routineID:t,itemType:e,itemText:i};return fetch(`${re}/api/Routine/CreateAndMapItemToRoutine`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}).then(r=>r.json()).then(r=>{if(r.errorMessage)this.errorMessage=r.errorMessage;else return r}).catch(r=>{console.error("Error:",r)})}async function HR(t,e){let i={id:t,repeatID:e};return fetch(`${re}/api/Routine/RefreshRepetitionForRoutine`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}).then(s=>s.json()).then(s=>{if(s.status.success)return s.result;console.error("Error:",s.status.errorMessage)}).catch(s=>{console.error("Error:",s)})}let Zf=!1;const aa=Li("routine",{state:()=>({routines:[]}),getters:{},actions:{async initialize(){let t=this.fill();return this.connectSocket(),Zf=!0,t},async fill(){return zR().then(t=>this.routines=t)},initializeItems(t){let e=cn(),i=Ur(),s=Yr();t=t||this.routines,t.forEach(r=>{r.parents=this.routines.filter(n=>r.parentIDs.includes(n.id)),r.children=this.routines.filter(n=>r.childIDs.includes(n.id)),r.metrics=e.getItems().filter(n=>r.metricIDs.includes(n.id)),r.todos=i.getItems().filter(n=>r.todoIDs.includes(n.id)),r.goals=s.getItems().filter(n=>r.goalIDs.includes(n.id))})},getItems(t){return this.routines=t?this.routines.find(e=>t.includes(e.id)):this.routines},getItem(t){return this.routines.find(e=>e.id==t)},getTaskRoutines(){return this.routines.filter(e=>e.types.findIndex(i=>i.id==gv.TASKROUTINE)>-1)},repositionItem(t,e,i,s,r){sd(t,e,i,s,r)},refreshRepetitionForRepeat(t,e){HR(t,e)},saveRoutine(t){Q_(t)},toggleIsTaskRoutine(){},connectSocket(){if(!Zf){let t=Os("routineHub"),e=this;t.on("UpdateRoutines",i=>{i.forEach(s=>{Be(s,e.routines)}),this.initializeItems(i),xe(e.routines)})}}}}),Lo=Object.freeze(Object.defineProperty({__proto__:null,useRoutineStore:aa},Symbol.toStringTag,{value:"Module"}));let Xf=!1;const Ur=Li("todo",{state:()=>({todos:[]}),getters:{},actions:{async initialize(){let t=this.fill();return this.connectSocket(),Xf=!0,t},async fill(){return ER().then(t=>this.todos=t)},initializeItems(t){let e=cn(),i=Yr(),s=aa();t=t||this.todos,t.forEach(r=>{r.parents=this.todos.filter(n=>r.parentIDs.includes(n.id)),r.children=this.todos.filter(n=>r.childIDs.includes(n.id)),r.metrics=e.getItems().filter(n=>r.metricIDs.includes(n.id)),r.goals=i.getItems().filter(n=>r.goalIDs.includes(n.id)),r.routines=s.getItems().filter(n=>r.routineIDs.includes(n.id))})},getItems(){return this.todos},getItemsByID(t){return this.todos.filter(e=>t.includes(e.id))},getItem(t){return this.todos.find(e=>e.id==t)},saveTodo(t){Jn(t)},deleteTodo(t){IR(t)},createTask(t,e){MR(t,e)},createDefaultTask(t,e,i){PR(t,e,i)},createAndMapItem(t,e,i){AR(t,e,i)},saveText(t,e){Jn({id:t,text:{value:e}})},saveDescription(t,e){Jn({id:t,description:{value:e}})},savePoints(t,e){Jn({id:t,points:{value:e}})},saveType(t,e){Jn({id:t,typeID:{value:e}})},saveMedium(t,e){Jn({id:t,mediumID:{value:e}})},mapItems(t,e,i,s){OR(t,e,i,s)},mapTypes(t,e,i){RR(t,e,i)},repositionItem(t,e,i,s,r){sd(t,e,i,s,r)},refreshRepetitionForRepeat(t,e){$R(t,e)},toggleGoalTimePairTodoCompletion(t,e){VR(t,e)},deleteFutureRepetitionsForRepeat(t,e,i){NR(t,e,i)},deleteOrArchiveRepeat(t){WR(t)},deleteTimePair(t){CR(t)},connectSocket(){if(!Xf){let t=Os("todoHub"),e=this;t.on("UpdateTodos",i=>{i.forEach(s=>{Be(s,e.todos)}),this.initializeItems(i),xe(e.todos)}),t.on("RemoveTodos",i=>{i.forEach(s=>{xs(s,e.todos)}),xe(e.todos)})}}}}),Oi=Object.freeze(Object.defineProperty({__proto__:null,useTodoStore:Ur},Symbol.toStringTag,{value:"Module"}));let em=!1;const Yr=Li("goal",{state:()=>({goals:[]}),getters:{},actions:{async initialize(){let t=this.fill();return this.connectSocket(),em=!0,t},async refresh(){return this.fill()},async fill(){let t=_R().then(e=>this.goals=e);return this.initializeItems(),t},initializeItems(t){let e=cn(),i=Ur(),s=aa();t=t||this.goals,t.forEach(r=>{r.parents=this.goals.filter(n=>r.parentIDs.includes(n.id)),r.children=this.goals.filter(n=>r.childIDs.includes(n.id)),r.metrics=e.getItems().filter(n=>r.metricIDs.includes(n.id)),r.todos=i.getItems().filter(n=>r.todoIDs.includes(n.id)),r.routines=s.getItems().filter(n=>r.routineIDs.includes(n.id))})},getItems(){return this.goals},getItem(t){return this.goals.find(e=>e.id==t)},getTimeframeItems(t,e){let i=this;return yR(t,e).then(s=>(s.forEach(r=>{Be(r,i.goals)}),this.initializeItems(s),xe(i.goals),s))},getGoalsInTimeframe(t,e){var i=this.goals.filter(s=>{var r=s.timePairs.findIndex(n=>{if(n.idTimeframe!=t)return!1;let o=n.startTime?new Date(n.startTime.dateTime):void 0,a=n.endTime?new Date(n.endTime.dateTime):void 0;return!!(o&&+o<=+e&&a&&+a>=+e)});return r>-1});return i},repositionItem(t,e,i,s,r){sd(t,e,i,s,r)},createAndMapItem(t,e,i){TR(t,e,i)},mapItems(t,e,i,s){xR(t,e,i,s)},deleteTimePair(t){wR(t)},unmapTodoFromGoalTimePair(t){SR(t)},saveDescription(t,e){Hc({id:t,description:{value:e}})},saveMetrics(t,e,i){Hc({id:t,metrics:{addedIDs:e,removedIDs:i}})},saveTimePair(t){J_(t)},addReason(t,e,i){bR(t,e,i)},connectSocket(){if(!em){let t=Os("goalHub"),e=this;t.on("UpdateGoals",i=>{i.forEach(s=>{Be(s,e.goals)}),this.initializeItems(i),xe(e.goals)})}}}}),Ri=Object.freeze(Object.defineProperty({__proto__:null,useGoalStore:Yr},Symbol.toStringTag,{value:"Module"}));let tm=!1;const cn=Li("metric",{state:()=>({metrics:[],logItems:[]}),getters:{},actions:{async initialize(){let t=this.fill();return this.connectSocket(),tm=!0,t},async fill(){return mR().then(t=>this.metrics=t)},initializeItems(t){let e=Yr(),i=Ur(),s=aa();t=t||this.metrics,t.forEach(r=>{r.parents=this.metrics.filter(n=>r.parentIDs.includes(n.id)),r.children=this.metrics.filter(n=>r.childIDs.includes(n.id)),r.goals=e.getItems().filter(n=>r.goalIDs.includes(n.id)),r.todos=i.getItems().filter(n=>r.todoIDs.includes(n.id)),r.routines=s.getItems().filter(n=>r.routineIDs.includes(n.id))})},getItems(){return this.metrics},getItem(t){return this.metrics.find(e=>e.id==t)},repositionItem(t,e,i,s,r){sd(t,e,i,s,r)},initializeLogItems(){let t=this;pR().then(e=>{t.logItems=e})},getLogItems(){return q(this.logItems)},getLogItem(t){return q(this.logItems.find(e=>e.id==t))},async logLogItem(t){let e=this;return gR(t).then(i=>{Be(i,e.logItems)})},async deleteLogEntry(t){let e=this;return vR(t).then(i=>{Be(i,e.logItems)})},connectSocket(){if(!tm){let t=Os("metricHub"),e=this;t.on("UpdateMetrics",i=>{i.forEach(s=>{Be(s,e.metrics)}),this.initializeItems(i),xe(e.metrics)})}}}}),Uc=Object.freeze(Object.defineProperty({__proto__:null,useMetricStore:cn},Symbol.toStringTag,{value:"Module"})),UR="/icon/next.png",YR="/icon/icon-expanded.png",GR={name:"LogItemView",components:{DateTimeSelector:id},props:{logItem:Object,clearValues:Number,clearMinutes:Number},data:function(){return{metricStore:void 0,CONTROL:_v,fields:[],entryDateTime:void 0,updatedDateTime:void 0,blurb:"",hasValue:!1,timeout:void 0,showAdditionalValues:!1}},created:function(){this.metricStore=cn(),this.setProps()},computed:{value(){let t="";return this.fields.forEach(e=>{e.value!=null&&(t+=e.value)}),t},lastEntry(){return this.logItem.entries?this.logItem.entries[this.logItem.entries.length-1]:void 0},isLevel(){let t=this.logItem;return!!(t&&t.fields.length==1&&t.fields[0].name.toLowerCase()=="level")},isDrug(){return!!(this.logItem&&this.logItem.name.toLowerCase()=="drugs")}},methods:{setProps:KR,setTimeout(t){this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(()=>{this.clear()},t*60*1e3)},sliderStart(t,e){e.value==null&&(e.value=t.currentTarget.value)},sliderEnd(){this.entryDateTime==null?(this.entryDateTime=new Date,this.save(!0)):this.save(),this.setTimeout(this.clearMinutes)},updateEntryDateTime:qR,clear(){this.setProps(!0)},save(t){let e={logItemID:this.logItem.id,dateTime:this.entryDateTime,fields:[],isNew:t||!1,isUpdated:!t};this.fields.forEach(i=>{e.fields.push({id:i.id,value:i.value})}),this.metricStore.logLogItem(e)}},watch:{clearValues(){this.clear()},showAdditionalValues(t){t&&(this.updatedDateTime=this.entryDateTime.toISOString())},blurb(t){let e={logItemID:this.logItem.id,dateTime:this.entryDateTime,reason:{value:t,isUpdated:!0},isUpdated:!0};this.metricStore.logLogItem(e)}}};function KR(t){let e=!t&&this.logItem.entries?this.logItem.entries[this.logItem.entries.length-1]:void 0,i=[];this.logItem.fields.forEach(s=>{let r={id:s.id,value:void 0,controlTypeID:s.controlTypeID,dataTypeID:s.dataTypeID};if(i.push(r),!t&&e){let n=e.fieldValues.find(o=>o.logItemFieldID==s.id);if(n){let o=new Date(e.dateTime),a=N_(this.clearMinutes);if(+o>+a){r.value=n.value,this.blurb=e.reason,this.entryDateTime=o;let l=Bc(o,new Date),d=this.clearMinutes-l;this.setTimeout(d)}}}}),t&&(this.entryDateTime=void 0,this.updatedDateTime=void 0,this.blurb=""),this.fields=i}function qR(t){let e={logItemID:this.logItem.id,dateTime:this.entryDateTime,updatedDateTime:t,fields:[],isUpdated:!0};this.updatedDateTime=t,this.entryDateTime=new Date(t),this.metricStore.logLogItem(e)}const JR={class:"log-item d-flex flex-column"},QR={class:"d-flex flex-row justify-content-between"},ZR={class:"d-flex flex-row"},XR={class:"last-value"},e$={class:"fields d-flex flex-column"},t$=["onUpdate:modelValue","onMousedown","onMouseup","onTouchstart","onTouchend"],i$={key:0,class:"additional-values d-flex flex-column"};function s$(t,e,i,s,r,n){const o=T("DateTimeSelector");return f(),m("div",JR,[c("div",QR,[c("div",ZR,[c("div",{class:"name",onClick:e[0]||(e[0]=a=>t.$emit("selectLogItem",i.logItem.id))},S(i.logItem.name),1),t.showAdditionalValues?y("",!0):(f(),m("img",{key:0,class:O(["icon-button",{show:!!n.value}]),src:UR,width:"16",height:"16",onClick:e[1]||(e[1]=fe(a=>t.showAdditionalValues=n.value?!0:t.showAdditionalValues,["prevent"]))},null,2)),t.showAdditionalValues?(f(),m("img",{key:1,class:O(["icon-button",{show:!!n.value}]),src:YR,width:"16",height:"16",onClick:e[2]||(e[2]=fe(a=>t.showAdditionalValues=n.value?!1:t.showAdditionalValues,["prevent"]))},null,2)):y("",!0)]),c("div",XR,S(n.value),1)]),c("div",e$,[(f(!0),m(M,null,N(t.fields,a=>(f(),m(M,null,[t.CONTROL.SLIDER==a.controlTypeID?H((f(),m("input",{key:a.id,class:O(["slider",{"has-value":a.value}]),type:"range",min:"1",max:"10",step:"0.1","onUpdate:modelValue":l=>a.value=l,onMousedown:l=>n.sliderStart(l,a),onMouseup:l=>n.sliderEnd(l,a),onTouchstart:l=>n.sliderStart(l,a),onTouchend:l=>n.sliderEnd(l,a)},null,42,t$)),[[Pe,a.value]]):y("",!0)],64))),256))]),n.value&&t.showAdditionalValues?(f(),m("div",i$,[D(o,{class:"date-selector mt-2",dateTime:t.updatedDateTime,onOnChange:n.updateEntryDateTime},null,8,["dateTime","onOnChange"]),H(c("textarea",{id:"blurb",class:"textarea mt-2",type:"text",placeholder:"Blurb","onUpdate:modelValue":e[3]||(e[3]=a=>t.blurb=a),spellcheck:"true"},null,512),[[Pe,t.blurb,void 0,{lazy:!0}]])])):y("",!0)])}const n$=V(GR,[["render",s$],["__scopeId","data-v-0fe6a3b8"]]);function qe(t){var e=t.width,i=t.height;if(e<0)throw new Error("Negative width is not allowed for Size");if(i<0)throw new Error("Negative height is not allowed for Size");return{width:e,height:i}}function Dn(t,e){return t.width===e.width&&t.height===e.height}var r$=function(){function t(e){var i=this;this._resolutionListener=function(){return i._onResolutionChanged()},this._resolutionMediaQueryList=null,this._observers=[],this._window=e,this._installResolutionListener()}return t.prototype.dispose=function(){this._uninstallResolutionListener(),this._window=null},Object.defineProperty(t.prototype,"value",{get:function(){return this._window.devicePixelRatio},enumerable:!1,configurable:!0}),t.prototype.subscribe=function(e){var i=this,s={next:e};return this._observers.push(s),{unsubscribe:function(){i._observers=i._observers.filter(function(r){return r!==s})}}},t.prototype._installResolutionListener=function(){if(this._resolutionMediaQueryList!==null)throw new Error("Resolution listener is already installed");var e=this._window.devicePixelRatio;this._resolutionMediaQueryList=this._window.matchMedia("all and (resolution: ".concat(e,"dppx)")),this._resolutionMediaQueryList.addListener(this._resolutionListener)},t.prototype._uninstallResolutionListener=function(){this._resolutionMediaQueryList!==null&&(this._resolutionMediaQueryList.removeListener(this._resolutionListener),this._resolutionMediaQueryList=null)},t.prototype._reinstallResolutionListener=function(){this._uninstallResolutionListener(),this._installResolutionListener()},t.prototype._onResolutionChanged=function(){var e=this;this._observers.forEach(function(i){return i.next(e._window.devicePixelRatio)}),this._reinstallResolutionListener()},t}();function o$(t){return new r$(t)}var a$=function(){function t(e,i,s){var r;this._canvasElement=null,this._bitmapSizeChangedListeners=[],this._suggestedBitmapSize=null,this._suggestedBitmapSizeChangedListeners=[],this._devicePixelRatioObservable=null,this._canvasElementResizeObserver=null,this._canvasElement=e,this._canvasElementClientSize=qe({width:this._canvasElement.clientWidth,height:this._canvasElement.clientHeight}),this._transformBitmapSize=i??function(n){return n},this._allowResizeObserver=(r=s==null?void 0:s.allowResizeObserver)!==null&&r!==void 0?r:!0,this._chooseAndInitObserver()}return t.prototype.dispose=function(){var e,i;if(this._canvasElement===null)throw new Error("Object is disposed");(e=this._canvasElementResizeObserver)===null||e===void 0||e.disconnect(),this._canvasElementResizeObserver=null,(i=this._devicePixelRatioObservable)===null||i===void 0||i.dispose(),this._devicePixelRatioObservable=null,this._suggestedBitmapSizeChangedListeners.length=0,this._bitmapSizeChangedListeners.length=0,this._canvasElement=null},Object.defineProperty(t.prototype,"canvasElement",{get:function(){if(this._canvasElement===null)throw new Error("Object is disposed");return this._canvasElement},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canvasElementClientSize",{get:function(){return this._canvasElementClientSize},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bitmapSize",{get:function(){return qe({width:this.canvasElement.width,height:this.canvasElement.height})},enumerable:!1,configurable:!0}),t.prototype.resizeCanvasElement=function(e){this._canvasElementClientSize=qe(e),this.canvasElement.style.width="".concat(this._canvasElementClientSize.width,"px"),this.canvasElement.style.height="".concat(this._canvasElementClientSize.height,"px"),this._invalidateBitmapSize()},t.prototype.subscribeBitmapSizeChanged=function(e){this._bitmapSizeChangedListeners.push(e)},t.prototype.unsubscribeBitmapSizeChanged=function(e){this._bitmapSizeChangedListeners=this._bitmapSizeChangedListeners.filter(function(i){return i!==e})},Object.defineProperty(t.prototype,"suggestedBitmapSize",{get:function(){return this._suggestedBitmapSize},enumerable:!1,configurable:!0}),t.prototype.subscribeSuggestedBitmapSizeChanged=function(e){this._suggestedBitmapSizeChangedListeners.push(e)},t.prototype.unsubscribeSuggestedBitmapSizeChanged=function(e){this._suggestedBitmapSizeChangedListeners=this._suggestedBitmapSizeChangedListeners.filter(function(i){return i!==e})},t.prototype.applySuggestedBitmapSize=function(){if(this._suggestedBitmapSize!==null){var e=this._suggestedBitmapSize;this._suggestedBitmapSize=null,this._resizeBitmap(e),this._emitSuggestedBitmapSizeChanged(e,this._suggestedBitmapSize)}},t.prototype._resizeBitmap=function(e){var i=this.bitmapSize;Dn(i,e)||(this.canvasElement.width=e.width,this.canvasElement.height=e.height,this._emitBitmapSizeChanged(i,e))},t.prototype._emitBitmapSizeChanged=function(e,i){var s=this;this._bitmapSizeChangedListeners.forEach(function(r){return r.call(s,e,i)})},t.prototype._suggestNewBitmapSize=function(e){var i=this._suggestedBitmapSize,s=qe(this._transformBitmapSize(e,this._canvasElementClientSize)),r=Dn(this.bitmapSize,s)?null:s;i===null&&r===null||i!==null&&r!==null&&Dn(i,r)||(this._suggestedBitmapSize=r,this._emitSuggestedBitmapSizeChanged(i,r))},t.prototype._emitSuggestedBitmapSizeChanged=function(e,i){var s=this;this._suggestedBitmapSizeChangedListeners.forEach(function(r){return r.call(s,e,i)})},t.prototype._chooseAndInitObserver=function(){var e=this;if(!this._allowResizeObserver){this._initDevicePixelRatioObservable();return}d$().then(function(i){return i?e._initResizeObserver():e._initDevicePixelRatioObservable()})},t.prototype._initDevicePixelRatioObservable=function(){var e=this;if(this._canvasElement!==null){var i=im(this._canvasElement);if(i===null)throw new Error("No window is associated with the canvas");this._devicePixelRatioObservable=o$(i),this._devicePixelRatioObservable.subscribe(function(){return e._invalidateBitmapSize()}),this._invalidateBitmapSize()}},t.prototype._invalidateBitmapSize=function(){var e,i;if(this._canvasElement!==null){var s=im(this._canvasElement);if(s!==null){var r=(i=(e=this._devicePixelRatioObservable)===null||e===void 0?void 0:e.value)!==null&&i!==void 0?i:s.devicePixelRatio,n=this._canvasElement.getClientRects(),o=n[0]!==void 0?c$(n[0],r):qe({width:this._canvasElementClientSize.width*r,height:this._canvasElementClientSize.height*r});this._suggestNewBitmapSize(o)}}},t.prototype._initResizeObserver=function(){var e=this;this._canvasElement!==null&&(this._canvasElementResizeObserver=new ResizeObserver(function(i){var s=i.find(function(o){return o.target===e._canvasElement});if(!(!s||!s.devicePixelContentBoxSize||!s.devicePixelContentBoxSize[0])){var r=s.devicePixelContentBoxSize[0],n=qe({width:r.inlineSize,height:r.blockSize});e._suggestNewBitmapSize(n)}}),this._canvasElementResizeObserver.observe(this._canvasElement,{box:"device-pixel-content-box"}))},t}();function l$(t,e){return new a$(t,e.transform,e.options)}function im(t){return t.ownerDocument.defaultView}function d$(){return new Promise(function(t){var e=new ResizeObserver(function(i){t(i.every(function(s){return"devicePixelContentBoxSize"in s})),e.disconnect()});e.observe(document.body,{box:"device-pixel-content-box"})}).catch(function(){return!1})}function c$(t,e){return qe({width:Math.round(t.left*e+t.width*e)-Math.round(t.left*e),height:Math.round(t.top*e+t.height*e)-Math.round(t.top*e)})}var u$=function(){function t(e,i,s){if(i.width===0||i.height===0)throw new TypeError("Rendering target could only be created on a media with positive width and height");if(this._mediaSize=i,s.width===0||s.height===0)throw new TypeError("Rendering target could only be created using a bitmap with positive integer width and height");this._bitmapSize=s,this._context=e}return t.prototype.useMediaCoordinateSpace=function(e){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),this._context.scale(this._horizontalPixelRatio,this._verticalPixelRatio),e({context:this._context,mediaSize:this._mediaSize})}finally{this._context.restore()}},t.prototype.useBitmapCoordinateSpace=function(e){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),e({context:this._context,mediaSize:this._mediaSize,bitmapSize:this._bitmapSize,horizontalPixelRatio:this._horizontalPixelRatio,verticalPixelRatio:this._verticalPixelRatio})}finally{this._context.restore()}},Object.defineProperty(t.prototype,"_horizontalPixelRatio",{get:function(){return this._bitmapSize.width/this._mediaSize.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_verticalPixelRatio",{get:function(){return this._bitmapSize.height/this._mediaSize.height},enumerable:!1,configurable:!0}),t}();function An(t,e){var i=t.canvasElementClientSize;if(i.width===0||i.height===0)return null;var s=t.bitmapSize;if(s.width===0||s.height===0)return null;var r=t.canvasElement.getContext("2d",e);return r===null?null:new u$(r,i,s)}/*!
 * @license
 * TradingView Lightweight Charts™ v4.1.3
 * Copyright (c) 2024 TradingView, Inc.
 * Licensed under Apache License 2.0 https://www.apache.org/licenses/LICENSE-2.0
 */const h$={upColor:"#26a69a",downColor:"#ef5350",wickVisible:!0,borderVisible:!0,borderColor:"#378658",borderUpColor:"#26a69a",borderDownColor:"#ef5350",wickColor:"#737375",wickUpColor:"#26a69a",wickDownColor:"#ef5350"},f$={upColor:"#26a69a",downColor:"#ef5350",openVisible:!0,thinBars:!0},m$={color:"#2196f3",lineStyle:0,lineWidth:3,lineType:0,lineVisible:!0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0,pointMarkersVisible:!1},p$={topColor:"rgba( 46, 220, 135, 0.4)",bottomColor:"rgba( 40, 221, 100, 0)",invertFilledArea:!1,lineColor:"#33D778",lineStyle:0,lineWidth:3,lineType:0,lineVisible:!0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0,pointMarkersVisible:!1},g$={baseValue:{type:"price",price:0},topFillColor1:"rgba(38, 166, 154, 0.28)",topFillColor2:"rgba(38, 166, 154, 0.05)",topLineColor:"rgba(38, 166, 154, 1)",bottomFillColor1:"rgba(239, 83, 80, 0.05)",bottomFillColor2:"rgba(239, 83, 80, 0.28)",bottomLineColor:"rgba(239, 83, 80, 1)",lineWidth:3,lineStyle:0,lineType:0,lineVisible:!0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0,pointMarkersVisible:!1},v$={color:"#26a69a",base:0},Z_={color:"#2196f3"},X_={title:"",visible:!0,lastValueVisible:!0,priceLineVisible:!0,priceLineSource:0,priceLineWidth:1,priceLineColor:"",priceLineStyle:2,baseLineVisible:!0,baseLineWidth:1,baseLineColor:"#B2B5BE",baseLineStyle:0,priceFormat:{type:"price",precision:2,minMove:.01}};var sm,nm;function On(t,e){const i={0:[],1:[t.lineWidth,t.lineWidth],2:[2*t.lineWidth,2*t.lineWidth],3:[6*t.lineWidth,6*t.lineWidth],4:[t.lineWidth,4*t.lineWidth]}[e];t.setLineDash(i)}function ey(t,e,i,s){t.beginPath();const r=t.lineWidth%2?.5:0;t.moveTo(i,e+r),t.lineTo(s,e+r),t.stroke()}function en(t,e){if(!t)throw new Error("Assertion failed"+(e?": "+e:""))}function jt(t){if(t===void 0)throw new Error("Value is undefined");return t}function J(t){if(t===null)throw new Error("Value is null");return t}function lr(t){return J(jt(t))}(function(t){t[t.Simple=0]="Simple",t[t.WithSteps=1]="WithSteps",t[t.Curved=2]="Curved"})(sm||(sm={})),function(t){t[t.Solid=0]="Solid",t[t.Dotted=1]="Dotted",t[t.Dashed=2]="Dashed",t[t.LargeDashed=3]="LargeDashed",t[t.SparseDotted=4]="SparseDotted"}(nm||(nm={}));const rm={khaki:"#f0e68c",azure:"#f0ffff",aliceblue:"#f0f8ff",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",gray:"#808080",green:"#008000",honeydew:"#f0fff0",floralwhite:"#fffaf0",lightblue:"#add8e6",lightcoral:"#f08080",lemonchiffon:"#fffacd",hotpink:"#ff69b4",lightyellow:"#ffffe0",greenyellow:"#adff2f",lightgoldenrodyellow:"#fafad2",limegreen:"#32cd32",linen:"#faf0e6",lightcyan:"#e0ffff",magenta:"#f0f",maroon:"#800000",olive:"#808000",orange:"#ffa500",oldlace:"#fdf5e6",mediumblue:"#0000cd",transparent:"#0000",lime:"#0f0",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",midnightblue:"#191970",orchid:"#da70d6",mediumorchid:"#ba55d3",mediumturquoise:"#48d1cc",orangered:"#ff4500",royalblue:"#4169e1",powderblue:"#b0e0e6",red:"#f00",coral:"#ff7f50",turquoise:"#40e0d0",white:"#fff",whitesmoke:"#f5f5f5",wheat:"#f5deb3",teal:"#008080",steelblue:"#4682b4",bisque:"#ffe4c4",aquamarine:"#7fffd4",aqua:"#0ff",sienna:"#a0522d",silver:"#c0c0c0",springgreen:"#00ff7f",antiquewhite:"#faebd7",burlywood:"#deb887",brown:"#a52a2a",beige:"#f5f5dc",chocolate:"#d2691e",chartreuse:"#7fff00",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cadetblue:"#5f9ea0",tomato:"#ff6347",fuchsia:"#f0f",blue:"#00f",salmon:"#fa8072",blanchedalmond:"#ffebcd",slateblue:"#6a5acd",slategray:"#708090",thistle:"#d8bfd8",tan:"#d2b48c",cyan:"#0ff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",blueviolet:"#8a2be2",black:"#000",darkmagenta:"#8b008b",darkslateblue:"#483d8b",darkkhaki:"#bdb76b",darkorchid:"#9932cc",darkorange:"#ff8c00",darkgreen:"#006400",darkred:"#8b0000",dodgerblue:"#1e90ff",darkslategray:"#2f4f4f",dimgray:"#696969",deepskyblue:"#00bfff",firebrick:"#b22222",forestgreen:"#228b22",indigo:"#4b0082",ivory:"#fffff0",lavenderblush:"#fff0f5",feldspar:"#d19275",indianred:"#cd5c5c",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightskyblue:"#87cefa",lightslategray:"#789",lightslateblue:"#8470ff",snow:"#fffafa",lightseagreen:"#20b2aa",lightsalmon:"#ffa07a",darksalmon:"#e9967a",darkviolet:"#9400d3",mediumpurple:"#9370d8",mediumaquamarine:"#66cdaa",skyblue:"#87ceeb",lavender:"#e6e6fa",lightsteelblue:"#b0c4de",mediumvioletred:"#c71585",mintcream:"#f5fffa",navajowhite:"#ffdead",navy:"#000080",olivedrab:"#6b8e23",palevioletred:"#d87093",violetred:"#d02090",yellow:"#ff0",yellowgreen:"#9acd32",lawngreen:"#7cfc00",pink:"#ffc0cb",paleturquoise:"#afeeee",palegoldenrod:"#eee8aa",darkolivegreen:"#556b2f",darkseagreen:"#8fbc8f",darkturquoise:"#00ced1",peachpuff:"#ffdab9",deeppink:"#ff1493",violet:"#ee82ee",palegreen:"#98fb98",mediumseagreen:"#3cb371",peru:"#cd853f",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",purple:"#800080",seagreen:"#2e8b57",seashell:"#fff5ee",papayawhip:"#ffefd5",mediumslateblue:"#7b68ee",plum:"#dda0dd",mediumspringgreen:"#00fa9a"};function ai(t){return t<0?0:t>255?255:Math.round(t)||0}function ty(t){return t<=0||t>0?t<0?0:t>1?1:Math.round(1e4*t)/1e4:0}const _$=/^#([0-9a-f])([0-9a-f])([0-9a-f])([0-9a-f])?$/i,y$=/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})?$/i,b$=/^rgb\(\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*\)$/,w$=/^rgba\(\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?[\d]{0,10}(?:\.\d+)?)\s*\)$/;function _l(t){(t=t.toLowerCase())in rm&&(t=rm[t]);{const e=w$.exec(t)||b$.exec(t);if(e)return[ai(parseInt(e[1],10)),ai(parseInt(e[2],10)),ai(parseInt(e[3],10)),ty(e.length<5?1:parseFloat(e[4]))]}{const e=y$.exec(t);if(e)return[ai(parseInt(e[1],16)),ai(parseInt(e[2],16)),ai(parseInt(e[3],16)),1]}{const e=_$.exec(t);if(e)return[ai(17*parseInt(e[1],16)),ai(17*parseInt(e[2],16)),ai(17*parseInt(e[3],16)),1]}throw new Error(`Cannot parse color: ${t}`)}function nd(t){const e=_l(t);return{t:`rgb(${e[0]}, ${e[1]}, ${e[2]})`,i:(i=e,.199*i[0]+.687*i[1]+.114*i[2]>160?"black":"white")};var i}class at{constructor(){this.h=[]}l(e,i,s){const r={o:e,_:i,u:s===!0};this.h.push(r)}v(e){const i=this.h.findIndex(s=>e===s.o);i>-1&&this.h.splice(i,1)}p(e){this.h=this.h.filter(i=>i._!==e)}m(e,i,s){const r=[...this.h];this.h=this.h.filter(n=>!n.u),r.forEach(n=>n.o(e,i,s))}M(){return this.h.length>0}S(){this.h=[]}}function $i(t,...e){for(const i of e)for(const s in i)i[s]!==void 0&&(typeof i[s]!="object"||t[s]===void 0||Array.isArray(i[s])?t[s]=i[s]:$i(t[s],i[s]));return t}function Ji(t){return typeof t=="number"&&isFinite(t)}function Vo(t){return typeof t=="number"&&t%1==0}function la(t){return typeof t=="string"}function Sa(t){return typeof t=="boolean"}function ws(t){const e=t;if(!e||typeof e!="object")return e;let i,s,r;for(s in i=Array.isArray(e)?[]:{},e)e.hasOwnProperty(s)&&(r=e[s],i[s]=r&&typeof r=="object"?ws(r):r);return i}function S$(t){return t!==null}function Wo(t){return t===null?void 0:t}const lh="-apple-system, BlinkMacSystemFont, 'Trebuchet MS', Roboto, Ubuntu, sans-serif";function kr(t,e,i){return e===void 0&&(e=lh),`${i=i!==void 0?`${i} `:""}${t}px ${e}`}class T${constructor(e){this.k={C:1,T:5,P:NaN,R:"",D:"",O:"",A:"",V:0,B:0,I:0,L:0,N:0},this.F=e}W(){const e=this.k,i=this.j(),s=this.H();return e.P===i&&e.D===s||(e.P=i,e.D=s,e.R=kr(i,s),e.L=2.5/12*i,e.V=e.L,e.B=i/12*e.T,e.I=i/12*e.T,e.N=0),e.O=this.$(),e.A=this.U(),this.k}$(){return this.F.W().layout.textColor}U(){return this.F.q()}j(){return this.F.W().layout.fontSize}H(){return this.F.W().layout.fontFamily}}class dh{constructor(){this.Y=[]}X(e){this.Y=e}K(e,i,s){this.Y.forEach(r=>{r.K(e,i,s)})}}class Wi{K(e,i,s){e.useBitmapCoordinateSpace(r=>this.Z(r,i,s))}}class x$ extends Wi{constructor(){super(...arguments),this.G=null}J(e){this.G=e}Z({context:e,horizontalPixelRatio:i,verticalPixelRatio:s}){if(this.G===null||this.G.tt===null)return;const r=this.G.tt,n=this.G,o=Math.max(1,Math.floor(i))%2/2,a=l=>{e.beginPath();for(let d=r.to-1;d>=r.from;--d){const u=n.it[d],h=Math.round(u.nt*i)+o,p=u.st*s,g=l*s+o;e.moveTo(h,p),e.arc(h,p,g,0,2*Math.PI)}e.fill()};n.et>0&&(e.fillStyle=n.rt,a(n.ht+n.et)),e.fillStyle=n.lt,a(n.ht)}}function E$(){return{it:[{nt:0,st:0,ot:0,_t:0}],lt:"",rt:"",ht:0,et:0,tt:null}}const I$={from:0,to:1};class D${constructor(e,i){this.ut=new dh,this.ct=[],this.dt=[],this.ft=!0,this.F=e,this.vt=i,this.ut.X(this.ct)}bt(e){const i=this.F.wt();i.length!==this.ct.length&&(this.dt=i.map(E$),this.ct=this.dt.map(s=>{const r=new x$;return r.J(s),r}),this.ut.X(this.ct)),this.ft=!0}gt(){return this.ft&&(this.Mt(),this.ft=!1),this.ut}Mt(){const e=this.vt.W().mode===2,i=this.F.wt(),s=this.vt.xt(),r=this.F.St();i.forEach((n,o)=>{var a;const l=this.dt[o],d=n.kt(s);if(e||d===null||!n.yt())return void(l.tt=null);const u=J(n.Ct());l.lt=d.Tt,l.ht=d.ht,l.et=d.Pt,l.it[0]._t=d._t,l.it[0].st=n.Dt().Rt(d._t,u.Ot),l.rt=(a=d.At)!==null&&a!==void 0?a:this.F.Vt(l.it[0].st/n.Dt().Bt()),l.it[0].ot=s,l.it[0].nt=r.It(s),l.tt=I$})}}class k$ extends Wi{constructor(e){super(),this.zt=e}Z({context:e,bitmapSize:i,horizontalPixelRatio:s,verticalPixelRatio:r}){if(this.zt===null)return;const n=this.zt.Lt.yt,o=this.zt.Et.yt;if(!n&&!o)return;const a=Math.round(this.zt.nt*s),l=Math.round(this.zt.st*r);e.lineCap="butt",n&&a>=0&&(e.lineWidth=Math.floor(this.zt.Lt.et*s),e.strokeStyle=this.zt.Lt.O,e.fillStyle=this.zt.Lt.O,On(e,this.zt.Lt.Nt),function(d,u,h,p){d.beginPath();const g=d.lineWidth%2?.5:0;d.moveTo(u+g,h),d.lineTo(u+g,p),d.stroke()}(e,a,0,i.height)),o&&l>=0&&(e.lineWidth=Math.floor(this.zt.Et.et*r),e.strokeStyle=this.zt.Et.O,e.fillStyle=this.zt.Et.O,On(e,this.zt.Et.Nt),ey(e,l,0,i.width))}}class C${constructor(e){this.ft=!0,this.Ft={Lt:{et:1,Nt:0,O:"",yt:!1},Et:{et:1,Nt:0,O:"",yt:!1},nt:0,st:0},this.Wt=new k$(this.Ft),this.jt=e}bt(){this.ft=!0}gt(){return this.ft&&(this.Mt(),this.ft=!1),this.Wt}Mt(){const e=this.jt.yt(),i=J(this.jt.Ht()),s=i.$t().W().crosshair,r=this.Ft;if(s.mode===2)return r.Et.yt=!1,void(r.Lt.yt=!1);r.Et.yt=e&&this.jt.Ut(i),r.Lt.yt=e&&this.jt.qt(),r.Et.et=s.horzLine.width,r.Et.Nt=s.horzLine.style,r.Et.O=s.horzLine.color,r.Lt.et=s.vertLine.width,r.Lt.Nt=s.vertLine.style,r.Lt.O=s.vertLine.color,r.nt=this.jt.Yt(),r.st=this.jt.Xt()}}function P$(t,e,i,s,r,n){t.fillRect(e+n,i,s-2*n,n),t.fillRect(e+n,i+r-n,s-2*n,n),t.fillRect(e,i,n,r),t.fillRect(e+s-n,i,n,r)}function rd(t,e,i,s,r,n){t.save(),t.globalCompositeOperation="copy",t.fillStyle=n,t.fillRect(e,i,s,r),t.restore()}function om(t,e){return t.map(i=>i===0?i:i+e)}function Ld(t,e,i,s,r,n){t.beginPath(),t.lineTo(e+s-n[1],i),n[1]!==0&&t.arcTo(e+s,i,e+s,i+n[1],n[1]),t.lineTo(e+s,i+r-n[2]),n[2]!==0&&t.arcTo(e+s,i+r,e+s-n[2],i+r,n[2]),t.lineTo(e+n[3],i+r),n[3]!==0&&t.arcTo(e,i+r,e,i+r-n[3],n[3]),t.lineTo(e,i+n[0]),n[0]!==0&&t.arcTo(e,i,e+n[0],i,n[0])}function am(t,e,i,s,r,n,o=0,a=[0,0,0,0],l=""){if(t.save(),!o||!l||l===n)return Ld(t,e,i,s,r,a),t.fillStyle=n,t.fill(),void t.restore();const d=o/2;n!=="transparent"&&(Ld(t,e+o,i+o,s-2*o,r-2*o,om(a,-o)),t.fillStyle=n,t.fill()),l!=="transparent"&&(Ld(t,e+d,i+d,s-o,r-o,om(a,-d)),t.lineWidth=o,t.strokeStyle=l,t.closePath(),t.stroke()),t.restore()}function iy(t,e,i,s,r,n,o){t.save(),t.globalCompositeOperation="copy";const a=t.createLinearGradient(0,0,0,r);a.addColorStop(0,n),a.addColorStop(1,o),t.fillStyle=a,t.fillRect(e,i,s,r),t.restore()}class lm{constructor(e,i){this.J(e,i)}J(e,i){this.zt=e,this.Kt=i}Bt(e,i){return this.zt.yt?e.P+e.L+e.V:0}K(e,i,s,r){if(!this.zt.yt||this.zt.Zt.length===0)return;const n=this.zt.O,o=this.Kt.t,a=e.useBitmapCoordinateSpace(l=>{const d=l.context;d.font=i.R;const u=this.Gt(l,i,s,r),h=u.Jt,p=(g,w)=>{u.Qt?am(d,h.ti,h.ii,h.ni,h.si,g,h.ei,[h.ht,0,0,h.ht],w):am(d,h.ri,h.ii,h.ni,h.si,g,h.ei,[0,h.ht,h.ht,0],w)};return p(o,"transparent"),this.zt.hi&&(d.fillStyle=n,d.fillRect(h.ri,h.li,h.ai-h.ri,h.oi)),p("transparent",o),this.zt._i&&(d.fillStyle=i.A,d.fillRect(u.Qt?h.ui-h.ei:0,h.ii,h.ei,h.ci-h.ii)),u});e.useMediaCoordinateSpace(({context:l})=>{const d=a.di;l.font=i.R,l.textAlign=a.Qt?"right":"left",l.textBaseline="middle",l.fillStyle=n,l.fillText(this.zt.Zt,d.fi,(d.ii+d.ci)/2+d.vi)})}Gt(e,i,s,r){var n;const{context:o,bitmapSize:a,mediaSize:l,horizontalPixelRatio:d,verticalPixelRatio:u}=e,h=this.zt.hi||!this.zt.pi?i.T:0,p=this.zt.mi?i.C:0,g=i.L+this.Kt.bi,w=i.V+this.Kt.wi,_=i.B,P=i.I,k=this.zt.Zt,R=i.P,$=s.gi(o,k),A=Math.ceil(s.Mi(o,k)),Z=R+g+w,le=i.C+_+P+A+h,te=Math.max(1,Math.floor(u));let ie=Math.round(Z*u);ie%2!=te%2&&(ie+=1);const ae=p>0?Math.max(1,Math.floor(p*d)):0,pe=Math.round(le*d),ke=Math.round(h*d),Oe=(n=this.Kt.xi)!==null&&n!==void 0?n:this.Kt.Si,Me=Math.round(Oe*u)-Math.floor(.5*u),Ze=Math.floor(Me+te/2-ie/2),st=Ze+ie,we=r==="right",ce=we?l.width-p:p,Se=we?a.width-ae:ae;let et,dt,ct;return we?(et=Se-pe,dt=Se-ke,ct=ce-h-_-p):(et=Se+pe,dt=Se+ke,ct=ce+h+_),{Qt:we,Jt:{ii:Ze,li:Me,ci:st,ni:pe,si:ie,ht:2*d,ei:ae,ti:et,ri:Se,ai:dt,oi:te,ui:a.width},di:{ii:Ze/u,ci:st/u,fi:ct,vi:$}}}}class od{constructor(e){this.ki={Si:0,t:"#000",wi:0,bi:0},this.yi={Zt:"",yt:!1,hi:!0,pi:!1,At:"",O:"#FFF",_i:!1,mi:!1},this.Ci={Zt:"",yt:!1,hi:!1,pi:!0,At:"",O:"#FFF",_i:!0,mi:!0},this.ft=!0,this.Ti=new(e||lm)(this.yi,this.ki),this.Pi=new(e||lm)(this.Ci,this.ki)}Zt(){return this.Ri(),this.yi.Zt}Si(){return this.Ri(),this.ki.Si}bt(){this.ft=!0}Bt(e,i=!1){return Math.max(this.Ti.Bt(e,i),this.Pi.Bt(e,i))}Di(){return this.ki.xi||0}Oi(e){this.ki.xi=e}Ai(){return this.Ri(),this.yi.yt||this.Ci.yt}Vi(){return this.Ri(),this.yi.yt}gt(e){return this.Ri(),this.yi.hi=this.yi.hi&&e.W().ticksVisible,this.Ci.hi=this.Ci.hi&&e.W().ticksVisible,this.Ti.J(this.yi,this.ki),this.Pi.J(this.Ci,this.ki),this.Ti}Bi(){return this.Ri(),this.Ti.J(this.yi,this.ki),this.Pi.J(this.Ci,this.ki),this.Pi}Ri(){this.ft&&(this.yi.hi=!0,this.Ci.hi=!1,this.Ii(this.yi,this.Ci,this.ki))}}class M$ extends od{constructor(e,i,s){super(),this.jt=e,this.zi=i,this.Li=s}Ii(e,i,s){if(e.yt=!1,this.jt.W().mode===2)return;const r=this.jt.W().horzLine;if(!r.labelVisible)return;const n=this.zi.Ct();if(!this.jt.yt()||this.zi.Ei()||n===null)return;const o=nd(r.labelBackgroundColor);s.t=o.t,e.O=o.i;const a=2/12*this.zi.P();s.bi=a,s.wi=a;const l=this.Li(this.zi);s.Si=l.Si,e.Zt=this.zi.Ni(l._t,n),e.yt=!0}}const A$=/[1-9]/g;class sy{constructor(){this.zt=null}J(e){this.zt=e}K(e,i){if(this.zt===null||this.zt.yt===!1||this.zt.Zt.length===0)return;const s=e.useMediaCoordinateSpace(({context:p})=>(p.font=i.R,Math.round(i.Fi.Mi(p,J(this.zt).Zt,A$))));if(s<=0)return;const r=i.Wi,n=s+2*r,o=n/2,a=this.zt.ji;let l=this.zt.Si,d=Math.floor(l-o)+.5;d<0?(l+=Math.abs(0-d),d=Math.floor(l-o)+.5):d+n>a&&(l-=Math.abs(a-(d+n)),d=Math.floor(l-o)+.5);const u=d+n,h=Math.ceil(0+i.C+i.T+i.L+i.P+i.V);e.useBitmapCoordinateSpace(({context:p,horizontalPixelRatio:g,verticalPixelRatio:w})=>{const _=J(this.zt);p.fillStyle=_.t;const P=Math.round(d*g),k=Math.round(0*w),R=Math.round(u*g),$=Math.round(h*w),A=Math.round(2*g);if(p.beginPath(),p.moveTo(P,k),p.lineTo(P,$-A),p.arcTo(P,$,P+A,$,A),p.lineTo(R-A,$),p.arcTo(R,$,R,$-A,A),p.lineTo(R,k),p.fill(),_.hi){const Z=Math.round(_.Si*g),le=k,te=Math.round((le+i.T)*w);p.fillStyle=_.O;const ie=Math.max(1,Math.floor(g)),ae=Math.floor(.5*g);p.fillRect(Z-ae,le,ie,te-le)}}),e.useMediaCoordinateSpace(({context:p})=>{const g=J(this.zt),w=0+i.C+i.T+i.L+i.P/2;p.font=i.R,p.textAlign="left",p.textBaseline="middle",p.fillStyle=g.O;const _=i.Fi.gi(p,"Apr0");p.translate(d+r,w+_),p.fillText(g.Zt,0,0)})}}class O${constructor(e,i,s){this.ft=!0,this.Wt=new sy,this.Ft={yt:!1,t:"#4c525e",O:"white",Zt:"",ji:0,Si:NaN,hi:!0},this.vt=e,this.Hi=i,this.Li=s}bt(){this.ft=!0}gt(){return this.ft&&(this.Mt(),this.ft=!1),this.Wt.J(this.Ft),this.Wt}Mt(){const e=this.Ft;if(e.yt=!1,this.vt.W().mode===2)return;const i=this.vt.W().vertLine;if(!i.labelVisible)return;const s=this.Hi.St();if(s.Ei())return;e.ji=s.ji();const r=this.Li();if(r===null)return;e.Si=r.Si;const n=s.$i(this.vt.xt());e.Zt=s.Ui(J(n)),e.yt=!0;const o=nd(i.labelBackgroundColor);e.t=o.t,e.O=o.i,e.hi=s.W().ticksVisible}}class ch{constructor(){this.qi=null,this.Yi=0}Xi(){return this.Yi}Ki(e){this.Yi=e}Dt(){return this.qi}Zi(e){this.qi=e}Gi(e){return[]}Ji(){return[]}yt(){return!0}}var dm;(function(t){t[t.Normal=0]="Normal",t[t.Magnet=1]="Magnet",t[t.Hidden=2]="Hidden"})(dm||(dm={}));class R$ extends ch{constructor(e,i){super(),this.Qi=null,this.tn=NaN,this.nn=0,this.sn=!0,this.en=new Map,this.rn=!1,this.hn=NaN,this.ln=NaN,this.an=NaN,this.on=NaN,this.Hi=e,this._n=i,this.un=new D$(e,this),this.cn=((r,n)=>o=>{const a=n(),l=r();if(o===J(this.Qi).dn())return{_t:l,Si:a};{const d=J(o.Ct());return{_t:o.fn(a,d),Si:a}}})(()=>this.tn,()=>this.ln);const s=((r,n)=>()=>{const o=this.Hi.St().vn(r()),a=n();return o&&Number.isFinite(a)?{ot:o,Si:a}:null})(()=>this.nn,()=>this.Yt());this.pn=new O$(this,e,s),this.mn=new C$(this)}W(){return this._n}bn(e,i){this.an=e,this.on=i}wn(){this.an=NaN,this.on=NaN}gn(){return this.an}Mn(){return this.on}xn(e,i,s){this.rn||(this.rn=!0),this.sn=!0,this.Sn(e,i,s)}xt(){return this.nn}Yt(){return this.hn}Xt(){return this.ln}yt(){return this.sn}kn(){this.sn=!1,this.yn(),this.tn=NaN,this.hn=NaN,this.ln=NaN,this.Qi=null,this.wn()}Cn(e){return this.Qi!==null?[this.mn,this.un]:[]}Ut(e){return e===this.Qi&&this._n.horzLine.visible}qt(){return this._n.vertLine.visible}Tn(e,i){this.sn&&this.Qi===e||this.en.clear();const s=[];return this.Qi===e&&s.push(this.Pn(this.en,i,this.cn)),s}Ji(){return this.sn?[this.pn]:[]}Ht(){return this.Qi}Rn(){this.mn.bt(),this.en.forEach(e=>e.bt()),this.pn.bt(),this.un.bt()}Dn(e){return e&&!e.dn().Ei()?e.dn():null}Sn(e,i,s){this.On(e,i,s)&&this.Rn()}On(e,i,s){const r=this.hn,n=this.ln,o=this.tn,a=this.nn,l=this.Qi,d=this.Dn(s);this.nn=e,this.hn=isNaN(e)?NaN:this.Hi.St().It(e),this.Qi=s;const u=d!==null?d.Ct():null;return d!==null&&u!==null?(this.tn=i,this.ln=d.Rt(i,u)):(this.tn=NaN,this.ln=NaN),r!==this.hn||n!==this.ln||a!==this.nn||o!==this.tn||l!==this.Qi}yn(){const e=this.Hi.wt().map(s=>s.Vn().An()).filter(S$),i=e.length===0?null:Math.max(...e);this.nn=i!==null?i:NaN}Pn(e,i,s){let r=e.get(i);return r===void 0&&(r=new M$(this,i,s),e.set(i,r)),r}}function ad(t){return t==="left"||t==="right"}class xt{constructor(e){this.Bn=new Map,this.In=[],this.zn=e}Ln(e,i){const s=function(r,n){return r===void 0?n:{En:Math.max(r.En,n.En),Nn:r.Nn||n.Nn}}(this.Bn.get(e),i);this.Bn.set(e,s)}Fn(){return this.zn}Wn(e){const i=this.Bn.get(e);return i===void 0?{En:this.zn}:{En:Math.max(this.zn,i.En),Nn:i.Nn}}jn(){this.Hn(),this.In=[{$n:0}]}Un(e){this.Hn(),this.In=[{$n:1,Ot:e}]}qn(e){this.Yn(),this.In.push({$n:5,Ot:e})}Hn(){this.Yn(),this.In.push({$n:6})}Xn(){this.Hn(),this.In=[{$n:4}]}Kn(e){this.Hn(),this.In.push({$n:2,Ot:e})}Zn(e){this.Hn(),this.In.push({$n:3,Ot:e})}Gn(){return this.In}Jn(e){for(const i of e.In)this.Qn(i);this.zn=Math.max(this.zn,e.zn),e.Bn.forEach((i,s)=>{this.Ln(s,i)})}static ts(){return new xt(2)}static ns(){return new xt(3)}Qn(e){switch(e.$n){case 0:this.jn();break;case 1:this.Un(e.Ot);break;case 2:this.Kn(e.Ot);break;case 3:this.Zn(e.Ot);break;case 4:this.Xn();break;case 5:this.qn(e.Ot);break;case 6:this.Yn()}}Yn(){const e=this.In.findIndex(i=>i.$n===5);e!==-1&&this.In.splice(e,1)}}const cm=".";function Ss(t,e){if(!Ji(t))return"n/a";if(!Vo(e))throw new TypeError("invalid length");if(e<0||e>16)throw new TypeError("invalid length");return e===0?t.toString():("0000000000000000"+t.toString()).slice(-e)}class ld{constructor(e,i){if(i||(i=1),Ji(e)&&Vo(e)||(e=100),e<0)throw new TypeError("invalid base");this.zi=e,this.ss=i,this.es()}format(e){const i=e<0?"−":"";return e=Math.abs(e),i+this.rs(e)}es(){if(this.hs=0,this.zi>0&&this.ss>0){let e=this.zi;for(;e>1;)e/=10,this.hs++}}rs(e){const i=this.zi/this.ss;let s=Math.floor(e),r="";const n=this.hs!==void 0?this.hs:NaN;if(i>1){let o=+(Math.round(e*i)-s*i).toFixed(this.hs);o>=i&&(o-=i,s+=1),r=cm+Ss(+o.toFixed(this.hs)*this.ss,n)}else s=Math.round(s*i)/i,n>0&&(r=cm+Ss(0,n));return s.toFixed(0)+r}}class ny extends ld{constructor(e=100){super(e)}format(e){return`${super.format(e)}%`}}class $${constructor(e){this.ls=e}format(e){let i="";return e<0&&(i="-",e=-e),e<995?i+this.os(e):e<999995?i+this.os(e/1e3)+"K":e<999999995?(e=1e3*Math.round(e/1e3),i+this.os(e/1e6)+"M"):(e=1e6*Math.round(e/1e6),i+this.os(e/1e9)+"B")}os(e){let i;const s=Math.pow(10,this.ls);return i=(e=Math.round(e*s)/s)>=1e-15&&e<1?e.toFixed(this.ls).replace(/\.?0+$/,""):String(e),i.replace(/(\.[1-9]*)0+$/,(r,n)=>n)}}function ry(t,e,i,s,r,n,o){if(e.length===0||s.from>=e.length||s.to<=0)return;const{context:a,horizontalPixelRatio:l,verticalPixelRatio:d}=t,u=e[s.from];let h=n(t,u),p=u;if(s.to-s.from<2){const g=r/2;a.beginPath();const w={nt:u.nt-g,st:u.st},_={nt:u.nt+g,st:u.st};a.moveTo(w.nt*l,w.st*d),a.lineTo(_.nt*l,_.st*d),o(t,h,w,_)}else{const g=(_,P)=>{o(t,h,p,P),a.beginPath(),h=_,p=P};let w=p;a.beginPath(),a.moveTo(u.nt*l,u.st*d);for(let _=s.from+1;_<s.to;++_){w=e[_];const P=n(t,w);switch(i){case 0:a.lineTo(w.nt*l,w.st*d);break;case 1:a.lineTo(w.nt*l,e[_-1].st*d),P!==h&&(g(P,w),a.lineTo(w.nt*l,e[_-1].st*d)),a.lineTo(w.nt*l,w.st*d);break;case 2:{const[k,R]=N$(e,_-1,_);a.bezierCurveTo(k.nt*l,k.st*d,R.nt*l,R.st*d,w.nt*l,w.st*d);break}}i!==1&&P!==h&&(g(P,w),a.moveTo(w.nt*l,w.st*d))}(p!==w||p===w&&i===1)&&o(t,h,p,w)}}const um=6;function Vd(t,e){return{nt:t.nt-e.nt,st:t.st-e.st}}function hm(t,e){return{nt:t.nt/e,st:t.st/e}}function N$(t,e,i){const s=Math.max(0,e-1),r=Math.min(t.length-1,i+1);var n,o;return[(n=t[e],o=hm(Vd(t[i],t[s]),um),{nt:n.nt+o.nt,st:n.st+o.st}),Vd(t[i],hm(Vd(t[r],t[e]),um))]}function L$(t,e,i,s,r){const{context:n,horizontalPixelRatio:o,verticalPixelRatio:a}=e;n.lineTo(r.nt*o,t*a),n.lineTo(s.nt*o,t*a),n.closePath(),n.fillStyle=i,n.fill()}class oy extends Wi{constructor(){super(...arguments),this.G=null}J(e){this.G=e}Z(e){var i;if(this.G===null)return;const{it:s,tt:r,_s:n,et:o,Nt:a,us:l}=this.G,d=(i=this.G.cs)!==null&&i!==void 0?i:this.G.ds?0:e.mediaSize.height;if(r===null)return;const u=e.context;u.lineCap="butt",u.lineJoin="round",u.lineWidth=o,On(u,a),u.lineWidth=1,ry(e,s,l,r,n,this.fs.bind(this),L$.bind(null,d))}}function Yc(t,e,i){return Math.min(Math.max(t,e),i)}function Ta(t,e,i){return e-t<=i}function ay(t){const e=Math.ceil(t);return e%2==0?e-1:e}class uh{vs(e,i){const s=this.ps,{bs:r,ws:n,gs:o,Ms:a,xs:l,cs:d}=i;if(this.Ss===void 0||s===void 0||s.bs!==r||s.ws!==n||s.gs!==o||s.Ms!==a||s.cs!==d||s.xs!==l){const u=e.context.createLinearGradient(0,0,0,l);if(u.addColorStop(0,r),d!=null){const h=Yc(d*e.verticalPixelRatio/l,0,1);u.addColorStop(h,n),u.addColorStop(h,o)}u.addColorStop(1,a),this.Ss=u,this.ps=i}return this.Ss}}class V$ extends oy{constructor(){super(...arguments),this.ks=new uh}fs(e,i){return this.ks.vs(e,{bs:i.ys,ws:"",gs:"",Ms:i.Cs,xs:e.bitmapSize.height})}}function W$(t,e){const i=t.context;i.strokeStyle=e,i.stroke()}class ly extends Wi{constructor(){super(...arguments),this.G=null}J(e){this.G=e}Z(e){if(this.G===null)return;const{it:i,tt:s,_s:r,us:n,et:o,Nt:a,Ts:l}=this.G;if(s===null)return;const d=e.context;d.lineCap="butt",d.lineWidth=o*e.verticalPixelRatio,On(d,a),d.lineJoin="round";const u=this.Ps.bind(this);n!==void 0&&ry(e,i,n,s,r,u,W$),l&&function(h,p,g,w,_){const{horizontalPixelRatio:P,verticalPixelRatio:k,context:R}=h;let $=null;const A=Math.max(1,Math.floor(P))%2/2,Z=g*k+A;for(let le=w.to-1;le>=w.from;--le){const te=p[le];if(te){const ie=_(h,te);ie!==$&&(R.beginPath(),$!==null&&R.fill(),R.fillStyle=ie,$=ie);const ae=Math.round(te.nt*P)+A,pe=te.st*k;R.moveTo(ae,pe),R.arc(ae,pe,Z,0,2*Math.PI)}}R.fill()}(e,i,l,s,u)}}class dy extends ly{Ps(e,i){return i.lt}}function cy(t,e,i,s,r=0,n=e.length){let o=n-r;for(;0<o;){const a=o>>1,l=r+a;s(e[l],i)===t?(r=l+1,o-=a+1):o=a}return r}const da=cy.bind(null,!0),uy=cy.bind(null,!1);function z$(t,e){return t.ot<e}function F$(t,e){return e<t.ot}function hy(t,e,i){const s=e.Rs(),r=e.ui(),n=da(t,s,z$),o=uy(t,r,F$);if(!i)return{from:n,to:o};let a=n,l=o;return n>0&&n<t.length&&t[n].ot>=s&&(a=n-1),o>0&&o<t.length&&t[o-1].ot<=r&&(l=o+1),{from:a,to:l}}class hh{constructor(e,i,s){this.Ds=!0,this.Os=!0,this.As=!0,this.Vs=[],this.Bs=null,this.Is=e,this.zs=i,this.Ls=s}bt(e){this.Ds=!0,e==="data"&&(this.Os=!0),e==="options"&&(this.As=!0)}gt(){return this.Is.yt()?(this.Es(),this.Bs===null?null:this.Ns):null}Fs(){this.Vs=this.Vs.map(e=>Object.assign(Object.assign({},e),this.Is.js().Ws(e.ot)))}Hs(){this.Bs=null}Es(){this.Os&&(this.$s(),this.Os=!1),this.As&&(this.Fs(),this.As=!1),this.Ds&&(this.Us(),this.Ds=!1)}Us(){const e=this.Is.Dt(),i=this.zs.St();if(this.Hs(),i.Ei()||e.Ei())return;const s=i.qs();if(s===null||this.Is.Vn().Ys()===0)return;const r=this.Is.Ct();r!==null&&(this.Bs=hy(this.Vs,s,this.Ls),this.Xs(e,i,r.Ot),this.Ks())}}class dd extends hh{constructor(e,i){super(e,i,!0)}Xs(e,i,s){i.Zs(this.Vs,Wo(this.Bs)),e.Gs(this.Vs,s,Wo(this.Bs))}Js(e,i){return{ot:e,_t:i,nt:NaN,st:NaN}}$s(){const e=this.Is.js();this.Vs=this.Is.Vn().Qs().map(i=>{const s=i.Ot[3];return this.te(i.ie,s,e)})}}class j$ extends dd{constructor(e,i){super(e,i),this.Ns=new dh,this.ne=new V$,this.se=new dy,this.Ns.X([this.ne,this.se])}te(e,i,s){return Object.assign(Object.assign({},this.Js(e,i)),s.Ws(e))}Ks(){const e=this.Is.W();this.ne.J({us:e.lineType,it:this.Vs,Nt:e.lineStyle,et:e.lineWidth,cs:null,ds:e.invertFilledArea,tt:this.Bs,_s:this.zs.St().ee()}),this.se.J({us:e.lineVisible?e.lineType:void 0,it:this.Vs,Nt:e.lineStyle,et:e.lineWidth,tt:this.Bs,_s:this.zs.St().ee(),Ts:e.pointMarkersVisible?e.pointMarkersRadius||e.lineWidth/2+2:void 0})}}class B$ extends Wi{constructor(){super(...arguments),this.zt=null,this.re=0,this.he=0}J(e){this.zt=e}Z({context:e,horizontalPixelRatio:i,verticalPixelRatio:s}){if(this.zt===null||this.zt.Vn.length===0||this.zt.tt===null)return;this.re=this.le(i),this.re>=2&&Math.max(1,Math.floor(i))%2!=this.re%2&&this.re--,this.he=this.zt.ae?Math.min(this.re,Math.floor(i)):this.re;let r=null;const n=this.he<=this.re&&this.zt.ee>=Math.floor(1.5*i);for(let o=this.zt.tt.from;o<this.zt.tt.to;++o){const a=this.zt.Vn[o];r!==a.oe&&(e.fillStyle=a.oe,r=a.oe);const l=Math.floor(.5*this.he),d=Math.round(a.nt*i),u=d-l,h=this.he,p=u+h-1,g=Math.min(a._e,a.ue),w=Math.max(a._e,a.ue),_=Math.round(g*s)-l,P=Math.round(w*s)+l,k=Math.max(P-_,this.he);e.fillRect(u,_,h,k);const R=Math.ceil(1.5*this.re);if(n){if(this.zt.ce){const le=d-R;let te=Math.max(_,Math.round(a.de*s)-l),ie=te+h-1;ie>_+k-1&&(ie=_+k-1,te=ie-h+1),e.fillRect(le,te,u-le,ie-te+1)}const $=d+R;let A=Math.max(_,Math.round(a.fe*s)-l),Z=A+h-1;Z>_+k-1&&(Z=_+k-1,A=Z-h+1),e.fillRect(p+1,A,$-p,Z-A+1)}}}le(e){const i=Math.floor(e);return Math.max(i,Math.floor(function(s,r){return Math.floor(.3*s*r)}(J(this.zt).ee,e)))}}class fy extends hh{constructor(e,i){super(e,i,!1)}Xs(e,i,s){i.Zs(this.Vs,Wo(this.Bs)),e.ve(this.Vs,s,Wo(this.Bs))}pe(e,i,s){return{ot:e,me:i.Ot[0],be:i.Ot[1],we:i.Ot[2],ge:i.Ot[3],nt:NaN,de:NaN,_e:NaN,ue:NaN,fe:NaN}}$s(){const e=this.Is.js();this.Vs=this.Is.Vn().Qs().map(i=>this.te(i.ie,i,e))}}class H$ extends fy{constructor(){super(...arguments),this.Ns=new B$}te(e,i,s){return Object.assign(Object.assign({},this.pe(e,i,s)),s.Ws(e))}Ks(){const e=this.Is.W();this.Ns.J({Vn:this.Vs,ee:this.zs.St().ee(),ce:e.openVisible,ae:e.thinBars,tt:this.Bs})}}class U$ extends oy{constructor(){super(...arguments),this.ks=new uh}fs(e,i){const s=this.G;return this.ks.vs(e,{bs:i.Me,ws:i.xe,gs:i.Se,Ms:i.ke,xs:e.bitmapSize.height,cs:s.cs})}}class Y$ extends ly{constructor(){super(...arguments),this.ye=new uh}Ps(e,i){const s=this.G;return this.ye.vs(e,{bs:i.Ce,ws:i.Ce,gs:i.Te,Ms:i.Te,xs:e.bitmapSize.height,cs:s.cs})}}class G$ extends dd{constructor(e,i){super(e,i),this.Ns=new dh,this.Pe=new U$,this.Re=new Y$,this.Ns.X([this.Pe,this.Re])}te(e,i,s){return Object.assign(Object.assign({},this.Js(e,i)),s.Ws(e))}Ks(){const e=this.Is.Ct();if(e===null)return;const i=this.Is.W(),s=this.Is.Dt().Rt(i.baseValue.price,e.Ot),r=this.zs.St().ee();this.Pe.J({it:this.Vs,et:i.lineWidth,Nt:i.lineStyle,us:i.lineType,cs:s,ds:!1,tt:this.Bs,_s:r}),this.Re.J({it:this.Vs,et:i.lineWidth,Nt:i.lineStyle,us:i.lineVisible?i.lineType:void 0,Ts:i.pointMarkersVisible?i.pointMarkersRadius||i.lineWidth/2+2:void 0,cs:s,tt:this.Bs,_s:r})}}class K$ extends Wi{constructor(){super(...arguments),this.zt=null,this.re=0}J(e){this.zt=e}Z(e){if(this.zt===null||this.zt.Vn.length===0||this.zt.tt===null)return;const{horizontalPixelRatio:i}=e;this.re=function(n,o){if(n>=2.5&&n<=4)return Math.floor(3*o);const a=1-.2*Math.atan(Math.max(4,n)-4)/(.5*Math.PI),l=Math.floor(n*a*o),d=Math.floor(n*o),u=Math.min(l,d);return Math.max(Math.floor(o),u)}(this.zt.ee,i),this.re>=2&&Math.floor(i)%2!=this.re%2&&this.re--;const s=this.zt.Vn;this.zt.De&&this.Oe(e,s,this.zt.tt),this.zt._i&&this.Ae(e,s,this.zt.tt);const r=this.Ve(i);(!this.zt._i||this.re>2*r)&&this.Be(e,s,this.zt.tt)}Oe(e,i,s){if(this.zt===null)return;const{context:r,horizontalPixelRatio:n,verticalPixelRatio:o}=e;let a="",l=Math.min(Math.floor(n),Math.floor(this.zt.ee*n));l=Math.max(Math.floor(n),Math.min(l,this.re));const d=Math.floor(.5*l);let u=null;for(let h=s.from;h<s.to;h++){const p=i[h];p.Ie!==a&&(r.fillStyle=p.Ie,a=p.Ie);const g=Math.round(Math.min(p.de,p.fe)*o),w=Math.round(Math.max(p.de,p.fe)*o),_=Math.round(p._e*o),P=Math.round(p.ue*o);let k=Math.round(n*p.nt)-d;const R=k+l-1;u!==null&&(k=Math.max(u+1,k),k=Math.min(k,R));const $=R-k+1;r.fillRect(k,_,$,g-_),r.fillRect(k,w+1,$,P-w),u=R}}Ve(e){let i=Math.floor(1*e);this.re<=2*i&&(i=Math.floor(.5*(this.re-1)));const s=Math.max(Math.floor(e),i);return this.re<=2*s?Math.max(Math.floor(e),Math.floor(1*e)):s}Ae(e,i,s){if(this.zt===null)return;const{context:r,horizontalPixelRatio:n,verticalPixelRatio:o}=e;let a="";const l=this.Ve(n);let d=null;for(let u=s.from;u<s.to;u++){const h=i[u];h.ze!==a&&(r.fillStyle=h.ze,a=h.ze);let p=Math.round(h.nt*n)-Math.floor(.5*this.re);const g=p+this.re-1,w=Math.round(Math.min(h.de,h.fe)*o),_=Math.round(Math.max(h.de,h.fe)*o);if(d!==null&&(p=Math.max(d+1,p),p=Math.min(p,g)),this.zt.ee*n>2*l)P$(r,p,w,g-p+1,_-w+1,l);else{const P=g-p+1;r.fillRect(p,w,P,_-w+1)}d=g}}Be(e,i,s){if(this.zt===null)return;const{context:r,horizontalPixelRatio:n,verticalPixelRatio:o}=e;let a="";const l=this.Ve(n);for(let d=s.from;d<s.to;d++){const u=i[d];let h=Math.round(Math.min(u.de,u.fe)*o),p=Math.round(Math.max(u.de,u.fe)*o),g=Math.round(u.nt*n)-Math.floor(.5*this.re),w=g+this.re-1;if(u.oe!==a){const _=u.oe;r.fillStyle=_,a=_}this.zt._i&&(g+=l,h+=l,w-=l,p-=l),h>p||r.fillRect(g,h,w-g+1,p-h+1)}}}class q$ extends fy{constructor(){super(...arguments),this.Ns=new K$}te(e,i,s){return Object.assign(Object.assign({},this.pe(e,i,s)),s.Ws(e))}Ks(){const e=this.Is.W();this.Ns.J({Vn:this.Vs,ee:this.zs.St().ee(),De:e.wickVisible,_i:e.borderVisible,tt:this.Bs})}}class J${constructor(e,i){this.Le=e,this.zi=i}K(e,i,s){this.Le.draw(e,this.zi,i,s)}}class Wd extends hh{constructor(e,i,s){super(e,i,!1),this.mn=s,this.Ns=new J$(this.mn.renderer(),r=>{const n=e.Ct();return n===null?null:e.Dt().Rt(r,n.Ot)})}Ee(e){return this.mn.priceValueBuilder(e)}Ne(e){return this.mn.isWhitespace(e)}$s(){const e=this.Is.js();this.Vs=this.Is.Vn().Qs().map(i=>Object.assign(Object.assign({ot:i.ie,nt:NaN},e.Ws(i.ie)),{Fe:i.We}))}Xs(e,i){i.Zs(this.Vs,Wo(this.Bs))}Ks(){this.mn.update({bars:this.Vs.map(Q$),barSpacing:this.zs.St().ee(),visibleRange:this.Bs},this.Is.W())}}function Q$(t){return{x:t.nt,time:t.ot,originalData:t.Fe,barColor:t.oe}}class Z$ extends Wi{constructor(){super(...arguments),this.zt=null,this.je=[]}J(e){this.zt=e,this.je=[]}Z({context:e,horizontalPixelRatio:i,verticalPixelRatio:s}){if(this.zt===null||this.zt.it.length===0||this.zt.tt===null)return;this.je.length||this.He(i);const r=Math.max(1,Math.floor(s)),n=Math.round(this.zt.$e*s)-Math.floor(r/2),o=n+r;for(let a=this.zt.tt.from;a<this.zt.tt.to;a++){const l=this.zt.it[a],d=this.je[a-this.zt.tt.from],u=Math.round(l.st*s);let h,p;e.fillStyle=l.oe,u<=n?(h=u,p=o):(h=n,p=u-Math.floor(r/2)+r),e.fillRect(d.Rs,h,d.ui-d.Rs+1,p-h)}}He(e){if(this.zt===null||this.zt.it.length===0||this.zt.tt===null)return void(this.je=[]);const i=Math.ceil(this.zt.ee*e)<=1?0:Math.max(1,Math.floor(e)),s=Math.round(this.zt.ee*e)-i;this.je=new Array(this.zt.tt.to-this.zt.tt.from);for(let n=this.zt.tt.from;n<this.zt.tt.to;n++){const o=this.zt.it[n],a=Math.round(o.nt*e);let l,d;if(s%2){const u=(s-1)/2;l=a-u,d=a+u}else{const u=s/2;l=a-u,d=a+u-1}this.je[n-this.zt.tt.from]={Rs:l,ui:d,Ue:a,qe:o.nt*e,ot:o.ot}}for(let n=this.zt.tt.from+1;n<this.zt.tt.to;n++){const o=this.je[n-this.zt.tt.from],a=this.je[n-this.zt.tt.from-1];o.ot===a.ot+1&&o.Rs-a.ui!==i+1&&(a.Ue>a.qe?a.ui=o.Rs-i-1:o.Rs=a.ui+i+1)}let r=Math.ceil(this.zt.ee*e);for(let n=this.zt.tt.from;n<this.zt.tt.to;n++){const o=this.je[n-this.zt.tt.from];o.ui<o.Rs&&(o.ui=o.Rs);const a=o.ui-o.Rs+1;r=Math.min(a,r)}if(i>0&&r<4)for(let n=this.zt.tt.from;n<this.zt.tt.to;n++){const o=this.je[n-this.zt.tt.from];o.ui-o.Rs+1>r&&(o.Ue>o.qe?o.ui-=1:o.Rs+=1)}}}class X$ extends dd{constructor(){super(...arguments),this.Ns=new Z$}te(e,i,s){return Object.assign(Object.assign({},this.Js(e,i)),s.Ws(e))}Ks(){const e={it:this.Vs,ee:this.zs.St().ee(),tt:this.Bs,$e:this.Is.Dt().Rt(this.Is.W().base,J(this.Is.Ct()).Ot)};this.Ns.J(e)}}class e2 extends dd{constructor(){super(...arguments),this.Ns=new dy}te(e,i,s){return Object.assign(Object.assign({},this.Js(e,i)),s.Ws(e))}Ks(){const e=this.Is.W(),i={it:this.Vs,Nt:e.lineStyle,us:e.lineVisible?e.lineType:void 0,et:e.lineWidth,Ts:e.pointMarkersVisible?e.pointMarkersRadius||e.lineWidth/2+2:void 0,tt:this.Bs,_s:this.zs.St().ee()};this.Ns.J(i)}}const t2=/[2-9]/g;class zo{constructor(e=50){this.Ye=0,this.Xe=1,this.Ke=1,this.Ze={},this.Ge=new Map,this.Je=e}Qe(){this.Ye=0,this.Ge.clear(),this.Xe=1,this.Ke=1,this.Ze={}}Mi(e,i,s){return this.tr(e,i,s).width}gi(e,i,s){const r=this.tr(e,i,s);return((r.actualBoundingBoxAscent||0)-(r.actualBoundingBoxDescent||0))/2}tr(e,i,s){const r=s||t2,n=String(i).replace(r,"0");if(this.Ge.has(n))return jt(this.Ge.get(n)).ir;if(this.Ye===this.Je){const a=this.Ze[this.Ke];delete this.Ze[this.Ke],this.Ge.delete(a),this.Ke++,this.Ye--}e.save(),e.textBaseline="middle";const o=e.measureText(n);return e.restore(),o.width===0&&i.length||(this.Ge.set(n,{ir:o,nr:this.Xe}),this.Ze[this.Xe]=n,this.Ye++,this.Xe++),o}}class i2{constructor(e){this.sr=null,this.k=null,this.er="right",this.rr=e}hr(e,i,s){this.sr=e,this.k=i,this.er=s}K(e){this.k!==null&&this.sr!==null&&this.sr.K(e,this.k,this.rr,this.er)}}class my{constructor(e,i,s){this.lr=e,this.rr=new zo(50),this.ar=i,this.F=s,this.j=-1,this.Wt=new i2(this.rr)}gt(){const e=this.F._r(this.ar);if(e===null)return null;const i=e.ur(this.ar)?e.cr():this.ar.Dt();if(i===null)return null;const s=e.dr(i);if(s==="overlay")return null;const r=this.F.vr();return r.P!==this.j&&(this.j=r.P,this.rr.Qe()),this.Wt.hr(this.lr.Bi(),r,s),this.Wt}}class s2 extends Wi{constructor(){super(...arguments),this.zt=null}J(e){this.zt=e}pr(e,i){var s;if(!(!((s=this.zt)===null||s===void 0)&&s.yt))return null;const{st:r,et:n,mr:o}=this.zt;return i>=r-n-7&&i<=r+n+7?{br:this.zt,mr:o}:null}Z({context:e,bitmapSize:i,horizontalPixelRatio:s,verticalPixelRatio:r}){if(this.zt===null||this.zt.yt===!1)return;const n=Math.round(this.zt.st*r);n<0||n>i.height||(e.lineCap="butt",e.strokeStyle=this.zt.O,e.lineWidth=Math.floor(this.zt.et*s),On(e,this.zt.Nt),ey(e,n,0,i.width))}}class fh{constructor(e){this.wr={st:0,O:"rgba(0, 0, 0, 0)",et:1,Nt:0,yt:!1},this.gr=new s2,this.ft=!0,this.Is=e,this.zs=e.$t(),this.gr.J(this.wr)}bt(){this.ft=!0}gt(){return this.Is.yt()?(this.ft&&(this.Mr(),this.ft=!1),this.gr):null}}class n2 extends fh{constructor(e){super(e)}Mr(){this.wr.yt=!1;const e=this.Is.Dt(),i=e.Sr().Sr;if(i!==2&&i!==3)return;const s=this.Is.W();if(!s.baseLineVisible||!this.Is.yt())return;const r=this.Is.Ct();r!==null&&(this.wr.yt=!0,this.wr.st=e.Rt(r.Ot,r.Ot),this.wr.O=s.baseLineColor,this.wr.et=s.baseLineWidth,this.wr.Nt=s.baseLineStyle)}}class r2 extends Wi{constructor(){super(...arguments),this.zt=null}J(e){this.zt=e}We(){return this.zt}Z({context:e,horizontalPixelRatio:i,verticalPixelRatio:s}){const r=this.zt;if(r===null)return;const n=Math.max(1,Math.floor(i)),o=n%2/2,a=Math.round(r.qe.x*i)+o,l=r.qe.y*s;e.fillStyle=r.kr,e.beginPath();const d=Math.max(2,1.5*r.yr)*i;e.arc(a,l,d,0,2*Math.PI,!1),e.fill(),e.fillStyle=r.Cr,e.beginPath(),e.arc(a,l,r.ht*i,0,2*Math.PI,!1),e.fill(),e.lineWidth=n,e.strokeStyle=r.Tr,e.beginPath(),e.arc(a,l,r.ht*i+n/2,0,2*Math.PI,!1),e.stroke()}}const o2=[{Pr:0,Rr:.25,Dr:4,Or:10,Ar:.25,Vr:0,Br:.4,Ir:.8},{Pr:.25,Rr:.525,Dr:10,Or:14,Ar:0,Vr:0,Br:.8,Ir:0},{Pr:.525,Rr:1,Dr:14,Or:14,Ar:0,Vr:0,Br:0,Ir:0}];function fm(t,e,i,s){return function(r,n){if(r==="transparent")return r;const o=_l(r),a=o[3];return`rgba(${o[0]}, ${o[1]}, ${o[2]}, ${n*a})`}(t,i+(s-i)*e)}function mm(t,e){const i=t%2600/2600;let s;for(const l of o2)if(i>=l.Pr&&i<=l.Rr){s=l;break}en(s!==void 0,"Last price animation internal logic error");const r=(i-s.Pr)/(s.Rr-s.Pr);return{Cr:fm(e,r,s.Ar,s.Vr),Tr:fm(e,r,s.Br,s.Ir),ht:(n=r,o=s.Dr,a=s.Or,o+(a-o)*n)};var n,o,a}class a2{constructor(e){this.Wt=new r2,this.ft=!0,this.zr=!0,this.Lr=performance.now(),this.Er=this.Lr-1,this.Nr=e}Fr(){this.Er=this.Lr-1,this.bt()}Wr(){if(this.bt(),this.Nr.W().lastPriceAnimation===2){const e=performance.now(),i=this.Er-e;if(i>0)return void(i<650&&(this.Er+=2600));this.Lr=e,this.Er=e+2600}}bt(){this.ft=!0}jr(){this.zr=!0}yt(){return this.Nr.W().lastPriceAnimation!==0}Hr(){switch(this.Nr.W().lastPriceAnimation){case 0:return!1;case 1:return!0;case 2:return performance.now()<=this.Er}}gt(){return this.ft?(this.Mt(),this.ft=!1,this.zr=!1):this.zr&&(this.$r(),this.zr=!1),this.Wt}Mt(){this.Wt.J(null);const e=this.Nr.$t().St(),i=e.qs(),s=this.Nr.Ct();if(i===null||s===null)return;const r=this.Nr.Ur(!0);if(r.qr||!i.Yr(r.ie))return;const n={x:e.It(r.ie),y:this.Nr.Dt().Rt(r._t,s.Ot)},o=r.O,a=this.Nr.W().lineWidth,l=mm(this.Xr(),o);this.Wt.J({kr:o,yr:a,Cr:l.Cr,Tr:l.Tr,ht:l.ht,qe:n})}$r(){const e=this.Wt.We();if(e!==null){const i=mm(this.Xr(),e.kr);e.Cr=i.Cr,e.Tr=i.Tr,e.ht=i.ht}}Xr(){return this.Hr()?performance.now()-this.Lr:2599}}function yo(t,e){return ay(Math.min(Math.max(t,12),30)*e)}function Fo(t,e){switch(t){case"arrowDown":case"arrowUp":return yo(e,1);case"circle":return yo(e,.8);case"square":return yo(e,.7)}}function py(t){return function(e){const i=Math.ceil(e);return i%2!=0?i-1:i}(yo(t,1))}function pm(t){return Math.max(yo(t,.1),3)}function gy(t,e,i,s,r){const n=Fo("square",i),o=(n-1)/2,a=t-o,l=e-o;return s>=a&&s<=a+n&&r>=l&&r<=l+n}function gm(t,e,i,s){const r=(Fo("arrowUp",s)-1)/2*i.Kr,n=(ay(s/2)-1)/2*i.Kr;e.beginPath(),t?(e.moveTo(i.nt-r,i.st),e.lineTo(i.nt,i.st-r),e.lineTo(i.nt+r,i.st),e.lineTo(i.nt+n,i.st),e.lineTo(i.nt+n,i.st+r),e.lineTo(i.nt-n,i.st+r),e.lineTo(i.nt-n,i.st)):(e.moveTo(i.nt-r,i.st),e.lineTo(i.nt,i.st+r),e.lineTo(i.nt+r,i.st),e.lineTo(i.nt+n,i.st),e.lineTo(i.nt+n,i.st-r),e.lineTo(i.nt-n,i.st-r),e.lineTo(i.nt-n,i.st)),e.fill()}function l2(t,e,i,s,r,n){return gy(e,i,s,r,n)}class d2 extends Wi{constructor(){super(...arguments),this.zt=null,this.rr=new zo,this.j=-1,this.H="",this.Zr=""}J(e){this.zt=e}hr(e,i){this.j===e&&this.H===i||(this.j=e,this.H=i,this.Zr=kr(e,i),this.rr.Qe())}pr(e,i){if(this.zt===null||this.zt.tt===null)return null;for(let s=this.zt.tt.from;s<this.zt.tt.to;s++){const r=this.zt.it[s];if(u2(r,e,i))return{br:r.Gr,mr:r.mr}}return null}Z({context:e,horizontalPixelRatio:i,verticalPixelRatio:s},r,n){if(this.zt!==null&&this.zt.tt!==null){e.textBaseline="middle",e.font=this.Zr;for(let o=this.zt.tt.from;o<this.zt.tt.to;o++){const a=this.zt.it[o];a.Zt!==void 0&&(a.Zt.ji=this.rr.Mi(e,a.Zt.Jr),a.Zt.Bt=this.j,a.Zt.nt=a.nt-a.Zt.ji/2),c2(a,e,i,s)}}}}function c2(t,e,i,s){e.fillStyle=t.O,t.Zt!==void 0&&function(r,n,o,a,l,d){r.save(),r.scale(l,d),r.fillText(n,o,a),r.restore()}(e,t.Zt.Jr,t.Zt.nt,t.Zt.st,i,s),function(r,n,o){if(r.Ys!==0){switch(r.Qr){case"arrowDown":return void gm(!1,n,o,r.Ys);case"arrowUp":return void gm(!0,n,o,r.Ys);case"circle":return void function(a,l,d){const u=(Fo("circle",d)-1)/2;a.beginPath(),a.arc(l.nt,l.st,u*l.Kr,0,2*Math.PI,!1),a.fill()}(n,o,r.Ys);case"square":return void function(a,l,d){const u=Fo("square",d),h=(u-1)*l.Kr/2,p=l.nt-h,g=l.st-h;a.fillRect(p,g,u*l.Kr,u*l.Kr)}(n,o,r.Ys)}r.Qr}}(t,e,function(r,n,o){const a=Math.max(1,Math.floor(n))%2/2;return{nt:Math.round(r.nt*n)+a,st:r.st*o,Kr:n}}(t,i,s))}function u2(t,e,i){return!(t.Zt===void 0||!function(s,r,n,o,a,l){const d=o/2;return a>=s&&a<=s+n&&l>=r-d&&l<=r+d}(t.Zt.nt,t.Zt.st,t.Zt.ji,t.Zt.Bt,e,i))||function(s,r,n){if(s.Ys===0)return!1;switch(s.Qr){case"arrowDown":case"arrowUp":return l2(0,s.nt,s.st,s.Ys,r,n);case"circle":return function(o,a,l,d,u){const h=2+Fo("circle",l)/2,p=o-d,g=a-u;return Math.sqrt(p*p+g*g)<=h}(s.nt,s.st,s.Ys,r,n);case"square":return gy(s.nt,s.st,s.Ys,r,n)}}(t,e,i)}function h2(t,e,i,s,r,n,o,a,l){const d=Ji(i)?i:i.ge,u=Ji(i)?i:i.be,h=Ji(i)?i:i.we,p=Ji(e.size)?Math.max(e.size,0):1,g=py(a.ee())*p,w=g/2;switch(t.Ys=g,e.position){case"inBar":return t.st=o.Rt(d,l),void(t.Zt!==void 0&&(t.Zt.st=t.st+w+n+.6*r));case"aboveBar":return t.st=o.Rt(u,l)-w-s.th,t.Zt!==void 0&&(t.Zt.st=t.st-w-.6*r,s.th+=1.2*r),void(s.th+=g+n);case"belowBar":return t.st=o.Rt(h,l)+w+s.ih,t.Zt!==void 0&&(t.Zt.st=t.st+w+n+.6*r,s.ih+=1.2*r),void(s.ih+=g+n)}e.position}class f2{constructor(e,i){this.ft=!0,this.nh=!0,this.sh=!0,this.eh=null,this.Wt=new d2,this.Nr=e,this.Hi=i,this.zt={it:[],tt:null}}bt(e){this.ft=!0,this.sh=!0,e==="data"&&(this.nh=!0)}gt(e){if(!this.Nr.yt())return null;this.ft&&this.rh();const i=this.Hi.W().layout;return this.Wt.hr(i.fontSize,i.fontFamily),this.Wt.J(this.zt),this.Wt}hh(){if(this.sh){if(this.Nr.lh().length>0){const e=this.Hi.St().ee(),i=pm(e),s=1.5*py(e)+2*i;this.eh={above:s,below:s}}else this.eh=null;this.sh=!1}return this.eh}rh(){const e=this.Nr.Dt(),i=this.Hi.St(),s=this.Nr.lh();this.nh&&(this.zt.it=s.map(u=>({ot:u.time,nt:0,st:0,Ys:0,Qr:u.shape,O:u.color,Gr:u.Gr,mr:u.id,Zt:void 0})),this.nh=!1);const r=this.Hi.W().layout;this.zt.tt=null;const n=i.qs();if(n===null)return;const o=this.Nr.Ct();if(o===null||this.zt.it.length===0)return;let a=NaN;const l=pm(i.ee()),d={th:l,ih:l};this.zt.tt=hy(this.zt.it,n,!0);for(let u=this.zt.tt.from;u<this.zt.tt.to;u++){const h=s[u];h.time!==a&&(d.th=l,d.ih=l,a=h.time);const p=this.zt.it[u];p.nt=i.It(h.time),h.text!==void 0&&h.text.length>0&&(p.Zt={Jr:h.text,nt:0,st:0,ji:0,Bt:0});const g=this.Nr.ah(h.time);g!==null&&h2(p,h,g,d,r.fontSize,l,e,i,o.Ot)}this.ft=!1}}class m2 extends fh{constructor(e){super(e)}Mr(){const e=this.wr;e.yt=!1;const i=this.Is.W();if(!i.priceLineVisible||!this.Is.yt())return;const s=this.Is.Ur(i.priceLineSource===0);s.qr||(e.yt=!0,e.st=s.Si,e.O=this.Is.oh(s.O),e.et=i.priceLineWidth,e.Nt=i.priceLineStyle)}}class p2 extends od{constructor(e){super(),this.jt=e}Ii(e,i,s){e.yt=!1,i.yt=!1;const r=this.jt;if(!r.yt())return;const n=r.W(),o=n.lastValueVisible,a=r._h()!=="",l=n.seriesLastValueMode===0,d=r.Ur(!1);if(d.qr)return;o&&(e.Zt=this.uh(d,o,l),e.yt=e.Zt.length!==0),(a||l)&&(i.Zt=this.dh(d,o,a,l),i.yt=i.Zt.length>0);const u=r.oh(d.O),h=nd(u);s.t=h.t,s.Si=d.Si,i.At=r.$t().Vt(d.Si/r.Dt().Bt()),e.At=u,e.O=h.i,i.O=h.i}dh(e,i,s,r){let n="";const o=this.jt._h();return s&&o.length!==0&&(n+=`${o} `),i&&r&&(n+=this.jt.Dt().fh()?e.ph:e.mh),n.trim()}uh(e,i,s){return i?s?this.jt.Dt().fh()?e.mh:e.ph:e.Zt:""}}function vm(t,e,i,s){const r=Number.isFinite(e),n=Number.isFinite(i);return r&&n?t(e,i):r||n?r?e:i:s}class Yt{constructor(e,i){this.bh=e,this.wh=i}gh(e){return e!==null&&this.bh===e.bh&&this.wh===e.wh}Mh(){return new Yt(this.bh,this.wh)}xh(){return this.bh}Sh(){return this.wh}kh(){return this.wh-this.bh}Ei(){return this.wh===this.bh||Number.isNaN(this.wh)||Number.isNaN(this.bh)}Jn(e){return e===null?this:new Yt(vm(Math.min,this.xh(),e.xh(),-1/0),vm(Math.max,this.Sh(),e.Sh(),1/0))}yh(e){if(!Ji(e)||this.wh-this.bh===0)return;const i=.5*(this.wh+this.bh);let s=this.wh-i,r=this.bh-i;s*=e,r*=e,this.wh=i+s,this.bh=i+r}Ch(e){Ji(e)&&(this.wh+=e,this.bh+=e)}Th(){return{minValue:this.bh,maxValue:this.wh}}static Ph(e){return e===null?null:new Yt(e.minValue,e.maxValue)}}class yl{constructor(e,i){this.Rh=e,this.Dh=i||null}Oh(){return this.Rh}Ah(){return this.Dh}Th(){return this.Rh===null?null:{priceRange:this.Rh.Th(),margins:this.Dh||void 0}}static Ph(e){return e===null?null:new yl(Yt.Ph(e.priceRange),e.margins)}}class g2 extends fh{constructor(e,i){super(e),this.Vh=i}Mr(){const e=this.wr;e.yt=!1;const i=this.Vh.W();if(!this.Is.yt()||!i.lineVisible)return;const s=this.Vh.Bh();s!==null&&(e.yt=!0,e.st=s,e.O=i.color,e.et=i.lineWidth,e.Nt=i.lineStyle,e.mr=this.Vh.W().id)}}class v2 extends od{constructor(e,i){super(),this.Nr=e,this.Vh=i}Ii(e,i,s){e.yt=!1,i.yt=!1;const r=this.Vh.W(),n=r.axisLabelVisible,o=r.title!=="",a=this.Nr;if(!n||!a.yt())return;const l=this.Vh.Bh();if(l===null)return;o&&(i.Zt=r.title,i.yt=!0),i.At=a.$t().Vt(l/a.Dt().Bt()),e.Zt=this.Ih(r.price),e.yt=!0;const d=nd(r.axisLabelColor||r.color);s.t=d.t;const u=r.axisLabelTextColor||d.i;e.O=u,i.O=u,s.Si=l}Ih(e){const i=this.Nr.Ct();return i===null?"":this.Nr.Dt().Ni(e,i.Ot)}}class _2{constructor(e,i){this.Nr=e,this._n=i,this.zh=new g2(e,this),this.lr=new v2(e,this),this.Lh=new my(this.lr,e,e.$t())}Eh(e){$i(this._n,e),this.bt(),this.Nr.$t().Nh()}W(){return this._n}Fh(){return this.zh}Wh(){return this.Lh}jh(){return this.lr}bt(){this.zh.bt(),this.lr.bt()}Bh(){const e=this.Nr,i=e.Dt();if(e.$t().St().Ei()||i.Ei())return null;const s=e.Ct();return s===null?null:i.Rt(this._n.price,s.Ot)}}class y2 extends ch{constructor(e){super(),this.Hi=e}$t(){return this.Hi}}const b2={Bar:(t,e,i,s)=>{var r;const n=e.upColor,o=e.downColor,a=J(t(i,s)),l=lr(a.Ot[0])<=lr(a.Ot[3]);return{oe:(r=a.O)!==null&&r!==void 0?r:l?n:o}},Candlestick:(t,e,i,s)=>{var r,n,o;const a=e.upColor,l=e.downColor,d=e.borderUpColor,u=e.borderDownColor,h=e.wickUpColor,p=e.wickDownColor,g=J(t(i,s)),w=lr(g.Ot[0])<=lr(g.Ot[3]);return{oe:(r=g.O)!==null&&r!==void 0?r:w?a:l,ze:(n=g.At)!==null&&n!==void 0?n:w?d:u,Ie:(o=g.Hh)!==null&&o!==void 0?o:w?h:p}},Custom:(t,e,i,s)=>{var r;return{oe:(r=J(t(i,s)).O)!==null&&r!==void 0?r:e.color}},Area:(t,e,i,s)=>{var r,n,o,a;const l=J(t(i,s));return{oe:(r=l.lt)!==null&&r!==void 0?r:e.lineColor,lt:(n=l.lt)!==null&&n!==void 0?n:e.lineColor,ys:(o=l.ys)!==null&&o!==void 0?o:e.topColor,Cs:(a=l.Cs)!==null&&a!==void 0?a:e.bottomColor}},Baseline:(t,e,i,s)=>{var r,n,o,a,l,d;const u=J(t(i,s));return{oe:u.Ot[3]>=e.baseValue.price?e.topLineColor:e.bottomLineColor,Ce:(r=u.Ce)!==null&&r!==void 0?r:e.topLineColor,Te:(n=u.Te)!==null&&n!==void 0?n:e.bottomLineColor,Me:(o=u.Me)!==null&&o!==void 0?o:e.topFillColor1,xe:(a=u.xe)!==null&&a!==void 0?a:e.topFillColor2,Se:(l=u.Se)!==null&&l!==void 0?l:e.bottomFillColor1,ke:(d=u.ke)!==null&&d!==void 0?d:e.bottomFillColor2}},Line:(t,e,i,s)=>{var r,n;const o=J(t(i,s));return{oe:(r=o.O)!==null&&r!==void 0?r:e.color,lt:(n=o.O)!==null&&n!==void 0?n:e.color}},Histogram:(t,e,i,s)=>{var r;return{oe:(r=J(t(i,s)).O)!==null&&r!==void 0?r:e.color}}};class w2{constructor(e){this.$h=(i,s)=>s!==void 0?s.Ot:this.Nr.Vn().Uh(i),this.Nr=e,this.qh=b2[e.Yh()]}Ws(e,i){return this.qh(this.$h,this.Nr.W(),e,i)}}var _m;(function(t){t[t.NearestLeft=-1]="NearestLeft",t[t.None=0]="None",t[t.NearestRight=1]="NearestRight"})(_m||(_m={}));const Ns=30;class S2{constructor(){this.Xh=[],this.Kh=new Map,this.Zh=new Map}Gh(){return this.Ys()>0?this.Xh[this.Xh.length-1]:null}Jh(){return this.Ys()>0?this.Qh(0):null}An(){return this.Ys()>0?this.Qh(this.Xh.length-1):null}Ys(){return this.Xh.length}Ei(){return this.Ys()===0}Yr(e){return this.tl(e,0)!==null}Uh(e){return this.il(e)}il(e,i=0){const s=this.tl(e,i);return s===null?null:Object.assign(Object.assign({},this.nl(s)),{ie:this.Qh(s)})}Qs(){return this.Xh}sl(e,i,s){if(this.Ei())return null;let r=null;for(const n of s)r=xa(r,this.el(e,i,n));return r}J(e){this.Zh.clear(),this.Kh.clear(),this.Xh=e}Qh(e){return this.Xh[e].ie}nl(e){return this.Xh[e]}tl(e,i){const s=this.rl(e);if(s===null&&i!==0)switch(i){case-1:return this.hl(e);case 1:return this.ll(e);default:throw new TypeError("Unknown search mode")}return s}hl(e){let i=this.al(e);return i>0&&(i-=1),i!==this.Xh.length&&this.Qh(i)<e?i:null}ll(e){const i=this.ol(e);return i!==this.Xh.length&&e<this.Qh(i)?i:null}rl(e){const i=this.al(e);return i===this.Xh.length||e<this.Xh[i].ie?null:i}al(e){return da(this.Xh,e,(i,s)=>i.ie<s)}ol(e){return uy(this.Xh,e,(i,s)=>i.ie>s)}_l(e,i,s){let r=null;for(let n=e;n<i;n++){const o=this.Xh[n].Ot[s];Number.isNaN(o)||(r===null?r={ul:o,cl:o}:(o<r.ul&&(r.ul=o),o>r.cl&&(r.cl=o)))}return r}el(e,i,s){if(this.Ei())return null;let r=null;const n=J(this.Jh()),o=J(this.An()),a=Math.max(e,n),l=Math.min(i,o),d=Math.ceil(a/Ns)*Ns,u=Math.max(d,Math.floor(l/Ns)*Ns);{const p=this.al(a),g=this.ol(Math.min(l,d,i));r=xa(r,this._l(p,g,s))}let h=this.Kh.get(s);h===void 0&&(h=new Map,this.Kh.set(s,h));for(let p=Math.max(d+1,a);p<u;p+=Ns){const g=Math.floor(p/Ns);let w=h.get(g);if(w===void 0){const _=this.al(g*Ns),P=this.ol((g+1)*Ns-1);w=this._l(_,P,s),h.set(g,w)}r=xa(r,w)}{const p=this.al(u),g=this.ol(l);r=xa(r,this._l(p,g,s))}return r}}function xa(t,e){return t===null?e:e===null?t:{ul:Math.min(t.ul,e.ul),cl:Math.max(t.cl,e.cl)}}class T2{constructor(e){this.dl=e}K(e,i,s){this.dl.draw(e)}fl(e,i,s){var r,n;(n=(r=this.dl).drawBackground)===null||n===void 0||n.call(r,e)}}class zd{constructor(e){this.Ge=null,this.mn=e}gt(){var e;const i=this.mn.renderer();if(i===null)return null;if(((e=this.Ge)===null||e===void 0?void 0:e.vl)===i)return this.Ge.pl;const s=new T2(i);return this.Ge={vl:i,pl:s},s}ml(){var e,i,s;return(s=(i=(e=this.mn).zOrder)===null||i===void 0?void 0:i.call(e))!==null&&s!==void 0?s:"normal"}}function vy(t){var e,i,s,r,n;return{Zt:t.text(),Si:t.coordinate(),xi:(e=t.fixedCoordinate)===null||e===void 0?void 0:e.call(t),O:t.textColor(),t:t.backColor(),yt:(s=(i=t.visible)===null||i===void 0?void 0:i.call(t))===null||s===void 0||s,hi:(n=(r=t.tickVisible)===null||r===void 0?void 0:r.call(t))===null||n===void 0||n}}class x2{constructor(e,i){this.Wt=new sy,this.bl=e,this.wl=i}gt(){return this.Wt.J(Object.assign({ji:this.wl.ji()},vy(this.bl))),this.Wt}}class E2 extends od{constructor(e,i){super(),this.bl=e,this.zi=i}Ii(e,i,s){const r=vy(this.bl);s.t=r.t,e.O=r.O;const n=2/12*this.zi.P();s.bi=n,s.wi=n,s.Si=r.Si,s.xi=r.xi,e.Zt=r.Zt,e.yt=r.yt,e.hi=r.hi}}class I2{constructor(e,i){this.gl=null,this.Ml=null,this.xl=null,this.Sl=null,this.kl=null,this.yl=e,this.Nr=i}Cl(){return this.yl}Rn(){var e,i;(i=(e=this.yl).updateAllViews)===null||i===void 0||i.call(e)}Cn(){var e,i,s,r;const n=(s=(i=(e=this.yl).paneViews)===null||i===void 0?void 0:i.call(e))!==null&&s!==void 0?s:[];if(((r=this.gl)===null||r===void 0?void 0:r.vl)===n)return this.gl.pl;const o=n.map(a=>new zd(a));return this.gl={vl:n,pl:o},o}Ji(){var e,i,s,r;const n=(s=(i=(e=this.yl).timeAxisViews)===null||i===void 0?void 0:i.call(e))!==null&&s!==void 0?s:[];if(((r=this.Ml)===null||r===void 0?void 0:r.vl)===n)return this.Ml.pl;const o=this.Nr.$t().St(),a=n.map(l=>new x2(l,o));return this.Ml={vl:n,pl:a},a}Tn(){var e,i,s,r;const n=(s=(i=(e=this.yl).priceAxisViews)===null||i===void 0?void 0:i.call(e))!==null&&s!==void 0?s:[];if(((r=this.xl)===null||r===void 0?void 0:r.vl)===n)return this.xl.pl;const o=this.Nr.Dt(),a=n.map(l=>new E2(l,o));return this.xl={vl:n,pl:a},a}Tl(){var e,i,s,r;const n=(s=(i=(e=this.yl).priceAxisPaneViews)===null||i===void 0?void 0:i.call(e))!==null&&s!==void 0?s:[];if(((r=this.Sl)===null||r===void 0?void 0:r.vl)===n)return this.Sl.pl;const o=n.map(a=>new zd(a));return this.Sl={vl:n,pl:o},o}Pl(){var e,i,s,r;const n=(s=(i=(e=this.yl).timeAxisPaneViews)===null||i===void 0?void 0:i.call(e))!==null&&s!==void 0?s:[];if(((r=this.kl)===null||r===void 0?void 0:r.vl)===n)return this.kl.pl;const o=n.map(a=>new zd(a));return this.kl={vl:n,pl:o},o}Rl(e,i){var s,r,n;return(n=(r=(s=this.yl).autoscaleInfo)===null||r===void 0?void 0:r.call(s,e,i))!==null&&n!==void 0?n:null}pr(e,i){var s,r,n;return(n=(r=(s=this.yl).hitTest)===null||r===void 0?void 0:r.call(s,e,i))!==null&&n!==void 0?n:null}}function Fd(t,e,i,s){t.forEach(r=>{e(r).forEach(n=>{n.ml()===i&&s.push(n)})})}function jd(t){return t.Cn()}function D2(t){return t.Tl()}function k2(t){return t.Pl()}class mh extends y2{constructor(e,i,s,r,n){super(e),this.zt=new S2,this.zh=new m2(this),this.Dl=[],this.Ol=new n2(this),this.Al=null,this.Vl=null,this.Bl=[],this.Il=[],this.zl=null,this.Ll=[],this._n=i,this.El=s;const o=new p2(this);this.en=[o],this.Lh=new my(o,this,e),s!=="Area"&&s!=="Line"&&s!=="Baseline"||(this.Al=new a2(this)),this.Nl(),this.Fl(n)}S(){this.zl!==null&&clearTimeout(this.zl)}oh(e){return this._n.priceLineColor||e}Ur(e){const i={qr:!0},s=this.Dt();if(this.$t().St().Ei()||s.Ei()||this.zt.Ei())return i;const r=this.$t().St().qs(),n=this.Ct();if(r===null||n===null)return i;let o,a;if(e){const h=this.zt.Gh();if(h===null)return i;o=h,a=h.ie}else{const h=this.zt.il(r.ui(),-1);if(h===null||(o=this.zt.Uh(h.ie),o===null))return i;a=h.ie}const l=o.Ot[3],d=this.js().Ws(a,{Ot:o}),u=s.Rt(l,n.Ot);return{qr:!1,_t:l,Zt:s.Ni(l,n.Ot),ph:s.Wl(l),mh:s.jl(l,n.Ot),O:d.oe,Si:u,ie:a}}js(){return this.Vl!==null||(this.Vl=new w2(this)),this.Vl}W(){return this._n}Eh(e){const i=e.priceScaleId;i!==void 0&&i!==this._n.priceScaleId&&this.$t().Hl(this,i),$i(this._n,e),e.priceFormat!==void 0&&(this.Nl(),this.$t().$l()),this.$t().Ul(this),this.$t().ql(),this.mn.bt("options")}J(e,i){this.zt.J(e),this.Yl(),this.mn.bt("data"),this.un.bt("data"),this.Al!==null&&(i&&i.Xl?this.Al.Wr():e.length===0&&this.Al.Fr());const s=this.$t()._r(this);this.$t().Kl(s),this.$t().Ul(this),this.$t().ql(),this.$t().Nh()}Zl(e){this.Bl=e,this.Yl();const i=this.$t()._r(this);this.un.bt("data"),this.$t().Kl(i),this.$t().Ul(this),this.$t().ql(),this.$t().Nh()}Gl(){return this.Bl}lh(){return this.Il}Jl(e){const i=new _2(this,e);return this.Dl.push(i),this.$t().Ul(this),i}Ql(e){const i=this.Dl.indexOf(e);i!==-1&&this.Dl.splice(i,1),this.$t().Ul(this)}Yh(){return this.El}Ct(){const e=this.ta();return e===null?null:{Ot:e.Ot[3],ia:e.ot}}ta(){const e=this.$t().St().qs();if(e===null)return null;const i=e.Rs();return this.zt.il(i,1)}Vn(){return this.zt}ah(e){const i=this.zt.Uh(e);return i===null?null:this.El==="Bar"||this.El==="Candlestick"||this.El==="Custom"?{me:i.Ot[0],be:i.Ot[1],we:i.Ot[2],ge:i.Ot[3]}:i.Ot[3]}na(e){const i=[];Fd(this.Ll,jd,"top",i);const s=this.Al;return s!==null&&s.yt()&&(this.zl===null&&s.Hr()&&(this.zl=setTimeout(()=>{this.zl=null,this.$t().sa()},0)),s.jr(),i.push(s)),i}Cn(){const e=[];this.ea()||e.push(this.Ol),e.push(this.mn,this.zh,this.un);const i=this.Dl.map(s=>s.Fh());return e.push(...i),Fd(this.Ll,jd,"normal",e),e}ra(){return this.ha(jd,"bottom")}la(e){return this.ha(D2,e)}aa(e){return this.ha(k2,e)}oa(e,i){return this.Ll.map(s=>s.pr(e,i)).filter(s=>s!==null)}Gi(e){return[this.Lh,...this.Dl.map(i=>i.Wh())]}Tn(e,i){if(i!==this.qi&&!this.ea())return[];const s=[...this.en];for(const r of this.Dl)s.push(r.jh());return this.Ll.forEach(r=>{s.push(...r.Tn())}),s}Ji(){const e=[];return this.Ll.forEach(i=>{e.push(...i.Ji())}),e}Rl(e,i){if(this._n.autoscaleInfoProvider!==void 0){const s=this._n.autoscaleInfoProvider(()=>{const r=this._a(e,i);return r===null?null:r.Th()});return yl.Ph(s)}return this._a(e,i)}ua(){return this._n.priceFormat.minMove}ca(){return this.da}Rn(){var e;this.mn.bt(),this.un.bt();for(const i of this.en)i.bt();for(const i of this.Dl)i.bt();this.zh.bt(),this.Ol.bt(),(e=this.Al)===null||e===void 0||e.bt(),this.Ll.forEach(i=>i.Rn())}Dt(){return J(super.Dt())}kt(e){if(!((this.El==="Line"||this.El==="Area"||this.El==="Baseline")&&this._n.crosshairMarkerVisible))return null;const i=this.zt.Uh(e);return i===null?null:{_t:i.Ot[3],ht:this.fa(),At:this.va(),Pt:this.pa(),Tt:this.ma(e)}}_h(){return this._n.title}yt(){return this._n.visible}ba(e){this.Ll.push(new I2(e,this))}wa(e){this.Ll=this.Ll.filter(i=>i.Cl()!==e)}ga(){if(this.mn instanceof Wd)return e=>this.mn.Ee(e)}Ma(){if(this.mn instanceof Wd)return e=>this.mn.Ne(e)}ea(){return!ad(this.Dt().xa())}_a(e,i){if(!Vo(e)||!Vo(i)||this.zt.Ei())return null;const s=this.El==="Line"||this.El==="Area"||this.El==="Baseline"||this.El==="Histogram"?[3]:[2,1],r=this.zt.sl(e,i,s);let n=r!==null?new Yt(r.ul,r.cl):null;if(this.Yh()==="Histogram"){const a=this._n.base,l=new Yt(a,a);n=n!==null?n.Jn(l):l}let o=this.un.hh();return this.Ll.forEach(a=>{const l=a.Rl(e,i);if(l!=null&&l.priceRange){const g=new Yt(l.priceRange.minValue,l.priceRange.maxValue);n=n!==null?n.Jn(g):g}var d,u,h,p;l!=null&&l.margins&&(d=o,u=l.margins,o={above:Math.max((h=d==null?void 0:d.above)!==null&&h!==void 0?h:0,u.above),below:Math.max((p=d==null?void 0:d.below)!==null&&p!==void 0?p:0,u.below)})}),new yl(n,o)}fa(){switch(this.El){case"Line":case"Area":case"Baseline":return this._n.crosshairMarkerRadius}return 0}va(){switch(this.El){case"Line":case"Area":case"Baseline":{const e=this._n.crosshairMarkerBorderColor;if(e.length!==0)return e}}return null}pa(){switch(this.El){case"Line":case"Area":case"Baseline":return this._n.crosshairMarkerBorderWidth}return 0}ma(e){switch(this.El){case"Line":case"Area":case"Baseline":{const i=this._n.crosshairMarkerBackgroundColor;if(i.length!==0)return i}}return this.js().Ws(e).oe}Nl(){switch(this._n.priceFormat.type){case"custom":this.da={format:this._n.priceFormat.formatter};break;case"volume":this.da=new $$(this._n.priceFormat.precision);break;case"percent":this.da=new ny(this._n.priceFormat.precision);break;default:{const e=Math.pow(10,this._n.priceFormat.precision);this.da=new ld(e,this._n.priceFormat.minMove*e)}}this.qi!==null&&this.qi.Sa()}Yl(){const e=this.$t().St();if(!e.ka()||this.zt.Ei())return void(this.Il=[]);const i=J(this.zt.Jh());this.Il=this.Bl.map((s,r)=>{const n=J(e.ya(s.time,!0)),o=n<i?1:-1;return{time:J(this.zt.il(n,o)).ie,position:s.position,shape:s.shape,color:s.color,id:s.id,Gr:r,text:s.text,size:s.size,originalTime:s.originalTime}})}Fl(e){switch(this.un=new f2(this,this.$t()),this.El){case"Bar":this.mn=new H$(this,this.$t());break;case"Candlestick":this.mn=new q$(this,this.$t());break;case"Line":this.mn=new e2(this,this.$t());break;case"Custom":this.mn=new Wd(this,this.$t(),jt(e));break;case"Area":this.mn=new j$(this,this.$t());break;case"Baseline":this.mn=new G$(this,this.$t());break;case"Histogram":this.mn=new X$(this,this.$t());break;default:throw Error("Unknown chart style assigned: "+this.El)}}ha(e,i){const s=[];return Fd(this.Ll,e,i,s),s}}class C2{constructor(e){this._n=e}Ca(e,i,s){let r=e;if(this._n.mode===0)return r;const n=s.dn(),o=n.Ct();if(o===null)return r;const a=n.Rt(e,o),l=s.Ta().filter(u=>u instanceof mh).reduce((u,h)=>{if(s.ur(h)||!h.yt())return u;const p=h.Dt(),g=h.Vn();if(p.Ei()||!g.Yr(i))return u;const w=g.Uh(i);if(w===null)return u;const _=lr(h.Ct());return u.concat([p.Rt(w.Ot[3],_.Ot)])},[]);if(l.length===0)return r;l.sort((u,h)=>Math.abs(u-a)-Math.abs(h-a));const d=l[0];return r=n.fn(d,o),r}}class P2 extends Wi{constructor(){super(...arguments),this.zt=null}J(e){this.zt=e}Z({context:e,bitmapSize:i,horizontalPixelRatio:s,verticalPixelRatio:r}){if(this.zt===null)return;const n=Math.max(1,Math.floor(s));e.lineWidth=n,function(o,a){o.save(),o.lineWidth%2&&o.translate(.5,.5),a(),o.restore()}(e,()=>{const o=J(this.zt);if(o.Pa){e.strokeStyle=o.Ra,On(e,o.Da),e.beginPath();for(const a of o.Oa){const l=Math.round(a.Aa*s);e.moveTo(l,-n),e.lineTo(l,i.height+n)}e.stroke()}if(o.Va){e.strokeStyle=o.Ba,On(e,o.Ia),e.beginPath();for(const a of o.za){const l=Math.round(a.Aa*r);e.moveTo(-n,l),e.lineTo(i.width+n,l)}e.stroke()}})}}class M2{constructor(e){this.Wt=new P2,this.ft=!0,this.Qi=e}bt(){this.ft=!0}gt(){if(this.ft){const e=this.Qi.$t().W().grid,i={Va:e.horzLines.visible,Pa:e.vertLines.visible,Ba:e.horzLines.color,Ra:e.vertLines.color,Ia:e.horzLines.style,Da:e.vertLines.style,za:this.Qi.dn().La(),Oa:(this.Qi.$t().St().La()||[]).map(s=>({Aa:s.coord}))};this.Wt.J(i),this.ft=!1}return this.Wt}}class A2{constructor(e){this.mn=new M2(e)}Fh(){return this.mn}}const Bd={Ea:4,Na:1e-4};function dr(t,e){const i=100*(t-e)/e;return e<0?-i:i}function O2(t,e){const i=dr(t.xh(),e),s=dr(t.Sh(),e);return new Yt(i,s)}function bo(t,e){const i=100*(t-e)/e+100;return e<0?-i:i}function R2(t,e){const i=bo(t.xh(),e),s=bo(t.Sh(),e);return new Yt(i,s)}function bl(t,e){const i=Math.abs(t);if(i<1e-15)return 0;const s=Math.log10(i+e.Na)+e.Ea;return t<0?-s:s}function wo(t,e){const i=Math.abs(t);if(i<1e-15)return 0;const s=Math.pow(10,i-e.Ea)-e.Na;return t<0?-s:s}function so(t,e){if(t===null)return null;const i=bl(t.xh(),e),s=bl(t.Sh(),e);return new Yt(i,s)}function Ea(t,e){if(t===null)return null;const i=wo(t.xh(),e),s=wo(t.Sh(),e);return new Yt(i,s)}function Hd(t){if(t===null)return Bd;const e=Math.abs(t.Sh()-t.xh());if(e>=1||e<1e-15)return Bd;const i=Math.ceil(Math.abs(Math.log10(e))),s=Bd.Ea+i;return{Ea:s,Na:1/Math.pow(10,s)}}class Ud{constructor(e,i){if(this.Fa=e,this.Wa=i,function(s){if(s<0)return!1;for(let r=s;r>1;r/=10)if(r%10!=0)return!1;return!0}(this.Fa))this.ja=[2,2.5,2];else{this.ja=[];for(let s=this.Fa;s!==1;){if(s%2==0)this.ja.push(2),s/=2;else{if(s%5!=0)throw new Error("unexpected base");this.ja.push(2,2.5),s/=5}if(this.ja.length>100)throw new Error("something wrong with base")}}}Ha(e,i,s){const r=this.Fa===0?0:1/this.Fa;let n=Math.pow(10,Math.max(0,Math.ceil(Math.log10(e-i)))),o=0,a=this.Wa[0];for(;;){const h=Ta(n,r,1e-14)&&n>r+1e-14,p=Ta(n,s*a,1e-14),g=Ta(n,1,1e-14);if(!(h&&p&&g))break;n/=a,a=this.Wa[++o%this.Wa.length]}if(n<=r+1e-14&&(n=r),n=Math.max(1,n),this.ja.length>0&&(l=n,d=1,u=1e-14,Math.abs(l-d)<u))for(o=0,a=this.ja[0];Ta(n,s*a,1e-14)&&n>r+1e-14;)n/=a,a=this.ja[++o%this.ja.length];var l,d,u;return n}}class ym{constructor(e,i,s,r){this.$a=[],this.zi=e,this.Fa=i,this.Ua=s,this.qa=r}Ha(e,i){if(e<i)throw new Error("high < low");const s=this.zi.Bt(),r=(e-i)*this.Ya()/s,n=new Ud(this.Fa,[2,2.5,2]),o=new Ud(this.Fa,[2,2,2.5]),a=new Ud(this.Fa,[2.5,2,2]),l=[];return l.push(n.Ha(e,i,r),o.Ha(e,i,r),a.Ha(e,i,r)),function(d){if(d.length<1)throw Error("array is empty");let u=d[0];for(let h=1;h<d.length;++h)d[h]<u&&(u=d[h]);return u}(l)}Xa(){const e=this.zi,i=e.Ct();if(i===null)return void(this.$a=[]);const s=e.Bt(),r=this.Ua(s-1,i),n=this.Ua(0,i),o=this.zi.W().entireTextOnly?this.Ka()/2:0,a=o,l=s-1-o,d=Math.max(r,n),u=Math.min(r,n);if(d===u)return void(this.$a=[]);let h=this.Ha(d,u),p=d%h;p+=p<0?h:0;const g=d>=u?1:-1;let w=null,_=0;for(let P=d-p;P>u;P-=h){const k=this.qa(P,i,!0);w!==null&&Math.abs(k-w)<this.Ya()||k<a||k>l||(_<this.$a.length?(this.$a[_].Aa=k,this.$a[_].Za=e.Ga(P)):this.$a.push({Aa:k,Za:e.Ga(P)}),_++,w=k,e.Ja()&&(h=this.Ha(P*g,u)))}this.$a.length=_}La(){return this.$a}Ka(){return this.zi.P()}Ya(){return Math.ceil(2.5*this.Ka())}}function _y(t){return t.slice().sort((e,i)=>J(e.Xi())-J(i.Xi()))}var bm;(function(t){t[t.Normal=0]="Normal",t[t.Logarithmic=1]="Logarithmic",t[t.Percentage=2]="Percentage",t[t.IndexedTo100=3]="IndexedTo100"})(bm||(bm={}));const wm=new ny,Sm=new ld(100,1);class $2{constructor(e,i,s,r){this.Qa=0,this.io=null,this.Rh=null,this.no=null,this.so={eo:!1,ro:null},this.ho=0,this.lo=0,this.ao=new at,this.oo=new at,this._o=[],this.uo=null,this.co=null,this.do=null,this.fo=null,this.da=Sm,this.vo=Hd(null),this.po=e,this._n=i,this.mo=s,this.bo=r,this.wo=new ym(this,100,this.Mo.bind(this),this.xo.bind(this))}xa(){return this.po}W(){return this._n}Eh(e){if($i(this._n,e),this.Sa(),e.mode!==void 0&&this.So({Sr:e.mode}),e.scaleMargins!==void 0){const i=jt(e.scaleMargins.top),s=jt(e.scaleMargins.bottom);if(i<0||i>1)throw new Error(`Invalid top margin - expect value between 0 and 1, given=${i}`);if(s<0||s>1)throw new Error(`Invalid bottom margin - expect value between 0 and 1, given=${s}`);if(i+s>1)throw new Error(`Invalid margins - sum of margins must be less than 1, given=${i+s}`);this.ko(),this.co=null}}yo(){return this._n.autoScale}Ja(){return this._n.mode===1}fh(){return this._n.mode===2}Co(){return this._n.mode===3}Sr(){return{Nn:this._n.autoScale,To:this._n.invertScale,Sr:this._n.mode}}So(e){const i=this.Sr();let s=null;e.Nn!==void 0&&(this._n.autoScale=e.Nn),e.Sr!==void 0&&(this._n.mode=e.Sr,e.Sr!==2&&e.Sr!==3||(this._n.autoScale=!0),this.so.eo=!1),i.Sr===1&&e.Sr!==i.Sr&&(function(n,o){if(n===null)return!1;const a=wo(n.xh(),o),l=wo(n.Sh(),o);return isFinite(a)&&isFinite(l)}(this.Rh,this.vo)?(s=Ea(this.Rh,this.vo),s!==null&&this.Po(s)):this._n.autoScale=!0),e.Sr===1&&e.Sr!==i.Sr&&(s=so(this.Rh,this.vo),s!==null&&this.Po(s));const r=i.Sr!==this._n.mode;r&&(i.Sr===2||this.fh())&&this.Sa(),r&&(i.Sr===3||this.Co())&&this.Sa(),e.To!==void 0&&i.To!==e.To&&(this._n.invertScale=e.To,this.Ro()),this.oo.m(i,this.Sr())}Do(){return this.oo}P(){return this.mo.fontSize}Bt(){return this.Qa}Oo(e){this.Qa!==e&&(this.Qa=e,this.ko(),this.co=null)}Ao(){if(this.io)return this.io;const e=this.Bt()-this.Vo()-this.Bo();return this.io=e,e}Oh(){return this.Io(),this.Rh}Po(e,i){const s=this.Rh;(i||s===null&&e!==null||s!==null&&!s.gh(e))&&(this.co=null,this.Rh=e)}Ei(){return this.Io(),this.Qa===0||!this.Rh||this.Rh.Ei()}zo(e){return this.To()?e:this.Bt()-1-e}Rt(e,i){return this.fh()?e=dr(e,i):this.Co()&&(e=bo(e,i)),this.xo(e,i)}Gs(e,i,s){this.Io();const r=this.Bo(),n=J(this.Oh()),o=n.xh(),a=n.Sh(),l=this.Ao()-1,d=this.To(),u=l/(a-o),h=s===void 0?0:s.from,p=s===void 0?e.length:s.to,g=this.Lo();for(let w=h;w<p;w++){const _=e[w],P=_._t;if(isNaN(P))continue;let k=P;g!==null&&(k=g(_._t,i));const R=r+u*(k-o),$=d?R:this.Qa-1-R;_.st=$}}ve(e,i,s){this.Io();const r=this.Bo(),n=J(this.Oh()),o=n.xh(),a=n.Sh(),l=this.Ao()-1,d=this.To(),u=l/(a-o),h=s===void 0?0:s.from,p=s===void 0?e.length:s.to,g=this.Lo();for(let w=h;w<p;w++){const _=e[w];let P=_.me,k=_.be,R=_.we,$=_.ge;g!==null&&(P=g(_.me,i),k=g(_.be,i),R=g(_.we,i),$=g(_.ge,i));let A=r+u*(P-o),Z=d?A:this.Qa-1-A;_.de=Z,A=r+u*(k-o),Z=d?A:this.Qa-1-A,_._e=Z,A=r+u*(R-o),Z=d?A:this.Qa-1-A,_.ue=Z,A=r+u*($-o),Z=d?A:this.Qa-1-A,_.fe=Z}}fn(e,i){const s=this.Mo(e,i);return this.Eo(s,i)}Eo(e,i){let s=e;return this.fh()?s=function(r,n){return n<0&&(r=-r),r/100*n+n}(s,i):this.Co()&&(s=function(r,n){return r-=100,n<0&&(r=-r),r/100*n+n}(s,i)),s}Ta(){return this._o}No(){if(this.uo)return this.uo;let e=[];for(let i=0;i<this._o.length;i++){const s=this._o[i];s.Xi()===null&&s.Ki(i+1),e.push(s)}return e=_y(e),this.uo=e,this.uo}Fo(e){this._o.indexOf(e)===-1&&(this._o.push(e),this.Sa(),this.Wo())}jo(e){const i=this._o.indexOf(e);if(i===-1)throw new Error("source is not attached to scale");this._o.splice(i,1),this._o.length===0&&(this.So({Nn:!0}),this.Po(null)),this.Sa(),this.Wo()}Ct(){let e=null;for(const i of this._o){const s=i.Ct();s!==null&&(e===null||s.ia<e.ia)&&(e=s)}return e===null?null:e.Ot}To(){return this._n.invertScale}La(){const e=this.Ct()===null;if(this.co!==null&&(e||this.co.Ho===e))return this.co.La;this.wo.Xa();const i=this.wo.La();return this.co={La:i,Ho:e},this.ao.m(),i}$o(){return this.ao}Uo(e){this.fh()||this.Co()||this.do===null&&this.no===null&&(this.Ei()||(this.do=this.Qa-e,this.no=J(this.Oh()).Mh()))}qo(e){if(this.fh()||this.Co()||this.do===null)return;this.So({Nn:!1}),(e=this.Qa-e)<0&&(e=0);let i=(this.do+.2*(this.Qa-1))/(e+.2*(this.Qa-1));const s=J(this.no).Mh();i=Math.max(i,.1),s.yh(i),this.Po(s)}Yo(){this.fh()||this.Co()||(this.do=null,this.no=null)}Xo(e){this.yo()||this.fo===null&&this.no===null&&(this.Ei()||(this.fo=e,this.no=J(this.Oh()).Mh()))}Ko(e){if(this.yo()||this.fo===null)return;const i=J(this.Oh()).kh()/(this.Ao()-1);let s=e-this.fo;this.To()&&(s*=-1);const r=s*i,n=J(this.no).Mh();n.Ch(r),this.Po(n,!0),this.co=null}Zo(){this.yo()||this.fo!==null&&(this.fo=null,this.no=null)}ca(){return this.da||this.Sa(),this.da}Ni(e,i){switch(this._n.mode){case 2:return this.Go(dr(e,i));case 3:return this.ca().format(bo(e,i));default:return this.Ih(e)}}Ga(e){switch(this._n.mode){case 2:return this.Go(e);case 3:return this.ca().format(e);default:return this.Ih(e)}}Wl(e){return this.Ih(e,J(this.Jo()).ca())}jl(e,i){return e=dr(e,i),this.Go(e,wm)}Qo(){return this._o}t_(e){this.so={ro:e,eo:!1}}Rn(){this._o.forEach(e=>e.Rn())}Sa(){this.co=null;const e=this.Jo();let i=100;e!==null&&(i=Math.round(1/e.ua())),this.da=Sm,this.fh()?(this.da=wm,i=100):this.Co()?(this.da=new ld(100,1),i=100):e!==null&&(this.da=e.ca()),this.wo=new ym(this,i,this.Mo.bind(this),this.xo.bind(this)),this.wo.Xa()}Wo(){this.uo=null}Jo(){return this._o[0]||null}Vo(){return this.To()?this._n.scaleMargins.bottom*this.Bt()+this.lo:this._n.scaleMargins.top*this.Bt()+this.ho}Bo(){return this.To()?this._n.scaleMargins.top*this.Bt()+this.ho:this._n.scaleMargins.bottom*this.Bt()+this.lo}Io(){this.so.eo||(this.so.eo=!0,this.i_())}ko(){this.io=null}xo(e,i){if(this.Io(),this.Ei())return 0;e=this.Ja()&&e?bl(e,this.vo):e;const s=J(this.Oh()),r=this.Bo()+(this.Ao()-1)*(e-s.xh())/s.kh();return this.zo(r)}Mo(e,i){if(this.Io(),this.Ei())return 0;const s=this.zo(e),r=J(this.Oh()),n=r.xh()+r.kh()*((s-this.Bo())/(this.Ao()-1));return this.Ja()?wo(n,this.vo):n}Ro(){this.co=null,this.wo.Xa()}i_(){const e=this.so.ro;if(e===null)return;let i=null;const s=this.Qo();let r=0,n=0;for(const l of s){if(!l.yt())continue;const d=l.Ct();if(d===null)continue;const u=l.Rl(e.Rs(),e.ui());let h=u&&u.Oh();if(h!==null){switch(this._n.mode){case 1:h=so(h,this.vo);break;case 2:h=O2(h,d.Ot);break;case 3:h=R2(h,d.Ot)}if(i=i===null?h:i.Jn(J(h)),u!==null){const p=u.Ah();p!==null&&(r=Math.max(r,p.above),n=Math.max(r,p.below))}}}if(r===this.ho&&n===this.lo||(this.ho=r,this.lo=n,this.co=null,this.ko()),i!==null){if(i.xh()===i.Sh()){const l=this.Jo(),d=5*(l===null||this.fh()||this.Co()?1:l.ua());this.Ja()&&(i=Ea(i,this.vo)),i=new Yt(i.xh()-d,i.Sh()+d),this.Ja()&&(i=so(i,this.vo))}if(this.Ja()){const l=Ea(i,this.vo),d=Hd(l);if(o=d,a=this.vo,o.Ea!==a.Ea||o.Na!==a.Na){const u=this.no!==null?Ea(this.no,this.vo):null;this.vo=d,i=so(l,d),u!==null&&(this.no=so(u,d))}}this.Po(i)}else this.Rh===null&&(this.Po(new Yt(-.5,.5)),this.vo=Hd(null));var o,a;this.so.eo=!0}Lo(){return this.fh()?dr:this.Co()?bo:this.Ja()?e=>bl(e,this.vo):null}n_(e,i,s){return i===void 0?(s===void 0&&(s=this.ca()),s.format(e)):i(e)}Ih(e,i){return this.n_(e,this.bo.priceFormatter,i)}Go(e,i){return this.n_(e,this.bo.percentageFormatter,i)}}class N2{constructor(e,i){this._o=[],this.s_=new Map,this.Qa=0,this.e_=0,this.r_=1e3,this.uo=null,this.h_=new at,this.wl=e,this.Hi=i,this.l_=new A2(this);const s=i.W();this.a_=this.o_("left",s.leftPriceScale),this.__=this.o_("right",s.rightPriceScale),this.a_.Do().l(this.u_.bind(this,this.a_),this),this.__.Do().l(this.u_.bind(this,this.__),this),this.c_(s)}c_(e){if(e.leftPriceScale&&this.a_.Eh(e.leftPriceScale),e.rightPriceScale&&this.__.Eh(e.rightPriceScale),e.localization&&(this.a_.Sa(),this.__.Sa()),e.overlayPriceScales){const i=Array.from(this.s_.values());for(const s of i){const r=J(s[0].Dt());r.Eh(e.overlayPriceScales),e.localization&&r.Sa()}}}d_(e){switch(e){case"left":return this.a_;case"right":return this.__}return this.s_.has(e)?jt(this.s_.get(e))[0].Dt():null}S(){this.$t().f_().p(this),this.a_.Do().p(this),this.__.Do().p(this),this._o.forEach(e=>{e.S&&e.S()}),this.h_.m()}v_(){return this.r_}p_(e){this.r_=e}$t(){return this.Hi}ji(){return this.e_}Bt(){return this.Qa}m_(e){this.e_=e,this.b_()}Oo(e){this.Qa=e,this.a_.Oo(e),this.__.Oo(e),this._o.forEach(i=>{if(this.ur(i)){const s=i.Dt();s!==null&&s.Oo(e)}}),this.b_()}Ta(){return this._o}ur(e){const i=e.Dt();return i===null||this.a_!==i&&this.__!==i}Fo(e,i,s){const r=s!==void 0?s:this.g_().w_+1;this.M_(e,i,r)}jo(e){const i=this._o.indexOf(e);en(i!==-1,"removeDataSource: invalid data source"),this._o.splice(i,1);const s=J(e.Dt()).xa();if(this.s_.has(s)){const n=jt(this.s_.get(s)),o=n.indexOf(e);o!==-1&&(n.splice(o,1),n.length===0&&this.s_.delete(s))}const r=e.Dt();r&&r.Ta().indexOf(e)>=0&&r.jo(e),r!==null&&(r.Wo(),this.x_(r)),this.uo=null}dr(e){return e===this.a_?"left":e===this.__?"right":"overlay"}S_(){return this.a_}k_(){return this.__}y_(e,i){e.Uo(i)}C_(e,i){e.qo(i),this.b_()}T_(e){e.Yo()}P_(e,i){e.Xo(i)}R_(e,i){e.Ko(i),this.b_()}D_(e){e.Zo()}b_(){this._o.forEach(e=>{e.Rn()})}dn(){let e=null;return this.Hi.W().rightPriceScale.visible&&this.__.Ta().length!==0?e=this.__:this.Hi.W().leftPriceScale.visible&&this.a_.Ta().length!==0?e=this.a_:this._o.length!==0&&(e=this._o[0].Dt()),e===null&&(e=this.__),e}cr(){let e=null;return this.Hi.W().rightPriceScale.visible?e=this.__:this.Hi.W().leftPriceScale.visible&&(e=this.a_),e}x_(e){e!==null&&e.yo()&&this.O_(e)}A_(e){const i=this.wl.qs();e.So({Nn:!0}),i!==null&&e.t_(i),this.b_()}V_(){this.O_(this.a_),this.O_(this.__)}B_(){this.x_(this.a_),this.x_(this.__),this._o.forEach(e=>{this.ur(e)&&this.x_(e.Dt())}),this.b_(),this.Hi.Nh()}No(){return this.uo===null&&(this.uo=_y(this._o)),this.uo}I_(){return this.h_}z_(){return this.l_}O_(e){const i=e.Qo();if(i&&i.length>0&&!this.wl.Ei()){const s=this.wl.qs();s!==null&&e.t_(s)}e.Rn()}g_(){const e=this.No();if(e.length===0)return{L_:0,w_:0};let i=0,s=0;for(let r=0;r<e.length;r++){const n=e[r].Xi();n!==null&&(n<i&&(i=n),n>s&&(s=n))}return{L_:i,w_:s}}M_(e,i,s){let r=this.d_(i);if(r===null&&(r=this.o_(i,this.Hi.W().overlayPriceScales)),this._o.push(e),!ad(i)){const n=this.s_.get(i)||[];n.push(e),this.s_.set(i,n)}r.Fo(e),e.Zi(r),e.Ki(s),this.x_(r),this.uo=null}u_(e,i,s){i.Sr!==s.Sr&&this.O_(e)}o_(e,i){const s=Object.assign({visible:!0,autoScale:!0},ws(i)),r=new $2(e,s,this.Hi.W().layout,this.Hi.W().localization);return r.Oo(this.Bt()),r}}class L2{constructor(e,i,s=50){this.Ye=0,this.Xe=1,this.Ke=1,this.Ge=new Map,this.Ze=new Map,this.E_=e,this.N_=i,this.Je=s}F_(e){const i=e.time,s=this.N_.cacheKey(i),r=this.Ge.get(s);if(r!==void 0)return r.W_;if(this.Ye===this.Je){const o=this.Ze.get(this.Ke);this.Ze.delete(this.Ke),this.Ge.delete(jt(o)),this.Ke++,this.Ye--}const n=this.E_(e);return this.Ge.set(s,{W_:n,nr:this.Xe}),this.Ze.set(this.Xe,s),this.Ye++,this.Xe++,n}}class So{constructor(e,i){en(e<=i,"right should be >= left"),this.j_=e,this.H_=i}Rs(){return this.j_}ui(){return this.H_}U_(){return this.H_-this.j_+1}Yr(e){return this.j_<=e&&e<=this.H_}gh(e){return this.j_===e.Rs()&&this.H_===e.ui()}}function Tm(t,e){return t===null||e===null?t===e:t.gh(e)}class V2{constructor(){this.q_=new Map,this.Ge=null,this.Y_=!1}X_(e){this.Y_=e,this.Ge=null}K_(e,i){this.Z_(i),this.Ge=null;for(let s=i;s<e.length;++s){const r=e[s];let n=this.q_.get(r.timeWeight);n===void 0&&(n=[],this.q_.set(r.timeWeight,n)),n.push({index:s,time:r.time,weight:r.timeWeight,originalTime:r.originalTime})}}G_(e,i){const s=Math.ceil(i/e);return this.Ge!==null&&this.Ge.J_===s||(this.Ge={La:this.Q_(s),J_:s}),this.Ge.La}Z_(e){if(e===0)return void this.q_.clear();const i=[];this.q_.forEach((s,r)=>{e<=s[0].index?i.push(r):s.splice(da(s,e,n=>n.index<e),1/0)});for(const s of i)this.q_.delete(s)}Q_(e){let i=[];for(const s of Array.from(this.q_.keys()).sort((r,n)=>n-r)){if(!this.q_.get(s))continue;const r=i;i=[];const n=r.length;let o=0;const a=jt(this.q_.get(s)),l=a.length;let d=1/0,u=-1/0;for(let h=0;h<l;h++){const p=a[h],g=p.index;for(;o<n;){const w=r[o],_=w.index;if(!(_<g)){d=_;break}o++,i.push(w),u=_,d=1/0}if(d-g>=e&&g-u>=e)i.push(p),u=g;else if(this.Y_)return r}for(;o<n;o++)i.push(r[o])}return i}}class br{constructor(e){this.tu=e}iu(){return this.tu===null?null:new So(Math.floor(this.tu.Rs()),Math.ceil(this.tu.ui()))}nu(){return this.tu}static su(){return new br(null)}}function W2(t,e){return t.weight>e.weight?t:e}class z2{constructor(e,i,s,r){this.e_=0,this.eu=null,this.ru=[],this.fo=null,this.do=null,this.hu=new V2,this.lu=new Map,this.au=br.su(),this.ou=!0,this._u=new at,this.uu=new at,this.cu=new at,this.du=null,this.fu=null,this.vu=[],this._n=i,this.bo=s,this.pu=i.rightOffset,this.mu=i.barSpacing,this.Hi=e,this.N_=r,this.bu(),this.hu.X_(i.uniformDistribution)}W(){return this._n}wu(e){$i(this.bo,e),this.gu(),this.bu()}Eh(e,i){var s;$i(this._n,e),this._n.fixLeftEdge&&this.Mu(),this._n.fixRightEdge&&this.xu(),e.barSpacing!==void 0&&this.Hi.Kn(e.barSpacing),e.rightOffset!==void 0&&this.Hi.Zn(e.rightOffset),e.minBarSpacing!==void 0&&this.Hi.Kn((s=e.barSpacing)!==null&&s!==void 0?s:this.mu),this.gu(),this.bu(),this.cu.m()}vn(e){var i,s;return(s=(i=this.ru[e])===null||i===void 0?void 0:i.time)!==null&&s!==void 0?s:null}$i(e){var i;return(i=this.ru[e])!==null&&i!==void 0?i:null}ya(e,i){if(this.ru.length<1)return null;if(this.N_.key(e)>this.N_.key(this.ru[this.ru.length-1].time))return i?this.ru.length-1:null;const s=da(this.ru,this.N_.key(e),(r,n)=>this.N_.key(r.time)<n);return this.N_.key(e)<this.N_.key(this.ru[s].time)?i?s:null:s}Ei(){return this.e_===0||this.ru.length===0||this.eu===null}ka(){return this.ru.length>0}qs(){return this.Su(),this.au.iu()}ku(){return this.Su(),this.au.nu()}yu(){const e=this.qs();if(e===null)return null;const i={from:e.Rs(),to:e.ui()};return this.Cu(i)}Cu(e){const i=Math.round(e.from),s=Math.round(e.to),r=J(this.Tu()),n=J(this.Pu());return{from:J(this.$i(Math.max(r,i))),to:J(this.$i(Math.min(n,s)))}}Ru(e){return{from:J(this.ya(e.from,!0)),to:J(this.ya(e.to,!0))}}ji(){return this.e_}m_(e){if(!isFinite(e)||e<=0||this.e_===e)return;const i=this.ku(),s=this.e_;if(this.e_=e,this.ou=!0,this._n.lockVisibleTimeRangeOnResize&&s!==0){const r=this.mu*e/s;this.mu=r}if(this._n.fixLeftEdge&&i!==null&&i.Rs()<=0){const r=s-e;this.pu-=Math.round(r/this.mu)+1,this.ou=!0}this.Du(),this.Ou()}It(e){if(this.Ei()||!Vo(e))return 0;const i=this.Au()+this.pu-e;return this.e_-(i+.5)*this.mu-1}Zs(e,i){const s=this.Au(),r=i===void 0?0:i.from,n=i===void 0?e.length:i.to;for(let o=r;o<n;o++){const a=e[o].ot,l=s+this.pu-a,d=this.e_-(l+.5)*this.mu-1;e[o].nt=d}}Vu(e){return Math.ceil(this.Bu(e))}Zn(e){this.ou=!0,this.pu=e,this.Ou(),this.Hi.Iu(),this.Hi.Nh()}ee(){return this.mu}Kn(e){this.zu(e),this.Ou(),this.Hi.Iu(),this.Hi.Nh()}Lu(){return this.pu}La(){if(this.Ei())return null;if(this.fu!==null)return this.fu;const e=this.mu,i=5*(this.Hi.W().layout.fontSize+4)/8*(this._n.tickMarkMaxCharacterLength||8),s=Math.round(i/e),r=J(this.qs()),n=Math.max(r.Rs(),r.Rs()-s),o=Math.max(r.ui(),r.ui()-s),a=this.hu.G_(e,i),l=this.Tu()+s,d=this.Pu()-s,u=this.Eu(),h=this._n.fixLeftEdge||u,p=this._n.fixRightEdge||u;let g=0;for(const w of a){if(!(n<=w.index&&w.index<=o))continue;let _;g<this.vu.length?(_=this.vu[g],_.coord=this.It(w.index),_.label=this.Nu(w),_.weight=w.weight):(_={needAlignCoordinate:!1,coord:this.It(w.index),label:this.Nu(w),weight:w.weight},this.vu.push(_)),this.mu>i/2&&!u?_.needAlignCoordinate=!1:_.needAlignCoordinate=h&&w.index<=l||p&&w.index>=d,g++}return this.vu.length=g,this.fu=this.vu,this.vu}Fu(){this.ou=!0,this.Kn(this._n.barSpacing),this.Zn(this._n.rightOffset)}Wu(e){this.ou=!0,this.eu=e,this.Ou(),this.Mu()}ju(e,i){const s=this.Bu(e),r=this.ee(),n=r+i*(r/10);this.Kn(n),this._n.rightBarStaysOnScroll||this.Zn(this.Lu()+(s-this.Bu(e)))}Uo(e){this.fo&&this.Zo(),this.do===null&&this.du===null&&(this.Ei()||(this.do=e,this.Hu()))}qo(e){if(this.du===null)return;const i=Yc(this.e_-e,0,this.e_),s=Yc(this.e_-J(this.do),0,this.e_);i!==0&&s!==0&&this.Kn(this.du.ee*i/s)}Yo(){this.do!==null&&(this.do=null,this.$u())}Xo(e){this.fo===null&&this.du===null&&(this.Ei()||(this.fo=e,this.Hu()))}Ko(e){if(this.fo===null)return;const i=(this.fo-e)/this.ee();this.pu=J(this.du).Lu+i,this.ou=!0,this.Ou()}Zo(){this.fo!==null&&(this.fo=null,this.$u())}Uu(){this.qu(this._n.rightOffset)}qu(e,i=400){if(!isFinite(e))throw new RangeError("offset is required and must be finite number");if(!isFinite(i)||i<=0)throw new RangeError("animationDuration (optional) must be finite positive number");const s=this.pu,r=performance.now();this.Hi.qn({Yu:n=>(n-r)/i>=1,Xu:n=>{const o=(n-r)/i;return o>=1?e:s+(e-s)*o}})}bt(e,i){this.ou=!0,this.ru=e,this.hu.K_(e,i),this.Ou()}Ku(){return this._u}Zu(){return this.uu}Gu(){return this.cu}Au(){return this.eu||0}Ju(e){const i=e.U_();this.zu(this.e_/i),this.pu=e.ui()-this.Au(),this.Ou(),this.ou=!0,this.Hi.Iu(),this.Hi.Nh()}Qu(){const e=this.Tu(),i=this.Pu();e!==null&&i!==null&&this.Ju(new So(e,i+this._n.rightOffset))}tc(e){const i=new So(e.from,e.to);this.Ju(i)}Ui(e){return this.bo.timeFormatter!==void 0?this.bo.timeFormatter(e.originalTime):this.N_.formatHorzItem(e.time)}Eu(){const{handleScroll:e,handleScale:i}=this.Hi.W();return!(e.horzTouchDrag||e.mouseWheel||e.pressedMouseMove||e.vertTouchDrag||i.axisDoubleClickReset.time||i.axisPressedMouseMove.time||i.mouseWheel||i.pinch)}Tu(){return this.ru.length===0?null:0}Pu(){return this.ru.length===0?null:this.ru.length-1}ic(e){return(this.e_-1-e)/this.mu}Bu(e){const i=this.ic(e),s=this.Au()+this.pu-i;return Math.round(1e6*s)/1e6}zu(e){const i=this.mu;this.mu=e,this.Du(),i!==this.mu&&(this.ou=!0,this.nc())}Su(){if(!this.ou)return;if(this.ou=!1,this.Ei())return void this.sc(br.su());const e=this.Au(),i=this.e_/this.mu,s=this.pu+e,r=new So(s-i+1,s);this.sc(new br(r))}Du(){const e=this.ec();if(this.mu<e&&(this.mu=e,this.ou=!0),this.e_!==0){const i=.5*this.e_;this.mu>i&&(this.mu=i,this.ou=!0)}}ec(){return this._n.fixLeftEdge&&this._n.fixRightEdge&&this.ru.length!==0?this.e_/this.ru.length:this._n.minBarSpacing}Ou(){const e=this.rc();this.pu>e&&(this.pu=e,this.ou=!0);const i=this.hc();i!==null&&this.pu<i&&(this.pu=i,this.ou=!0)}hc(){const e=this.Tu(),i=this.eu;return e===null||i===null?null:e-i-1+(this._n.fixLeftEdge?this.e_/this.mu:Math.min(2,this.ru.length))}rc(){return this._n.fixRightEdge?0:this.e_/this.mu-Math.min(2,this.ru.length)}Hu(){this.du={ee:this.ee(),Lu:this.Lu()}}$u(){this.du=null}Nu(e){let i=this.lu.get(e.weight);return i===void 0&&(i=new L2(s=>this.lc(s),this.N_),this.lu.set(e.weight,i)),i.F_(e)}lc(e){return this.N_.formatTickmark(e,this.bo)}sc(e){const i=this.au;this.au=e,Tm(i.iu(),this.au.iu())||this._u.m(),Tm(i.nu(),this.au.nu())||this.uu.m(),this.nc()}nc(){this.fu=null}gu(){this.nc(),this.lu.clear()}bu(){this.N_.updateFormatter(this.bo)}Mu(){if(!this._n.fixLeftEdge)return;const e=this.Tu();if(e===null)return;const i=this.qs();if(i===null)return;const s=i.Rs()-e;if(s<0){const r=this.pu-s-1;this.Zn(r)}this.Du()}xu(){this.Ou(),this.Du()}}class F2{K(e,i,s){e.useMediaCoordinateSpace(r=>this.Z(r,i,s))}fl(e,i,s){e.useMediaCoordinateSpace(r=>this.ac(r,i,s))}ac(e,i,s){}}class j2 extends F2{constructor(e){super(),this.oc=new Map,this.zt=e}Z(e){}ac(e){if(!this.zt.yt)return;const{context:i,mediaSize:s}=e;let r=0;for(const o of this.zt._c){if(o.Zt.length===0)continue;i.font=o.R;const a=this.uc(i,o.Zt);a>s.width?o.ju=s.width/a:o.ju=1,r+=o.cc*o.ju}let n=0;switch(this.zt.dc){case"top":n=0;break;case"center":n=Math.max((s.height-r)/2,0);break;case"bottom":n=Math.max(s.height-r,0)}i.fillStyle=this.zt.O;for(const o of this.zt._c){i.save();let a=0;switch(this.zt.fc){case"left":i.textAlign="left",a=o.cc/2;break;case"center":i.textAlign="center",a=s.width/2;break;case"right":i.textAlign="right",a=s.width-1-o.cc/2}i.translate(a,n),i.textBaseline="top",i.font=o.R,i.scale(o.ju,o.ju),i.fillText(o.Zt,0,o.vc),i.restore(),n+=o.cc*o.ju}}uc(e,i){const s=this.mc(e.font);let r=s.get(i);return r===void 0&&(r=e.measureText(i).width,s.set(i,r)),r}mc(e){let i=this.oc.get(e);return i===void 0&&(i=new Map,this.oc.set(e,i)),i}}class B2{constructor(e){this.ft=!0,this.Ft={yt:!1,O:"",_c:[],dc:"center",fc:"center"},this.Wt=new j2(this.Ft),this.jt=e}bt(){this.ft=!0}gt(){return this.ft&&(this.Mt(),this.ft=!1),this.Wt}Mt(){const e=this.jt.W(),i=this.Ft;i.yt=e.visible,i.yt&&(i.O=e.color,i.fc=e.horzAlign,i.dc=e.vertAlign,i._c=[{Zt:e.text,R:kr(e.fontSize,e.fontFamily,e.fontStyle),cc:1.2*e.fontSize,vc:0,ju:0}])}}class H2 extends ch{constructor(e,i){super(),this._n=i,this.mn=new B2(this)}Tn(){return[]}Cn(){return[this.mn]}W(){return this._n}Rn(){this.mn.bt()}}var xm,Em,Im,Dm,km;(function(t){t[t.OnTouchEnd=0]="OnTouchEnd",t[t.OnNextTap=1]="OnNextTap"})(xm||(xm={}));class U2{constructor(e,i,s){this.bc=[],this.wc=[],this.e_=0,this.gc=null,this.Mc=new at,this.xc=new at,this.Sc=null,this.kc=e,this._n=i,this.N_=s,this.yc=new T$(this),this.wl=new z2(this,i.timeScale,this._n.localization,s),this.vt=new R$(this,i.crosshair),this.Cc=new C2(i.crosshair),this.Tc=new H2(this,i.watermark),this.Pc(),this.bc[0].p_(2e3),this.Rc=this.Dc(0),this.Oc=this.Dc(1)}$l(){this.Ac(xt.ns())}Nh(){this.Ac(xt.ts())}sa(){this.Ac(new xt(1))}Ul(e){const i=this.Vc(e);this.Ac(i)}Bc(){return this.gc}Ic(e){const i=this.gc;this.gc=e,i!==null&&this.Ul(i.zc),e!==null&&this.Ul(e.zc)}W(){return this._n}Eh(e){$i(this._n,e),this.bc.forEach(i=>i.c_(e)),e.timeScale!==void 0&&this.wl.Eh(e.timeScale),e.localization!==void 0&&this.wl.wu(e.localization),(e.leftPriceScale||e.rightPriceScale)&&this.Mc.m(),this.Rc=this.Dc(0),this.Oc=this.Dc(1),this.$l()}Lc(e,i){if(e==="left")return void this.Eh({leftPriceScale:i});if(e==="right")return void this.Eh({rightPriceScale:i});const s=this.Ec(e);s!==null&&(s.Dt.Eh(i),this.Mc.m())}Ec(e){for(const i of this.bc){const s=i.d_(e);if(s!==null)return{Ht:i,Dt:s}}return null}St(){return this.wl}Nc(){return this.bc}Fc(){return this.Tc}Wc(){return this.vt}jc(){return this.xc}Hc(e,i){e.Oo(i),this.Iu()}m_(e){this.e_=e,this.wl.m_(this.e_),this.bc.forEach(i=>i.m_(e)),this.Iu()}Pc(e){const i=new N2(this.wl,this);e!==void 0?this.bc.splice(e,0,i):this.bc.push(i);const s=e===void 0?this.bc.length-1:e,r=xt.ns();return r.Ln(s,{En:0,Nn:!0}),this.Ac(r),i}y_(e,i,s){e.y_(i,s)}C_(e,i,s){e.C_(i,s),this.ql(),this.Ac(this.$c(e,2))}T_(e,i){e.T_(i),this.Ac(this.$c(e,2))}P_(e,i,s){i.yo()||e.P_(i,s)}R_(e,i,s){i.yo()||(e.R_(i,s),this.ql(),this.Ac(this.$c(e,2)))}D_(e,i){i.yo()||(e.D_(i),this.Ac(this.$c(e,2)))}A_(e,i){e.A_(i),this.Ac(this.$c(e,2))}Uc(e){this.wl.Uo(e)}qc(e,i){const s=this.St();if(s.Ei()||i===0)return;const r=s.ji();e=Math.max(1,Math.min(e,r)),s.ju(e,i),this.Iu()}Yc(e){this.Xc(0),this.Kc(e),this.Zc()}Gc(e){this.wl.qo(e),this.Iu()}Jc(){this.wl.Yo(),this.Nh()}Xc(e){this.wl.Xo(e)}Kc(e){this.wl.Ko(e),this.Iu()}Zc(){this.wl.Zo(),this.Nh()}wt(){return this.wc}Qc(e,i,s,r,n){this.vt.bn(e,i);let o=NaN,a=this.wl.Vu(e);const l=this.wl.qs();l!==null&&(a=Math.min(Math.max(l.Rs(),a),l.ui()));const d=r.dn(),u=d.Ct();u!==null&&(o=d.fn(i,u)),o=this.Cc.Ca(o,a,r),this.vt.xn(a,o,r),this.sa(),n||this.xc.m(this.vt.xt(),{x:e,y:i},s)}td(e,i,s){const r=s.dn(),n=r.Ct(),o=r.Rt(e,J(n)),a=this.wl.ya(i,!0),l=this.wl.It(J(a));this.Qc(l,o,null,s,!0)}nd(e){this.Wc().kn(),this.sa(),e||this.xc.m(null,null,null)}ql(){const e=this.vt.Ht();if(e!==null){const i=this.vt.gn(),s=this.vt.Mn();this.Qc(i,s,null,e)}this.vt.Rn()}sd(e,i,s){const r=this.wl.vn(0);i!==void 0&&s!==void 0&&this.wl.bt(i,s);const n=this.wl.vn(0),o=this.wl.Au(),a=this.wl.qs();if(a!==null&&r!==null&&n!==null){const l=a.Yr(o),d=this.N_.key(r)>this.N_.key(n),u=e!==null&&e>o&&!d,h=this.wl.W().allowShiftVisibleRangeOnWhitespaceReplacement,p=l&&(s!==void 0||h)&&this.wl.W().shiftVisibleRangeOnNewBar;if(u&&!p){const g=e-o;this.wl.Zn(this.wl.Lu()-g)}}this.wl.Wu(e)}Kl(e){e!==null&&e.B_()}_r(e){const i=this.bc.find(s=>s.No().includes(e));return i===void 0?null:i}Iu(){this.Tc.Rn(),this.bc.forEach(e=>e.B_()),this.ql()}S(){this.bc.forEach(e=>e.S()),this.bc.length=0,this._n.localization.priceFormatter=void 0,this._n.localization.percentageFormatter=void 0,this._n.localization.timeFormatter=void 0}ed(){return this.yc}vr(){return this.yc.W()}f_(){return this.Mc}rd(e,i,s){const r=this.bc[0],n=this.hd(i,e,r,s);return this.wc.push(n),this.wc.length===1?this.$l():this.Nh(),n}ld(e){const i=this._r(e),s=this.wc.indexOf(e);en(s!==-1,"Series not found"),this.wc.splice(s,1),J(i).jo(e),e.S&&e.S()}Hl(e,i){const s=J(this._r(e));s.jo(e);const r=this.Ec(i);if(r===null){const n=e.Xi();s.Fo(e,i,n)}else{const n=r.Ht===s?e.Xi():void 0;r.Ht.Fo(e,i,n)}}Qu(){const e=xt.ts();e.jn(),this.Ac(e)}ad(e){const i=xt.ts();i.Un(e),this.Ac(i)}Xn(){const e=xt.ts();e.Xn(),this.Ac(e)}Kn(e){const i=xt.ts();i.Kn(e),this.Ac(i)}Zn(e){const i=xt.ts();i.Zn(e),this.Ac(i)}qn(e){const i=xt.ts();i.qn(e),this.Ac(i)}Hn(){const e=xt.ts();e.Hn(),this.Ac(e)}od(){return this._n.rightPriceScale.visible?"right":"left"}_d(){return this.Oc}q(){return this.Rc}Vt(e){const i=this.Oc,s=this.Rc;if(i===s)return i;if(e=Math.max(0,Math.min(100,Math.round(100*e))),this.Sc===null||this.Sc.ys!==s||this.Sc.Cs!==i)this.Sc={ys:s,Cs:i,ud:new Map};else{const n=this.Sc.ud.get(e);if(n!==void 0)return n}const r=function(n,o,a){const[l,d,u,h]=_l(n),[p,g,w,_]=_l(o),P=[ai(l+a*(p-l)),ai(d+a*(g-d)),ai(u+a*(w-u)),ty(h+a*(_-h))];return`rgba(${P[0]}, ${P[1]}, ${P[2]}, ${P[3]})`}(s,i,e/100);return this.Sc.ud.set(e,r),r}$c(e,i){const s=new xt(i);if(e!==null){const r=this.bc.indexOf(e);s.Ln(r,{En:i})}return s}Vc(e,i){return i===void 0&&(i=2),this.$c(this._r(e),i)}Ac(e){this.kc&&this.kc(e),this.bc.forEach(i=>i.z_().Fh().bt())}hd(e,i,s,r){const n=new mh(this,e,i,s,r),o=e.priceScaleId!==void 0?e.priceScaleId:this.od();return s.Fo(n,o),ad(o)||n.Eh(e),n}Dc(e){const i=this._n.layout;return i.background.type==="gradient"?e===0?i.background.topColor:i.background.bottomColor:i.background.color}}function Gc(t){return!Ji(t)&&!la(t)}function yy(t){return Ji(t)}(function(t){t[t.Disabled=0]="Disabled",t[t.Continuous=1]="Continuous",t[t.OnDataUpdate=2]="OnDataUpdate"})(Em||(Em={})),function(t){t[t.LastBar=0]="LastBar",t[t.LastVisible=1]="LastVisible"}(Im||(Im={})),function(t){t.Solid="solid",t.VerticalGradient="gradient"}(Dm||(Dm={})),function(t){t[t.Year=0]="Year",t[t.Month=1]="Month",t[t.DayOfMonth=2]="DayOfMonth",t[t.Time=3]="Time",t[t.TimeWithSeconds=4]="TimeWithSeconds"}(km||(km={}));const Cm=t=>t.getUTCFullYear();function Y2(t,e,i){return e.replace(/yyyy/g,(s=>Ss(Cm(s),4))(t)).replace(/yy/g,(s=>Ss(Cm(s)%100,2))(t)).replace(/MMMM/g,((s,r)=>new Date(s.getUTCFullYear(),s.getUTCMonth(),1).toLocaleString(r,{month:"long"}))(t,i)).replace(/MMM/g,((s,r)=>new Date(s.getUTCFullYear(),s.getUTCMonth(),1).toLocaleString(r,{month:"short"}))(t,i)).replace(/MM/g,(s=>Ss((r=>r.getUTCMonth()+1)(s),2))(t)).replace(/dd/g,(s=>Ss((r=>r.getUTCDate())(s),2))(t))}class by{constructor(e="yyyy-MM-dd",i="default"){this.dd=e,this.fd=i}F_(e){return Y2(e,this.dd,this.fd)}}class G2{constructor(e){this.vd=e||"%h:%m:%s"}F_(e){return this.vd.replace("%h",Ss(e.getUTCHours(),2)).replace("%m",Ss(e.getUTCMinutes(),2)).replace("%s",Ss(e.getUTCSeconds(),2))}}const K2={pd:"yyyy-MM-dd",md:"%h:%m:%s",bd:" ",wd:"default"};class q2{constructor(e={}){const i=Object.assign(Object.assign({},K2),e);this.gd=new by(i.pd,i.wd),this.Md=new G2(i.md),this.xd=i.bd}F_(e){return`${this.gd.F_(e)}${this.xd}${this.Md.F_(e)}`}}function Ia(t){return 60*t*60*1e3}function Yd(t){return 60*t*1e3}const Da=[{Sd:(Pm=1,1e3*Pm),kd:10},{Sd:Yd(1),kd:20},{Sd:Yd(5),kd:21},{Sd:Yd(30),kd:22},{Sd:Ia(1),kd:30},{Sd:Ia(3),kd:31},{Sd:Ia(6),kd:32},{Sd:Ia(12),kd:33}];var Pm;function Mm(t,e){if(t.getUTCFullYear()!==e.getUTCFullYear())return 70;if(t.getUTCMonth()!==e.getUTCMonth())return 60;if(t.getUTCDate()!==e.getUTCDate())return 50;for(let i=Da.length-1;i>=0;--i)if(Math.floor(e.getTime()/Da[i].Sd)!==Math.floor(t.getTime()/Da[i].Sd))return Da[i].kd;return 0}function Gd(t){let e=t;if(la(t)&&(e=ph(t)),!Gc(e))throw new Error("time must be of type BusinessDay");const i=new Date(Date.UTC(e.year,e.month-1,e.day,0,0,0,0));return{yd:Math.round(i.getTime()/1e3),Cd:e}}function Am(t){if(!yy(t))throw new Error("time must be of type isUTCTimestamp");return{yd:t}}function ph(t){const e=new Date(t);if(isNaN(e.getTime()))throw new Error(`Invalid date string=${t}, expected format=yyyy-mm-dd`);return{day:e.getUTCDate(),month:e.getUTCMonth()+1,year:e.getUTCFullYear()}}function Om(t){la(t.time)&&(t.time=ph(t.time))}class Rm{options(){return this._n}setOptions(e){this._n=e,this.updateFormatter(e.localization)}preprocessData(e){Array.isArray(e)?function(i){i.forEach(Om)}(e):Om(e)}createConverterToInternalObj(e){return J(function(i){return i.length===0?null:Gc(i[0].time)||la(i[0].time)?Gd:Am}(e))}key(e){return typeof e=="object"&&"yd"in e?e.yd:this.key(this.convertHorzItemToInternal(e))}cacheKey(e){const i=e;return i.Cd===void 0?new Date(1e3*i.yd).getTime():new Date(Date.UTC(i.Cd.year,i.Cd.month-1,i.Cd.day)).getTime()}convertHorzItemToInternal(e){return yy(i=e)?Am(i):Gc(i)?Gd(i):Gd(ph(i));var i}updateFormatter(e){if(!this._n)return;const i=e.dateFormat;this._n.timeScale.timeVisible?this.Td=new q2({pd:i,md:this._n.timeScale.secondsVisible?"%h:%m:%s":"%h:%m",bd:"   ",wd:e.locale}):this.Td=new by(i,e.locale)}formatHorzItem(e){const i=e;return this.Td.F_(new Date(1e3*i.yd))}formatTickmark(e,i){const s=function(n,o,a){switch(n){case 0:case 10:return o?a?4:3:2;case 20:case 21:case 22:case 30:case 31:case 32:case 33:return o?3:2;case 50:return 2;case 60:return 1;case 70:return 0}}(e.weight,this._n.timeScale.timeVisible,this._n.timeScale.secondsVisible),r=this._n.timeScale;if(r.tickMarkFormatter!==void 0){const n=r.tickMarkFormatter(e.originalTime,s,i.locale);if(n!==null)return n}return function(n,o,a){const l={};switch(o){case 0:l.year="numeric";break;case 1:l.month="short";break;case 2:l.day="numeric";break;case 3:l.hour12=!1,l.hour="2-digit",l.minute="2-digit";break;case 4:l.hour12=!1,l.hour="2-digit",l.minute="2-digit",l.second="2-digit"}const d=n.Cd===void 0?new Date(1e3*n.yd):new Date(Date.UTC(n.Cd.year,n.Cd.month-1,n.Cd.day));return new Date(d.getUTCFullYear(),d.getUTCMonth(),d.getUTCDate(),d.getUTCHours(),d.getUTCMinutes(),d.getUTCSeconds(),d.getUTCMilliseconds()).toLocaleString(a,l)}(e.time,s,i.locale)}maxTickMarkWeight(e){let i=e.reduce(W2,e[0]).weight;return i>30&&i<50&&(i=30),i}fillWeightsForPoints(e,i){(function(s,r=0){if(s.length===0)return;let n=r===0?null:s[r-1].time.yd,o=n!==null?new Date(1e3*n):null,a=0;for(let l=r;l<s.length;++l){const d=s[l],u=new Date(1e3*d.time.yd);o!==null&&(d.timeWeight=Mm(u,o)),a+=d.time.yd-(n||d.time.yd),n=d.time.yd,o=u}if(r===0&&s.length>1){const l=Math.ceil(a/(s.length-1)),d=new Date(1e3*(s[0].time.yd-l));s[0].timeWeight=Mm(new Date(1e3*s[0].time.yd),d)}})(e,i)}static Pd(e){return $i({localization:{dateFormat:"dd MMM 'yy"}},e??{})}}const Cr=typeof window<"u";function $m(){return!!Cr&&window.navigator.userAgent.toLowerCase().indexOf("firefox")>-1}function Kd(){return!!Cr&&/iPhone|iPad|iPod/.test(window.navigator.platform)}function Kc(t){return t+t%2}function qd(t,e){return t.Rd-e.Rd}function Jd(t,e,i){const s=(t.Rd-e.Rd)/(t.ot-e.ot);return Math.sign(s)*Math.min(Math.abs(s),i)}class J2{constructor(e,i,s,r){this.Dd=null,this.Od=null,this.Ad=null,this.Vd=null,this.Bd=null,this.Id=0,this.zd=0,this.Ld=e,this.Ed=i,this.Nd=s,this.ss=r}Fd(e,i){if(this.Dd!==null){if(this.Dd.ot===i)return void(this.Dd.Rd=e);if(Math.abs(this.Dd.Rd-e)<this.ss)return}this.Vd=this.Ad,this.Ad=this.Od,this.Od=this.Dd,this.Dd={ot:i,Rd:e}}Pr(e,i){if(this.Dd===null||this.Od===null||i-this.Dd.ot>50)return;let s=0;const r=Jd(this.Dd,this.Od,this.Ed),n=qd(this.Dd,this.Od),o=[r],a=[n];if(s+=n,this.Ad!==null){const d=Jd(this.Od,this.Ad,this.Ed);if(Math.sign(d)===Math.sign(r)){const u=qd(this.Od,this.Ad);if(o.push(d),a.push(u),s+=u,this.Vd!==null){const h=Jd(this.Ad,this.Vd,this.Ed);if(Math.sign(h)===Math.sign(r)){const p=qd(this.Ad,this.Vd);o.push(h),a.push(p),s+=p}}}}let l=0;for(let d=0;d<o.length;++d)l+=a[d]/s*o[d];Math.abs(l)<this.Ld||(this.Bd={Rd:e,ot:i},this.zd=l,this.Id=function(d,u){const h=Math.log(u);return Math.log(1*h/-d)/h}(Math.abs(l),this.Nd))}Xu(e){const i=J(this.Bd),s=e-i.ot;return i.Rd+this.zd*(Math.pow(this.Nd,s)-1)/Math.log(this.Nd)}Yu(e){return this.Bd===null||this.Wd(e)===this.Id}Wd(e){const i=e-J(this.Bd).ot;return Math.min(i,this.Id)}}function Rn(t,e){const i=J(t.ownerDocument).createElement("canvas");t.appendChild(i);const s=l$(i,{options:{allowResizeObserver:!1},transform:(r,n)=>({width:Math.max(r.width,n.width),height:Math.max(r.height,n.height)})});return s.resizeCanvasElement(e),s}function $n(t){var e;t.width=1,t.height=1,(e=t.getContext("2d"))===null||e===void 0||e.clearRect(0,0,1,1)}function qc(t,e,i,s){t.fl&&t.fl(e,i,s)}function Qa(t,e,i,s){t.K(e,i,s)}function Jc(t,e,i,s){const r=t(i,s);for(const n of r){const o=n.gt();o!==null&&e(o)}}function Q2(t){Cr&&window.chrome!==void 0&&t.addEventListener("mousedown",e=>{if(e.button===1)return e.preventDefault(),!1})}class gh{constructor(e,i,s){this.jd=0,this.Hd=null,this.$d={nt:Number.NEGATIVE_INFINITY,st:Number.POSITIVE_INFINITY},this.Ud=0,this.qd=null,this.Yd={nt:Number.NEGATIVE_INFINITY,st:Number.POSITIVE_INFINITY},this.Xd=null,this.Kd=!1,this.Zd=null,this.Gd=null,this.Jd=!1,this.Qd=!1,this.tf=!1,this.if=null,this.nf=null,this.sf=null,this.ef=null,this.rf=null,this.hf=null,this.lf=null,this.af=0,this._f=!1,this.uf=!1,this.cf=!1,this.df=0,this.ff=null,this.vf=!Kd(),this.pf=r=>{this.mf(r)},this.bf=r=>{if(this.wf(r)){const n=this.gf(r);if(++this.Ud,this.qd&&this.Ud>1){const{Mf:o}=this.xf(Ui(r),this.Yd);o<30&&!this.tf&&this.Sf(n,this.yf.kf),this.Cf()}}else{const n=this.gf(r);if(++this.jd,this.Hd&&this.jd>1){const{Mf:o}=this.xf(Ui(r),this.$d);o<5&&!this.Qd&&this.Tf(n,this.yf.Pf),this.Rf()}}},this.Df=e,this.yf=i,this._n=s,this.Of()}S(){this.if!==null&&(this.if(),this.if=null),this.nf!==null&&(this.nf(),this.nf=null),this.ef!==null&&(this.ef(),this.ef=null),this.rf!==null&&(this.rf(),this.rf=null),this.hf!==null&&(this.hf(),this.hf=null),this.sf!==null&&(this.sf(),this.sf=null),this.Af(),this.Rf()}Vf(e){this.ef&&this.ef();const i=this.Bf.bind(this);if(this.ef=()=>{this.Df.removeEventListener("mousemove",i)},this.Df.addEventListener("mousemove",i),this.wf(e))return;const s=this.gf(e);this.Tf(s,this.yf.If),this.vf=!0}Rf(){this.Hd!==null&&clearTimeout(this.Hd),this.jd=0,this.Hd=null,this.$d={nt:Number.NEGATIVE_INFINITY,st:Number.POSITIVE_INFINITY}}Cf(){this.qd!==null&&clearTimeout(this.qd),this.Ud=0,this.qd=null,this.Yd={nt:Number.NEGATIVE_INFINITY,st:Number.POSITIVE_INFINITY}}Bf(e){if(this.cf||this.Gd!==null||this.wf(e))return;const i=this.gf(e);this.Tf(i,this.yf.zf),this.vf=!0}Lf(e){const i=Qd(e.changedTouches,J(this.ff));if(i===null||(this.df=ka(e),this.lf!==null)||this.uf)return;this._f=!0;const s=this.xf(Ui(i),J(this.Gd)),{Ef:r,Nf:n,Mf:o}=s;if(this.Jd||!(o<5)){if(!this.Jd){const a=.5*r,l=n>=a&&!this._n.Ff(),d=a>n&&!this._n.Wf();l||d||(this.uf=!0),this.Jd=!0,this.tf=!0,this.Af(),this.Cf()}if(!this.uf){const a=this.gf(e,i);this.Sf(a,this.yf.jf),Qn(e)}}}Hf(e){if(e.button!==0)return;const i=this.xf(Ui(e),J(this.Zd)),{Mf:s}=i;if(s>=5&&(this.Qd=!0,this.Rf()),this.Qd){const r=this.gf(e);this.Tf(r,this.yf.$f)}}xf(e,i){const s=Math.abs(i.nt-e.nt),r=Math.abs(i.st-e.st);return{Ef:s,Nf:r,Mf:s+r}}Uf(e){let i=Qd(e.changedTouches,J(this.ff));if(i===null&&e.touches.length===0&&(i=e.changedTouches[0]),i===null)return;this.ff=null,this.df=ka(e),this.Af(),this.Gd=null,this.hf&&(this.hf(),this.hf=null);const s=this.gf(e,i);if(this.Sf(s,this.yf.qf),++this.Ud,this.qd&&this.Ud>1){const{Mf:r}=this.xf(Ui(i),this.Yd);r<30&&!this.tf&&this.Sf(s,this.yf.kf),this.Cf()}else this.tf||(this.Sf(s,this.yf.Yf),this.yf.Yf&&Qn(e));this.Ud===0&&Qn(e),e.touches.length===0&&this.Kd&&(this.Kd=!1,Qn(e))}mf(e){if(e.button!==0)return;const i=this.gf(e);if(this.Zd=null,this.cf=!1,this.rf&&(this.rf(),this.rf=null),$m()&&this.Df.ownerDocument.documentElement.removeEventListener("mouseleave",this.pf),!this.wf(e))if(this.Tf(i,this.yf.Xf),++this.jd,this.Hd&&this.jd>1){const{Mf:s}=this.xf(Ui(e),this.$d);s<5&&!this.Qd&&this.Tf(i,this.yf.Pf),this.Rf()}else this.Qd||this.Tf(i,this.yf.Kf)}Af(){this.Xd!==null&&(clearTimeout(this.Xd),this.Xd=null)}Zf(e){if(this.ff!==null)return;const i=e.changedTouches[0];this.ff=i.identifier,this.df=ka(e);const s=this.Df.ownerDocument.documentElement;this.tf=!1,this.Jd=!1,this.uf=!1,this.Gd=Ui(i),this.hf&&(this.hf(),this.hf=null);{const n=this.Lf.bind(this),o=this.Uf.bind(this);this.hf=()=>{s.removeEventListener("touchmove",n),s.removeEventListener("touchend",o)},s.addEventListener("touchmove",n,{passive:!1}),s.addEventListener("touchend",o,{passive:!1}),this.Af(),this.Xd=setTimeout(this.Gf.bind(this,e),240)}const r=this.gf(e,i);this.Sf(r,this.yf.Jf),this.qd||(this.Ud=0,this.qd=setTimeout(this.Cf.bind(this),500),this.Yd=Ui(i))}Qf(e){if(e.button!==0)return;const i=this.Df.ownerDocument.documentElement;$m()&&i.addEventListener("mouseleave",this.pf),this.Qd=!1,this.Zd=Ui(e),this.rf&&(this.rf(),this.rf=null);{const r=this.Hf.bind(this),n=this.mf.bind(this);this.rf=()=>{i.removeEventListener("mousemove",r),i.removeEventListener("mouseup",n)},i.addEventListener("mousemove",r),i.addEventListener("mouseup",n)}if(this.cf=!0,this.wf(e))return;const s=this.gf(e);this.Tf(s,this.yf.tv),this.Hd||(this.jd=0,this.Hd=setTimeout(this.Rf.bind(this),500),this.$d=Ui(e))}Of(){this.Df.addEventListener("mouseenter",this.Vf.bind(this)),this.Df.addEventListener("touchcancel",this.Af.bind(this));{const e=this.Df.ownerDocument,i=s=>{this.yf.iv&&(s.composed&&this.Df.contains(s.composedPath()[0])||s.target&&this.Df.contains(s.target)||this.yf.iv())};this.nf=()=>{e.removeEventListener("touchstart",i)},this.if=()=>{e.removeEventListener("mousedown",i)},e.addEventListener("mousedown",i),e.addEventListener("touchstart",i,{passive:!0})}Kd()&&(this.sf=()=>{this.Df.removeEventListener("dblclick",this.bf)},this.Df.addEventListener("dblclick",this.bf)),this.Df.addEventListener("mouseleave",this.nv.bind(this)),this.Df.addEventListener("touchstart",this.Zf.bind(this),{passive:!0}),Q2(this.Df),this.Df.addEventListener("mousedown",this.Qf.bind(this)),this.sv(),this.Df.addEventListener("touchmove",()=>{},{passive:!1})}sv(){this.yf.ev===void 0&&this.yf.rv===void 0&&this.yf.hv===void 0||(this.Df.addEventListener("touchstart",e=>this.lv(e.touches),{passive:!0}),this.Df.addEventListener("touchmove",e=>{if(e.touches.length===2&&this.lf!==null&&this.yf.rv!==void 0){const i=Nm(e.touches[0],e.touches[1])/this.af;this.yf.rv(this.lf,i),Qn(e)}},{passive:!1}),this.Df.addEventListener("touchend",e=>{this.lv(e.touches)}))}lv(e){e.length===1&&(this._f=!1),e.length!==2||this._f||this.Kd?this.av():this.ov(e)}ov(e){const i=this.Df.getBoundingClientRect()||{left:0,top:0};this.lf={nt:(e[0].clientX-i.left+(e[1].clientX-i.left))/2,st:(e[0].clientY-i.top+(e[1].clientY-i.top))/2},this.af=Nm(e[0],e[1]),this.yf.ev!==void 0&&this.yf.ev(),this.Af()}av(){this.lf!==null&&(this.lf=null,this.yf.hv!==void 0&&this.yf.hv())}nv(e){if(this.ef&&this.ef(),this.wf(e)||!this.vf)return;const i=this.gf(e);this.Tf(i,this.yf._v),this.vf=!Kd()}Gf(e){const i=Qd(e.touches,J(this.ff));if(i===null)return;const s=this.gf(e,i);this.Sf(s,this.yf.uv),this.tf=!0,this.Kd=!0}wf(e){return e.sourceCapabilities&&e.sourceCapabilities.firesTouchEvents!==void 0?e.sourceCapabilities.firesTouchEvents:ka(e)<this.df+500}Sf(e,i){i&&i.call(this.yf,e)}Tf(e,i){i&&i.call(this.yf,e)}gf(e,i){const s=i||e,r=this.Df.getBoundingClientRect()||{left:0,top:0};return{clientX:s.clientX,clientY:s.clientY,pageX:s.pageX,pageY:s.pageY,screenX:s.screenX,screenY:s.screenY,localX:s.clientX-r.left,localY:s.clientY-r.top,ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey,metaKey:e.metaKey,cv:!e.type.startsWith("mouse")&&e.type!=="contextmenu"&&e.type!=="click",dv:e.type,fv:s.target,vv:e.view,pv:()=>{e.type!=="touchstart"&&Qn(e)}}}}function Nm(t,e){const i=t.clientX-e.clientX,s=t.clientY-e.clientY;return Math.sqrt(i*i+s*s)}function Qn(t){t.cancelable&&t.preventDefault()}function Ui(t){return{nt:t.pageX,st:t.pageY}}function ka(t){return t.timeStamp||performance.now()}function Qd(t,e){for(let i=0;i<t.length;++i)if(t[i].identifier===e)return t[i];return null}function Ca(t){return{zc:t.zc,mv:{mr:t.bv.externalId},wv:t.bv.cursorStyle}}function Z2(t,e,i){for(const s of t){const r=s.gt();if(r!==null&&r.pr){const n=r.pr(e,i);if(n!==null)return{vv:s,mv:n}}}return null}function Zd(t,e){return i=>{var s,r,n,o;return((r=(s=i.Dt())===null||s===void 0?void 0:s.xa())!==null&&r!==void 0?r:"")!==e?[]:(o=(n=i.la)===null||n===void 0?void 0:n.call(i,t))!==null&&o!==void 0?o:[]}}class Lm{constructor(e,i,s,r){this.zi=null,this.gv=null,this.Mv=!1,this.xv=new zo(200),this.Zr=null,this.Sv=0,this.kv=!1,this.yv=()=>{this.kv||this.Qi.Cv().$t().Nh()},this.Tv=()=>{this.kv||this.Qi.Cv().$t().Nh()},this.Qi=e,this._n=i,this.mo=i.layout,this.yc=s,this.Pv=r==="left",this.Rv=Zd("normal",r),this.Dv=Zd("top",r),this.Ov=Zd("bottom",r),this.Av=document.createElement("div"),this.Av.style.height="100%",this.Av.style.overflow="hidden",this.Av.style.width="25px",this.Av.style.left="0",this.Av.style.position="relative",this.Vv=Rn(this.Av,qe({width:16,height:16})),this.Vv.subscribeSuggestedBitmapSizeChanged(this.yv);const n=this.Vv.canvasElement;n.style.position="absolute",n.style.zIndex="1",n.style.left="0",n.style.top="0",this.Bv=Rn(this.Av,qe({width:16,height:16})),this.Bv.subscribeSuggestedBitmapSizeChanged(this.Tv);const o=this.Bv.canvasElement;o.style.position="absolute",o.style.zIndex="2",o.style.left="0",o.style.top="0";const a={tv:this.Iv.bind(this),Jf:this.Iv.bind(this),$f:this.zv.bind(this),jf:this.zv.bind(this),iv:this.Lv.bind(this),Xf:this.Ev.bind(this),qf:this.Ev.bind(this),Pf:this.Nv.bind(this),kf:this.Nv.bind(this),If:this.Fv.bind(this),_v:this.Wv.bind(this)};this.jv=new gh(this.Bv.canvasElement,a,{Ff:()=>!this._n.handleScroll.vertTouchDrag,Wf:()=>!0})}S(){this.jv.S(),this.Bv.unsubscribeSuggestedBitmapSizeChanged(this.Tv),$n(this.Bv.canvasElement),this.Bv.dispose(),this.Vv.unsubscribeSuggestedBitmapSizeChanged(this.yv),$n(this.Vv.canvasElement),this.Vv.dispose(),this.zi!==null&&this.zi.$o().p(this),this.zi=null}Hv(){return this.Av}P(){return this.mo.fontSize}$v(){const e=this.yc.W();return this.Zr!==e.R&&(this.xv.Qe(),this.Zr=e.R),e}Uv(){if(this.zi===null)return 0;let e=0;const i=this.$v(),s=J(this.Vv.canvasElement.getContext("2d"));s.save();const r=this.zi.La();s.font=this.qv(),r.length>0&&(e=Math.max(this.xv.Mi(s,r[0].Za),this.xv.Mi(s,r[r.length-1].Za)));const n=this.Yv();for(let l=n.length;l--;){const d=this.xv.Mi(s,n[l].Zt());d>e&&(e=d)}const o=this.zi.Ct();if(o!==null&&this.gv!==null){const l=this.zi.fn(1,o),d=this.zi.fn(this.gv.height-2,o);e=Math.max(e,this.xv.Mi(s,this.zi.Ni(Math.floor(Math.min(l,d))+.11111111111111,o)),this.xv.Mi(s,this.zi.Ni(Math.ceil(Math.max(l,d))-.11111111111111,o)))}s.restore();const a=e||34;return Kc(Math.ceil(i.C+i.T+i.B+i.I+5+a))}Xv(e){this.gv!==null&&Dn(this.gv,e)||(this.gv=e,this.kv=!0,this.Vv.resizeCanvasElement(e),this.Bv.resizeCanvasElement(e),this.kv=!1,this.Av.style.width=`${e.width}px`,this.Av.style.height=`${e.height}px`)}Kv(){return J(this.gv).width}Zi(e){this.zi!==e&&(this.zi!==null&&this.zi.$o().p(this),this.zi=e,e.$o().l(this.ao.bind(this),this))}Dt(){return this.zi}Qe(){const e=this.Qi.Zv();this.Qi.Cv().$t().A_(e,J(this.Dt()))}Gv(e){if(this.gv===null)return;if(e!==1){this.Jv(),this.Vv.applySuggestedBitmapSize();const s=An(this.Vv);s!==null&&(s.useBitmapCoordinateSpace(r=>{this.Qv(r),this.Ae(r)}),this.Qi.tp(s,this.Ov),this.ip(s),this.Qi.tp(s,this.Rv),this.np(s))}this.Bv.applySuggestedBitmapSize();const i=An(this.Bv);i!==null&&(i.useBitmapCoordinateSpace(({context:s,bitmapSize:r})=>{s.clearRect(0,0,r.width,r.height)}),this.sp(i),this.Qi.tp(i,this.Dv))}ep(){return this.Vv.bitmapSize}rp(e,i,s){const r=this.ep();r.width>0&&r.height>0&&e.drawImage(this.Vv.canvasElement,i,s)}bt(){var e;(e=this.zi)===null||e===void 0||e.La()}Iv(e){if(this.zi===null||this.zi.Ei()||!this._n.handleScale.axisPressedMouseMove.price)return;const i=this.Qi.Cv().$t(),s=this.Qi.Zv();this.Mv=!0,i.y_(s,this.zi,e.localY)}zv(e){if(this.zi===null||!this._n.handleScale.axisPressedMouseMove.price)return;const i=this.Qi.Cv().$t(),s=this.Qi.Zv(),r=this.zi;i.C_(s,r,e.localY)}Lv(){if(this.zi===null||!this._n.handleScale.axisPressedMouseMove.price)return;const e=this.Qi.Cv().$t(),i=this.Qi.Zv(),s=this.zi;this.Mv&&(this.Mv=!1,e.T_(i,s))}Ev(e){if(this.zi===null||!this._n.handleScale.axisPressedMouseMove.price)return;const i=this.Qi.Cv().$t(),s=this.Qi.Zv();this.Mv=!1,i.T_(s,this.zi)}Nv(e){this._n.handleScale.axisDoubleClickReset.price&&this.Qe()}Fv(e){this.zi!==null&&(!this.Qi.Cv().$t().W().handleScale.axisPressedMouseMove.price||this.zi.fh()||this.zi.Co()||this.hp(1))}Wv(e){this.hp(0)}Yv(){const e=[],i=this.zi===null?void 0:this.zi;return(s=>{for(let r=0;r<s.length;++r){const n=s[r].Tn(this.Qi.Zv(),i);for(let o=0;o<n.length;o++)e.push(n[o])}})(this.Qi.Zv().No()),e}Qv({context:e,bitmapSize:i}){const{width:s,height:r}=i,n=this.Qi.Zv().$t(),o=n.q(),a=n._d();o===a?rd(e,0,0,s,r,o):iy(e,0,0,s,r,o,a)}Ae({context:e,bitmapSize:i,horizontalPixelRatio:s}){if(this.gv===null||this.zi===null||!this.zi.W().borderVisible)return;e.fillStyle=this.zi.W().borderColor;const r=Math.max(1,Math.floor(this.$v().C*s));let n;n=this.Pv?i.width-r:0,e.fillRect(n,0,r,i.height)}ip(e){if(this.gv===null||this.zi===null)return;const i=this.zi.La(),s=this.zi.W(),r=this.$v(),n=this.Pv?this.gv.width-r.T:0;s.borderVisible&&s.ticksVisible&&e.useBitmapCoordinateSpace(({context:o,horizontalPixelRatio:a,verticalPixelRatio:l})=>{o.fillStyle=s.borderColor;const d=Math.max(1,Math.floor(l)),u=Math.floor(.5*l),h=Math.round(r.T*a);o.beginPath();for(const p of i)o.rect(Math.floor(n*a),Math.round(p.Aa*l)-u,h,d);o.fill()}),e.useMediaCoordinateSpace(({context:o})=>{var a;o.font=this.qv(),o.fillStyle=(a=s.textColor)!==null&&a!==void 0?a:this.mo.textColor,o.textAlign=this.Pv?"right":"left",o.textBaseline="middle";const l=this.Pv?Math.round(n-r.B):Math.round(n+r.T+r.B),d=i.map(u=>this.xv.gi(o,u.Za));for(let u=i.length;u--;){const h=i[u];o.fillText(h.Za,l,h.Aa+d[u])}})}Jv(){if(this.gv===null||this.zi===null)return;let e=this.gv.height/2;const i=[],s=this.zi.No().slice(),r=this.Qi.Zv(),n=this.$v();this.zi===r.cr()&&this.Qi.Zv().No().forEach(l=>{r.ur(l)&&s.push(l)});const o=this.zi.Ta()[0],a=this.zi;s.forEach(l=>{const d=l.Tn(r,a);d.forEach(u=>{u.Oi(null),u.Ai()&&i.push(u)}),o===l&&d.length>0&&(e=d[0].Si())}),i.forEach(l=>l.Oi(l.Si())),this.zi.W().alignLabels&&this.lp(i,n,e)}lp(e,i,s){if(this.gv===null)return;const r=e.filter(o=>o.Si()<=s),n=e.filter(o=>o.Si()>s);r.sort((o,a)=>a.Si()-o.Si()),r.length&&n.length&&n.push(r[0]),n.sort((o,a)=>o.Si()-a.Si());for(const o of e){const a=Math.floor(o.Bt(i)/2),l=o.Si();l>-a&&l<a&&o.Oi(a),l>this.gv.height-a&&l<this.gv.height+a&&o.Oi(this.gv.height-a)}for(let o=1;o<r.length;o++){const a=r[o],l=r[o-1],d=l.Bt(i,!1),u=a.Si(),h=l.Di();u>h-d&&a.Oi(h-d)}for(let o=1;o<n.length;o++){const a=n[o],l=n[o-1],d=l.Bt(i,!0),u=a.Si(),h=l.Di();u<h+d&&a.Oi(h+d)}}np(e){if(this.gv===null)return;const i=this.Yv(),s=this.$v(),r=this.Pv?"right":"left";i.forEach(n=>{n.Vi()&&n.gt(J(this.zi)).K(e,s,this.xv,r)})}sp(e){if(this.gv===null||this.zi===null)return;const i=this.Qi.Cv().$t(),s=[],r=this.Qi.Zv(),n=i.Wc().Tn(r,this.zi);n.length&&s.push(n);const o=this.$v(),a=this.Pv?"right":"left";s.forEach(l=>{l.forEach(d=>{d.gt(J(this.zi)).K(e,o,this.xv,a)})})}hp(e){this.Av.style.cursor=e===1?"ns-resize":"default"}ao(){const e=this.Uv();this.Sv<e&&this.Qi.Cv().$t().$l(),this.Sv=e}qv(){return kr(this.mo.fontSize,this.mo.fontFamily)}}function X2(t,e){var i,s;return(s=(i=t.ra)===null||i===void 0?void 0:i.call(t,e))!==null&&s!==void 0?s:[]}function Pa(t,e){var i,s;return(s=(i=t.Cn)===null||i===void 0?void 0:i.call(t,e))!==null&&s!==void 0?s:[]}function eN(t,e){var i,s;return(s=(i=t.Gi)===null||i===void 0?void 0:i.call(t,e))!==null&&s!==void 0?s:[]}function tN(t,e){var i,s;return(s=(i=t.na)===null||i===void 0?void 0:i.call(t,e))!==null&&s!==void 0?s:[]}class vh{constructor(e,i){this.gv=qe({width:0,height:0}),this.ap=null,this.op=null,this._p=null,this.up=!1,this.cp=new at,this.dp=new at,this.fp=0,this.vp=!1,this.pp=null,this.mp=!1,this.bp=null,this.wp=null,this.kv=!1,this.yv=()=>{this.kv||this.gp===null||this.Hi().Nh()},this.Tv=()=>{this.kv||this.gp===null||this.Hi().Nh()},this.Mp=e,this.gp=i,this.gp.I_().l(this.xp.bind(this),this,!0),this.Sp=document.createElement("td"),this.Sp.style.padding="0",this.Sp.style.position="relative";const s=document.createElement("div");s.style.width="100%",s.style.height="100%",s.style.position="relative",s.style.overflow="hidden",this.kp=document.createElement("td"),this.kp.style.padding="0",this.yp=document.createElement("td"),this.yp.style.padding="0",this.Sp.appendChild(s),this.Vv=Rn(s,qe({width:16,height:16})),this.Vv.subscribeSuggestedBitmapSizeChanged(this.yv);const r=this.Vv.canvasElement;r.style.position="absolute",r.style.zIndex="1",r.style.left="0",r.style.top="0",this.Bv=Rn(s,qe({width:16,height:16})),this.Bv.subscribeSuggestedBitmapSizeChanged(this.Tv);const n=this.Bv.canvasElement;n.style.position="absolute",n.style.zIndex="2",n.style.left="0",n.style.top="0",this.Cp=document.createElement("tr"),this.Cp.appendChild(this.kp),this.Cp.appendChild(this.Sp),this.Cp.appendChild(this.yp),this.Tp(),this.jv=new gh(this.Bv.canvasElement,this,{Ff:()=>this.pp===null&&!this.Mp.W().handleScroll.vertTouchDrag,Wf:()=>this.pp===null&&!this.Mp.W().handleScroll.horzTouchDrag})}S(){this.ap!==null&&this.ap.S(),this.op!==null&&this.op.S(),this.Bv.unsubscribeSuggestedBitmapSizeChanged(this.Tv),$n(this.Bv.canvasElement),this.Bv.dispose(),this.Vv.unsubscribeSuggestedBitmapSizeChanged(this.yv),$n(this.Vv.canvasElement),this.Vv.dispose(),this.gp!==null&&this.gp.I_().p(this),this.jv.S()}Zv(){return J(this.gp)}Pp(e){this.gp!==null&&this.gp.I_().p(this),this.gp=e,this.gp!==null&&this.gp.I_().l(vh.prototype.xp.bind(this),this,!0),this.Tp()}Cv(){return this.Mp}Hv(){return this.Cp}Tp(){if(this.gp!==null&&(this.Rp(),this.Hi().wt().length!==0)){if(this.ap!==null){const e=this.gp.S_();this.ap.Zi(J(e))}if(this.op!==null){const e=this.gp.k_();this.op.Zi(J(e))}}}Dp(){this.ap!==null&&this.ap.bt(),this.op!==null&&this.op.bt()}v_(){return this.gp!==null?this.gp.v_():0}p_(e){this.gp&&this.gp.p_(e)}If(e){if(!this.gp)return;this.Op();const i=e.localX,s=e.localY;this.Ap(i,s,e)}tv(e){this.Op(),this.Vp(),this.Ap(e.localX,e.localY,e)}zf(e){var i;if(!this.gp)return;this.Op();const s=e.localX,r=e.localY;this.Ap(s,r,e);const n=this.pr(s,r);this.Mp.Bp((i=n==null?void 0:n.wv)!==null&&i!==void 0?i:null),this.Hi().Ic(n&&{zc:n.zc,mv:n.mv})}Kf(e){this.gp!==null&&(this.Op(),this.Ip(e))}Pf(e){this.gp!==null&&this.zp(this.dp,e)}kf(e){this.Pf(e)}$f(e){this.Op(),this.Lp(e),this.Ap(e.localX,e.localY,e)}Xf(e){this.gp!==null&&(this.Op(),this.vp=!1,this.Ep(e))}Yf(e){this.gp!==null&&this.Ip(e)}uv(e){if(this.vp=!0,this.pp===null){const i={x:e.localX,y:e.localY};this.Np(i,i,e)}}_v(e){this.gp!==null&&(this.Op(),this.gp.$t().Ic(null),this.Fp())}Wp(){return this.cp}jp(){return this.dp}ev(){this.fp=1,this.Hi().Hn()}rv(e,i){if(!this.Mp.W().handleScale.pinch)return;const s=5*(i-this.fp);this.fp=i,this.Hi().qc(e.nt,s)}Jf(e){this.vp=!1,this.mp=this.pp!==null,this.Vp();const i=this.Hi().Wc();this.pp!==null&&i.yt()&&(this.bp={x:i.Yt(),y:i.Xt()},this.pp={x:e.localX,y:e.localY})}jf(e){if(this.gp===null)return;const i=e.localX,s=e.localY;if(this.pp===null)this.Lp(e);else{this.mp=!1;const r=J(this.bp),n=r.x+(i-this.pp.x),o=r.y+(s-this.pp.y);this.Ap(n,o,e)}}qf(e){this.Cv().W().trackingMode.exitMode===0&&(this.mp=!0),this.Hp(),this.Ep(e)}pr(e,i){const s=this.gp;return s===null?null:function(r,n,o){const a=r.No(),l=function(d,u,h){var p,g;let w,_;for(const R of d){const $=(g=(p=R.oa)===null||p===void 0?void 0:p.call(R,u,h))!==null&&g!==void 0?g:[];for(const A of $)P=A.zOrder,(!(k=w==null?void 0:w.zOrder)||P==="top"&&k!=="top"||P==="normal"&&k==="bottom")&&(w=A,_=R)}var P,k;return w&&_?{bv:w,zc:_}:null}(a,n,o);if((l==null?void 0:l.bv.zOrder)==="top")return Ca(l);for(const d of a){if(l&&l.zc===d&&l.bv.zOrder!=="bottom"&&!l.bv.isBackground)return Ca(l);const u=Z2(d.Cn(r),n,o);if(u!==null)return{zc:d,vv:u.vv,mv:u.mv};if(l&&l.zc===d&&l.bv.zOrder!=="bottom"&&l.bv.isBackground)return Ca(l)}return l!=null&&l.bv?Ca(l):null}(s,e,i)}$p(e,i){J(i==="left"?this.ap:this.op).Xv(qe({width:e,height:this.gv.height}))}Up(){return this.gv}Xv(e){Dn(this.gv,e)||(this.gv=e,this.kv=!0,this.Vv.resizeCanvasElement(e),this.Bv.resizeCanvasElement(e),this.kv=!1,this.Sp.style.width=e.width+"px",this.Sp.style.height=e.height+"px")}qp(){const e=J(this.gp);e.x_(e.S_()),e.x_(e.k_());for(const i of e.Ta())if(e.ur(i)){const s=i.Dt();s!==null&&e.x_(s),i.Rn()}}ep(){return this.Vv.bitmapSize}rp(e,i,s){const r=this.ep();r.width>0&&r.height>0&&e.drawImage(this.Vv.canvasElement,i,s)}Gv(e){if(e===0||this.gp===null)return;if(e>1&&this.qp(),this.ap!==null&&this.ap.Gv(e),this.op!==null&&this.op.Gv(e),e!==1){this.Vv.applySuggestedBitmapSize();const s=An(this.Vv);s!==null&&(s.useBitmapCoordinateSpace(r=>{this.Qv(r)}),this.gp&&(this.Yp(s,X2),this.Xp(s),this.Kp(s),this.Yp(s,Pa),this.Yp(s,eN)))}this.Bv.applySuggestedBitmapSize();const i=An(this.Bv);i!==null&&(i.useBitmapCoordinateSpace(({context:s,bitmapSize:r})=>{s.clearRect(0,0,r.width,r.height)}),this.Zp(i),this.Yp(i,tN))}Gp(){return this.ap}Jp(){return this.op}tp(e,i){this.Yp(e,i)}xp(){this.gp!==null&&this.gp.I_().p(this),this.gp=null}Ip(e){this.zp(this.cp,e)}zp(e,i){const s=i.localX,r=i.localY;e.M()&&e.m(this.Hi().St().Vu(s),{x:s,y:r},i)}Qv({context:e,bitmapSize:i}){const{width:s,height:r}=i,n=this.Hi(),o=n.q(),a=n._d();o===a?rd(e,0,0,s,r,a):iy(e,0,0,s,r,o,a)}Xp(e){const i=J(this.gp).z_().Fh().gt();i!==null&&i.K(e,!1)}Kp(e){const i=this.Hi().Fc();this.Qp(e,Pa,qc,i),this.Qp(e,Pa,Qa,i)}Zp(e){this.Qp(e,Pa,Qa,this.Hi().Wc())}Yp(e,i){const s=J(this.gp).No();for(const r of s)this.Qp(e,i,qc,r);for(const r of s)this.Qp(e,i,Qa,r)}Qp(e,i,s,r){const n=J(this.gp),o=n.$t().Bc(),a=o!==null&&o.zc===r,l=o!==null&&a&&o.mv!==void 0?o.mv.br:void 0;Jc(i,d=>s(d,e,a,l),r,n)}Rp(){if(this.gp===null)return;const e=this.Mp,i=this.gp.S_().W().visible,s=this.gp.k_().W().visible;i||this.ap===null||(this.kp.removeChild(this.ap.Hv()),this.ap.S(),this.ap=null),s||this.op===null||(this.yp.removeChild(this.op.Hv()),this.op.S(),this.op=null);const r=e.$t().ed();i&&this.ap===null&&(this.ap=new Lm(this,e.W(),r,"left"),this.kp.appendChild(this.ap.Hv())),s&&this.op===null&&(this.op=new Lm(this,e.W(),r,"right"),this.yp.appendChild(this.op.Hv()))}tm(e){return e.cv&&this.vp||this.pp!==null}im(e){return Math.max(0,Math.min(e,this.gv.width-1))}nm(e){return Math.max(0,Math.min(e,this.gv.height-1))}Ap(e,i,s){this.Hi().Qc(this.im(e),this.nm(i),s,J(this.gp))}Fp(){this.Hi().nd()}Hp(){this.mp&&(this.pp=null,this.Fp())}Np(e,i,s){this.pp=e,this.mp=!1,this.Ap(i.x,i.y,s);const r=this.Hi().Wc();this.bp={x:r.Yt(),y:r.Xt()}}Hi(){return this.Mp.$t()}Ep(e){if(!this.up)return;const i=this.Hi(),s=this.Zv();if(i.D_(s,s.dn()),this._p=null,this.up=!1,i.Zc(),this.wp!==null){const r=performance.now(),n=i.St();this.wp.Pr(n.Lu(),r),this.wp.Yu(r)||i.qn(this.wp)}}Op(){this.pp=null}Vp(){if(this.gp){if(this.Hi().Hn(),document.activeElement!==document.body&&document.activeElement!==document.documentElement)J(document.activeElement).blur();else{const e=document.getSelection();e!==null&&e.removeAllRanges()}!this.gp.dn().Ei()&&this.Hi().St().Ei()}}Lp(e){if(this.gp===null)return;const i=this.Hi(),s=i.St();if(s.Ei())return;const r=this.Mp.W(),n=r.handleScroll,o=r.kineticScroll;if((!n.pressedMouseMove||e.cv)&&(!n.horzTouchDrag&&!n.vertTouchDrag||!e.cv))return;const a=this.gp.dn(),l=performance.now();if(this._p!==null||this.tm(e)||(this._p={x:e.clientX,y:e.clientY,yd:l,sm:e.localX,rm:e.localY}),this._p!==null&&!this.up&&(this._p.x!==e.clientX||this._p.y!==e.clientY)){if(e.cv&&o.touch||!e.cv&&o.mouse){const d=s.ee();this.wp=new J2(.2/d,7/d,.997,15/d),this.wp.Fd(s.Lu(),this._p.yd)}else this.wp=null;a.Ei()||i.P_(this.gp,a,e.localY),i.Xc(e.localX),this.up=!0}this.up&&(a.Ei()||i.R_(this.gp,a,e.localY),i.Kc(e.localX),this.wp!==null&&this.wp.Fd(s.Lu(),l))}}class Vm{constructor(e,i,s,r,n){this.ft=!0,this.gv=qe({width:0,height:0}),this.yv=()=>this.Gv(3),this.Pv=e==="left",this.yc=s.ed,this._n=i,this.hm=r,this.lm=n,this.Av=document.createElement("div"),this.Av.style.width="25px",this.Av.style.height="100%",this.Av.style.overflow="hidden",this.Vv=Rn(this.Av,qe({width:16,height:16})),this.Vv.subscribeSuggestedBitmapSizeChanged(this.yv)}S(){this.Vv.unsubscribeSuggestedBitmapSizeChanged(this.yv),$n(this.Vv.canvasElement),this.Vv.dispose()}Hv(){return this.Av}Up(){return this.gv}Xv(e){Dn(this.gv,e)||(this.gv=e,this.Vv.resizeCanvasElement(e),this.Av.style.width=`${e.width}px`,this.Av.style.height=`${e.height}px`,this.ft=!0)}Gv(e){if(e<3&&!this.ft||this.gv.width===0||this.gv.height===0)return;this.ft=!1,this.Vv.applySuggestedBitmapSize();const i=An(this.Vv);i!==null&&i.useBitmapCoordinateSpace(s=>{this.Qv(s),this.Ae(s)})}ep(){return this.Vv.bitmapSize}rp(e,i,s){const r=this.ep();r.width>0&&r.height>0&&e.drawImage(this.Vv.canvasElement,i,s)}Ae({context:e,bitmapSize:i,horizontalPixelRatio:s,verticalPixelRatio:r}){if(!this.hm())return;e.fillStyle=this._n.timeScale.borderColor;const n=Math.floor(this.yc.W().C*s),o=Math.floor(this.yc.W().C*r),a=this.Pv?i.width-n:0;e.fillRect(a,0,n,o)}Qv({context:e,bitmapSize:i}){rd(e,0,0,i.width,i.height,this.lm())}}function _h(t){return e=>{var i,s;return(s=(i=e.aa)===null||i===void 0?void 0:i.call(e,t))!==null&&s!==void 0?s:[]}}const iN=_h("normal"),sN=_h("top"),nN=_h("bottom");class rN{constructor(e,i){this.am=null,this.om=null,this.k=null,this._m=!1,this.gv=qe({width:0,height:0}),this.um=new at,this.xv=new zo(5),this.kv=!1,this.yv=()=>{this.kv||this.Mp.$t().Nh()},this.Tv=()=>{this.kv||this.Mp.$t().Nh()},this.Mp=e,this.N_=i,this._n=e.W().layout,this.dm=document.createElement("tr"),this.fm=document.createElement("td"),this.fm.style.padding="0",this.vm=document.createElement("td"),this.vm.style.padding="0",this.Av=document.createElement("td"),this.Av.style.height="25px",this.Av.style.padding="0",this.pm=document.createElement("div"),this.pm.style.width="100%",this.pm.style.height="100%",this.pm.style.position="relative",this.pm.style.overflow="hidden",this.Av.appendChild(this.pm),this.Vv=Rn(this.pm,qe({width:16,height:16})),this.Vv.subscribeSuggestedBitmapSizeChanged(this.yv);const s=this.Vv.canvasElement;s.style.position="absolute",s.style.zIndex="1",s.style.left="0",s.style.top="0",this.Bv=Rn(this.pm,qe({width:16,height:16})),this.Bv.subscribeSuggestedBitmapSizeChanged(this.Tv);const r=this.Bv.canvasElement;r.style.position="absolute",r.style.zIndex="2",r.style.left="0",r.style.top="0",this.dm.appendChild(this.fm),this.dm.appendChild(this.Av),this.dm.appendChild(this.vm),this.bm(),this.Mp.$t().f_().l(this.bm.bind(this),this),this.jv=new gh(this.Bv.canvasElement,this,{Ff:()=>!0,Wf:()=>!this.Mp.W().handleScroll.horzTouchDrag})}S(){this.jv.S(),this.am!==null&&this.am.S(),this.om!==null&&this.om.S(),this.Bv.unsubscribeSuggestedBitmapSizeChanged(this.Tv),$n(this.Bv.canvasElement),this.Bv.dispose(),this.Vv.unsubscribeSuggestedBitmapSizeChanged(this.yv),$n(this.Vv.canvasElement),this.Vv.dispose()}Hv(){return this.dm}wm(){return this.am}gm(){return this.om}tv(e){if(this._m)return;this._m=!0;const i=this.Mp.$t();!i.St().Ei()&&this.Mp.W().handleScale.axisPressedMouseMove.time&&i.Uc(e.localX)}Jf(e){this.tv(e)}iv(){const e=this.Mp.$t();!e.St().Ei()&&this._m&&(this._m=!1,this.Mp.W().handleScale.axisPressedMouseMove.time&&e.Jc())}$f(e){const i=this.Mp.$t();!i.St().Ei()&&this.Mp.W().handleScale.axisPressedMouseMove.time&&i.Gc(e.localX)}jf(e){this.$f(e)}Xf(){this._m=!1;const e=this.Mp.$t();e.St().Ei()&&!this.Mp.W().handleScale.axisPressedMouseMove.time||e.Jc()}qf(){this.Xf()}Pf(){this.Mp.W().handleScale.axisDoubleClickReset.time&&this.Mp.$t().Xn()}kf(){this.Pf()}If(){this.Mp.$t().W().handleScale.axisPressedMouseMove.time&&this.hp(1)}_v(){this.hp(0)}Up(){return this.gv}Mm(){return this.um}xm(e,i,s){Dn(this.gv,e)||(this.gv=e,this.kv=!0,this.Vv.resizeCanvasElement(e),this.Bv.resizeCanvasElement(e),this.kv=!1,this.Av.style.width=`${e.width}px`,this.Av.style.height=`${e.height}px`,this.um.m(e)),this.am!==null&&this.am.Xv(qe({width:i,height:e.height})),this.om!==null&&this.om.Xv(qe({width:s,height:e.height}))}Sm(){const e=this.km();return Math.ceil(e.C+e.T+e.P+e.L+e.V+e.ym)}bt(){this.Mp.$t().St().La()}ep(){return this.Vv.bitmapSize}rp(e,i,s){const r=this.ep();r.width>0&&r.height>0&&e.drawImage(this.Vv.canvasElement,i,s)}Gv(e){if(e===0)return;if(e!==1){this.Vv.applySuggestedBitmapSize();const s=An(this.Vv);s!==null&&(s.useBitmapCoordinateSpace(r=>{this.Qv(r),this.Ae(r),this.Cm(s,nN)}),this.ip(s),this.Cm(s,iN)),this.am!==null&&this.am.Gv(e),this.om!==null&&this.om.Gv(e)}this.Bv.applySuggestedBitmapSize();const i=An(this.Bv);i!==null&&(i.useBitmapCoordinateSpace(({context:s,bitmapSize:r})=>{s.clearRect(0,0,r.width,r.height)}),this.Tm([...this.Mp.$t().wt(),this.Mp.$t().Wc()],i),this.Cm(i,sN))}Cm(e,i){const s=this.Mp.$t().wt();for(const r of s)Jc(i,n=>qc(n,e,!1,void 0),r,void 0);for(const r of s)Jc(i,n=>Qa(n,e,!1,void 0),r,void 0)}Qv({context:e,bitmapSize:i}){rd(e,0,0,i.width,i.height,this.Mp.$t()._d())}Ae({context:e,bitmapSize:i,verticalPixelRatio:s}){if(this.Mp.W().timeScale.borderVisible){e.fillStyle=this.Pm();const r=Math.max(1,Math.floor(this.km().C*s));e.fillRect(0,0,i.width,r)}}ip(e){const i=this.Mp.$t().St(),s=i.La();if(!s||s.length===0)return;const r=this.N_.maxTickMarkWeight(s),n=this.km(),o=i.W();o.borderVisible&&o.ticksVisible&&e.useBitmapCoordinateSpace(({context:a,horizontalPixelRatio:l,verticalPixelRatio:d})=>{a.strokeStyle=this.Pm(),a.fillStyle=this.Pm();const u=Math.max(1,Math.floor(l)),h=Math.floor(.5*l);a.beginPath();const p=Math.round(n.T*d);for(let g=s.length;g--;){const w=Math.round(s[g].coord*l);a.rect(w-h,0,u,p)}a.fill()}),e.useMediaCoordinateSpace(({context:a})=>{const l=n.C+n.T+n.L+n.P/2;a.textAlign="center",a.textBaseline="middle",a.fillStyle=this.$(),a.font=this.qv();for(const d of s)if(d.weight<r){const u=d.needAlignCoordinate?this.Rm(a,d.coord,d.label):d.coord;a.fillText(d.label,u,l)}this.Mp.W().timeScale.allowBoldLabels&&(a.font=this.Dm());for(const d of s)if(d.weight>=r){const u=d.needAlignCoordinate?this.Rm(a,d.coord,d.label):d.coord;a.fillText(d.label,u,l)}})}Rm(e,i,s){const r=this.xv.Mi(e,s),n=r/2,o=Math.floor(i-n)+.5;return o<0?i+=Math.abs(0-o):o+r>this.gv.width&&(i-=Math.abs(this.gv.width-(o+r))),i}Tm(e,i){const s=this.km();for(const r of e)for(const n of r.Ji())n.gt().K(i,s)}Pm(){return this.Mp.W().timeScale.borderColor}$(){return this._n.textColor}j(){return this._n.fontSize}qv(){return kr(this.j(),this._n.fontFamily)}Dm(){return kr(this.j(),this._n.fontFamily,"bold")}km(){this.k===null&&(this.k={C:1,N:NaN,L:NaN,V:NaN,Wi:NaN,T:5,P:NaN,R:"",Fi:new zo,ym:0});const e=this.k,i=this.qv();if(e.R!==i){const s=this.j();e.P=s,e.R=i,e.L=3*s/12,e.V=3*s/12,e.Wi=9*s/12,e.N=0,e.ym=4*s/12,e.Fi.Qe()}return this.k}hp(e){this.Av.style.cursor=e===1?"ew-resize":"default"}bm(){const e=this.Mp.$t(),i=e.W();i.leftPriceScale.visible||this.am===null||(this.fm.removeChild(this.am.Hv()),this.am.S(),this.am=null),i.rightPriceScale.visible||this.om===null||(this.vm.removeChild(this.om.Hv()),this.om.S(),this.om=null);const s={ed:this.Mp.$t().ed()},r=()=>i.leftPriceScale.borderVisible&&e.St().W().borderVisible,n=()=>e._d();i.leftPriceScale.visible&&this.am===null&&(this.am=new Vm("left",i,s,r,n),this.fm.appendChild(this.am.Hv())),i.rightPriceScale.visible&&this.om===null&&(this.om=new Vm("right",i,s,r,n),this.vm.appendChild(this.om.Hv()))}}const oN=!!Cr&&!!navigator.userAgentData&&navigator.userAgentData.brands.some(t=>t.brand.includes("Chromium"))&&!!Cr&&(!((Xd=navigator==null?void 0:navigator.userAgentData)===null||Xd===void 0)&&Xd.platform?navigator.userAgentData.platform==="Windows":navigator.userAgent.toLowerCase().indexOf("win")>=0);var Xd;class aN{constructor(e,i,s){var r;this.Om=[],this.Am=0,this.Qa=0,this.e_=0,this.Vm=0,this.Bm=0,this.Im=null,this.zm=!1,this.cp=new at,this.dp=new at,this.xc=new at,this.Lm=null,this.Em=null,this.Nm=e,this._n=i,this.N_=s,this.dm=document.createElement("div"),this.dm.classList.add("tv-lightweight-charts"),this.dm.style.overflow="hidden",this.dm.style.direction="ltr",this.dm.style.width="100%",this.dm.style.height="100%",(r=this.dm).style.userSelect="none",r.style.webkitUserSelect="none",r.style.msUserSelect="none",r.style.MozUserSelect="none",r.style.webkitTapHighlightColor="transparent",this.Fm=document.createElement("table"),this.Fm.setAttribute("cellspacing","0"),this.dm.appendChild(this.Fm),this.Wm=this.jm.bind(this),ec(this._n)&&this.Hm(!0),this.Hi=new U2(this.kc.bind(this),this._n,s),this.$t().jc().l(this.$m.bind(this),this),this.Um=new rN(this,this.N_),this.Fm.appendChild(this.Um.Hv());const n=i.autoSize&&this.qm();let o=this._n.width,a=this._n.height;if(n||o===0||a===0){const l=e.getBoundingClientRect();o=o||l.width,a=a||l.height}this.Ym(o,a),this.Xm(),e.appendChild(this.dm),this.Km(),this.Hi.St().Gu().l(this.Hi.$l.bind(this.Hi),this),this.Hi.f_().l(this.Hi.$l.bind(this.Hi),this)}$t(){return this.Hi}W(){return this._n}Zm(){return this.Om}Gm(){return this.Um}S(){this.Hm(!1),this.Am!==0&&window.cancelAnimationFrame(this.Am),this.Hi.jc().p(this),this.Hi.St().Gu().p(this),this.Hi.f_().p(this),this.Hi.S();for(const e of this.Om)this.Fm.removeChild(e.Hv()),e.Wp().p(this),e.jp().p(this),e.S();this.Om=[],J(this.Um).S(),this.dm.parentElement!==null&&this.dm.parentElement.removeChild(this.dm),this.xc.S(),this.cp.S(),this.dp.S(),this.Jm()}Ym(e,i,s=!1){if(this.Qa===i&&this.e_===e)return;const r=function(a){const l=Math.floor(a.width),d=Math.floor(a.height);return qe({width:l-l%2,height:d-d%2})}(qe({width:e,height:i}));this.Qa=r.height,this.e_=r.width;const n=this.Qa+"px",o=this.e_+"px";J(this.dm).style.height=n,J(this.dm).style.width=o,this.Fm.style.height=n,this.Fm.style.width=o,s?this.Qm(xt.ns(),performance.now()):this.Hi.$l()}Gv(e){e===void 0&&(e=xt.ns());for(let i=0;i<this.Om.length;i++)this.Om[i].Gv(e.Wn(i).En);this._n.timeScale.visible&&this.Um.Gv(e.Fn())}Eh(e){const i=ec(this._n);this.Hi.Eh(e);const s=ec(this._n);s!==i&&this.Hm(s),this.Km(),this.tb(e)}Wp(){return this.cp}jp(){return this.dp}jc(){return this.xc}ib(){this.Im!==null&&(this.Qm(this.Im,performance.now()),this.Im=null);const e=this.nb(null),i=document.createElement("canvas");i.width=e.width,i.height=e.height;const s=J(i.getContext("2d"));return this.nb(s),i}sb(e){return e==="left"&&!this.eb()||e==="right"&&!this.rb()||this.Om.length===0?0:J(e==="left"?this.Om[0].Gp():this.Om[0].Jp()).Kv()}hb(){return this._n.autoSize&&this.Lm!==null}lb(){return this.dm}Bp(e){this.Em=e,this.Em?this.lb().style.setProperty("cursor",e):this.lb().style.removeProperty("cursor")}ab(){return this.Em}ob(){return jt(this.Om[0]).Up()}tb(e){(e.autoSize!==void 0||!this.Lm||e.width===void 0&&e.height===void 0)&&(e.autoSize&&!this.Lm&&this.qm(),e.autoSize===!1&&this.Lm!==null&&this.Jm(),e.autoSize||e.width===void 0&&e.height===void 0||this.Ym(e.width||this.e_,e.height||this.Qa))}nb(e){let i=0,s=0;const r=this.Om[0],n=(a,l)=>{let d=0;for(let u=0;u<this.Om.length;u++){const h=this.Om[u],p=J(a==="left"?h.Gp():h.Jp()),g=p.ep();e!==null&&p.rp(e,l,d),d+=g.height}};this.eb()&&(n("left",0),i+=J(r.Gp()).ep().width);for(let a=0;a<this.Om.length;a++){const l=this.Om[a],d=l.ep();e!==null&&l.rp(e,i,s),s+=d.height}i+=r.ep().width,this.rb()&&(n("right",i),i+=J(r.Jp()).ep().width);const o=(a,l,d)=>{J(a==="left"?this.Um.wm():this.Um.gm()).rp(J(e),l,d)};if(this._n.timeScale.visible){const a=this.Um.ep();if(e!==null){let l=0;this.eb()&&(o("left",l,s),l=J(r.Gp()).ep().width),this.Um.rp(e,l,s),l+=a.width,this.rb()&&o("right",l,s)}s+=a.height}return qe({width:i,height:s})}_b(){let e=0,i=0,s=0;for(const w of this.Om)this.eb()&&(i=Math.max(i,J(w.Gp()).Uv(),this._n.leftPriceScale.minimumWidth)),this.rb()&&(s=Math.max(s,J(w.Jp()).Uv(),this._n.rightPriceScale.minimumWidth)),e+=w.v_();i=Kc(i),s=Kc(s);const r=this.e_,n=this.Qa,o=Math.max(r-i-s,0),a=this._n.timeScale.visible;let l=a?Math.max(this.Um.Sm(),this._n.timeScale.minimumHeight):0;var d;l=(d=l)+d%2;const u=0+l,h=n<u?0:n-u,p=h/e;let g=0;for(let w=0;w<this.Om.length;++w){const _=this.Om[w];_.Pp(this.Hi.Nc()[w]);let P=0,k=0;k=w===this.Om.length-1?h-g:Math.round(_.v_()*p),P=Math.max(k,2),g+=P,_.Xv(qe({width:o,height:P})),this.eb()&&_.$p(i,"left"),this.rb()&&_.$p(s,"right"),_.Zv()&&this.Hi.Hc(_.Zv(),P)}this.Um.xm(qe({width:a?o:0,height:l}),a?i:0,a?s:0),this.Hi.m_(o),this.Vm!==i&&(this.Vm=i),this.Bm!==s&&(this.Bm=s)}Hm(e){e?this.dm.addEventListener("wheel",this.Wm,{passive:!1}):this.dm.removeEventListener("wheel",this.Wm)}ub(e){switch(e.deltaMode){case e.DOM_DELTA_PAGE:return 120;case e.DOM_DELTA_LINE:return 32}return oN?1/window.devicePixelRatio:1}jm(e){if(!(e.deltaX!==0&&this._n.handleScroll.mouseWheel||e.deltaY!==0&&this._n.handleScale.mouseWheel))return;const i=this.ub(e),s=i*e.deltaX/100,r=-i*e.deltaY/100;if(e.cancelable&&e.preventDefault(),r!==0&&this._n.handleScale.mouseWheel){const n=Math.sign(r)*Math.min(1,Math.abs(r)),o=e.clientX-this.dm.getBoundingClientRect().left;this.$t().qc(o,n)}s!==0&&this._n.handleScroll.mouseWheel&&this.$t().Yc(-80*s)}Qm(e,i){var s;const r=e.Fn();r===3&&this.cb(),r!==3&&r!==2||(this.fb(e),this.vb(e,i),this.Um.bt(),this.Om.forEach(n=>{n.Dp()}),((s=this.Im)===null||s===void 0?void 0:s.Fn())===3&&(this.Im.Jn(e),this.cb(),this.fb(this.Im),this.vb(this.Im,i),e=this.Im,this.Im=null)),this.Gv(e)}vb(e,i){for(const s of e.Gn())this.Qn(s,i)}fb(e){const i=this.Hi.Nc();for(let s=0;s<i.length;s++)e.Wn(s).Nn&&i[s].V_()}Qn(e,i){const s=this.Hi.St();switch(e.$n){case 0:s.Qu();break;case 1:s.tc(e.Ot);break;case 2:s.Kn(e.Ot);break;case 3:s.Zn(e.Ot);break;case 4:s.Fu();break;case 5:e.Ot.Yu(i)||s.Zn(e.Ot.Xu(i))}}kc(e){this.Im!==null?this.Im.Jn(e):this.Im=e,this.zm||(this.zm=!0,this.Am=window.requestAnimationFrame(i=>{if(this.zm=!1,this.Am=0,this.Im!==null){const s=this.Im;this.Im=null,this.Qm(s,i);for(const r of s.Gn())if(r.$n===5&&!r.Ot.Yu(i)){this.$t().qn(r.Ot);break}}}))}cb(){this.Xm()}Xm(){const e=this.Hi.Nc(),i=e.length,s=this.Om.length;for(let r=i;r<s;r++){const n=jt(this.Om.pop());this.Fm.removeChild(n.Hv()),n.Wp().p(this),n.jp().p(this),n.S()}for(let r=s;r<i;r++){const n=new vh(this,e[r]);n.Wp().l(this.pb.bind(this),this),n.jp().l(this.mb.bind(this),this),this.Om.push(n),this.Fm.insertBefore(n.Hv(),this.Um.Hv())}for(let r=0;r<i;r++){const n=e[r],o=this.Om[r];o.Zv()!==n?o.Pp(n):o.Tp()}this.Km(),this._b()}bb(e,i,s){var r;const n=new Map;e!==null&&this.Hi.wt().forEach(u=>{const h=u.Vn().il(e);h!==null&&n.set(u,h)});let o;if(e!==null){const u=(r=this.Hi.St().$i(e))===null||r===void 0?void 0:r.originalTime;u!==void 0&&(o=u)}const a=this.$t().Bc(),l=a!==null&&a.zc instanceof mh?a.zc:void 0,d=a!==null&&a.mv!==void 0?a.mv.mr:void 0;return{wb:o,ie:e??void 0,gb:i??void 0,Mb:l,xb:n,Sb:d,kb:s??void 0}}pb(e,i,s){this.cp.m(()=>this.bb(e,i,s))}mb(e,i,s){this.dp.m(()=>this.bb(e,i,s))}$m(e,i,s){this.xc.m(()=>this.bb(e,i,s))}Km(){const e=this._n.timeScale.visible?"":"none";this.Um.Hv().style.display=e}eb(){return this.Om[0].Zv().S_().W().visible}rb(){return this.Om[0].Zv().k_().W().visible}qm(){return"ResizeObserver"in window&&(this.Lm=new ResizeObserver(e=>{const i=e.find(s=>s.target===this.Nm);i&&this.Ym(i.contentRect.width,i.contentRect.height)}),this.Lm.observe(this.Nm,{box:"border-box"}),!0)}Jm(){this.Lm!==null&&this.Lm.disconnect(),this.Lm=null}}function ec(t){return!!(t.handleScroll.mouseWheel||t.handleScale.mouseWheel)}function wy(t,e){var i={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(i[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function"){var r=0;for(s=Object.getOwnPropertySymbols(t);r<s.length;r++)e.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(t,s[r])&&(i[s[r]]=t[s[r]])}return i}function Wm(t,e,i,s){const r=i.value,n={ie:e,ot:t,Ot:[r,r,r,r],wb:s};return i.color!==void 0&&(n.O=i.color),n}function lN(t,e,i,s){const r=i.value,n={ie:e,ot:t,Ot:[r,r,r,r],wb:s};return i.lineColor!==void 0&&(n.lt=i.lineColor),i.topColor!==void 0&&(n.ys=i.topColor),i.bottomColor!==void 0&&(n.Cs=i.bottomColor),n}function dN(t,e,i,s){const r=i.value,n={ie:e,ot:t,Ot:[r,r,r,r],wb:s};return i.topLineColor!==void 0&&(n.Ce=i.topLineColor),i.bottomLineColor!==void 0&&(n.Te=i.bottomLineColor),i.topFillColor1!==void 0&&(n.Me=i.topFillColor1),i.topFillColor2!==void 0&&(n.xe=i.topFillColor2),i.bottomFillColor1!==void 0&&(n.Se=i.bottomFillColor1),i.bottomFillColor2!==void 0&&(n.ke=i.bottomFillColor2),n}function cN(t,e,i,s){const r={ie:e,ot:t,Ot:[i.open,i.high,i.low,i.close],wb:s};return i.color!==void 0&&(r.O=i.color),r}function uN(t,e,i,s){const r={ie:e,ot:t,Ot:[i.open,i.high,i.low,i.close],wb:s};return i.color!==void 0&&(r.O=i.color),i.borderColor!==void 0&&(r.At=i.borderColor),i.wickColor!==void 0&&(r.Hh=i.wickColor),r}function hN(t,e,i,s,r){const n=jt(r)(i),o=Math.max(...n),a=Math.min(...n),l=n[n.length-1],d=[l,o,a,l],u=i,{time:h,color:p}=u;return{ie:e,ot:t,Ot:d,wb:s,We:wy(u,["time","color"]),O:p}}function Ma(t){return t.Ot!==void 0}function zm(t,e){return e.customValues!==void 0&&(t.yb=e.customValues),t}function vn(t){return(e,i,s,r,n,o)=>function(a,l){return l?l(a):(d=a).open===void 0&&d.value===void 0;var d}(s,o)?zm({ot:e,ie:i,wb:r},s):zm(t(e,i,s,r,n),s)}function Fm(t){return{Candlestick:vn(uN),Bar:vn(cN),Area:vn(lN),Baseline:vn(dN),Histogram:vn(Wm),Line:vn(Wm),Custom:vn(hN)}[t]}function jm(t){return{ie:0,Cb:new Map,ia:t}}function Bm(t,e){if(t!==void 0&&t.length!==0)return{Tb:e.key(t[0].ot),Pb:e.key(t[t.length-1].ot)}}function Hm(t){let e;return t.forEach(i=>{e===void 0&&(e=i.wb)}),jt(e)}class fN{constructor(e){this.Rb=new Map,this.Db=new Map,this.Ob=new Map,this.Ab=[],this.N_=e}S(){this.Rb.clear(),this.Db.clear(),this.Ob.clear(),this.Ab=[]}Vb(e,i){let s=this.Rb.size!==0,r=!1;const n=this.Db.get(e);if(n!==void 0)if(this.Db.size===1)s=!1,r=!0,this.Rb.clear();else for(const l of this.Ab)l.pointData.Cb.delete(e)&&(r=!0);let o=[];if(i.length!==0){const l=i.map(g=>g.time),d=this.N_.createConverterToInternalObj(i),u=Fm(e.Yh()),h=e.ga(),p=e.Ma();o=i.map((g,w)=>{const _=d(g.time),P=this.N_.key(_);let k=this.Rb.get(P);k===void 0&&(k=jm(_),this.Rb.set(P,k),r=!0);const R=u(_,k.ie,g,l[w],h,p);return k.Cb.set(e,R),R})}s&&this.Bb(),this.Ib(e,o);let a=-1;if(r){const l=[];this.Rb.forEach(d=>{l.push({timeWeight:0,time:d.ia,pointData:d,originalTime:Hm(d.Cb)})}),l.sort((d,u)=>this.N_.key(d.time)-this.N_.key(u.time)),a=this.zb(l)}return this.Lb(e,a,function(l,d,u){const h=Bm(l,u),p=Bm(d,u);if(h!==void 0&&p!==void 0)return{Xl:h.Pb>=p.Pb&&h.Tb>=p.Tb}}(this.Db.get(e),n,this.N_))}ld(e){return this.Vb(e,[])}Eb(e,i){const s=i;(function(_){_.wb===void 0&&(_.wb=_.time)})(s),this.N_.preprocessData(i);const r=this.N_.createConverterToInternalObj([i])(i.time),n=this.Ob.get(e);if(n!==void 0&&this.N_.key(r)<this.N_.key(n))throw new Error(`Cannot update oldest data, last time=${n}, new time=${r}`);let o=this.Rb.get(this.N_.key(r));const a=o===void 0;o===void 0&&(o=jm(r),this.Rb.set(this.N_.key(r),o));const l=Fm(e.Yh()),d=e.ga(),u=e.Ma(),h=l(r,o.ie,i,s.wb,d,u);o.Cb.set(e,h),this.Nb(e,h);const p={Xl:Ma(h)};if(!a)return this.Lb(e,-1,p);const g={timeWeight:0,time:o.ia,pointData:o,originalTime:Hm(o.Cb)},w=da(this.Ab,this.N_.key(g.time),(_,P)=>this.N_.key(_.time)<P);this.Ab.splice(w,0,g);for(let _=w;_<this.Ab.length;++_)tc(this.Ab[_].pointData,_);return this.N_.fillWeightsForPoints(this.Ab,w),this.Lb(e,w,p)}Nb(e,i){let s=this.Db.get(e);s===void 0&&(s=[],this.Db.set(e,s));const r=s.length!==0?s[s.length-1]:null;r===null||this.N_.key(i.ot)>this.N_.key(r.ot)?Ma(i)&&s.push(i):Ma(i)?s[s.length-1]=i:s.splice(-1,1),this.Ob.set(e,i.ot)}Ib(e,i){i.length!==0?(this.Db.set(e,i.filter(Ma)),this.Ob.set(e,i[i.length-1].ot)):(this.Db.delete(e),this.Ob.delete(e))}Bb(){for(const e of this.Ab)e.pointData.Cb.size===0&&this.Rb.delete(this.N_.key(e.time))}zb(e){let i=-1;for(let s=0;s<this.Ab.length&&s<e.length;++s){const r=this.Ab[s],n=e[s];if(this.N_.key(r.time)!==this.N_.key(n.time)){i=s;break}n.timeWeight=r.timeWeight,tc(n.pointData,s)}if(i===-1&&this.Ab.length!==e.length&&(i=Math.min(this.Ab.length,e.length)),i===-1)return-1;for(let s=i;s<e.length;++s)tc(e[s].pointData,s);return this.N_.fillWeightsForPoints(e,i),this.Ab=e,i}Fb(){if(this.Db.size===0)return null;let e=0;return this.Db.forEach(i=>{i.length!==0&&(e=Math.max(e,i[i.length-1].ie))}),e}Lb(e,i,s){const r={Wb:new Map,St:{Au:this.Fb()}};if(i!==-1)this.Db.forEach((n,o)=>{r.Wb.set(o,{We:n,jb:o===e?s:void 0})}),this.Db.has(e)||r.Wb.set(e,{We:[],jb:s}),r.St.Hb=this.Ab,r.St.$b=i;else{const n=this.Db.get(e);r.Wb.set(e,{We:n||[],jb:s})}return r}}function tc(t,e){t.ie=e,t.Cb.forEach(i=>{i.ie=e})}function yh(t){const e={value:t.Ot[3],time:t.wb};return t.yb!==void 0&&(e.customValues=t.yb),e}function Um(t){const e=yh(t);return t.O!==void 0&&(e.color=t.O),e}function mN(t){const e=yh(t);return t.lt!==void 0&&(e.lineColor=t.lt),t.ys!==void 0&&(e.topColor=t.ys),t.Cs!==void 0&&(e.bottomColor=t.Cs),e}function pN(t){const e=yh(t);return t.Ce!==void 0&&(e.topLineColor=t.Ce),t.Te!==void 0&&(e.bottomLineColor=t.Te),t.Me!==void 0&&(e.topFillColor1=t.Me),t.xe!==void 0&&(e.topFillColor2=t.xe),t.Se!==void 0&&(e.bottomFillColor1=t.Se),t.ke!==void 0&&(e.bottomFillColor2=t.ke),e}function Sy(t){const e={open:t.Ot[0],high:t.Ot[1],low:t.Ot[2],close:t.Ot[3],time:t.wb};return t.yb!==void 0&&(e.customValues=t.yb),e}function gN(t){const e=Sy(t);return t.O!==void 0&&(e.color=t.O),e}function vN(t){const e=Sy(t),{O:i,At:s,Hh:r}=t;return i!==void 0&&(e.color=i),s!==void 0&&(e.borderColor=s),r!==void 0&&(e.wickColor=r),e}function Qc(t){return{Area:mN,Line:Um,Baseline:pN,Histogram:Um,Bar:gN,Candlestick:vN,Custom:_N}[t]}function _N(t){const e=t.wb;return Object.assign(Object.assign({},t.We),{time:e})}const yN={vertLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},horzLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},mode:1},bN={vertLines:{color:"#D6DCDE",style:0,visible:!0},horzLines:{color:"#D6DCDE",style:0,visible:!0}},wN={background:{type:"solid",color:"#FFFFFF"},textColor:"#191919",fontSize:12,fontFamily:lh},ic={autoScale:!0,mode:0,invertScale:!1,alignLabels:!0,borderVisible:!0,borderColor:"#2B2B43",entireTextOnly:!1,visible:!1,ticksVisible:!1,scaleMargins:{bottom:.1,top:.2},minimumWidth:0},SN={rightOffset:0,barSpacing:6,minBarSpacing:.5,fixLeftEdge:!1,fixRightEdge:!1,lockVisibleTimeRangeOnResize:!1,rightBarStaysOnScroll:!1,borderVisible:!0,borderColor:"#2B2B43",visible:!0,timeVisible:!1,secondsVisible:!0,shiftVisibleRangeOnNewBar:!0,allowShiftVisibleRangeOnWhitespaceReplacement:!1,ticksVisible:!1,uniformDistribution:!1,minimumHeight:0,allowBoldLabels:!0},TN={color:"rgba(0, 0, 0, 0)",visible:!1,fontSize:48,fontFamily:lh,fontStyle:"",text:"",horzAlign:"center",vertAlign:"center"};function Ym(){return{width:0,height:0,autoSize:!1,layout:wN,crosshair:yN,grid:bN,overlayPriceScales:Object.assign({},ic),leftPriceScale:Object.assign(Object.assign({},ic),{visible:!1}),rightPriceScale:Object.assign(Object.assign({},ic),{visible:!0}),timeScale:SN,watermark:TN,localization:{locale:Cr?navigator.language:"",dateFormat:"dd MMM 'yy"},handleScroll:{mouseWheel:!0,pressedMouseMove:!0,horzTouchDrag:!0,vertTouchDrag:!0},handleScale:{axisPressedMouseMove:{time:!0,price:!0},axisDoubleClickReset:{time:!0,price:!0},mouseWheel:!0,pinch:!0},kineticScroll:{mouse:!1,touch:!0},trackingMode:{exitMode:1}}}class xN{constructor(e,i){this.Ub=e,this.qb=i}applyOptions(e){this.Ub.$t().Lc(this.qb,e)}options(){return this.zi().W()}width(){return ad(this.qb)?this.Ub.sb(this.qb):0}zi(){return J(this.Ub.$t().Ec(this.qb)).Dt}}function Gm(t,e,i){const s=wy(t,["time","originalTime"]),r=Object.assign({time:e},s);return i!==void 0&&(r.originalTime=i),r}const EN={color:"#FF0000",price:0,lineStyle:2,lineWidth:1,lineVisible:!0,axisLabelVisible:!0,title:"",axisLabelColor:"",axisLabelTextColor:""};class IN{constructor(e){this.Vh=e}applyOptions(e){this.Vh.Eh(e)}options(){return this.Vh.W()}Yb(){return this.Vh}}class DN{constructor(e,i,s,r,n){this.Xb=new at,this.Is=e,this.Kb=i,this.Zb=s,this.N_=n,this.Gb=r}S(){this.Xb.S()}priceFormatter(){return this.Is.ca()}priceToCoordinate(e){const i=this.Is.Ct();return i===null?null:this.Is.Dt().Rt(e,i.Ot)}coordinateToPrice(e){const i=this.Is.Ct();return i===null?null:this.Is.Dt().fn(e,i.Ot)}barsInLogicalRange(e){if(e===null)return null;const i=new br(new So(e.from,e.to)).iu(),s=this.Is.Vn();if(s.Ei())return null;const r=s.il(i.Rs(),1),n=s.il(i.ui(),-1),o=J(s.Jh()),a=J(s.An());if(r!==null&&n!==null&&r.ie>n.ie)return{barsBefore:e.from-o,barsAfter:a-e.to};const l={barsBefore:r===null||r.ie===o?e.from-o:r.ie-o,barsAfter:n===null||n.ie===a?a-e.to:a-n.ie};return r!==null&&n!==null&&(l.from=r.wb,l.to=n.wb),l}setData(e){this.N_,this.Is.Yh(),this.Kb.Jb(this.Is,e),this.Qb("full")}update(e){this.Is.Yh(),this.Kb.tw(this.Is,e),this.Qb("update")}dataByIndex(e,i){const s=this.Is.Vn().il(e,i);return s===null?null:Qc(this.seriesType())(s)}data(){const e=Qc(this.seriesType());return this.Is.Vn().Qs().map(i=>e(i))}subscribeDataChanged(e){this.Xb.l(e)}unsubscribeDataChanged(e){this.Xb.v(e)}setMarkers(e){this.N_;const i=e.map(s=>Gm(s,this.N_.convertHorzItemToInternal(s.time),s.time));this.Is.Zl(i)}markers(){return this.Is.Gl().map(e=>Gm(e,e.originalTime,void 0))}applyOptions(e){this.Is.Eh(e)}options(){return ws(this.Is.W())}priceScale(){return this.Zb.priceScale(this.Is.Dt().xa())}createPriceLine(e){const i=$i(ws(EN),e),s=this.Is.Jl(i);return new IN(s)}removePriceLine(e){this.Is.Ql(e.Yb())}seriesType(){return this.Is.Yh()}attachPrimitive(e){this.Is.ba(e),e.attached&&e.attached({chart:this.Gb,series:this,requestUpdate:()=>this.Is.$t().$l()})}detachPrimitive(e){this.Is.wa(e),e.detached&&e.detached()}Qb(e){this.Xb.M()&&this.Xb.m(e)}}class kN{constructor(e,i,s){this.iw=new at,this.uu=new at,this.um=new at,this.Hi=e,this.wl=e.St(),this.Um=i,this.wl.Ku().l(this.nw.bind(this)),this.wl.Zu().l(this.sw.bind(this)),this.Um.Mm().l(this.ew.bind(this)),this.N_=s}S(){this.wl.Ku().p(this),this.wl.Zu().p(this),this.Um.Mm().p(this),this.iw.S(),this.uu.S(),this.um.S()}scrollPosition(){return this.wl.Lu()}scrollToPosition(e,i){i?this.wl.qu(e,1e3):this.Hi.Zn(e)}scrollToRealTime(){this.wl.Uu()}getVisibleRange(){const e=this.wl.yu();return e===null?null:{from:e.from.originalTime,to:e.to.originalTime}}setVisibleRange(e){const i={from:this.N_.convertHorzItemToInternal(e.from),to:this.N_.convertHorzItemToInternal(e.to)},s=this.wl.Ru(i);this.Hi.ad(s)}getVisibleLogicalRange(){const e=this.wl.ku();return e===null?null:{from:e.Rs(),to:e.ui()}}setVisibleLogicalRange(e){en(e.from<=e.to,"The from index cannot be after the to index."),this.Hi.ad(e)}resetTimeScale(){this.Hi.Xn()}fitContent(){this.Hi.Qu()}logicalToCoordinate(e){const i=this.Hi.St();return i.Ei()?null:i.It(e)}coordinateToLogical(e){return this.wl.Ei()?null:this.wl.Vu(e)}timeToCoordinate(e){const i=this.N_.convertHorzItemToInternal(e),s=this.wl.ya(i,!1);return s===null?null:this.wl.It(s)}coordinateToTime(e){const i=this.Hi.St(),s=i.Vu(e),r=i.$i(s);return r===null?null:r.originalTime}width(){return this.Um.Up().width}height(){return this.Um.Up().height}subscribeVisibleTimeRangeChange(e){this.iw.l(e)}unsubscribeVisibleTimeRangeChange(e){this.iw.v(e)}subscribeVisibleLogicalRangeChange(e){this.uu.l(e)}unsubscribeVisibleLogicalRangeChange(e){this.uu.v(e)}subscribeSizeChange(e){this.um.l(e)}unsubscribeSizeChange(e){this.um.v(e)}applyOptions(e){this.wl.Eh(e)}options(){return Object.assign(Object.assign({},ws(this.wl.W())),{barSpacing:this.wl.ee()})}nw(){this.iw.M()&&this.iw.m(this.getVisibleRange())}sw(){this.uu.M()&&this.uu.m(this.getVisibleLogicalRange())}ew(e){this.um.m(e.width,e.height)}}function CN(t){if(t===void 0||t.type==="custom")return;const e=t;e.minMove!==void 0&&e.precision===void 0&&(e.precision=function(i){if(i>=1)return 0;let s=0;for(;s<8;s++){const r=Math.round(i);if(Math.abs(r-i)<1e-8)return s;i*=10}return s}(e.minMove))}function Km(t){return function(e){if(Sa(e.handleScale)){const s=e.handleScale;e.handleScale={axisDoubleClickReset:{time:s,price:s},axisPressedMouseMove:{time:s,price:s},mouseWheel:s,pinch:s}}else if(e.handleScale!==void 0){const{axisPressedMouseMove:s,axisDoubleClickReset:r}=e.handleScale;Sa(s)&&(e.handleScale.axisPressedMouseMove={time:s,price:s}),Sa(r)&&(e.handleScale.axisDoubleClickReset={time:r,price:r})}const i=e.handleScroll;Sa(i)&&(e.handleScroll={horzTouchDrag:i,vertTouchDrag:i,mouseWheel:i,pressedMouseMove:i})}(t),t}class PN{constructor(e,i,s){this.rw=new Map,this.hw=new Map,this.lw=new at,this.aw=new at,this.ow=new at,this._w=new fN(i);const r=s===void 0?ws(Ym()):$i(ws(Ym()),Km(s));this.N_=i,this.Ub=new aN(e,r,i),this.Ub.Wp().l(o=>{this.lw.M()&&this.lw.m(this.uw(o()))},this),this.Ub.jp().l(o=>{this.aw.M()&&this.aw.m(this.uw(o()))},this),this.Ub.jc().l(o=>{this.ow.M()&&this.ow.m(this.uw(o()))},this);const n=this.Ub.$t();this.cw=new kN(n,this.Ub.Gm(),this.N_)}remove(){this.Ub.Wp().p(this),this.Ub.jp().p(this),this.Ub.jc().p(this),this.cw.S(),this.Ub.S(),this.rw.clear(),this.hw.clear(),this.lw.S(),this.aw.S(),this.ow.S(),this._w.S()}resize(e,i,s){this.autoSizeActive()||this.Ub.Ym(e,i,s)}addCustomSeries(e,i){const s=lr(e),r=Object.assign(Object.assign({},Z_),s.defaultOptions());return this.dw("Custom",r,i,s)}addAreaSeries(e){return this.dw("Area",p$,e)}addBaselineSeries(e){return this.dw("Baseline",g$,e)}addBarSeries(e){return this.dw("Bar",f$,e)}addCandlestickSeries(e={}){return function(i){i.borderColor!==void 0&&(i.borderUpColor=i.borderColor,i.borderDownColor=i.borderColor),i.wickColor!==void 0&&(i.wickUpColor=i.wickColor,i.wickDownColor=i.wickColor)}(e),this.dw("Candlestick",h$,e)}addHistogramSeries(e){return this.dw("Histogram",v$,e)}addLineSeries(e){return this.dw("Line",m$,e)}removeSeries(e){const i=jt(this.rw.get(e)),s=this._w.ld(i);this.Ub.$t().ld(i),this.fw(s),this.rw.delete(e),this.hw.delete(i)}Jb(e,i){this.fw(this._w.Vb(e,i))}tw(e,i){this.fw(this._w.Eb(e,i))}subscribeClick(e){this.lw.l(e)}unsubscribeClick(e){this.lw.v(e)}subscribeCrosshairMove(e){this.ow.l(e)}unsubscribeCrosshairMove(e){this.ow.v(e)}subscribeDblClick(e){this.aw.l(e)}unsubscribeDblClick(e){this.aw.v(e)}priceScale(e){return new xN(this.Ub,e)}timeScale(){return this.cw}applyOptions(e){this.Ub.Eh(Km(e))}options(){return this.Ub.W()}takeScreenshot(){return this.Ub.ib()}autoSizeActive(){return this.Ub.hb()}chartElement(){return this.Ub.lb()}paneSize(){const e=this.Ub.ob();return{height:e.height,width:e.width}}setCrosshairPosition(e,i,s){const r=this.rw.get(s);if(r===void 0)return;const n=this.Ub.$t()._r(r);n!==null&&this.Ub.$t().td(e,i,n)}clearCrosshairPosition(){this.Ub.$t().nd(!0)}dw(e,i,s={},r){CN(s.priceFormat);const n=$i(ws(X_),ws(i),s),o=this.Ub.$t().rd(e,n,r),a=new DN(o,this,this,this,this.N_);return this.rw.set(a,o),this.hw.set(o,a),a}fw(e){const i=this.Ub.$t();i.sd(e.St.Au,e.St.Hb,e.St.$b),e.Wb.forEach((s,r)=>r.J(s.We,s.jb)),i.Iu()}pw(e){return jt(this.hw.get(e))}uw(e){const i=new Map;e.xb.forEach((r,n)=>{const o=n.Yh(),a=Qc(o)(r);if(o!=="Custom")en(function(l){return l.open!==void 0||l.value!==void 0}(a));else{const l=n.Ma();en(!l||l(a)===!1)}i.set(this.pw(n),a)});const s=e.Mb===void 0?void 0:this.pw(e.Mb);return{time:e.wb,logical:e.ie,point:e.gb,hoveredSeries:s,hoveredObjectId:e.Sb,seriesData:i,sourceEvent:e.kb}}}function MN(t,e,i){let s;if(la(t)){const n=document.getElementById(t);en(n!==null,`Cannot find element in DOM with id=${t}`),s=n}else s=t;const r=new PN(s,e,i);return e.setOptions(r.options()),r}function bh(t,e){return MN(t,new Rm,Rm.Pd(e))}Object.assign(Object.assign({},X_),Z_);const AN="/icon/eraser-icon.png",ON={name:"LogItemHistory",components:{DateTimeSelector:id},props:{logItemID:Number},data:function(){return{metricStore:void 0,chart:void 0,series:[],tableEntries:[],entryCount:20,selectedEntry:void 0,confimDelete:!1}},created:function(){this.metricStore=cn()},computed:{logItem(){if(this.metricStore)return this.metricStore.getLogItem(this.logItemID)},metric(){return this.logItem?this.logItem.metric:""},seriesData(){return this.tableEntries?h_(this.tableEntries,"dateTime").map(i=>{let s=i.fieldValues[0];return{dateTime:new Date(i.dateTime),time:new Date(i.dateTime)/1e3,value:parseFloat(s.value)}}):[]},totalEntries(){return this.logItem?this.logItem.entries.length:0}},methods:{setTableEntries:RN,createLogChart:$N,initInfiniteScroll:NN,fitChartContent:LN,jsonToDateTimeString:VD,getRowRef:VN,selectChartPoint:FN,handleChartClick:WN,handleChartDoubleClick:zN,setSelectedEntry:jN,deselectEntries:BN,updateEntryDateTime:HN,updateEntryField:UN,updateEntryBlurb:YN,deleteEntry:GN},watch:{logItem(t){this.setTableEntries(t),this.createLogChart()},entryCount(){this.setTableEntries(this.logItem)}}};function RN(t){if(t){let e=qE(t.entries,"dateTime");e=e.slice(0,this.entryCount);let i=e.map(s=>({id:s.id,dateTime:s.dateTime,time:new Date(s.dateTime)/1e3,fieldValues:s.fieldValues,blurb:s.reason,isActive:!1,isSelected:!1}));this.tableEntries=i}else this.tableEntries=[]}function $N(){this.$refs["log-item-chart"].replaceChildren();const t=bh("log-item-chart",{width:278,height:100});this.series=t.addLineSeries(),this.series.setData(this.seriesData),t.timeScale().fitContent(),t.subscribeClick(this.handleChartClick),t.subscribeDblClick(this.handleChartDoubleClick);let e=t.timeScale();console.log(e),this.chart=t,this.initInfiniteScroll()}function NN(){let t=this,e=this.chart.timeScale(),i=null;e.subscribeVisibleLogicalRangeChange(()=>{i===null&&(i=setTimeout(()=>{var s=e.getVisibleLogicalRange();if(s!==null&&s.from<5){let r=t.totalEntries-t.entryCount;r>0&&(t.entryCount+=r>20?20:r,t.series.setData(t.seriesData))}i=null},250))})}function LN(){this.chart.timeScale().fitContent()}function VN(t){return`${new Date(t.dateTime)/1e3}-${t.value}`}function WN(t){this.selectChartPoint(t)}function zN(){let t=this.tableEntries.find(e=>e.isActive);this.setSelectedEntry(t)}function FN(t){this.deselectEntries();let e=!1,i=0,s=this.$refs["table-head"].getBoundingClientRect().height;this.tableEntries.forEach(n=>{n.time!=t.time&&!e?(i+=s,s=this.$refs[`entry-${t.time}`][0].getBoundingClientRect().height,n.isActive=!1):n.time==t.time?(n.isActive=!0,e=!0):n.isActive=!1}),this.$refs["value-table"].scrollTo({top:i,left:0,behavior:"smooth"})}function jN(t){if(t)if(this.selectedEntry&&this.selectedEntry.id==t.id)this.deselectEntries();else{this.deselectEntries();let e={id:t.id,dateTime:t.dateTime,blurb:t.blurb,fields:[]};t.fieldValues.forEach(i=>{let s=this.logItem.fields.find(r=>r.id==i.logItemFieldID);e.fields.push({id:i.logItemFieldID,value:i.value,name:s.name})}),this.selectedEntry=e,t.isActive=!0,t.isSelected=!0}else this.deselectEntries()}function BN(){this.tableEntries.forEach(t=>{t.isSelected=!1,t.isActive=!1}),this.selectedEntry=void 0}function HN(t){let e={logItemID:this.logItem.id,dateTime:this.selectedEntry.dateTime,updatedDateTime:t,isUpdated:!0};this.selectedEntry.dateTime=t,this.metricStore.logLogItem(e)}function UN(t){let e={logItemID:this.logItem.id,dateTime:this.selectedEntry.dateTime,fields:[{id:t.id,value:t.value}],isUpdated:!0};this.metricStore.logLogItem(e)}function YN(){let t={logItemID:this.logItem.id,dateTime:this.selectedEntry.dateTime,reason:{value:this.selectedEntry.blurb,isUpdated:!0},isUpdated:!0};this.metricStore.logLogItem(t)}function GN(t){this.metricStore.deleteLogEntry(t),this.confimDelete=!1}const KN={class:"log-item-history d-flex flex-column flex-grow-1 overflow-scroll"},qN={class:"head d-flex flex-row"},JN={class:"metric text-start ms-1"},QN={class:"name text-start ms-1"},ZN={id:"log-item-chart",class:"mt-2",ref:"log-item-chart"},XN={class:"value-table d-flex flex-column flex-grow-1 overflow-scroll",ref:"value-table"},eL={key:0,class:"table table-striped"},tL={class:"sticky-top",ref:"table-head"},iL=["onClick"],sL={scope:"row"},nL={key:0},rL=["colspan"],oL={class:"additional-values d-flex flex-column"},aL={class:"fields d-flex flex-column"},lL=["placeholder","onUpdate:modelValue","onChange"],dL={key:1,class:"d-flex flex-row mt-2 align-items-center"},cL=["onClick"];function uL(t,e,i,s,r,n){const o=T("DateTimeSelector");return f(),m("div",KN,[c("div",qN,[c("img",{class:"icon-button mt-auto mb-auto",src:bi,width:"20",height:"20",onClick:e[0]||(e[0]=fe(a=>t.$emit("back"),["prevent"]))}),c("div",JN,S(n.logItem.metric),1),c("div",QN,S(n.logItem.name),1),c("img",{class:"header-button me-1",src:AN,width:"16",height:"16",onClick:e[1]||(e[1]=fe((...a)=>n.fitChartContent&&n.fitChartContent(...a),["prevent"]))})]),c("div",ZN,null,512),c("div",XN,[n.logItem?(f(),m("table",eL,[c("thead",tL,[c("tr",null,[e[6]||(e[6]=c("th",{scope:"col"},"Time",-1)),(f(!0),m(M,null,N(n.logItem.fields,a=>(f(),m("th",{key:a.id,scope:"col"},S(a.name),1))),128))])]),c("tbody",null,[(f(!0),m(M,null,N(t.tableEntries,a=>(f(),m(M,{key:a.id},[c("tr",{ref_for:!0,ref:`entry-${a.time}`,class:O({active:a.isActive}),onClick:l=>n.setSelectedEntry(a)},[c("th",sL,S(n.jsonToDateTimeString(a.dateTime)),1),(f(!0),m(M,null,N(a.fieldValues,l=>(f(),m("td",{key:l.id},S(l.value),1))),128))],10,iL),a.isSelected?(f(),m("tr",nL,[c("td",{colspan:a.fieldValues.length+1},[c("div",oL,[D(o,{class:"date-selector mt-2",dateTime:t.selectedEntry.dateTime,onOnChange:n.updateEntryDateTime},null,8,["dateTime","onOnChange"]),c("div",aL,[(f(!0),m(M,null,N(t.selectedEntry.fields,l=>H((f(),m("input",{key:l.id,class:"textbox mt-2",type:"text",placeholder:l.name,"onUpdate:modelValue":d=>l.value=d,spellcheck:"true",onChange:d=>n.updateEntryField(l)},null,40,lL)),[[Pe,l.value,void 0,{lazy:!0,trim:!0}]])),128))]),H(c("textarea",{id:"blurb",class:"textarea mt-2",type:"text",placeholder:"Blurb","onUpdate:modelValue":e[2]||(e[2]=l=>t.selectedEntry.blurb=l),spellcheck:"true",onChange:e[3]||(e[3]=(...l)=>n.updateEntryBlurb&&n.updateEntryBlurb(...l))},null,544),[[Pe,t.selectedEntry.blurb,void 0,{lazy:!0}]]),t.confimDelete?y("",!0):(f(),m("button",{key:0,type:"button",class:"btn btn-danger mt-2",onClick:e[4]||(e[4]=l=>t.confimDelete=!0)},"Delete")),t.confimDelete?(f(),m("div",dL,[e[7]||(e[7]=c("span",null,"Are you sure?",-1)),c("button",{type:"button",class:"btn btn-warning ms-2",onClick:e[5]||(e[5]=l=>t.confimDelete=!1)},"Cancel"),c("button",{type:"button",class:"btn btn-danger ms-2",onClick:l=>n.deleteEntry(a.id)},"Delete",8,cL)])):y("",!0)])],8,rL)])):y("",!0)],64))),128))])])):y("",!0)])])}const hL=V(ON,[["render",uL],["__scopeId","data-v-86179929"]]),fL={name:"InventoryPanel",components:{LogItemView:n$,LogItemHistory:hL,ItemPanelNavbar:na},props:{showHead:{type:Boolean,default:!0}},data:function(){return{appStore:void 0,metricStore:void 0,selectedPanel:"list",selectedLogItemID:void 0,inventoryList:[],clearMinutes:15}},created:function(){this.appStore=Gt(),this.metricStore=cn(),this.metricStore.initializeLogItems()},computed:{logItems(){return this.metricStore?q(this.metricStore.getLogItems()):[]},clear(){return this.appStore?this.appStore.itemPanel.inventory.clear:0},showPrimary(){return this.appStore?this.appStore.itemPanel.inventory.showPrimary:!0},showSecondary(){return this.appStore?this.appStore.itemPanel.inventory.showSecondary:!1},showTertiary(){return this.appStore?this.appStore.itemPanel.inventory.showTertiary:!1},primaryToggled(){return this.appStore?this.appStore.itemPanel.inventory.primaryToggled:void 0},secondaryToggled(){return this.appStore?this.appStore.itemPanel.inventory.secondaryToggled:void 0},tertiaryToggled(){return this.appStore?this.appStore.itemPanel.inventory.tertiaryToggled:void 0}},methods:{setInventoryList:mL,selectLogItem:pL,back:gL},watch:{logItems:{handler(){this.setInventoryList()},deep:!0},showPrimary(){this.setInventoryList()},showSecondary(){this.setInventoryList()},showTertiary(){this.setInventoryList()},primaryToggled(){this.setInventoryList()},secondaryToggled(){this.setInventoryList()},tertiaryToggled(){this.setInventoryList()}}};function mL(){let t={};if(this.logItems.length>0){let e=this.logItems.map(r=>r.metric);e=[...new Set(e)],e.forEach(r=>{t[r]=[]});let i=!0,s=!0;this.logItems.forEach(r=>{if(r.fields[0].controlTypeID!=_v.SLIDER)return;let o=r.entries.length>0?r.entries[r.entries.length-1]:void 0;if(o){let a=new Date(o.dateTime),l=N_(this.clearMinutes);+a<+l&&(r.isPrimary?i=!1:r.isSecondary&&(s=!1))}else r.isPrimary?i=!1:r.isSecondary&&(s=!1)}),this.appStore.itemPanel.inventory.showSecondary=i,this.appStore.itemPanel.inventory.showTertiary=s,this.logItems.forEach(r=>{r.isPrimary?this.primaryToggled!=null?this.primaryToggled==!0&&t[r.metric].push(r):this.showPrimary&&t[r.metric].push(r):r.isSecondary&&(this.secondaryToggled!=null?this.secondaryToggled==!0&&t[r.metric].push(r):this.showSecondary&&t[r.metric].push(r)),r.isTertiary&&(this.tertiaryToggled!=null?this.tertiaryToggled==!0&&t[r.metric].push(r):this.showTertiary&&t[r.metric].push(r))})}this.inventoryList=t}function pL(t){this.selectedLogItemID=t,this.selectedPanel="logItemHistory"}function gL(){this.selectedPanel="list",this.selectedLogItemID=void 0}const vL={class:"row g-0 h-100"},_L={class:"col h-100 d-flex flex-column"},yL={class:"inventory d-flex flex-column flex-grow-1 overflow-hidden"},bL={key:0},wL={class:"label text-start"};function SL(t,e,i,s,r,n){const o=T("ItemPanelNavbar"),a=T("LogItemView"),l=T("LogItemHistory");return f(),m("div",vL,[c("div",_L,[c("div",yL,[H(D(o,null,null,512),[[Ie,i.showHead]]),c("div",{class:O(["body d-flex flex-column flex-grow-1",{hide:t.selectedPanel!="list"}])},[(f(!0),m(M,null,N(t.inventoryList,(d,u,h)=>(f(),m("div",{key:h,class:"metric mb-2"},[d.length>0?(f(),m("div",bL,[c("div",wL,S(u),1),(f(!0),m(M,null,N(d,(p,g)=>(f(),K(a,{class:"log-item d-flex flex-row flex-grow-1 mt-1",key:g,logItem:p,clearValues:n.clear,clearMinutes:t.clearMinutes,onSelectLogItem:n.selectLogItem},null,8,["logItem","clearValues","clearMinutes","onSelectLogItem"]))),128))])):y("",!0)]))),128))],2),t.selectedPanel=="logItemHistory"?(f(),K(l,{key:0,logItemID:t.selectedLogItemID,onBack:n.back},null,8,["logItemID","onBack"])):y("",!0)])])])}const Ty=V(fL,[["render",SL],["__scopeId","data-v-f8869a3a"]]);async function TL(){return fetch(`${re}/api/Physical/GetNutritionHistory`,{method:"POST",headers:{"Content-Type":"application/json"}}).then(t=>t.json()).then(t=>{if(t.errorMessage)this.errorMessage=t.errorMessage;else return t}).catch(t=>{console.error("Error:",t)})}async function xL(t,e){let i={startAt:t,endAt:e};return fetch(`${re}/api/Physical/GetMealsInRange`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}).then(s=>s.json()).then(s=>{if(s.errorMessage)this.errorMessage=s.errorMessage;else return s}).catch(s=>{console.error("Error:",s)})}async function EL(){return fetch(`${re}/api/Physical/GetRecentFoodItems`,{method:"POST",headers:{"Content-Type":"application/json"}}).then(t=>t.json()).then(t=>{if(t.errorMessage)this.errorMessage=t.errorMessage;else return t}).catch(t=>{console.error("Error:",t)})}async function IL(){return fetch(`${re}/api/Physical/GetWaterLogs`,{method:"POST",headers:{"Content-Type":"application/json"}}).then(t=>t.json()).then(t=>{if(t.errorMessage)this.errorMessage=t.errorMessage;else return t}).catch(t=>{console.error("Error:",t)})}async function DL(t){let e={query:t};return fetch(`${re}/api/Physical/FoodSearchAutoComplete`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(i=>i.json()).then(i=>{if(i.errorMessage)this.errorMessage=i.errorMessage;else return i}).catch(i=>{console.error("Error:",i)})}async function kL(t){let e={upc:t};return fetch(`${re}/api/Physical/SearchFoodUPC`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(i=>i.json()).then(i=>{if(i.errorMessage)this.errorMessage=i.errorMessage;else return i}).catch(i=>{console.error("Error:",i)})}async function CL(t){return fetch(`${re}/api/Physical/AddFoodItemToMeal`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then(e=>e.json()).then(e=>{if(e.errorMessage)this.errorMessage=e.errorMessage;else return e}).catch(e=>{console.error("Error:",e)})}async function PL(t,e,i){let s={amountFLOZ:t,dateTime:e,mealID:i};return fetch(`${re}/api/Physical/LogWater`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}).then(r=>r.json()).then(r=>{if(r.errorMessage)this.errorMessage=r.errorMessage;else return r}).catch(r=>{console.error("Error:",r)})}async function ML(t,e,i){let s={mealID:t,startAt:e,endAt:i};return fetch(`${re}/api/Physical/SetMealTime`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}).then(r=>r.json()).then(r=>{if(r.errorMessage)this.errorMessage=r.errorMessage;else return r}).catch(r=>{console.error("Error:",r)})}async function AL(t,e){let i={mealID:t,foodItemID:e};return fetch(`${re}/api/Physical/RemoveFoodItem`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}).then(s=>s.json()).then(s=>{if(s.errorMessage)this.errorMessage=s.errorMessage;else return s}).catch(s=>{console.error("Error:",s)})}let qm=!1;const Bn=Li("physical",{state:()=>({meals:[],mealHistories:[],waterLogs:[]}),getters:{},actions:{async initialize(){let t=this;this.connectSocket(),TL().then(e=>{t.mealHistories=e.meals,t.waterLogs=e.waterLogs}),qm=!0},getMealsInRange(t,e,i){let s=this;return i&&xL(t,e).then(r=>{r.forEach(n=>{Be(n,s.meals)}),xe(s.meals)}),this.meals.filter(r=>+new Date(r.startAt)>=t&&+new Date(r.startAt)<=e)},async getRecentFoodItems(){return await EL()},async getWaterLogs(){return await IL()},async foodSearchAutoComplete(t){return await DL(t)},async searchFoodUPC(t){return await kL(t)},async addFoodItemToMeal(t){CL(t)},async logWater(t,e,i){PL(t,e,i)},async setMealTime(t,e,i){ML(t,e,i)},async removeFoodItem(t,e){AL(t,e)},connectSocket(){if(!qm){let t=Os("metricHub"),e=this;t.on("UpdateMeals",i=>{i.forEach(s=>{Be(s,e.meals);let r={id:s.id,name:s.name,dateTime:s.dateTime,calories:s.calories,carbs:s.carbohydrates,protein:s.protein,fat:s.fat};Be(r,e.mealHistories)}),xe(e.meals)}),t.on("RemoveMeals",i=>{i.forEach(s=>{xs(s,e.meals),xs(s,e.mealHistories)}),xe(e.meals)}),t.on("UpdateWaterLogs",i=>{i.forEach(s=>{Be(s,e.waterLogs)}),xe(e.waterLogs)}),t.on("RemoveWaterLogs",i=>{i.forEach(s=>{xs(s,e.waterLogs)}),xe(e.meals)})}}}}),xy=Object.freeze(Object.defineProperty({__proto__:null,usePhysicalStore:Bn},Symbol.toStringTag,{value:"Module"})),OL={name:"NutrientChart",components:{},props:{caloriesRecommended:{type:Number,default:2e3},waterRecommended:{type:Number,default:140}},data:function(){return{physicalStore:void 0,mealData:[],chart:void 0,calorieSeries:void 0,calorieSeriesData:[],waterSeries:void 0,waterSeriesData:[],proteinSeries:void 0}},created:function(){this.physicalStore=Bn()},mounted(){this.createNutrientChart()},computed:{startDate(){return xr(new Date,-2)},mealHistories(){if(this.physicalStore){let t=[],e=this.physicalStore.mealHistories;if(e.length>0){let i;e=this.sortDateAsc(e,"dateTime");let s=new Date(1970,0,1);e.forEach(r=>{let n=this.startOfDay(new Date(r.dateTime));+n<+this.startDate||(+s==+n?(i.calories+=r.calories,i.carbs+=r.carbs,i.protein+=r.protein,i.fat+=r.fat):(s=n,i={calories:r.calories,carbs:r.carbs,protein:r.protein,fat:r.fat},t.push({date:s,nutrients:i})))})}return t}else return[]},waterHistories(){if(this.physicalStore){let t=[],e=this.physicalStore.waterLogs;if(e.length>0){let i=0;e=this.sortDateAsc(e,"dateTime");let s=new Date(1970,0,1);e.forEach(r=>{let n=this.startOfDay(new Date(r.dateTime));+n<+this.startDate||(+s==+n?t[t.length-1].amount+=r.amount:(s=n,i=r.amount,t.push({date:s,amount:i})))})}return t}else return[]}},methods:{sortDateAsc:h_,startOfDay:qu,createChart:bh,createNutrientChart:RL,setCalorieSeries:$L,setWaterSeries:NL},watch:{mealHistories:{handler(t){t.length&&t.length>0&&this.setCalorieSeries()},deep:!0},waterHistories:{handler(t){t.length&&t.length>0&&this.setWaterSeries()},deep:!0}}};function RL(){let t={rightPriceScale:{visible:!0},leftPriceScale:{visible:!0},localization:{priceFormatter:r=>r.toFixed(0)},width:278,height:100};this.$refs["nutrient-chart"].replaceChildren();const e=bh("nutrient-chart",t);this.chart=e,this.calorieSeries=e.addLineSeries({priceScaleId:"left",color:"#EA8919",lastValueVisible:!1,priceLineVisible:!1});const i={price:this.caloriesRecommended,color:"#EA8919",lineWidth:2,lineStyle:2,axisLabelVisible:!0};this.calorieSeries.createPriceLine(i),this.waterSeries=e.addLineSeries({priceScaleId:"right",color:"#3B99FC",lastValueVisible:!1,priceLineVisible:!1});const s={price:this.waterRecommended,color:"#3B99FC",lineWidth:2,lineStyle:2,axisLabelVisible:!0};this.waterSeries.createPriceLine(s)}function $L(){let t=0,e=this.mealHistories.map(s=>(s.nutrients.calories>t&&(t=s.nutrients.calories),{datetime:s.date,time:s.date/1e3,value:parseInt(s.nutrients.calories)}));this.calorieSeries.setData(e);let i=t<this.caloriesRecommended?this.caloriesRecommended:t;this.calorieSeries.applyOptions({autoscaleInfoProvider:()=>({priceRange:{minValue:0,maxValue:i}})}),this.chart.timeScale().fitContent(),this.calorieSeriesData=e}function NL(){let t=0,e=this.waterHistories.map(s=>(s.amount>t&&(t=s.amount),{datetime:s.date,time:s.date/1e3,value:s.amount}));this.waterSeries.setData(e);let i=t<this.waterRecommended?this.waterRecommended+10:t+10;this.waterSeries.applyOptions({autoscaleInfoProvider:()=>({priceRange:{minValue:0,maxValue:i}})}),this.chart.timeScale().fitContent(),this.waterSeriesData=e}const LL={id:"nutrient-chart",ref:"nutrient-chart",class:"mt-2"};function VL(t,e,i,s,r,n){return f(),m("div",LL,null,512)}const WL=V(OL,[["render",VL]]),zL={name:"FoodItemTable",components:{},props:{meal:Object},data:function(){return{physicalStore:void 0,foodItems:[]}},created:function(){this.physicalStore=Bn(),this.foodItems=this.meal.foodItems},methods:{float:Ku,onDeleteItem:FL},watch:{meal(t){this.foodItems=t.foodItems}}};function FL(t){this.physicalStore.removeFoodItem(this.meal.id,t.id)}const jL={class:"overflow-scroll"},BL={class:"table"},HL={class:"d-flex justufy-content-center"},UL=["onClick"];function YL(t,e,i,s,r,n){return f(),m("div",jL,[c("table",BL,[e[1]||(e[1]=c("thead",null,[c("tr",null,[c("th",{scope:"col"},"Qty"),c("th",{scope:"col"},"Unit"),c("th",{scope:"col"},"Name"),c("th",{scope:"col"},"Cals"),c("th",{scope:"col"},"Carbs"),c("th",{scope:"col"},"Prot"),c("th",{scope:"col"},"Fat"),c("th",{scope:"col"})])],-1)),c("tbody",null,[(f(!0),m(M,null,N(t.foodItems,o=>(f(),m("tr",{key:o.id},[c("td",null,S(o.quantity),1),c("td",null,S(o.unit),1),c("td",null,S(o.name),1),c("td",null,S(n.float(o.calories,0)),1),c("td",null,S(n.float(o.carbohydrates,0)),1),c("td",null,S(n.float(o.protein,0)),1),c("td",null,S(n.float(o.fat,0)),1),c("td",null,[c("div",HL,[c("button",{class:"delete-btn btn btn-secondary btn-sm float-end",type:"button",onClick:fe(a=>n.onDeleteItem(o),["prevent","stop"])},e[0]||(e[0]=[c("i",{class:"far fa-trash-alt"},null,-1)]),8,UL)])])]))),128))])])])}const GL=V(zL,[["render",YL],["__scopeId","data-v-0645c167"]]),ns="/icon/add-button.png",Ey="/icon/nutrition/calorie-flame.png",Iy="/icon/nutrition/water-droplet.png",KL={name:"",components:{FoodItemTable:GL,DateTimeSelector:id},props:{meal:Object},data:function(){return{physicalStore:void 0,infoExpanded:!1,itemsExpanded:!1,caloriesRecommeded:400,waterRecommeded:28,waterQuantity:void 0,isEditWater:!1,isTimeValid:!0,editTime:!1,startAt:void 0,endAt:void 0}},created:function(){this.physicalStore=Bn(),this.refresh()},computed:{caloriePercentage(){return this.floatString(this.meal.calories/this.caloriesRecommeded*100,0)},waterPercentage(){return this.floatString(this.meal.water/this.waterRecommeded*100,0)},carbs(){return this.meal.macros.carbs},protein(){return this.meal.macros.protein},fat(){return this.meal.macros.fat},waterInputWidth(){return this.waterQuantity<10?"25px":this.waterQuantity<100?"34px":"41px"}},methods:{floatString:KE,toShortTimeString:k_,setTimeFromDate:nh,addFood:QL,editWater:ZL,setWater:XL,refresh:qL,refreshTimes:JL,setTime:eV,setTimeNow:tV,validateTimes:iV,saveTime:sV},watch:{meal(){this.refresh()}}};function qL(){this.infoExpanded=this.meal.foodItems.length>0,this.infoExpanded||(this.itemsExpanded=!1),this.waterQuantity=this.meal.water,this.refreshTimes()}function JL(){this.editTime=!1,this.meal.iteration&&this.meal.iteration.startAt?this.startAt=new Date(this.meal.iteration.startAt):this.startAt=void 0,this.meal.iteration&&this.meal.iteration.endAt?this.endAt=new Date(this.meal.iteration.endAt):this.endAt=void 0}function QL(){this.$emit("searchFoodItems",this.meal)}async function ZL(){this.isEditWater=!0,await this.$nextTick(),this.$refs.waterQuantity.focus()}function XL(){if(this.isEditWater=!1,this.waterQuantity&&this.waterQuantity!=this.meal.water){var t=new Date(this.meal.dateTime);this.setTimeFromDate(t,new Date),this.physicalStore.logWater(this.waterQuantity,t,this.meal.id)}}function eV(t,e){t&&(e=="start"?(this.startAt=new Date(t),this.endAt=$_(15,this.startAt)):e=="end"&&(this.endAt=new Date(t)),this.validateTimes())}function tV(){this.startAt=new Date(this.meal.dateTime),this.setTimeFromDate(this.startAt,new Date),this.endAt=$_(15,this.startAt),this.validateTimes()}function iV(){(this.meal.iteration||void 0)&&(this.startAt&&this.endAt?+this.startAt>+this.endAt?this.isTimeValid=!1:+this.startAt<=+this.endAt&&(this.isTimeValid=!0):this.endAt?this.isTimeValid=!0:this.isTimeValid=!1)}function sV(){this.isTimeValid&&this.physicalStore.setMealTime(this.meal.id,this.startAt,this.endAt)}const nV={class:"meal d-flex flex-column"},rV={class:"d-flex flex-row align-items-center ps-1"},oV={class:"name"},aV={class:"calories d-flex flex-column position-relative align-items-center"},lV={class:"amount d-flex flex-row"},dV={class:"consumed"},cV={class:"recommended"},uV={class:"percent d-flex flex-row"},hV={class:"macros d-flex flex-column justify-content-end"},fV={class:"consumed"},mV={key:0,class:"d-flex flex-row"},pV={class:"water d-flex flex-column position-relative align-items-center"},gV={class:"amount"},vV={class:"consumed"},_V={class:"recommended"},yV={class:"percent d-flex flex-row"},bV={key:1,class:"d-flex flex-column"},wV={key:0,class:"time mt-1"},SV={key:0,class:"start ms-1"},TV={key:1,class:"end ms-2"},xV={key:1,class:"d-flex flex-column"},EV={class:"d-flex flex-row mt-2"};function IV(t,e,i,s,r,n){const o=T("DateTimeSelector"),a=T("FoodItemTable");return f(),m("div",nV,[c("div",rV,[c("span",oV,S(i.meal.name),1),c("img",{class:"icon-button ms-1",src:ns,width:15,height:15,onClick:e[0]||(e[0]=(...l)=>n.addFood&&n.addFood(...l))})]),t.infoExpanded?(f(),m("div",{key:0,class:"d-flex flex-row justify-content-between p-1",onClick:e[5]||(e[5]=l=>t.itemsExpanded=!t.itemsExpanded)},[c("div",aV,[c("div",lV,[c("span",dV,S(n.floatString(i.meal.calories,0)),1),c("span",cV,"/"+S(t.caloriesRecommeded)+" cal",1)]),e[13]||(e[13]=c("img",{class:"flame",src:Ey,width:"33",height:"45"},null,-1)),c("div",uV,[c("span",null,S(n.caloriePercentage),1),e[12]||(e[12]=c("span",null,"%",-1))])]),c("div",hV,[e[14]||(e[14]=rv('<div class="recommended d-flex flex-row mb-1" data-v-6a073fe1><div class="carbs d-flex flex-column" data-v-6a073fe1><span data-v-6a073fe1>Carbs</span><span class="percent" data-v-6a073fe1>50%</span></div><div class="protein d-flex flex-column" data-v-6a073fe1><span data-v-6a073fe1>Prot</span><span class="percent" data-v-6a073fe1>25%</span></div><div class="fat d-flex flex-column" data-v-6a073fe1><span data-v-6a073fe1>Fat</span><span class="percent" data-v-6a073fe1>25%</span></div></div>',1)),c("div",fV,[n.carbs==0&&n.protein==0&&n.fat==0?y("",!0):(f(),m("div",mV,[c("span",{class:"carbs",style:ue({width:`${n.carbs}%`})},S(n.carbs)+"%",5),c("span",{class:"protein",style:ue({width:`${n.protein}%`})},S(n.protein)+"%",5),c("span",{class:"fat",style:ue({width:`${n.fat}%`})},S(n.fat)+"%",5)]))])]),c("div",pV,[c("div",gV,[t.isEditWater?H((f(),m("input",{key:1,class:"water-quantity textbox ms-1",ref:"waterQuantity",type:"number",placeholder:"#","onUpdate:modelValue":e[2]||(e[2]=l=>t.waterQuantity=l),style:ue({width:n.waterInputWidth}),onClick:e[3]||(e[3]=fe(()=>{},["prevent","stop"])),onBlur:e[4]||(e[4]=fe((...l)=>n.setWater&&n.setWater(...l),["prevent","stop"]))},null,36)),[[Pe,t.waterQuantity,void 0,{trim:!0,lazy:!0}]]):(f(),m("div",{key:0,class:"d-flex flex-row",onClick:e[1]||(e[1]=fe((...l)=>n.editWater&&n.editWater(...l),["prevent","stop"]))},[c("span",vV,S(n.floatString(this.meal.water,0)),1),c("span",_V,"/"+S(t.waterRecommeded)+" oz",1)]))]),e[16]||(e[16]=c("img",{class:"droplet",src:Iy,width:"28",height:"45"},null,-1)),c("div",yV,[c("span",null,S(n.waterPercentage),1),e[15]||(e[15]=c("span",null,"%",-1))])])])):y("",!0),t.itemsExpanded?(f(),m("div",bV,[i.meal.iteration?(f(),m("div",wV,[t.editTime?t.editTime?(f(),m("div",xV,[D(o,{class:O(["date-selector",{invalid:!t.isTimeValid}]),dateTime:t.startAt.toJSON(),onOnChange:e[7]||(e[7]=l=>n.setTime(l,"start"))},null,8,["class","dateTime"]),D(o,{class:O(["date-selector mt-2",{invalid:!t.isTimeValid}]),dateTime:t.endAt.toJSON(),onOnChange:e[8]||(e[8]=l=>n.setTime(l,"end"))},null,8,["class","dateTime"]),c("div",EV,[c("button",{type:"button",class:"btn btn-sm btn-primary mb-1",onClick:e[9]||(e[9]=(...l)=>n.setTimeNow&&n.setTimeNow(...l))},"Now"),c("button",{type:"button",class:"btn btn-sm btn-primary mb-1 ms-1",onClick:e[10]||(e[10]=(...l)=>n.saveTime&&n.saveTime(...l))},"Done"),c("button",{type:"button",class:"btn btn-sm btn-warning mb-1 ms-1",onClick:e[11]||(e[11]=(...l)=>n.refreshTimes&&n.refreshTimes(...l))},"Cancel")])])):y("",!0):(f(),m("div",{key:0,class:"display d-flex flex-row",onClick:e[6]||(e[6]=l=>t.editTime=!0)},[t.startAt?(f(),m("span",SV,S(n.toShortTimeString(t.startAt)),1)):y("",!0),t.endAt?(f(),m("span",TV,S(n.toShortTimeString(t.endAt)),1)):y("",!0)]))])):y("",!0),D(a,{meal:i.meal},null,8,["meal"])])):y("",!0)])}const DV=V(KL,[["render",IV],["__scopeId","data-v-6a073fe1"]]),kV={name:"RadioButton",props:{options:Array,initiallySelected:String},data:function(){return{initialized:!1,selected:void 0}},created:function(){this.selected=this.initiallySelected,this.initialized=!0},watch:{selected(){this.initialized&&this.$emit("selectOption",this.selected)}}},CV={class:"btn-group w-100",role:"group","aria-label":"moment"},PV=["id","value"],MV=["for"];function AV(t,e,i,s,r,n){return f(),m("div",CV,[(f(!0),m(M,null,N(i.options,(o,a)=>(f(),m(M,{key:a+1},[H(c("input",{type:"radio",class:"btn-check",id:o,"onUpdate:modelValue":e[0]||(e[0]=l=>t.selected=l),value:o},null,8,PV),[[or,t.selected]]),c("label",{class:"btn btn-outline-primary",for:o},S(o),9,MV)],64))),128))])}const OV=V(kV,[["render",AV],["__scopeId","data-v-874c8b42"]]),RV={name:"",components:{RadioButton:OV},props:{meal:Object},data:function(){return{physicalStore:void 0,searchTerm:"",quantity:1,tab:"Recent",tabs:["All","Recent","UPC","Common","Branded"],recents:[],common:[],branded:[],upc:[]}},created:async function(){this.physicalStore=Bn(),this.recents=await this.physicalStore.getRecentFoodItems()},methods:{float:Ku,setTimeFromDate:nh,search:$V,clearResults:NV,searchFoodItem:LV,searchUPC:VV,addFoodItem:WV},watch:{searchTerm(){this.search()}}};function $V(){this.searchTerm.trim()!=""?["All","Common","Branded"].includes(this.tab)?this.searchFoodItem():this.tab=="UPC"&&this.searchUPC():this.clearResults()}function NV(){this.common=[],this.branded=[],this.upc=[]}async function LV(){let t=await this.physicalStore.foodSearchAutoComplete(this.searchTerm);this.common=t.common,this.branded=t.branded}async function VV(){let t=await this.physicalStore.searchFoodUPC(this.searchTerm);this.upc=t}async function WV(t,e){var i=new Date(this.meal.dateTime);this.setTimeFromDate(i,new Date);let s={mealID:this.meal.id>0?this.meal.id:void 0,meal:this.meal.name,foodName:["upc","recent"].includes(e)?t.name:t.food_name,nIXItemID:e=="branded"?t.nix_item_id:void 0,unit:["upc","recent"].includes(e)?t.unit:t.serving_unit,quantity:this.quantity,dateString:i.toLocaleString(),foodItem:["upc","recent"].includes(e)?t:void 0};this.physicalStore.addFoodItemToMeal(s),this.$emit("back")}const zV={class:"food-item-search d-flex flex-column flex-grow-1 overflow-scroll"},FV={class:"pt-2 ms-2 me-2 sticky-top head"},jV={class:"d-flex flex-row"},BV={key:0,class:"recents d-flex flex-column"},HV=["onClick"],UV=["src"],YV={class:"d-flex flex-column flex-grow-1"},GV={class:"name text-start"},KV={class:"serving d-flex flex-row"},qV={class:"ms-1"},JV={class:"float-end"},QV={key:1,class:"common d-flex flex-column"},ZV=["onClick"],XV=["src"],eW={class:"d-flex flex-column flex-grow-1"},tW={class:"name text-start"},iW={class:"serving d-flex flex-row"},sW={class:"ms-1"},nW={key:2,class:"branded d-flex flex-column"},rW=["onClick"],oW=["src"],aW={class:"d-flex flex-column flex-grow-1"},lW={class:"name text-start"},dW={class:"serving d-flex flex-row"},cW={class:"ms-1"},uW={class:"float-end"},hW={key:3,class:"upc d-flex flex-column"},fW=["onClick"],mW=["src"],pW={class:"d-flex flex-column flex-grow-1"},gW={class:"name text-start"},vW={class:"serving d-flex flex-row"},_W={class:"ms-1"},yW={class:"float-end"};function bW(t,e,i,s,r,n){const o=T("RadioButton");return f(),m("div",zV,[c("img",{class:"icon-button",src:bi,width:"20",height:"20",onClick:e[0]||(e[0]=fe(a=>t.$emit("back"),["prevent"]))}),c("div",FV,[c("div",jV,[H(c("input",{id:"title",class:"textbox",type:"text",ref:"text",placeholder:"Search","onUpdate:modelValue":e[1]||(e[1]=a=>t.searchTerm=a),onKeyup:e[2]||(e[2]=wt((...a)=>n.search&&n.search(...a),["enter"]))},null,544),[[Pe,t.searchTerm,void 0,{trim:!0,lazy:!0}]]),H(c("input",{id:"quantity",class:"textbox ms-1",type:"number",placeholder:"#","onUpdate:modelValue":e[3]||(e[3]=a=>t.quantity=a)},null,512),[[Pe,t.quantity,void 0,{trim:!0,lazy:!0}]])]),D(o,{initiallySelected:t.tab,options:t.tabs,onSelectOption:e[4]||(e[4]=a=>t.tab=a)},null,8,["initiallySelected","options"])]),["Recent"].includes(t.tab)&&t.recents.length>0?(f(),m("div",BV,[e[5]||(e[5]=c("span",{class:"text-start ms-2"},"Recents",-1)),(f(!0),m(M,null,N(t.recents,(a,l)=>(f(),m("div",{key:l,class:"item d-flex flex-row align-items-center",onClick:d=>n.addFoodItem(a,"recent")},[c("img",{class:"align-self-start",src:a.thumbURL,height:"40",width:"40"},null,8,UV),c("div",YV,[c("span",GV,S(a.name),1),c("div",KV,[c("span",null,S(a.brandName),1),c("span",null,S(a.quantity),1),c("span",qV,S(a.unit),1)])]),c("span",JV,S(n.float(a.calories,0)),1)],8,HV))),128))])):y("",!0),["All","Common"].includes(t.tab)&&t.common.length>0?(f(),m("div",QV,[e[6]||(e[6]=c("span",{class:"text-start ms-2"},"Common",-1)),(f(!0),m(M,null,N(t.common,(a,l)=>(f(),m("div",{key:l,class:"item d-flex flex-row align-items-center",onClick:d=>n.addFoodItem(a,"common")},[c("img",{class:"align-self-start",src:a.photoThumb,height:"40",width:"40"},null,8,XV),c("div",eW,[c("span",tW,S(a.food_name),1),c("div",iW,[c("span",null,S(a.serving_qty),1),c("span",sW,S(a.serving_unit),1)])])],8,ZV))),128))])):y("",!0),["All","Branded"].includes(t.tab)&&t.branded.length>0?(f(),m("div",nW,[e[7]||(e[7]=c("span",{class:"text-start ms-2"},"Branded",-1)),(f(!0),m(M,null,N(t.branded,(a,l)=>(f(),m("div",{key:l,class:"item d-flex flex-row align-items-center",onClick:d=>n.addFoodItem(a,"branded")},[c("img",{class:"align-self-start",src:a.photoThumb,height:"40",width:"40"},null,8,oW),c("div",aW,[c("span",lW,S(a.food_name),1),c("div",dW,[c("span",null,S(a.brand_name),1),c("span",null,S(a.serving_qty),1),c("span",cW,S(a.serving_unit),1)])]),c("span",uW,S(n.float(a.nf_calories,0)),1)],8,rW))),128))])):y("",!0),["UPC"].includes(t.tab)&&t.upc.length>0?(f(),m("div",hW,[e[8]||(e[8]=c("span",{class:"text-start ms-2"},"UPC",-1)),(f(!0),m(M,null,N(t.upc,(a,l)=>(f(),m("div",{key:l,class:"item d-flex flex-row align-items-center",onClick:d=>n.addFoodItem(a,"upc")},[c("img",{class:"align-self-start",src:a.thumbURL,height:"40",width:"40"},null,8,mW),c("div",pW,[c("span",gW,S(a.name),1),c("div",vW,[c("span",null,S(a.brandName),1),c("span",null,S(a.quantity),1),c("span",_W,S(a.unit),1)])]),c("span",yW,S(n.float(a.calories,0)),1)],8,fW))),128))])):y("",!0)])}const wW=V(RV,[["render",bW],["__scopeId","data-v-be187c82"]]),SW={name:"NutritionPanel",components:{MealItem:DV,FoodItemSearch:wW,NutrientChart:WL},props:{showHead:{type:Boolean,default:!0}},data:function(){return{plannerStore:void 0,physicalStore:void 0,selectedPanel:"home",activeMeal:void 0,waterQuantity:void 0,isEditWater:!1,isTimeValid:!0}},created:function(){this.plannerStore=jr(),this.physicalStore=Bn(),this.refresh()},computed:{date(){return this.plannerStore?this.plannerStore.selectedDate:ft(new Date)},proteinConsumed(){return this.mealsInRange?this.mealsInRange.reduce((t,e)=>t+e.protein,0):0},caloriesRecommended(){return 2e3},caloriesConsumed(){return this.mealsInRange?this.mealsInRange.reduce((t,e)=>t+e.calories,0):0},caloriesRemaining(){return this.caloriesRecommended-this.caloriesConsumed},waterRecommended(){return 140},waterConsumed(){return this.waterInRange?this.waterInRange.reduce((t,e)=>t+e.amount,0):0},waterRemaining(){return this.waterRecommended-this.waterConsumed},waterInputWidth(){return this.waterQuantity<10?"25px":this.waterQuantity<100?"34px":"41px"},waterInRange(){if(this.date){let t=Ne(this.date),e=this.physicalStore.waterLogs;return e=e.filter(i=>+new Date(i.dateTime)>=this.date&&+new Date(i.dateTime)<=t),q(e)}else return[]},mealsInRange(){if(this.date){let t=Ne(this.date),e=this.physicalStore.meals;return e=e.filter(i=>+new Date(i.dateTime)>=this.date&&+new Date(i.dateTime)<=t),q(e)}else return[]},meals(){let t=this,e=1;return["Breakfast","Lunch","Dinner","Snack"].map(i=>{let s=t.mealsInRange.find(n=>n.name.toLowerCase()==i.toLowerCase()),r={};return s?r={...s}:r={id:-1*e++,name:i,dateTime:t.date,foodItems:[],macros:{carbs:0,protein:0,fat:0},water:0},r})}},methods:{refresh:TW,searchFoodItems:xW,back:EW,float:Ku,setTimeFromDate:nh,editWater:IW,cancelEditWater:DW,setWater:kW},watch:{date(){this.refresh()}}};function TW(){let t=Ne(this.date);this.physicalStore.getMealsInRange(this.date,t,!0)}function xW(t){this.activeMeal=t,this.selectedPanel="foodItemSearch"}function EW(){this.selectedPanel=="foodItemSearch"&&(this.selectedPanel="home")}async function IW(){this.isEditWater=!0,await this.$nextTick(),this.$refs.waterQuantity.focus()}async function DW(){this.waterQuantity=void 0,await this.$nextTick(),this.isEditWater=!1}function kW(){if(this.isEditWater=!1,this.waterQuantity){var t=new Date(this.date);this.setTimeFromDate(t,new Date),this.physicalStore.logWater(this.waterQuantity,t),this.waterQuantity=void 0}}const CW={class:"row g-0 h-100"},PW={class:"col h-100 d-flex flex-column"},MW={class:"nutrition d-flex flex-column flex-grow-1 overflow-hidden"},AW={class:"head align-content-center"},OW={class:"d-flex flex-row justify-content-start ps-2"},RW={class:"info d-flex flex-row"},$W={class:"calories d-flex flex-row"},NW={class:"d-flex flex-column"},LW={class:"amount"},VW={class:"amount"},WW={class:"remaining d-flex flex-column"},zW={class:"calorie-amount"},FW={class:"water d-flex flex-row"},jW={class:"remaining d-flex flex-column"},BW={class:"water-amount"},HW={class:"d-flex flex-column"},UW={class:"amount"},YW={class:"amount"},GW={class:"protein d-flex flex-row mt-1"},KW={class:"ms-2"},qW={class:"meals d-flex flex-column mt-1"};function JW(t,e,i,s,r,n){const o=T("NutrientChart"),a=T("MealItem"),l=T("FoodItemSearch");return f(),m("div",CW,[c("div",PW,[c("div",MW,[H(c("div",AW,[e[7]||(e[7]=c("span",{class:"label"},"Nutrition",-1)),c("div",OW,[c("img",{class:"icon-button",src:bi,width:"20",height:"20",onClick:e[0]||(e[0]=fe((...d)=>n.back&&n.back(...d),["prevent"]))})])],512),[[Ie,i.showHead]]),c("div",{class:O(["body d-flex flex-column flex-grow-1",{hide:t.selectedPanel!="home"}])},[c("div",RW,[c("div",$W,[c("div",NW,[c("span",LW,S(n.caloriesRecommended),1),e[8]||(e[8]=c("span",{class:"label"},"Recommended",-1)),c("span",VW,S(n.float(n.caloriesConsumed,0)),1),e[9]||(e[9]=c("span",{class:"label"},"Consumed",-1))]),e[12]||(e[12]=c("img",{src:Ey,width:"33",height:"45"},null,-1)),c("div",WW,[c("span",zW,S(n.float(n.caloriesRemaining,0)),1),e[10]||(e[10]=c("span",{class:"calories-label"},"Calories",-1)),e[11]||(e[11]=c("span",{class:"label"},"Remaining",-1))])]),c("div",FW,[c("div",jW,[c("span",BW,S(n.waterRemaining),1),e[13]||(e[13]=c("span",{class:"water-label"},"Water",-1)),e[14]||(e[14]=c("span",{class:"label"},"Remaining",-1))]),e[17]||(e[17]=c("img",{src:Iy,width:"33",height:"45"},null,-1)),c("div",HW,[c("span",UW,S(n.waterRecommended),1),e[16]||(e[16]=c("span",{class:"label"},"Recommended",-1)),t.isEditWater?H((f(),m("input",{key:1,class:"water-quantity textbox ms-1",ref:"waterQuantity",type:"number","onUpdate:modelValue":e[2]||(e[2]=d=>t.waterQuantity=d),style:ue({width:n.waterInputWidth}),onKeyup:[e[3]||(e[3]=wt(fe(d=>t.$refs.waterQuantity.blur(),["prevent","stop"]),["enter"])),e[4]||(e[4]=wt(fe((...d)=>n.cancelEditWater&&n.cancelEditWater(...d),["prevent","stop"]),["esc"]))],onClick:e[5]||(e[5]=fe(()=>{},["prevent","stop"])),onBlur:e[6]||(e[6]=fe((...d)=>n.setWater&&n.setWater(...d),["prevent","stop"]))},null,36)),[[Pe,t.waterQuantity,void 0,{trim:!0,lazy:!0}]]):(f(),m("div",{key:0,class:"d-flex flex-column",onClick:e[1]||(e[1]=fe((...d)=>n.editWater&&n.editWater(...d),["prevent","stop"]))},[c("span",YW,S(n.waterConsumed),1),e[15]||(e[15]=c("span",{class:"label"},"Consumed",-1))]))])])]),c("div",GW,[e[18]||(e[18]=c("span",null,"Protein",-1)),c("span",KW,S(n.float(n.proteinConsumed,0)),1)]),D(o),c("div",qW,[(f(!0),m(M,null,N(n.meals,d=>(f(),K(a,{key:d.id,class:"mb-2",meal:d,onSearchFoodItems:n.searchFoodItems},null,8,["meal","onSearchFoodItems"]))),128))])],2),H(D(l,{meal:t.activeMeal,class:O({hide:t.selectedPanel!="foodItemSearch"}),onBack:n.back},null,8,["meal","class","onBack"]),[[Ie,t.selectedPanel=="foodItemSearch"]])])])])}const Dy=V(SW,[["render",JW],["__scopeId","data-v-1338af64"]]),QW="/icon/circle-start.png",ZW={name:"WorkoutItem",props:{workout:Object},data:function(){return{workoutStore:null,now:Date.now()}},created:function(){this.workoutStore=yi();var t=this;setInterval(function(){t.now=Date.now()},1e3)},computed:{isActive(){return!!(this.workout&&this.workout&&this.workout.iteration&&this.workout.iteration.startAt&&!this.workout.iteration.endAt)},isComplete(){return!!(this.workout&&this.workout&&this.workout.iteration&&this.workout.iteration.completedAt)},timeSinceStart(){if(this.isActive){let t=new Date(this.workout.iteration.startAt);return P_(t,this.now)}else return},completedAt(){if(this.isComplete)return`${Dr(this.workout.iteration.startAt)}, ${k_(this.workout.iteration.startAt)}`}},methods:{startWorkout:XW,selectWorkout:ez}};function XW(){this.workoutStore.copyAndStartWorkout(this.workout.id).then(t=>{this.$emit("selectWorkout",{id:t.id})})}function ez(){this.$emit("selectWorkout",{id:this.workout.id})}const tz={class:"d-flex flex-column flex-grow-1"},iz={class:"name text-start"},sz={key:0,class:"time text-start"},nz={key:1,class:"time text-start"};function rz(t,e,i,s,r,n){return f(),m("div",{class:"workout-item d-flex flex-row align-items-center position-relative",onClick:e[1]||(e[1]=(...o)=>n.selectWorkout&&n.selectWorkout(...o))},[e[2]||(e[2]=c("span",{class:"image flex-shrink-0"},null,-1)),c("div",tz,[c("span",iz,S(i.workout.name),1),n.isActive?(f(),m("span",sz,S(n.timeSinceStart),1)):y("",!0),n.isComplete?(f(),m("span",nz,S(n.completedAt),1)):y("",!0)]),n.isActive?y("",!0):(f(),m("img",{key:0,class:"start icon-button me-2 position-absolute end-0",src:QW,width:"24",height:"24",onClick:e[0]||(e[0]=fe((...o)=>n.startWorkout&&n.startWorkout(...o),["prevent","stop"]))}))])}const oz=V(ZW,[["render",rz],["__scopeId","data-v-a97ea533"]]),az="/icon/task-icon.png",lz={name:"ExerciseSet",components:{ItemCheckbox:Br},props:{index:Number,set:Object,exerciseID:Number,editingSetID:Number,showReps:{type:Boolean,default:!0},showWeight:{type:Boolean,default:!0},showHoldSeconds:{type:Boolean,default:!0},showTimeSeconds:{type:Boolean,default:!0}},created:function(){this.workoutStore=yi(),this.editingSetID==this.set.id&&(this.isEditing=!0)},data:function(){return{workoutStore:null,isEditing:!1,showCheckbox:!1,showVariationSelector:!1,console}},computed:{rest(){if(this.set.restSeconds){let t=0,e=this.set.restSeconds;if(e>60){let r=e/60;t=Math.floor(r),e=e-t*60}let s=Math.floor(e).toLocaleString(void 0,{minimumIntegerDigits:2,useGrouping:!1});return`${t}:${s}`}else return""},isComplete(){return!!(this.set.iteration&&this.set.iteration.completedAt)},potentialVariations(){return this.workoutStore?q(this.workoutStore.getExercise(this.exerciseID)).variations:[]},variationIDs(){return this.set.variations.map(t=>t.id)},variationString(){if(this.set.variations.length>0)return Ql(this.set.variations,"name")}},methods:{inputWidth(t){return t<10?"27px":t<100?"37px":"45px"},editProp(t){let e=this;this.isEditing=!0,this.$nextTick(()=>{e.$refs[t].focus()}),this.$emit("setEditingID",this.set.id)},markComplete(){this.workoutStore.logSet(this.set.id,new Date)},markIncomplete(){this.workoutStore.logSet(this.set.id,void 0)},blur(t){(!t.relatedTarget||!t.relatedTarget.classList.contains("prop"))&&(this.doneEditing(),this.$emit("saveWorkout"))},doneEditing(){this.isEditing=!1,this.$emit("setEditingID",void 0)},variationClicked(t){this.variationIDs.includes(t)?this.$emit("removeVariation",{setID:this.set.id,variationID:t,exerciseID:this.exerciseID}):this.$emit("addVariation",{setID:this.set.id,variationID:t,exerciseID:this.exerciseID})}},watch:{editingSetID(t){t&&t!=this.set.id&&this.doneEditing()}}},dz={class:"variations text-start"},cz={class:"variations picks d-flex flex-row"},uz=["onClick"],hz={key:2,class:"editing d-flex flex-row flex-grow-1"},fz={class:"index"},mz={class:"d-flex flex-row flex-grow-1",style:{gap:"10px"}},pz={key:0,class:"reps d-flex flex-column align-items-center"},gz={key:1,class:"time d-flex flex-column align-items-center"},vz={key:2,class:"weight d-flex flex-column align-items-center"},_z={key:3,class:"hold d-flex flex-column align-items-center"},yz={class:"rest d-flex flex-column align-items-center"},bz={class:"button-group d-flex flex-column"},wz={class:"d-flex flex-column flex-grow-1"},Sz={class:"d-flex flex-row flex-grow-1"},Tz={key:0,class:"index"},xz={class:"top d-flex flex-row flex-grow-1",style:{gap:"10px"}},Ez={class:"prop"},Iz={class:"prop"},Dz={class:"prop"},kz={class:"prop"},Cz={class:"bottom d-flex flex-row flex-grow-1"},Pz={class:"button-group d-flex flex-column"};function Mz(t,e,i,s,r,n){const o=T("ItemCheckbox");return f(),m("div",{class:O(["exercise-set-view d-flex flex-column flex-grow-1",{complete:n.isComplete}])},[!t.showVariationSelector&&n.variationString?(f(),m("div",{key:0,class:"d-flex flex-row",onClick:e[0]||(e[0]=a=>t.showVariationSelector=!0)},[c("span",dz,S(n.variationString),1)])):y("",!0),t.showVariationSelector?(f(),m("div",{key:1,class:"d-flex flex-row",onMouseleave:e[1]||(e[1]=a=>t.showVariationSelector=!1)},[c("div",cz,[(f(!0),m(M,null,N(n.potentialVariations,a=>(f(),m("span",{key:a.id,class:O({selected:n.variationIDs.includes(a.id)}),onClick:l=>n.variationClicked(a.id)},S(a.name),11,uz))),128))])],32)):y("",!0),t.isEditing?(f(),m("div",hz,[c("div",fz,S(i.index),1),c("div",mz,[i.showReps?(f(),m("div",pz,[H(c("input",{class:"prop form-control form-control-sm me-1",type:"number",min:"0",ref:"repsInput","onUpdate:modelValue":e[2]||(e[2]=a=>i.set.reps=a),style:ue({width:n.inputWidth(i.set.reps)}),onKeyup:e[3]||(e[3]=wt((...a)=>n.doneEditing&&n.doneEditing(...a),["enter","esc"])),onBlur:e[4]||(e[4]=(...a)=>n.blur&&n.blur(...a))},null,36),[[Pe,i.set.reps]]),e[28]||(e[28]=c("span",{class:"text"},"REPS",-1))])):y("",!0),i.showTimeSeconds?(f(),m("div",gz,[H(c("input",{class:"prop form-control form-control-sm me-1",type:"number",min:"0",ref:"timeInput","onUpdate:modelValue":e[5]||(e[5]=a=>i.set.timeSeconds=a),style:ue({width:n.inputWidth(i.set.timeSeconds)}),onKeyup:e[6]||(e[6]=wt((...a)=>n.doneEditing&&n.doneEditing(...a),["enter","esc"])),onBlur:e[7]||(e[7]=(...a)=>n.blur&&n.blur(...a))},null,36),[[Pe,i.set.timeSeconds]]),e[29]||(e[29]=c("span",{class:"text"},"TIME",-1))])):y("",!0),i.showWeight?(f(),m("div",vz,[H(c("input",{class:"prop form-control form-control-sm me-1",type:"number",min:"0",ref:"weightInput","onUpdate:modelValue":e[8]||(e[8]=a=>i.set.weight=a),style:ue({width:n.inputWidth(i.set.weight)}),onKeyup:e[9]||(e[9]=wt((...a)=>n.doneEditing&&n.doneEditing(...a),["enter","esc"])),onBlur:e[10]||(e[10]=(...a)=>n.blur&&n.blur(...a))},null,36),[[Pe,i.set.weight]]),e[30]||(e[30]=c("span",{class:"text"},"LBS",-1))])):y("",!0),i.showHoldSeconds?(f(),m("div",_z,[H(c("input",{class:"prop form-control form-control-sm me-1",type:"number",min:"0",ref:"holdInput","onUpdate:modelValue":e[11]||(e[11]=a=>i.set.holdSeconds=a),style:ue({width:n.inputWidth(i.set.holdSeconds)}),onKeyup:e[12]||(e[12]=wt((...a)=>n.doneEditing&&n.doneEditing(...a),["enter","esc"])),onBlur:e[13]||(e[13]=(...a)=>n.blur&&n.blur(...a))},null,36),[[Pe,i.set.holdSeconds]]),e[31]||(e[31]=c("span",{class:"text"},"HOLD",-1))])):y("",!0),c("div",yz,[H(c("input",{class:"prop form-control form-control-sm me-1",type:"number",min:"0",ref:"restInput","onUpdate:modelValue":e[14]||(e[14]=a=>i.set.restSeconds=a),style:ue({width:n.inputWidth(i.set.restSeconds)}),onKeyup:e[15]||(e[15]=wt((...a)=>n.doneEditing&&n.doneEditing(...a),["enter","esc"])),onBlur:e[16]||(e[16]=(...a)=>n.blur&&n.blur(...a))},null,36),[[Pe,i.set.restSeconds]]),e[32]||(e[32]=c("span",{class:"text"},"REST",-1))])]),c("div",bz,[c("img",{class:"icon-button",src:az,width:"16",height:"16",onClick:e[17]||(e[17]=(...a)=>n.doneEditing&&n.doneEditing(...a))}),c("img",{class:"icon-button",src:Mn,width:"16",height:"16",onClick:e[18]||(e[18]=a=>t.$emit("deleteSet",i.set.id))})])])):(f(),m("div",{key:3,class:"d-flex flex-row flex-grow-1",onMouseover:e[26]||(e[26]=a=>t.showCheckbox=!0),onMouseleave:e[27]||(e[27]=a=>t.showCheckbox=!1)},[c("div",wz,[c("div",Sz,[t.showCheckbox?y("",!0):(f(),m("div",Tz,S(i.index),1)),t.showCheckbox?(f(),K(o,{key:1,class:"checkbox align-self-start",style:{"margin-top":"-2px"},checked:n.isComplete,width:20,height:20,onOnChecked:n.markComplete,onOnUnchecked:n.markIncomplete},null,8,["checked","onOnChecked","onOnUnchecked"])):y("",!0),c("div",xz,[i.showReps?(f(),m("div",{key:0,class:"reps d-flex flex-row align-items-center",onClick:e[19]||(e[19]=a=>n.editProp("repsInput"))},[c("span",Ez,S(i.set.reps),1),e[33]||(e[33]=c("span",{class:"text ms-1"},"REPS",-1))])):y("",!0),i.showTimeSeconds?(f(),m("div",{key:1,class:"time d-flex flex-row align-items-center",onClick:e[20]||(e[20]=a=>n.editProp("timeInput"))},[c("span",Iz,S(i.set.timeSeconds),1),e[34]||(e[34]=c("span",{class:"text ms-1"},"SECS",-1))])):y("",!0),i.showWeight?(f(),m("div",{key:2,class:"weight d-flex flex-row align-items-center",onClick:e[21]||(e[21]=a=>n.editProp("weightInput"))},[c("span",Dz,S(i.set.weight),1),e[35]||(e[35]=c("span",{class:"text ms-1"},"LBS",-1))])):y("",!0),i.showHoldSeconds?(f(),m("div",{key:3,class:"hold d-flex flex-row align-items-center",onClick:e[22]||(e[22]=a=>n.editProp("holdInput"))},[c("span",kz,S(i.set.holdSeconds),1),e[36]||(e[36]=c("span",{class:"text ms-1"},"HOLD",-1))])):y("",!0)])]),c("div",Cz,[c("div",{class:"rest",onClick:e[23]||(e[23]=a=>n.editProp("restInput"))},[c("span",null,S(n.rest)+" REST",1)])])]),c("div",Pz,[c("img",{class:"icon-button",src:td,width:"16",height:"16",onClick:e[24]||(e[24]=a=>t.showVariationSelector=!t.showVariationSelector)}),c("img",{class:"icon-button",src:Mn,width:"16",height:"16",onClick:e[25]||(e[25]=a=>t.$emit("deleteSet",i.set.id))})])],32))],2)}const Az=V(lz,[["render",Mz],["__scopeId","data-v-6a1c99cc"]]),Oz={name:"ExerciseItem",components:{ExerciseSetForm:Az},props:{exercise:Object,isActive:Boolean,isComplete:Boolean},data:function(){return{workoutStore:void 0,setsShown:!1,showOptions:!1,showReps:!1,showWeight:!1,showHoldSeconds:!1,showTimeSeconds:!1,editingSetID:void 0,dragPosition:""}},created:function(){this.workoutStore=yi();let t=this;if(this.exercise.sets.value.length==0&&this.$emit("addDefaultSet",this.exercise.exercise.id),this.exercise.sets.value.length==1){let e=this.exercise.sets.value[0];!e.reps&&!e.weight&&!e.holdSeconds&&!e.timeSeconds?(this.editingSetID=e.id,t.showReps=!0,t.showWeight=!0,t.showHoldSeconds=!0,t.showTimeSeconds=!0):(e.reps&&(t.showReps=!0),e.weight&&(t.showWeight=!0),e.holdSeconds&&(t.showHoldSeconds=!0),e.timeSeconds&&(t.showTimeSeconds=!0))}else this.exercise.sets.value.forEach(e=>{e.reps&&(t.showReps=!0),e.weight&&(t.showWeight=!0),e.holdSeconds&&(t.showHoldSeconds=!0),e.timeSeconds&&(t.showTimeSeconds=!0)});this.isComplete&&(this.setsShown=!1)},computed:{setCount(){let t=this.exercise.sets.value.length;return this.isActive?`${this.exercise.sets.value.filter(i=>i.iteration&&i.iteration.completedAt).length}/${t}`:`${t}`},isExerciseComplete(){let t=this.exercise.sets.value.length;return this.isActive?this.exercise.sets.value.filter(i=>i.iteration&&i.iteration.completedAt).length==t:!1}},methods:{addSet(){this.$emit("addSet",this.exercise.exercise.id)},deleteSet(t){this.$emit("deleteSet",{setID:t,exerciseID:this.exercise.exercise.id})},showSets(){this.exercise.sets.value.length==0&&this.$emit("addDefaultSet",this.exercise.exercise.id),this.setsShown=!this.setsShown},onDragStart:Rz,onDragOver:$z,onDrop:Nz,onDragLeave:Lz,onDragEnd:Vz}};function Rz(t){console.log("Drag Started"),t.target.classList.add("drag"),t.dataTransfer.dropEffect="move",t.dataTransfer.effectAllowed="move",this.workoutStore.setDraggedProps(this.exercise.exercise.id)}function $z(t){if(t.preventDefault(),this.dragPosition="",!t.currentTarget.classList.contains("drag")){t.preventDefault();var e=this.$refs.item.getBoundingClientRect(),i=t.clientY-e.y,s=i/e.height;s<.5?this.dragPosition="before":this.dragPosition="after"}}function Nz(t){t.preventDefault();var e=this.workoutStore.getDragged,i=this.dragPosition=="before"?this.exercise.position:this.exercise.position+1;this.$emit("repositionExercise",e.exerciseID,i),this.dragPosition=""}function Lz(){this.dragPosition=""}function Vz(t){t.target.classList.remove("drag"),this.dragPosition="",this.workoutStore.clearDraggedProps()}const Wz={class:"d-flex flex-row flex-grow-1 justify-content-between position-relative"},zz={class:"d-flex flex-row overflow-hidden"},Fz={class:"label d-flex flex-column"},jz={class:"name"},Bz={class:"d-flex flex-row"},Hz={class:"button-group d-flex flex-column"},Uz={key:0,class:"d-flex flex-row mt-1"},Yz={key:1,class:"sets d-flex flex-column"};function Gz(t,e,i,s,r,n){const o=T("ExerciseSetForm");return f(),m("div",{class:O(["exercise-item d-flex flex-column",[{complete:n.isExerciseComplete},t.dragPosition]]),ref:"item",draggable:"true",onDragenter:e[12]||(e[12]=fe(()=>{},["prevent"])),onDragstart:e[13]||(e[13]=a=>n.onDragStart(a)),onDragend:e[14]||(e[14]=a=>n.onDragEnd(a)),onDrop:e[15]||(e[15]=a=>n.onDrop(a)),onDragover:e[16]||(e[16]=a=>n.onDragOver(a)),onDragleave:e[17]||(e[17]=a=>n.onDragLeave(a))},[c("div",Wz,[c("div",zz,[e[18]||(e[18]=c("span",{class:"image flex-shrink-0"},null,-1)),c("div",Fz,[c("span",jz,S(i.exercise.exercise.name),1),c("div",Bz,[c("span",{class:"set-count",onClick:e[0]||(e[0]=(...a)=>n.showSets&&n.showSets(...a))},S(n.setCount)+" Sets ",1),t.setsShown?(f(),m("img",{key:0,class:"icon-button ms-1",src:ns,width:14,height:14,onClick:e[1]||(e[1]=(...a)=>n.addSet&&n.addSet(...a))})):y("",!0)])])]),c("div",Hz,[c("img",{class:"icon-button",src:td,width:"16",height:"16",onClick:e[2]||(e[2]=a=>t.showOptions=!t.showOptions)}),c("img",{class:"icon-button",src:Mn,width:"16",height:"16",onClick:e[3]||(e[3]=a=>t.$emit("removeExercise",i.exercise.exercise.id))})])]),t.showOptions?(f(),m("div",Uz,[H(c("input",{type:"checkbox",id:"reps","onUpdate:modelValue":e[4]||(e[4]=a=>t.showReps=a)},null,512),[[ci,t.showReps]]),e[19]||(e[19]=c("label",{class:"ms-1",for:"reps"},"Reps",-1)),H(c("input",{class:"ms-2",type:"checkbox",id:"weight","onUpdate:modelValue":e[5]||(e[5]=a=>t.showWeight=a)},null,512),[[ci,t.showWeight]]),e[20]||(e[20]=c("label",{class:"ms-1",for:"weight"},"Weight",-1)),H(c("input",{class:"ms-2",type:"checkbox",id:"hold","onUpdate:modelValue":e[6]||(e[6]=a=>t.showHoldSeconds=a)},null,512),[[ci,t.showHoldSeconds]]),e[21]||(e[21]=c("label",{class:"ms-1",for:"hold"},"Hold",-1)),H(c("input",{class:"ms-2",type:"checkbox",id:"time","onUpdate:modelValue":e[7]||(e[7]=a=>t.showTimeSeconds=a)},null,512),[[ci,t.showTimeSeconds]]),e[22]||(e[22]=c("label",{class:"ms-1",for:"time"},"Time",-1))])):y("",!0),t.setsShown?(f(),m("div",Yz,[(f(!0),m(M,null,N(i.exercise.sets.value,(a,l)=>(f(),m("div",{key:a.id},[D(o,{set:a,index:l+1,exerciseID:i.exercise.exercise.id,showReps:t.showReps,showWeight:t.showWeight,showHoldSeconds:t.showHoldSeconds,showTimeSeconds:t.showTimeSeconds,editingSetID:t.editingSetID,onDeleteSet:n.deleteSet,onSetEditingID:e[8]||(e[8]=d=>t.editingSetID=d),onAddVariation:e[9]||(e[9]=d=>t.$emit("addVariation",d)),onRemoveVariation:e[10]||(e[10]=d=>t.$emit("removeVariation",d)),onSaveWorkout:e[11]||(e[11]=d=>t.$emit("saveWorkout"))},null,8,["set","index","exerciseID","showReps","showWeight","showHoldSeconds","showTimeSeconds","editingSetID","onDeleteSet"])]))),128))])):y("",!0)],34)}const Kz=V(Oz,[["render",Gz],["__scopeId","data-v-196f59a8"]]),qz={name:"MuscleSelector",components:{},props:{selectedGroups:{type:Array,default:function(){return[]}}},data:function(){return{workoutStore:null,muscleGroups:[]}},created:function(){this.workoutStore=yi(),this.setItems()},methods:{setItems(){if(this.workoutStore){let t=q(this.workoutStore.getMuscleGroups());t.forEach(e=>{let i=this.selectedGroups.find(s=>s.id==e.id);i?(e.isSelected=!0,e.isPrimary=i.isPrimary,e.isSecondary=i.isSecondary):e.isSelected=!1}),this.muscleGroups=t}else this.muscleGroups=[]},muscleGroupClicked(t){t.isSelected?t.isPrimary?(t.isPrimary=!1,t.isSecondary=!0):(t.isSecondary=!1,t.isSelected=!1):(t.isSelected=!0,t.isPrimary=!0)},save(){let t=this.muscleGroups.filter(e=>e.isSelected);this.$emit("setMuscleGroups",t)}}},Jz={class:"muscle-selector d-flex flex-column"},Qz={class:"label d-flex flex-column flex-grow-1 mb-2"},Zz={class:"d-flex flex-row flex-wrap gap-1"},Xz=["onClick"],eF={class:"level d-flex justify-content-end"},tF={key:0},iF={class:"label d-flex flex-column flex-grow-1 mb-4"},sF={class:"d-flex flex-row flex-wrap gap-1"},nF=["onClick"],rF={class:"level d-flex justify-content-end"},oF={key:0};function aF(t,e,i,s,r,n){return f(),m("div",Jz,[c("img",{class:"icon-button",src:bi,width:"20",height:"20",onClick:e[0]||(e[0]=fe(o=>t.$emit("back"),["prevent"]))}),c("div",Qz,[e[2]||(e[2]=c("span",{class:"mb-2"},"Muscle Groups",-1)),c("div",Zz,[(f(!0),m(M,null,N(t.muscleGroups.filter(o=>o.isMain),(o,a)=>(f(),m("div",{key:a,class:O(["muscle-group d-flex flex-column",{selected:o.isSelected}]),onClick:l=>n.muscleGroupClicked(o)},[c("div",eF,[o.isSelected?(f(),m("div",tF,S(o.isPrimary?"P":"S"),1)):y("",!0)]),c("span",null,S(o.name),1)],10,Xz))),128))])]),c("div",iF,[e[3]||(e[3]=c("span",{class:"mb-2"},"Accessory Muscle Groups",-1)),c("div",sF,[(f(!0),m(M,null,N(t.muscleGroups.filter(o=>o.isMain==!1),(o,a)=>(f(),m("div",{key:a,class:O(["muscle-group d-flex flex-column",{selected:o.isSelected}]),onClick:l=>n.muscleGroupClicked(o)},[c("div",rF,[o.isSelected?(f(),m("div",oF,S(o.isPrimary?"P":"S"),1)):y("",!0)]),c("span",null,S(o.name),1)],10,nF))),128))])]),c("button",{type:"button",class:"btn btn-primary",onClick:e[1]||(e[1]=o=>n.save())},"Done")])}const ky=V(qz,[["render",aF],["__scopeId","data-v-c4011335"]]),lF={name:"ExerciseVariationForm",components:{MuscleSelector:ky},props:{exerciseVariation:Object,exercise:Object},data:function(){return{workoutStore:null,variation:void 0,types:q(Hk),name:{value:void 0,oldValue:void 0,isUpdated:!1},description:{value:void 0,oldValue:void 0,isUpdated:!1},type:{value:void 0,oldValue:void 0,isUpdated:!1},muscleGroups:{value:[],oldValue:[]},selectedPanel:"form"}},created:function(){this.workoutStore=yi(),this.setProps()},methods:{setProps:dF,setMuscleGroups:cF,save:uF}};function dF(){this.exerciseVariation?this.variation=q(this.exerciseVariation):this.variation={id:void 0,name:{value:"",oldValue:"",isUpdated:!1},description:{value:"",oldValue:"",isUpdated:!1},muscleGroups:{value:[],oldValue:[],isUpdated:!1},type:{value:{id:148,text:"Misc"},oldValue:{id:0,text:""},isUpdated:!1}},this.name=q(this.variation.name),this.description=q(this.variation.description),this.type=q(this.variation.type),this.muscleGroups=q(this.variation.muscleGroups)}function cF(t){this.muscleGroups.value=t,this.selectedPanel="form"}function uF(){let t=this,e=[],i=q(this.variation);i.isUpdated=!1,i.id==null&&(i.isNew=!0),i.name.value=this.name.value.trim(),this.name.value.trim()!=""?this.name.value!=this.name.oldValue?(i.name.isUpdated=!0,i.id&&i.id>0&&(i.isUpdated=!0)):i.name.isUpdated=!1:e.push("Variation must have a name"),i.description.value=this.description.value?this.description.value.trim():null;let s=this.description.oldValue?this.description.oldValue.trim():null;i.description.value!=s?(i.description.isUpdated=!0,i.id&&i.id>0&&(i.isUpdated=!0)):i.description.isUpdated=!1,this.type.value.id?this.type.value.id!=this.type.oldValue.id&&(i.type.value=this.types.find(n=>n.id==this.type.value.id),i.type.isUpdated=!0,i.isUpdated=!0):e.push("Variation must have a type");let r=[];this.muscleGroups.value.forEach(n=>{let o=t.muscleGroups.oldValue.findIndex(a=>a.id==n.id);if(o>-1){let a=this.muscleGroups.oldValue[o];a.isPrimary!=n.isPrimary&&a.isSecondary!=n.isSecondary?(r.push({id:n.id,name:n.name,isPrimary:n.isPrimary,isSecondary:n.isSecondary,isUpdated:!0}),i.isUpdated=!0):r.push(a)}else r.push({id:n.id,name:n.name,isPrimary:n.isPrimary,isSecondary:n.isSecondary,isAdded:!0}),i.isUpdated=!0}),this.muscleGroups.oldValue.forEach(n=>{t.muscleGroups.value.findIndex(a=>a.id==n.id)<0&&r.push({id:n.id,isDeleted:!0})}),i.muscleGroups.value=r,e.length>0?alert(e.toString()):this.$emit("saveExerciseVariation",i)}const hF={class:"d-flex flex-column mt-2"},fF=["value"],mF={class:"d-flex flex-column flex-grow-1"},pF={class:"label d-flex flex-row flex-grow-1"},gF={class:"d-flex flex-row flex-wrap gap-1 mb-2"},vF={class:"d-flex flex-row flex-wrap gap-1"};function _F(t,e,i,s,r,n){const o=T("MuscleSelector");return f(),m("div",null,[c("div",{class:O(["exercise-variation-form d-flex flex-column flex-grow-1",{hide:t.selectedPanel!="form"}])},[c("img",{class:"icon-button mb-2",src:bi,width:"20",height:"20",onClick:e[0]||(e[0]=fe(a=>t.$emit("back"),["prevent"]))}),H(c("input",{id:"name",class:"textbox mb-2",type:"text",ref:"name",placeholder:"Variation Name","onUpdate:modelValue":e[1]||(e[1]=a=>t.name.value=a),spellcheck:"true"},null,512),[[Pe,t.name.value,void 0,{lazy:!0,trim:!0}]]),H(c("textarea",{id:"description",class:"textarea",type:"text",placeholder:"Variation Description","onUpdate:modelValue":e[2]||(e[2]=a=>t.description.value=a),spellcheck:"true"},null,512),[[Pe,t.description.value]]),c("div",hF,[H(c("select",{class:"form-select panel-select","aria-label":"select","onUpdate:modelValue":e[3]||(e[3]=a=>t.type.value.id=a)},[(f(!0),m(M,null,N(t.types,a=>(f(),m("option",{key:a.id,value:a.id},S(a.text),9,fF))),128))],512),[[is,t.type.value.id]])]),c("button",{type:"button",class:"btn btn-primary mt-2",onClick:e[4]||(e[4]=a=>n.save())},"Save"),c("div",mF,[c("div",pF,[e[7]||(e[7]=c("span",null,"Muscle Groups",-1)),c("img",{class:"icon-button",src:ns,width:20,height:20,onClick:e[5]||(e[5]=a=>t.selectedPanel="muscleSelector")})]),e[8]||(e[8]=c("span",{class:"sm-label"},"Primary",-1)),c("div",gF,[(f(!0),m(M,null,N(t.muscleGroups.value.filter(a=>a.isPrimary),(a,l)=>(f(),m("div",{key:l,class:"muscle-group d-flex"},[c("span",null,S(a.name),1)]))),128))]),e[9]||(e[9]=c("span",{class:"sm-label"},"Secondary",-1)),c("div",vF,[(f(!0),m(M,null,N(t.muscleGroups.value.filter(a=>a.isSecondary),(a,l)=>(f(),m("div",{key:l,class:"muscle-group d-flex"},[c("span",null,S(a.name),1)]))),128))])])],2),t.selectedPanel=="muscleSelector"?(f(),K(o,{key:0,selectedGroups:t.muscleGroups.value,onSetMuscleGroups:n.setMuscleGroups,onBack:e[6]||(e[6]=a=>t.selectedPanel="form")},null,8,["selectedGroups","onSetMuscleGroups"])):y("",!0)])}const Cy=V(lF,[["render",_F],["__scopeId","data-v-c0efcb31"]]),yF={name:"VariationList",components:{ExerciseVariationForm:Cy},props:{exercise:Object,selectedVariations:{type:Array,default:()=>[]}},data:function(){return{workoutStore:void 0,selectedPanel:"list",searchTerm:"",variationList:[]}},created:function(){this.workoutStore=yi()},computed:{variations(){if(this.workoutStore){let t=this,e=q(this.workoutStore.getVariations());return e.forEach(i=>{let s=t.selectedVariations.findIndex(r=>r.name==i.name&&r.type&&r.type.id==i.type.id);i.isSelected=s>-1}),e}else return[]}},methods:{done(){let t=[];this.variations.forEach(e=>{e.isSelected&&t.push(e)}),this.$emit("setVariations",t)},setVariationList:bF},watch:{searchTerm(){this.setVariationList()}}};function bF(){let t={};if(this.variations.length>0){let e=gl(this.variations,"name");if(this.searchTerm&&this.searchTerm!=""){let s=this.searchTerm;e=e.filter(r=>r.name.toLowerCase().includes(s))}let i=e.map(s=>s.type.text);i=[...new Set(i)],i=gl(i),i.forEach(s=>{t[s]=[]}),e.forEach(s=>{t[s.type.text].push(s)})}this.variationList=t}const wF={class:"d-flex flex-column flex-grow-1"},SF={class:"label d-flex flex-row mb-2"},TF={class:"d-flex flex-column flex-grow-1"},xF={class:"letter text-start"},EF=["onClick"],IF={class:"label d-flex flex-column"},DF={class:"name"};function kF(t,e,i,s,r,n){const o=T("ExerciseVariationForm");return f(),m("div",wF,[c("div",{class:O(["variation-list d-flex flex-column flex-grow-1",{hide:t.selectedPanel!="list"}])},[c("div",SF,[c("img",{class:"icon-button",src:bi,width:"20",height:"20",onClick:e[0]||(e[0]=fe(a=>t.$emit("back"),["prevent"]))}),e[6]||(e[6]=c("span",null,"Create Variation",-1)),c("img",{class:"icon-button",src:ns,width:20,height:20,onClick:e[1]||(e[1]=a=>t.selectedPanel="exerciseVariationForm")})]),H(c("input",{id:"title",class:"textbox mb-2",type:"text",ref:"text",placeholder:"Search","onUpdate:modelValue":e[2]||(e[2]=a=>t.searchTerm=a),spellcheck:"true"},null,512),[[Pe,t.searchTerm,void 0,{trim:!0}]]),c("button",{type:"button",class:"btn btn-primary mb-2",onClick:e[3]||(e[3]=a=>n.done())},"Done"),c("div",TF,[(f(!0),m(M,null,N(t.variationList,(a,l,d)=>(f(),m("div",{key:d},[c("div",xF,S(l),1),(f(!0),m(M,null,N(a,(u,h)=>(f(),m("div",{class:O(["variation-item d-flex flex-row flex-grow-1",{selected:u.isSelected}]),key:h,onClick:p=>u.isSelected=!u.isSelected},[e[7]||(e[7]=c("div",{class:"image flex-shrink-0"},null,-1)),c("div",IF,[c("div",DF,S(u.name),1)])],10,EF))),128))]))),128))])],2),t.selectedPanel=="exerciseVariationForm"?(f(),K(o,{key:0,exercise:i.exercise,onSaveExerciseVariation:e[4]||(e[4]=a=>t.$emit("saveExerciseVariation",a)),onBack:e[5]||(e[5]=a=>t.selectedPanel="list")},null,8,["exercise"])):y("",!0)])}const CF=V(yF,[["render",kF],["__scopeId","data-v-07c2d624"]]),PF={name:"ExerciseForm",components:{MuscleSelector:ky,VariationList:CF,ExerciseVariationForm:Cy},props:{id:{type:Number,default:-1}},data:function(){return{workoutStore:null,exercise:null,name:{value:void 0,oldValue:void 0,isUpdated:!1},description:{value:void 0,oldValue:void 0,isUpdated:!1},muscleGroups:{value:[],oldValue:[]},variations:{value:[],oldValue:[]},selectedPanel:"form",selectedVariation:void 0}},created:function(){this.workoutStore=yi(),this.setProps()},computed:{selectedVariations(){return this.variations.value.map(t=>({name:t.name.value,type:{id:t.type.value.id,text:t.type.value.text}}))},variationList(){let t={};if(this.variations.value.length>0){let i=q(this.variations.value).sort((r,n)=>r.name.value.toLowerCase()<n.name.value.toLowerCase()?-1:r.name.value.toLowerCase()>n.name.value.toLowerCase()?1:0),s=i.map(r=>r.type.value.text);s=[...new Set(s)],s=gl(s),s.forEach(r=>{t[r]=[]}),i.forEach(r=>{t[r.type.value.text].push(r)})}return t}},mounted(){this.$refs.name.focus()},methods:{setProps:MF,setMuscleGroups:AF,selectVariation:OF,closeVariationForm:RF,setVariations:$F,saveExerciseVariation:NF,save:LF}};function MF(){if(this.id!=0){let t=this.workoutStore.getExercise(this.id);if(t){this.exercise=q(t),this.name.value=this.exercise.name,this.name.oldValue=this.exercise.name,this.name.isUpdated=!1,this.description.value=this.exercise.description,this.description.oldValue=this.exercise.description,this.description.isUpdated=!1,this.muscleGroups.value=q(this.exercise.muscleGroups),this.muscleGroups.oldValue=q(this.exercise.muscleGroups),this.variations.value=[],this.variations.oldValue=[];let e=this;this.exercise.variations.forEach(i=>{let s=q(i);s.name={},s.description={},s.muscleGroups={},s.name.value=i.name,s.name.oldValue=i.name,s.name.isUpdated=!1,s.description.value=i.description||"",s.description.oldValue=i.description||"",s.description.isUpdated=!1,s.type={},s.type.value=q(i.type),s.type.oldValue=q(i.type),s.type.isUpdated=!1,s.muscleGroups.value=q(i.muscleGroups),s.muscleGroups.oldValue=q(i.muscleGroups),e.variations.value.push(s),e.variations.oldValue.push(s)})}}else this.exercise={id:this.id,name:{value:void 0,oldValue:void 0},description:{value:void 0,oldValue:void 0},muscleGroups:{value:[],oldValue:[]},variations:{value:[],oldValue:[]}},this.name.value=this.exercise.name,this.name.oldValue=this.exercise.name,this.name.isUpdated=!1,this.description.value=this.exercise.description,this.description.oldValue=this.exercise.description,this.description.isUpdated=!1,this.muscleGroups.value=[],this.muscleGroups.oldValue=[],this.variations.value=[],this.variations.oldValue=[]}function AF(t){this.muscleGroups.value=t,this.selectedPanel="form"}function OF(t){this.selectedVariation=t,this.selectedPanel="exerciseVariationForm"}function RF(){this.selectedVariation=void 0,this.selectedPanel="form"}function $F(t){let e=this,i=xe(this.variations.value.filter(n=>n.id<1)),s=i.length>0?i[0].id-1:-1;t.forEach(n=>{let o=e.variations.oldValue.find(l=>l.name.value==n.name&&l.type.value.id==n.type.id),a=e.variations.value.find(l=>l.name.value==n.name&&l.type.value.id==n.type.id);if(o==null){if(a==null){let l={};l.name={},l.description={},l.muscleGroups={},l.name.value=n.name,l.name.oldValue=null,l.name.isUpdated=!0,l.description.value=null,l.description.oldValue=null,l.description.isUpdated=!1,l.muscleGroups.value=[],l.muscleGroups.oldValue=[],l.type={},l.type.value=q(n.type),l.type.oldValue={id:void 0,text:void 0},l.type.isUpdated=!0,l.id=s--,e.variations.value.push(l)}}else a==null&&e.variations.value.push(o)});let r=[];this.variations.value.forEach(n=>{t.findIndex(a=>a.name==n.name.value&&a.type.id==n.type.value.id)<0&&r.push({name:n.name.value,typeID:n.type.value.id})}),this.variations.value=this.variations.value.filter(n=>r.findIndex(o=>o.name==n.name.value&&o.typeID==n.type.value.id)==-1),this.selectedPanel="form"}function NF(t){if(t.type.isUpdated&&this.workoutStore.addVariation(t.name.value,t.type.value.id,t.type.value.text),!t.id){let e=xe(this.variations.value.filter(i=>i.id<1));t.id=e.length>0?e[0].id-1:-1}Be(t,this.variations.value),this.selectedPanel="form"}async function LF(){let t=this,e={id:this.id,isNew:this.id<1,isUpdated:!1};if(this.name.value.trim()!=""&&this.name.value!=this.name.oldValue){let o={value:this.name.value,isUpdated:!0};e.name=o,e.isUpdated=!0}let i=this.description.value?this.description.value.trim():null,s=this.description.oldValue?this.description.oldValue.trim():null;if(i!=s){let o={value:this.description.value.trim(),isUpdated:!0};e.description=o,e.isUpdated=!0}let r=[];this.muscleGroups.value.forEach(o=>{let a=t.muscleGroups.oldValue.findIndex(l=>l.id==o.id);if(a>-1){let l=this.muscleGroups.oldValue[a];l.isPrimary!=o.isPrimary&&l.isSecondary!=o.isSecondary&&r.push({id:o.id,isPrimary:o.isPrimary,isSecondary:o.isSecondary,isUpdated:!0,name:o.name})}else r.push({id:o.id,isPrimary:o.isPrimary,isSecondary:o.isSecondary,isAdded:!0,name:o.name})}),this.muscleGroups.oldValue.forEach(o=>{t.muscleGroups.value.findIndex(l=>l.id==o.id)<0&&r.push({id:o.id,isDeleted:!0,name:o.name})}),e.muscleGroups=r,e.muscleGroups.length>0&&(e.isUpdated=!0);let n=[];this.variations.value.forEach(o=>{o.id<1?n.push({id:o.id,typeID:o.type.value.id,name:o.name,description:o.description,muscleGroups:o.muscleGroups.value,isNew:!0}):o.isUpdated&&n.push({id:o.id,typeID:o.type.value.id!=o.type.oldValue.id?o.type.value.id:void 0,name:o.name,description:o.description,muscleGroups:o.muscleGroups.value,isUpdated:!0})}),this.variations.oldValue.forEach(o=>{t.variations.value.findIndex(l=>l.id==o.id)<0&&n.push({id:o.id,isDeleted:!0,name:o.name})}),e.variations=n,e.variations.length>0&&(e.isUpdated=!0),this.workoutStore.saveExercise(e).then(()=>{this.$emit("back")})}const VF={class:"d-flex flex-column flex-grow-1"},WF={class:"d-flex flex-column"},zF={class:"label d-flex flex-row"},FF={class:"d-flex flex-row flex-wrap gap-1 mb-2"},jF={class:"d-flex flex-row flex-wrap gap-1"},BF={class:"label d-flex flex-row mb-2"},HF={class:"d-flex flex-column flex-grow-1 gap-2"},UF={class:"letter text-start"},YF={class:"d-flex flex-column gap-2"},GF=["onClick"],KF={class:"d-flex flex-row"},qF={class:"label d-flex flex-column"},JF={class:"name"};function QF(t,e,i,s,r,n){const o=T("MuscleSelector"),a=T("VariationList"),l=T("ExerciseVariationForm");return f(),m("div",VF,[c("div",{class:O(["exercise-form d-flex flex-column flex-grow-1",{hide:t.selectedPanel!="form"}])},[c("img",{class:"icon-button mb-2",src:bi,width:"20",height:"20",onClick:e[0]||(e[0]=fe(d=>t.$emit("back"),["prevent"]))}),H(c("input",{id:"name",class:"textbox mb-2",type:"text",ref:"name",placeholder:"Exercise Name","onUpdate:modelValue":e[1]||(e[1]=d=>t.name.value=d),spellcheck:"true"},null,512),[[Pe,t.name.value,void 0,{lazy:!0,trim:!0}]]),H(c("textarea",{id:"description",class:"textarea",type:"text",placeholder:"Exercise Description","onUpdate:modelValue":e[2]||(e[2]=d=>t.description.value=d),spellcheck:"true"},null,512),[[Pe,t.description.value]]),c("button",{type:"button",class:"btn btn-primary mt-2",onClick:e[3]||(e[3]=d=>n.save())},"Save"),c("div",WF,[c("div",zF,[e[8]||(e[8]=c("span",null,"Muscle Groups",-1)),c("img",{class:"icon-button",src:ns,width:20,height:20,onClick:e[4]||(e[4]=d=>t.selectedPanel="muscleSelector")})]),e[9]||(e[9]=c("span",{class:"sm-label"},"Primary",-1)),c("div",FF,[(f(!0),m(M,null,N(t.muscleGroups.value.filter(d=>d.isPrimary),(d,u)=>(f(),m("div",{key:u,class:"muscle-group d-flex"},[c("span",null,S(d.name),1)]))),128))]),e[10]||(e[10]=c("span",{class:"sm-label"},"Secondary",-1)),c("div",jF,[(f(!0),m(M,null,N(t.muscleGroups.value.filter(d=>d.isSecondary),(d,u)=>(f(),m("div",{key:u,class:"muscle-group d-flex"},[c("span",null,S(d.name),1)]))),128))])]),c("div",BF,[e[11]||(e[11]=c("span",null,"Variations",-1)),c("img",{class:"icon-button",src:ns,width:20,height:20,onClick:e[5]||(e[5]=d=>t.selectedPanel="variationList")})]),c("div",HF,[(f(!0),m(M,null,N(n.variationList,(d,u,h)=>(f(),m("div",{key:h},[c("div",UF,S(u),1),c("div",YF,[(f(!0),m(M,null,N(d,(p,g)=>(f(),m("div",{class:"variation-item d-flex flex-row flex-grow-1",key:g,onClick:w=>n.selectVariation(p)},[c("div",KF,[e[12]||(e[12]=c("div",{class:"image flex-shrink-0"},null,-1)),c("div",qF,[c("div",JF,S(p.name.value),1)])]),e[13]||(e[13]=c("div",{class:"button-group d-flex flex-column"},[c("img",{class:"icon-button",src:Mn,width:"16",height:"16"})],-1))],8,GF))),128))])]))),128))])],2),t.selectedPanel=="muscleSelector"?(f(),K(o,{key:0,selectedGroups:t.muscleGroups.value,onSetMuscleGroups:n.setMuscleGroups,onBack:e[6]||(e[6]=d=>t.selectedPanel="form")},null,8,["selectedGroups","onSetMuscleGroups"])):y("",!0),t.selectedPanel=="variationList"?(f(),K(a,{key:1,exercise:t.exercise,selectedVariations:n.selectedVariations,onSetVariations:n.setVariations,onSaveExerciseVariation:n.saveExerciseVariation,onBack:e[7]||(e[7]=d=>t.selectedPanel="form")},null,8,["exercise","selectedVariations","onSetVariations","onSaveExerciseVariation"])):y("",!0),t.selectedPanel=="exerciseVariationForm"?(f(),K(l,{key:2,exerciseVariation:t.selectedVariation,exercise:t.exercise,onSaveExerciseVariation:n.saveExerciseVariation,onBack:n.closeVariationForm},null,8,["exerciseVariation","exercise","onSaveExerciseVariation","onBack"])):y("",!0)])}const ZF=V(PF,[["render",QF],["__scopeId","data-v-92778119"]]),XF={name:"ExerciseList",components:{ExerciseForm:ZF},props:{isSelector:Boolean,selectedIDs:{type:Array,default:()=>[]}},data:function(){return{workoutStore:void 0,searchTerm:"",selectedExerciseID:void 0,exerciseList:[]}},created:function(){this.workoutStore=yi()},computed:{exercises(){if(this.workoutStore){let t=q(this.workoutStore.getExercises());return this.isSelector&&t.forEach(e=>{e.isSelected=!!this.selectedIDs.includes(e.id)}),q(t)}else return[]}},methods:{setExerciseList:e4,createExercise:t4,selectExercise:i4,done:s4,back:n4},watch:{exercises:{handler(){this.setExerciseList()},deep:!0},searchTerm(){this.setExerciseList()}}};function e4(){let t=[];if(this.exercises.length>0){let e=gl(this.exercises,"name");if(this.searchTerm&&this.searchTerm!=""){let r=this.searchTerm;e=e.filter(n=>n.name.toLowerCase().includes(r))}let i=e[0].name.charAt(0).toLowerCase(),s=[];t.push({letter:i.toUpperCase(),exercises:s}),e.forEach(r=>{let n=r.name.charAt(0).toLowerCase();n==i?s.push(r):(i=n,s=[r],t.push({letter:i.toUpperCase(),exercises:s}))})}this.exerciseList=t}function t4(){this.selectedExerciseID=-1,this.$emit("setPanelHeader",{text:"Exercise Form"})}function i4(t){this.isSelector?t.isSelected=!t.isSelected:(this.selectedExerciseID=t.id,this.$emit("setPanelHeader",{text:"Exercise Form"}))}function s4(){let t=[];this.exercises.forEach(e=>{e.isSelected&&t.push(e.id)}),this.$emit("setExercises",t)}function n4(){this.selectedExerciseID=void 0,this.$emit("setPanelHeader",{text:"Exercise List"})}const r4={class:"d-flex flex-column flex-grow-1 overflow-scroll"},o4={class:"label d-flex flex-row flex-grow-1 mb-2"},a4={class:"d-flex flex-column"},l4={class:"letter text-start"},d4=["onClick"],c4={class:"label d-flex flex-column"},u4={class:"name"};function h4(t,e,i,s,r,n){const o=T("ExerciseForm");return f(),m("div",r4,[c("div",{class:O(["exercise-list d-flex flex-column",{hide:t.selectedExerciseID}])},[c("div",o4,[c("img",{class:"icon-button",src:bi,width:"20",height:"20",onClick:e[0]||(e[0]=fe(a=>t.$emit("back"),["prevent"]))}),e[4]||(e[4]=c("span",null,"Create Exercise",-1)),c("img",{class:"icon-button",src:ns,width:20,height:20,onClick:e[1]||(e[1]=(...a)=>n.createExercise&&n.createExercise(...a))})]),H(c("input",{id:"title",class:"textbox mb-2",type:"text",ref:"text",placeholder:"Search","onUpdate:modelValue":e[2]||(e[2]=a=>t.searchTerm=a),spellcheck:"true"},null,512),[[Pe,t.searchTerm,void 0,{trim:!0}]]),c("button",{type:"button",class:"btn btn-primary mb-2",onClick:e[3]||(e[3]=a=>n.done())},"Done"),c("div",a4,[(f(!0),m(M,null,N(t.exerciseList,(a,l)=>(f(),m("div",{key:l},[c("div",l4,S(a.letter),1),(f(!0),m(M,null,N(a.exercises,(d,u)=>(f(),m("div",{class:O(["exercise-item d-flex flex-row flex-grow-1",{selected:d.isSelected}]),key:u,onClick:h=>n.selectExercise(d)},[e[5]||(e[5]=c("div",{class:"image flex-shrink-0"},null,-1)),c("div",c4,[c("div",u4,S(d.name),1)])],10,d4))),128))]))),128))])],2),t.selectedExerciseID?(f(),K(o,{key:0,id:t.selectedExerciseID,onBack:n.back},null,8,["id","onBack"])):y("",!0)])}const Py=V(XF,[["render",h4],["__scopeId","data-v-1a5a26f0"]]),f4="/icon/circle-stop.png",m4={name:"WorkoutForm",components:{ExerciseItem:Kz,ExerciseList:Py,DateTimeSelector:id},props:{id:{type:Number,default:-1}},data:function(){return{workoutStore:null,selectedPanel:"form",now:Date.now(),startAt:{value:void 0,oldValue:void 0,isUpdated:!1},endAt:{value:void 0,oldValue:void 0,isUpdated:!1},name:{value:void 0,oldValue:void 0,isUpdated:!1},description:{value:void 0,oldValue:void 0,isUpdated:!1},isTemplate:{value:void 0,oldValue:void 0,isUpdated:!1},exercises:{value:[],oldValue:[]},default:{reps:null,restSeconds:120,weight:null,holdSeconds:null,timeSeconds:null},settings:{isShown:!1,confimDelete:!1},completion:{isActive:!1,isValid:!0,createEvent:!0}}},created:function(){this.workoutStore=yi();var t=this;setInterval(function(){t.now=Date.now()},1e3)},computed:{workout(){if(this.workoutStore)if(this.id>0){let t=this.workoutStore.getWorkout(this.id);return q(t)}else this.setProps()},isActive(){return!!(this.startAt.value&&!this.endAt.value||this.completion.isActive)},isComplete(){return!!(this.workout&&this.workout&&this.workout.iteration&&this.workout.iteration.completedAt)},exerciseIDs(){return this.exercises.value.map(t=>t.exercise.id)},timeSinceStart(){if(this.isActive&&this.startAt.value){let t=new Date(this.startAt.value);return P_(t,this.now)}else return}},methods:{setProps:p4,selectExercises:g4,setExercises:v4,addDefaultSet:_4,addSet:y4,deleteSet:b4,addVariation:w4,removeVariation:S4,stopWorkout:T4,cancelCompletion:x4,completeWorkout:E4,setIterationTime:I4,validateTimes:D4,deleteWorkout:k4,repositionExercise:C4,save:P4},watch:{workout(){this.setProps()}}};function p4(){if(this.id>0){if(this.workout){this.name.value=this.workout.name,this.name.oldValue=this.workout.name,this.name.isUpdated=!1,this.description.value=this.workout.description,this.description.oldValue=this.workout.description,this.description.isUpdated=!1,this.isTemplate.value=this.workout.isTemplate,this.isTemplate.oldValue=this.workout.isTemplate,this.isTemplate.isUpdated=!1;let t=[];this.workout.exercises.forEach(e=>{t.push({exercise:q(e.exercise),position:e.position,sets:{value:q(e.sets),oldValue:q(e.sets)}})}),this.exercises.value=t,this.exercises.oldValue=q(t),this.workout.iteration&&(this.workout.iteration.startAt&&(this.startAt.value=this.workout.iteration.startAt,this.startAt.oldValue=this.workout.iteration.startAt,this.startAt.isUpdated=!1),this.workout.iteration.endAt&&(this.endAt.value=this.workout.iteration.endAt,this.endAt.oldValue=this.workout.iteration.endAt,this.endAt.isUpdated=!1))}}else this.name.value=void 0,this.name.oldValue=void 0,this.name.isUpdated=!1,this.description.value=void 0,this.description.oldValue=void 0,this.description.isUpdated=!1,this.isTemplate.value=!0,this.isTemplate.oldValue=void 0,this.isTemplate.isUpdated=!1,this.exercises.value=[],this.exercises.oldValue=[],this.startAt.value=void 0,this.startAt.oldValue=void 0,this.startAt.isUpdated=!1,this.endAt.value=void 0,this.endAt.oldValue=void 0,this.endAt.isUpdated=!1,this.workout={id:-1,name:void 0,description:void 0,exercises:[]}}function g4(){this.selectedPanel="exerciseList",this.$emit("setPanelHeader",{text:"Select Exercises"})}function v4(t){this.selectedPanel="form",this.$emit("setPanelHeader",{text:"Workout"});let e=this.workoutStore.getExercises();e=e.filter(r=>t.includes(r.id));let i=0;e.forEach(r=>{i++,this.exercises.value.find(o=>o.exercise.id==r.id)||this.exercises.value.push({exercise:q(r),position:i,sets:{value:[],oldValue:[]}})});let s=[];this.exercises.value.forEach(r=>{e.findIndex(o=>o.id==r.exercise.id)<0&&s.push(r.exercise.id)}),this.exercises.value=this.exercises.value.filter(r=>!s.includes(r.exercise.id));for(let r=1;r<=this.exercises.value.length;r++)this.exercises.value[r-1].position=r;this.save()}function _4(t){let i=this.exercises.value.flatMap(n=>n.sets.value).map(n=>n.id).sort((n,o)=>n-o),s=i.length==0||i[0]-1>-1?-1:i[0]-1;this.exercises.value.find(n=>n.exercise.id==t).sets.value.push({id:s,reps:this.default.reps,weight:this.default.weight,restSeconds:this.default.restSeconds,holdSeconds:this.default.holdSeconds,timeSeconds:this.default.timeSeconds,variations:[],isAdded:!0})}function y4(t){let i=this.exercises.value.flatMap(n=>n.sets.value).map(n=>n.id).sort((n,o)=>n-o),s=i.length==0||i[0]-1>-1?-1:i[0]-1,r=this.exercises.value.find(n=>n.exercise.id==t);if(r.sets.value==0)r.sets.value.push({id:s,reps:this.default.reps,weight:this.default.weight,restSeconds:this.default.restSeconds,holdSeconds:this.default.holdSeconds,timeSeconds:this.default.timeSeconds,variations:[],isAdded:!0});else{let n=r.sets.value[r.sets.value.length-1],o=q(n);o.iteration=null,o.id=s,o.isAdded=!0,r.sets.value.push(o)}this.save()}function b4({setID:t,exerciseID:e}){let i=this.exercises.value.find(s=>s.exercise.id==e);xs(t,i.sets.value),this.save()}function w4({setID:t,variationID:e,exerciseID:i}){let r=q(this.workoutStore.getExercise(i)).variations.find(a=>a.id==e);this.exercises.value.find(a=>a.exercise.id==i).sets.value.find(a=>a.id==t).variations.push({id:e,name:r.name}),this.save()}function S4({setID:t,variationID:e,exerciseID:i}){let r=this.exercises.value.find(n=>n.exercise.id==i).sets.value.find(n=>n.id==t);r.variations=r.variations.filter(n=>n.id!=e),this.save()}function T4(){if(!this.completion.isActive){let t=this.exercises.value.flatMap(e=>e.sets.value).filter(e=>e.iteration&&e.iteration.completedAt);if(t.length>0){let e=new Date(t[0].iteration.completedAt);t.forEach(i=>{if(i.iteration&&i.iteration.completedAt){let s=new Date(i.iteration.completedAt);+s>+e&&(e=s)}}),this.endAt.value=e.toISOString()}this.validateTimes(),this.completion.isActive=!this.completion.isActive}}function x4(){this.endAt.value=void 0,this.completion.isActive=!1}function E4(){this.completion.isValid&&this.workoutStore.completeWorkout(this.workout.id,this.startAt.value,this.endAt.value,this.completion.createEvent).then(()=>{this.completion.isActive=!1,this.$emit("back")})}function I4(t,e){t&&(e=="start"?this.startAt.value=t:e=="end"&&(this.endAt.value=t),this.validateTimes())}function D4(){(this.workout.iteration||void 0)&&(this.startAt.value&&this.endAt.value?+new Date(this.startAt.value)>+new Date(this.endAt.value)?this.completion.isValid=!1:+new Date(this.startAt.value)<=+new Date(this.endAt.value)&&(this.completion.isValid=!0):this.endAt.value?this.completion.isValid=!0:this.completion.isValid=!1)}function k4(){let t={id:this.id,isDeleted:!0};this.workoutStore.saveWorkout(t).then(()=>this.$emit("back"))}function C4(t,e){this.workoutStore.repositionExercise(this.id,t,e)}function P4(){let t=this,e={id:this.id,isNew:this.id<1,isUpdated:!1};if(this.name.value.trim()!=""&&this.name.value!=this.name.oldValue){let n={value:this.name.value,isUpdated:!0};e.name=n,e.isUpdated=!0}let i=this.description.value?this.description.value.trim():null,s=this.description.oldValue?this.description.oldValue.trim():null;i!=s&&(e.description={value:this.description.value.trim(),isUpdated:!0},e.isUpdated=!0),this.isTemplate.value!=this.isTemplate.oldValue&&(e.isTemplate={value:this.isTemplate.value,isUpdated:!0},e.isUpdated=!0),e.isNew?(this.startAt.value&&(e.startAt={value:this.startAt.value,isUpdated:!0},e.isUpdated=!0),this.endAt.value&&(e.endAt={value:this.endAt.value,isUpdated:!0},e.isUpdated=!0)):(this.startAt.value&&this.startAt.value!=this.startAt.oldValue&&(e.startAt={value:this.startAt.value,isUpdated:!0},e.isUpdated=!0),this.endAt.value&&this.endAt.value!=this.endAt.oldValue&&(e.endAt={value:this.endAt.value,isUpdated:!0},e.isUpdated=!0));let r=[];this.exercises.value.forEach(n=>{let o={id:n.exercise.id},a=t.exercises.oldValue.findIndex(l=>l.exercise.id==n.exercise.id);if(a<0){let l=[];n.sets.value.forEach(d=>{let u={reps:d.reps?d.reps:null,weight:d.weight?d.weight:null,holdSeconds:d.holdSeconds?d.holdSeconds:null,restSeconds:d.restSeconds?d.restSeconds:null,timeSeconds:d.timeSeconds?d.timeSeconds:null,variations:[],isAdded:!0};d.variations.forEach(h=>{u.variations.push({id:h.id,isAdded:!0})}),l.push(u)}),o.position=n.position,o.isAdded=!0,r.push(o),e.isUpdated=!0,o.sets=l}else{let l=[];n.sets.value.forEach(u=>{let h=n.sets.oldValue.find(p=>p.id==u.id);if(h){let p=[];u.variations.forEach(g=>{h.variations.findIndex(_=>_.id==g.id)==-1&&p.push({id:g.id,isAdded:!0})}),h.variations.forEach(g=>{u.variations.findIndex(_=>_.id==g.id)==-1&&p.push({id:g.id,isRemoved:!0})}),(u.reps!=h.reps||u.weight!=h.weight||u.holdSeconds!=h.holdSeconds||u.restSeconds!=h.restSeconds||u.timeSeconds!=h.timeSeconds||p.length>0)&&l.push({id:u.id,reps:u.reps?u.reps:null,holdSeconds:u.holdSeconds?u.holdSeconds:null,weight:u.weight?u.weight:null,restSeconds:u.restSeconds?u.restSeconds:null,timeSeconds:u.timeSeconds?u.timeSeconds:null,variations:p,isUpdated:!0})}else{let p={id:u.id,reps:u.reps?u.reps:null,holdSeconds:u.holdSeconds?u.holdSeconds:null,weight:u.weight?u.weight:null,restSeconds:u.restSeconds?u.restSeconds:null,timeSeconds:u.timeSeconds?u.timeSeconds:null,variations:[],isAdded:!0};u.variations.forEach(g=>{p.variations.push({id:g.id,isAdded:!0})}),l.push(p)}}),n.sets.oldValue.forEach(u=>{n.sets.value.findIndex(p=>p.id==u.id)<0&&l.push({id:u.id,isDeleted:!0})});let d=t.exercises.oldValue[a];(l.length>0||d.position!=n.position)&&(d.position!=n.position&&(o.position=n.position),r.push(o),o.sets=l,o.isUpdated=!0,e.isUpdated=!0)}}),this.exercises.oldValue.forEach(n=>{t.exercises.value.findIndex(a=>a.exercise.id==n.exercise.id)<0&&r.push({id:n.exercise.id,isRemoved:!0})}),e.exercises=r,e.exercises.length>0&&(e.isUpdated=!0),(e.isUpdated||e.isNew)&&this.workoutStore.saveWorkout(e)}const M4={class:"d-flex flex-column flex-grow-1"},A4={class:"d-flex flex-column"},O4={class:"top d-flex flex-column sticky-top"},R4={class:"label d-flex flex-row mb-2"},$4={class:"d-flex flex-column"},N4={key:0,class:"d-flex flex-column"},L4={class:"d-flex flex-column"},V4={class:"d-flex flex-row justify-items-start mt-2"},W4={key:1,class:"d-flex flex-row mb-2 align-items-center"},z4={key:0,class:"completion d-flex flex-column justify-content-center position-sticky bottom-0 pb-1"},F4={class:"clock d-flex flex-row justify-content-center align-items-center"},j4={key:0,class:"form-group pb-2"},B4={class:"d-flex flex-row justify-items-start mt-2"},H4={class:"d-flex flex-row mt-2"};function U4(t,e,i,s,r,n){const o=T("ExerciseItem"),a=T("DateTimeSelector"),l=T("ExerciseList");return f(),m("div",M4,[c("div",{class:O(["workout-view d-flex flex-column flex-grow-1 justify-content-between",{hide:t.selectedPanel!="form","is-active":n.isActive}])},[c("div",A4,[c("div",O4,[c("div",R4,[c("img",{class:"icon-button mb-2",src:bi,width:"20",height:"20",onClick:e[0]||(e[0]=fe(d=>t.$emit("back"),["prevent"]))}),e[21]||(e[21]=c("span",null,"Exercises",-1)),c("img",{class:"icon-button",src:ns,width:20,height:20,onClick:e[1]||(e[1]=(...d)=>n.selectExercises&&n.selectExercises(...d))})]),H(c("input",{id:"name",class:"textbox mb-2",type:"text",ref:"text",placeholder:"Workout Name","onUpdate:modelValue":e[2]||(e[2]=d=>t.name.value=d),spellcheck:"true"},null,512),[[Pe,t.name.value,void 0,{lazy:!0,trim:!0}]])]),c("div",$4,[(f(!0),m(M,null,N(t.exercises.value,d=>(f(),K(o,{class:"mb-2",key:d.id,exercise:d,isActive:n.isActive,isComplete:n.isComplete,onAddDefaultSet:n.addDefaultSet,onAddSet:n.addSet,onDeleteSet:n.deleteSet,onAddVariation:e[3]||(e[3]=u=>n.addVariation(u)),onRemoveVariation:e[4]||(e[4]=u=>n.removeVariation(u)),onRepositionExercise:n.repositionExercise,onSaveWorkout:n.save},null,8,["exercise","isActive","isComplete","onAddDefaultSet","onAddSet","onDeleteSet","onRepositionExercise","onSaveWorkout"]))),128))]),c("span",{class:"text-start",onClick:e[5]||(e[5]=d=>t.settings.isShown=!t.settings.isShown)},"Settings"),t.settings.isShown?(f(),m("div",N4,[c("div",L4,[D(a,{class:O(["date-selector",{invalid:!t.completion.isValid}]),dateTime:t.startAt.value,onOnChange:e[6]||(e[6]=d=>n.setIterationTime(d,"start"))},null,8,["class","dateTime"]),D(a,{class:O(["date-selector mt-2",{invalid:!t.completion.isValid}]),dateTime:t.endAt.value,onOnChange:e[7]||(e[7]=d=>n.setIterationTime(d,"end"))},null,8,["class","dateTime"])]),c("div",V4,[H(c("input",{type:"checkbox",id:"is-template","onUpdate:modelValue":e[8]||(e[8]=d=>t.isTemplate.value=d)},null,512),[[ci,t.isTemplate.value]]),e[22]||(e[22]=c("label",{class:"ms-1",for:"is-template"},"Is Template",-1))]),c("button",{type:"button",class:"btn btn-primary mb-2",onClick:e[9]||(e[9]=d=>n.save())},"Save"),t.settings.confimDelete?y("",!0):(f(),m("button",{key:0,type:"button",class:"btn btn-danger mb-2",onClick:e[10]||(e[10]=d=>t.settings.confimDelete=!0)},"Delete")),t.settings.confimDelete?(f(),m("div",W4,[e[23]||(e[23]=c("span",null,"Are you sure?",-1)),c("button",{type:"button",class:"btn btn-warning ms-2",onClick:e[11]||(e[11]=d=>t.settings.confimDelete=!1)},"Cancel"),c("button",{type:"button",class:"btn btn-danger ms-2",onClick:e[12]||(e[12]=(...d)=>n.deleteWorkout&&n.deleteWorkout(...d))},"Delete")])):y("",!0)])):y("",!0)]),n.isActive?(f(),m("div",z4,[c("div",F4,[c("img",{class:"icon-button me-2",src:f4,width:"24",height:"24",onClick:e[13]||(e[13]=fe((...d)=>n.stopWorkout&&n.stopWorkout(...d),["prevent"]))}),c("div",null,S(n.timeSinceStart),1)]),t.completion.isActive?(f(),m("div",j4,[D(a,{class:O(["date-selector",{invalid:!t.completion.isValid}]),dateTime:t.startAt.value,onOnChange:e[14]||(e[14]=d=>n.setIterationTime(d,"start"))},null,8,["class","dateTime"]),D(a,{class:O(["date-selector mt-2",{invalid:!t.completion.isValid}]),dateTime:t.endAt.value,onOnChange:e[15]||(e[15]=d=>n.setIterationTime(d,"end"))},null,8,["class","dateTime"]),c("div",B4,[H(c("input",{type:"checkbox",id:"create-event","onUpdate:modelValue":e[16]||(e[16]=d=>t.completion.createEvent=d)},null,512),[[ci,t.completion.createEvent]]),e[24]||(e[24]=c("label",{class:"ms-1",for:"create-event"},"Create Event",-1))]),c("div",H4,[c("button",{type:"button",class:"btn btn-primary mb-2",onClick:e[17]||(e[17]=(...d)=>n.completeWorkout&&n.completeWorkout(...d))},"Log"),c("button",{type:"button",class:"btn btn-warning mb-2 ms-2",onClick:e[18]||(e[18]=(...d)=>n.cancelCompletion&&n.cancelCompletion(...d))},"Cancel")])])):y("",!0)])):y("",!0)],2),t.selectedPanel=="exerciseList"?(f(),K(l,{key:0,isSelector:!0,selectedIDs:n.exerciseIDs,onSetExercises:n.setExercises,onSetPanelHeader:e[19]||(e[19]=d=>t.$emit("setPanelHeader",d)),onBack:e[20]||(e[20]=d=>t.selectedPanel="form")},null,8,["selectedIDs","onSetExercises"])):y("",!0)])}const My=V(m4,[["render",U4],["__scopeId","data-v-c4e6a40a"]]),Y4={name:"WorkoutList",components:{WorkoutItem:oz,WorkoutForm:My},props:{selectedID:Number},data:function(){return{workoutStore:void 0,selectedPanel:"list",selectedWorkoutID:void 0}},created:async function(){let t=await U(()=>Promise.resolve().then(()=>eh),void 0);this.workoutStore=t.useWorkoutStore(),this.selectWorkout(this.selectedID)},computed:{workouts(){return this.workoutStore?this.workoutStore.getWorkouts():[]},templates(){return this.workouts.filter(t=>t.isTemplate)},recents(){let t=this.workouts.filter(e=>e.iteration&&e.iteration.completedAt);return t.sort((e,i)=>new Date(i.iteration.completedAt)-new Date(e.iteration.completedAt)),t},actives(){let t=this.workouts.filter(e=>e.iteration&&e.iteration.startAt&&!e.iteration.endAt);return t.sort((e,i)=>new Date(i.iteration.startAt)-new Date(e.iteration.startAt)),t}},methods:{createWorkout(){this.selectedWorkoutID=-1,this.selectedPanel="workoutForm"},selectWorkout(t){t?(this.selectedWorkoutID=t,this.selectedPanel="workoutForm",this.$emit("setPanelHeader",{text:"Workout"})):(this.selectedWorkoutID=void 0,this.selectedPanel="list",this.$emit("setPanelHeader",{text:"Workout List"}))}},watch:{selectedID(t){this.selectWorkout(t)}}},G4={class:"d-flex flex-column flex-grow-1 overflow-scroll"},K4={class:"label d-flex flex-row mb-2"},q4={key:0,class:"d-flex flex-column"},J4={class:"d-flex flex-column"},Q4={class:"d-flex flex-column"},Z4={class:"d-flex flex-column"};function X4(t,e,i,s,r,n){const o=T("WorkoutItem"),a=T("WorkoutForm");return f(),m("div",G4,[c("div",{class:O(["workout-list d-flex flex-column flex-grow-1",{hide:t.selectedPanel!="list"}])},[c("div",K4,[c("img",{class:"icon-button",src:bi,width:"20",height:"20",onClick:e[0]||(e[0]=fe(l=>t.$emit("back"),["prevent"]))}),e[7]||(e[7]=c("span",null,"Workouts",-1)),c("img",{class:"icon-button",src:ns,width:20,height:20,onClick:e[1]||(e[1]=(...l)=>n.createWorkout&&n.createWorkout(...l))})]),n.actives.length>0?(f(),m("div",q4,[e[8]||(e[8]=c("span",{class:"text-start mt-1"},"Active",-1)),c("div",J4,[(f(!0),m(M,null,N(n.actives,l=>(f(),K(o,{key:l.id,workout:l,class:"mb-2",onSelectWorkout:e[2]||(e[2]=d=>t.$emit("selectWorkout",d.id))},null,8,["workout"]))),128))])])):y("",!0),e[9]||(e[9]=c("span",{class:"text-start mt-1"},"Templates",-1)),c("div",Q4,[(f(!0),m(M,null,N(n.templates,l=>(f(),K(o,{key:l.id,workout:l,class:"mb-2",onSelectWorkout:e[3]||(e[3]=d=>t.$emit("selectWorkout",d.id))},null,8,["workout"]))),128))]),e[10]||(e[10]=c("span",{class:"text-start mt-1"},"Recent",-1)),c("div",Z4,[(f(!0),m(M,null,N(n.recents,l=>(f(),K(o,{key:l.id,workout:l,class:"mb-2",onSelectWorkout:e[4]||(e[4]=d=>t.$emit("selectWorkout",d.id))},null,8,["workout"]))),128))])],2),t.selectedPanel=="workoutForm"?(f(),K(a,{key:0,id:t.selectedWorkoutID,onSetPanelHeader:e[5]||(e[5]=l=>t.$emit("setPanelHeader",l)),onBack:e[6]||(e[6]=l=>t.$emit("selectWorkout"))},null,8,["id"])):y("",!0)])}const ej=V(Y4,[["render",X4],["__scopeId","data-v-3eec13f9"]]),tj={name:"WorkoutPanelDashboard",components:{},props:{},data:function(){return{}},created:function(){},methods:{}},ij={class:"workout-panel-dashboard d-flex flex-column"};function sj(t,e,i,s,r,n){return f(),m("div",ij,[c("div",{class:"workout card",onClick:e[0]||(e[0]=o=>t.$emit("selectView",{panel:"workoutList"}))},e[2]||(e[2]=[c("span",null,"Workouts",-1)])),c("div",{class:"exercise card",onClick:e[1]||(e[1]=o=>t.$emit("selectView",{panel:"exerciseList"}))},e[3]||(e[3]=[c("span",null,"Exercises",-1)])),e[4]||(e[4]=c("div",{class:"skill card"},[c("span",null,"Skills")],-1)),e[5]||(e[5]=c("div",{class:"muscle card"},[c("span",null,"Muscles")],-1))])}const nj=V(tj,[["render",sj],["__scopeId","data-v-6a193f7d"]]);var rj=[{id:1,text:"Custom"}];const oj={name:"WorkoutPanel",components:{ItemPanelHeader:ed,WorkoutList:ej,WorkoutForm:My,WorkoutPanelDashboard:nj,ExerciseList:Py},props:{selectedDate:Date,showHead:{type:Boolean,default:!0}},data:function(){return{workoutStore:void 0,sort:{by:"Custom",items:rj},title:"Workout Dashboard",activePanel:"dashboard",lastPanel:"",panelQueue:[],workoutView:{workout:void 0},exerciseForm:{id:void 0}}},created:function(){this.workoutStore=yi(),this.workoutStore.initialize();let t=localStorage.getItem("workout-panel-sort-by");t?this.sort.by=t:localStorage.setItem("workout-panel-sort-by",this.sort.by)},computed:{selectedWorkoutID(){if(this.workoutStore)return this.workoutStore.selectedWorkoutID}},methods:{onSortChange:aj,selectView:lj,setPanelHeader:dj,selectWorkout:cj,back:uj},watch:{selectedWorkoutID(){this.selectView({panel:"workoutList"})}}};function aj(t){this.sort.by=t,localStorage.setItem("workout-panel-sort-by",t)}function lj(t){this.activePanel!=t.panel&&this.panelQueue.push(this.activePanel),this.activePanel=t.panel,t&&t.panel&&t.panel=="dashboard"?this.activePanel="Workout Dashboard":t&&t.panel&&t.panel=="workoutList"?this.title="Workout List":t&&t.panel&&t.panel=="workoutForm"?(this.workoutView.workout=t.workout,this.title="Workout"):t&&t.panel&&t.panel=="exerciseList"?this.title=t.panelTitle?t.panelTitle:"Exercises":t&&t.panel&&t.panel=="exerciseForm"&&(this.title="Exercise Form")}function dj(t){this.title=t.text}function cj(t){this.back(),this.workoutStore.selectWorkout(t)}function uj(){this.activePanel=this.panelQueue.pop()}const hj={class:"row g-0 h-100"},fj={class:"workout-panel col h-100 d-flex flex-column flex-grow-1 overflow-hidden"};function mj(t,e,i,s,r,n){const o=T("ItemPanelHeader"),a=T("WorkoutPanelDashboard"),l=T("WorkoutList"),d=T("WorkoutForm"),u=T("ExerciseList");return f(),m("div",hj,[c("div",fj,[H(D(o,{title:t.title,sort:t.sort,selectedDate:i.selectedDate,onOnSortChange:n.onSortChange},null,8,["title","sort","selectedDate","onOnSortChange"]),[[Ie,i.showHead]]),t.activePanel=="dashboard"?(f(),K(a,{key:0,onSelectView:n.selectView,onBack:n.back},null,8,["onSelectView","onBack"])):y("",!0),t.activePanel=="workoutList"?(f(),K(l,{key:1,selectedID:n.selectedWorkoutID,onSetPanelHeader:n.setPanelHeader,onSelectWorkout:n.selectWorkout,onBack:n.back},null,8,["selectedID","onSetPanelHeader","onSelectWorkout","onBack"])):y("",!0),t.activePanel=="workoutForm"?(f(),K(d,{key:2,workout:t.workoutView.workout,onSelectView:n.selectView,onBack:n.back},null,8,["workout","onSelectView","onBack"])):y("",!0),t.activePanel=="exerciseList"?(f(),K(u,{key:3,onSetPanelHeader:n.setPanelHeader,onBack:n.back},null,8,["onSetPanelHeader","onBack"])):y("",!0)])])}const Ay=V(oj,[["render",mj]]),pj={name:"MobileItemTabPanel",components:{DashboardPanel:V_,MetricPanel:W_,GoalPanel:F_,TodoPanel:H_,RoutinePanel:U_,TaskRoutinePanel:Y_,PlannerPanel:SO,EventPanel:q_,InventoryPanel:Ty,NutritionPanel:Dy,WorkoutPanel:Ay},props:{},data:function(){return{appStore:void 0,eventPanelProps:{},workoutPanelProps:{selectedWorkoutID:void 0}}},created:function(){this.appStore=Gt()},computed:{selectedPanel(){return this.appStore?this.appStore.itemPanel.selected:""}},methods:{selectWorkout(){}}},gj={class:"mobile-tab-panel d-flex flex-grow-1"};function vj(t,e,i,s,r,n){const o=T("DashboardPanel"),a=T("MetricPanel"),l=T("GoalPanel"),d=T("TodoPanel"),u=T("RoutinePanel"),h=T("TaskRoutinePanel"),p=T("PlannerPanel"),g=T("EventPanel"),w=T("InventoryPanel"),_=T("NutritionPanel"),P=T("WorkoutPanel");return f(),m("div",gj,[H(D(o,{class:"item-panel",showHead:!1},null,512),[[Ie,n.selectedPanel=="dashboard"]]),H(D(a,{class:"item-panel",showHead:!1},null,512),[[Ie,n.selectedPanel=="metric"]]),H(D(l,{class:"item-panel",showHead:!1},null,512),[[Ie,n.selectedPanel=="goal"]]),H(D(d,{class:"item-panel",showHead:!1},null,512),[[Ie,n.selectedPanel=="todo"]]),H(D(u,{class:"item-panel",showHead:!1},null,512),[[Ie,n.selectedPanel=="routine"]]),H(D(h,{class:"item-panel",showHead:!1},null,512),[[Ie,n.selectedPanel=="task-routine"]]),H(D(p,{class:"item-panel",dayCount:2,showHead:!1},null,512),[[Ie,n.selectedPanel=="planner"]]),H(D(g,{props:t.eventPanelProps,class:"item-panel",showHead:!1},null,8,["props"]),[[Ie,n.selectedPanel=="event"]]),H(D(w,{class:"item-panel",showHead:!1},null,512),[[Ie,n.selectedPanel=="inventory"]]),n.selectedPanel=="nutrition"?(f(),K(_,{key:0,class:"item-panel",showHead:!1})):y("",!0),H(D(P,{class:"item-panel",showHead:!1,selectedWorkoutID:t.workoutPanelProps.selectedWorkoutID,onSelectWorkout:n.selectWorkout},null,8,["selectedWorkoutID","onSelectWorkout"]),[[Ie,n.selectedPanel=="workout"]])])}const _j=V(pj,[["render",vj],["__scopeId","data-v-d00f8e0f"]]),yj={name:"BlurbFormControl",components:{},props:{title:{type:String,default:()=>"Blurb"},blurbs:{type:Array,default:()=>[]},placeholder:{type:String,default:()=>""}},data:function(){return{text:void 0,selectedID:void 0,isShown:!0,showButtons:!1,showTextarea:!1}},created:function(){},computed:{blurbs_Sorted(){return xe([...this.blurbs],"position")}},methods:{onAddBlurb:bj,editBlurb:wj,cancelBlurb:Sj,saveBlurb:Tj,onTextareaBlur:xj,getDateString(t){if(t){let e=new Date(t);return R_(e)}return""}}};function bj(){this.selectedID=void 0,this.text=void 0,this.showTextarea=!0}function wj(t){this.selectedID=t;let e=this.blurbs.findIndex(i=>i.id==t);if(e>-1){let i=this.blurbs[e];this.text=i.text,this.$refs.textbox.focus()}}function Sj(){this.text=void 0,this.selectedID=void 0,this.$refs.textbox.blur(),this.showButtons=!1,this.showTextarea=!1}function Tj(){this.selectedID?this.$emit("saveBlurb",this.selectedID,this.text):this.$emit("addBlurb",this.text),this.cancelBlurb()}function xj(){this.text||(this.showButtons=!1,this.showTextarea=!1,this.selectedID=void 0)}const Ej={class:"blurb-form-control d-flex flex-column"},Ij={class:"d-flex flex-row justify-content-between"},Dj={class:"d-flex flex-row"},kj={class:"form-head text-start"},Cj={key:0,class:"caret mt-auto mb-auto me-2",src:jn,width:"5",height:"8"},Pj={key:1,class:"caret mt-auto mb-auto me-2",src:oa,width:"8",height:"5"},Mj={key:0,class:"d-flex flex-column"},Aj={key:0,class:"d-flex flex-column"},Oj=["placeholder"],Rj={key:0,class:"d-flex flex-row mt-1 justify-content-end"},$j={class:"d-flex flex-column"},Nj=["onClick"],Lj={class:"text-start"};function Vj(t,e,i,s,r,n){return f(),m("div",Ej,[c("div",{class:"header d-flex flex-column",onClick:e[1]||(e[1]=o=>t.isShown=!t.isShown),onMouseover:e[2]||(e[2]=o=>t.hovered=!0)},[c("div",Ij,[c("div",Dj,[c("span",kj,S(i.title),1),c("img",{class:"icon-button ms-1 mt-auto mb-auto",src:ns,width:14,height:14,onClick:e[0]||(e[0]=fe((...o)=>n.onAddBlurb&&n.onAddBlurb(...o),["stop"]))})]),t.isShown?y("",!0):(f(),m("img",Cj)),t.isShown?(f(),m("img",Pj)):y("",!0)]),e[10]||(e[10]=c("hr",null,null,-1))],32),t.isShown?(f(),m("div",Mj,[t.showTextarea?(f(),m("div",Aj,[H(c("textarea",{class:"textarea",ref:"textbox","onUpdate:modelValue":e[3]||(e[3]=o=>t.text=o),onKeyup:[e[4]||(e[4]=wt(fe((...o)=>n.saveBlurb&&n.saveBlurb(...o),["ctrl"]),["enter"])),e[5]||(e[5]=wt(fe((...o)=>n.cancelBlurb&&n.cancelBlurb(...o),["stop"]),["esc"]))],placeholder:i.placeholder,spellcheck:"true",onFocus:e[6]||(e[6]=o=>t.showButtons=!0),onBlur:e[7]||(e[7]=(...o)=>n.onTextareaBlur&&n.onTextareaBlur(...o))},"                ",40,Oj),[[Pe,t.text,void 0,{trim:!0}]]),t.showButtons?(f(),m("div",Rj,[c("button",{type:"button",onClick:e[8]||(e[8]=(...o)=>n.saveBlurb&&n.saveBlurb(...o))},"Save"),c("button",{class:"ms-1",type:"button",onClick:e[9]||(e[9]=(...o)=>n.cancelBlurb&&n.cancelBlurb(...o))},"Cancel")])):y("",!0)])):y("",!0),c("div",$j,[(f(!0),m(M,null,N(n.blurbs_Sorted,o=>(f(),m("div",{key:o.id,class:O(["blurb cursor-default d-flex flex-column mt-2",{selected:o.id==t.selectedID}]),onClick:a=>n.editBlurb(o.id)},[c("span",Lj,S(o.text),1)],10,Nj))),128))])])):y("",!0)])}const Oy=V(yj,[["render",Vj],["__scopeId","data-v-e27622e3"]]),Wj={name:"BriefingBlurb",components:{TimeframeRadio:Hr,MetricSelector:j_,BlurbFormControl:Oy},props:{},data:function(){return{plannerStore:void 0,universalStore:void 0,timeframes:q(Xs),METRIC:q(Kn),BLURBTYPE:q(Ga),idTimeframe:43,timeframe:"day",selectedMetrics:{physical:!1,emotional:!1,mental:!1,social:!1,financial:!1}}},created:async function(){let t=await U(()=>Promise.resolve().then(()=>Hh),void 0);this.universalStore=t.useUniversalStore();let e=await U(()=>Promise.resolve().then(()=>He),void 0);this.plannerStore=e.usePlannerStore(),this.timeframeIDs=this.timeframes.filter(i=>i.isActive).map(i=>i.id),this.universalStore.getBriefingBlurbs(this.idTimeframe,this.selectedDate)},computed:{selectedDate(){return this.plannerStore?this.plannerStore.selectedDate:it()},blurbs(){let t=[];return this.universalStore&&(t=this.universalStore.blurbs),t=t.filter(e=>e.idType==Ga.BRIEFING),t=t.filter(e=>+new Date(e.datetime)==+this.selectedDate),t},metrics(){return[{id:this.METRIC.PHYSICAL,title:"Physical",prop:this.physicalBlurbs},{id:this.METRIC.SOCIAL,title:"Social",prop:this.socialBlurbs},{id:this.METRIC.MENTAL,title:"Mental",prop:this.mentalBlurbs},{id:this.METRIC.EMOTIONAL,title:"Emotional",prop:this.emotionalBlurbs},{id:this.METRIC.FINANCIAL,title:"Financial",prop:this.financialBlurbs}]},physicalBlurbs(){return this.blurbs.filter(e=>e.idMetric==Kn.PHYSICAL)},socialBlurbs(){return this.blurbs.filter(e=>e.idMetric==Kn.SOCIAL)},mentalBlurbs(){return this.blurbs.filter(e=>e.idMetric==Kn.MENTAL)},emotionalBlurbs(){return this.blurbs.filter(e=>e.idMetric==Kn.EMOTIONAL)},financialBlurbs(){return this.blurbs.filter(e=>e.idMetric==Kn.FINANCIAL)},nextPostition(){let t=this.physicalBlurbs.length;return t>0?this.physicalBlurbs[t-1].position+1:1},nextTempID(){let t=xe([...this.physicalBlurbs],"id");return t.length>0&&t[0].id<0?t[0].id-1:-1}},methods:{selectTimeframe(t){let e=this.timeframes.findIndex(s=>s.text.toLowerCase()==t.toLowerCase()),i=this.timeframes[e];this.idTimeframe=i.id,this.timeframe=t},addBlurb(t,e){this.universalStore.addBriefingBlurb(t,new Date,Ga.BRIEFING,e,this.idTimeframe)},saveBlurb(t,e){let i=this.blurbs.findIndex(s=>s.id==t);if(i>-1){let s=this.blurbs[i];s.text=e}}}},zj={class:"briefing-blurb d-flex flex-column"};function Fj(t,e,i,s,r,n){const o=T("TimeframeRadio"),a=T("MetricSelector"),l=T("BlurbFormControl");return f(),m("div",zj,[D(o,{timeframe:t.timeframe,isToggle:!1,container:"briefing-blurb",onTimeframeSelected:n.selectTimeframe},null,8,["timeframe","onTimeframeSelected"]),D(a,{class:"metric-selector mt-1",selected:t.selectedMetrics},null,8,["selected"]),(f(!0),m(M,null,N(n.metrics,d=>(f(),K(l,{key:d.id,title:d.title,placeholder:`Click to add ${d.title} blurb`,blurbs:d.prop,class:"mt-2",onAddBlurb:u=>n.addBlurb(u,d.id),onSaveBlurb:n.saveBlurb},null,8,["title","placeholder","blurbs","onAddBlurb","onSaveBlurb"]))),128))])}const jj=V(Wj,[["render",Fj],["__scopeId","data-v-86e6dd7e"]]),Bj={name:"BriefingPanel",components:{ItemPanelNavbar:na,BriefingBlurb:jj},props:{showHead:{type:Boolean,default:!0}},data:function(){return{}},created:function(){},methods:{}},Hj={class:"row g-0 h-100"},Uj={class:"col h-100 d-flex flex-column"},Yj={class:"briefing-panel d-flex flex-column flex-grow-1 overflow-hidden"},Gj={class:"body d-flex flex-column flex-grow-1"};function Kj(t,e,i,s,r,n){const o=T("ItemPanelNavbar"),a=T("BriefingBlurb");return f(),m("div",Hj,[c("div",Uj,[c("div",Yj,[H(D(o,null,null,512),[[Ie,i.showHead]]),c("div",Gj,[D(a)])])])])}const qj=V(Bj,[["render",Kj]]),Jj="/icon/briefing2.png",Qj={name:"ItemPanel",components:{DashboardPanel:V_,BriefingPanel:qj,MetricPanel:W_,GoalPanel:F_,TodoPanel:H_,RoutinePanel:U_,TaskRoutinePanel:Y_,EventPanel:q_,InventoryPanel:Ty,NutritionPanel:Dy,WorkoutPanel:Ay},data:function(){return{appStore:void 0,workoutPanelProps:{selectedWorkoutID:void 0}}},created:function(){this.appStore=Gt();let t=localStorage.getItem("selected-item-panel");t?(t=t=="undefined"?void 0:t,this.$emit("setSelectedPanel",t)):localStorage.setItem("selected-item-panel",this.selectedPanel)},computed:{selectedPanel(){return this.appStore?this.appStore.itemPanel.selected:"todo"}},methods:{setSelectedPanel:Zj},watch:{selectedPanel(t){localStorage.setItem("selected-item-panel",t)}}};function Zj(t){this.selectedPanel!=t?this.appStore.setSelectedItemPanel(t):this.appStore.setSelectedItemPanel(void 0)}const Xj={class:"item-panel-wrapper row g-0"},eB={class:"col h-100",style:{"border-left":"1px solid rgba(220, 220, 220, .5)"}},tB={style:{width:"56px","padding-left":"8px",overflow:"hidden"}},iB={class:"d-flex flex-row mb-1"},sB={key:0},nB={class:"d-flex flex-row mb-1"},rB={key:0},oB={class:"d-flex flex-row mb-1"},aB={key:0},lB={class:"d-flex flex-row mb-1"},dB={key:0},cB={class:"d-flex flex-row mb-1"},uB={key:0},hB={class:"d-flex flex-row mb-1"},fB={key:0},mB={class:"d-flex flex-row mb-1"},pB={key:0},gB={class:"d-flex flex-row mb-1"},vB={key:0},_B={class:"d-flex flex-row mb-1"},yB={key:0},bB={class:"col-auto h-100"};function wB(t,e,i,s,r,n){const o=T("DashboardPanel"),a=T("BriefingPanel"),l=T("MetricPanel"),d=T("GoalPanel"),u=T("TodoPanel"),h=T("RoutinePanel"),p=T("TaskRoutinePanel"),g=T("EventPanel"),w=T("InventoryPanel"),_=T("NutritionPanel"),P=T("WorkoutPanel");return f(),m("div",Xj,[c("div",eB,[e[18]||(e[18]=c("div",{style:{width:"100%",height:"64px","border-bottom":"1px solid rgba(220, 220, 220, .5)"}},null,-1)),c("div",tB,[c("div",iB,[c("img",{class:O(["dashboard",[{active:n.selectedPanel=="dashboard"}]]),src:S_,width:"40",height:"40",style:{"margin-top":"8px"},onClick:e[0]||(e[0]=k=>n.setSelectedPanel("dashboard"))},null,2),n.selectedPanel=="dashboard"?(f(),m("div",sB,e[9]||(e[9]=[c("div",{style:{width:"12px",height:"40px","background-color":"#4285F4","margin-left":"3px","margin-top":"8px","border-radius":"4px"}},null,-1)]))):y("",!0)]),c("div",nB,[c("img",{class:O(["briefing",[{active:n.selectedPanel=="briefing"}]]),src:Jj,width:"40",height:"40",onClick:e[1]||(e[1]=k=>n.setSelectedPanel("briefing"))},null,2),n.selectedPanel=="briefing"?(f(),m("div",rB,e[10]||(e[10]=[c("div",{style:{width:"12px",height:"40px","background-color":"#4285F4","margin-left":"3px","border-radius":"4px"}},null,-1)]))):y("",!0)]),c("div",oB,[c("img",{class:O(["todo",[{active:n.selectedPanel=="todo"}]]),src:th,width:"40",height:"40",onClick:e[2]||(e[2]=k=>n.setSelectedPanel("todo"))},null,2),n.selectedPanel=="todo"?(f(),m("div",aB,e[11]||(e[11]=[c("div",{style:{width:"12px",height:"40px","background-color":"#4285F4","margin-left":"3px","border-radius":"4px"}},null,-1)]))):y("",!0)]),c("div",lB,[c("img",{class:O(["goal",[{active:n.selectedPanel=="goal"}]]),src:ih,width:"40",height:"40",onClick:e[3]||(e[3]=k=>n.setSelectedPanel("goal"))},null,2),n.selectedPanel=="goal"?(f(),m("div",dB,e[12]||(e[12]=[c("div",{style:{width:"12px",height:"40px","background-color":"#9013FE","margin-left":"3px","border-radius":"4px"}},null,-1)]))):y("",!0)]),c("div",cB,[c("img",{class:O(["routine",[{active:n.selectedPanel=="routine"}]]),src:T_,width:"40",height:"40",onClick:e[4]||(e[4]=k=>n.setSelectedPanel("routine"))},null,2),n.selectedPanel=="routine"?(f(),m("div",uB,e[13]||(e[13]=[c("div",{style:{width:"12px",height:"40px","background-color":"#4C6EF5","margin-left":"3px","border-radius":"4px"}},null,-1)]))):y("",!0)]),c("div",hB,[c("img",{class:O(["event",[{active:n.selectedPanel=="event"}]]),src:x_,width:"40",height:"40",onClick:e[5]||(e[5]=k=>n.setSelectedPanel("event"))},null,2),n.selectedPanel=="event"?(f(),m("div",fB,e[14]||(e[14]=[c("div",{style:{width:"12px",height:"40px","background-color":"#F4511E","margin-left":"3px","border-radius":"4px"}},null,-1)]))):y("",!0)]),c("div",mB,[c("img",{class:O(["inventory",[{active:n.selectedPanel=="inventory"}]]),src:E_,width:"40",height:"40",onClick:e[6]||(e[6]=k=>n.setSelectedPanel("inventory"))},null,2),n.selectedPanel=="inventory"?(f(),m("div",pB,e[15]||(e[15]=[c("div",{style:{width:"12px",height:"40px","background-color":"#3B99FC","margin-left":"3px","border-radius":"4px"}},null,-1)]))):y("",!0)]),c("div",gB,[c("img",{class:O(["nutrition",[{active:n.selectedPanel=="nutrition"}]]),src:I_,width:"40",height:"40",onClick:e[7]||(e[7]=k=>n.setSelectedPanel("nutrition"))},null,2),n.selectedPanel=="nutrition"?(f(),m("div",vB,e[16]||(e[16]=[c("div",{style:{width:"12px",height:"40px","background-color":"#F4511E","margin-left":"3px","border-radius":"4px"}},null,-1)]))):y("",!0)]),c("div",_B,[c("img",{class:O(["workout",[{active:n.selectedPanel=="workout"}]]),src:D_,width:"40",height:"40",onClick:e[8]||(e[8]=k=>n.setSelectedPanel("workout"))},null,2),n.selectedPanel=="workout"?(f(),m("div",yB,e[17]||(e[17]=[c("div",{style:{width:"12px",height:"40px","background-color":"#F4511E","margin-left":"3px","border-radius":"4px"}},null,-1)]))):y("",!0)])])]),c("div",bB,[H(D(o,{class:"item-panel"},null,512),[[Ie,n.selectedPanel=="dashboard"]]),H(D(a,{class:"item-panel"},null,512),[[Ie,n.selectedPanel=="briefing"]]),H(D(l,{class:"item-panel"},null,512),[[Ie,n.selectedPanel=="metric"]]),H(D(d,{class:"item-panel"},null,512),[[Ie,n.selectedPanel=="goal"]]),H(D(u,{class:"item-panel"},null,512),[[Ie,n.selectedPanel=="todo"]]),H(D(h,{class:"item-panel"},null,512),[[Ie,n.selectedPanel=="routine"]]),H(D(p,{class:"item-panel"},null,512),[[Ie,n.selectedPanel=="task-routine"]]),H(D(g,{class:"item-panel"},null,512),[[Ie,n.selectedPanel=="event"]]),H(D(w,{class:"item-panel"},null,512),[[Ie,n.selectedPanel=="inventory"]]),H(D(_,{class:"item-panel"},null,512),[[Ie,n.selectedPanel=="nutrition"]]),H(D(P,{class:"item-panel"},null,512),[[Ie,n.selectedPanel=="workout"]])])])}const Ry=V(Qj,[["render",wB],["__scopeId","data-v-d341dc11"]]),SB={name:"CalendarWeekMobile",components:{},props:{},data:function(){return{plannerStore:void 0}},created:function(){this.plannerStore=jr()},computed:{initialDate(){return this.selectedDate},daysOfWeek(){let t=lt(this.initialDate),e=[this.getDayObject(t)];for(let i=1;i<7;i++)t=ks(t),e.push(this.getDayObject(t));return e},selectedDate(){return this.plannerStore?this.plannerStore.selectedDate:ft()},currentDate(){return this.plannerStore?ei(this.plannerStore.currentTime):ft()}},methods:{getDayObject(t){return{dateObject:t,dow:A_(t),date:`${O_(t)} ${M_(t)}`}},selectDate(t){this.plannerStore.selectDate(t)},getPointInTime(t){let e=Ne(this.currentDate);if(+t.dateObject<+this.currentDate)return"past";if(+t.dateObject==+this.currentDate)return"present";if(+t.dateObject>+e)return"future"},isSelected(t){return+t.dateObject==+this.selectedDate}}},TB={class:"week-toolbar d-flex flex-row flex-grow-1 justify-content-between"},xB=["onClick"],EB={class:"day"},IB={class:"date"};function DB(t,e,i,s,r,n){return f(),m("div",TB,[(f(!0),m(M,null,N(n.daysOfWeek,(o,a)=>(f(),m("div",{key:a,class:O(["dow d-flex flex-column pt-1 pb-1",[n.getPointInTime(o),{selected:n.isSelected(o)}]]),onClick:l=>n.selectDate(o.dateObject)},[c("span",EB,S(o.dow),1),c("span",IB,S(o.date),1)],10,xB))),128))])}const kB=V(SB,[["render",DB],["__scopeId","data-v-c3bb9d62"]]),CB={name:"DayPillMobile",props:{day:Object},created:async function(){let t=await U(()=>Promise.resolve().then(()=>Et),void 0);this.iterationStore=t.useIterationStore();let e=await U(()=>Promise.resolve().then(()=>He),void 0);this.plannerStore=e.usePlannerStore()},data:function(){return{plannerStore:void 0,iterationStore:void 0}},computed:{date(){return new Date(this.day.date)},selectedDate(){return this.plannerStore?this.plannerStore.selectedDate:it()},isSelected(){return+this.date==+this.selectedDate}},methods:{selectDate:PB}};function PB(t){this.plannerStore.selectDate(t)}function MB(t,e,i,s,r,n){return f(),m("div",{class:O(["day pill d-flex flex-column position-relative",[i.day.pointInTime,n.isSelected?"selected":""]]),onClick:e[0]||(e[0]=o=>n.selectDate(i.day.date))},[c("span",null,S(i.day.day),1),e[1]||(e[1]=c("span",{class:"status position-absolute"},null,-1))],2)}const AB=V(CB,[["render",MB],["__scopeId","data-v-0e8341b0"]]),OB=[{id:1,text:"Sunday",altText:"S"},{id:2,text:"Monday",altText:"M"},{id:3,text:"Tuesday",altText:"T"},{id:4,text:"Wednesday",altText:"W"},{id:5,text:"Thursday",altText:"T"},{id:6,text:"Friday",altText:"F"},{id:7,text:"Saturday",altText:"S"}],RB={components:{IconButton:zn,DayPillMobile:AB},name:"CalendarMobileMonth",props:{},data:function(){return{plannerStore:void 0,initialDate:void 0,weeks:[],days:[],month:"",year:3e3,daysOfWeek:OB,date:null,date_and_time:de,today:it(),count:1}},created:async function(){let t=await U(()=>Promise.resolve().then(()=>He),void 0);this.plannerStore=t.usePlannerStore(),this.initialDate=this.plannerStore.selectedDate,this.initCalendar()},computed:{date1(){return new Date(this.initialDate)},firstDate(){let t=gt(this.date1);return No(t)},lastDate(){let t=xr(this.date1,this.count-1);return t=Ot(t),vt(t)},firstSunday(){let t=gt(this.initialDate);return No(t)},lastSaturday(){return ks(this.firstSunday,this.rows*7-1)},rows(){return L_(this.firstDate,this.lastDate)/7}},methods:{initCalendar:$B,refreshCalendar:NB,month_long:p_,year_long:m_,goToday:LB,addMonth:xr,subtractMonth:Ju,previous:VB,next:WB},watch:{initialDate(){this.refreshCalendar()}}};function $B(){this.days=[],this.month=this.month_long(this.date1),this.year=this.year_long(this.date1),this.weeks=[];let t=this.firstDate;for(let e=0;e<this.rows;e++){let i={days:[]};for(let s=0;s<7;s++){let r={dow:this.date_and_time.format(t,"ddd"),day:t.getDate(),date:new Date(t.getTime()).toLocaleString(),tasks:[],iterationCompletion:{status:"pending"}};z(t).month()<z(this.date1).month()?r.pointInTime="previous-month":this.today.getTime()==t.getTime()?r.pointInTime="present":z(t).month()>z(this.date1).month()&&(r.pointInTime="next-month"),t=z(t).add(1,"day").toDate(),i.days.push(r)}this.weeks.push(i)}}function NB(){this.initCalendar()}function LB(){this.plannerStore.selectDate(this.today),this.initialDate=this.plannerStore.selectedDate}function VB(){this.initialDate=Ju(this.initialDate)}function WB(){this.initialDate=xr(this.initialDate)}const zB={class:"thumbnail-calendar d-flex flex-column"},FB={class:"d-flex flex-row justify-content-between"},jB={class:"d-flex flex-row"},BB={class:"month"},HB={class:"year"},UB={class:"buttons d-flex flex-row"},YB={class:"d-flex flex-row"};function GB(t,e,i,s,r,n){const o=T("icon-button"),a=T("DayPillMobile");return f(),m("div",zB,[c("div",FB,[c("div",jB,[c("div",BB,S(t.month),1),c("div",HB,S(t.year),1)]),c("div",UB,[D(o,{src:"icon/previous.png",width:22,height:22,onClicked:n.previous},null,8,["onClicked"]),c("button",{class:"today",type:"button",onClick:e[0]||(e[0]=(...l)=>n.goToday&&n.goToday(...l))},"Today"),D(o,{src:"icon/next.png",width:22,height:22,onClicked:n.next},null,8,["onClicked"])])]),c("div",YB,[(f(!0),m(M,null,N(t.daysOfWeek,l=>(f(),m("div",{key:l.id,class:"dow pill"},S(l.altText),1))),128))]),(f(!0),m(M,null,N(t.weeks,(l,d)=>(f(),m("div",{key:d,class:"week d-flex flex-row"},[(f(!0),m(M,null,N(l.days,(u,h)=>(f(),K(a,{key:h,day:u,date:u.date},null,8,["day","date"]))),128))]))),128))])}const KB=V(RB,[["render",GB],["__scopeId","data-v-ef5059e1"]]),qB={name:"CalendarMobile",components:{CalendarWeekMobile:kB,CalendarMonthMobile:KB},props:{},data:function(){return{appStore:void 0,CALENDAR_TYPES:{...Yi}}},created:function(){this.appStore=Gt()},computed:{calendarType(){return this.appStore?this.appStore.calendarMobile.type:void 0}},methods:{}};function JB(t,e,i,s,r,n){const o=T("CalendarWeekMobile"),a=T("CalendarMonthMobile");return f(),m("div",{class:O(["calendar-mobile",{week:n.calendarType==t.CALENDAR_TYPES.WEEK,month:n.calendarType==t.CALENDAR_TYPES.MONTH}])},[n.calendarType==t.CALENDAR_TYPES.WEEK?(f(),K(o,{key:0})):y("",!0),n.calendarType==t.CALENDAR_TYPES.MONTH?(f(),K(a,{key:1})):y("",!0)],2)}const QB=V(qB,[["render",JB],["__scopeId","data-v-7898991b"]]),ZB={name:"AppMobile",components:{MobileNavbar:pD,CalendarMobile:QB,ItemPanelTabBar:$D,MobileItemTabPanel:_j,ItemPanel:Ry},data:function(){return{appStore:void 0,initialDate:new Date,selectedDate:it().toLocaleString()}},created:async function(){this.appStore=Gt()},computed:{showTabBar(){return this.appStore?this.appStore.isTabBarShown:!0},showCalendar(){return this.appStore?this.appStore.calendarMobile.isShown:!1}},methods:{},watch:{}},XB={class:"navbar-mobile"},eH={class:"item-panel-tabbar"},tH={class:"tab-panel d-flex"};function iH(t,e,i,s,r,n){const o=T("MobileNavbar"),a=T("CalendarMobile"),l=T("ItemPanelTabBar"),d=T("MobileItemTabPanel"),u=T("ItemPanel");return f(),m("div",{class:O(["app-mobile grid-container-mobile",[{"show-tab-bar":n.showTabBar}]])},[c("div",XB,[D(o)]),c("div",{class:O(["calendar",[{empty:!n.showCalendar}]])},[D(a)],2),c("div",eH,[D(l)]),c("div",tH,[D(d)]),H(D(u,{class:"item-panel"},null,512),[[Ie,!1]])],2)}const sH=V(ZB,[["render",iH],["__scopeId","data-v-336c0bb3"]]);let sc=[{id:1,text:"Week",view:"weekView"},{id:2,text:"Month",view:"monthView"}],nH=[{id:1,text:"One"},{id:2,text:"Two"},{id:3,text:"Three"},{id:4,text:"Four"},{id:5,text:"Five"},{id:7,text:"Week"}];const rH={name:"PlannerNavbar",components:{IconButton:zn},props:{dayCount:Number,selectedView:String,selectedPage:String},data:function(){return{plannerStore:void 0,dayCountt:this.dayCount,views:sc,view:null,weekViews:nH}},created:async function(){this.view=sc.find(e=>e.view==this.selectedView).id;let t=await U(()=>Promise.resolve().then(()=>He),void 0);this.plannerStore=t.usePlannerStore()},computed:{selectedDate(){return this.plannerStore?this.plannerStore.selectedDate:it()}},methods:{previous(){this.plannerStore.selectDate(XE(this.selectedDate,this.dayCount))},next(){this.plannerStore.selectDate(g_(this.selectedDate,this.dayCount))}},watch:{dayCountt(t){this.$emit("dayCountChange",t)},view(t){this.$emit("viewChange",sc.find(e=>e.id==t).view)}}},oH={id:"navbar",class:"navbar navbar-expand-sm navbar-light"},aH={class:"container-fluid d-flex flex-row"},lH={class:"d-flex flex-row"},dH={class:"d-flex flex-row"},cH={class:"d-flex flex-row"},uH={key:0,class:"d-flex flex-row me-5"},hH=["value"],fH=["value"];function mH(t,e,i,s,r,n){const o=T("IconButton");return f(),m("nav",oH,[c("div",aH,[c("div",lH,[c("div",dH,[D(o,{class:"icon menu-button float-left",src:"/icon/menu-button.png",width:48,height:48}),c("img",{class:"icon calendar-button float-left",src:b_,width:36,height:36,onClick:e[0]||(e[0]=a=>t.$emit("toggleLeftPanel"))}),e[6]||(e[6]=c("a",{class:"navbar-brand float-left",href:"#"},"Inventory Planner",-1))]),c("div",cH,[c("button",{class:"btn btn-sm",type:"button",onClick:e[1]||(e[1]=a=>t.$emit("showPage","planner"))},"Planner"),c("button",{class:"btn btn-sm",type:"button",onClick:e[2]||(e[2]=a=>t.$emit("showPage","items"))},"Items"),c("button",{class:"btn btn-sm",type:"button",onClick:e[3]||(e[3]=a=>t.$emit("showPage","physical"))},"Physical")])]),i.selectedPage=="planner"?(f(),m("div",uH,[D(o,{class:"arrow",src:"/icon/previous.png",width:24,height:24,onClicked:n.previous},null,8,["onClicked"]),D(o,{class:"arrow",src:"/icon/next.png",width:24,height:24,onClicked:n.next},null,8,["onClicked"]),H(c("select",{"onUpdate:modelValue":e[4]||(e[4]=a=>t.view=a)},[(f(!0),m(M,null,N(t.views,a=>(f(),m("option",{key:a.id,value:a.id},S(a.text),9,hH))),128))],512),[[is,t.view]]),t.view==1?H((f(),m("select",{key:0,"onUpdate:modelValue":e[5]||(e[5]=a=>t.dayCountt=a)},[(f(!0),m(M,null,N(t.weekViews,a=>(f(),m("option",{key:a.id,value:a.id},S(a.text),9,fH))),128))],512)),[[is,t.dayCountt]]):y("",!0)])):y("",!0)])])}const pH=V(rH,[["render",mH],["__scopeId","data-v-faeea1b6"]]),gH={props:{date:Object,rootDate:Object},created:async function(){let t=await U(()=>Promise.resolve().then(()=>He),void 0);this.plannerStore=t.usePlannerStore()},data:function(){return{plannerStore:void 0}},computed:{selectedDate(){return this.plannerStore?this.plannerStore.selectedDate:it()},today(){return this.plannerStore?qu(this.plannerStore.currentTime):it()},isSelected(){return+this.date==+this.selectedDate},pointInTime(){return this.date.getMonth()<this.rootDate.getMonth()?"previous-month":+this.today==+this.date?"present":z(this.date).month()>z(this.rootDate).month()?"next-month":""}},methods:{selectDate:vH,status:_H,onDrop:yH}};function vH(t){this.plannerStore.selectDate(t)}function _H(t){return new Date(t.datetime).getTime()>it().getTime()?"pending":t.percentComplete>=90?"success":t.percentComplete>=50&&t.percentComplete<90?"close":t.percentComplete<50?"fail":""}function yH(t){t.preventDefault();let e=t.dataTransfer.getData("text");e=JSON.parse(e),e.type&&e.type=="task"&&(e.parentType&&e.parentType=="routineEvent"?console.log("this.unmapTaskFromRoutineEvent(data.id, data.parentID, new Date(this.day.date), null, null, this.$apollo)"):this.iterationStore.rescheduleIteration(e.id,new Date(this.date),new Date(this.date)))}function bH(t,e,i,s,r,n){return f(),m("div",{class:O(["day pill d-flex flex-column position-relative",[n.pointInTime,n.isSelected?"selected":""]]),onClick:e[0]||(e[0]=o=>n.selectDate(i.date)),onDrop:e[1]||(e[1]=o=>n.onDrop(o)),onDragover:e[2]||(e[2]=fe(()=>{},["prevent"])),onDragenter:e[3]||(e[3]=fe(()=>{},["prevent"]))},[c("span",null,S(i.date.getDate()),1),e[4]||(e[4]=c("span",{class:"status position-absolute"},null,-1))],34)}const wH=V(gH,[["render",bH],["__scopeId","data-v-7994a929"]]),SH=[{id:1,text:"Sunday",altText:"S"},{id:2,text:"Monday",altText:"M"},{id:3,text:"Tuesday",altText:"T"},{id:4,text:"Wednesday",altText:"W"},{id:5,text:"Thursday",altText:"T"},{id:6,text:"Friday",altText:"F"},{id:7,text:"Saturday",altText:"S"}],TH={components:{IconButton:zn,DayPill:wH},name:"CalendarMonth",props:{initialDate:Date},data:function(){return{plannerStore:void 0,indexDate:void 0,weeks:[],days:[],month:"",year:3e3,daysOfWeek:SH,date:null,date_and_time:de,today:it(),count:1}},created:async function(){let t=await U(()=>Promise.resolve().then(()=>He),void 0);this.plannerStore=t.usePlannerStore(),this.indexDate=this.initialDate,this.initCalendar()},computed:{date1(){return new Date(this.initialDate)},firstDate(){let t=gt(this.date1);return No(t)},lastDate(){let t=xr(this.date1,this.count-1);return t=Ot(t),vt(t)},firstSunday(){let t=gt(this.initialDate);return No(t)},lastSaturday(){return ks(this.firstSunday,this.rows*7-1)},rows(){return L_(this.firstDate,this.lastDate)/7}},methods:{initCalendar:xH,refreshCalendar:EH,month_long:p_,year_long:m_,goToday:IH,addMonth:xr,subtractMonth:Ju},watch:{initialDate(){this.initCalendar()}}};function xH(){this.days=[],this.month=this.month_long(this.date1),this.year=this.year_long(this.date1),this.weeks=[];let t=this.firstDate;for(let e=0;e<this.rows;e++){let i={days:[]};for(let s=0;s<7;s++)i.days.push(t),t=z(t).add(1,"day").toDate();this.weeks.push(i)}}function EH(){this.initCalendar()}function IH(){this.plannerStore.selectDate(it()),this.refreshCalendar()}const DH={class:"thumbnail-calendar d-flex flex-column"},kH={class:"d-flex flex-row justify-content-between"},CH={class:"d-flex flex-row"},PH={class:"month"},MH={class:"year"},AH={class:"buttons d-flex flex-row"},OH={class:"d-flex flex-row"};function RH(t,e,i,s,r,n){const o=T("icon-button"),a=T("DayPill");return f(),m("div",DH,[c("div",kH,[c("div",CH,[c("div",PH,S(t.month),1),c("div",MH,S(t.year),1)]),c("div",AH,[D(o,{src:"icon/previous.png",width:22,height:22,onClicked:e[0]||(e[0]=l=>t.$emit("previous"))}),c("button",{class:"today",type:"button",onClick:e[1]||(e[1]=(...l)=>n.goToday&&n.goToday(...l))},"Today"),D(o,{src:"icon/next.png",width:22,height:22,onClicked:e[2]||(e[2]=l=>t.$emit("next"))})])]),c("div",OH,[(f(!0),m(M,null,N(t.daysOfWeek,l=>(f(),m("div",{key:l.id,class:"dow pill"},S(l.altText),1))),128))]),(f(!0),m(M,null,N(t.weeks,(l,d)=>(f(),m("div",{key:d,class:"week d-flex flex-row"},[(f(!0),m(M,null,N(l.days,(u,h)=>(f(),K(a,{key:h,date:u,rootDate:n.date1},null,8,["date","rootDate"]))),128))]))),128))])}const $H=V(TH,[["render",RH],["__scopeId","data-v-d336e1b6"]]),NH={name:"ThumbnailCalendar",components:{CalendarMonth:$H},props:{initialDate:Date},data:function(){return{plannerStore:void 0,date:this.initialDate,monthCount:1}},created:async function(){let t=await U(()=>Promise.resolve().then(()=>He),void 0);this.plannerStore=t.usePlannerStore()},computed:{selectedDate(){return this.plannerStore?this.plannerStore.selectedDate:ft()},months(){let t=[];t.push(new Date(this.date));for(let e=1;e<this.monthCount;e++)t.push(Nd(this.date,e));return t}},methods:{previousMonth(){this.date=Nd(this.date,-1)},nextMonth(){this.date=Nd(this.date,1)},addMonth(){this.monthCount++},subtractMonth(){this.monthCount--}},watch:{selectedDate(){this.date=this.selectedDate}}},LH={class:"thumbnail-calendar d-flex flex-column"};function VH(t,e,i,s,r,n){const o=T("CalendarMonth");return f(),m("div",LH,[(f(!0),m(M,null,N(n.months,(a,l)=>(f(),K(o,{key:l,class:"mt-2",initialDate:a,onPrevious:n.previousMonth,onNext:n.nextMonth},null,8,["initialDate","onPrevious","onNext"]))),128))])}const WH=V(NH,[["render",VH]]),zH={name:"TypePoints",props:{item:Object,level:Number,iterations:Array},data:function(){return{todoStore:void 0}},created:async function(){let t=await U(()=>Promise.resolve().then(()=>Oi),void 0);this.todoStore=t.useTodoStore()},computed:{points(){if(this.todoStore==null)return 0;if(this.item.type=="iteration")return this.iterations.filter(s=>s.attemptedAt!=null||s.completedAt!=null).filter(s=>s.points!=null).reduce((s,r)=>s+r.points,0);if(["type","goal","metric"].includes(this.item.type)){let e=this;var t=[];return this.iterations.filter(s=>s.attemptedAt!=null||s.completedAt!=null).forEach(s=>{s.todoID&&e.isTodoOfType(s,s.todoID,t)}),t.filter(s=>s.points!=null).reduce((s,r)=>s+r.points,0)}return 10}},methods:{isTodoOfType(t,e,i){let s=this;if(e){var r=this.todoStore.getItem(e);if(r){var n=r[`${s.item.type}s`].map(a=>a.id);let o=!1;if(this.item.id)o=n.includes(this.item.id);else if(this.item.ids)for(let a=0;a<this.item.ids.length&&!o;a++)o=n.includes(this.item.ids[a]);if(o){i.push(t);return}else r.parents.forEach(a=>{s.isTodoOfType(t,a.id,i)})}}}}},FH={class:"d-flex flex-row flex-grow-1"},jH={key:0,class:"d-flex flex-row justify-content-between flex-grow-1 pe-2"},BH={key:1,class:"points"},HH={key:0,class:"d-flex flex-column"};function UH(t,e,i,s,r,n){const o=T("TypePoints",!0);return f(),m("div",{class:"d-flex flex-column",onClick:e[0]||(e[0]=fe(a=>i.item.isExpanded=!i.item.isExpanded,["prevent","stop"]))},[c("div",FH,[c("span",{class:"label",style:ue({"padding-left":`${i.level*10}px`})},S(i.item.label),5),i.item.showPoints?(f(),m("div",jH,[c("span",{class:"dot",style:ue({"background-color":i.item.color||"gray"})},null,4),c("span",{class:"dot",style:ue({"background-color":i.item.color||"gray"})},null,4)])):y("",!0),i.item.showPoints?(f(),m("span",BH,S(n.points),1)):y("",!0)]),i.item.isExpanded?(f(),m("div",HH,[(f(!0),m(M,null,N(i.item.items,(a,l)=>(f(),K(o,{key:l,item:a,level:i.level+1,iterations:i.iterations},null,8,["item","level","iterations"]))),128))])):y("",!0)])}const YH=V(zH,[["render",UH],["__scopeId","data-v-193ace89"]]),GH={name:"TimeframePoints",components:{TypePoints:YH},props:{selectedDate:Date},data:function(){return{iterationStore:void 0,items:[{category:"All",label:"All",type:"iteration",color:"#FC3B3B",showPoints:!0,isExpanded:!1,id:void 0,ids:void 0,items:[{category:"Main",label:"Main",type:"label",color:void 0,showPoints:!1,isExpanded:!1,items:[{type:"type",color:"#FC3B3B",id:155,ids:void 0,label:"Nutrition",showPoints:!0,isExpanded:!1},{type:"type",color:"#F4511E",id:158,ids:void 0,label:"Exercise",showPoints:!0,isExpanded:!1},{type:"goal",color:"#4C6EF5",id:80,ids:void 0,label:"Dance",showPoints:!0,isExpanded:!1},{type:"goal",color:"#1EBA31",id:48,ids:void 0,label:"Coach",showPoints:!0,isExpanded:!1}]},{category:"Metrics",label:"Metrics",type:"metric",showPoints:!1,isExpanded:!1,id:void 0,ids:[1,2,3,4,5],items:[{type:"metric",color:"#3B99FC",id:1,ids:void 0,label:"Physical",showPoints:!0,isExpanded:!1},{type:"metric",color:"#FC3B3B",id:2,ids:void 0,label:"Social",showPoints:!0,isExpanded:!1},{type:"metric",color:"#F4511E",id:3,ids:void 0,label:"Mental",showPoints:!0,isExpanded:!1},{type:"metric",color:"#4C6EF5",id:4,ids:void 0,label:"Emotional",showPoints:!0,isExpanded:!1},{type:"metric",color:"#1EBA31",id:5,ids:void 0,label:"Financial",showPoints:!0,isExpanded:!1}]}]}]}},created:async function(){let t=await U(()=>Promise.resolve().then(()=>Et),void 0);this.iterationStore=t.useIterationStore()},computed:{start(){return lt(this.selectedDate)},end(){return vt(this.selectedDate)},iterations(){let t=[];return this.iterationStore&&(t=this.iterationStore.iterations,t=t.filter(e=>+new Date(e.startAt)>=+this.start&&+new Date(e.endAt)<=+this.end)),t}}},KH={class:"timeframe-points d-flex flex-column"},qH={class:"d-flex flex-column"};function JH(t,e,i,s,r,n){const o=T("TypePoints");return f(),m("div",KH,[c("div",qH,[(f(!0),m(M,null,N(t.items,(a,l)=>(f(),K(o,{key:l,item:a,level:0,iterations:n.iterations},null,8,["item","iterations"]))),128))])])}const QH=V(GH,[["render",JH],["__scopeId","data-v-3f3843e6"]]),ZH="/avatar/Avatar%20(Blue%20Underwear).jpg",XH={name:"AvatarPanel",components:{},props:{},data:function(){return{}},created:function(){},methods:{}};function e8(t,e,i,s,r,n){return f(),m("div",null,e[0]||(e[0]=[c("img",{src:ZH,width:"140"},null,-1)]))}const t8=V(XH,[["render",e8]]),i8={name:"LeftPanel",components:{ThumbnailCalendar:WH,AvatarPanel:t8,TimeframePoints:QH},props:{isShown:{default:!0,type:Boolean}},data:function(){return{plannerStore:void 0,firstDay:z().date(1).hour(0).minute(0).second(0).millisecond(0).toDate()}},created:async function(){let t=await U(()=>Promise.resolve().then(()=>He),void 0);this.plannerStore=t.usePlannerStore()},computed:{selectedDate(){return this.plannerStore?this.plannerStore.selectedDate:ft()}},methods:{}};function s8(t,e,i,s,r,n){const o=T("ThumbnailCalendar"),a=T("TimeframePoints"),l=T("AvatarPanel");return f(),m("div",{class:O(["left-panel d-flex flex-column mt-1 overflow-scroll",{close:!i.isShown}])},[D(o,{initialDate:t.firstDay},null,8,["initialDate"]),D(a,{selectedDate:n.selectedDate},null,8,["selectedDate"]),D(l)],2)}const n8=V(i8,[["render",s8],["__scopeId","data-v-c216bcec"]]);var oi=typeof window<"u"?window:null,wh=oi===null,jo=wh?void 0:oi.document,Si="addEventListener",Ti="removeEventListener",nc="getBoundingClientRect",no="_a",xi="_b",cs="_c",Aa="horizontal",Ei=function(){return!1},r8=wh?"calc":["","-webkit-","-moz-","-o-"].filter(function(t){var e=jo.createElement("div");return e.style.cssText="width:"+t+"calc(9px)",!!e.style.length}).shift()+"calc",$y=function(t){return typeof t=="string"||t instanceof String},Jm=function(t){if($y(t)){var e=jo.querySelector(t);if(!e)throw new Error("Selector "+t+" did not match a DOM element");return e}return t},Dt=function(t,e,i){var s=t[e];return s!==void 0?s:i},Oa=function(t,e,i,s){if(e){if(s==="end")return 0;if(s==="center")return t/2}else if(i){if(s==="start")return 0;if(s==="center")return t/2}return t},o8=function(t,e){var i=jo.createElement("div");return i.className="gutter gutter-"+e,i},a8=function(t,e,i){var s={};return $y(e)?s[t]=e:s[t]=r8+"("+e+"% - "+i+"px)",s},l8=function(t,e){var i;return i={},i[t]=e+"px",i},Ny=function(t,e){if(e===void 0&&(e={}),wh)return{};var i=t,s,r,n,o,a,l;Array.from&&(i=Array.from(i));var d=Jm(i[0]),u=d.parentNode,h=getComputedStyle?getComputedStyle(u):null,p=h?h.flexDirection:null,g=Dt(e,"sizes")||i.map(function(){return 100/i.length}),w=Dt(e,"minSize",100),_=Array.isArray(w)?w:i.map(function(){return w}),P=Dt(e,"maxSize",1/0),k=Array.isArray(P)?P:i.map(function(){return P}),R=Dt(e,"expandToMin",!1),$=Dt(e,"gutterSize",10),A=Dt(e,"gutterAlign","center"),Z=Dt(e,"snapOffset",30),le=Dt(e,"dragInterval",1),te=Dt(e,"direction",Aa),ie=Dt(e,"cursor",te===Aa?"col-resize":"row-resize"),ae=Dt(e,"gutter",o8),pe=Dt(e,"elementStyle",a8),ke=Dt(e,"gutterStyle",l8);te===Aa?(s="width",r="clientX",n="left",o="right",a="clientWidth"):te==="vertical"&&(s="height",r="clientY",n="top",o="bottom",a="clientHeight");function Oe(x,I,C,B){var ye=pe(s,I,C,B);Object.keys(ye).forEach(function(v){x.style[v]=ye[v]})}function Me(x,I,C){var B=ke(s,I,C);Object.keys(B).forEach(function(ye){x.style[ye]=B[ye]})}function Ze(){return l.map(function(x){return x.size})}function st(x){return"touches"in x?x.touches[0][r]:x[r]}function we(x){var I=l[this.a],C=l[this.b],B=I.size+C.size;I.size=x/this.size*B,C.size=B-x/this.size*B,Oe(I.element,I.size,this[xi],I.i),Oe(C.element,C.size,this[cs],C.i)}function ce(x){var I,C=l[this.a],B=l[this.b];this.dragging&&(I=st(x)-this.start+(this[xi]-this.dragOffset),le>1&&(I=Math.round(I/le)*le),I<=C.minSize+Z+this[xi]?I=C.minSize+this[xi]:I>=this.size-(B.minSize+Z+this[cs])&&(I=this.size-(B.minSize+this[cs])),I>=C.maxSize-Z+this[xi]?I=C.maxSize+this[xi]:I<=this.size-(B.maxSize-Z+this[cs])&&(I=this.size-(B.maxSize+this[cs])),we.call(this,I),Dt(e,"onDrag",Ei)(Ze()))}function Se(){var x=l[this.a].element,I=l[this.b].element,C=x[nc](),B=I[nc]();this.size=C[s]+B[s]+this[xi]+this[cs],this.start=C[n],this.end=C[o]}function et(x){if(!getComputedStyle)return null;var I=getComputedStyle(x);if(!I)return null;var C=x[a];return C===0?null:(te===Aa?C-=parseFloat(I.paddingLeft)+parseFloat(I.paddingRight):C-=parseFloat(I.paddingTop)+parseFloat(I.paddingBottom),C)}function dt(x){var I=et(u);if(I===null||_.reduce(function(v,b){return v+b},0)>I)return x;var C=0,B=[],ye=x.map(function(v,b){var E=I*v/100,L=Oa($,b===0,b===x.length-1,A),F=_[b]+L;return E<F?(C+=F-E,B.push(0),F):(B.push(E-F),E)});return C===0?x:ye.map(function(v,b){var E=v;if(C>0&&B[b]-C>0){var L=Math.min(C,B[b]-C);C-=L,E=v-L}return E/I*100})}function ct(){var x=this,I=l[x.a].element,C=l[x.b].element;x.dragging&&Dt(e,"onDragEnd",Ei)(Ze()),x.dragging=!1,oi[Ti]("mouseup",x.stop),oi[Ti]("touchend",x.stop),oi[Ti]("touchcancel",x.stop),oi[Ti]("mousemove",x.move),oi[Ti]("touchmove",x.move),x.stop=null,x.move=null,I[Ti]("selectstart",Ei),I[Ti]("dragstart",Ei),C[Ti]("selectstart",Ei),C[Ti]("dragstart",Ei),I.style.userSelect="",I.style.webkitUserSelect="",I.style.MozUserSelect="",I.style.pointerEvents="",C.style.userSelect="",C.style.webkitUserSelect="",C.style.MozUserSelect="",C.style.pointerEvents="",x.gutter.style.cursor="",x.parent.style.cursor="",jo.body.style.cursor=""}function nt(x){if(!("button"in x&&x.button!==0)){var I=this,C=l[I.a].element,B=l[I.b].element;I.dragging||Dt(e,"onDragStart",Ei)(Ze()),x.preventDefault(),I.dragging=!0,I.move=ce.bind(I),I.stop=ct.bind(I),oi[Si]("mouseup",I.stop),oi[Si]("touchend",I.stop),oi[Si]("touchcancel",I.stop),oi[Si]("mousemove",I.move),oi[Si]("touchmove",I.move),C[Si]("selectstart",Ei),C[Si]("dragstart",Ei),B[Si]("selectstart",Ei),B[Si]("dragstart",Ei),C.style.userSelect="none",C.style.webkitUserSelect="none",C.style.MozUserSelect="none",C.style.pointerEvents="none",B.style.userSelect="none",B.style.webkitUserSelect="none",B.style.MozUserSelect="none",B.style.pointerEvents="none",I.gutter.style.cursor=ie,I.parent.style.cursor=ie,jo.body.style.cursor=ie,Se.call(I),I.dragOffset=st(x)-I.end}}g=dt(g);var mt=[];l=i.map(function(x,I){var C={element:Jm(x),size:g[I],minSize:_[I],maxSize:k[I],i:I},B;if(I>0&&(B={a:I-1,b:I,dragging:!1,direction:te,parent:u},B[xi]=Oa($,I-1===0,!1,A),B[cs]=Oa($,!1,I===i.length-1,A),p==="row-reverse"||p==="column-reverse")){var ye=B.a;B.a=B.b,B.b=ye}if(I>0){var v=ae(I,te,C.element);Me(v,$,I),B[no]=nt.bind(B),v[Si]("mousedown",B[no]),v[Si]("touchstart",B[no]),u.insertBefore(v,C.element),B.gutter=v}return Oe(C.element,C.size,Oa($,I===0,I===i.length-1,A),I),I>0&&mt.push(B),C});function It(x){var I=x.i===mt.length,C=I?mt[x.i-1]:mt[x.i];Se.call(C);var B=I?C.size-x.minSize-C[cs]:x.minSize+C[xi];we.call(C,B)}l.forEach(function(x){var I=x.element[nc]()[s];I<x.minSize&&(R?It(x):x.minSize=I)});function Nt(x){var I=dt(x);I.forEach(function(C,B){if(B>0){var ye=mt[B-1],v=l[ye.a],b=l[ye.b];v.size=I[B-1],b.size=C,Oe(v.element,v.size,ye[xi],v.i),Oe(b.element,b.size,ye[cs],b.i)}})}function ut(x,I){mt.forEach(function(C){if(I!==!0?C.parent.removeChild(C.gutter):(C.gutter[Ti]("mousedown",C[no]),C.gutter[Ti]("touchstart",C[no])),x!==!0){var B=pe(s,C.a.size,C[xi]);Object.keys(B).forEach(function(ye){l[C.a].element.style[ye]="",l[C.b].element.style[ye]=""})}})}return{setSizes:Nt,getSizes:Ze,collapse:function(I){It(l[I])},destroy:ut,parent:u,pairs:mt}};const d8={name:"WeekView",components:{TaskList:oh,DayPoints:G_,HourBlocks:K_},props:{dayCount:Number},data:function(){return{padding:60,days:[],dayModels:[],date:de,maxTasks:0,width:0,grid:"",hour:{hours:[],labelWidth:50,blockHeight:48},events:[],tasks:[],firstDay:null,lastDay:null,plannerStore:void 0,eventStore:void 0,iterationStore:void 0}},created:async function(){let t=await U(()=>Promise.resolve().then(()=>$s),void 0);this.eventStore=t.useEventStore();let e=await U(()=>Promise.resolve().then(()=>Et),void 0);this.iterationStore=e.useIterationStore();let i=await U(()=>Promise.resolve().then(()=>He),void 0);this.plannerStore=i.usePlannerStore(),this.plannerStore.startClock()},beforeMount:function(){},mounted:function(){this.width=this.$refs.weekView.clientWidth,this.initHours()},computed:{selectedDate(){return this.plannerStore?this.plannerStore.selectedDate:this.today},today(){return ft()},startAt(){return lt(this.selectedDate)},endAt(){return vt(this.selectedDate)}},methods:{initHours:c8,initTimeline:u8,newDay:h8,replaceItem:Ai,removeItem:Fr,getHoursObjectArray:ah,onScroll:f8,taskList(t){return t.tasks.filter(e=>!e.isInEvent)},selectDate(t){this.plannerStore.selectDate(t)}},watch:{dayCount(){this.initTimeline()},selectedDate(){this.initTimeline(),this.eventStore.getEvents(this.startAt,this.endAt,!0),this.iterationStore.getIterationsInRange(this.startAt,this.endAt,!0)}}};function c8(){this.hour.hours=this.getHoursObjectArray()}function u8(){let t=this.dayCount==7?lt(this.selectedDate):new Date(this.selectedDate);this.firstDay=new Date(t),this.days=[];let e=[];for(let i=0;i<this.dayCount;i++)this.days.push(t),e.push(this.newDay(t)),t=ks(t,1);this.lastDay=new Date(t),this.dayModels=e}function h8(t){let e=this.tasks.filter(s=>new Date(s.startAt).toDateString()==t.toDateString()&&(s.endAt==null||new Date(s.endAt).toDateString()==t.toDateString()));e=e.filter(s=>s.events.length==0);let i="";return t<this.today?i="past":+t==+this.today?i="present":t>this.today&&(i="future"),{dow:de.format(t,"ddd"),day:de.format(t,"D"),date:new Date(t.getTime()),dateString:t.toDateString(),tasks:e,pointInTime:i,isSelected:+t==+this.selectedDate}}function f8(){}const m8={class:"d-flex h-100"},p8=["onClick"],g8={class:"dow"},v8={class:"date-icon"},_8={class:"body d-flex h-100 overflow-scroll"},y8={key:0},b8={class:"hour-label"};function w8(t,e,i,s,r,n){const o=T("TaskList"),a=T("DayPoints"),l=T("HourBlocks");return f(),m("div",m8,[c("div",{class:"week-view d-flex flex-column h-100 w-100",ref:"weekView",style:ue({"min-width":`${64*i.dayCount}px`})},[c("div",{class:"header d-flex",style:ue({"padding-left":`${t.hour.labelWidth}px`})},[(f(!0),m(M,null,N(t.dayModels,(d,u)=>(f(),m("div",{key:u,class:O(["head day-view d-flex flex-column flex-grow-1 h-100",[d.pointInTime,{selected:d.isSelected}]]),style:{"flex-basis":0}},[c("div",{class:"date-label cursor-default d-flex flex-column justify-content-between",onClick:h=>n.selectDate(d.date)},[c("div",g8,S(d.dow),1),c("div",v8,S(d.day),1)],8,p8),D(o,{date:d.date,taskList:n.taskList(d)},null,8,["date","taskList"]),D(a,{date:d.date},null,8,["date"])],2))),128))],4),c("div",_8,[c("div",{class:"hour-labels overflow-hidden",style:ue({"min-width":`${t.hour.labelWidth}px`,height:"fit-content"})},[(f(!0),m(M,null,N(t.hour.hours,(d,u)=>(f(),m("div",{key:u,style:ue({"min-height":`${t.hour.blockHeight}px`})},[u!=0?(f(),m("div",y8,[c("p",b8,S(d.twelveHourString),1)])):y("",!0)],4))),128))],4),t.dayModels.length>0?(f(),m("div",{key:0,class:"hour-blocks d-flex w-100 overflow-hidden",ref:"hourBlocks",style:{height:"fit-content"},onScroll:e[1]||(e[1]=(...d)=>n.onScroll&&n.onScroll(...d))},[(f(!0),m(M,null,N(t.dayModels,(d,u)=>(f(),K(l,{key:u,class:"day-view flex-grow-1",date:d.date,style:{"flex-basis":0},blockHeight:t.hour.blockHeight,onSelectEvent:e[0]||(e[0]=h=>t.$emit("selectEvent",h))},null,8,["date","blockHeight"]))),128))],544)):y("",!0)])],4)])}const S8=V(d8,[["render",w8],["__scopeId","data-v-6958958f"]]),T8={name:"MonthView",components:{TaskList:oh},props:{},data:function(){return{plannerStore:void 0,rows:5,weeks:[],weekModels:[],moment:z,date:de,today:ft(),maxTasks:6}},beforeMount:function(){this.initTimeline()},created:async function(){let t=await U(()=>Promise.resolve().then(()=>He),void 0);this.plannerStore=t.usePlannerStore()},computed:{dayWidth(){return this.$refs.monthView.clientWidth/7},dayHeight(){return this.$refs.monthView.clientHeight},selectedDate(){return this.plannerStore?this.plannerStore.selectedDate:ft()}},methods:{initTimeline:x8},watch:{selectedDate(){this.initTimeline()}}};function x8(){let t=gt(this.selectedDate),e=No(t);this.weeks=[];let i=e;for(let s=0;s<this.rows;s++){let r={days:[]};for(let n=0;n<7;n++){let o={dow:this.date.format(i,"ddd"),day:i.getDate(),date:new Date(i.getTime()),tasks:[]};i.getTime()<this.selectedDate.getTime()?o.pointInTime="past":i.getTime()==this.selectedDate.getTime()?o.pointInTime="present":i.getTime()>this.selectedDate.getTime()&&(o.pointInTime="future"),i=this.moment(i).add(1,"day").toDate(),r.days.push(o)}this.weeks.push(r)}}const E8={class:"month d-flex flex-column d-flex flex-column",ref:"monthView"},I8={class:"head d-flex flex-column"},D8={class:"date-label d-flex flex-column justify-content-between"},k8={key:0,class:"dow"},C8={class:"date-icon"};function P8(t,e,i,s,r,n){const o=T("TaskList");return f(),m("div",E8,[(f(!0),m(M,null,N(t.weeks,(a,l)=>(f(),m("div",{key:l,class:O(["week d-flex flex-row",{first:l==0}])},[(f(!0),m(M,null,N(a.days,(d,u)=>(f(),m("div",{key:u,class:O(["day d-flex flex-column flex-fill",d.pointInTime])},[c("div",I8,[c("div",D8,[l==0?(f(),m("div",k8,S(d.dow),1)):y("",!0),c("div",C8,S(d.day),1)])]),D(o,{date:d.date,taskList:d.tasks},null,8,["date","taskList"])],2))),128))],2))),128))],512)}const M8=V(T8,[["render",P8],["__scopeId","data-v-3c45acbd"]]),A8={name:"Planner",components:{WeekView:S8,MonthView:M8},props:{dayCount:Number,selectedView:String},data:function(){return{split:null,selectedPage:"items",today:it()}},mounted:function(){},created:function(){},methods:{initSplit:O8},watch:{dayCount(t){localStorage.setItem("week-view-day-count",t)}}};function O8(){let t=localStorage.getItem("planner-split-sizes");t&&(t=JSON.parse(t)),this.split=Ny(["#left-and-body","#right"],{sizes:t,minSize:[296,296],onDragEnd:e=>localStorage.setItem("planner-split-sizes",JSON.stringify(e))})}const R8={class:"planner row g-0 h-100"},$8={id:"left-and-body",class:"col h-100"},N8={class:"left-wrapper row h-100 g-0"},L8={class:"col d-flex flex-row h-100"},V8={class:"body overflow-auto h-100"};function W8(t,e,i,s,r,n){const o=T("WeekView"),a=T("MonthView");return f(),m("div",R8,[c("div",$8,[c("div",N8,[c("div",L8,[c("div",V8,[i.selectedView=="weekView"?(f(),K(o,{key:0,dayCount:i.dayCount,onSelectEvent:e[0]||(e[0]=l=>t.$emit("selectEvent",l))},null,8,["dayCount"])):y("",!0),i.selectedView=="monthView"?(f(),K(a,{key:1,today:t.today},null,8,["today"])):y("",!0)])])])])])}const Ly=V(A8,[["render",W8],["__scopeId","data-v-ec60dd49"]]);let z8={itemType:"metric",props:[{id:1,name:"ID",prop:"id",type:"int",isColumn:!0},{id:2,name:"Name",prop:"text",type:"string",isColumn:!0},{id:3,name:"Description",prop:"description",type:"blurd",isColumn:!0},{id:4,name:"Goals",prop:"goals",queryField:"goals",type:"objects",isItem:!0,isColumn:!0,icon:"/icon/goal-icon.png"},{id:5,name:"Routines",prop:"routines",queryField:"routines",type:"objects",isItem:!0,isColumn:!0,icon:"/icon/routine-icon.png"},{id:6,name:"Todos",prop:"todos",queryField:"todos",type:"objects",isItem:!0,isColumn:!0,icon:"/icon/task-icon.png"}],itemModel:{text:"",description:"",parents:[],children:[],goals:[],todos:[],routines:[]}},F8={itemType:"goal",properties:[{id:0,text:"Order",position:1,isSelected:!0},{id:1,text:"ID",position:2,isSelected:!0},{id:2,text:"Text",position:3,isSelected:!0},{id:3,text:"Description",position:4,isSelected:!0},{id:4,text:"Time",position:5,isSelected:!0},{id:5,text:"Repeat",position:6,isSelected:!0},{id:6,text:"Type",position:7,isSelected:!1},{id:7,text:"Parents",position:8,isSelected:!0},{id:8,text:"Children",position:9,isSelected:!0},{id:9,text:"Metrics",position:10,isSelected:!0},{id:10,text:"Goals",position:11,isSelected:!1},{id:11,text:"Todos",position:12,isSelected:!0},{id:12,position:13,text:"Routines",isSelected:!0},{id:13,position:14,text:"Iterations",isSelected:!1},{id:14,text:"Events",position:15,isSelected:!1}],props:[{id:1,name:"ID",prop:"id",type:"int",isColumn:!0},{id:2,name:"Name",prop:"text",type:"string",isColumn:!0},{id:3,name:"Description",prop:"description",type:"blurd",isColumn:!0},{id:4,name:"Parents",prop:"parents",queryField:"goals",type:"objects",isItem:!0,isColumn:!0,icon:"/icon/parent-icon.png"},{id:5,name:"Children",prop:"children",queryField:"goals",type:"objects",isItem:!0,isColumn:!0,icon:"/icon/child-icon.png"},{id:6,name:"Metrics",prop:"metrics",queryField:"metrics",type:"objects",isItem:!0,isColumn:!0},{id:7,name:"Todos",prop:"todos",queryField:"todos",type:"objects",isItem:!0,isColumn:!0,icon:"/icon/task-icon.png"},{id:8,name:"Routines",prop:"routines",queryField:"routines",type:"objects",isItem:!0,isColumn:!0,icon:"/icon/routine-icon.png"}],itemModel:{__typename:"Goal",text:"",description:null,parents:[],children:[],metrics:[],todos:[],routines:[]}},j8={itemType:"routine",props:[{id:1,name:"ID",prop:"id",queryField:"id",type:"int",isColumn:!0},{id:2,name:"Name",prop:"text",queryField:"text",type:"string",isColumn:!0},{id:3,name:"Description",prop:"description",queryField:"description",type:"blurd",isColumn:!0},{id:4,name:"Parents",prop:"parents",queryField:"routines",type:"objects",isItem:!0,isColumn:!0,icon:"/icon/parent-icon.png"},{id:5,name:"Children",prop:"children",queryField:"rouitnes",type:"objects",isItem:!0,isColumn:!0,icon:"/icon/child-icon.png"},{id:6,name:"Metrics",prop:"metrics",queryField:"metrics",type:"objects",isItem:!0,isColumn:!0},{id:7,name:"Goals",prop:"goals",queryField:"goals",type:"objects",isItem:!0,isColumn:!0,icon:"/icon/goal-icon.png"},{id:8,name:"Todos",prop:"todos",queryField:"todos",type:"objects",isItem:!0,isColumn:!0,icon:"/icon/task-icon.png"},{id:9,name:"Repeats",prop:"repeats",queryField:"repeats",type:"objects",isItem:!1,isColumn:!1}],itemModel:{text:"",description:null,parents:[],children:[],metrics:[],goals:[],todos:[],repeats:[]}};var Yo;class Ra{constructor(e){Xh(this,Yo);this.itemType=e.itemType,this.props=e.props,this.query=e.query,ef(this,Yo,e.itemModel),e.addItem&&(this.addItem=e.addItem),e.updateItem&&(this.updateItem=e.updateItem),e.deleteItem&&(this.deleteItem=e.deleteItem)}get name(){return this.itemType.charAt(0).toUpperCase()+this.itemType.slice(1)}get namePlural(){return`${this.name}s`}get icon(){return["goal","todo","routine"].includes(this.itemType)?`${this.itemType}-icon.png`:null}get table(){return{columns:this.props.filter(e=>e.isColumn)}}newItem(){return q(Zh(this,Yo))}}Yo=new WeakMap;let B8=[{id:0,text:"Order",position:1,isSelected:!0},{id:1,text:"ID",position:2,isSelected:!0},{id:2,text:"Text",position:3,isSelected:!0},{id:3,text:"Description",position:4,isSelected:!0},{id:10,text:"Goals",position:11,isSelected:!0},{id:11,text:"Todos",position:12,isSelected:!0},{id:12,position:13,text:"Routines",isSelected:!0}],H8=[{id:0,text:"Order",position:1,isSelected:!0},{id:1,text:"ID",position:2,isSelected:!0},{id:2,text:"Text",position:3,isSelected:!0},{id:3,text:"Description",position:4,isSelected:!0},{id:4,text:"Time",position:5,isSelected:!0},{id:5,text:"Repeat",position:6,isSelected:!0},{id:6,text:"Type",position:7,isSelected:!1},{id:7,text:"Parents",position:8,isSelected:!0},{id:8,text:"Children",position:9,isSelected:!0},{id:9,text:"Metrics",position:10,isSelected:!0},{id:11,text:"Todos",position:12,isSelected:!0},{id:12,position:13,text:"Routines",isSelected:!0}],U8=[{id:0,text:"Order",position:1,isSelected:!0},{id:1,text:"ID",position:2,isSelected:!0},{id:2,text:"Text",position:3,isSelected:!0},{id:3,text:"Description",position:4,isSelected:!0},{id:4,text:"Time",position:5,isSelected:!0},{id:5,text:"Repeat",position:6,isSelected:!0},{id:6,text:"Type",position:7,isSelected:!1},{id:7,text:"Parents",position:8,isSelected:!0},{id:8,text:"Children",position:9,isSelected:!0},{id:9,text:"Metrics",position:10,isSelected:!0},{id:10,text:"Goals",position:11,isSelected:!0},{id:12,position:13,text:"Routines",isSelected:!0},{id:13,position:14,text:"Iterations",isSelected:!1},{id:14,text:"Events",position:15,isSelected:!1}],Y8=[{id:0,text:"Order",position:1,isSelected:!0},{id:1,text:"ID",position:2,isSelected:!0},{id:2,text:"Text",position:3,isSelected:!0},{id:3,text:"Description",position:4,isSelected:!0},{id:4,text:"Time",position:5,isSelected:!0},{id:5,text:"Repeat",position:6,isSelected:!0},{id:6,text:"Type",position:7,isSelected:!1},{id:9,text:"Metrics",position:10,isSelected:!0},{id:10,text:"Goals",position:11,isSelected:!0},{id:11,text:"Todos",position:12,isSelected:!0},{id:13,position:14,text:"Iterations",isSelected:!1},{id:14,text:"Events",position:15,isSelected:!1}],G8={metricProperties:B8,goalProperties:H8,todoProperties:U8,routineProperties:Y8};const K8={name:"ItemTableColumnOptions",props:{itemType:String},data:function(){return{properties:null}},created:function(){let e=G8[`${this.itemType.toLowerCase()}Properties`].filter(r=>r.text.toLowerCase()!=`${this.itemType.toLowerCase()}s`);var i=`${this.itemType.toLowerCase()}-table-props-new`,s=localStorage.getItem(i);s?this.properties=JSON.parse(s):(localStorage.setItem(i,JSON.stringify(e)),this.properties=e),this.onOptionChanged()},methods:{onOptionChanged:q8}};function q8(){localStorage.setItem(`${this.itemType.toLowerCase()}-table-props`,JSON.stringify(this.properties));var t=xe(this.properties.filter(i=>i.isSelected==!0),"position");let e=t.map(i=>i.text);this.$emit("setColumns",e)}const J8={class:"column-options"},Q8={class:"d-flex flex-row"},Z8=["onUpdate:modelValue"];function X8(t,e,i,s,r,n){return f(),m("ul",J8,[(f(!0),m(M,null,N(t.properties.filter(o=>o.text.toLowerCase()!=`${i.itemType.toLowerCase()}s`),o=>(f(),m("li",{key:o.id},[c("div",Q8,[e[1]||(e[1]=c("i",{class:"fa-solid fa-grip-dots-vertical"},null,-1)),H(c("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":a=>o.isSelected=a,onChange:e[0]||(e[0]=(...a)=>n.onOptionChanged&&n.onOptionChanged(...a))},null,40,Z8),[[ci,o.isSelected]]),c("span",null,S(o.text),1)])]))),128))])}const e3=V(K8,[["render",X8],["__scopeId","data-v-ec1b5af0"]]),Nn="/icon/button/add.png";let t3=[{id:1,text:"None"},{id:2,text:"Metric"},{id:3,text:"Timeframe"},{id:4,text:"Type"}];const i3={components:{ItemTableColumnOptions:e3},name:"ItemTableToolbar",props:{itemType:String},data:function(){return{sortBy:null,sortOptions:t3,showColumnOptions:!1,searchTerm:""}},created:function(){this.sortBy="None"},watch:{sortBy(t){this.$emit("setSortBy",t)},searchTerm(t){this.$emit("setSearchTerm",t)}}},s3={class:"toolbar d-flex flex-row justify-content-between align-content-center"},n3={class:"left d-flex align-content-center"},r3={class:"right d-flex flex-row"},o3={class:"column-options"},a3=["value"];function l3(t,e,i,s,r,n){const o=T("ItemTableColumnOptions");return f(),m("div",s3,[c("div",n3,[H(c("input",{class:"search textbox",type:"text",placeholder:"Search","onUpdate:modelValue":e[0]||(e[0]=a=>t.searchTerm=a)},null,512),[[Pe,t.searchTerm]])]),c("div",r3,[c("div",o3,[c("span",{class:"d-block",onClick:e[1]||(e[1]=a=>t.showColumnOptions=!t.showColumnOptions)},"Column Options"),H(D(o,{itemType:i.itemType,onSetColumns:e[2]||(e[2]=a=>t.$emit("setColumns",a))},null,8,["itemType"]),[[Ie,t.showColumnOptions]])]),H(c("select",{"onUpdate:modelValue":e[3]||(e[3]=a=>t.sortBy=a),class:"select ms-2"},[e[5]||(e[5]=c("option",{disabled:""},"Sort By",-1)),(f(!0),m(M,null,N(t.sortOptions,a=>(f(),m("option",{key:a.id,value:a.text},S(a.text),9,a3))),128))],512),[[is,t.sortBy]]),c("button",{class:"add-btn my-auto",type:"button",onClick:e[4]||(e[4]=a=>t.$emit("addItem",i.itemType))},e[6]||(e[6]=[c("img",{class:"m-auto",src:Nn,width:"10",height:"10"},null,-1)]))])])}const d3=V(i3,[["render",l3],["__scopeId","data-v-9b2090d6"]]),Vy=(t,e,i)=>{const s=t[e];return s?typeof s=="function"?s():Promise.resolve(s):new Promise((r,n)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(n.bind(null,new Error("Unknown variable dynamic import: "+e+(e.split("/").length!==i?". Note that variables only represent file names one level deep.":""))))})},c3={name:"ArrayLengthItemTableCell",props:{column:Object,property:{type:Array,default(t){return t||[]}},isShowZero:{type:Boolean,default:!1}},computed:{text(){let t=this.property.length;return t!=0||this.isShowZero?t:""}}},u3=["src"];function h3(t,e,i,s,r,n){return f(),m("td",null,[i.column!=null&&i.column.iconName&&n.text!=""?(f(),m("img",{key:0,src:`/icon/${i.column.iconName}-icon.png`,width:"24",height:"24"},null,8,u3)):y("",!0),c("span",null,S(n.text),1)])}const f3=V(c3,[["render",h3]]),m3={name:"NumberItemTableCell",props:{column:Object,property:{type:Number,default:0},showZero:{type:Boolean,default:!0}},computed:{text(){return!this.showZero&&this.property==0?"":this.property}}},p3=["src"];function g3(t,e,i,s,r,n){return f(),m("td",null,[i.column.iconName&&n.text!=""?(f(),m("img",{key:0,src:`/icon/${i.column.iconName}.png`,width:"24",height:"24"},null,8,p3)):y("",!0),c("span",null,S(n.text),1)])}const v3=V(m3,[["render",g3],["__scopeId","data-v-ed6ed0f5"]]),_3={name:"TextItemTableCell",props:{column:Object,property:{type:Object,default(t){return t||{}}},isExpanded:{type:Boolean,default:!1}},inject:["parentItem","isParent","isChild","level","levelPadding","options"],data:function(){return{tdClasss:this.tdClass()}},computed:{text(){return this.property.text}},methods:{iconSource(){return this.isChild?"child-icon":this.isParent?"parent-icon":this.column.iconName},showItems(){this.$emit("showItems","text")},shouldShowExpander(){return!!(this.options.dropItems.items.parents&&this.property.parents&&this.property.parents.length>0||this.options.dropItems.items.children&&this.property.children&&this.property.children.length>0||this.options.dropItems.items.metrics&&this.property.metrics&&this.property.metrics.length>0||this.options.dropItems.items.routines&&this.property.routines&&this.property.routines.length>0||this.options.dropItems.items.todos&&this.property.todos&&this.property.todos.length>0||this.options.dropItems.items.events&&this.property.events&&this.property.events.length>0||this.options.dropItems.items.iterations&&this.property.iterations&&this.property.iterations.length>0)},tdClass(){return this.shouldShowExpander()?this.isExpanded?"column-expanded expandable":"column-collapsed expandable":""},leftPadding(){let t=this.level*this.levelPadding;return this.shouldShowExpander()||(t+=14),t},openItemForm(){this.$emit("openItemForm",{id:this.property.id,itemType:this.property.itemType})}}},y3=["src"],b3=["src"];function w3(t,e,i,s,r,n){return f(),m("td",{class:O(n.tdClass()),style:ue({"padding-left":`${n.leftPadding()}px`})},[n.shouldShowExpander()?(f(),m("img",{key:0,src:i.isExpanded?"/icon/icon-expanded.png":"/icon/icon-collapsed-right.png",width:"14",height:"14",onClick:e[0]||(e[0]=o=>n.showItems())},null,8,y3)):y("",!0),i.column.iconName&&n.text.toLowerCase()!=""&&i.column.iconName!="metric-icon"?(f(),m("img",{key:1,src:`/icon/${n.iconSource()}.png`,width:"24",height:"24"},null,8,b3)):y("",!0),c("span",{class:"text",onClick:e[1]||(e[1]=(...o)=>n.openItemForm&&n.openItemForm(...o))},S(n.text),1)],6)}const S3=V(_3,[["render",w3],["__scopeId","data-v-e1d8672d"]]),T3={name:"StringItemTableCell",props:{column:Object,property:{type:String,default:""}},computed:{text(){return this.property}}},x3=["src"];function E3(t,e,i,s,r,n){return f(),m("td",null,[i.column.iconName&&n.text!=""?(f(),m("img",{key:0,src:`/icon/${i.column.iconName}.png`,width:"24",height:"24"},null,8,x3)):y("",!0),c("span",null,S(n.text),1)])}const I3=V(T3,[["render",E3]]),D3={name:"ObjectArrayItemTableCell",props:{column:Object,property:{type:Array,default(t){return t||[]}},isExpanded:{type:Boolean,default:!1}},inject:["parentItem","isParent","isChild"],computed:{text(){return this.property?Ql(this.property,"text"):""},hasIcon(){return this.column.iconName&&this.text.toLowerCase()!=""}},methods:{showItems(){this.$emit("showItems",this.column.text)},shouldShowExpander(){return this.property?this.property.length>0:!1},tdClass(){return this.shouldShowExpander()?this.isExpanded?"column-expanded expandable":"column-collapsed expandable":""}}},k3=["src"],C3=["src"];function P3(t,e,i,s,r,n){return f(),m("td",{class:O([n.tdClass(),i.isExpanded?"expandable":""])},[n.shouldShowExpander()?(f(),m("img",{key:0,class:O(["expander",i.isExpanded?"expanded":"collapsed"]),style:ue({"margin-right":n.hasIcon?"0px":"2px"}),src:i.isExpanded?"/icon/icon-expanded.png":"/icon/icon-collapsed-right.png",width:"14",height:"14",onClick:e[0]||(e[0]=o=>n.showItems())},null,14,k3)):y("",!0),n.hasIcon?(f(),m("img",{key:1,src:`/icon/${i.column.iconName}.png`,width:"24",height:"24"},null,8,C3)):y("",!0),c("span",null,S(n.text),1)],2)}const M3=V(D3,[["render",P3],["__scopeId","data-v-84dfecf9"]]),A3={name:"ItemTableRow",components:{ArrayLengthItemTableCell:f3,NumberItemTableCell:v3,TextItemTableCell:S3,StringItemTableCell:I3,ObjectArrayItemTableCell:M3},props:{item:Object,parent:Object,columns:Array,states:Object},inject:["draggedItem"],data:function(){return{itemTableStore:void 0,position:""}},created:async function(){let t=await U(()=>import("./itemTableStore-FgWJrjMO.js"),[]);this.itemTableStore=t.useItemTableStore()},methods:{toCamelCase:JE,getPosition:$3,onDragStart:O3,onDragOver:R3,onDrop:N3,onDragLeave:L3,onDragEnd:V3,hasSameParent:W3,property(t){if(t.text=="ID")return this.item.id;if(t.text=="Time")return this.item.timePairs;if(t.text=="Order"){if(this.parent)return this.item.positions.find(e=>e.parentType==this.parent.itemType&&e.parentID==this.parent.id).position}else return t.text=="Repeat"?this.item.repeats?this.item.repeats:[]:this.item[t.text.toLowerCase()]},showItems(t){this.$emit("showItems",this.item.id,t)}}};function O3(t){console.log("Drag Started"),t.target.classList.add("drag"),t.dataTransfer.dropEffect="move",t.dataTransfer.effectAllowed="move",this.itemTableStore.setDraggedProps(this.item,this.parent)}function R3(t){if(t.preventDefault(),this.position="",!t.currentTarget.classList.contains("drag")&&(t.preventDefault(),this.hasSameParent())){var e=this.$refs.tr.getBoundingClientRect(),i=t.clientY-e.y,s=i/e.height;s<.5?this.position="before":this.position="after"}}function $3(t){var e=this.$refs.tr.getBoundingClientRect(),i=t.clientY-e.y,s=i/e.height;s<.5?t.currentTarget.classList.add("before"):t.currentTarget.classList.add("after")}function N3(t){t.preventDefault();var e=this.itemTableStore.getDragged;this.hasSameParent()&&this.$emit("repositionItem",e.item,this.item,this.position=="before"),this.position=""}function L3(){this.position=""}function V3(t){t.target.classList.remove("drag"),this.position="",this.itemTableStore.clearDraggedProps()}function W3(){var t=this.itemTableStore.getDragged;return!!(this.parent==null&&t.parent==null||this.parent&&t.parent&&this.parent.itemType==t.parent.itemType&&this.parent.id==t.parent.id)}const z3={class:"d-flex justufy-content-center"};function F3(t,e,i,s,r,n){const o=T("TextItemTableCell"),a=T("ArrayLengthItemTableCell"),l=T("NumberItemTableCell"),d=T("StringItemTableCell"),u=T("ObjectArrayItemTableCell");return f(),m("tr",{key:i.item.id,ref:"tr",draggable:"true",onDragenter:e[2]||(e[2]=fe(()=>{},["prevent"])),class:O(t.position),onDragstart:e[3]||(e[3]=h=>n.onDragStart(h)),onDragend:e[4]||(e[4]=h=>n.onDragEnd(h)),onDrop:e[5]||(e[5]=h=>n.onDrop(h)),onDragover:e[6]||(e[6]=h=>n.onDragOver(h)),onDragleave:e[7]||(e[7]=h=>n.onDragLeave(h))},[(f(!0),m(M,null,N(i.columns,h=>(f(),m(M,null,[h.type=="Text"?(f(),K(o,{key:h.position,column:h,property:i.item,isExpanded:i.states.text,onShowItems:n.showItems,onOpenItemForm:e[0]||(e[0]=p=>t.$emit("openItemForm",p))},null,8,["column","property","isExpanded","onShowItems"])):y("",!0),h.type=="ArrayLength"?(f(),K(a,{key:h.position,column:h,property:n.property(h)},null,8,["column","property"])):y("",!0),h.type=="Number"?(f(),K(l,{key:h.position,column:h,property:n.property(h),showZero:h.text!="Order"},null,8,["column","property","showZero"])):y("",!0),h.type=="String"?(f(),K(d,{key:h.position,column:h,property:n.property(h)},null,8,["column","property"])):y("",!0),h.type=="ObjectArray"?(f(),K(u,{key:h.position,column:h??{iconName:null},property:n.property(h),isExpanded:i.states[h.text.toLowerCase()],onShowItems:n.showItems},null,8,["column","property","isExpanded","onShowItems"])):y("",!0)],64))),256)),c("td",null,[c("div",z3,[c("button",{class:"delete-btn btn btn-secondary btn-sm float-end",type:"button",onClick:e[1]||(e[1]=fe(h=>t.$emit("deleteItem"),["prevent","stop"]))},e[8]||(e[8]=[c("i",{class:"far fa-trash-alt"},null,-1)]))])])],34)}const j3=V(A3,[["render",F3],["__scopeId","data-v-913f63f2"]]),B3=[{propertyText:"Position",text:"Order",type:"Number",width:50,minWidth:50,iconName:null},{propertyText:"ID",text:"ID",type:"Number",width:60,minWidth:60,iconName:null},{propertyText:"Text",text:"Text",type:"Text",width:450,minWidth:150,iconName:"goal-icon"},{propertyText:"Description",text:"Description",type:"String",width:250,minWidth:150,iconName:null},{propertyText:"TimePair",text:"Time",type:"ArrayLength",width:60,minWidth:60,iconName:null},{propertyText:"Repeat",text:"Repeat",type:"ArrayLength",width:60,minWidth:60,iconName:null},{propertyText:"Type",text:"Type",type:"String",width:60,minWidth:60,iconName:null},{propertyText:"Parents",text:"Parents",type:"ObjectArray",width:null,minWidth:150,iconName:"parent-icon"},{propertyText:"Children",text:"Children",type:"ObjectArray",width:null,minWidth:150,iconName:"child-icon"},{propertyText:"Metrics",text:"Metrics",type:"ObjectArray",width:null,minWidth:150,iconName:null},{propertyText:"Goals",text:"Goals",type:"ObjectArray",width:null,minWidth:150,iconName:"goal-icon"},{propertyText:"Todos",text:"Todos",type:"ObjectArray",width:null,minWidth:150,iconName:"todo-icon"},{propertyText:"Routines",text:"Routines",type:"ObjectArray",width:null,minWidth:150,iconName:"routine-icon"},{propertyText:"Iterations",text:"Iterations",type:"ObjectArray",width:null,minWidth:150,iconName:null},{propertyText:"Events",text:"Events",type:"ObjectArray",width:null,minWidth:150,iconName:null}],H3=Jw(()=>U(()=>Promise.resolve().then(()=>dU),void 0)),U3={components:{ItemTableRow:j3,ItemTable:H3},name:"ItemTableByNone",props:{itemType:String,property:String,selectedColumns:Array,searchTerm:{type:String,default:""},options:{type:Object,default:()=>({showRootOnly:!0,dropItems:{items:{parents:!1,children:!0,metrics:!1,goals:!0,routines:!0,todos:!0},planner:{events:!1,iterations:!1}}})}},provide(){return{options:this.options}},inject:["level","levelPadding","parentItem","isParent","isChild"],data:function(){return{errorMessage:null,isLoading:!1,itemTableVM:null,tableWidth:this.width,shownItems:[],store:null,metricStore:void 0,goalStore:void 0,routineStore:void 0,todoStore:void 0,itemTableStore:void 0}},created:async function(){let t=await U(()=>import("./itemTableStore-FgWJrjMO.js"),[]);this.itemTableStore=t.useItemTableStore();let e=await U(()=>Promise.resolve().then(()=>Uc),void 0);this.metricStore=e.useMetricStore();let i=await U(()=>Promise.resolve().then(()=>Ri),void 0);this.goalStore=i.useGoalStore();let s=await U(()=>Promise.resolve().then(()=>Lo),void 0);this.routineStore=s.useRoutineStore();let r=await U(()=>Promise.resolve().then(()=>Oi),void 0);this.todoStore=r.useTodoStore();let o=(await Vy(Object.assign({"../../../../store/appStore.js":()=>U(()=>Promise.resolve().then(()=>dn),void 0),"../../../../store/eventStore.js":()=>U(()=>Promise.resolve().then(()=>$s),void 0),"../../../../store/goalStore.js":()=>U(()=>Promise.resolve().then(()=>Ri),void 0),"../../../../store/itemTableStore.js":()=>U(()=>import("./itemTableStore-FgWJrjMO.js"),[]),"../../../../store/iterationStore.js":()=>U(()=>Promise.resolve().then(()=>Et),void 0),"../../../../store/metricStore.js":()=>U(()=>Promise.resolve().then(()=>Uc),void 0),"../../../../store/physicalStore.js":()=>U(()=>Promise.resolve().then(()=>xy),void 0),"../../../../store/plannerStore.js":()=>U(()=>Promise.resolve().then(()=>He),void 0),"../../../../store/routineStore.js":()=>U(()=>Promise.resolve().then(()=>Lo),void 0),"../../../../store/todoStore.js":()=>U(()=>Promise.resolve().then(()=>Oi),void 0),"../../../../store/universalStore.js":()=>U(()=>Promise.resolve().then(()=>Hh),void 0),"../../../../store/workoutStore.js":()=>U(()=>Promise.resolve().then(()=>eh),void 0)}),`../../../../store/${this.itemType}Store.js`,6))[`use${this.itemTypeCapitalized}Store`];this.store=o()},computed:{itemTypeCapitalized(){return Zs(this.itemType)},width(){return this.itemTableStore?this.itemTableStore.containerWidth:0},showRootOnly(){return!!(this.options.showRootOnly&&this.searchTerm=="")},columns(){let t=[],e=1,i=this;return this.selectedColumns.forEach(s=>{let r=q(B3.find(n=>n.text==s));r.position=e++,s=="Text"&&!i.isParent&&!i.isChild&&(r.iconName=`${this.itemType}-icon`),t.push(r)}),this.setColumnWidths(t),t},items(){if(this.store){let t=this.getStore(this.itemType).getItems();if(this.parentItem){let e=this[`${this.parentItem.itemType}Store`].getItem(this.parentItem.id),i=e[this.property].map(s=>s.id);t=t.filter(s=>i.includes(s.id)),t=t.sort((s,r)=>{let n=s.positions.find(a=>a.parentType==e.itemType&&a.parentID==e.id).position,o=r.positions.find(a=>a.parentType==e.itemType&&a.parentID==e.id).position;return n-o})}else this.showRootOnly&&this.itemType!="metric"&&(t=t.filter(e=>e.parentIDs.length==0)),t=Jl(t,"id");if(this.refreshShownItems(t),this.searchTerm=="")return t;{let e=this;return t.filter(i=>i.text.toLowerCase().includes(e.searchTerm.toLowerCase()))}}else return[]}},methods:{setColumnWidths:Y3,refreshShownItems:G3,newStateModel:K3,getUpdatedSelectedColumns:q3,getStore(t){return this[`${t}Store`]},states(t){return this.shownItems.find(e=>e.id===t.id).states},showItems(t,e){let i=this.shownItems.find(r=>r.id===t).states,s=!i[e.toLowerCase()];for(let r in i)i[r]=!1;i[e.toLowerCase()]=s},itemPosition(t,e){return t.positions.find(i=>i.parentType==e.itemType&&i.parentID==(e.id||null)).position},repositionItem:J3,deleteItem:Q3}};function Y3(t){let e=this.width,i=t.map(s=>s.minWidth).reduce((s,r)=>s+r);if(e<=i)t.forEach(s=>{s.setWidth=s.width!=null?s.width:s.minWidth});else if(e>i){let s=t.filter(l=>l.width!=null);s.forEach(l=>l.setWidth=l.width);let r=s.map(l=>l.width).reduce((l,d)=>l+d),n=e-r,o=t.filter(l=>l.width==null),a=n/o.length;o.forEach(l=>l.setWidth=a)}this.tableWidth=t.map(s=>s.setWidth).reduce((s,r)=>s+r)}function G3(t){if(this.showItems){let e=this;t.forEach(i=>{e.shownItems.find(r=>r.id==i.id)||e.shownItems.push(this.newStateModel(i))})}else{let e=t.map(i=>this.newStateModel(i));this.shownItems=Jl(e,"id")}}function K3(t){let e={id:t.id,states:{parents:!1,children:!1,metrics:!1,routines:!1,goals:!1,todos:!1,text:!1}};return delete e[`${this.itemType}s`],e}function q3(t,e){let i=[...t],s=i.findIndex(r=>r.toLowerCase()==`${e.toLowerCase()}s`);return s>=0&&(i[s]=`${Zs(this.itemType)}s`),i}function J3(t,e,i){var s=this.itemPosition(e,this.parentItem),r=i?s:s+1;this.parentItem&&this.getStore(this.parentItem.itemType).repositionItem(this.parentItem.itemType,this.property,this.parentItem.id,t.id,r)}function Q3(t){this.itemType=="todo"&&this.todoStore.deleteTodo(t)}const Z3={key:0},X3={key:1},eU={key:2,class:"row g-0"},tU={class:"child-row"},iU=["colspan"];function sU(t,e,i,s,r,n){const o=T("ItemTableRow"),a=T("ItemTable");return t.errorMessage?(f(),m("div",Z3,S(t.errorMessage),1)):t.isLoading==!0&&!n.parentItem?(f(),m("div",X3,"Loading...")):(f(),m("div",eU,[c("div",{class:O([i.itemType,"table col-12"])},[c("table",{class:O(["item table table-sm table-borderless",n.parentItem?"child":""]),style:ue({width:`${t.tableWidth}px`})},[c("thead",{class:O([n.parentItem?"":"sticky-top"])},[c("tr",null,[(f(!0),m(M,null,N(n.columns,l=>(f(),m("th",{key:l.position,style:ue({"min-width":`${l.setWidth}px`,"max-width":`${l.setWidth}px`})},S(l.text),5))),128)),e[7]||(e[7]=c("th",null,null,-1))])],2),c("tbody",null,[(f(!0),m(M,null,N(n.items,l=>(f(),m(M,{key:l.id},[D(o,{item:l,parent:n.parentItem,columns:n.columns,states:n.states(l),onShowItems:n.showItems,onRepositionItem:n.repositionItem,onOpenItemForm:e[0]||(e[0]=d=>t.$emit("openItemForm",d)),onDeleteItem:d=>n.deleteItem(l.id)},null,8,["item","parent","columns","states","onShowItems","onRepositionItem","onDeleteItem"]),c("tr",tU,[c("td",{colspan:n.columns.length+1},[i.options.dropItems.items.parents&&n.states(l).text||n.states(l).parents?(f(),K(a,{key:0,itemType:i.itemType,property:"parents",parentItem:l,selectedColumns:i.selectedColumns,isParent:!0,level:n.level+1,onOpenItemForm:e[1]||(e[1]=d=>t.$emit("openItemForm",d))},null,8,["itemType","parentItem","selectedColumns","level"])):y("",!0),i.options.dropItems.items.children&&n.states(l).text||n.states(l).children?(f(),K(a,{key:1,itemType:i.itemType,property:"children",parentItem:l,selectedColumns:i.selectedColumns,isChild:!0,level:n.level+1,onOpenItemForm:e[2]||(e[2]=d=>t.$emit("openItemForm",d))},null,8,["itemType","parentItem","selectedColumns","level"])):y("",!0),(i.options.dropItems.items.metrics&&n.states(l).text||n.states(l).metrics)&&i.itemType!="metric"?(f(),K(a,{key:2,itemType:"metric",property:"metrics",parentItem:l,selectedColumns:n.getUpdatedSelectedColumns(i.selectedColumns,"metric"),level:n.level+1,onOpenItemForm:e[3]||(e[3]=d=>t.$emit("openItemForm",d))},null,8,["parentItem","selectedColumns","level"])):y("",!0),(i.options.dropItems.items.goals&&n.states(l).text||n.states(l).goals)&&i.itemType!="goal"?(f(),K(a,{key:3,itemType:"goal",property:"goals",parentItem:l,selectedColumns:n.getUpdatedSelectedColumns(i.selectedColumns,"goal"),level:n.level+1,onOpenItemForm:e[4]||(e[4]=d=>t.$emit("openItemForm",d))},null,8,["parentItem","selectedColumns","level"])):y("",!0),(i.options.dropItems.items.routines&&n.states(l).text||n.states(l).routines)&&i.itemType!="routine"?(f(),K(a,{key:4,itemType:"routine",property:"routines",parentItem:l,selectedColumns:n.getUpdatedSelectedColumns(i.selectedColumns,"routine"),level:n.level+1,onOpenItemForm:e[5]||(e[5]=d=>t.$emit("openItemForm",d))},null,8,["parentItem","selectedColumns","level"])):y("",!0),(i.options.dropItems.items.todos&&n.states(l).text||n.states(l).todos)&&i.itemType!="todo"?(f(),K(a,{key:5,itemType:"todo",property:"todos",parentItem:l,selectedColumns:n.getUpdatedSelectedColumns(i.selectedColumns,"todo"),level:n.level+1,onOpenItemForm:e[6]||(e[6]=d=>t.$emit("openItemForm",d))},null,8,["parentItem","selectedColumns","level"])):y("",!0)],8,iU)])],64))),128))])],6)],2)]))}const nU=V(U3,[["render",sU],["__scopeId","data-v-5b4a6d93"]]),rU={components:{ItemTableByNone:nU},name:"ItemTable",props:{itemType:String,property:String,selectedColumns:Array,sortBy:{type:String,default:"None"},searchTerm:{type:String,default:""},level:{type:Number,default:0},parentItem:Object,isParent:Boolean,isChild:Boolean},provide(){return{level:this.level,levelPadding:this.levelPadding,parentItem:this.parentItem,isParent:this.isParent,isChild:this.isChild}},data:function(){return{levelPadding:18}}},oU={ref:"tableContainer"},aU={key:0,class:"w-100"};function lU(t,e,i,s,r,n){const o=T("ItemTableByNone");return f(),m("div",oU,[i.selectedColumns?(f(),m("div",aU,[i.sortBy=="None"?(f(),K(o,{key:0,itemType:i.itemType,searchTerm:i.searchTerm,property:i.property,selectedColumns:i.selectedColumns,onOpenItemForm:e[0]||(e[0]=a=>t.$emit("openItemForm",a))},null,8,["itemType","searchTerm","property","selectedColumns"])):y("",!0)])):y("",!0)],512)}const Wy=V(rU,[["render",lU]]),dU=Object.freeze(Object.defineProperty({__proto__:null,default:Wy},Symbol.toStringTag,{value:"Module"}));var Qm=[{id:87,text:"Date"},{id:88,text:"Time"},{id:89,text:"DateTime"}];const cU={name:"TimeInput",props:{time:Object,momentID:Number,canRemove:{type:Boolean,default:!0}},data:function(){return{momentTypes:Qm,dateTimeString:"",timezoneOffset:""}},created:function(){this.dateTimeString=this.getDateTimeString(),this.timezoneOffset=this.toTimezoneOffset(this.time.dateTime)},computed:{type(){return Qm.find(t=>t.id==this.time.idMoment).text}},methods:{getMomentID:uU,getDateTimeString:hU,toDateString:Zl,toTimeString:QE,toDateTimeString:ZE,toTimezoneOffset:f_,onChange:fU},watch:{momentID(){this.dateTimeString=this.getDateTimeString()},"time.dateTime"(){this.dateTimeString=this.getDateTimeString(),this.timezoneOffset=this.toTimezoneOffset(this.time.dateTime)}}};function uU(t){return this.momentTypes.find(e=>e.text==t).id}function hU(){let e=new Date(this.time.dateTime).toJSON();if(this.time.idMoment==87){let s=e.split("T")[0].split("-");return`${s[0]}-${s[1]}-${s[2]}`}else if(this.time.idMoment==88){let s=e.split("T")[1].split(":");return`${s[0]}:${s[1]}`}else if(this.time.idMoment==89){let i=e.split("T"),s=i[0].split("-"),r=i[1].split(":");return`${s[0]}-${s[1]}-${s[2]} ${r[0]}:${r[1]}`}}function fU(t){t=t.currentTarget.value;let e;if(t=="")this.canRemove&&this.$emit("removeTime");else{if(this.type=="Date")e=new Date(t+" 00:00:00").toISOString();else if(this.type=="Time"){let i=this.toDateString(new Date().toJSON());e=new Date(i+" "+t).toISOString()}else this.type=="DateTime"&&(e=new Date(t).toISOString());this.dateTimeString=t,this.$emit("setTime",e)}}const mU=["value"],pU=["value"],gU=["value"];function vU(t,e,i,s,r,n){return f(),m("div",null,[n.type=="Date"?(f(),m("input",{key:0,class:"date-picker",type:"date",value:t.dateTimeString,onChange:e[0]||(e[0]=(...o)=>n.onChange&&n.onChange(...o))},null,40,mU)):y("",!0),n.type=="Time"?(f(),m("input",{key:1,class:"date-picker",type:"time",value:t.dateTimeString,onChange:e[1]||(e[1]=(...o)=>n.onChange&&n.onChange(...o))},null,40,pU)):y("",!0),n.type=="DateTime"?(f(),m("input",{key:2,class:"date-picker",type:"datetime-local",value:t.dateTimeString,onChange:e[2]||(e[2]=(...o)=>n.onChange&&n.onChange(...o))},null,40,gU)):y("",!0)])}const _U=V(cU,[["render",vU],["__scopeId","data-v-fcf7e288"]]);var Zm=[{id:87,text:"Date"},{id:88,text:"Time"},{id:89,text:"DateTime"}];const yU={name:"TimeControl",components:{TimeInput:_U},props:{title:String,time:Object,endpoint:String,type:String,canRemove:{type:Boolean,default:!0},isSet:{type:Boolean,default:!0}},data:function(){return{moment:this.time?q(Zm.find(t=>t.id==this.time.idMoment)):null}},methods:{addTime:function(){this.$emit("addTime",this.endpoint,this.type)},setTime(t){this.$emit("setTime",t,this.endpoint,this.type)},removeTime:function(){this.$emit("removeTime")}},watch:{time(t){this.moment=t?q(Zm.find(e=>e.id==this.time.idMoment)):null}}},bU={class:"d-flex flex-column"},wU={class:"d-flex flex-row justify-content-between"};function SU(t,e,i,s,r,n){const o=T("TimeInput");return f(),m("div",bU,[c("div",wU,[c("label",{class:"control-label",for:"description",onClick:e[0]||(e[0]=(...a)=>n.addTime&&n.addTime(...a))},S(i.title?i.title:i.endpoint),1)]),i.time&&i.isSet?(f(),K(o,{key:0,time:i.time,momentID:i.time.idMoment,canRemove:i.canRemove,onSetTime:n.setTime,onRemoveTime:n.removeTime},null,8,["time","momentID","canRemove","onSetTime","onRemoveTime"])):y("",!0)])}const Sh=V(yU,[["render",SU],["__scopeId","data-v-feb82ebb"]]),Th="/icon/calendar-day.png";let Xm=[{id:63,text:"Day",isActive:!0},{id:68,text:"Week",isActive:!0},{id:69,text:"Month",isActive:!0},{id:72,text:"Tri",isActive:!1},{id:74,text:"Semi",isActive:!1},{id:75,text:"Year",isActive:!1}],TU=[{index:1,text:"Sunday",alt:"S",isSelected:!1},{index:2,text:"Monday",alt:"M",isSelected:!1},{index:3,text:"Tuesday",alt:"T",isSelected:!1},{index:4,text:"Wednesday",alt:"W",isSelected:!1},{index:5,text:"Thursday",alt:"T",isSelected:!1},{index:6,text:"Friday",alt:"F",isSelected:!1},{index:7,text:"Saturday",alt:"S",isSelected:!1}],xU=[{id:140,text:"Self"},{id:141,text:"Children"},{id:142,text:"Descendants"}];const EU={name:"RepeatControl",components:{TimeControl:Sh},props:{repeat:Object,itemID:Number,itemType:String,canEdit:Boolean},data:function(){return{todoStore:void 0,plannerStore:void 0,timeframes:q(Xm),inheritanceTypes:q(xU),updatedRepeat:void 0,todoRepeats:[],isEditing:!1,isValid:!0}},created:async function(){let t=await U(()=>Promise.resolve().then(()=>Oi),void 0);this.todoStore=t.useTodoStore();let e=await U(()=>Promise.resolve().then(()=>He),void 0);this.plannerStore=e.usePlannerStore(),this.repeat.id<0&&(this.isEditing=!0)},computed:{selectedDate(){return this.plannerStore?this.plannerStore.selectedDate:it()},isArchived(){return!!(this.repeat.endDate&&+new Date(this.repeat.endDate)<+it())},timeframe(){let t=this.isEditing?this.updatedRepeat:this.repeat;return Xm.find(i=>i.id==t.idTimeframe).text.toLowerCase()},frequency(){let t=this.isEditing?this.updatedRepeat:this.repeat;return t.frequency==1?"Once":`${t.frequency} times`},daysOfWeek(){let t="";return this.repeat.idTimeframe==68&&this.repeat.dayIndecies.forEach(e=>{let i=this.dow.find(s=>s.index==e).text;t+=`${i} `}),t},daysOfMonth(){let t="";return this.repeat.dayIndecies.forEach(e=>{e==1?t+="1st ":e==2?t+="2nd ":e==3?t+="3rd ":e>3&&(t+=`${e}th `)}),t},dow(){let t=[];return TU.forEach(e=>{let i=q(e);t.push(i),this.updatedRepeat&&this.updatedRepeat.idTimeframe==68&&(i.isSelected=this.updatedRepeat.dayIndecies.includes(i.index))}),t},dom(){var t=[];for(let e=1;e<=31;e++){let i={index:e};t.push(i),this.updatedRepeat.idTimeframe==69&&(i.isSelected=this.updatedRepeat.dayIndecies.includes(i.index))}return t},numInputWidth(){return this.updatedRepeat.interval<10?"25px":this.updatedRepeat.interval<100?"34px":"41px"},minFrequency(){return this.updatedRepeat.dayIndecies.length>0?this.updatedRepeat.dayIndecies.length:1},maxFrequency(){return this.updatedRepeat.idTimeframe==68?7:this.updatedRepeat.idTimeframe==69?31:"none"},deleteFutureText(){return this.plannerStore&&this.selectedDate<it()?`Delete Future ${jD(this.selectedDate)}`:"Delete Future"}},methods:{initUpdatedRepeat:IU,onRepeatClicked:DU,onDayClicked:kU,onTimeFrameChanged:CU,addTime:PU,setTime:MU,removeTime:AU,validateTimes:OU,correctTimes:RU,toggleTodoRepeat(t){t.isShown=!t.isShown},cancel(){this.isEditing=!1,this.$emit("cancelRepeatEditing",this.repeat.id)},save:$U,deleteOrArchive:NU,refreshRepetition:LU,deleteFutureRepetitions:VU},watch:{isEditing(t){t==!0&&this.initUpdatedRepeat()}}};function IU(){this.updatedRepeat=q(this.repeat),this.updatedRepeat.idTimeframe==68&&this.updatedRepeat.dayIndecies.forEach(e=>{let i=this.dow.find(s=>s.index==e);i.isSelected=!0}),["startRepeat","endRepeat","startIteration","endIteration"].forEach(e=>{this.updatedRepeat[e]={isEdited:!1,isRemoved:!1,isValid:!0,value:this.updatedRepeat[e]?q(this.updatedRepeat[e]):null,oldValue:this.updatedRepeat[e]?q(this.updatedRepeat[e]):null}}),this.validateTimes()}function DU(){this.canEdit&&(this.isEditing=!0,this.$emit("setSelectedRepeat",this.repeat.id))}function kU(t){if(t.isSelected=!t.isSelected,t.isSelected)this.updatedRepeat.dayIndecies.push(t.index),this.updatedRepeat.frequency<this.updatedRepeat.dayIndecies.length&&(this.updatedRepeat.frequency=this.updatedRepeat.dayIndecies.length);else{let e=this.updatedRepeat.dayIndecies.findIndex(i=>i==t.index);this.updatedRepeat.dayIndecies.splice(e,1),this.updatedRepeat.frequency!=1&&(this.updatedRepeat.frequency-=1)}this.updatedRepeat.dayIndecies=this.updatedRepeat.dayIndecies.sort(function(e,i){return e-i})}function CU(){this.updatedRepeat.interval=1,this.updatedRepeat.frequency=1,this.updatedRepeat.dayIndecies=[]}function PU(t,e){var i;t.toLowerCase()=="start"?i=84:t.toLowerCase()=="end"&&(i=85);var s;e.toLowerCase()=="repeat"?s=87:e.toLowerCase()=="iteration"&&(s=88);var r=Zl(new Date().toJSON());this.updatedRepeat[`${t.toLowerCase()}${Zs(e)}`]={isEdited:!1,isRemoved:!1,isValid:!0,value:{idEndpoint:i,idMoment:s,idType:80,dateTime:r},oldValue:{idEndpoint:i,idMoment:s,idType:80,dateTime:r}}}function MU(t,e,i){let s=this.updatedRepeat[`${e.toLowerCase()}${Zs(i)}`];s.value.dateTime=t,s.oldValue.dateTime!=t&&s.oldValue.id?s.isEdited=!0:s.isEdited=!1,this.validateTimes()}function AU(t){t.isRemoved=!0}function OU(){this.correctTimes(),this.updatedRepeat.endRepeat.value&&+new Date(this.updatedRepeat.startRepeat.value.dateTime)>+new Date(this.updatedRepeat.endRepeat.value.dateTime)?(this.isValid=!1,this.updatedRepeat.startRepeat.isValid=!1,this.updatedRepeat.endRepeat.isValid=!1):(this.isValid=!0,this.updatedRepeat.startRepeat.isValid=!0,this.updatedRepeat.endRepeat.isValid=!0),this.updatedRepeat.startIteration.value&&this.updatedRepeat.endIteration.value&&+new Date(this.updatedRepeat.startIteration.value.dateTime)>=+new Date(this.updatedRepeat.endIteration.value.dateTime)?(this.isValid=!1,this.updatedRepeat.startIteration.isValid=!1,this.updatedRepeat.endIteration.isValid=!1):(this.isValid=!0,this.updatedRepeat.startIteration.isValid=!0,this.updatedRepeat.endIteration.isValid=!0)}function RU(){let t=new Date(this.updatedRepeat.startRepeat.value.dateTime),e=this.updatedRepeat.startIteration;if(e&&e.value){let s=new Date(e.value.dateTime),r=Qf(new Date,new Date(e.value.dateTime.slice(0,-1)));s.setUTCFullYear(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()),e.value.dateTime=r?ks(s).toISOString():s.toISOString(),e.oldValue.id&&new Date(e.value.dateTime).getTime()!=new Date(e.oldValue.dateTime).getTime()?e.isEdited=!0:e.isEdited=!1}let i=this.updatedRepeat.endIteration;if(i&&i.value){let s=new Date(i.value.dateTime),r=Qf(new Date,new Date(i.value.dateTime.slice(0,-1)));s.setUTCFullYear(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()),i.value.dateTime=r?ks(s).toISOString():s.toISOString(),i.oldValue.id&&new Date(i.value.dateTime).getTime()!=new Date(i.oldValue.dateTime).getTime()?i.isEdited=!0:i.isEdited=!1}}function $U(){this.correctTimes();let t={id:this.updatedRepeat.id,idInheritance:this.updatedRepeat.idInheritance,isOwner:!0,itemID:this.itemID,itemType:this.itemType.toLowerCase(),idTimeframe:this.updatedRepeat.idTimeframe,idType:this.updatedRepeat.idType,points:this.updatedRepeat.points||null,interval:this.updatedRepeat.interval,frequency:this.updatedRepeat.frequency,dayIndecies:this.updatedRepeat.dayIndecies,startRepeat:this.updatedRepeat.startRepeat,endRepeat:this.updatedRepeat.endRepeat.value?this.updatedRepeat.endRepeat:null,startIteration:this.updatedRepeat.startIteration.value?this.updatedRepeat.startIteration:null,endIteration:this.updatedRepeat.endIteration.value?this.updatedRepeat.endIteration:null,isEventVisible:this.updatedRepeat.isEventVisible,isRecommended:this.updatedRepeat.isRecommended};this.itemType.toLowerCase()=="routine"?FR(t):this.itemType.toLowerCase()=="todo"&&DR(t),this.$emit("saveRepeat",t),this.isEditing=!1}function NU(){this.todoStore.deleteOrArchiveRepeat(this.repeat.id)}function LU(){this.$emit("refreshRepetition",this.repeat.id),this.isEditing=!1}function VU(){this.$emit("deleteFutureRepetitions",this.repeat.id,this.selectedDate),this.isEditing=!1}const WU={class:"d-flex flex-row"},zU={class:"d-flex flex-column"},FU={class:"timeframe d-flex flex-column"},jU={class:"blue"},BU={class:"blue"},HU={key:0},UU={class:"blue"},YU={key:1},GU={class:"blue"},KU={class:"d-flex flew-rowalign-middle mt-2"},qU=["id","value"],JU=["for"],QU={class:"interval d-flex flew-row mb-1"},ZU={class:"d-flex flex-row"},XU={class:"me-1"},e5=["min","max"],t5={key:0},i5=["onClick"],s5={key:1},n5={class:"day-of-month d-flex flex-row flex-wrap"},r5=["onClick"],o5={class:"d-flex flex-column"},a5={class:"d-flex flex-column"},l5={class:"d-flex flex-column"},d5={class:"d-flex flex-column"},c5={class:"d-flex flex-column"},u5={class:"d-flex flex-column"},h5={class:"d-flex flex-column"},f5=["value"],m5={class:"points d-flex flex-row align-items-center mt-1"},p5={class:"form-check"},g5={class:"form-check"},v5={class:"d-flex flex-row justify-content-between"},_5={class:"d-flex justify-content-start"},y5={class:"d-flex justify-content-end"};function b5(t,e,i,s,r,n){const o=T("TimeControl");return f(),m("div",null,[t.isEditing?y("",!0):(f(),m("div",{key:0,class:O(["wrapper d-flex flex-row justify-content-between",{archived:n.isArchived}]),onClick:e[1]||(e[1]=(...a)=>n.onRepeatClicked&&n.onRepeatClicked(...a))},[c("div",WU,[c("div",zU,[e[15]||(e[15]=c("img",{src:Th,width:"14",height:"14"},null,-1)),c("span",null,S(i.repeat.id),1)]),c("div",FU,[c("div",null,[e[16]||(e[16]=c("span",null,"Every",-1)),c("span",null,S(i.repeat.interval==1?" ":` ${i.repeat.interval} `),1),c("span",jU,S(i.repeat.interval==1?n.timeframe:`${n.timeframe}s`),1)]),c("div",null,[c("span",BU,S(n.frequency),1),e[17]||(e[17]=c("span",null," a ",-1)),c("span",null,S(n.timeframe),1)]),i.repeat.idTimeframe==68&&i.repeat.dayIndecies.length>0?(f(),m("div",HU,[e[18]||(e[18]=c("span",null,"On ",-1)),c("span",UU,S(n.daysOfWeek),1)])):y("",!0),i.repeat.idTimeframe==69&&i.repeat.dayIndecies.length>0?(f(),m("div",YU,[e[19]||(e[19]=c("span",null,"On the ",-1)),c("span",GU,S(n.daysOfMonth),1)])):y("",!0)])]),c("button",{class:"btn-close",type:"button","aria-label":"close",onClick:e[0]||(e[0]=fe((...a)=>n.deleteOrArchive&&n.deleteOrArchive(...a),["stop"]))})],2)),t.isEditing?(f(),m("div",{key:1,class:O(["wrapper-edit d-flex flex-row",{isValid:t.isValid}])},[c("div",null,[c("div",KU,[(f(!0),m(M,null,N(t.timeframes.filter(a=>a.isActive),a=>(f(),m("div",{key:a.id,class:"form-check form-check-inline"},[H(c("input",{class:"form-check-input",type:"radio",id:a.text,value:a.id,"onUpdate:modelValue":e[2]||(e[2]=l=>t.updatedRepeat.idTimeframe=l),onClick:e[3]||(e[3]=(...l)=>n.onTimeFrameChanged&&n.onTimeFrameChanged(...l))},null,8,qU),[[or,t.updatedRepeat.idTimeframe]]),c("label",{class:"form-check-label",for:a.text},S(a.text),9,JU)]))),128))]),c("div",QU,[c("div",ZU,[e[20]||(e[20]=c("span",{class:"me-1"},"Every",-1)),H(c("input",{class:"form-control form-control-sm me-1",type:"number",min:"1","onUpdate:modelValue":e[4]||(e[4]=a=>t.updatedRepeat.interval=a),style:ue({width:n.numInputWidth}),required:""},null,4),[[Pe,t.updatedRepeat.interval]]),c("span",XU,S(t.updatedRepeat.interval==1?n.timeframe:`${n.timeframe}s`),1),H(c("input",{class:"form-control form-control-sm me-1",type:"number","onUpdate:modelValue":e[5]||(e[5]=a=>t.updatedRepeat.frequency=a),min:n.minFrequency,max:n.maxFrequency,style:ue({width:n.numInputWidth}),required:""},null,12,e5),[[Pe,t.updatedRepeat.frequency]]),e[21]||(e[21]=c("span",{class:"me-1"},"times a",-1)),c("span",null,S(n.timeframe),1)])]),t.updatedRepeat.idTimeframe==68?(f(),m("div",t5,[e[22]||(e[22]=c("span",{class:"head"},"Days of Week",-1)),c("div",null,[(f(!0),m(M,null,N(n.dow,a=>(f(),m("span",{key:a.index,class:O(["day",{selected:a.isSelected}]),onClick:l=>n.onDayClicked(a)},S(a.alt),11,i5))),128))])])):y("",!0),t.updatedRepeat.idTimeframe==69?(f(),m("div",s5,[e[23]||(e[23]=c("span",{class:"head"},"Days of Month",-1)),c("div",n5,[(f(!0),m(M,null,N(n.dom,a=>(f(),m("span",{key:a.index,class:O(["day",{selected:a.isSelected}]),onClick:l=>n.onDayClicked(a)},S(a.index),11,r5))),128))])])):y("",!0),c("div",o5,[c("div",a5,[D(o,{class:O(["time-control",{invalid:!t.updatedRepeat.startRepeat.isValid}]),label:"Repeat Start",time:t.updatedRepeat.startRepeat.value,title:"Repeat Start",endpoint:"Start",type:"repeat",canRemove:!1,onSetTime:n.setTime},null,8,["class","time","onSetTime"])]),c("div",l5,[D(o,{class:O(["time-control",{invalid:!t.updatedRepeat.endRepeat.isValid}]),label:"Repeat End",time:t.updatedRepeat.endRepeat.value,title:"Repeat End",endpoint:"End",type:"repeat",isSet:!t.updatedRepeat.endRepeat.isRemoved,onAddTime:n.addTime,onSetTime:n.setTime,onRemoveTime:e[6]||(e[6]=a=>n.removeTime(t.updatedRepeat.endRepeat))},null,8,["class","time","isSet","onAddTime","onSetTime"])])]),c("div",d5,[c("div",c5,[D(o,{class:O(["time-control",{invalid:!t.updatedRepeat.startIteration.isValid}]),label:"Iteration Start",time:t.updatedRepeat.startIteration.value,canRemove:!1,title:"Iteration Start",type:"iteration",endpoint:"Start",isSet:!t.updatedRepeat.startIteration.isRemoved,onAddTime:n.addTime,onSetTime:n.setTime},null,8,["class","time","isSet","onAddTime","onSetTime"])]),c("div",u5,[D(o,{class:O(["time-control",{invalid:!t.updatedRepeat.endIteration.isValid}]),label:"Iteration End",time:t.updatedRepeat.endIteration.value,canRemove:!1,title:"Iteration End",type:"iteration",endpoint:"End",isSet:!t.updatedRepeat.endIteration.isRemoved,onAddTime:n.addTime,onSetTime:n.setTime},null,8,["class","time","isSet","onAddTime","onSetTime"])])]),c("div",h5,[H(c("select",{class:"form-select panel-select","aria-label":"select","onUpdate:modelValue":e[7]||(e[7]=a=>t.updatedRepeat.idInheritance=a)},[(f(!0),m(M,null,N(t.inheritanceTypes,a=>(f(),m("option",{key:a.id,value:a.id},S(a.text),9,f5))),128))],512),[[is,t.updatedRepeat.idInheritance]])]),c("div",m5,[e[24]||(e[24]=c("span",{class:"me-1"},"Points",-1)),H(c("input",{class:"form-control form-control-sm me-1",type:"number",min:"1","onUpdate:modelValue":e[8]||(e[8]=a=>t.updatedRepeat.points=a),style:{width:"41px"},required:""},null,512),[[Pe,t.updatedRepeat.points]])]),c("div",p5,[H(c("input",{class:"form-check-input mt-1",type:"checkbox",value:"",id:"isEventVisible","onUpdate:modelValue":e[9]||(e[9]=a=>t.updatedRepeat.isEventVisible=a)},null,512),[[ci,t.updatedRepeat.isEventVisible]]),e[25]||(e[25]=c("label",{class:"form-check-label float-start",for:"isEventVisible"}," Is Event Visible ",-1))]),c("div",g5,[H(c("input",{class:"form-check-input mt-1",type:"checkbox",value:"",id:"flexCheckDefault","onUpdate:modelValue":e[10]||(e[10]=a=>t.updatedRepeat.isRecommended=a)},null,512),[[ci,t.updatedRepeat.isRecommended]]),e[26]||(e[26]=c("label",{class:"form-check-label float-start",for:"flexCheckDefault"}," Recommended ",-1))]),c("div",v5,[c("div",_5,[c("button",{class:"btn btn-sm btn-link",type:"button",onClick:e[11]||(e[11]=(...a)=>n.refreshRepetition&&n.refreshRepetition(...a))},"Refresh"),c("button",{class:"btn btn-sm btn-link",type:"button",onClick:e[12]||(e[12]=(...a)=>n.deleteFutureRepetitions&&n.deleteFutureRepetitions(...a))},S(n.deleteFutureText),1)]),c("div",y5,[c("button",{class:"btn btn-sm btn-link",type:"button",onClick:e[13]||(e[13]=(...a)=>n.save&&n.save(...a))},"Save"),c("button",{class:"btn btn-sm btn-link",type:"button",onClick:e[14]||(e[14]=(...a)=>n.cancel&&n.cancel(...a))},"Cancel")])])])],2)):y("",!0)])}const ca=V(EU,[["render",b5],["__scopeId","data-v-c972ec6c"]]),w5={name:"TodoFormItem",components:{RepeatControl:ca},props:{id:Number,parentID:Number,parentType:String,displayedRepeatID:Number,parentRepeatIDs:Array,routineRepeatIDs:Array},data:function(){return{store:null,repeatsShown:!1}},created:async function(){this.store=Ur()},computed:{todo(){return this.store?this.store.getItem(this.id):null},metricString(){return Ql(this.todo.metrics,"text")},repeats(){let t=[];return["goal","todo"].includes(this.parentType)?t=this.todo.repeats.filter(e=>this.parentRepeatIDs.includes(e.id)):this.parentType=="routine"&&(t=this.todo.repeats.filter(e=>this.routineRepeatIDs.includes(e.routineRepeatID))),t?t.filter(e=>q(e)):[]},repeat(){if(this.displayedRepeatID){let t;return["goal","todo"].includes(this.parentType)?t=this.todo.repeats.find(e=>e.id==this.displayedRepeatID):this.parentType=="routine"&&(t=this.todo.repeats.find(e=>e.routineRepeatID==this.displayedRepeatID)),t?q(t):null}else return null}},methods:{}},S5={key:0,class:"wrapper d-flex flex-column"},T5={class:"d-flex flex-column flex-grow-1"},x5={class:"d-flex flex-row justify-content-between flex-grow-1"},E5={class:"d-flex flex-row"},I5={class:"id"},D5={class:"text"},k5={key:0};function C5(t,e,i,s,r,n){const o=T("RepeatControl");return n.todo?(f(),m("div",S5,[c("div",{class:"todo-form-item d-flex flex-row",onClick:e[1]||(e[1]=a=>t.repeatsShown=!t.repeatsShown)},[e[2]||(e[2]=c("img",{src:th,width:"18",height:"18"},null,-1)),c("div",T5,[c("div",x5,[c("div",E5,[c("span",I5,S(n.todo.id),1),c("span",D5,S(n.todo.text),1)]),c("button",{class:"btn-close mt-auto mb-auto",type:"button","aria-label":"close",onClick:e[0]||(e[0]=fe(a=>t.$emit("removeItem"),["stop"]))})])])]),t.repeatsShown?(f(),m("div",k5,[(f(!0),m(M,null,N(n.repeats,a=>(f(),K(o,{key:a.id,repeat:a,itemID:i.id,itemType:"todo"},null,8,["repeat","itemID"]))),128))])):y("",!0)])):y("",!0)}const zy=V(w5,[["render",C5],["__scopeId","data-v-daa50eb2"]]),P5={name:"GoalTimePairControl",components:{TimeControl:Sh,TodoFormItem:zy},props:{timePair:Object,itemID:Number,canEdit:Boolean},data:function(){return{goalStore:null,updatedTimePair:void 0,inheritanceTypes:q(z_),timeframes:q(Xs),TIMEFRAME:q(Zo),MOMENT:q(vv),TIMETYPE:q($T),isEditing:!1,isValid:!0,todoID:void 0}},created:async function(){let t=await U(()=>Promise.resolve().then(()=>Ri),void 0);this.goalStore=t.useGoalStore(),this.timePair.id<0&&(this.isEditing=!0);let e=this;this.inheritanceTypes.forEach(i=>{i.isSelected=e.timePair.idInheritance==i.id})},computed:{timeframe(){let t=this.isEditing?this.updatedTimePair:this.timePair,e=Xs.find(i=>i.id==t.idTimeframe);return e?e.text:""}},methods:{initUpdatedTimePair:M5,timeModelToString:C_,onTimePairClicked:A5,deleteTimePair:U5,toggleInheritance:O5,isInheritanceSelected:N5,toggleTimeframe:R5,isTimeframeSelected:L5,correctTimes:$5,addTime:V5,setTime:W5,removeTime:z5,validateTimes:F5,addTodo:j5,removeTodo:B5,save:H5,cancel:Y5},watch:{isEditing(t){t==!0&&this.initUpdatedTimePair()}}};function M5(){this.updatedTimePair=q(this.timePair),["startTime","endTime"].forEach(e=>{this.updatedTimePair[e]={isEdited:!1,isRemoved:!1,isValid:!0,value:this.updatedTimePair[e]?q(this.updatedTimePair[e]):null,oldValue:this.updatedTimePair[e]?q(this.updatedTimePair[e]):null}}),this.validateTimes()}function A5(){this.canEdit&&(this.isEditing=!0,this.$emit("setSelectedTimePair",this.timePair.id))}function O5(t){this.updatedTimePair.idInheritance=t,this.inheritanceTypes.forEach(e=>{e.isSelected=e.id==t})}function R5(t){let e=this;this.timeframes.forEach(i=>{i.id!=t?i.isSelected=!1:e.updatedTimePair.idTimeframe?e.updatedTimePair.idTimeframe!=t?(e.updatedTimePair.idTimeframe=t,i.isSelected=!0):(e.updatedTimePair.idTimeframe=void 0,i.isSelected=!1):(e.updatedTimePair.idTimeframe=t,i.isSelected=!0)}),this.correctTimes()}function $5(){let t=this.updatedTimePair.idTimeframe,e=this.updatedTimePair.startTime.value,i=this.updatedTimePair.endTime.value;t==this.TIMEFRAME.DAY?e?i.dateTime=new Date(e.dateTime).toISOString():i&&(e.dateTime=new Date(i.dateTime).toISOString()):t==this.TIMEFRAME.WEEK?e?(e.dateTime=lt(e.dateTime).toISOString(),i.dateTime=Ne(vt(e.dateTime)).toISOString()):i&&(e.dateTime=lt(i.dateTime).toISOString(),i.dateTime=Ne(vt(i.dateTime)).toISOString()):t==this.TIMEFRAME.MONTH?e?(e.dateTime=gt(e.dateTime).toISOString(),i.dateTime=Ne(Ot(e.dateTime)).toISOString()):i&&(e.dateTime=gt(i.dateTime).toISOString(),i.dateTime=Ne(Ot(i.dateTime)).toISOString()):t==this.TIMEFRAME.YEAR&&(e?(e.dateTime=ra(e.dateTime).toISOString(),i.dateTime=Ne(ti(e.dateTime)).toISOString()):i&&(e.dateTime=ti(i.dateTime).toISOString(),i.dateTime=Ne(ti(i.dateTime)).toISOString())),new Date(e.dateTime)!=new Date(this.timePair.startTime.dateTime)?this.updatedTimePair.startTime.isEdited=!0:this.updatedTimePair.startTime.isEdited=!1,new Date(i.dateTime)!=new Date(this.timePair.endTime.dateTime)?this.updatedTimePair.endTime.isEdited=!0:this.updatedTimePair.endTime.isEdited=!1,this.validateTimes()}function N5(t){return this.updatedTimePair.idInheritance==t}function L5(t){return this.updatedTimePair.idTimeframe==t}function V5(t){var e;t.toLowerCase()=="start"?e=84:t.toLowerCase()=="end"&&(e=85);var i=this.MOMENT.DATETIME,s=LD(new Date().toJSON());this.updatedTimePair[`${t.toLowerCase()}Time`]={isEdited:!1,isRemoved:!1,isValid:!0,value:{idEndpoint:e,idMoment:i,idType:80,dateTime:s},oldValue:{idEndpoint:e,idMoment:i,idType:80,dateTime:s}},this.correctTimes()}function W5(t,e){e=e.toLowerCase();let i=this.updatedTimePair[`${e}Time`];i.value.dateTime=t,i.oldValue.dateTime!=t&&i.oldValue.id?i.isEdited=!0:i.isEdited=!1;let s=this.updatedTimePair.startTime.value,r=this.updatedTimePair.endTime.value;this.updatedTimePair.idTimeframe?this.updatedTimePair.idTimeframe==this.TIMEFRAME.DAY?e=="start"?r.dateTime=t:e=="end"&&(s.dateTime=t):this.updatedTimePair.idTimeframe==this.TIMEFRAME.WEEK?e=="start"?(s.dateTime=lt(new Date(t)).toISOString(),r.dateTime=Ne(vt(new Date(t))).toISOString()):e=="end"&&(s.dateTime=lt(new Date(t)).toISOString(),r.dateTime=Ne(vt(new Date(t))).toISOString()):this.updatedTimePair.idTimeframe==this.TIMEFRAME.MONTH?e=="start"?(s.dateTime=gt(new Date(t)).toISOString(),r.dateTime=Ne(Ot(new Date(t))).toISOString()):e=="end"&&(s.dateTime=gt(new Date(t)).toISOString(),r.dateTime=Ne(Ot(new Date(t))).toISOString()):this.updatedTimePair.idTimeframe==this.TIMEFRAME.YEAR&&(e=="start"?(s.dateTime=ra(new Date(t)).toISOString(),r.dateTime=Ne(ti(new Date(t))).toISOString()):e=="end"&&(s.dateTime=ti(new Date(t)).toISOString(),r.dateTime=Ne(ti(new Date(t))).toISOString())):e=="start"&&r.dateTime?+new Date(r.dateTime)<+new Date(t)&&(r.dateTime=t):e=="end"&&s.dateTime&&+new Date(s.dateTime)>+new Date(t)&&(s.dateTime=t),this.validateTimes()}function z5(t){t.isRemoved=!0}function F5(){this.updatedTimePair.startTime.value&&this.updatedTimePair.endTime.value&&(+new Date(this.updatedTimePair.startTime.value.dateTime)>+new Date(this.updatedTimePair.endTime.value.dateTime)?(this.isValid=!1,this.updatedTimePair.startTime.isValid=!1,this.updatedTimePair.endTime.isValid=!1):(this.isValid=!0,this.updatedTimePair.startTime.isValid=!0,this.updatedTimePair.endTime.isValid=!0))}function j5(){var t=this.updatedTimePair.todoIDs.findIndex(e=>e==this.todoID);t==-1&&this.updatedTimePair.todoIDs.push(this.todoID),this.todoID=void 0}function B5(t){let e=this.updatedTimePair.todoIDs.findIndex(i=>i==t);this.updatedTimePair.todoIDs.splice(e,1)}function H5(){let t={id:this.updatedTimePair.id,idParent:this.updatedTimePair.idParent,idTimeType:this.TIMETYPE.SCHEDULED,idInheritance:this.updatedTimePair.idInheritance,idTimeframe:this.updatedTimePair.idTimeframe,points:this.updatedTimePair.points||null,startTime:this.updatedTimePair.startTime.value?this.updatedTimePair.startTime:null,endTime:this.updatedTimePair.endTime.value?this.updatedTimePair.endTime:null,isOwner:!0,isEventVisible:this.updatedTimePair.isEventVisible,isRecommended:this.updatedTimePair.isRecommended,itemID:this.itemID,itemType:"goal",addedTodoIDs:[],removedTodoIDs:[]},e=this;this.updatedTimePair.todoIDs.forEach(i=>{e.timePair.todoIDs.includes(i)||t.addedTodoIDs.push(i)}),this.timePair.todoIDs.forEach(i=>{e.updatedTimePair.todoIDs.includes(i)||t.removedTodoIDs.push(i)}),this.goalStore.saveTimePair(t),this.$emit("saveTimePair",t),this.isEditing=!1}function U5(){this.goalStore.deleteTimePair(this.timePair.id)}function Y5(){this.isEditing=!1,this.$emit("cancelTimePairEditing",this.timePair.id)}const G5={class:"goal-time-pair-control d-flex flex-column"},K5={class:"d-flex flex-row"},q5={class:"start d-flex flex-column"},J5={class:"blue"},Q5={key:0},Z5={key:1},X5={class:"inheritance d-flex flex-column mt-2"},e6={class:"pills d-flex flex-row justify-content-between gap-1"},t6=["onClick"],i6={class:"timeframe d-flex flex-column mt-2"},s6={class:"pills d-flex flex-row justify-content-between mt-1 gap-1"},n6=["onClick"],r6={class:"pills d-flex flex-row justify-content-between mt-1 gap-1"},o6=["onClick"],a6={class:"pills d-flex flex-row justify-content-between mt-1 gap-1"},l6=["onClick"],d6={class:"start d-flex flex-column mt-2"},c6={class:"d-flex flex-row justify-content-space-between"},u6={class:"end d-flex flex-column"},h6={class:"d-flex flex-row justify-content-space-between"},f6={class:"d-flex flex-column mt-2"},m6={class:"d-flex flex-column"},p6={class:"d-flex justify-content-end"};function g6(t,e,i,s,r,n){const o=T("TimeControl"),a=T("TodoFormItem");return f(),m("div",G5,[t.isEditing?y("",!0):(f(),m("div",{key:0,class:"wrapper d-flex flex-row justify-content-between",onClick:e[1]||(e[1]=(...l)=>n.onTimePairClicked&&n.onTimePairClicked(...l))},[c("div",K5,[e[10]||(e[10]=c("div",{class:"d-flex flex-column"},[c("img",{src:Th,width:"14",height:"14"})],-1)),c("div",q5,[c("div",null,[c("span",J5,S(n.timeframe),1)]),i.timePair.startTime?(f(),m("div",Q5,[e[8]||(e[8]=c("span",{class:"start-label"},"Start",-1)),c("span",null,S(n.timeModelToString(i.timePair.startTime)),1)])):y("",!0),i.timePair.endTime?(f(),m("div",Z5,[e[9]||(e[9]=c("span",{class:"end-label"},"End",-1)),c("span",null,S(n.timeModelToString(i.timePair.endTime)),1)])):y("",!0)])]),c("button",{class:"btn-close",type:"button","aria-label":"close",onClick:e[0]||(e[0]=fe((...l)=>n.deleteTimePair&&n.deleteTimePair(...l),["stop"]))})])),t.isEditing?(f(),m("div",{key:1,class:O(["wrapper-edit d-flex flex-column",{isValid:t.isValid}])},[c("div",X5,[e[11]||(e[11]=c("span",{class:"label text-start"},"Inheritance",-1)),c("div",e6,[(f(!0),m(M,null,N(t.inheritanceTypes,l=>(f(),m("span",{key:l.id,class:O(["pill flex-grow-1",{selected:n.isInheritanceSelected(l.id)}]),onClick:d=>n.toggleInheritance(l.id)},S(l.text),11,t6))),128))])]),c("div",i6,[e[12]||(e[12]=c("span",{class:"label text-start"},"Timeframe",-1)),c("div",s6,[(f(!0),m(M,null,N(t.timeframes.slice(0,3),l=>(f(),m("span",{key:l.id,class:O(["pill flex-grow-1",{selected:n.isTimeframeSelected(l.id)}]),onClick:d=>n.toggleTimeframe(l.id)},S(l.text),11,n6))),128))]),c("div",r6,[(f(!0),m(M,null,N(t.timeframes.slice(3,5),l=>(f(),m("span",{key:l.id,class:O(["pill flex-grow-1",{selected:n.isTimeframeSelected(l.id)}]),onClick:d=>n.toggleTimeframe(l.id)},S(l.text),11,o6))),128))]),c("div",a6,[(f(!0),m(M,null,N(t.timeframes.slice(-3),l=>(f(),m("span",{key:l.id,class:O(["pill flex-grow-1",{selected:n.isTimeframeSelected(l.id)}]),onClick:d=>n.toggleTimeframe(l.id)},S(l.text),11,l6))),128))])]),c("div",d6,[c("div",c6,[D(o,{class:O(["time-control",{invalid:!t.updatedTimePair.startTime.isValid}]),label:"Start",time:t.updatedTimePair.startTime.value,title:"Start",endpoint:"Start",type:"date",canRemove:!1,isSet:!t.updatedTimePair.startTime.isRemoved,onAddTime:n.addTime,onSetTime:n.setTime,onRemoveTime:e[2]||(e[2]=l=>n.removeTime(t.updatedTimePair.startTime))},null,8,["class","time","isSet","onAddTime","onSetTime"])]),c("div",u6,[c("div",h6,[D(o,{class:O(["time-control",{invalid:!t.updatedTimePair.endTime.isValid}]),label:"End",time:t.updatedTimePair.endTime.value,title:"End",endpoint:"End",type:"date",isSet:!t.updatedTimePair.endTime.isRemoved,onAddTime:n.addTime,onSetTime:n.setTime,onRemoveTime:e[3]||(e[3]=l=>n.removeTime(t.updatedTimePair.endTime))},null,8,["class","time","isSet","onAddTime","onSetTime"])])])]),c("div",f6,[e[13]||(e[13]=c("span",{class:"label text-start"},"Todos",-1)),H(c("input",{class:"textbox",type:"number",min:"1","onUpdate:modelValue":e[4]||(e[4]=l=>t.todoID=l),onKeyup:e[5]||(e[5]=wt((...l)=>n.addTodo&&n.addTodo(...l),["enter"])),spellcheck:"true"},null,544),[[Pe,t.todoID]]),c("div",m6,[(f(!0),m(M,null,N(t.updatedTimePair.todoIDs,l=>(f(),K(a,{key:l,id:l,parentID:i.itemID,parentType:"goal",routineRepeatIDs:[],parentRepeatIDs:[],onRemoveItem:d=>n.removeTodo(l)},null,8,["id","parentID","onRemoveItem"]))),128))])]),c("div",p6,[c("button",{class:"btn btn-sm btn-link",type:"button",onClick:e[6]||(e[6]=(...l)=>n.save&&n.save(...l))},"Save"),c("button",{class:"btn btn-sm btn-link",type:"button",onClick:e[7]||(e[7]=(...l)=>n.cancel&&n.cancel(...l))},"Cancel")])],2)):y("",!0)])}const v6=V(P5,[["render",g6],["__scopeId","data-v-f1947f5a"]]),_6={name:"GoalFormItem",components:{RepeatControl:ca},props:{id:Number,parentID:Number,parentType:String,displayedRepeatID:Number,routineRepeatIDs:Array},data:function(){return{store:null,repeatsShown:!1}},created:async function(){this.store=Yr()},computed:{goal(){return this.store?this.store.getItem(this.id):null},metricString(){return Ql(this.goal.metrics,"text")},repeats(){let t=this.goal.repeats.filter(e=>this.routineRepeatIDs.includes(e.routineRepeatID));return t?t.filter(e=>q(e)):[]},repeat(){if(this.displayedRepeatID){let t=this.goal.repeats.find(e=>e.routineRepeatID==this.displayedRepeatID);return t?q(t):null}else return null}},methods:{}},y6={key:0,class:"wrapper d-flex flex-column"},b6={class:"d-flex flex-column"},w6={class:"d-flex flex-row"},S6={class:"id"},T6={class:"text"},x6={key:0};function E6(t,e,i,s,r,n){const o=T("RepeatControl");return n.goal?(f(),m("div",y6,[c("div",{class:"goal d-flex flex-row",onClick:e[0]||(e[0]=a=>t.repeatsShown=!t.repeatsShown)},[e[1]||(e[1]=c("img",{src:ih,width:"18",height:"18"},null,-1)),c("div",b6,[c("div",w6,[c("span",S6,S(n.goal.id),1),c("span",T6,S(n.goal.text),1)])])]),t.repeatsShown?(f(),m("div",x6,[(f(!0),m(M,null,N(n.repeats,a=>(f(),K(o,{key:a.id,repeat:a,itemID:i.id,itemType:"goal"},null,8,["repeat","itemID"]))),128))])):y("",!0)])):y("",!0)}const I6=V(_6,[["render",E6],["__scopeId","data-v-952272d4"]]),D6={name:"FormItemList",components:{GoalFormItem:I6,TodoFormItem:zy},props:{itemType:String,itemIDs:Array,parentID:Number,parentType:String,repeatIDs:Array,isParent:Boolean,isChild:Boolean},data:function(){return{newItemText:"",isShown:!0}},computed:{title(){return this.isParent?"Parents":this.isChild?"Children":`${this.itemType}s`}},methods:{capitalize:Zs,addItem:k6,addItemClicked:C6}};function k6(){let t=this.itemType;this.isParent?t="parent":this.isChild?t="child":t=this.itemType,this.$emit("addItem",t,this.newItemText),this.newItemText=""}function C6(){let t=this.itemType;this.isParent?t="parent":this.isChild?t="child":t=this.itemType,this.$emit("addItemClicked",t)}const P6={class:"d-flex flex-column"},M6={class:"d-flex flex-row justify-content-between"},A6={class:"form-head"},O6={key:0,class:"caret mt-auto mb-auto me-2",src:jn,width:"5",height:"8"},R6={key:1,class:"caret mt-auto mb-auto me-2",src:oa,width:"8",height:"5"},$6={key:0,class:"d-flex flex-column"},N6={class:"d-flex justify-content-between mt-1 mb-1"},L6={class:"d-flex flex-column"},V6={key:0},W6={key:1};function z6(t,e,i,s,r,n){const o=T("GoalFormItem"),a=T("TodoFormItem");return f(),m("div",P6,[c("div",{class:"header d-flex flex-column",onClick:e[0]||(e[0]=l=>t.isShown=!t.isShown),onMouseover:e[1]||(e[1]=l=>t.hovered=!0)},[c("div",M6,[c("span",A6,S(n.capitalize(n.title)),1),t.isShown?y("",!0):(f(),m("img",O6)),t.isShown?(f(),m("img",R6)):y("",!0)]),e[5]||(e[5]=c("hr",null,null,-1))],32),t.isShown?(f(),m("div",$6,[c("div",N6,[c("button",{class:"add-btn my-auto",type:"button",onClick:e[2]||(e[2]=(...l)=>n.addItemClicked&&n.addItemClicked(...l))},e[6]||(e[6]=[c("img",{src:Nn,width:"10",height:"10"},null,-1),Js("Add ")])),H(c("input",{class:"add textbox",type:"text","onUpdate:modelValue":e[3]||(e[3]=l=>t.newItemText=l),onKeyup:e[4]||(e[4]=wt((...l)=>n.addItem&&n.addItem(...l),["enter"])),style:{width:"calc(100% - 55px)"}},null,544),[[Pe,t.newItemText]])]),c("div",L6,[i.itemType=="goal"?(f(),m("div",V6,[(f(!0),m(M,null,N(i.itemIDs,l=>(f(),K(o,{key:l,id:l,parentID:i.parentID,parentType:i.parentType,routineRepeatIDs:i.repeatIDs},null,8,["id","parentID","parentType","routineRepeatIDs"]))),128))])):y("",!0),i.itemType=="todo"?(f(),m("div",W6,[(f(!0),m(M,null,N(i.itemIDs,l=>(f(),K(a,{key:l,id:l,parentID:i.parentID,parentType:i.parentType,routineRepeatIDs:i.parentType=="routine"?i.repeatIDs:[],parentRepeatIDs:i.parentType=="todo"?i.repeatIDs:[]},null,8,["id","parentID","parentType","routineRepeatIDs","parentRepeatIDs"]))),128))])):y("",!0)])])):y("",!0)])}const xh=V(D6,[["render",z6],["__scopeId","data-v-e7bbeb15"]]),F6={name:"ItemMapper",props:{itemType:String,selectedIDs:Array},data:function(){return{store:null,items:[],itemList:[],originalIDs:[],addedIDs:[],removedIDs:[],searchTerm:""}},created:async function(){let e=(await Vy(Object.assign({"../../../../store/appStore.js":()=>U(()=>Promise.resolve().then(()=>dn),void 0),"../../../../store/eventStore.js":()=>U(()=>Promise.resolve().then(()=>$s),void 0),"../../../../store/goalStore.js":()=>U(()=>Promise.resolve().then(()=>Ri),void 0),"../../../../store/itemTableStore.js":()=>U(()=>import("./itemTableStore-FgWJrjMO.js"),[]),"../../../../store/iterationStore.js":()=>U(()=>Promise.resolve().then(()=>Et),void 0),"../../../../store/metricStore.js":()=>U(()=>Promise.resolve().then(()=>Uc),void 0),"../../../../store/physicalStore.js":()=>U(()=>Promise.resolve().then(()=>xy),void 0),"../../../../store/plannerStore.js":()=>U(()=>Promise.resolve().then(()=>He),void 0),"../../../../store/routineStore.js":()=>U(()=>Promise.resolve().then(()=>Lo),void 0),"../../../../store/todoStore.js":()=>U(()=>Promise.resolve().then(()=>Oi),void 0),"../../../../store/universalStore.js":()=>U(()=>Promise.resolve().then(()=>Hh),void 0),"../../../../store/workoutStore.js":()=>U(()=>Promise.resolve().then(()=>eh),void 0)}),`../../../../store/${this.itemType}Store.js`,6))[`use${Zs(this.itemType)}Store`];this.store=e(),this.setItems(),this.setItemList()},methods:{setItems(){let t=[];this.store.getItems().forEach(i=>{t.push({id:i.id,text:i.text,isSelected:!!this.selectedIDs.includes(i.id)})}),this.items=t},setItemList(){this.searchTerm!=""?this.itemList=this.items.filter(t=>t.text.toLowerCase().includes(this.searchTerm.toLowerCase())):this.itemList=this.items},itemClicked(t){if(t.isSelected=!t.isSelected,t.isSelected){let e=this.removedIDs.findIndex(i=>i==t.id);e!=-1&&this.removedIDs.splice(e,1),this.selectedIDs.includes(t.id)||this.addedIDs.push(t.id)}else{let e=this.addedIDs.findIndex(i=>i==t.id);e!=-1&&this.addedIDs.splice(e,1),this.selectedIDs.includes(t.id)&&this.removedIDs.push(t.id)}},save(){this.$emit("select",this.addedIDs,this.removedIDs)}},watch:{searchTerm(){this.setItemList()}}},j6={class:"d-flex flex-column"},B6=["onClick"],H6={class:"id"},U6={class:"text"},Y6={class:"modal-footer footer"};function G6(t,e,i,s,r,n){return f(),m("div",j6,[H(c("input",{class:"search textbox mb-2",type:"text",placeholder:"Search","onUpdate:modelValue":e[0]||(e[0]=o=>t.searchTerm=o)},null,512),[[Pe,t.searchTerm]]),(f(!0),m(M,null,N(t.itemList,o=>(f(),m("div",{key:o.id,class:O(["d-flex flex-row",{selected:o.isSelected}]),onClick:a=>n.itemClicked(o)},[c("span",H6,S(o.id),1),c("span",U6,S(o.text),1)],10,B6))),128)),c("div",Y6,[c("button",{type:"button",class:"btn btn-secondary",onClick:e[1]||(e[1]=o=>t.$emit("cancel"))},"Cancel"),c("button",{type:"button",class:"btn btn-primary",onClick:e[2]||(e[2]=o=>n.save())},"Save")])])}const Eh=V(F6,[["render",G6],["__scopeId","data-v-f6b8ec2a"]]),K6={name:"GoalFormModal",components:{RepeatControl:ca,GoalTimePairControl:v6,ItemMapper:Eh,FormItemList:xh,BlurbFormControl:Oy},props:{id:Number},data:function(){return{store:null,plannerStore:null,BLURBTYPE:Ga,text:{value:void 0,oldValue:void 0,isUpdated:!1},description:{value:void 0,oldValue:void 0,isUpdated:!1},timeframes:{value:void 0,original:void 0,addedIDs:void 0,removedIDs:void 0},repeats:{value:[],added:[],deletedIDs:[]},timePairs:{value:[],added:[],deletedIDs:[]},children:{ids:[],value:[],newItems:[],addedIDs:[],removedIDs:[]},reasons:[],reason:void 0,selectedRepeatID:void 0,selectedTimePairID:void 0,mapper:{isShown:!1,type:void 0},isRepetitionShown:!0,isTimeShown:!0}},created:async function(){let t=await U(()=>Promise.resolve().then(()=>Ri),void 0);this.store=t.useGoalStore();let e=await U(()=>Promise.resolve().then(()=>He),void 0);this.plannerStore=e.usePlannerStore();let i=this.store.getItem(this.id);this.setProps(i)},computed:{goal(){if(this.store){let t=this.store.getItem(this.id);return this.setProps(t),t}else return null},parentIDs(){if(this.goal){var t=En(this.goal.parents,"goal",this.id);return t.map(e=>e.id)}else return[]},childIDs(){if(this.goal){var t=En(this.goal.children,"goal",this.id);return t.map(e=>e.id)}else return[]},todoIDs(){if(this.goal){var t=En(this.goal.todos,"goal",this.id);return t.map(e=>e.id)}else return[]},repeatIDs(){var t;return(t=this.repeats)!=null&&t.value?this.repeats.value.map(e=>e.id):[]}},methods:{setProps(t){this.text.value=t.text,this.text.oldValue=t.text,this.text.isUpdated=!1,this.description.value=t.description,this.description.oldValue=t.description,this.description.isUpdated=!1,this.timeframes={value:[],original:[],addedIDs:[],removedIDs:[]},t.timeframes.forEach(e=>{this.timeframes.value.push(e),this.timeframes.original.push(e)}),this.timePairs.value=q(t.timePairs),this.timePairs.added=[],this.timePairs.updated=[],this.timePairs.deletedIDs=[],this.reasons=t.blurbs.filter(e=>e.type.id==this.BLURBTYPETYPE.REASON)},setSelectedRepeat(t){this.selectedRepeatID=t},setSelectedTimePair(t){this.selectedTimePairID=t},toggleTimeframe(t){t.isSelected?this.addTimeframe(t):this.removeTimeframe(t)},addTimeframe(t){if(this.timeframes.value.findIndex(s=>s.id==t.id)==-1){this.timeframes.value.push(t),this.timeframes.original.findIndex(s=>s.id==t.id)==-1&&this.timeframes.addedIDs.push(t.id);var i=this.timeframes.removedIDs.findIndex(s=>s==t.id);i>-1&&this.timeframes.removedIDs.splice(i,1)}},removeTimeframe(t){let e=this.timeframes.value.findIndex(s=>s.id==t.id);if(e>-1){this.timeframes.value.splice(e,1),this.timeframes.original.findIndex(s=>s.id==t.id)>-1&&this.timeframes.removedIDs.push(t.id);var i=this.timeframes.addedIDs.findIndex(s=>s==t.id);i>-1&&this.timeframes.addedIDs.splice(i,1)}},selectItems(t,e,i){this.store.mapItems(this.id,t,e,i),this.mapper.isShown=!1,this.mapper.type=void 0},saveDescription(){this.id>0&&this.description.value.trim()!=""&&this.description.value!=this.description.oldValue&&this.store.saveDescription(this.id,this.description.value)},saveRepeat(t){let e=q(t);e.startRepeat=e.startRepeat.value,e.endRepeat=e.endRepeat?e.endRepeat.value:null,e.startIteration=e.startIteration?e.startIteration.value:null,e.endIteration=e.endIteration?e.endIteration.value:null,Ai(e,this.repeats.value);let i=q(t);t.id>0?bs(i,this.repeats.updated):bs(i,this.repeats.added),this.selectedRepeatID=void 0},saveTimePair(t){let e=q(t);e.startAt=e.startAt?e.startAt.value:null,e.endAt=e.endAt?e.endAt.value:null,Ai(e,this.timePairs.value);let i=q(t);t.id>0?bs(i,this.timePairs.updated):bs(i,this.timePairs.added),this.selectedTimePairID=void 0},save(){let t={id:this.id,text:this.text};Hc(t),this.$emit("closeItemModal")},addItem(t,e){this.store.createAndMapItem(this.id,t,e)},addItemClicked(t){this.mapper.isShown=!0,this.mapper.type=t},addRepeatClicked(){let t=xe(this.repeats.value,"id"),e=this.plannerStore.createRepeat();e.id=t.length>0&&t[0].id<0?t[0].id-1:-1,this.repeats.value.unshift(e)},addTimeClicked(){let t=xe(this.timePairs.value,"id"),e=this.plannerStore.createTimePair();e.idInheritance=NT.SELF,e.id=t.length>0&&t[0].id<0?t[0].id-1:-1,this.timePairs.value.unshift(e)},addReason(t){this.id>0&&t.trim()!=""&&this.store.addReason(this.id,new Date,t)},cancelMapping(){this.mapper.isShown=!1,this.mapper.type=void 0},cancelRepeatEditing(t){if(t<0){let e=this.repeats.value.findIndex(i=>i.id==t);this.repeats.value.splice(e,1)}this.selectedRepeatID=void 0},cancelTimePairEditing(t){if(t<0){let e=this.timePairs.value.findIndex(i=>i.id==t);this.timePairs.value.splice(e,1)}this.selectedTimePairID=void 0},getDateString(t){if(t){let e=new Date(t);return R_(e)}return""}},watch:{"text.value"(t){t!=this.text.oldValue?this.text.isUpdated=!0:this.isUpdated=!1},"description.value"(t){t!=this.description.oldValue?(this.description.isUpdated=!0,this.saveDescription()):this.isUpdated=!1}}},q6=["id"],J6={class:"modal-content"},Q6={class:"modal-header"},Z6={class:"me-2"},X6={class:"modal-body"},eY={key:0,class:"container-fluid"},tY={class:"label row gx-0"},iY={class:"col"},sY={class:"body row gx-0"},nY={class:"blurb col-12 col-sm-12 col-md-4 col-lg-6 mt-2"},rY={class:"description d-flex flex-column"},oY={class:"items col-12 col-sm-6 col-md-4 col-lg-3 mt-2 form-column"},aY={class:"time col-12 col-sm-6 col-md-4 col-lg-3 mt-2 d-flex flex-column"},lY={class:"d-flex flex-column"},dY={class:"d-flex flex-row justify-content-between"},cY={key:0,class:"caret mt-auto mb-auto me-2",src:jn,width:"5",height:"8"},uY={key:1,class:"caret mt-auto mb-auto me-2",src:oa,width:"8",height:"5"},hY={key:0,class:"d-flex flex-column"},fY={class:"d-flex justify-content-between mt-1 mb-1"},mY={class:"d-flex flex-column"},pY={class:"d-flex flex-row justify-content-between"},gY={key:0,class:"caret mt-auto mb-auto me-2",src:jn,width:"5",height:"8"},vY={key:1,class:"caret mt-auto mb-auto me-2",src:oa,width:"8",height:"5"},_Y={key:0,class:"d-flex flex-column"},yY={class:"d-flex justify-content-between mt-1 mb-1"},bY={key:1,class:"container"},wY={class:"row g-2"},SY={class:"col-12"},TY={key:0,class:"modal-footer"};function xY(t,e,i,s,r,n){const o=T("BlurbFormControl"),a=T("FormItemList"),l=T("RepeatControl"),d=T("GoalTimePairControl"),u=T("ItemMapper");return f(),m("div",{id:`goal-form-modal-${i.id}`,class:"modal-dialog modal-xl modal-fullscreen-md-down modal-dialog modal-dialog-centered modal-dialog-scrollable"},[c("div",J6,[c("div",Q6,[c("span",Z6,"Goal "+S(n.goal?n.goal.id:""),1),e[15]||(e[15]=c("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1))]),c("div",X6,[t.mapper.isShown?y("",!0):(f(),m("div",eY,[c("div",tY,[c("div",iY,[H(c("input",{id:"text",class:"textbox",type:"text",placeholder:"Title","onUpdate:modelValue":e[0]||(e[0]=h=>t.text.value=h),onKeyup:e[1]||(e[1]=wt(h=>n.save(),["enter"])),spellcheck:"true"},null,544),[[Pe,t.text.value,void 0,{lazy:!0,trim:!0}]])])]),c("div",sY,[c("div",nY,[c("div",rY,[e[16]||(e[16]=c("div",{class:"header d-flex flex-column"},[c("div",{class:"d-flex flex-row justify-content-between"},[c("span",{class:"form-head text-start"},"Description"),c("img",{class:"caret mt-auto mb-auto me-2",src:jn,width:"5",height:"8"})]),c("hr")],-1)),H(c("textarea",{class:"textarea","onUpdate:modelValue":e[2]||(e[2]=h=>t.description.value=h),placeholder:"Click to add Description",spellcheck:"true"},null,512),[[Pe,t.description.value,void 0,{lazy:!0,trim:!0}]])]),D(o,{title:"Reasons",placeholder:"Click to add Reason",blurbs:t.reasons,onAddBlurb:e[3]||(e[3]=h=>n.addReason(h))},null,8,["blurbs"])]),c("div",oY,[D(a,{itemType:"goal",itemIDs:n.parentIDs,isParent:!0,parentType:"goal",parentID:i.id,repeatIDs:n.repeatIDs,onAddItemClicked:n.addItemClicked,onAddItem:n.addItem},null,8,["itemIDs","parentID","repeatIDs","onAddItemClicked","onAddItem"]),D(a,{itemType:"goal",itemIDs:n.childIDs,isChild:!0,parentType:"goal",parentID:i.id,repeatIDs:n.repeatIDs,onAddItemClicked:n.addItemClicked,onAddItem:n.addItem},null,8,["itemIDs","parentID","repeatIDs","onAddItemClicked","onAddItem"]),D(a,{itemType:"todo",itemIDs:n.todoIDs,parentType:"goal",parentID:i.id,repeatIDs:n.repeatIDs,onAddItemClicked:n.addItemClicked,onAddItem:n.addItem},null,8,["itemIDs","parentID","repeatIDs","onAddItemClicked","onAddItem"])]),c("div",aY,[c("div",lY,[c("div",{class:"header d-flex flex-column",onClick:e[4]||(e[4]=h=>t.isRepetitionShown=!t.isRepetitionShown)},[c("div",dY,[e[17]||(e[17]=c("span",{class:"form-head text-start"},"Repetition",-1)),t.isShown?y("",!0):(f(),m("img",cY)),t.isShown?(f(),m("img",uY)):y("",!0)]),e[18]||(e[18]=c("hr",null,null,-1))]),t.isRepetitionShown?(f(),m("div",hY,[c("div",fY,[c("button",{class:"add-btn my-auto",type:"button",onClick:e[5]||(e[5]=(...h)=>n.addRepeatClicked&&n.addRepeatClicked(...h))},e[19]||(e[19]=[c("img",{src:Nn,width:"10",height:"10"},null,-1),Js("Add ")]))]),c("div",null,[(f(!0),m(M,null,N(t.repeats.value,h=>(f(),K(l,{key:h.id,repeat:h,itemID:i.id,itemType:"goal",canEdit:t.selectedRepeatID==null,onSaveRepeat:n.saveRepeat,onSetSelectedRepeat:n.setSelectedRepeat,onCancelRepeatEditing:n.cancelRepeatEditing},null,8,["repeat","itemID","canEdit","onSaveRepeat","onSetSelectedRepeat","onCancelRepeatEditing"]))),128))])])):y("",!0)]),c("div",mY,[c("div",{class:"header d-flex flex-column",onClick:e[6]||(e[6]=h=>t.isTimeShown=!t.isTimeShown)},[c("div",pY,[e[20]||(e[20]=c("span",{class:"form-head text-start"},"Time",-1)),t.isShown?y("",!0):(f(),m("img",gY)),t.isShown?(f(),m("img",vY)):y("",!0)]),e[21]||(e[21]=c("hr",null,null,-1))]),t.isTimeShown?(f(),m("div",_Y,[c("div",yY,[c("button",{class:"add-btn my-auto",type:"button",onClick:e[7]||(e[7]=(...h)=>n.addTimeClicked&&n.addTimeClicked(...h))},e[22]||(e[22]=[c("img",{src:Nn,width:"10",height:"10"},null,-1),Js("Add ")]))]),c("div",null,[(f(!0),m(M,null,N(t.timePairs.value,h=>(f(),K(d,{key:h.id,timePair:h,itemID:i.id,canEdit:t.selectedTimePairID==null,onSaveTimePair:n.saveTimePair,onSetSelectedTimePair:n.setSelectedTimePair,onCancelTimePairEditing:n.cancelTimePairEditing},null,8,["timePair","itemID","canEdit","onSaveTimePair","onSetSelectedTimePair","onCancelTimePairEditing"]))),128))])])):y("",!0)])])])])),t.mapper.isShown?(f(),m("div",bY,[c("div",wY,[c("div",SY,[t.mapper.type=="parent"?(f(),K(u,{key:0,itemType:"goal",selectedIDs:n.parentIDs,onClose:e[8]||(e[8]=h=>t.mapper.isShown=!1),onCancel:n.cancelMapping,onSelect:e[9]||(e[9]=(h,p)=>n.selectItems("parent",h,p))},null,8,["selectedIDs","onCancel"])):y("",!0),t.mapper.type=="child"?(f(),K(u,{key:1,itemType:"goal",selectedIDs:n.childIDs,onClose:e[10]||(e[10]=h=>t.mapper.isShown=!1),onCancel:n.cancelMapping,onSelect:e[11]||(e[11]=(h,p)=>n.selectItems("child",h,p))},null,8,["selectedIDs","onCancel"])):y("",!0),t.mapper.type=="todo"?(f(),K(u,{key:2,itemType:"todo",selectedIDs:n.todoIDs,onClose:e[12]||(e[12]=h=>t.mapper.isShown=!1),onCancel:n.cancelMapping,onSelect:e[13]||(e[13]=(h,p)=>n.selectItems("todo",h,p))},null,8,["selectedIDs","onCancel"])):y("",!0)])])])):y("",!0)]),t.mapper.isShown?y("",!0):(f(),m("div",TY,[e[23]||(e[23]=c("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close",-1)),c("button",{type:"button",class:"btn btn-primary",onClick:e[14]||(e[14]=h=>n.save())},"Save changes")]))])],8,q6)}const EY=V(K6,[["render",xY],["__scopeId","data-v-ff93d582"]]),IY={name:"RoutineFormModal",components:{RepeatControl:ca,ItemMapper:Eh,FormItemList:xh},props:{id:Number},data:function(){return{store:null,initialized:!1,ROUTINETYPES:q(gv),text:void 0,isTaskRoutine:void 0,repeats:{value:[],added:[],deletedIDs:[]},todos:{ids:[],value:[],newItems:[],addedIDs:[],removedIDs:[]},selectedRepeatID:void 0,mapper:{isShown:!1,type:void 0}}},created:async function(){let t=await U(()=>Promise.resolve().then(()=>Lo),void 0);this.store=t.useRoutineStore();let e=await U(()=>Promise.resolve().then(()=>He),void 0);this.plannerStore=e.usePlannerStore();let i=this.store.getItem(this.id);this.setProps(i)},computed:{routine(){if(this.store){let t=this.store.getItem(this.id);return this.setProps(t),t}else return null},todoIDs(){if(this.routine){var t=En(this.routine.todos,"routine",this.id);return t.map(e=>e.id)}else return[]},repeatIDs(){var t;return(t=this.repeats)!=null&&t.value?this.repeats.value.map(e=>e.id):[]}},methods:{setProps(t){this.initialized=!1,this.text=t?t.text:"";let e=t?t.types.findIndex(i=>i.id==this.ROUTINETYPES.TASKROUTINE):-1;this.isTaskRoutine=e>-1,this.repeats.value=t?q(t.repeats):[],this.repeats.added=[],this.repeats.updated=[],this.repeats.deletedIDs=[],this.initialized=!0},setSelectedRepeat(t){this.selectedRepeatID=t},selectTodos(t,e){this.todos.addedIDs=[...t],this.todos.removedIDs=[...e],jR(this.id,t,e),this.mapper.isShown=!1,this.mapper.type=void 0},addRepeatClicked(){let t=xe(this.repeats.value,"id"),e=this.plannerStore.createRepeat();e.id=t.length>0&&t[0].id<0?t[0].id-1:-1,this.repeats.value.unshift(e)},saveRepeat(t){let e=q(t);e.startRepeat=e.startRepeat.value,e.endRepeat=e.endRepeat.value,Ai(e,this.repeats.value);let i=q(t);bs(i,this.repeats.updated),this.selectedRepeatID=void 0},save(){if(this.text.trim()){let t={id:this.id,text:this.text,isTaskRoutine:this.isTaskRoutine};Q_(t),this.$emit("closeItemModal")}},addItem(t,e){BR(this.id,t,e)},addTodoClicked(){this.mapper.isShown=!0,this.mapper.type="todo"},cancelMapping(){this.mapper.isShown=!1,this.mapper.type=void 0},cancelRepeatEditing(t){if(t<0){let e=this.repeats.value.findIndex(i=>i.id==t);this.repeats.value.splice(e,1)}this.selectedRepeatID=void 0},refreshRepetitionForRepeat(t){this.store.refreshRepetitionForRepeat(this.id,t)}},watch:{isTaskRoutine(){this.initialized&&this.id>-1&&this.store.toggleIsTaskRoutine(this.id,this.isTaskRoutine)}}},DY=["id"],kY={class:"modal-content"},CY={class:"modal-header"},PY=["id"],MY={class:"modal-body"},AY={key:0,class:"container-fluid"},OY={class:"row g-2"},RY={class:"col-12"},$Y={class:"row g-2"},NY={class:"col-4"},LY={class:"form-check"},VY={class:"row g-2"},WY={class:"col-4 form-column"},zY={class:"col-4 d-flex flex-column"},FY={class:"d-flex justify-content-between mt-1 mb-1"},jY={key:1,class:"container"},BY={class:"row g-2"},HY={class:"col-12"},UY={key:0,class:"modal-footer"};function YY(t,e,i,s,r,n){const o=T("FormItemList"),a=T("RepeatControl"),l=T("ItemMapper");return f(),m("div",{id:`routine-form-modal-${i.id}`,class:"modal-dialog modal-xl modal-fullscreen-md-down modal-dialog modal-dialog-centered modal-dialog-scrollable"},[c("div",kY,[c("div",CY,[c("h5",{class:"modal-title",id:`routine-${i.id}-ModalLabel`},S(n.routine?n.routine.id:""),9,PY),e[6]||(e[6]=c("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1))]),c("div",MY,[t.mapper.isShown?y("",!0):(f(),m("div",AY,[c("div",OY,[c("div",RY,[H(c("input",{id:"text",class:"textbox",type:"text",placeholder:"Title","onUpdate:modelValue":e[0]||(e[0]=d=>t.text=d),onKeyup:e[1]||(e[1]=wt(d=>n.save(),["enter"])),spellcheck:"true"},null,544),[[Pe,t.text,void 0,{lazy:!0,trim:!0}]])])]),c("div",$Y,[c("div",NY,[c("div",LY,[H(c("input",{class:"form-check-input mt-1",type:"checkbox",value:"",id:"is-task-routine","onUpdate:modelValue":e[2]||(e[2]=d=>t.isTaskRoutine=d)},null,512),[[ci,t.isTaskRoutine]]),e[7]||(e[7]=c("label",{class:"form-check-label float-start",for:"is-task-routine"}," Task-Routine ",-1))])])]),c("div",VY,[e[10]||(e[10]=c("div",{class:"col-4"},null,-1)),c("div",WY,[D(o,{itemType:"todo",itemIDs:n.todoIDs,parentType:"routine",parentID:i.id,repeatIDs:n.repeatIDs,onAddItemClicked:n.addTodoClicked,onAddItem:n.addItem},null,8,["itemIDs","parentID","repeatIDs","onAddItemClicked","onAddItem"])]),c("div",zY,[e[9]||(e[9]=c("span",{class:"form-head"},"Repetition",-1)),c("div",FY,[c("button",{class:"add-btn my-auto",type:"button",onClick:e[3]||(e[3]=(...d)=>n.addRepeatClicked&&n.addRepeatClicked(...d))},e[8]||(e[8]=[c("img",{src:Nn,width:"10",height:"10"},null,-1),Js("Add ")]))]),c("div",null,[(f(!0),m(M,null,N(t.repeats.value,d=>(f(),K(a,{key:d.id,repeat:d,itemID:i.id,itemType:"routine",canEdit:t.selectedRepeatID==null,onRefreshRepetition:n.refreshRepetitionForRepeat,onSaveRepeat:n.saveRepeat,onSetSelectedRepeat:n.setSelectedRepeat,onCancelRepeatEditing:n.cancelRepeatEditing},null,8,["repeat","itemID","canEdit","onRefreshRepetition","onSaveRepeat","onSetSelectedRepeat","onCancelRepeatEditing"]))),128))])])])])),t.mapper.isShown&&t.mapper.type=="todo"?(f(),m("div",jY,[c("div",BY,[c("div",HY,[D(l,{itemType:"todo",selectedIDs:n.todoIDs,onClose:e[4]||(e[4]=d=>t.mapper.isShown=!1),onCancel:n.cancelMapping,onSelect:n.selectTodos},null,8,["selectedIDs","onCancel","onSelect"])])])])):y("",!0)]),t.mapper.isShown?y("",!0):(f(),m("div",UY,[e[11]||(e[11]=c("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close",-1)),c("button",{type:"button",class:"btn btn-primary",onClick:e[5]||(e[5]=d=>n.save())},"Save")]))])],8,DY)}const GY=V(IY,[["render",YY],["__scopeId","data-v-20f0395b"]]),KY={name:"TimePairControl",components:{TimeControl:Sh},props:{timePair:Object,itemID:Number,itemType:String,canEdit:Boolean},data:function(){return{todoStore:null,goalStore:null,TIMEFRAME:q(Zo),timeframes:q(Xs),inheritanceTypes:q(z_),updatedTimePair:void 0,todoTimePairs:[],isEditing:!1,isValid:!0}},created:async function(){let t=await U(()=>Promise.resolve().then(()=>Oi),void 0);this.todoStore=t.useTodoStore();let e=await U(()=>Promise.resolve().then(()=>Ri),void 0);this.goalStore=e.useGoalStore(),this.timePair.id<0&&(this.isEditing=!0)},computed:{timeframe(){let t=this.isEditing?this.updatedTimePair:this.timePair,e=Xs.find(i=>i.id==t.idTimeframe);return e?e.text:""}},methods:{initUpdatedTimePair:qY,onTimePairClicked:QY,setTimeframe:JY,timeModelToString:C_,addTime:ZY,setTime:XY,removeTime:eG,validateTimes:tG,cancel(){this.isEditing=!1,this.$emit("cancelTimePairEditing",this.timePair.id)},save:iG,deleteTimePair:sG},watch:{isEditing(t){t==!0&&this.initUpdatedTimePair()}}};function qY(){this.updatedTimePair=q(this.timePair),["startTime","endTime"].forEach(e=>{this.updatedTimePair[e]={isEdited:!1,isRemoved:!1,isValid:!0,value:this.updatedTimePair[e]?q(this.updatedTimePair[e]):null,oldValue:this.updatedTimePair[e]?q(this.updatedTimePair[e]):null}}),this.validateTimes()}function JY(){let t=this.updatedTimePair.idTimeframe,e=this.updatedTimePair.startTime.value,i=this.updatedTimePair.endTime.value;t==this.TIMEFRAME.DAY?e?i.dateTime=e.dateTime.toISOString():i&&(e.dateTime=i.dateTime.toISOString()):t==this.TIMEFRAME.WEEK?e?(e.dateTime=lt(e.dateTime).toISOString(),i.dateTime=Ne(vt(e.dateTime)).toISOString()):i&&(e.dateTime=lt(i.dateTime).toISOString(),i.dateTime=Ne(vt(i.dateTime)).toISOString()):t==this.TIMEFRAME.MONTH?e?(e.dateTime=gt(e.dateTime).toISOString(),i.dateTime=Ne(Ot(e.dateTime)).toISOString()):i&&(e.dateTime=gt(i.dateTime).toISOString(),i.dateTime=Ne(Ot(i.dateTime)).toISOString()):t==this.TIMEFRAME.YEAR&&(e?(e.dateTime=ra(e.dateTime).toISOString(),i.dateTime=Ne(ti(e.dateTime)).toISOString()):i&&(e.dateTime=ti(i.dateTime).toISOString(),i.dateTime=Ne(ti(i.dateTime)).toISOString()))}function QY(){this.canEdit&&(this.isEditing=!0,this.$emit("setSelectedTimePair",this.timePair.id))}function ZY(t){var e;t.toLowerCase()=="start"?e=84:t.toLowerCase()=="end"&&(e=85);var i=vv.DATE,s=Zl(new Date().toJSON());this.timePair[`${t.toLowerCase()}Time`]={isEdited:!1,isRemoved:!1,isValid:!0,value:{idEndpoint:e,idMoment:i,idType:80,dateTime:s},oldValue:{idEndpoint:e,idMoment:i,idType:80,dateTime:s}}}function XY(t,e){e=e.toLowerCase();let i=this.updatedTimePair[`${e}Time`];i.value.dateTime=t,i.oldValue.dateTime!=t&&i.oldValue.id?i.isEdited=!0:i.isEdited=!1;let s=this.updatedTimePair.startTime.value,r=this.updatedTimePair.endTime.value;this.updatedTimePair.idTimeframe?this.updatedTimePair.idTimeframe==this.TIMEFRAME.DAY?e=="start"?r.dateTime=t:e=="end"&&(s.dateTime=t):this.updatedTimePair.idTimeframe==this.TIMEFRAME.WEEK?e=="start"?(s.dateTime=lt(new Date(t)).toISOString(),r.dateTime=Ne(vt(new Date(t))).toISOString()):e=="end"&&(s.dateTime=lt(new Date(t)).toISOString(),r.dateTime=Ne(vt(new Date(t))).toISOString()):this.updatedTimePair.idTimeframe==this.TIMEFRAME.MONTH?e=="start"?(s.dateTime=gt(new Date(t)).toISOString(),r.dateTime=Ne(Ot(new Date(t))).toISOString()):e=="end"&&(s.dateTime=gt(new Date(t)).toISOString(),r.dateTime=Ne(Ot(new Date(t))).toISOString()):this.updatedTimePair.idTimeframe==this.TIMEFRAME.YEAR&&(e=="start"?(s.dateTime=ra(new Date(t)).toISOString(),r.dateTime=Ne(ti(new Date(t))).toISOString()):e=="end"&&(s.dateTime=ti(new Date(t)).toISOString(),r.dateTime=Ne(ti(new Date(t))).toISOString())):e=="start"&&r.dateTime?+new Date(r.dateTime)<+new Date(t)&&(r.dateTime=t):e=="end"&&s.dateTime&&+new Date(s.dateTime)>+new Date(t)&&(s.dateTime=t),this.validateTimes()}function eG(t){t.isRemoved=!0}function tG(){this.updatedTimePair.startTime.value&&this.updatedTimePair.endTime.value&&(+new Date(this.updatedTimePair.startTime.value.dateTime)>+new Date(this.updatedTimePair.endTime.value.dateTime)?(this.isValid=!1,this.updatedTimePair.startTime.isValid=!1,this.updatedTimePair.endTime.isValid=!1):(this.isValid=!0,this.updatedTimePair.startTime.isValid=!0,this.updatedTimePair.endTime.isValid=!0))}function iG(){let t={id:this.updatedTimePair.id,idParent:this.updatedTimePair.idParent,idTimeType:this.updatedTimePair.idTimeType||80,idInheritance:this.updatedTimePair.idInheritance,idTimeframe:this.updatedTimePair.idTimeframe,points:this.updatedTimePair.points||null,startTime:this.updatedTimePair.startTime.value?this.updatedTimePair.startTime:null,endTime:this.updatedTimePair.endTime.value?this.updatedTimePair.endTime:null,isOwner:!0,isEventVisible:this.updatedTimePair.isEventVisible,isRecommended:this.updatedTimePair.isRecommended,itemID:this.itemID,itemType:this.itemType.toLowerCase()};this.itemType.toLowerCase()=="goal"?J_(t):this.itemType.toLowerCase()=="todo"&&kR(t),this.$emit("saveTimePair",t),this.isEditing=!1}function sG(){this.itemType.toLowerCase()=="goal"?this.goalStore.deleteTimePair(this.timePair.id):this.itemType.toLowerCase()=="todo"&&this.todoStore.deleteTimePair(this.timePair.id)}const nG={class:"d-flex flex-row"},rG={class:"start d-flex flex-column"},oG={class:"blue"},aG={key:0},lG={key:1},dG={class:"d-flex flex-column mb-1"},cG=["value"],uG={class:"d-flex flex-column"},hG=["value"],fG={class:"points d-flex flex-row align-items-center mt-1"},mG={class:"d-flex flex-column"},pG={class:"d-flex flex-column"},gG={class:"d-flex flex-column"},vG={class:"form-check"},_G={class:"form-check"},yG={class:"d-flex justify-content-end"};function bG(t,e,i,s,r,n){const o=T("TimeControl");return f(),m("div",null,[t.isEditing?y("",!0):(f(),m("div",{key:0,class:"wrapper d-flex flex-row justify-content-between",onClick:e[1]||(e[1]=(...a)=>n.onTimePairClicked&&n.onTimePairClicked(...a))},[c("div",nG,[e[14]||(e[14]=c("div",{class:"d-flex flex-column"},[c("img",{src:Th,width:"14",height:"14"})],-1)),c("div",rG,[c("div",null,[c("span",oG,S(n.timeframe),1)]),i.timePair.startTime?(f(),m("div",aG,[e[12]||(e[12]=c("span",{class:"start-label"},"Start",-1)),c("span",null,S(n.timeModelToString(i.timePair.startTime)),1)])):y("",!0),i.timePair.endTime?(f(),m("div",lG,[e[13]||(e[13]=c("span",{class:"end-label"},"End",-1)),c("span",null,S(n.timeModelToString(i.timePair.endTime)),1)])):y("",!0)])]),c("button",{class:"btn-close",type:"button","aria-label":"close",onClick:e[0]||(e[0]=fe((...a)=>n.deleteTimePair&&n.deleteTimePair(...a),["stop"]))})])),t.isEditing?(f(),m("div",{key:1,class:O(["wrapper-edit d-flex flex-row",{isValid:t.isValid}])},[c("div",null,[c("div",dG,[H(c("select",{class:"form-select panel-select","aria-label":"select","onUpdate:modelValue":e[2]||(e[2]=a=>t.updatedTimePair.idTimeframe=a),onChange:e[3]||(e[3]=(...a)=>n.setTimeframe&&n.setTimeframe(...a))},[e[15]||(e[15]=c("option",{value:null},"None",-1)),(f(!0),m(M,null,N(t.timeframes,a=>(f(),m("option",{key:a.id,value:a.id},S(a.text),9,cG))),128))],544),[[is,t.updatedTimePair.idTimeframe]])]),c("div",uG,[H(c("select",{class:"form-select panel-select","aria-label":"select","onUpdate:modelValue":e[4]||(e[4]=a=>t.updatedTimePair.idInheritance=a)},[(f(!0),m(M,null,N(t.inheritanceTypes,a=>(f(),m("option",{key:a.id,value:a.id},S(a.text),9,hG))),128))],512),[[is,t.updatedTimePair.idInheritance]])]),c("div",fG,[e[16]||(e[16]=c("span",{class:"me-1"},"Points",-1)),H(c("input",{class:"form-control form-control-sm me-1",type:"number",min:"1","onUpdate:modelValue":e[5]||(e[5]=a=>t.updatedTimePair.points=a),style:{width:"41px"},required:""},null,512),[[Pe,t.updatedTimePair.points]])]),c("div",mG,[c("div",pG,[D(o,{class:O(["time-control",{invalid:!t.updatedTimePair.startTime.isValid}]),label:"Start",time:t.updatedTimePair.startTime.value,title:"Start",endpoint:"Start",type:"date",canRemove:!1,isSet:!t.updatedTimePair.startTime.isRemoved,onAddTime:n.addTime,onSetTime:n.setTime,onRemoveTime:e[6]||(e[6]=a=>n.removeTime(t.updatedTimePair.startTime))},null,8,["class","time","isSet","onAddTime","onSetTime"])]),c("div",gG,[D(o,{class:O(["time-control",{invalid:!t.updatedTimePair.endTime.isValid}]),label:"End",time:t.updatedTimePair.endTime.value,title:"End",endpoint:"End",type:"date",isSet:!t.updatedTimePair.endTime.isRemoved,onAddTime:n.addTime,onSetTime:n.setTime,onRemoveTime:e[7]||(e[7]=a=>n.removeTime(t.updatedTimePair.endTime))},null,8,["class","time","isSet","onAddTime","onSetTime"])])]),c("div",vG,[H(c("input",{class:"form-check-input mt-1",type:"checkbox",value:"",id:"isEventVisible","onUpdate:modelValue":e[8]||(e[8]=a=>t.updatedTimePair.isEventVisible=a)},null,512),[[ci,t.updatedTimePair.isEventVisible]]),e[17]||(e[17]=c("label",{class:"form-check-label float-start",for:"isEventVisible"}," Is Event Visible ",-1))]),c("div",_G,[H(c("input",{class:"form-check-input mt-1",type:"checkbox",value:"",id:"flexCheckDefault","onUpdate:modelValue":e[9]||(e[9]=a=>t.updatedTimePair.isRecommended=a)},null,512),[[ci,t.updatedTimePair.isRecommended]]),e[18]||(e[18]=c("label",{class:"form-check-label float-start",for:"flexCheckDefault"}," Recommended ",-1))]),c("div",yG,[c("button",{class:"btn btn-sm btn-link",type:"button",onClick:e[10]||(e[10]=(...a)=>n.save&&n.save(...a))},"Save"),c("button",{class:"btn btn-sm btn-link",type:"button",onClick:e[11]||(e[11]=(...a)=>n.cancel&&n.cancel(...a))},"Cancel")])])],2)):y("",!0)])}const wG=V(KY,[["render",bG],["__scopeId","data-v-13f5a5e5"]]),SG={name:"TodoFormModal",components:{RepeatControl:ca,TimePairControl:wG,ItemMapper:Eh,FormItemList:xh},props:{id:Number},data:function(){return{store:null,plannerStore:null,metrics:q(Fk),todoTypes:q(jk),mediums:q(Bk),todoActivityTypes:q(Uk),text:{value:void 0,oldValue:void 0,isUpdated:!1},description:{value:void 0,oldValue:void 0,isUpdated:!1},points:{value:void 0,oldValue:void 0,isUpdated:!1},typeID:{value:void 0,oldValue:void 0,isUpdated:!1},mediumID:{value:void 0,oldValue:void 0,isUpdated:!1},metricIDs:{value:[],oldValue:[],isUpdated:!1},repeats:{value:[],added:[],deletedIDs:[]},timePairs:{value:[],added:[],deletedIDs:[]},todos:{ids:[],value:[],newItems:[],addedIDs:[],removedIDs:[]},selectedRepeatID:void 0,selectedTimePairID:void 0,mapper:{isShown:!1,type:void 0}}},created:async function(){let t=await U(()=>Promise.resolve().then(()=>Oi),void 0);this.store=t.useTodoStore();let e=await U(()=>Promise.resolve().then(()=>He),void 0);this.plannerStore=e.usePlannerStore();let i=this.store.getItem(this.id);this.setProps(i)},computed:{todo(){if(this.store){let t=this.store.getItem(this.id);return this.setProps(t),t}else return null},parentIDs(){if(this.todo){var t=En(this.todo.parents,"todo",this.id);return t.map(e=>e.id)}else return[]},childIDs(){if(this.todo){var t=En(this.todo.children,"todo",this.id);return t.map(e=>e.id)}else return[]},goalIDs(){if(this.todo){var t=En(this.todo.goals,"todo",this.id);return t.map(e=>e.id)}else return[]},repeatIDs(){var t;return(t=this.repeats)!=null&&t.value?this.repeats.value.map(e=>e.id):[]},activityType(){if(this.todo&&this.todo.activityTypeID){let t=this.todoActivityTypes.find(e=>e.id==this.todo.activityTypeID);if(t)return t.text}},activityTypeColor(){if(this.todo&&this.todo.activityTypeID){let t=this.todoActivityTypes.find(e=>e.id==this.todo.activityTypeID);if(t)return t.color}}},methods:{setProps(t){this.text.value=t.text,this.text.oldValue=t.text,this.text.isUpdated=!1,this.description.value=t.description,this.description.oldValue=t.description,this.description.isUpdated=!1,this.points.value=t.points,this.points.oldValue=t.points,this.points.isUpdated=!1,this.typeID.value=t.typeID,this.typeID.oldValue=t.typeID,this.typeID.isUpdated=!1,this.mediumID.value=t.mediumID,this.mediumID.oldValue=t.mediumID,this.mediumID.isUpdated=!1,this.metricIDs.value=q(t.metricIDs),this.metricIDs.oldValue=q(t.metricIDs),this.metricIDs.isUpdated=!1,this.repeats.value=q(t.repeats),this.repeats.added=[],this.repeats.updated=[],this.repeats.deletedIDs=[],this.timePairs.value=q(t.timePairs),this.timePairs.added=[],this.timePairs.updated=[],this.timePairs.deletedIDs=[]},setSelectedRepeat(t){this.selectedRepeatID=t},setSelectedTimePair(t){this.selectedTimePairID=t},selectItems(t,e,i){this.store.mapItems(this.id,t,e,i),this.mapper.isShown=!1,this.mapper.type=void 0},saveRepeat(t){let e=q(t);e.startRepeat=e.startRepeat.value,e.endRepeat=e.endRepeat?e.endRepeat.value:null,e.startIteration=e.startIteration?e.startIteration.value:null,e.endIteration=e.endIteration?e.endIteration.value:null,Ai(e,this.repeats.value);let i=q(t);t.id>0?bs(i,this.repeats.updated):bs(i,this.repeats.added),this.selectedRepeatID=void 0},saveTimePair(t){let e=q(t);e.startTime=e.startTime?e.startTime.value:null,e.endTime=e.endTime?e.endTime.value:null,Ai(e,this.timePairs.value);let i=q(t);t.id>0?bs(i,this.timePairs.updated):bs(i,this.timePairs.added),this.selectedTimePairID=void 0},save(){let t={id:this.id,text:this.text};this.store.saveTodo(t),this.$emit("closeItemModal")},saveText(){this.id>0&&this.text.value.trim()!=""&&this.text.value!=this.text.oldValue&&this.store.saveText(this.id,this.text.value)},saveDescription(){this.id>0&&this.description.value.trim()!=""&&this.description.value!=this.description.oldValue&&this.store.saveDescription(this.id,this.description.value)},savePoints(){this.id>0&&this.points.value.trim()!=""&&this.points.value!=this.points.oldValue&&this.store.savePoints(this.id,this.points.value)},saveType(){this.id>0&&this.typeID.value!=this.typeID.oldValue&&this.store.saveType(this.id,this.typeID.value)},saveMedium(){this.id>0&&this.mediumID.value!=this.mediumID.oldValue&&this.store.saveMedium(this.id,this.mediumID.value)},toggleMetric(t){if(!this.metricIDs.value.includes(t))this.metricIDs.value.push(t),this.store.mapItems(this.id,"metric",[t],[]);else{let e=this.metricIDs.value.indexOf(t);this.metricIDs.value.splice(e,1),this.store.mapItems(this.id,"metric",[],[t])}},hasMetric(t){return!!this.metricIDs.value.includes(t)},createTask(){this.store.createTask(this.id,this.plannerStore.selectedDate)},addItem(t,e){this.store.createAndMapItem(this.id,t,e)},addItemClicked(t){this.mapper.isShown=!0,this.mapper.type=t},addTimeClicked(){let t=xe(this.timePairs.value,"id"),e=this.plannerStore.createTimePair();e.id=t.length>0&&t[0].id<0?t[0].id-1:-1,this.timePairs.value.unshift(e)},addRepeatClicked(){let t=xe(this.repeats.value,"id"),e=this.plannerStore.createRepeat();e.id=t.length>0&&t[0].id<0?t[0].id-1:-1,this.repeats.value.unshift(e)},cancelMapping(){this.mapper.isShown=!1,this.mapper.type=void 0},cancelRepeatEditing(t){if(t<0){let e=this.repeats.value.findIndex(i=>i.id==t);this.repeats.value.splice(e,1)}this.selectedRepeatID=void 0},cancelTimePairEditing(t){if(t<0){let e=this.timePairs.value.findIndex(i=>i.id==t);this.timePairs.value.splice(e,1)}this.selectedTimePairID=void 0},refreshRepetitionForRepeat(t){this.store.refreshRepetitionForRepeat(this.id,t)},deleteFutureRepetitionsForRepeat(t,e){this.store.deleteFutureRepetitionsForRepeat(this.id,t,e)}},watch:{"text.value"(t){t!=this.text.oldValue?(this.text.isUpdated=!0,this.saveText()):this.isUpdated=!1},"description.value"(t){t!=this.description.oldValue?(this.description.isUpdated=!0,this.saveDescription()):this.isUpdated=!1},"points.value"(t){t!=this.points.oldValue?(this.points.isUpdated=!0,this.savePoints()):this.isUpdated=!1},"typeID.value"(t){t!=this.typeID.oldValue?(this.typeID.isUpdated=!0,this.saveType()):this.isUpdated=!1},"mediumID.value"(t){t!=this.mediumID.oldValue?(this.mediumID.isUpdated=!0,this.saveMedium()):this.isUpdated=!1}}},TG=["id"],xG={class:"modal-content"},EG={class:"modal-header"},IG={class:"me-2"},DG={class:"modal-body"},kG={key:0,class:"container-fluid"},CG={class:"row g-2"},PG={class:"col-12"},MG={class:"d-flex flex-column"},AG={class:"text-wrapper"},OG={class:"toolbar d-flex flex-row mt-1"},RG={class:"metrics d-flex flex-row"},$G=["onClick"],NG={class:"input-wrrapper d-flex flex-row"},LG=["for"],VG=["id","value"],WG={class:"input-wrrapper d-flex flex-row"},zG=["for"],FG=["id"],jG=["value"],BG={class:"input-wrrapper d-flex flex-row"},HG=["for"],UG=["id"],YG=["value"],GG={class:"row g-2 pt-2"},KG={class:"col-12 col-sm-4"},qG={class:"d-flex flex-column"},JG={class:"col-6 col-sm-4 form-column"},QG={class:"col-6 col-sm-4 d-flex flex-column"},ZG={class:"d-flex justify-content-between mt-1 mb-1"},XG={class:"d-flex justify-content-between mt-1 mb-1"},e9={key:1,class:"container"},t9={class:"row g-2"},i9={class:"col-12"},s9={key:0,class:"modal-footer"};function n9(t,e,i,s,r,n){const o=T("FormItemList"),a=T("RepeatControl"),l=T("TimePairControl"),d=T("ItemMapper");return f(),m("div",{id:`todo-form-modal-${i.id}`,class:"modal-dialog modal-xl modal-fullscreen-md-down modal-dialog modal-dialog-centered modal-dialog-scrollable"},[c("div",xG,[c("div",EG,[c("span",IG,"Todo "+S(n.todo?n.todo.id:""),1),c("span",{class:"activity-type",style:ue({"background-color":n.activityTypeColor||"lightskyblue"})},S(n.activityType),5),e[15]||(e[15]=c("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1))]),e[24]||(e[24]=c("div",null,null,-1)),c("div",DG,[t.mapper.isShown?y("",!0):(f(),m("div",kG,[c("div",CG,[c("div",PG,[c("div",MG,[c("div",AG,[H(c("input",{id:"text",class:"textbox",type:"text",placeholder:"Title","onUpdate:modelValue":e[0]||(e[0]=u=>t.text.value=u),spellcheck:"true"},null,512),[[Pe,t.text.value,void 0,{lazy:!0,trim:!0}]])]),c("div",OG,[c("div",RG,[(f(!0),m(M,null,N(t.metrics,u=>(f(),m("span",{key:u.id,class:O(["metric",{active:n.hasMetric(u.id)}]),onClick:h=>n.toggleMetric(u.id)},S(u.text),11,$G))),128))]),c("div",NG,[c("label",{class:"me-1",for:`todo-${i.id}-points`},"Points",8,LG),c("input",{type:"number",class:"form-control form-control-sm",id:`todo-${i.id}-points`,value:t.points.value,onBlur:e[1]||(e[1]=u=>t.points.value=u.target.value)},null,40,VG)]),c("div",WG,[c("label",{class:"me-1",for:`todo-${i.id}-type`},"Type",8,zG),H(c("select",{id:`todo-${i.id}-type`,class:"form-select form-select-sm","aria-label":"select","onUpdate:modelValue":e[2]||(e[2]=u=>t.typeID.value=u)},[e[16]||(e[16]=c("option",{value:null},"None",-1)),(f(!0),m(M,null,N(t.todoTypes,u=>(f(),m("option",{key:u.id,value:u.id},S(u.text),9,jG))),128))],8,FG),[[is,t.typeID.value]])]),c("div",BG,[c("label",{class:"me-1",for:`todo-${i.id}-type`},"Meduim",8,HG),H(c("select",{id:`todo-${i.id}-type`,class:"form-select form-select-sm","aria-label":"select","onUpdate:modelValue":e[3]||(e[3]=u=>t.mediumID.value=u)},[e[17]||(e[17]=c("option",{value:null},"None",-1)),(f(!0),m(M,null,N(t.mediums,u=>(f(),m("option",{key:u.id,value:u.id},S(u.text),9,YG))),128))],8,UG),[[is,t.mediumID.value]])])])])])]),c("div",GG,[c("div",KG,[c("div",qG,[e[18]||(e[18]=c("div",{class:"header d-flex flex-column"},[c("div",{class:"d-flex flex-row justify-content-between"},[c("span",{class:"text-start"},"Description"),c("img",{class:"mt-auto mb-auto me-2",src:jn,width:"5",height:"8"})]),c("hr")],-1)),H(c("textarea",{class:"textarea","onUpdate:modelValue":e[4]||(e[4]=u=>t.description.value=u),spellcheck:"true"},null,512),[[Pe,t.description.value,void 0,{lazy:!0,trim:!0}]])])]),c("div",JG,[D(o,{itemType:"todo",itemIDs:n.parentIDs,isParent:!0,parentType:"todo",parentID:i.id,repeatIDs:n.repeatIDs,onAddItemClicked:n.addItemClicked,onAddItem:n.addItem},null,8,["itemIDs","parentID","repeatIDs","onAddItemClicked","onAddItem"]),D(o,{itemType:"todo",itemIDs:n.childIDs,isChild:!0,parentType:"todo",parentID:i.id,repeatIDs:n.repeatIDs,onAddItemClicked:n.addItemClicked,onAddItem:n.addItem},null,8,["itemIDs","parentID","repeatIDs","onAddItemClicked","onAddItem"]),D(o,{itemType:"goal",itemIDs:n.goalIDs,isChild:!1,parentType:"todo",parentID:i.id,repeatIDs:n.repeatIDs,onAddItemClicked:n.addItemClicked,onAddItem:n.addItem},null,8,["itemIDs","parentID","repeatIDs","onAddItemClicked","onAddItem"])]),c("div",QG,[c("div",null,[e[20]||(e[20]=c("span",{class:"form-head"},"Repetition",-1)),c("div",ZG,[c("button",{class:"add-btn my-auto",type:"button",onClick:e[5]||(e[5]=(...u)=>n.addRepeatClicked&&n.addRepeatClicked(...u))},e[19]||(e[19]=[c("img",{src:Nn,width:"10",height:"10"},null,-1),Js("Add ")]))]),c("div",null,[(f(!0),m(M,null,N(t.repeats.value,u=>(f(),K(a,{key:u.id,repeat:u,itemID:i.id,itemType:"todo",canEdit:t.selectedRepeatID==null,onSaveRepeat:n.saveRepeat,onSetSelectedRepeat:n.setSelectedRepeat,onCancelRepeatEditing:n.cancelRepeatEditing,onRefreshRepetition:n.refreshRepetitionForRepeat,onDeleteFutureRepetitions:n.deleteFutureRepetitionsForRepeat},null,8,["repeat","itemID","canEdit","onSaveRepeat","onSetSelectedRepeat","onCancelRepeatEditing","onRefreshRepetition","onDeleteFutureRepetitions"]))),128))])]),c("div",null,[e[22]||(e[22]=c("span",{class:"form-head"},"Time",-1)),c("div",XG,[c("button",{class:"add-btn my-auto",type:"button",onClick:e[6]||(e[6]=(...u)=>n.addTimeClicked&&n.addTimeClicked(...u))},e[21]||(e[21]=[c("img",{src:Nn,width:"10",height:"10"},null,-1),Js("Add ")]))]),c("div",null,[(f(!0),m(M,null,N(t.timePairs.value,u=>(f(),K(l,{key:u.id,timePair:u,itemID:i.id,itemType:"todo",canEdit:t.selectedTimePairID==null,onSaveTimePair:n.saveTimePair,onSetSelectedTimePair:n.setSelectedTimePair,onCancelTimePairEditing:n.cancelTimePairEditing},null,8,["timePair","itemID","canEdit","onSaveTimePair","onSetSelectedTimePair","onCancelTimePairEditing"]))),128))])])])])])),t.mapper.isShown?(f(),m("div",e9,[c("div",t9,[c("div",i9,[t.mapper.type=="parent"?(f(),K(d,{key:0,itemType:"todo",selectedIDs:n.parentIDs,onClose:e[7]||(e[7]=u=>t.mapper.isShown=!1),onCancel:n.cancelMapping,onSelect:e[8]||(e[8]=(u,h)=>n.selectItems("parent",u,h))},null,8,["selectedIDs","onCancel"])):y("",!0),t.mapper.type=="child"?(f(),K(d,{key:1,itemType:"todo",selectedIDs:n.childIDs,onClose:e[9]||(e[9]=u=>t.mapper.isShown=!1),onCancel:n.cancelMapping,onSelect:e[10]||(e[10]=(u,h)=>n.selectItems("child",u,h))},null,8,["selectedIDs","onCancel"])):y("",!0),t.mapper.type=="goal"?(f(),K(d,{key:2,itemType:"goal",selectedIDs:n.goalIDs,onClose:e[11]||(e[11]=u=>t.mapper.isShown=!1),onCancel:n.cancelMapping,onSelect:e[12]||(e[12]=(u,h)=>n.selectItems("goal",u,h))},null,8,["selectedIDs","onCancel"])):y("",!0)])])])):y("",!0)]),t.mapper.isShown?y("",!0):(f(),m("div",s9,[c("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal",onClick:e[13]||(e[13]=(...u)=>n.createTask&&n.createTask(...u))},"Create Task"),e[23]||(e[23]=c("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close",-1)),c("button",{type:"button",class:"btn btn-primary",onClick:e[14]||(e[14]=(...u)=>n.save&&n.save(...u))},"Save")]))])],8,TG)}const r9=V(SG,[["render",n9],["__scopeId","data-v-d59fcdd3"]]);var zt="top",ii="bottom",si="right",Ft="left",cd="auto",Gr=[zt,ii,si,Ft],Ln="start",Pr="end",Fy="clippingParents",Ih="viewport",ir="popper",jy="reference",Zc=Gr.reduce(function(t,e){return t.concat([e+"-"+Ln,e+"-"+Pr])},[]),Dh=[].concat(Gr,[cd]).reduce(function(t,e){return t.concat([e,e+"-"+Ln,e+"-"+Pr])},[]),By="beforeRead",Hy="read",Uy="afterRead",Yy="beforeMain",Gy="main",Ky="afterMain",qy="beforeWrite",Jy="write",Qy="afterWrite",Zy=[By,Hy,Uy,Yy,Gy,Ky,qy,Jy,Qy];function rs(t){return t?(t.nodeName||"").toLowerCase():null}function ni(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function Vn(t){var e=ni(t).Element;return t instanceof e||t instanceof Element}function fi(t){var e=ni(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function kh(t){if(typeof ShadowRoot>"u")return!1;var e=ni(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function o9(t){var e=t.state;Object.keys(e.elements).forEach(function(i){var s=e.styles[i]||{},r=e.attributes[i]||{},n=e.elements[i];!fi(n)||!rs(n)||(Object.assign(n.style,s),Object.keys(r).forEach(function(o){var a=r[o];a===!1?n.removeAttribute(o):n.setAttribute(o,a===!0?"":a)}))})}function a9(t){var e=t.state,i={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,i.popper),e.styles=i,e.elements.arrow&&Object.assign(e.elements.arrow.style,i.arrow),function(){Object.keys(e.elements).forEach(function(s){var r=e.elements[s],n=e.attributes[s]||{},o=Object.keys(e.styles.hasOwnProperty(s)?e.styles[s]:i[s]),a=o.reduce(function(l,d){return l[d]="",l},{});!fi(r)||!rs(r)||(Object.assign(r.style,a),Object.keys(n).forEach(function(l){r.removeAttribute(l)}))})}}const Ch={name:"applyStyles",enabled:!0,phase:"write",fn:o9,effect:a9,requires:["computeStyles"]};function Xi(t){return t.split("-")[0]}var kn=Math.max,wl=Math.min,Mr=Math.round;function Xc(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function Xy(){return!/^((?!chrome|android).)*safari/i.test(Xc())}function Ar(t,e,i){e===void 0&&(e=!1),i===void 0&&(i=!1);var s=t.getBoundingClientRect(),r=1,n=1;e&&fi(t)&&(r=t.offsetWidth>0&&Mr(s.width)/t.offsetWidth||1,n=t.offsetHeight>0&&Mr(s.height)/t.offsetHeight||1);var o=Vn(t)?ni(t):window,a=o.visualViewport,l=!Xy()&&i,d=(s.left+(l&&a?a.offsetLeft:0))/r,u=(s.top+(l&&a?a.offsetTop:0))/n,h=s.width/r,p=s.height/n;return{width:h,height:p,top:u,right:d+h,bottom:u+p,left:d,x:d,y:u}}function Ph(t){var e=Ar(t),i=t.offsetWidth,s=t.offsetHeight;return Math.abs(e.width-i)<=1&&(i=e.width),Math.abs(e.height-s)<=1&&(s=e.height),{x:t.offsetLeft,y:t.offsetTop,width:i,height:s}}function eb(t,e){var i=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(i&&kh(i)){var s=e;do{if(s&&t.isSameNode(s))return!0;s=s.parentNode||s.host}while(s)}return!1}function Cs(t){return ni(t).getComputedStyle(t)}function l9(t){return["table","td","th"].indexOf(rs(t))>=0}function un(t){return((Vn(t)?t.ownerDocument:t.document)||window.document).documentElement}function ud(t){return rs(t)==="html"?t:t.assignedSlot||t.parentNode||(kh(t)?t.host:null)||un(t)}function ep(t){return!fi(t)||Cs(t).position==="fixed"?null:t.offsetParent}function d9(t){var e=/firefox/i.test(Xc()),i=/Trident/i.test(Xc());if(i&&fi(t)){var s=Cs(t);if(s.position==="fixed")return null}var r=ud(t);for(kh(r)&&(r=r.host);fi(r)&&["html","body"].indexOf(rs(r))<0;){var n=Cs(r);if(n.transform!=="none"||n.perspective!=="none"||n.contain==="paint"||["transform","perspective"].indexOf(n.willChange)!==-1||e&&n.willChange==="filter"||e&&n.filter&&n.filter!=="none")return r;r=r.parentNode}return null}function ua(t){for(var e=ni(t),i=ep(t);i&&l9(i)&&Cs(i).position==="static";)i=ep(i);return i&&(rs(i)==="html"||rs(i)==="body"&&Cs(i).position==="static")?e:i||d9(t)||e}function Mh(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function To(t,e,i){return kn(t,wl(e,i))}function c9(t,e,i){var s=To(t,e,i);return s>i?i:s}function tb(){return{top:0,right:0,bottom:0,left:0}}function ib(t){return Object.assign({},tb(),t)}function sb(t,e){return e.reduce(function(i,s){return i[s]=t,i},{})}var u9=function(e,i){return e=typeof e=="function"?e(Object.assign({},i.rects,{placement:i.placement})):e,ib(typeof e!="number"?e:sb(e,Gr))};function h9(t){var e,i=t.state,s=t.name,r=t.options,n=i.elements.arrow,o=i.modifiersData.popperOffsets,a=Xi(i.placement),l=Mh(a),d=[Ft,si].indexOf(a)>=0,u=d?"height":"width";if(!(!n||!o)){var h=u9(r.padding,i),p=Ph(n),g=l==="y"?zt:Ft,w=l==="y"?ii:si,_=i.rects.reference[u]+i.rects.reference[l]-o[l]-i.rects.popper[u],P=o[l]-i.rects.reference[l],k=ua(n),R=k?l==="y"?k.clientHeight||0:k.clientWidth||0:0,$=_/2-P/2,A=h[g],Z=R-p[u]-h[w],le=R/2-p[u]/2+$,te=To(A,le,Z),ie=l;i.modifiersData[s]=(e={},e[ie]=te,e.centerOffset=te-le,e)}}function f9(t){var e=t.state,i=t.options,s=i.element,r=s===void 0?"[data-popper-arrow]":s;r!=null&&(typeof r=="string"&&(r=e.elements.popper.querySelector(r),!r)||eb(e.elements.popper,r)&&(e.elements.arrow=r))}const nb={name:"arrow",enabled:!0,phase:"main",fn:h9,effect:f9,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Or(t){return t.split("-")[1]}var m9={top:"auto",right:"auto",bottom:"auto",left:"auto"};function p9(t,e){var i=t.x,s=t.y,r=e.devicePixelRatio||1;return{x:Mr(i*r)/r||0,y:Mr(s*r)/r||0}}function tp(t){var e,i=t.popper,s=t.popperRect,r=t.placement,n=t.variation,o=t.offsets,a=t.position,l=t.gpuAcceleration,d=t.adaptive,u=t.roundOffsets,h=t.isFixed,p=o.x,g=p===void 0?0:p,w=o.y,_=w===void 0?0:w,P=typeof u=="function"?u({x:g,y:_}):{x:g,y:_};g=P.x,_=P.y;var k=o.hasOwnProperty("x"),R=o.hasOwnProperty("y"),$=Ft,A=zt,Z=window;if(d){var le=ua(i),te="clientHeight",ie="clientWidth";if(le===ni(i)&&(le=un(i),Cs(le).position!=="static"&&a==="absolute"&&(te="scrollHeight",ie="scrollWidth")),le=le,r===zt||(r===Ft||r===si)&&n===Pr){A=ii;var ae=h&&le===Z&&Z.visualViewport?Z.visualViewport.height:le[te];_-=ae-s.height,_*=l?1:-1}if(r===Ft||(r===zt||r===ii)&&n===Pr){$=si;var pe=h&&le===Z&&Z.visualViewport?Z.visualViewport.width:le[ie];g-=pe-s.width,g*=l?1:-1}}var ke=Object.assign({position:a},d&&m9),Oe=u===!0?p9({x:g,y:_},ni(i)):{x:g,y:_};if(g=Oe.x,_=Oe.y,l){var Me;return Object.assign({},ke,(Me={},Me[A]=R?"0":"",Me[$]=k?"0":"",Me.transform=(Z.devicePixelRatio||1)<=1?"translate("+g+"px, "+_+"px)":"translate3d("+g+"px, "+_+"px, 0)",Me))}return Object.assign({},ke,(e={},e[A]=R?_+"px":"",e[$]=k?g+"px":"",e.transform="",e))}function g9(t){var e=t.state,i=t.options,s=i.gpuAcceleration,r=s===void 0?!0:s,n=i.adaptive,o=n===void 0?!0:n,a=i.roundOffsets,l=a===void 0?!0:a,d={placement:Xi(e.placement),variation:Or(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:r,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,tp(Object.assign({},d,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:o,roundOffsets:l})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,tp(Object.assign({},d,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const Ah={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:g9,data:{}};var $a={passive:!0};function v9(t){var e=t.state,i=t.instance,s=t.options,r=s.scroll,n=r===void 0?!0:r,o=s.resize,a=o===void 0?!0:o,l=ni(e.elements.popper),d=[].concat(e.scrollParents.reference,e.scrollParents.popper);return n&&d.forEach(function(u){u.addEventListener("scroll",i.update,$a)}),a&&l.addEventListener("resize",i.update,$a),function(){n&&d.forEach(function(u){u.removeEventListener("scroll",i.update,$a)}),a&&l.removeEventListener("resize",i.update,$a)}}const Oh={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:v9,data:{}};var _9={left:"right",right:"left",bottom:"top",top:"bottom"};function Za(t){return t.replace(/left|right|bottom|top/g,function(e){return _9[e]})}var y9={start:"end",end:"start"};function ip(t){return t.replace(/start|end/g,function(e){return y9[e]})}function Rh(t){var e=ni(t),i=e.pageXOffset,s=e.pageYOffset;return{scrollLeft:i,scrollTop:s}}function $h(t){return Ar(un(t)).left+Rh(t).scrollLeft}function b9(t,e){var i=ni(t),s=un(t),r=i.visualViewport,n=s.clientWidth,o=s.clientHeight,a=0,l=0;if(r){n=r.width,o=r.height;var d=Xy();(d||!d&&e==="fixed")&&(a=r.offsetLeft,l=r.offsetTop)}return{width:n,height:o,x:a+$h(t),y:l}}function w9(t){var e,i=un(t),s=Rh(t),r=(e=t.ownerDocument)==null?void 0:e.body,n=kn(i.scrollWidth,i.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),o=kn(i.scrollHeight,i.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0),a=-s.scrollLeft+$h(t),l=-s.scrollTop;return Cs(r||i).direction==="rtl"&&(a+=kn(i.clientWidth,r?r.clientWidth:0)-n),{width:n,height:o,x:a,y:l}}function Nh(t){var e=Cs(t),i=e.overflow,s=e.overflowX,r=e.overflowY;return/auto|scroll|overlay|hidden/.test(i+r+s)}function rb(t){return["html","body","#document"].indexOf(rs(t))>=0?t.ownerDocument.body:fi(t)&&Nh(t)?t:rb(ud(t))}function xo(t,e){var i;e===void 0&&(e=[]);var s=rb(t),r=s===((i=t.ownerDocument)==null?void 0:i.body),n=ni(s),o=r?[n].concat(n.visualViewport||[],Nh(s)?s:[]):s,a=e.concat(o);return r?a:a.concat(xo(ud(o)))}function eu(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function S9(t,e){var i=Ar(t,!1,e==="fixed");return i.top=i.top+t.clientTop,i.left=i.left+t.clientLeft,i.bottom=i.top+t.clientHeight,i.right=i.left+t.clientWidth,i.width=t.clientWidth,i.height=t.clientHeight,i.x=i.left,i.y=i.top,i}function sp(t,e,i){return e===Ih?eu(b9(t,i)):Vn(e)?S9(e,i):eu(w9(un(t)))}function T9(t){var e=xo(ud(t)),i=["absolute","fixed"].indexOf(Cs(t).position)>=0,s=i&&fi(t)?ua(t):t;return Vn(s)?e.filter(function(r){return Vn(r)&&eb(r,s)&&rs(r)!=="body"}):[]}function x9(t,e,i,s){var r=e==="clippingParents"?T9(t):[].concat(e),n=[].concat(r,[i]),o=n[0],a=n.reduce(function(l,d){var u=sp(t,d,s);return l.top=kn(u.top,l.top),l.right=wl(u.right,l.right),l.bottom=wl(u.bottom,l.bottom),l.left=kn(u.left,l.left),l},sp(t,o,s));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function ob(t){var e=t.reference,i=t.element,s=t.placement,r=s?Xi(s):null,n=s?Or(s):null,o=e.x+e.width/2-i.width/2,a=e.y+e.height/2-i.height/2,l;switch(r){case zt:l={x:o,y:e.y-i.height};break;case ii:l={x:o,y:e.y+e.height};break;case si:l={x:e.x+e.width,y:a};break;case Ft:l={x:e.x-i.width,y:a};break;default:l={x:e.x,y:e.y}}var d=r?Mh(r):null;if(d!=null){var u=d==="y"?"height":"width";switch(n){case Ln:l[d]=l[d]-(e[u]/2-i[u]/2);break;case Pr:l[d]=l[d]+(e[u]/2-i[u]/2);break}}return l}function Rr(t,e){e===void 0&&(e={});var i=e,s=i.placement,r=s===void 0?t.placement:s,n=i.strategy,o=n===void 0?t.strategy:n,a=i.boundary,l=a===void 0?Fy:a,d=i.rootBoundary,u=d===void 0?Ih:d,h=i.elementContext,p=h===void 0?ir:h,g=i.altBoundary,w=g===void 0?!1:g,_=i.padding,P=_===void 0?0:_,k=ib(typeof P!="number"?P:sb(P,Gr)),R=p===ir?jy:ir,$=t.rects.popper,A=t.elements[w?R:p],Z=x9(Vn(A)?A:A.contextElement||un(t.elements.popper),l,u,o),le=Ar(t.elements.reference),te=ob({reference:le,element:$,placement:r}),ie=eu(Object.assign({},$,te)),ae=p===ir?ie:le,pe={top:Z.top-ae.top+k.top,bottom:ae.bottom-Z.bottom+k.bottom,left:Z.left-ae.left+k.left,right:ae.right-Z.right+k.right},ke=t.modifiersData.offset;if(p===ir&&ke){var Oe=ke[r];Object.keys(pe).forEach(function(Me){var Ze=[si,ii].indexOf(Me)>=0?1:-1,st=[zt,ii].indexOf(Me)>=0?"y":"x";pe[Me]+=Oe[st]*Ze})}return pe}function E9(t,e){e===void 0&&(e={});var i=e,s=i.placement,r=i.boundary,n=i.rootBoundary,o=i.padding,a=i.flipVariations,l=i.allowedAutoPlacements,d=l===void 0?Dh:l,u=Or(s),h=u?a?Zc:Zc.filter(function(w){return Or(w)===u}):Gr,p=h.filter(function(w){return d.indexOf(w)>=0});p.length===0&&(p=h);var g=p.reduce(function(w,_){return w[_]=Rr(t,{placement:_,boundary:r,rootBoundary:n,padding:o})[Xi(_)],w},{});return Object.keys(g).sort(function(w,_){return g[w]-g[_]})}function I9(t){if(Xi(t)===cd)return[];var e=Za(t);return[ip(t),e,ip(e)]}function D9(t){var e=t.state,i=t.options,s=t.name;if(!e.modifiersData[s]._skip){for(var r=i.mainAxis,n=r===void 0?!0:r,o=i.altAxis,a=o===void 0?!0:o,l=i.fallbackPlacements,d=i.padding,u=i.boundary,h=i.rootBoundary,p=i.altBoundary,g=i.flipVariations,w=g===void 0?!0:g,_=i.allowedAutoPlacements,P=e.options.placement,k=Xi(P),R=k===P,$=l||(R||!w?[Za(P)]:I9(P)),A=[P].concat($).reduce(function(It,Nt){return It.concat(Xi(Nt)===cd?E9(e,{placement:Nt,boundary:u,rootBoundary:h,padding:d,flipVariations:w,allowedAutoPlacements:_}):Nt)},[]),Z=e.rects.reference,le=e.rects.popper,te=new Map,ie=!0,ae=A[0],pe=0;pe<A.length;pe++){var ke=A[pe],Oe=Xi(ke),Me=Or(ke)===Ln,Ze=[zt,ii].indexOf(Oe)>=0,st=Ze?"width":"height",we=Rr(e,{placement:ke,boundary:u,rootBoundary:h,altBoundary:p,padding:d}),ce=Ze?Me?si:Ft:Me?ii:zt;Z[st]>le[st]&&(ce=Za(ce));var Se=Za(ce),et=[];if(n&&et.push(we[Oe]<=0),a&&et.push(we[ce]<=0,we[Se]<=0),et.every(function(It){return It})){ae=ke,ie=!1;break}te.set(ke,et)}if(ie)for(var dt=w?3:1,ct=function(Nt){var ut=A.find(function(x){var I=te.get(x);if(I)return I.slice(0,Nt).every(function(C){return C})});if(ut)return ae=ut,"break"},nt=dt;nt>0;nt--){var mt=ct(nt);if(mt==="break")break}e.placement!==ae&&(e.modifiersData[s]._skip=!0,e.placement=ae,e.reset=!0)}}const ab={name:"flip",enabled:!0,phase:"main",fn:D9,requiresIfExists:["offset"],data:{_skip:!1}};function np(t,e,i){return i===void 0&&(i={x:0,y:0}),{top:t.top-e.height-i.y,right:t.right-e.width+i.x,bottom:t.bottom-e.height+i.y,left:t.left-e.width-i.x}}function rp(t){return[zt,si,ii,Ft].some(function(e){return t[e]>=0})}function k9(t){var e=t.state,i=t.name,s=e.rects.reference,r=e.rects.popper,n=e.modifiersData.preventOverflow,o=Rr(e,{elementContext:"reference"}),a=Rr(e,{altBoundary:!0}),l=np(o,s),d=np(a,r,n),u=rp(l),h=rp(d);e.modifiersData[i]={referenceClippingOffsets:l,popperEscapeOffsets:d,isReferenceHidden:u,hasPopperEscaped:h},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":h})}const lb={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:k9};function C9(t,e,i){var s=Xi(t),r=[Ft,zt].indexOf(s)>=0?-1:1,n=typeof i=="function"?i(Object.assign({},e,{placement:t})):i,o=n[0],a=n[1];return o=o||0,a=(a||0)*r,[Ft,si].indexOf(s)>=0?{x:a,y:o}:{x:o,y:a}}function P9(t){var e=t.state,i=t.options,s=t.name,r=i.offset,n=r===void 0?[0,0]:r,o=Dh.reduce(function(u,h){return u[h]=C9(h,e.rects,n),u},{}),a=o[e.placement],l=a.x,d=a.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=d),e.modifiersData[s]=o}const db={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:P9};function M9(t){var e=t.state,i=t.name;e.modifiersData[i]=ob({reference:e.rects.reference,element:e.rects.popper,placement:e.placement})}const Lh={name:"popperOffsets",enabled:!0,phase:"read",fn:M9,data:{}};function A9(t){return t==="x"?"y":"x"}function O9(t){var e=t.state,i=t.options,s=t.name,r=i.mainAxis,n=r===void 0?!0:r,o=i.altAxis,a=o===void 0?!1:o,l=i.boundary,d=i.rootBoundary,u=i.altBoundary,h=i.padding,p=i.tether,g=p===void 0?!0:p,w=i.tetherOffset,_=w===void 0?0:w,P=Rr(e,{boundary:l,rootBoundary:d,padding:h,altBoundary:u}),k=Xi(e.placement),R=Or(e.placement),$=!R,A=Mh(k),Z=A9(A),le=e.modifiersData.popperOffsets,te=e.rects.reference,ie=e.rects.popper,ae=typeof _=="function"?_(Object.assign({},e.rects,{placement:e.placement})):_,pe=typeof ae=="number"?{mainAxis:ae,altAxis:ae}:Object.assign({mainAxis:0,altAxis:0},ae),ke=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,Oe={x:0,y:0};if(le){if(n){var Me,Ze=A==="y"?zt:Ft,st=A==="y"?ii:si,we=A==="y"?"height":"width",ce=le[A],Se=ce+P[Ze],et=ce-P[st],dt=g?-ie[we]/2:0,ct=R===Ln?te[we]:ie[we],nt=R===Ln?-ie[we]:-te[we],mt=e.elements.arrow,It=g&&mt?Ph(mt):{width:0,height:0},Nt=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:tb(),ut=Nt[Ze],x=Nt[st],I=To(0,te[we],It[we]),C=$?te[we]/2-dt-I-ut-pe.mainAxis:ct-I-ut-pe.mainAxis,B=$?-te[we]/2+dt+I+x+pe.mainAxis:nt+I+x+pe.mainAxis,ye=e.elements.arrow&&ua(e.elements.arrow),v=ye?A==="y"?ye.clientTop||0:ye.clientLeft||0:0,b=(Me=ke==null?void 0:ke[A])!=null?Me:0,E=ce+C-b-v,L=ce+B-b,F=To(g?wl(Se,E):Se,ce,g?kn(et,L):et);le[A]=F,Oe[A]=F-ce}if(a){var j,se=A==="x"?zt:Ft,ee=A==="x"?ii:si,X=le[Z],G=Z==="y"?"height":"width",ve=X+P[se],ne=X-P[ee],he=[zt,Ft].indexOf(k)!==-1,be=(j=ke==null?void 0:ke[Z])!=null?j:0,Ce=he?ve:X-te[G]-ie[G]-be+pe.altAxis,ze=he?X+te[G]+ie[G]-be-pe.altAxis:ne,Re=g&&he?c9(Ce,X,ze):To(g?Ce:ve,X,g?ze:ne);le[Z]=Re,Oe[Z]=Re-X}e.modifiersData[s]=Oe}}const cb={name:"preventOverflow",enabled:!0,phase:"main",fn:O9,requiresIfExists:["offset"]};function R9(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function $9(t){return t===ni(t)||!fi(t)?Rh(t):R9(t)}function N9(t){var e=t.getBoundingClientRect(),i=Mr(e.width)/t.offsetWidth||1,s=Mr(e.height)/t.offsetHeight||1;return i!==1||s!==1}function L9(t,e,i){i===void 0&&(i=!1);var s=fi(e),r=fi(e)&&N9(e),n=un(e),o=Ar(t,r,i),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(s||!s&&!i)&&((rs(e)!=="body"||Nh(n))&&(a=$9(e)),fi(e)?(l=Ar(e,!0),l.x+=e.clientLeft,l.y+=e.clientTop):n&&(l.x=$h(n))),{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function V9(t){var e=new Map,i=new Set,s=[];t.forEach(function(n){e.set(n.name,n)});function r(n){i.add(n.name);var o=[].concat(n.requires||[],n.requiresIfExists||[]);o.forEach(function(a){if(!i.has(a)){var l=e.get(a);l&&r(l)}}),s.push(n)}return t.forEach(function(n){i.has(n.name)||r(n)}),s}function W9(t){var e=V9(t);return Zy.reduce(function(i,s){return i.concat(e.filter(function(r){return r.phase===s}))},[])}function z9(t){var e;return function(){return e||(e=new Promise(function(i){Promise.resolve().then(function(){e=void 0,i(t())})})),e}}function F9(t){var e=t.reduce(function(i,s){var r=i[s.name];return i[s.name]=r?Object.assign({},r,s,{options:Object.assign({},r.options,s.options),data:Object.assign({},r.data,s.data)}):s,i},{});return Object.keys(e).map(function(i){return e[i]})}var op={placement:"bottom",modifiers:[],strategy:"absolute"};function ap(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return!e.some(function(s){return!(s&&typeof s.getBoundingClientRect=="function")})}function hd(t){t===void 0&&(t={});var e=t,i=e.defaultModifiers,s=i===void 0?[]:i,r=e.defaultOptions,n=r===void 0?op:r;return function(a,l,d){d===void 0&&(d=n);var u={placement:"bottom",orderedModifiers:[],options:Object.assign({},op,n),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},h=[],p=!1,g={state:u,setOptions:function(k){var R=typeof k=="function"?k(u.options):k;_(),u.options=Object.assign({},n,u.options,R),u.scrollParents={reference:Vn(a)?xo(a):a.contextElement?xo(a.contextElement):[],popper:xo(l)};var $=W9(F9([].concat(s,u.options.modifiers)));return u.orderedModifiers=$.filter(function(A){return A.enabled}),w(),g.update()},forceUpdate:function(){if(!p){var k=u.elements,R=k.reference,$=k.popper;if(ap(R,$)){u.rects={reference:L9(R,ua($),u.options.strategy==="fixed"),popper:Ph($)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach(function(pe){return u.modifiersData[pe.name]=Object.assign({},pe.data)});for(var A=0;A<u.orderedModifiers.length;A++){if(u.reset===!0){u.reset=!1,A=-1;continue}var Z=u.orderedModifiers[A],le=Z.fn,te=Z.options,ie=te===void 0?{}:te,ae=Z.name;typeof le=="function"&&(u=le({state:u,options:ie,name:ae,instance:g})||u)}}}},update:z9(function(){return new Promise(function(P){g.forceUpdate(),P(u)})}),destroy:function(){_(),p=!0}};if(!ap(a,l))return g;g.setOptions(d).then(function(P){!p&&d.onFirstUpdate&&d.onFirstUpdate(P)});function w(){u.orderedModifiers.forEach(function(P){var k=P.name,R=P.options,$=R===void 0?{}:R,A=P.effect;if(typeof A=="function"){var Z=A({state:u,name:k,instance:g,options:$}),le=function(){};h.push(Z||le)}})}function _(){h.forEach(function(P){return P()}),h=[]}return g}}var j9=hd(),B9=[Oh,Lh,Ah,Ch],H9=hd({defaultModifiers:B9}),U9=[Oh,Lh,Ah,Ch,db,ab,cb,nb,lb],Vh=hd({defaultModifiers:U9});const ub=Object.freeze(Object.defineProperty({__proto__:null,afterMain:Ky,afterRead:Uy,afterWrite:Qy,applyStyles:Ch,arrow:nb,auto:cd,basePlacements:Gr,beforeMain:Yy,beforeRead:By,beforeWrite:qy,bottom:ii,clippingParents:Fy,computeStyles:Ah,createPopper:Vh,createPopperBase:j9,createPopperLite:H9,detectOverflow:Rr,end:Pr,eventListeners:Oh,flip:ab,hide:lb,left:Ft,main:Gy,modifierPhases:Zy,offset:db,placements:Dh,popper:ir,popperGenerator:hd,popperOffsets:Lh,preventOverflow:cb,read:Hy,reference:jy,right:si,start:Ln,top:zt,variationPlacements:Zc,viewport:Ih,write:Jy},Symbol.toStringTag,{value:"Module"}));/*!
  * Bootstrap v5.3.1 (https://getbootstrap.com/)
  * Copyright 2011-2023 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */const Ls=new Map,rc={set(t,e,i){Ls.has(t)||Ls.set(t,new Map);const s=Ls.get(t);if(!s.has(e)&&s.size!==0){console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(s.keys())[0]}.`);return}s.set(e,i)},get(t,e){return Ls.has(t)&&Ls.get(t).get(e)||null},remove(t,e){if(!Ls.has(t))return;const i=Ls.get(t);i.delete(e),i.size===0&&Ls.delete(t)}},Y9=1e6,G9=1e3,tu="transitionend",hb=t=>(t&&window.CSS&&window.CSS.escape&&(t=t.replace(/#([^\s"#']+)/g,(e,i)=>`#${CSS.escape(i)}`)),t),K9=t=>t==null?`${t}`:Object.prototype.toString.call(t).match(/\s([a-z]+)/i)[1].toLowerCase(),q9=t=>{do t+=Math.floor(Math.random()*Y9);while(document.getElementById(t));return t},J9=t=>{if(!t)return 0;let{transitionDuration:e,transitionDelay:i}=window.getComputedStyle(t);const s=Number.parseFloat(e),r=Number.parseFloat(i);return!s&&!r?0:(e=e.split(",")[0],i=i.split(",")[0],(Number.parseFloat(e)+Number.parseFloat(i))*G9)},fb=t=>{t.dispatchEvent(new Event(tu))},Es=t=>!t||typeof t!="object"?!1:(typeof t.jquery<"u"&&(t=t[0]),typeof t.nodeType<"u"),tn=t=>Es(t)?t.jquery?t[0]:t:typeof t=="string"&&t.length>0?document.querySelector(hb(t)):null,Kr=t=>{if(!Es(t)||t.getClientRects().length===0)return!1;const e=getComputedStyle(t).getPropertyValue("visibility")==="visible",i=t.closest("details:not([open])");if(!i)return e;if(i!==t){const s=t.closest("summary");if(s&&s.parentNode!==i||s===null)return!1}return e},sn=t=>!t||t.nodeType!==Node.ELEMENT_NODE||t.classList.contains("disabled")?!0:typeof t.disabled<"u"?t.disabled:t.hasAttribute("disabled")&&t.getAttribute("disabled")!=="false",mb=t=>{if(!document.documentElement.attachShadow)return null;if(typeof t.getRootNode=="function"){const e=t.getRootNode();return e instanceof ShadowRoot?e:null}return t instanceof ShadowRoot?t:t.parentNode?mb(t.parentNode):null},Sl=()=>{},ha=t=>{t.offsetHeight},pb=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,oc=[],Q9=t=>{document.readyState==="loading"?(oc.length||document.addEventListener("DOMContentLoaded",()=>{for(const e of oc)e()}),oc.push(t)):t()},pi=()=>document.documentElement.dir==="rtl",wi=t=>{Q9(()=>{const e=pb();if(e){const i=t.NAME,s=e.fn[i];e.fn[i]=t.jQueryInterface,e.fn[i].Constructor=t,e.fn[i].noConflict=()=>(e.fn[i]=s,t.jQueryInterface)}})},Ut=(t,e=[],i=t)=>typeof t=="function"?t(...e):i,gb=(t,e,i=!0)=>{if(!i){Ut(t);return}const r=J9(e)+5;let n=!1;const o=({target:a})=>{a===e&&(n=!0,e.removeEventListener(tu,o),Ut(t))};e.addEventListener(tu,o),setTimeout(()=>{n||fb(e)},r)},Wh=(t,e,i,s)=>{const r=t.length;let n=t.indexOf(e);return n===-1?!i&&s?t[r-1]:t[0]:(n+=i?1:-1,s&&(n=(n+r)%r),t[Math.max(0,Math.min(n,r-1))])},Z9=/[^.]*(?=\..*)\.|.*/,X9=/\..*/,e7=/::\d+$/,ac={};let lp=1;const vb={mouseenter:"mouseover",mouseleave:"mouseout"},t7=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function _b(t,e){return e&&`${e}::${lp++}`||t.uidEvent||lp++}function yb(t){const e=_b(t);return t.uidEvent=e,ac[e]=ac[e]||{},ac[e]}function i7(t,e){return function i(s){return zh(s,{delegateTarget:t}),i.oneOff&&Y.off(t,s.type,e),e.apply(t,[s])}}function s7(t,e,i){return function s(r){const n=t.querySelectorAll(e);for(let{target:o}=r;o&&o!==this;o=o.parentNode)for(const a of n)if(a===o)return zh(r,{delegateTarget:o}),s.oneOff&&Y.off(t,r.type,e,i),i.apply(o,[r])}}function bb(t,e,i=null){return Object.values(t).find(s=>s.callable===e&&s.delegationSelector===i)}function wb(t,e,i){const s=typeof e=="string",r=s?i:e||i;let n=Sb(t);return t7.has(n)||(n=t),[s,r,n]}function dp(t,e,i,s,r){if(typeof e!="string"||!t)return;let[n,o,a]=wb(e,i,s);e in vb&&(o=(w=>function(_){if(!_.relatedTarget||_.relatedTarget!==_.delegateTarget&&!_.delegateTarget.contains(_.relatedTarget))return w.call(this,_)})(o));const l=yb(t),d=l[a]||(l[a]={}),u=bb(d,o,n?i:null);if(u){u.oneOff=u.oneOff&&r;return}const h=_b(o,e.replace(Z9,"")),p=n?s7(t,i,o):i7(t,o);p.delegationSelector=n?i:null,p.callable=o,p.oneOff=r,p.uidEvent=h,d[h]=p,t.addEventListener(a,p,n)}function iu(t,e,i,s,r){const n=bb(e[i],s,r);n&&(t.removeEventListener(i,n,!!r),delete e[i][n.uidEvent])}function n7(t,e,i,s){const r=e[i]||{};for(const[n,o]of Object.entries(r))n.includes(s)&&iu(t,e,i,o.callable,o.delegationSelector)}function Sb(t){return t=t.replace(X9,""),vb[t]||t}const Y={on(t,e,i,s){dp(t,e,i,s,!1)},one(t,e,i,s){dp(t,e,i,s,!0)},off(t,e,i,s){if(typeof e!="string"||!t)return;const[r,n,o]=wb(e,i,s),a=o!==e,l=yb(t),d=l[o]||{},u=e.startsWith(".");if(typeof n<"u"){if(!Object.keys(d).length)return;iu(t,l,o,n,r?i:null);return}if(u)for(const h of Object.keys(l))n7(t,l,h,e.slice(1));for(const[h,p]of Object.entries(d)){const g=h.replace(e7,"");(!a||e.includes(g))&&iu(t,l,o,p.callable,p.delegationSelector)}},trigger(t,e,i){if(typeof e!="string"||!t)return null;const s=pb(),r=Sb(e),n=e!==r;let o=null,a=!0,l=!0,d=!1;n&&s&&(o=s.Event(e,i),s(t).trigger(o),a=!o.isPropagationStopped(),l=!o.isImmediatePropagationStopped(),d=o.isDefaultPrevented());const u=zh(new Event(e,{bubbles:a,cancelable:!0}),i);return d&&u.preventDefault(),l&&t.dispatchEvent(u),u.defaultPrevented&&o&&o.preventDefault(),u}};function zh(t,e={}){for(const[i,s]of Object.entries(e))try{t[i]=s}catch{Object.defineProperty(t,i,{configurable:!0,get(){return s}})}return t}function cp(t){if(t==="true")return!0;if(t==="false")return!1;if(t===Number(t).toString())return Number(t);if(t===""||t==="null")return null;if(typeof t!="string")return t;try{return JSON.parse(decodeURIComponent(t))}catch{return t}}function lc(t){return t.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`)}const Is={setDataAttribute(t,e,i){t.setAttribute(`data-bs-${lc(e)}`,i)},removeDataAttribute(t,e){t.removeAttribute(`data-bs-${lc(e)}`)},getDataAttributes(t){if(!t)return{};const e={},i=Object.keys(t.dataset).filter(s=>s.startsWith("bs")&&!s.startsWith("bsConfig"));for(const s of i){let r=s.replace(/^bs/,"");r=r.charAt(0).toLowerCase()+r.slice(1,r.length),e[r]=cp(t.dataset[s])}return e},getDataAttribute(t,e){return cp(t.getAttribute(`data-bs-${lc(e)}`))}};class fa{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(e){return e=this._mergeConfigObj(e),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}_configAfterMerge(e){return e}_mergeConfigObj(e,i){const s=Es(i)?Is.getDataAttribute(i,"config"):{};return{...this.constructor.Default,...typeof s=="object"?s:{},...Es(i)?Is.getDataAttributes(i):{},...typeof e=="object"?e:{}}}_typeCheckConfig(e,i=this.constructor.DefaultType){for(const[s,r]of Object.entries(i)){const n=e[s],o=Es(n)?"element":K9(n);if(!new RegExp(r).test(o))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${s}" provided type "${o}" but expected type "${r}".`)}}}const r7="5.3.1";class zi extends fa{constructor(e,i){super(),e=tn(e),e&&(this._element=e,this._config=this._getConfig(i),rc.set(this._element,this.constructor.DATA_KEY,this))}dispose(){rc.remove(this._element,this.constructor.DATA_KEY),Y.off(this._element,this.constructor.EVENT_KEY);for(const e of Object.getOwnPropertyNames(this))this[e]=null}_queueCallback(e,i,s=!0){gb(e,i,s)}_getConfig(e){return e=this._mergeConfigObj(e,this._element),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}static getInstance(e){return rc.get(tn(e),this.DATA_KEY)}static getOrCreateInstance(e,i={}){return this.getInstance(e)||new this(e,typeof i=="object"?i:null)}static get VERSION(){return r7}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(e){return`${e}${this.EVENT_KEY}`}}const dc=t=>{let e=t.getAttribute("data-bs-target");if(!e||e==="#"){let i=t.getAttribute("href");if(!i||!i.includes("#")&&!i.startsWith("."))return null;i.includes("#")&&!i.startsWith("#")&&(i=`#${i.split("#")[1]}`),e=i&&i!=="#"?i.trim():null}return hb(e)},ge={find(t,e=document.documentElement){return[].concat(...Element.prototype.querySelectorAll.call(e,t))},findOne(t,e=document.documentElement){return Element.prototype.querySelector.call(e,t)},children(t,e){return[].concat(...t.children).filter(i=>i.matches(e))},parents(t,e){const i=[];let s=t.parentNode.closest(e);for(;s;)i.push(s),s=s.parentNode.closest(e);return i},prev(t,e){let i=t.previousElementSibling;for(;i;){if(i.matches(e))return[i];i=i.previousElementSibling}return[]},next(t,e){let i=t.nextElementSibling;for(;i;){if(i.matches(e))return[i];i=i.nextElementSibling}return[]},focusableChildren(t){const e=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(i=>`${i}:not([tabindex^="-"])`).join(",");return this.find(e,t).filter(i=>!sn(i)&&Kr(i))},getSelectorFromElement(t){const e=dc(t);return e&&ge.findOne(e)?e:null},getElementFromSelector(t){const e=dc(t);return e?ge.findOne(e):null},getMultipleElementsFromSelector(t){const e=dc(t);return e?ge.find(e):[]}},fd=(t,e="hide")=>{const i=`click.dismiss${t.EVENT_KEY}`,s=t.NAME;Y.on(document,i,`[data-bs-dismiss="${s}"]`,function(r){if(["A","AREA"].includes(this.tagName)&&r.preventDefault(),sn(this))return;const n=ge.getElementFromSelector(this)||this.closest(`.${s}`);t.getOrCreateInstance(n)[e]()})},o7="alert",a7="bs.alert",Tb=`.${a7}`,l7=`close${Tb}`,d7=`closed${Tb}`,c7="fade",u7="show";class md extends zi{static get NAME(){return o7}close(){if(Y.trigger(this._element,l7).defaultPrevented)return;this._element.classList.remove(u7);const i=this._element.classList.contains(c7);this._queueCallback(()=>this._destroyElement(),this._element,i)}_destroyElement(){this._element.remove(),Y.trigger(this._element,d7),this.dispose()}static jQueryInterface(e){return this.each(function(){const i=md.getOrCreateInstance(this);if(typeof e=="string"){if(i[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);i[e](this)}})}}fd(md,"close");wi(md);const h7="button",f7="bs.button",m7=`.${f7}`,p7=".data-api",g7="active",up='[data-bs-toggle="button"]',v7=`click${m7}${p7}`;class pd extends zi{static get NAME(){return h7}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle(g7))}static jQueryInterface(e){return this.each(function(){const i=pd.getOrCreateInstance(this);e==="toggle"&&i[e]()})}}Y.on(document,v7,up,t=>{t.preventDefault();const e=t.target.closest(up);pd.getOrCreateInstance(e).toggle()});wi(pd);const _7="swipe",qr=".bs.swipe",y7=`touchstart${qr}`,b7=`touchmove${qr}`,w7=`touchend${qr}`,S7=`pointerdown${qr}`,T7=`pointerup${qr}`,x7="touch",E7="pen",I7="pointer-event",D7=40,k7={endCallback:null,leftCallback:null,rightCallback:null},C7={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class Tl extends fa{constructor(e,i){super(),this._element=e,!(!e||!Tl.isSupported())&&(this._config=this._getConfig(i),this._deltaX=0,this._supportPointerEvents=!!window.PointerEvent,this._initEvents())}static get Default(){return k7}static get DefaultType(){return C7}static get NAME(){return _7}dispose(){Y.off(this._element,qr)}_start(e){if(!this._supportPointerEvents){this._deltaX=e.touches[0].clientX;return}this._eventIsPointerPenTouch(e)&&(this._deltaX=e.clientX)}_end(e){this._eventIsPointerPenTouch(e)&&(this._deltaX=e.clientX-this._deltaX),this._handleSwipe(),Ut(this._config.endCallback)}_move(e){this._deltaX=e.touches&&e.touches.length>1?0:e.touches[0].clientX-this._deltaX}_handleSwipe(){const e=Math.abs(this._deltaX);if(e<=D7)return;const i=e/this._deltaX;this._deltaX=0,i&&Ut(i>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(Y.on(this._element,S7,e=>this._start(e)),Y.on(this._element,T7,e=>this._end(e)),this._element.classList.add(I7)):(Y.on(this._element,y7,e=>this._start(e)),Y.on(this._element,b7,e=>this._move(e)),Y.on(this._element,w7,e=>this._end(e)))}_eventIsPointerPenTouch(e){return this._supportPointerEvents&&(e.pointerType===E7||e.pointerType===x7)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const P7="carousel",M7="bs.carousel",hn=`.${M7}`,xb=".data-api",A7="ArrowLeft",O7="ArrowRight",R7=500,ro="next",Zn="prev",sr="left",Xa="right",$7=`slide${hn}`,cc=`slid${hn}`,N7=`keydown${hn}`,L7=`mouseenter${hn}`,V7=`mouseleave${hn}`,W7=`dragstart${hn}`,z7=`load${hn}${xb}`,F7=`click${hn}${xb}`,Eb="carousel",Na="active",j7="slide",B7="carousel-item-end",H7="carousel-item-start",U7="carousel-item-next",Y7="carousel-item-prev",Ib=".active",Db=".carousel-item",G7=Ib+Db,K7=".carousel-item img",q7=".carousel-indicators",J7="[data-bs-slide], [data-bs-slide-to]",Q7='[data-bs-ride="carousel"]',Z7={[A7]:Xa,[O7]:sr},X7={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},eK={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class ma extends zi{constructor(e,i){super(e,i),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=ge.findOne(q7,this._element),this._addEventListeners(),this._config.ride===Eb&&this.cycle()}static get Default(){return X7}static get DefaultType(){return eK}static get NAME(){return P7}next(){this._slide(ro)}nextWhenVisible(){!document.hidden&&Kr(this._element)&&this.next()}prev(){this._slide(Zn)}pause(){this._isSliding&&fb(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){if(this._config.ride){if(this._isSliding){Y.one(this._element,cc,()=>this.cycle());return}this.cycle()}}to(e){const i=this._getItems();if(e>i.length-1||e<0)return;if(this._isSliding){Y.one(this._element,cc,()=>this.to(e));return}const s=this._getItemIndex(this._getActive());if(s===e)return;const r=e>s?ro:Zn;this._slide(r,i[e])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(e){return e.defaultInterval=e.interval,e}_addEventListeners(){this._config.keyboard&&Y.on(this._element,N7,e=>this._keydown(e)),this._config.pause==="hover"&&(Y.on(this._element,L7,()=>this.pause()),Y.on(this._element,V7,()=>this._maybeEnableCycle())),this._config.touch&&Tl.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const s of ge.find(K7,this._element))Y.on(s,W7,r=>r.preventDefault());const i={leftCallback:()=>this._slide(this._directionToOrder(sr)),rightCallback:()=>this._slide(this._directionToOrder(Xa)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),R7+this._config.interval))}};this._swipeHelper=new Tl(this._element,i)}_keydown(e){if(/input|textarea/i.test(e.target.tagName))return;const i=Z7[e.key];i&&(e.preventDefault(),this._slide(this._directionToOrder(i)))}_getItemIndex(e){return this._getItems().indexOf(e)}_setActiveIndicatorElement(e){if(!this._indicatorsElement)return;const i=ge.findOne(Ib,this._indicatorsElement);i.classList.remove(Na),i.removeAttribute("aria-current");const s=ge.findOne(`[data-bs-slide-to="${e}"]`,this._indicatorsElement);s&&(s.classList.add(Na),s.setAttribute("aria-current","true"))}_updateInterval(){const e=this._activeElement||this._getActive();if(!e)return;const i=Number.parseInt(e.getAttribute("data-bs-interval"),10);this._config.interval=i||this._config.defaultInterval}_slide(e,i=null){if(this._isSliding)return;const s=this._getActive(),r=e===ro,n=i||Wh(this._getItems(),s,r,this._config.wrap);if(n===s)return;const o=this._getItemIndex(n),a=g=>Y.trigger(this._element,g,{relatedTarget:n,direction:this._orderToDirection(e),from:this._getItemIndex(s),to:o});if(a($7).defaultPrevented||!s||!n)return;const d=!!this._interval;this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(o),this._activeElement=n;const u=r?H7:B7,h=r?U7:Y7;n.classList.add(h),ha(n),s.classList.add(u),n.classList.add(u);const p=()=>{n.classList.remove(u,h),n.classList.add(Na),s.classList.remove(Na,h,u),this._isSliding=!1,a(cc)};this._queueCallback(p,s,this._isAnimated()),d&&this.cycle()}_isAnimated(){return this._element.classList.contains(j7)}_getActive(){return ge.findOne(G7,this._element)}_getItems(){return ge.find(Db,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(e){return pi()?e===sr?Zn:ro:e===sr?ro:Zn}_orderToDirection(e){return pi()?e===Zn?sr:Xa:e===Zn?Xa:sr}static jQueryInterface(e){return this.each(function(){const i=ma.getOrCreateInstance(this,e);if(typeof e=="number"){i.to(e);return}if(typeof e=="string"){if(i[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);i[e]()}})}}Y.on(document,F7,J7,function(t){const e=ge.getElementFromSelector(this);if(!e||!e.classList.contains(Eb))return;t.preventDefault();const i=ma.getOrCreateInstance(e),s=this.getAttribute("data-bs-slide-to");if(s){i.to(s),i._maybeEnableCycle();return}if(Is.getDataAttribute(this,"slide")==="next"){i.next(),i._maybeEnableCycle();return}i.prev(),i._maybeEnableCycle()});Y.on(window,z7,()=>{const t=ge.find(Q7);for(const e of t)ma.getOrCreateInstance(e)});wi(ma);const tK="collapse",iK="bs.collapse",pa=`.${iK}`,sK=".data-api",nK=`show${pa}`,rK=`shown${pa}`,oK=`hide${pa}`,aK=`hidden${pa}`,lK=`click${pa}${sK}`,uc="show",cr="collapse",La="collapsing",dK="collapsed",cK=`:scope .${cr} .${cr}`,uK="collapse-horizontal",hK="width",fK="height",mK=".collapse.show, .collapse.collapsing",su='[data-bs-toggle="collapse"]',pK={parent:null,toggle:!0},gK={parent:"(null|element)",toggle:"boolean"};class Bo extends zi{constructor(e,i){super(e,i),this._isTransitioning=!1,this._triggerArray=[];const s=ge.find(su);for(const r of s){const n=ge.getSelectorFromElement(r),o=ge.find(n).filter(a=>a===this._element);n!==null&&o.length&&this._triggerArray.push(r)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return pK}static get DefaultType(){return gK}static get NAME(){return tK}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let e=[];if(this._config.parent&&(e=this._getFirstLevelChildren(mK).filter(a=>a!==this._element).map(a=>Bo.getOrCreateInstance(a,{toggle:!1}))),e.length&&e[0]._isTransitioning||Y.trigger(this._element,nK).defaultPrevented)return;for(const a of e)a.hide();const s=this._getDimension();this._element.classList.remove(cr),this._element.classList.add(La),this._element.style[s]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const r=()=>{this._isTransitioning=!1,this._element.classList.remove(La),this._element.classList.add(cr,uc),this._element.style[s]="",Y.trigger(this._element,rK)},o=`scroll${s[0].toUpperCase()+s.slice(1)}`;this._queueCallback(r,this._element,!0),this._element.style[s]=`${this._element[o]}px`}hide(){if(this._isTransitioning||!this._isShown()||Y.trigger(this._element,oK).defaultPrevented)return;const i=this._getDimension();this._element.style[i]=`${this._element.getBoundingClientRect()[i]}px`,ha(this._element),this._element.classList.add(La),this._element.classList.remove(cr,uc);for(const r of this._triggerArray){const n=ge.getElementFromSelector(r);n&&!this._isShown(n)&&this._addAriaAndCollapsedClass([r],!1)}this._isTransitioning=!0;const s=()=>{this._isTransitioning=!1,this._element.classList.remove(La),this._element.classList.add(cr),Y.trigger(this._element,aK)};this._element.style[i]="",this._queueCallback(s,this._element,!0)}_isShown(e=this._element){return e.classList.contains(uc)}_configAfterMerge(e){return e.toggle=!!e.toggle,e.parent=tn(e.parent),e}_getDimension(){return this._element.classList.contains(uK)?hK:fK}_initializeChildren(){if(!this._config.parent)return;const e=this._getFirstLevelChildren(su);for(const i of e){const s=ge.getElementFromSelector(i);s&&this._addAriaAndCollapsedClass([i],this._isShown(s))}}_getFirstLevelChildren(e){const i=ge.find(cK,this._config.parent);return ge.find(e,this._config.parent).filter(s=>!i.includes(s))}_addAriaAndCollapsedClass(e,i){if(e.length)for(const s of e)s.classList.toggle(dK,!i),s.setAttribute("aria-expanded",i)}static jQueryInterface(e){const i={};return typeof e=="string"&&/show|hide/.test(e)&&(i.toggle=!1),this.each(function(){const s=Bo.getOrCreateInstance(this,i);if(typeof e=="string"){if(typeof s[e]>"u")throw new TypeError(`No method named "${e}"`);s[e]()}})}}Y.on(document,lK,su,function(t){(t.target.tagName==="A"||t.delegateTarget&&t.delegateTarget.tagName==="A")&&t.preventDefault();for(const e of ge.getMultipleElementsFromSelector(this))Bo.getOrCreateInstance(e,{toggle:!1}).toggle()});wi(Bo);const hp="dropdown",vK="bs.dropdown",Hn=`.${vK}`,Fh=".data-api",_K="Escape",fp="Tab",yK="ArrowUp",mp="ArrowDown",bK=2,wK=`hide${Hn}`,SK=`hidden${Hn}`,TK=`show${Hn}`,xK=`shown${Hn}`,kb=`click${Hn}${Fh}`,Cb=`keydown${Hn}${Fh}`,EK=`keyup${Hn}${Fh}`,nr="show",IK="dropup",DK="dropend",kK="dropstart",CK="dropup-center",PK="dropdown-center",bn='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',MK=`${bn}.${nr}`,el=".dropdown-menu",AK=".navbar",OK=".navbar-nav",RK=".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",$K=pi()?"top-end":"top-start",NK=pi()?"top-start":"top-end",LK=pi()?"bottom-end":"bottom-start",VK=pi()?"bottom-start":"bottom-end",WK=pi()?"left-start":"right-start",zK=pi()?"right-start":"left-start",FK="top",jK="bottom",BK={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},HK={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class es extends zi{constructor(e,i){super(e,i),this._popper=null,this._parent=this._element.parentNode,this._menu=ge.next(this._element,el)[0]||ge.prev(this._element,el)[0]||ge.findOne(el,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return BK}static get DefaultType(){return HK}static get NAME(){return hp}toggle(){return this._isShown()?this.hide():this.show()}show(){if(sn(this._element)||this._isShown())return;const e={relatedTarget:this._element};if(!Y.trigger(this._element,TK,e).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(OK))for(const s of[].concat(...document.body.children))Y.on(s,"mouseover",Sl);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(nr),this._element.classList.add(nr),Y.trigger(this._element,xK,e)}}hide(){if(sn(this._element)||!this._isShown())return;const e={relatedTarget:this._element};this._completeHide(e)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(e){if(!Y.trigger(this._element,wK,e).defaultPrevented){if("ontouchstart"in document.documentElement)for(const s of[].concat(...document.body.children))Y.off(s,"mouseover",Sl);this._popper&&this._popper.destroy(),this._menu.classList.remove(nr),this._element.classList.remove(nr),this._element.setAttribute("aria-expanded","false"),Is.removeDataAttribute(this._menu,"popper"),Y.trigger(this._element,SK,e)}}_getConfig(e){if(e=super._getConfig(e),typeof e.reference=="object"&&!Es(e.reference)&&typeof e.reference.getBoundingClientRect!="function")throw new TypeError(`${hp.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return e}_createPopper(){if(typeof ub>"u")throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let e=this._element;this._config.reference==="parent"?e=this._parent:Es(this._config.reference)?e=tn(this._config.reference):typeof this._config.reference=="object"&&(e=this._config.reference);const i=this._getPopperConfig();this._popper=Vh(e,this._menu,i)}_isShown(){return this._menu.classList.contains(nr)}_getPlacement(){const e=this._parent;if(e.classList.contains(DK))return WK;if(e.classList.contains(kK))return zK;if(e.classList.contains(CK))return FK;if(e.classList.contains(PK))return jK;const i=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return e.classList.contains(IK)?i?NK:$K:i?VK:LK}_detectNavbar(){return this._element.closest(AK)!==null}_getOffset(){const{offset:e}=this._config;return typeof e=="string"?e.split(",").map(i=>Number.parseInt(i,10)):typeof e=="function"?i=>e(i,this._element):e}_getPopperConfig(){const e={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(Is.setDataAttribute(this._menu,"popper","static"),e.modifiers=[{name:"applyStyles",enabled:!1}]),{...e,...Ut(this._config.popperConfig,[e])}}_selectMenuItem({key:e,target:i}){const s=ge.find(RK,this._menu).filter(r=>Kr(r));s.length&&Wh(s,i,e===mp,!s.includes(i)).focus()}static jQueryInterface(e){return this.each(function(){const i=es.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof i[e]>"u")throw new TypeError(`No method named "${e}"`);i[e]()}})}static clearMenus(e){if(e.button===bK||e.type==="keyup"&&e.key!==fp)return;const i=ge.find(MK);for(const s of i){const r=es.getInstance(s);if(!r||r._config.autoClose===!1)continue;const n=e.composedPath(),o=n.includes(r._menu);if(n.includes(r._element)||r._config.autoClose==="inside"&&!o||r._config.autoClose==="outside"&&o||r._menu.contains(e.target)&&(e.type==="keyup"&&e.key===fp||/input|select|option|textarea|form/i.test(e.target.tagName)))continue;const a={relatedTarget:r._element};e.type==="click"&&(a.clickEvent=e),r._completeHide(a)}}static dataApiKeydownHandler(e){const i=/input|textarea/i.test(e.target.tagName),s=e.key===_K,r=[yK,mp].includes(e.key);if(!r&&!s||i&&!s)return;e.preventDefault();const n=this.matches(bn)?this:ge.prev(this,bn)[0]||ge.next(this,bn)[0]||ge.findOne(bn,e.delegateTarget.parentNode),o=es.getOrCreateInstance(n);if(r){e.stopPropagation(),o.show(),o._selectMenuItem(e);return}o._isShown()&&(e.stopPropagation(),o.hide(),n.focus())}}Y.on(document,Cb,bn,es.dataApiKeydownHandler);Y.on(document,Cb,el,es.dataApiKeydownHandler);Y.on(document,kb,es.clearMenus);Y.on(document,EK,es.clearMenus);Y.on(document,kb,bn,function(t){t.preventDefault(),es.getOrCreateInstance(this).toggle()});wi(es);const Pb="backdrop",UK="fade",pp="show",gp=`mousedown.bs.${Pb}`,YK={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},GK={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class Mb extends fa{constructor(e){super(),this._config=this._getConfig(e),this._isAppended=!1,this._element=null}static get Default(){return YK}static get DefaultType(){return GK}static get NAME(){return Pb}show(e){if(!this._config.isVisible){Ut(e);return}this._append();const i=this._getElement();this._config.isAnimated&&ha(i),i.classList.add(pp),this._emulateAnimation(()=>{Ut(e)})}hide(e){if(!this._config.isVisible){Ut(e);return}this._getElement().classList.remove(pp),this._emulateAnimation(()=>{this.dispose(),Ut(e)})}dispose(){this._isAppended&&(Y.off(this._element,gp),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const e=document.createElement("div");e.className=this._config.className,this._config.isAnimated&&e.classList.add(UK),this._element=e}return this._element}_configAfterMerge(e){return e.rootElement=tn(e.rootElement),e}_append(){if(this._isAppended)return;const e=this._getElement();this._config.rootElement.append(e),Y.on(e,gp,()=>{Ut(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(e){gb(e,this._getElement(),this._config.isAnimated)}}const KK="focustrap",qK="bs.focustrap",xl=`.${qK}`,JK=`focusin${xl}`,QK=`keydown.tab${xl}`,ZK="Tab",XK="forward",vp="backward",eq={autofocus:!0,trapElement:null},tq={autofocus:"boolean",trapElement:"element"};class Ab extends fa{constructor(e){super(),this._config=this._getConfig(e),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return eq}static get DefaultType(){return tq}static get NAME(){return KK}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),Y.off(document,xl),Y.on(document,JK,e=>this._handleFocusin(e)),Y.on(document,QK,e=>this._handleKeydown(e)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,Y.off(document,xl))}_handleFocusin(e){const{trapElement:i}=this._config;if(e.target===document||e.target===i||i.contains(e.target))return;const s=ge.focusableChildren(i);s.length===0?i.focus():this._lastTabNavDirection===vp?s[s.length-1].focus():s[0].focus()}_handleKeydown(e){e.key===ZK&&(this._lastTabNavDirection=e.shiftKey?vp:XK)}}const _p=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",yp=".sticky-top",Va="padding-right",bp="margin-right";class nu{constructor(){this._element=document.body}getWidth(){const e=document.documentElement.clientWidth;return Math.abs(window.innerWidth-e)}hide(){const e=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,Va,i=>i+e),this._setElementAttributes(_p,Va,i=>i+e),this._setElementAttributes(yp,bp,i=>i-e)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,Va),this._resetElementAttributes(_p,Va),this._resetElementAttributes(yp,bp)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(e,i,s){const r=this.getWidth(),n=o=>{if(o!==this._element&&window.innerWidth>o.clientWidth+r)return;this._saveInitialAttribute(o,i);const a=window.getComputedStyle(o).getPropertyValue(i);o.style.setProperty(i,`${s(Number.parseFloat(a))}px`)};this._applyManipulationCallback(e,n)}_saveInitialAttribute(e,i){const s=e.style.getPropertyValue(i);s&&Is.setDataAttribute(e,i,s)}_resetElementAttributes(e,i){const s=r=>{const n=Is.getDataAttribute(r,i);if(n===null){r.style.removeProperty(i);return}Is.removeDataAttribute(r,i),r.style.setProperty(i,n)};this._applyManipulationCallback(e,s)}_applyManipulationCallback(e,i){if(Es(e)){i(e);return}for(const s of ge.find(e,this._element))i(s)}}const iq="modal",sq="bs.modal",gi=`.${sq}`,nq=".data-api",rq="Escape",oq=`hide${gi}`,aq=`hidePrevented${gi}`,Ob=`hidden${gi}`,Rb=`show${gi}`,lq=`shown${gi}`,dq=`resize${gi}`,cq=`click.dismiss${gi}`,uq=`mousedown.dismiss${gi}`,hq=`keydown.dismiss${gi}`,fq=`click${gi}${nq}`,wp="modal-open",mq="fade",Sp="show",hc="modal-static",pq=".modal.show",gq=".modal-dialog",vq=".modal-body",_q='[data-bs-toggle="modal"]',yq={backdrop:!0,focus:!0,keyboard:!0},bq={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class nn extends zi{constructor(e,i){super(e,i),this._dialog=ge.findOne(gq,this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new nu,this._addEventListeners()}static get Default(){return yq}static get DefaultType(){return bq}static get NAME(){return iq}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){this._isShown||this._isTransitioning||Y.trigger(this._element,Rb,{relatedTarget:e}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(wp),this._adjustDialog(),this._backdrop.show(()=>this._showElement(e)))}hide(){!this._isShown||this._isTransitioning||Y.trigger(this._element,oq).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(Sp),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated()))}dispose(){Y.off(window,gi),Y.off(this._dialog,gi),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new Mb({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new Ab({trapElement:this._element})}_showElement(e){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const i=ge.findOne(vq,this._dialog);i&&(i.scrollTop=0),ha(this._element),this._element.classList.add(Sp);const s=()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,Y.trigger(this._element,lq,{relatedTarget:e})};this._queueCallback(s,this._dialog,this._isAnimated())}_addEventListeners(){Y.on(this._element,hq,e=>{if(e.key===rq){if(this._config.keyboard){this.hide();return}this._triggerBackdropTransition()}}),Y.on(window,dq,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),Y.on(this._element,uq,e=>{Y.one(this._element,cq,i=>{if(!(this._element!==e.target||this._element!==i.target)){if(this._config.backdrop==="static"){this._triggerBackdropTransition();return}this._config.backdrop&&this.hide()}})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(wp),this._resetAdjustments(),this._scrollBar.reset(),Y.trigger(this._element,Ob)})}_isAnimated(){return this._element.classList.contains(mq)}_triggerBackdropTransition(){if(Y.trigger(this._element,aq).defaultPrevented)return;const i=this._element.scrollHeight>document.documentElement.clientHeight,s=this._element.style.overflowY;s==="hidden"||this._element.classList.contains(hc)||(i||(this._element.style.overflowY="hidden"),this._element.classList.add(hc),this._queueCallback(()=>{this._element.classList.remove(hc),this._queueCallback(()=>{this._element.style.overflowY=s},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const e=this._element.scrollHeight>document.documentElement.clientHeight,i=this._scrollBar.getWidth(),s=i>0;if(s&&!e){const r=pi()?"paddingLeft":"paddingRight";this._element.style[r]=`${i}px`}if(!s&&e){const r=pi()?"paddingRight":"paddingLeft";this._element.style[r]=`${i}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(e,i){return this.each(function(){const s=nn.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof s[e]>"u")throw new TypeError(`No method named "${e}"`);s[e](i)}})}}Y.on(document,fq,_q,function(t){const e=ge.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&t.preventDefault(),Y.one(e,Rb,r=>{r.defaultPrevented||Y.one(e,Ob,()=>{Kr(this)&&this.focus()})});const i=ge.findOne(pq);i&&nn.getInstance(i).hide(),nn.getOrCreateInstance(e).toggle(this)});fd(nn);wi(nn);const wq="offcanvas",Sq="bs.offcanvas",Rs=`.${Sq}`,$b=".data-api",Tq=`load${Rs}${$b}`,xq="Escape",Tp="show",xp="showing",Ep="hiding",Eq="offcanvas-backdrop",Nb=".offcanvas.show",Iq=`show${Rs}`,Dq=`shown${Rs}`,kq=`hide${Rs}`,Ip=`hidePrevented${Rs}`,Lb=`hidden${Rs}`,Cq=`resize${Rs}`,Pq=`click${Rs}${$b}`,Mq=`keydown.dismiss${Rs}`,Aq='[data-bs-toggle="offcanvas"]',Oq={backdrop:!0,keyboard:!0,scroll:!1},Rq={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class rn extends zi{constructor(e,i){super(e,i),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return Oq}static get DefaultType(){return Rq}static get NAME(){return wq}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){if(this._isShown||Y.trigger(this._element,Iq,{relatedTarget:e}).defaultPrevented)return;this._isShown=!0,this._backdrop.show(),this._config.scroll||new nu().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(xp);const s=()=>{(!this._config.scroll||this._config.backdrop)&&this._focustrap.activate(),this._element.classList.add(Tp),this._element.classList.remove(xp),Y.trigger(this._element,Dq,{relatedTarget:e})};this._queueCallback(s,this._element,!0)}hide(){if(!this._isShown||Y.trigger(this._element,kq).defaultPrevented)return;this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(Ep),this._backdrop.hide();const i=()=>{this._element.classList.remove(Tp,Ep),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new nu().reset(),Y.trigger(this._element,Lb)};this._queueCallback(i,this._element,!0)}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const e=()=>{if(this._config.backdrop==="static"){Y.trigger(this._element,Ip);return}this.hide()},i=!!this._config.backdrop;return new Mb({className:Eq,isVisible:i,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:i?e:null})}_initializeFocusTrap(){return new Ab({trapElement:this._element})}_addEventListeners(){Y.on(this._element,Mq,e=>{if(e.key===xq){if(this._config.keyboard){this.hide();return}Y.trigger(this._element,Ip)}})}static jQueryInterface(e){return this.each(function(){const i=rn.getOrCreateInstance(this,e);if(typeof e=="string"){if(i[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);i[e](this)}})}}Y.on(document,Pq,Aq,function(t){const e=ge.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&t.preventDefault(),sn(this))return;Y.one(e,Lb,()=>{Kr(this)&&this.focus()});const i=ge.findOne(Nb);i&&i!==e&&rn.getInstance(i).hide(),rn.getOrCreateInstance(e).toggle(this)});Y.on(window,Tq,()=>{for(const t of ge.find(Nb))rn.getOrCreateInstance(t).show()});Y.on(window,Cq,()=>{for(const t of ge.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(t).position!=="fixed"&&rn.getOrCreateInstance(t).hide()});fd(rn);wi(rn);const $q=/^aria-[\w-]*$/i,Vb={"*":["class","dir","id","lang","role",$q],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},Nq=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),Lq=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,Vq=(t,e)=>{const i=t.nodeName.toLowerCase();return e.includes(i)?Nq.has(i)?!!Lq.test(t.nodeValue):!0:e.filter(s=>s instanceof RegExp).some(s=>s.test(i))};function Wq(t,e,i){if(!t.length)return t;if(i&&typeof i=="function")return i(t);const r=new window.DOMParser().parseFromString(t,"text/html"),n=[].concat(...r.body.querySelectorAll("*"));for(const o of n){const a=o.nodeName.toLowerCase();if(!Object.keys(e).includes(a)){o.remove();continue}const l=[].concat(...o.attributes),d=[].concat(e["*"]||[],e[a]||[]);for(const u of l)Vq(u,d)||o.removeAttribute(u.nodeName)}return r.body.innerHTML}const zq="TemplateFactory",Fq={allowList:Vb,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},jq={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},Bq={entry:"(string|element|function|null)",selector:"(string|element)"};class Hq extends fa{constructor(e){super(),this._config=this._getConfig(e)}static get Default(){return Fq}static get DefaultType(){return jq}static get NAME(){return zq}getContent(){return Object.values(this._config.content).map(e=>this._resolvePossibleFunction(e)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(e){return this._checkContent(e),this._config.content={...this._config.content,...e},this}toHtml(){const e=document.createElement("div");e.innerHTML=this._maybeSanitize(this._config.template);for(const[r,n]of Object.entries(this._config.content))this._setContent(e,n,r);const i=e.children[0],s=this._resolvePossibleFunction(this._config.extraClass);return s&&i.classList.add(...s.split(" ")),i}_typeCheckConfig(e){super._typeCheckConfig(e),this._checkContent(e.content)}_checkContent(e){for(const[i,s]of Object.entries(e))super._typeCheckConfig({selector:i,entry:s},Bq)}_setContent(e,i,s){const r=ge.findOne(s,e);if(r){if(i=this._resolvePossibleFunction(i),!i){r.remove();return}if(Es(i)){this._putElementInTemplate(tn(i),r);return}if(this._config.html){r.innerHTML=this._maybeSanitize(i);return}r.textContent=i}}_maybeSanitize(e){return this._config.sanitize?Wq(e,this._config.allowList,this._config.sanitizeFn):e}_resolvePossibleFunction(e){return Ut(e,[this])}_putElementInTemplate(e,i){if(this._config.html){i.innerHTML="",i.append(e);return}i.textContent=e.textContent}}const Uq="tooltip",Yq=new Set(["sanitize","allowList","sanitizeFn"]),fc="fade",Gq="modal",Wa="show",Kq=".tooltip-inner",Dp=`.${Gq}`,kp="hide.bs.modal",oo="hover",mc="focus",qq="click",Jq="manual",Qq="hide",Zq="hidden",Xq="show",eJ="shown",tJ="inserted",iJ="click",sJ="focusin",nJ="focusout",rJ="mouseenter",oJ="mouseleave",aJ={AUTO:"auto",TOP:"top",RIGHT:pi()?"left":"right",BOTTOM:"bottom",LEFT:pi()?"right":"left"},lJ={allowList:Vb,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},dJ={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class Jr extends zi{constructor(e,i){if(typeof ub>"u")throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(e,i),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return lJ}static get DefaultType(){return dJ}static get NAME(){return Uq}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){if(this._isEnabled){if(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()){this._leave();return}this._enter()}}dispose(){clearTimeout(this._timeout),Y.off(this._element.closest(Dp),kp,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!(this._isWithContent()&&this._isEnabled))return;const e=Y.trigger(this._element,this.constructor.eventName(Xq)),s=(mb(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(e.defaultPrevented||!s)return;this._disposePopper();const r=this._getTipElement();this._element.setAttribute("aria-describedby",r.getAttribute("id"));const{container:n}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(n.append(r),Y.trigger(this._element,this.constructor.eventName(tJ))),this._popper=this._createPopper(r),r.classList.add(Wa),"ontouchstart"in document.documentElement)for(const a of[].concat(...document.body.children))Y.on(a,"mouseover",Sl);const o=()=>{Y.trigger(this._element,this.constructor.eventName(eJ)),this._isHovered===!1&&this._leave(),this._isHovered=!1};this._queueCallback(o,this.tip,this._isAnimated())}hide(){if(!this._isShown()||Y.trigger(this._element,this.constructor.eventName(Qq)).defaultPrevented)return;if(this._getTipElement().classList.remove(Wa),"ontouchstart"in document.documentElement)for(const r of[].concat(...document.body.children))Y.off(r,"mouseover",Sl);this._activeTrigger[qq]=!1,this._activeTrigger[mc]=!1,this._activeTrigger[oo]=!1,this._isHovered=null;const s=()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),Y.trigger(this._element,this.constructor.eventName(Zq)))};this._queueCallback(s,this.tip,this._isAnimated())}update(){this._popper&&this._popper.update()}_isWithContent(){return!!this._getTitle()}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(e){const i=this._getTemplateFactory(e).toHtml();if(!i)return null;i.classList.remove(fc,Wa),i.classList.add(`bs-${this.constructor.NAME}-auto`);const s=q9(this.constructor.NAME).toString();return i.setAttribute("id",s),this._isAnimated()&&i.classList.add(fc),i}setContent(e){this._newContent=e,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(e){return this._templateFactory?this._templateFactory.changeContent(e):this._templateFactory=new Hq({...this._config,content:e,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{[Kq]:this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(e){return this.constructor.getOrCreateInstance(e.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(fc)}_isShown(){return this.tip&&this.tip.classList.contains(Wa)}_createPopper(e){const i=Ut(this._config.placement,[this,e,this._element]),s=aJ[i.toUpperCase()];return Vh(this._element,e,this._getPopperConfig(s))}_getOffset(){const{offset:e}=this._config;return typeof e=="string"?e.split(",").map(i=>Number.parseInt(i,10)):typeof e=="function"?i=>e(i,this._element):e}_resolvePossibleFunction(e){return Ut(e,[this._element])}_getPopperConfig(e){const i={placement:e,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:s=>{this._getTipElement().setAttribute("data-popper-placement",s.state.placement)}}]};return{...i,...Ut(this._config.popperConfig,[i])}}_setListeners(){const e=this._config.trigger.split(" ");for(const i of e)if(i==="click")Y.on(this._element,this.constructor.eventName(iJ),this._config.selector,s=>{this._initializeOnDelegatedTarget(s).toggle()});else if(i!==Jq){const s=i===oo?this.constructor.eventName(rJ):this.constructor.eventName(sJ),r=i===oo?this.constructor.eventName(oJ):this.constructor.eventName(nJ);Y.on(this._element,s,this._config.selector,n=>{const o=this._initializeOnDelegatedTarget(n);o._activeTrigger[n.type==="focusin"?mc:oo]=!0,o._enter()}),Y.on(this._element,r,this._config.selector,n=>{const o=this._initializeOnDelegatedTarget(n);o._activeTrigger[n.type==="focusout"?mc:oo]=o._element.contains(n.relatedTarget),o._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},Y.on(this._element.closest(Dp),kp,this._hideModalHandler)}_fixTitle(){const e=this._element.getAttribute("title");e&&(!this._element.getAttribute("aria-label")&&!this._element.textContent.trim()&&this._element.setAttribute("aria-label",e),this._element.setAttribute("data-bs-original-title",e),this._element.removeAttribute("title"))}_enter(){if(this._isShown()||this._isHovered){this._isHovered=!0;return}this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show)}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(e,i){clearTimeout(this._timeout),this._timeout=setTimeout(e,i)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(e){const i=Is.getDataAttributes(this._element);for(const s of Object.keys(i))Yq.has(s)&&delete i[s];return e={...i,...typeof e=="object"&&e?e:{}},e=this._mergeConfigObj(e),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}_configAfterMerge(e){return e.container=e.container===!1?document.body:tn(e.container),typeof e.delay=="number"&&(e.delay={show:e.delay,hide:e.delay}),typeof e.title=="number"&&(e.title=e.title.toString()),typeof e.content=="number"&&(e.content=e.content.toString()),e}_getDelegateConfig(){const e={};for(const[i,s]of Object.entries(this._config))this.constructor.Default[i]!==s&&(e[i]=s);return e.selector=!1,e.trigger="manual",e}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(e){return this.each(function(){const i=Jr.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof i[e]>"u")throw new TypeError(`No method named "${e}"`);i[e]()}})}}wi(Jr);const cJ="popover",uJ=".popover-header",hJ=".popover-body",fJ={...Jr.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},mJ={...Jr.DefaultType,content:"(null|string|element|function)"};class jh extends Jr{static get Default(){return fJ}static get DefaultType(){return mJ}static get NAME(){return cJ}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{[uJ]:this._getTitle(),[hJ]:this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(e){return this.each(function(){const i=jh.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof i[e]>"u")throw new TypeError(`No method named "${e}"`);i[e]()}})}}wi(jh);const pJ="scrollspy",gJ="bs.scrollspy",Bh=`.${gJ}`,vJ=".data-api",_J=`activate${Bh}`,Cp=`click${Bh}`,yJ=`load${Bh}${vJ}`,bJ="dropdown-item",Xn="active",wJ='[data-bs-spy="scroll"]',pc="[href]",SJ=".nav, .list-group",Pp=".nav-link",TJ=".nav-item",xJ=".list-group-item",EJ=`${Pp}, ${TJ} > ${Pp}, ${xJ}`,IJ=".dropdown",DJ=".dropdown-toggle",kJ={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},CJ={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class gd extends zi{constructor(e,i){super(e,i),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return kJ}static get DefaultType(){return CJ}static get NAME(){return pJ}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const e of this._observableSections.values())this._observer.observe(e)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(e){return e.target=tn(e.target)||document.body,e.rootMargin=e.offset?`${e.offset}px 0px -30%`:e.rootMargin,typeof e.threshold=="string"&&(e.threshold=e.threshold.split(",").map(i=>Number.parseFloat(i))),e}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(Y.off(this._config.target,Cp),Y.on(this._config.target,Cp,pc,e=>{const i=this._observableSections.get(e.target.hash);if(i){e.preventDefault();const s=this._rootElement||window,r=i.offsetTop-this._element.offsetTop;if(s.scrollTo){s.scrollTo({top:r,behavior:"smooth"});return}s.scrollTop=r}}))}_getNewObserver(){const e={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(i=>this._observerCallback(i),e)}_observerCallback(e){const i=o=>this._targetLinks.get(`#${o.target.id}`),s=o=>{this._previousScrollData.visibleEntryTop=o.target.offsetTop,this._process(i(o))},r=(this._rootElement||document.documentElement).scrollTop,n=r>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=r;for(const o of e){if(!o.isIntersecting){this._activeTarget=null,this._clearActiveClass(i(o));continue}const a=o.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(n&&a){if(s(o),!r)return;continue}!n&&!a&&s(o)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const e=ge.find(pc,this._config.target);for(const i of e){if(!i.hash||sn(i))continue;const s=ge.findOne(decodeURI(i.hash),this._element);Kr(s)&&(this._targetLinks.set(decodeURI(i.hash),i),this._observableSections.set(i.hash,s))}}_process(e){this._activeTarget!==e&&(this._clearActiveClass(this._config.target),this._activeTarget=e,e.classList.add(Xn),this._activateParents(e),Y.trigger(this._element,_J,{relatedTarget:e}))}_activateParents(e){if(e.classList.contains(bJ)){ge.findOne(DJ,e.closest(IJ)).classList.add(Xn);return}for(const i of ge.parents(e,SJ))for(const s of ge.prev(i,EJ))s.classList.add(Xn)}_clearActiveClass(e){e.classList.remove(Xn);const i=ge.find(`${pc}.${Xn}`,e);for(const s of i)s.classList.remove(Xn)}static jQueryInterface(e){return this.each(function(){const i=gd.getOrCreateInstance(this,e);if(typeof e=="string"){if(i[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);i[e]()}})}}Y.on(window,yJ,()=>{for(const t of ge.find(wJ))gd.getOrCreateInstance(t)});wi(gd);const PJ="tab",MJ="bs.tab",Un=`.${MJ}`,AJ=`hide${Un}`,OJ=`hidden${Un}`,RJ=`show${Un}`,$J=`shown${Un}`,NJ=`click${Un}`,LJ=`keydown${Un}`,VJ=`load${Un}`,WJ="ArrowLeft",Mp="ArrowRight",zJ="ArrowUp",Ap="ArrowDown",gc="Home",Op="End",wn="active",Rp="fade",vc="show",FJ="dropdown",jJ=".dropdown-toggle",BJ=".dropdown-menu",_c=":not(.dropdown-toggle)",HJ='.list-group, .nav, [role="tablist"]',UJ=".nav-item, .list-group-item",YJ=`.nav-link${_c}, .list-group-item${_c}, [role="tab"]${_c}`,Wb='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',yc=`${YJ}, ${Wb}`,GJ=`.${wn}[data-bs-toggle="tab"], .${wn}[data-bs-toggle="pill"], .${wn}[data-bs-toggle="list"]`;class $r extends zi{constructor(e){super(e),this._parent=this._element.closest(HJ),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),Y.on(this._element,LJ,i=>this._keydown(i)))}static get NAME(){return PJ}show(){const e=this._element;if(this._elemIsActive(e))return;const i=this._getActiveElem(),s=i?Y.trigger(i,AJ,{relatedTarget:e}):null;Y.trigger(e,RJ,{relatedTarget:i}).defaultPrevented||s&&s.defaultPrevented||(this._deactivate(i,e),this._activate(e,i))}_activate(e,i){if(!e)return;e.classList.add(wn),this._activate(ge.getElementFromSelector(e));const s=()=>{if(e.getAttribute("role")!=="tab"){e.classList.add(vc);return}e.removeAttribute("tabindex"),e.setAttribute("aria-selected",!0),this._toggleDropDown(e,!0),Y.trigger(e,$J,{relatedTarget:i})};this._queueCallback(s,e,e.classList.contains(Rp))}_deactivate(e,i){if(!e)return;e.classList.remove(wn),e.blur(),this._deactivate(ge.getElementFromSelector(e));const s=()=>{if(e.getAttribute("role")!=="tab"){e.classList.remove(vc);return}e.setAttribute("aria-selected",!1),e.setAttribute("tabindex","-1"),this._toggleDropDown(e,!1),Y.trigger(e,OJ,{relatedTarget:i})};this._queueCallback(s,e,e.classList.contains(Rp))}_keydown(e){if(![WJ,Mp,zJ,Ap,gc,Op].includes(e.key))return;e.stopPropagation(),e.preventDefault();const i=this._getChildren().filter(r=>!sn(r));let s;if([gc,Op].includes(e.key))s=i[e.key===gc?0:i.length-1];else{const r=[Mp,Ap].includes(e.key);s=Wh(i,e.target,r,!0)}s&&(s.focus({preventScroll:!0}),$r.getOrCreateInstance(s).show())}_getChildren(){return ge.find(yc,this._parent)}_getActiveElem(){return this._getChildren().find(e=>this._elemIsActive(e))||null}_setInitialAttributes(e,i){this._setAttributeIfNotExists(e,"role","tablist");for(const s of i)this._setInitialAttributesOnChild(s)}_setInitialAttributesOnChild(e){e=this._getInnerElement(e);const i=this._elemIsActive(e),s=this._getOuterElement(e);e.setAttribute("aria-selected",i),s!==e&&this._setAttributeIfNotExists(s,"role","presentation"),i||e.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(e,"role","tab"),this._setInitialAttributesOnTargetPanel(e)}_setInitialAttributesOnTargetPanel(e){const i=ge.getElementFromSelector(e);i&&(this._setAttributeIfNotExists(i,"role","tabpanel"),e.id&&this._setAttributeIfNotExists(i,"aria-labelledby",`${e.id}`))}_toggleDropDown(e,i){const s=this._getOuterElement(e);if(!s.classList.contains(FJ))return;const r=(n,o)=>{const a=ge.findOne(n,s);a&&a.classList.toggle(o,i)};r(jJ,wn),r(BJ,vc),s.setAttribute("aria-expanded",i)}_setAttributeIfNotExists(e,i,s){e.hasAttribute(i)||e.setAttribute(i,s)}_elemIsActive(e){return e.classList.contains(wn)}_getInnerElement(e){return e.matches(yc)?e:ge.findOne(yc,e)}_getOuterElement(e){return e.closest(UJ)||e}static jQueryInterface(e){return this.each(function(){const i=$r.getOrCreateInstance(this);if(typeof e=="string"){if(i[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);i[e]()}})}}Y.on(document,NJ,Wb,function(t){["A","AREA"].includes(this.tagName)&&t.preventDefault(),!sn(this)&&$r.getOrCreateInstance(this).show()});Y.on(window,VJ,()=>{for(const t of ge.find(GJ))$r.getOrCreateInstance(t)});wi($r);const KJ="toast",qJ="bs.toast",fn=`.${qJ}`,JJ=`mouseover${fn}`,QJ=`mouseout${fn}`,ZJ=`focusin${fn}`,XJ=`focusout${fn}`,eQ=`hide${fn}`,tQ=`hidden${fn}`,iQ=`show${fn}`,sQ=`shown${fn}`,nQ="fade",$p="hide",za="show",Fa="showing",rQ={animation:"boolean",autohide:"boolean",delay:"number"},oQ={animation:!0,autohide:!0,delay:5e3};class vd extends zi{constructor(e,i){super(e,i),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return oQ}static get DefaultType(){return rQ}static get NAME(){return KJ}show(){if(Y.trigger(this._element,iQ).defaultPrevented)return;this._clearTimeout(),this._config.animation&&this._element.classList.add(nQ);const i=()=>{this._element.classList.remove(Fa),Y.trigger(this._element,sQ),this._maybeScheduleHide()};this._element.classList.remove($p),ha(this._element),this._element.classList.add(za,Fa),this._queueCallback(i,this._element,this._config.animation)}hide(){if(!this.isShown()||Y.trigger(this._element,eQ).defaultPrevented)return;const i=()=>{this._element.classList.add($p),this._element.classList.remove(Fa,za),Y.trigger(this._element,tQ)};this._element.classList.add(Fa),this._queueCallback(i,this._element,this._config.animation)}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(za),super.dispose()}isShown(){return this._element.classList.contains(za)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(e,i){switch(e.type){case"mouseover":case"mouseout":{this._hasMouseInteraction=i;break}case"focusin":case"focusout":{this._hasKeyboardInteraction=i;break}}if(i){this._clearTimeout();return}const s=e.relatedTarget;this._element===s||this._element.contains(s)||this._maybeScheduleHide()}_setListeners(){Y.on(this._element,JJ,e=>this._onInteraction(e,!0)),Y.on(this._element,QJ,e=>this._onInteraction(e,!1)),Y.on(this._element,ZJ,e=>this._onInteraction(e,!0)),Y.on(this._element,XJ,e=>this._onInteraction(e,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(e){return this.each(function(){const i=vd.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof i[e]>"u")throw new TypeError(`No method named "${e}"`);i[e](this)}})}}fd(vd);wi(vd);const aQ={name:"ItemTableAndToolbar",components:{ItemTableToolbar:d3,ItemTable:Wy,GoalFormModal:EY,RoutineFormModal:GY,TodoFormModal:r9},props:{itemType:String},provide(){return{draggedItem:this.draggedItem}},data:function(){return{sortBy:null,searchTerm:"",selectedColumns:null,store:null,draggedItem:null,formItemID:void 0,form:{id:void 0,itemType:void 0},modal:void 0}},methods:{async openItemForm(t){this.form.id=void 0,this.form.itemType=void 0,await this.$nextTick(),this.form.id=t.id,this.form.itemType=t.itemType,await this.$nextTick(),this.modal=new nn(this.$refs[`${t.itemType}-${t.id}-Modal`]),(t.itemType=="goal"||t.itemType=="todo"||t.itemType=="routine")&&this.modal.show()},async addItem(t){this.form.id=void 0,this.form.itemType=void 0,await this.$nextTick(),this.form.id=-1,this.form.itemType=t,await this.$nextTick(),this.modal=new nn(this.$refs[`${t}-${this.form.id}-Modal`]),(t=="goal"||t=="todo"||t=="routine")&&this.modal.show()},async closeItemModal(){this.modal.hide(),this.modal=void 0,this.form.id=void 0,this.form.itemType=void 0}}},lQ={class:"d-flex flex-column"},dQ=["id","aria-labelledby"];function cQ(t,e,i,s,r,n){const o=T("ItemTableToolbar"),a=T("ItemTable"),l=T("GoalFormModal"),d=T("RoutineFormModal"),u=T("TodoFormModal");return f(),m("div",lQ,[D(o,{itemType:i.itemType,onSetColumns:e[0]||(e[0]=h=>t.selectedColumns=h),onSetSortBy:e[1]||(e[1]=h=>t.sortBy=h),onSetSearchTerm:e[2]||(e[2]=h=>t.searchTerm=h),onAddItem:n.addItem},null,8,["itemType","onAddItem"]),D(a,{itemType:i.itemType,sortBy:t.sortBy,searchTerm:t.searchTerm,selectedColumns:t.selectedColumns,onSetDraggedItem:e[3]||(e[3]=h=>t.draggedItem=h),onOpenItemForm:n.openItemForm},null,8,["itemType","sortBy","searchTerm","selectedColumns","onOpenItemForm"]),t.form.id?(f(),m("div",{key:0,class:"item modal fade",id:`${t.form.itemType}-${t.form.id}-Modal`,tabindex:"-1","aria-labelledby":`${t.form.itemType}-${t.form.id}-ModalLabel`,"aria-hidden":"true",ref:`${t.form.itemType}-${t.form.id}-Modal`},[t.form.itemType=="goal"?(f(),K(l,{key:0,id:t.form.id,onCloseItemModal:n.closeItemModal},null,8,["id","onCloseItemModal"])):y("",!0),t.form.itemType=="routine"?(f(),K(d,{key:1,id:t.form.id,onCloseItemModal:n.closeItemModal},null,8,["id","onCloseItemModal"])):y("",!0),t.form.itemType=="todo"?(f(),K(u,{key:2,id:t.form.id,onCloseItemModal:n.closeItemModal},null,8,["id","onCloseItemModal"])):y("",!0)],8,dQ)):y("",!0)])}const uQ=V(aQ,[["render",cQ]]),hQ={components:{ItemTableAndToolbar:uQ},name:"ItemTab",props:{config:Object},data:function(){return{selectedItem:null,split:null}},methods:{itemSelected:fQ,refreshForm:pQ,closeForm:mQ}};function fQ(t){this.selectedItem!=t?(this.split&&this.split.destroy(),this.selectedItem=null,this.selectedItem=t,this.$nextTick(()=>{let e=localStorage.getItem(`${this.config.itemType}-split-sizes`);e?e=JSON.parse(e):e=[75,25],this.split=Ny([`#${this.config.itemType}-table`,`#${this.config.itemType}-form`],{sizes:e,minSize:[320,275],gutterSize:10,snapOffset:10,onDragEnd:i=>localStorage.setItem(`${this.config.itemType}-split-sizes`,JSON.stringify(i))})})):this.closeForm()}function mQ(){this.split&&(this.split.destroy(),this.split=null),this.selectedItem=null}function pQ(){this.selectedItem=this.config.newItem()}function gQ(t,e,i,s,r,n){const o=T("ItemTableAndToolbar");return f(),m("div",{class:"item row g-0",tabindex:"0",onKeyup:e[0]||(e[0]=wt((...a)=>n.closeForm&&n.closeForm(...a),["esc"]))},[c("div",{class:O({split:t.selectedItem})},[i.config.name.toLowerCase()=="goal"||i.config.name.toLowerCase()=="routine"||i.config.name.toLowerCase()=="todo"||i.config.name.toLowerCase()=="metric"?(f(),K(o,{key:0,itemType:i.config.name.toLowerCase()},null,8,["itemType"])):y("",!0)],2)],32)}const vQ=V(hQ,[["render",gQ]]),_Q={name:"ItemTabs",components:{ItemTab:vQ},data:function(){return{selectedTab:null,metricConfig:null,goalConfig:null,todoConfig:null,routineConfig:null,itemTableStore:void 0}},created:function(){this.metricConfig=new Ra(z8),this.goalConfig=new Ra(F8),this.todoConfig=new Ra(B_),this.routineConfig=new Ra(j8);let t=localStorage.getItem("selected-item-tab");t?this.selectedTab=t:(localStorage.setItem("selected-item-tab",this.selectedTab),this.selectedTab="goal")},async mounted(){let t=await U(()=>import("./itemTableStore-FgWJrjMO.js"),[]);this.itemTableStore=t.useItemTableStore();let e=this;this.itemTableStore.setContainerWidth(e.$refs.itemContainer.clientWidth),window.addEventListener("resize",function(){e.$refs.itemContainer.clientWidth&&e.itemTableStore.setContainerWidth(e.$refs.itemContainer.clientWidth)})},watch:{selectedTab(t){localStorage.setItem("selected-item-tab",t)}}},yQ={id:"items",ref:"itemContainer"},bQ={id:"nav-tab"},wQ={class:"nav nav-tabs justify-content-between",role:"tablist"};function SQ(t,e,i,s,r,n){const o=T("ItemTab");return f(),m("div",yQ,[c("nav",bQ,[c("div",wQ,[c("button",{id:"item-metric-tab",class:O(["nav-link flex-fill",[{active:t.selectedTab=="metric"}]]),"data-bs-toggle":"tab","data-bs-target":"#nav-metric",type:"button",role:"tab","aria-controls":"nav-home","aria-selected":"true",onClick:e[0]||(e[0]=a=>t.selectedTab="metric")},"Metrics",2),c("button",{id:"item-goal-tab",class:O(["nav-link flex-fill",[{active:t.selectedTab=="goal"}]]),"data-bs-toggle":"tab","data-bs-target":"#nav-goal",type:"button",role:"tab","aria-controls":"nav-goal","aria-selected":"false",onClick:e[1]||(e[1]=a=>t.selectedTab="goal")},"Goals",2),c("button",{id:"item-todo-tab",class:O(["nav-link flex-fill",[{active:t.selectedTab=="todo"}]]),"data-bs-toggle":"tab","data-bs-target":"#nav-todo",type:"button",role:"tab","aria-controls":"nav-todo","aria-selected":"false",onClick:e[2]||(e[2]=a=>t.selectedTab="todo")},"Todos",2),c("button",{id:"item-routine-tab",class:O(["nav-link flex-fill",[{active:t.selectedTab=="routine"}]]),"data-bs-toggle":"tab","data-bs-target":"#nav-routine",type:"button",role:"tab","aria-controls":"nav-routine","aria-selected":"false",onClick:e[3]||(e[3]=a=>t.selectedTab="routine")},"Routines",2)])]),H(D(o,{id:"nav-metric",class:O(["tab-pane fade",[{active:t.selectedTab=="metric",show:t.selectedTab=="metric"}]]),config:t.metricConfig,role:"tabpanel","aria-labelledby":"item-metric-tab"},null,8,["class","config"]),[[Ie,t.selectedTab=="metric"]]),H(D(o,{id:"nav-goal",class:O(["tab-pane fade",[{active:t.selectedTab=="goal",show:t.selectedTab=="goal"}]]),config:t.goalConfig,role:"tabpanel","aria-labelledby":"item-goal-tab"},null,8,["class","config"]),[[Ie,t.selectedTab=="goal"]]),H(D(o,{id:"nav-todo",class:O(["tab-pane fade",[{active:t.selectedTab=="todo",show:t.selectedTab=="todo"}]]),config:t.todoConfig,role:"tabpanel","aria-labelledby":"item-todo-tab"},null,8,["class","config"]),[[Ie,t.selectedTab=="todo"]]),H(D(o,{id:"nav-routine",class:O(["tab-pane fade",[{active:t.selectedTab=="routine",show:t.selectedTab=="routine"}]]),config:t.routineConfig,role:"tabpanel","aria-labelledby":"item-routine-tab"},null,8,["class","config"]),[[Ie,t.selectedTab=="routine"]])],512)}const zb=V(_Q,[["render",SQ]]),TQ="/metric/physical/Badass%20Workout%20Photo.jpg",xQ={name:"PhysicalView",components:{},props:{},data:function(){return{blurbs:[{id:1,date:"February 14, 2018",time:"9:22 AM",title:"The type I want",text:`I want an independent ambisiuos girl who is self driven and destined to accomplish their goals. I want a girl who doesn't actually "need" me to get through lifes challenges, but instead uses me as a resource for support and knows that I will always be there for them`,tags:["Social-Sexual","girls","want","independent"]},{id:2,date:"February 15, 2018",time:"11:25 AM",title:void 0,text:"It's 11:30 and I just saw the lady in the cubical in front of me eating her lunch...",tags:["Physical","food","apetite"]},{id:3,date:"February 15, 2018",time:"11:25 AM",title:void 0,text:"It's 11:30 and I just saw the lady in the cubical in front of me eating her lunch... I haven't event finished the apple I started to eat for breakfast an hour and a half ago. Not to mention the fact that I haven't even started on the yogurt as yet",tags:["Physical","food","apetite"]},{id:4,date:"February 14, 2018",time:"9:22 AM",title:"The type I want",text:`I want an independent ambisiuos girl who is self driven and destined to accomplish their goals. I want a girl who doesn't actually "need" me to get through lifes challenges, but instead uses me as a resource for support and knows that I will always be there for them`,tags:["Social-Sexual","girls","want","independent"]},{id:5,date:"February 15, 2018",time:"11:25 AM",title:"The type I want",text:"It's 11:30 and I just saw the lady in the cubical in front of me eating her lunch...",tags:["Physical","food","apetite"]},{id:6,date:"February 15, 2018",time:"11:25 AM",title:"The type I want",text:"It's 11:30 and I just saw the lady in the cubical in front of me eating her lunch... I haven't event finished the apple I started to eat for breakfast an hour and a half ago. Not to mention the fact that I haven't even started on the yogurt as yet",tags:["Physical","food","apetite"]}]}},created:function(){},methods:{}},EQ={class:"d-flex flex-column flex-grow-1"},IQ={class:"blurbs d-flex flex-column"},DQ={class:"date"},kQ={class:"time"},CQ={key:0,class:"title"},PQ={class:"text"},MQ={class:"d-flex flex-row"};function AQ(t,e,i,s,r,n){return f(),m("div",EQ,[e[0]||(e[0]=rv('<div class="hero" data-v-8ead4f3b><img class="img-fluid" src="'+TQ+'" data-v-8ead4f3b></div><div class="cards d-flex flex-row justify-content-center overflow-scroll" data-v-8ead4f3b><div class="card" data-v-8ead4f3b><div class="height d-flex flex-row" data-v-8ead4f3b><span class="feet" data-v-8ead4f3b>6</span><span class="ft" data-v-8ead4f3b>ft</span><span class="inch" data-v-8ead4f3b>0</span><span class="in" data-v-8ead4f3b>in</span></div><div class="weight d-flex flex-row" data-v-8ead4f3b><span data-v-8ead4f3b>145lbs</span></div></div><div class="card" data-v-8ead4f3b></div><div class="card" data-v-8ead4f3b></div><div class="card" data-v-8ead4f3b></div><div class="card" data-v-8ead4f3b></div><div class="card" data-v-8ead4f3b></div></div>',2)),c("div",IQ,[(f(!0),m(M,null,N(t.blurbs,o=>(f(),m("div",{key:o.id,class:"blurb d-flex flex-column"},[c("span",DQ,S(o.date),1),c("span",kQ,S(o.time),1),o.title?(f(),m("span",CQ,S(o.title),1)):y("",!0),c("span",PQ,S(o.text),1),c("div",MQ,[(f(!0),m(M,null,N(o.tags,(a,l)=>(f(),m("span",{key:l,class:"tag"},S(a),1))),128))])]))),128))])])}const OQ=V(xQ,[["render",AQ],["__scopeId","data-v-8ead4f3b"]]);async function RQ(t){let e={id:t};return fetch(`${re}/api/Event/GetEvent`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(i=>i.json()).then(i=>{if(i.errorMessage)this.errorMessage=i.errorMessage;else return i}).catch(i=>{console.error("Error:",i)})}async function Np(t,e){let i={start:t,end:e};return fetch(`${re}/api/Event/GetEventsInRange`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}).then(s=>s.json()).then(s=>{if(s.errorMessage)this.errorMessage=s.errorMessage;else return s}).catch(s=>{console.error("Error:",s)})}let Lp=!1;const Fb=Li("event",{state:()=>({events:[]}),getters:{},actions:{async initialize(){this.connectSocket(),Lp=!0},async fill(){this.events=await Np()},getEvent(t,e){const i=this;return e&&RQ(t).then(s=>{Be(s,i.events)}),this.events.find(s=>s.id==t)},getEvents(t,e,i){const s=this;return i&&Np(t,e).then(r=>{r.forEach(n=>{Be(n,s.events)})}),this.events},connectSocket(){if(!Lp){let t=Os("plannerHub"),e=this;t.on("UpdateEvents",i=>{i.forEach(s=>{Be(s,e.events)}),xe(e.events)}),t.on("RemoveEvents",i=>{i.forEach(s=>{xs(s,e.events)}),xe(e.events)}),t.on("UpdateIterations",i=>{i.forEach(s=>{e.events.forEach(r=>{var n=r.iterations.some(o=>o.id==s.id);n&&(Be(s,r.iterations),xe(r.iterations))})})}),t.on("RemoveIterations",i=>{i.forEach(s=>{e.events.forEach(r=>{var n=r.iterations.some(o=>o.id==s);n&&(xs(s,r.iterations),xe(r.iterations))})})})}}}}),$s=Object.freeze(Object.defineProperty({__proto__:null,useEventStore:Fb},Symbol.toStringTag,{value:"Module"}));async function $Q(t,e){let i={startAt:t,endAt:e};return fetch(`${re}/api/Planner/GetAllIterationsInRange`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}).then(s=>s.json()).then(s=>{if(s.status.success)return s.result;console.error("Error:",s.status.errorMessage)}).catch(s=>{console.error("Error:",s)})}async function NQ(){return fetch(`${re}/api/Planner/GetUnplannedIterations`,{method:"POST",headers:{"Content-Type":"application/json"}}).then(t=>t.json()).then(t=>{if(t.status.success)return t.result;console.error("Error:",t.status.errorMessage)}).catch(t=>{console.error("Error:",t)})}async function LQ(t,e,i,s,r){let n={iterationID:t,text:e,points:i,startAt:s,endAt:r};return fetch(`${re}/api/Planner/UpdateIteration`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then(o=>o.json()).then(o=>{if(o.errorMessage)this.errorMessage=o.errorMessage;else return o}).catch(o=>{console.error("Error:",o)})}async function VQ(t,e,i){let s={iterationID:t,startAt:e,endAt:i};return fetch(`${re}/api/Planner/RescheduleIteration`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}).then(r=>r.json()).then(r=>{if(r.errorMessage)this.errorMessage=r.errorMessage;else return r}).catch(r=>{console.error("Error:",r)})}async function Vp(t,e,i){let s={iterationID:t,attemptedAt:e,completedAt:i};return fetch(`${re}/api/Planner/ToggleTaskCompletion`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}).then(r=>r.json()).then(r=>{if(r.errorMessage)this.errorMessage=r.errorMessage;else return r}).catch(r=>{console.error("Error:",r)})}async function WQ(t,e){let i={iterationID:t,attemptedAt:e};return fetch(`${re}/api/Planner/AttemptIteration`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}).then(s=>s.json()).then(s=>{if(s.errorMessage)this.errorMessage=s.errorMessage;else return s}).catch(s=>{console.error("Error:",s)})}async function zQ(t){let e={iterationID:t};return fetch(`${re}/api/Planner/DeleteIteration`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(i=>i.json()).then(i=>{if(i.errorMessage)this.errorMessage=i.errorMessage;else return i}).catch(i=>{console.error("Error:",i)})}let Wp=!1;const jb=Li("iteration",{state:()=>({iterations:[]}),getters:{},actions:{async initialize(){this.connectSocket(),Wp=!0},getIteration(t){return this.iterations.find(e=>e.id=t)},getIterations(){return this.iterations},getIterationsInRange(t,e,i){let s=this;return i&&$Q(t,e).then(r=>{r.forEach(n=>{Be(n,s.iterations)}),xe(s.iterations,"startAt")}),this.iterations.filter(r=>new Date(r.startAt).getTime()>=t&&new Date(r.startAt).getTime()<=e)},getRepetitiveTodoIterations(t,e){let i=this;return LR(t,e).then(s=>{s.forEach(r=>{Be(r,i.iterations)}),xe(i.iterations,"startAt")}),this.iterations.filter(s=>new Date(s.startAt).getTime()>=t&&new Date(s.startAt).getTime()<=e&&s.idRoutine==null&&s.idRoutineIteration==null)},getUnplannedIterations(t){let e=this;return t&&NQ().then(i=>{i.forEach(s=>{Be(s,e.iterations)}),xe(e.iterations,"startAt")}),this.iterations.filter(i=>!i.startAt&&i.idRoutine==null&&i.idRoutineIteration==null)},updateIteration(t,e,i,s,r){LQ(t,e,i,s,r)},rescheduleIteration(t,e,i){VQ(t,e,i)},setCompletion(t,e,i){let s=this.iterations.find(r=>r.id==t);s&&(s.attemptedAt=e?e.toJSON():null,s.completedAt=i?i.toJSON():null,Vp(t,e,i))},toggleCompletion(t,e,i){Vp(t,e,i)},attemptIteration(t,e){WQ(t,e)},deleteIteration(t){zQ(t)},connectSocket(){if(!Wp){let t=Os("plannerHub"),e=this;t.on("UpdateIterations",i=>{i.forEach(s=>{Be(s,e.iterations)}),xe(e.iterations)}),t.on("RemoveIterations",i=>{i.forEach(s=>{xs(s,e.iterations)}),xe(e.iterations)})}}}}),Et=Object.freeze(Object.defineProperty({__proto__:null,useIterationStore:jb},Symbol.toStringTag,{value:"Module"}));async function FQ(t,e){let i={idTimeframe:t,datetime:e};return fetch(`${re}/api/Universal/GetBriefingBlurbs`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}).then(s=>s.json()).then(s=>{if(s.status.success)return s.result;console.error("Error:",s.status.errorMessage)}).catch(s=>{console.error("Error:",s)})}async function jQ(t,e,i,s,r){let n={text:t,datetime:e,idBlurbType:i,idMetric:s,idTimeframe:r};return fetch(`${re}/api/Universal/AddBriefingBlurb`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then(o=>o.json()).then(o=>{if(o.status.success)return o.result;console.error("Error:",o.status.errorMessage)}).catch(o=>{console.error("Error:",o)})}let zp=!1;const Bb=Li("universal",{state:()=>({blurbs:[]}),getters:{},actions:{async initialize(){this.connectSocket(),zp=!0},getBriefingBlurbs(t,e){let i=this;return FQ(t,e).then(s=>{s.forEach(r=>{Be(r,i.blurbs)})}),this.blurbs},addBriefingBlurb(t,e,i,s,r){jQ(t,e,i,s,r)},connectSocket(){if(!zp){let t=Os("plannerHub"),e=this;t.on("UpdateBlurbs",i=>{i.forEach(s=>{Be(s,e.blurbs)})})}}}}),Hh=Object.freeze(Object.defineProperty({__proto__:null,useUniversalStore:Bb},Symbol.toStringTag,{value:"Module"})),BQ={name:"App",components:{AppMobile:sH,PlannerNavbar:pH,LeftPanel:n8,ItemPanel:Ry,Planner:Ly,ItemTabs:zb,PhysicalView:OQ},data:function(){return{navbar:{selectedView:"weekView",week:{dayCount:7},selectedPage:"planner"},itemsPage:{selectPanel:void 0},appStore:void 0,plannerStore:void 0,showLeft:!0}},created:async function(){let t=localStorage.getItem("selected-page");t?this.navbar.selectedPage=t:localStorage.setItem("selected-page",this.navbar.selectedPage);let e=localStorage.getItem("selected-planner-view");e?this.navbar.selectedView=e:localStorage.setItem("selected-planner-view",this.navbar.selectedView);let i=localStorage.getItem("week-view-day-count");i?this.navbar.week.dayCount=Number(i):localStorage.setItem("week-view-day-count",this.navbar.week.dayCount),await this.initStores()},beforeUnmount(){typeof window<"u"&&window.removeEventListener("resize",this.onResize,{passive:!0})},mounted(){this.onResize(),window.addEventListener("resize",this.onResize,{passive:!0})},computed:{isExtraSmall(){return this.appStore?this.appStore.isExtraSmall:!0},leftPanelVisibility(){return this.showLeft?"show-left-panel":"hide-left-panel"},itemPanelVisibility(){return this.appStore.itemPanel.selected?"show-item-panel":"hide-item-panel"},selectedItemPanel(){return this.appStore?this.appStore.itemPanel.selected:"todo"}},methods:{initStores:HQ,toggleLeftPanel:UQ,dayCountChange:YQ,viewChange:GQ,showPage:KQ,selectEvent:qQ,onResize:JQ},watch:{"navbar.selectedPage"(t){localStorage.setItem("selected-page",t)},"navbar.selectedView"(t){localStorage.setItem("selected-planner-view",t)},"navbar.week.dayCount"(t){localStorage.setItem("week-view-day-count",t)}}};async function HQ(){this.appStore=Gt(),this.plannerStore=jr();let t=Bb(),e=Fb(),i=jb(),s=Bn(),r=cn(),n=Yr(),o=Ur(),a=aa();t.initialize(),e.initialize(),i.initialize(),s.initialize();let l=r.initialize(),d=n.initialize(),u=o.initialize(),h=a.initialize();await Promise.all([l,d,u,h]).then(()=>{r.initializeItems(),n.initializeItems(),o.initializeItems(),a.initializeItems()})}function UQ(){this.showLeft=!this.showLeft}function YQ(t){this.navbar.week.dayCount=t}function GQ(t){this.navbar.selectedView=t}function KQ(t){t=="planner"?this.showLeft=!0:t=="items"?this.showLeft=!1:t=="physical"&&(this.showLeft=!1),this.navbar.selectedPage=t}function qQ(t){this.itemsPage.selectPanel={panel:"event",props:{_event:t}}}function JQ(){this.appStore.setWindowSize(window.innerWidth,window.innerHeight),this.appStore.setWindowOuterSize(window.outerWidth,window.outerHeight)}const QQ={id:"app"},ZQ={class:"nav-bar overflow-scroll"},XQ={class:"grid-left-panel"},eZ={class:"grid-body overflow-scroll"},tZ={class:"grid-right-panel"};function iZ(t,e,i,s,r,n){const o=T("AppMobile"),a=T("PlannerNavbar"),l=T("LeftPanel"),d=T("Planner"),u=T("ItemTabs"),h=T("PhysicalView"),p=T("ItemPanel");return f(),m("div",QQ,[n.isExtraSmall?(f(),K(o,{key:0})):(f(),m("div",{key:1,class:O(["grid-container",n.leftPanelVisibility,n.itemPanelVisibility])},[c("div",ZQ,[D(a,{dayCount:t.navbar.week.dayCount,selectedView:t.navbar.selectedView,selectedPage:t.navbar.selectedPage,onDayCountChange:n.dayCountChange,onViewChange:n.viewChange,onShowPage:n.showPage,onToggleLeftPanel:n.toggleLeftPanel},null,8,["dayCount","selectedView","selectedPage","onDayCountChange","onViewChange","onShowPage","onToggleLeftPanel"])]),c("div",XQ,[D(l,{isShown:t.showLeft,onTogglePanel:n.toggleLeftPanel},null,8,["isShown","onTogglePanel"])]),c("div",eZ,[H(D(d,{selectedPage:t.navbar.selectedPage,dayCount:t.navbar.week.dayCount,selectedView:t.navbar.selectedView,onSelectEvent:n.selectEvent},null,8,["selectedPage","dayCount","selectedView","onSelectEvent"]),[[Ie,t.navbar.selectedPage=="planner"]]),H(D(u,null,null,512),[[Ie,t.navbar.selectedPage=="items"]]),t.navbar.selectedPage=="physical"?(f(),K(h,{key:0})):y("",!0)]),c("div",tZ,[D(p)])],2))])}const sZ=V(BQ,[["render",iZ]]);/*!
  * vue-router v4.5.0
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const rr=typeof document<"u";function Hb(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function nZ(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&Hb(t.default)}const Ke=Object.assign;function bc(t,e){const i={};for(const s in e){const r=e[s];i[s]=Ni(r)?r.map(t):t(r)}return i}const Eo=()=>{},Ni=Array.isArray,Ub=/#/g,rZ=/&/g,oZ=/\//g,aZ=/=/g,lZ=/\?/g,Yb=/\+/g,dZ=/%5B/g,cZ=/%5D/g,Gb=/%5E/g,uZ=/%60/g,Kb=/%7B/g,hZ=/%7C/g,qb=/%7D/g,fZ=/%20/g;function Uh(t){return encodeURI(""+t).replace(hZ,"|").replace(dZ,"[").replace(cZ,"]")}function mZ(t){return Uh(t).replace(Kb,"{").replace(qb,"}").replace(Gb,"^")}function ru(t){return Uh(t).replace(Yb,"%2B").replace(fZ,"+").replace(Ub,"%23").replace(rZ,"%26").replace(uZ,"`").replace(Kb,"{").replace(qb,"}").replace(Gb,"^")}function pZ(t){return ru(t).replace(aZ,"%3D")}function gZ(t){return Uh(t).replace(Ub,"%23").replace(lZ,"%3F")}function vZ(t){return t==null?"":gZ(t).replace(oZ,"%2F")}function Ho(t){try{return decodeURIComponent(""+t)}catch{}return""+t}const _Z=/\/$/,yZ=t=>t.replace(_Z,"");function wc(t,e,i="/"){let s,r={},n="",o="";const a=e.indexOf("#");let l=e.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(s=e.slice(0,l),n=e.slice(l+1,a>-1?a:e.length),r=t(n)),a>-1&&(s=s||e.slice(0,a),o=e.slice(a,e.length)),s=TZ(s??e,i),{fullPath:s+(n&&"?")+n+o,path:s,query:r,hash:Ho(o)}}function bZ(t,e){const i=e.query?t(e.query):"";return e.path+(i&&"?")+i+(e.hash||"")}function wZ(t,e,i){const s=e.matched.length-1,r=i.matched.length-1;return s>-1&&s===r&&Nr(e.matched[s],i.matched[r])&&Jb(e.params,i.params)&&t(e.query)===t(i.query)&&e.hash===i.hash}function Nr(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function Jb(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const i in t)if(!SZ(t[i],e[i]))return!1;return!0}function SZ(t,e){return Ni(t)?Fp(t,e):Ni(e)?Fp(e,t):t===e}function Fp(t,e){return Ni(e)?t.length===e.length&&t.every((i,s)=>i===e[s]):t.length===1&&t[0]===e}function TZ(t,e){if(t.startsWith("/"))return t;if(!t)return e;const i=e.split("/"),s=t.split("/"),r=s[s.length-1];(r===".."||r===".")&&s.push("");let n=i.length-1,o,a;for(o=0;o<s.length;o++)if(a=s[o],a!==".")if(a==="..")n>1&&n--;else break;return i.slice(0,n).join("/")+"/"+s.slice(o).join("/")}const Vs={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var Uo;(function(t){t.pop="pop",t.push="push"})(Uo||(Uo={}));var El;(function(t){t.back="back",t.forward="forward",t.unknown=""})(El||(El={}));const Sc="";function xZ(t){if(!t)if(rr){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),yZ(t)}const EZ=/^[^#]+#/;function IZ(t,e){return t.replace(EZ,"#")+e}function DZ(t,e){const i=document.documentElement.getBoundingClientRect(),s=t.getBoundingClientRect();return{behavior:e.behavior,left:s.left-i.left-(e.left||0),top:s.top-i.top-(e.top||0)}}const kZ=()=>({left:window.scrollX,top:window.scrollY});function CZ(t){let e;if("el"in t){const i=t.el,s=typeof i=="string"&&i.startsWith("#"),r=typeof i=="string"?s?document.getElementById(i.slice(1)):document.querySelector(i):i;if(!r)return;e=DZ(r,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function jp(t,e){return(history.state?history.state.position-e:-1)+t}const ou=new Map;function PZ(t,e){ou.set(t,e)}function MZ(t){const e=ou.get(t);return ou.delete(t),e}function AZ(t=""){let e=[],i=[Sc],s=0;t=xZ(t);function r(a){s++,s!==i.length&&i.splice(s),i.push(a)}function n(a,l,{direction:d,delta:u}){const h={direction:d,delta:u,type:Uo.pop};for(const p of e)p(a,l,h)}const o={location:Sc,state:{},base:t,createHref:IZ.bind(null,t),replace(a){i.splice(s--,1),r(a)},push(a,l){r(a)},listen(a){return e.push(a),()=>{const l=e.indexOf(a);l>-1&&e.splice(l,1)}},destroy(){e=[],i=[Sc],s=0},go(a,l=!0){const d=this.location,u=a<0?El.back:El.forward;s=Math.max(0,Math.min(s+a,i.length-1)),l&&n(this.location,d,{direction:u,delta:a})}};return Object.defineProperty(o,"location",{enumerable:!0,get:()=>i[s]}),o}function OZ(t){return typeof t=="string"||t&&typeof t=="object"}function Qb(t){return typeof t=="string"||typeof t=="symbol"}const Zb=Symbol("");var Bp;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(Bp||(Bp={}));function Lr(t,e){return Ke(new Error,{type:t,[Zb]:!0},e)}function us(t,e){return t instanceof Error&&Zb in t&&(e==null||!!(t.type&e))}const Hp="[^/]+?",RZ={sensitive:!1,strict:!1,start:!0,end:!0},$Z=/[.+*?^${}()[\]/\\]/g;function NZ(t,e){const i=Ke({},RZ,e),s=[];let r=i.start?"^":"";const n=[];for(const d of t){const u=d.length?[]:[90];i.strict&&!d.length&&(r+="/");for(let h=0;h<d.length;h++){const p=d[h];let g=40+(i.sensitive?.25:0);if(p.type===0)h||(r+="/"),r+=p.value.replace($Z,"\\$&"),g+=40;else if(p.type===1){const{value:w,repeatable:_,optional:P,regexp:k}=p;n.push({name:w,repeatable:_,optional:P});const R=k||Hp;if(R!==Hp){g+=10;try{new RegExp(`(${R})`)}catch(A){throw new Error(`Invalid custom RegExp for param "${w}" (${R}): `+A.message)}}let $=_?`((?:${R})(?:/(?:${R}))*)`:`(${R})`;h||($=P&&d.length<2?`(?:/${$})`:"/"+$),P&&($+="?"),r+=$,g+=20,P&&(g+=-8),_&&(g+=-20),R===".*"&&(g+=-50)}u.push(g)}s.push(u)}if(i.strict&&i.end){const d=s.length-1;s[d][s[d].length-1]+=.7000000000000001}i.strict||(r+="/?"),i.end?r+="$":i.strict&&!r.endsWith("/")&&(r+="(?:/|$)");const o=new RegExp(r,i.sensitive?"":"i");function a(d){const u=d.match(o),h={};if(!u)return null;for(let p=1;p<u.length;p++){const g=u[p]||"",w=n[p-1];h[w.name]=g&&w.repeatable?g.split("/"):g}return h}function l(d){let u="",h=!1;for(const p of t){(!h||!u.endsWith("/"))&&(u+="/"),h=!1;for(const g of p)if(g.type===0)u+=g.value;else if(g.type===1){const{value:w,repeatable:_,optional:P}=g,k=w in d?d[w]:"";if(Ni(k)&&!_)throw new Error(`Provided param "${w}" is an array but it is not repeatable (* or + modifiers)`);const R=Ni(k)?k.join("/"):k;if(!R)if(P)p.length<2&&(u.endsWith("/")?u=u.slice(0,-1):h=!0);else throw new Error(`Missing required param "${w}"`);u+=R}}return u||"/"}return{re:o,score:s,keys:n,parse:a,stringify:l}}function LZ(t,e){let i=0;for(;i<t.length&&i<e.length;){const s=e[i]-t[i];if(s)return s;i++}return t.length<e.length?t.length===1&&t[0]===80?-1:1:t.length>e.length?e.length===1&&e[0]===80?1:-1:0}function Xb(t,e){let i=0;const s=t.score,r=e.score;for(;i<s.length&&i<r.length;){const n=LZ(s[i],r[i]);if(n)return n;i++}if(Math.abs(r.length-s.length)===1){if(Up(s))return 1;if(Up(r))return-1}return r.length-s.length}function Up(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const VZ={type:0,value:""},WZ=/[a-zA-Z0-9_]/;function zZ(t){if(!t)return[[]];if(t==="/")return[[VZ]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(g){throw new Error(`ERR (${i})/"${d}": ${g}`)}let i=0,s=i;const r=[];let n;function o(){n&&r.push(n),n=[]}let a=0,l,d="",u="";function h(){d&&(i===0?n.push({type:0,value:d}):i===1||i===2||i===3?(n.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${d}) must be alone in its segment. eg: '/:ids+.`),n.push({type:1,value:d,regexp:u,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),d="")}function p(){d+=l}for(;a<t.length;){if(l=t[a++],l==="\\"&&i!==2){s=i,i=4;continue}switch(i){case 0:l==="/"?(d&&h(),o()):l===":"?(h(),i=1):p();break;case 4:p(),i=s;break;case 1:l==="("?i=2:WZ.test(l)?p():(h(),i=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+l:i=3:u+=l;break;case 3:h(),i=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,u="";break;default:e("Unknown state");break}}return i===2&&e(`Unfinished custom RegExp for param "${d}"`),h(),o(),r}function FZ(t,e,i){const s=NZ(zZ(t.path),i),r=Ke(s,{record:t,parent:e,children:[],alias:[]});return e&&!r.record.aliasOf==!e.record.aliasOf&&e.children.push(r),r}function jZ(t,e){const i=[],s=new Map;e=qp({strict:!1,end:!0,sensitive:!1},e);function r(h){return s.get(h)}function n(h,p,g){const w=!g,_=Gp(h);_.aliasOf=g&&g.record;const P=qp(e,h),k=[_];if("alias"in h){const A=typeof h.alias=="string"?[h.alias]:h.alias;for(const Z of A)k.push(Gp(Ke({},_,{components:g?g.record.components:_.components,path:Z,aliasOf:g?g.record:_})))}let R,$;for(const A of k){const{path:Z}=A;if(p&&Z[0]!=="/"){const le=p.record.path,te=le[le.length-1]==="/"?"":"/";A.path=p.record.path+(Z&&te+Z)}if(R=FZ(A,p,P),g?g.alias.push(R):($=$||R,$!==R&&$.alias.push(R),w&&h.name&&!Kp(R)&&o(h.name)),ew(R)&&l(R),_.children){const le=_.children;for(let te=0;te<le.length;te++)n(le[te],R,g&&g.children[te])}g=g||R}return $?()=>{o($)}:Eo}function o(h){if(Qb(h)){const p=s.get(h);p&&(s.delete(h),i.splice(i.indexOf(p),1),p.children.forEach(o),p.alias.forEach(o))}else{const p=i.indexOf(h);p>-1&&(i.splice(p,1),h.record.name&&s.delete(h.record.name),h.children.forEach(o),h.alias.forEach(o))}}function a(){return i}function l(h){const p=UZ(h,i);i.splice(p,0,h),h.record.name&&!Kp(h)&&s.set(h.record.name,h)}function d(h,p){let g,w={},_,P;if("name"in h&&h.name){if(g=s.get(h.name),!g)throw Lr(1,{location:h});P=g.record.name,w=Ke(Yp(p.params,g.keys.filter($=>!$.optional).concat(g.parent?g.parent.keys.filter($=>$.optional):[]).map($=>$.name)),h.params&&Yp(h.params,g.keys.map($=>$.name))),_=g.stringify(w)}else if(h.path!=null)_=h.path,g=i.find($=>$.re.test(_)),g&&(w=g.parse(_),P=g.record.name);else{if(g=p.name?s.get(p.name):i.find($=>$.re.test(p.path)),!g)throw Lr(1,{location:h,currentLocation:p});P=g.record.name,w=Ke({},p.params,h.params),_=g.stringify(w)}const k=[];let R=g;for(;R;)k.unshift(R.record),R=R.parent;return{name:P,path:_,params:w,matched:k,meta:HZ(k)}}t.forEach(h=>n(h));function u(){i.length=0,s.clear()}return{addRoute:n,resolve:d,removeRoute:o,clearRoutes:u,getRoutes:a,getRecordMatcher:r}}function Yp(t,e){const i={};for(const s of e)s in t&&(i[s]=t[s]);return i}function Gp(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:BZ(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function BZ(t){const e={},i=t.props||!1;if("component"in t)e.default=i;else for(const s in t.components)e[s]=typeof i=="object"?i[s]:i;return e}function Kp(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function HZ(t){return t.reduce((e,i)=>Ke(e,i.meta),{})}function qp(t,e){const i={};for(const s in t)i[s]=s in e?e[s]:t[s];return i}function UZ(t,e){let i=0,s=e.length;for(;i!==s;){const n=i+s>>1;Xb(t,e[n])<0?s=n:i=n+1}const r=YZ(t);return r&&(s=e.lastIndexOf(r,s-1)),s}function YZ(t){let e=t;for(;e=e.parent;)if(ew(e)&&Xb(t,e)===0)return e}function ew({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function GZ(t){const e={};if(t===""||t==="?")return e;const s=(t[0]==="?"?t.slice(1):t).split("&");for(let r=0;r<s.length;++r){const n=s[r].replace(Yb," "),o=n.indexOf("="),a=Ho(o<0?n:n.slice(0,o)),l=o<0?null:Ho(n.slice(o+1));if(a in e){let d=e[a];Ni(d)||(d=e[a]=[d]),d.push(l)}else e[a]=l}return e}function Jp(t){let e="";for(let i in t){const s=t[i];if(i=pZ(i),s==null){s!==void 0&&(e+=(e.length?"&":"")+i);continue}(Ni(s)?s.map(n=>n&&ru(n)):[s&&ru(s)]).forEach(n=>{n!==void 0&&(e+=(e.length?"&":"")+i,n!=null&&(e+="="+n))})}return e}function KZ(t){const e={};for(const i in t){const s=t[i];s!==void 0&&(e[i]=Ni(s)?s.map(r=>r==null?null:""+r):s==null?s:""+s)}return e}const qZ=Symbol(""),Qp=Symbol(""),Yh=Symbol(""),tw=Symbol(""),au=Symbol("");function ao(){let t=[];function e(s){return t.push(s),()=>{const r=t.indexOf(s);r>-1&&t.splice(r,1)}}function i(){t=[]}return{add:e,list:()=>t.slice(),reset:i}}function js(t,e,i,s,r,n=o=>o()){const o=s&&(s.enterCallbacks[r]=s.enterCallbacks[r]||[]);return()=>new Promise((a,l)=>{const d=p=>{p===!1?l(Lr(4,{from:i,to:e})):p instanceof Error?l(p):OZ(p)?l(Lr(2,{from:e,to:p})):(o&&s.enterCallbacks[r]===o&&typeof p=="function"&&o.push(p),a())},u=n(()=>t.call(s&&s.instances[r],e,i,d));let h=Promise.resolve(u);t.length<3&&(h=h.then(d)),h.catch(p=>l(p))})}function Tc(t,e,i,s,r=n=>n()){const n=[];for(const o of t)for(const a in o.components){let l=o.components[a];if(!(e!=="beforeRouteEnter"&&!o.instances[a]))if(Hb(l)){const u=(l.__vccOpts||l)[e];u&&n.push(js(u,i,s,o,a,r))}else{let d=l();n.push(()=>d.then(u=>{if(!u)throw new Error(`Couldn't resolve component "${a}" at "${o.path}"`);const h=nZ(u)?u.default:u;o.mods[a]=u,o.components[a]=h;const g=(h.__vccOpts||h)[e];return g&&js(g,i,s,o,a,r)()}))}}return n}function Zp(t){const e=Zi(Yh),i=Zi(tw),s=di(()=>{const l=mr(t.to);return e.resolve(l)}),r=di(()=>{const{matched:l}=s.value,{length:d}=l,u=l[d-1],h=i.matched;if(!u||!h.length)return-1;const p=h.findIndex(Nr.bind(null,u));if(p>-1)return p;const g=Xp(l[d-2]);return d>1&&Xp(u)===g&&h[h.length-1].path!==g?h.findIndex(Nr.bind(null,l[d-2])):p}),n=di(()=>r.value>-1&&eX(i.params,s.value.params)),o=di(()=>r.value>-1&&r.value===i.matched.length-1&&Jb(i.params,s.value.params));function a(l={}){if(XZ(l)){const d=e[mr(t.replace)?"replace":"push"](mr(t.to)).catch(Eo);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>d),d}return Promise.resolve()}return{route:s,href:di(()=>s.value.href),isActive:n,isExactActive:o,navigate:a}}function JZ(t){return t.length===1?t[0]:t}const QZ=Tu({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:Zp,setup(t,{slots:e}){const i=Ko(Zp(t)),{options:s}=Zi(Yh),r=di(()=>({[eg(t.activeClass,s.linkActiveClass,"router-link-active")]:i.isActive,[eg(t.exactActiveClass,s.linkExactActiveClass,"router-link-exact-active")]:i.isExactActive}));return()=>{const n=e.default&&JZ(e.default(i));return t.custom?n:lv("a",{"aria-current":i.isExactActive?t.ariaCurrentValue:null,href:i.href,onClick:i.navigate,class:r.value},n)}}}),ZZ=QZ;function XZ(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function eX(t,e){for(const i in e){const s=e[i],r=t[i];if(typeof s=="string"){if(s!==r)return!1}else if(!Ni(r)||r.length!==s.length||s.some((n,o)=>n!==r[o]))return!1}return!0}function Xp(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const eg=(t,e,i)=>t??e??i,tX=Tu({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:i}){const s=Zi(au),r=di(()=>t.route||s.value),n=Zi(Qp,0),o=di(()=>{let d=mr(n);const{matched:u}=r.value;let h;for(;(h=u[d])&&!h.components;)d++;return d}),a=di(()=>r.value.matched[o.value]);Ba(Qp,di(()=>o.value+1)),Ba(qZ,a),Ba(au,r);const l=fr();return mo(()=>[l.value,a.value,t.name],([d,u,h],[p,g,w])=>{u&&(u.instances[h]=d,g&&g!==u&&d&&d===p&&(u.leaveGuards.size||(u.leaveGuards=g.leaveGuards),u.updateGuards.size||(u.updateGuards=g.updateGuards))),d&&u&&(!g||!Nr(u,g)||!p)&&(u.enterCallbacks[h]||[]).forEach(_=>_(d))},{flush:"post"}),()=>{const d=r.value,u=t.name,h=a.value,p=h&&h.components[u];if(!p)return tg(i.default,{Component:p,route:d});const g=h.props[u],w=g?g===!0?d.params:typeof g=="function"?g(d):g:null,P=lv(p,Ke({},w,e,{onVnodeUnmounted:k=>{k.component.isUnmounted&&(h.instances[u]=null)},ref:l}));return tg(i.default,{Component:P,route:d})||P}}});function tg(t,e){if(!t)return null;const i=t(e);return i.length===1?i[0]:i}const iX=tX;function sX(t){const e=jZ(t.routes,t),i=t.parseQuery||GZ,s=t.stringifyQuery||Jp,r=t.history,n=ao(),o=ao(),a=ao(),l=Rw(Vs);let d=Vs;rr&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=bc.bind(null,x=>""+x),h=bc.bind(null,vZ),p=bc.bind(null,Ho);function g(x,I){let C,B;return Qb(x)?(C=e.getRecordMatcher(x),B=I):B=x,e.addRoute(B,C)}function w(x){const I=e.getRecordMatcher(x);I&&e.removeRoute(I)}function _(){return e.getRoutes().map(x=>x.record)}function P(x){return!!e.getRecordMatcher(x)}function k(x,I){if(I=Ke({},I||l.value),typeof x=="string"){const E=wc(i,x,I.path),L=e.resolve({path:E.path},I),F=r.createHref(E.fullPath);return Ke(E,L,{params:p(L.params),hash:Ho(E.hash),redirectedFrom:void 0,href:F})}let C;if(x.path!=null)C=Ke({},x,{path:wc(i,x.path,I.path).path});else{const E=Ke({},x.params);for(const L in E)E[L]==null&&delete E[L];C=Ke({},x,{params:h(E)}),I.params=h(I.params)}const B=e.resolve(C,I),ye=x.hash||"";B.params=u(p(B.params));const v=bZ(s,Ke({},x,{hash:mZ(ye),path:B.path})),b=r.createHref(v);return Ke({fullPath:v,hash:ye,query:s===Jp?KZ(x.query):x.query||{}},B,{redirectedFrom:void 0,href:b})}function R(x){return typeof x=="string"?wc(i,x,l.value.path):Ke({},x)}function $(x,I){if(d!==x)return Lr(8,{from:I,to:x})}function A(x){return te(x)}function Z(x){return A(Ke(R(x),{replace:!0}))}function le(x){const I=x.matched[x.matched.length-1];if(I&&I.redirect){const{redirect:C}=I;let B=typeof C=="function"?C(x):C;return typeof B=="string"&&(B=B.includes("?")||B.includes("#")?B=R(B):{path:B},B.params={}),Ke({query:x.query,hash:x.hash,params:B.path!=null?{}:x.params},B)}}function te(x,I){const C=d=k(x),B=l.value,ye=x.state,v=x.force,b=x.replace===!0,E=le(C);if(E)return te(Ke(R(E),{state:typeof E=="object"?Ke({},ye,E.state):ye,force:v,replace:b}),I||C);const L=C;L.redirectedFrom=I;let F;return!v&&wZ(s,B,C)&&(F=Lr(16,{to:L,from:B}),ct(B,B,!0,!1)),(F?Promise.resolve(F):pe(L,B)).catch(j=>us(j)?us(j,2)?j:dt(j):Se(j,L,B)).then(j=>{if(j){if(us(j,2))return te(Ke({replace:b},R(j.to),{state:typeof j.to=="object"?Ke({},ye,j.to.state):ye,force:v}),I||L)}else j=Oe(L,B,!0,b,ye);return ke(L,B,j),j})}function ie(x,I){const C=$(x,I);return C?Promise.reject(C):Promise.resolve()}function ae(x){const I=It.values().next().value;return I&&typeof I.runWithContext=="function"?I.runWithContext(x):x()}function pe(x,I){let C;const[B,ye,v]=nX(x,I);C=Tc(B.reverse(),"beforeRouteLeave",x,I);for(const E of B)E.leaveGuards.forEach(L=>{C.push(js(L,x,I))});const b=ie.bind(null,x,I);return C.push(b),ut(C).then(()=>{C=[];for(const E of n.list())C.push(js(E,x,I));return C.push(b),ut(C)}).then(()=>{C=Tc(ye,"beforeRouteUpdate",x,I);for(const E of ye)E.updateGuards.forEach(L=>{C.push(js(L,x,I))});return C.push(b),ut(C)}).then(()=>{C=[];for(const E of v)if(E.beforeEnter)if(Ni(E.beforeEnter))for(const L of E.beforeEnter)C.push(js(L,x,I));else C.push(js(E.beforeEnter,x,I));return C.push(b),ut(C)}).then(()=>(x.matched.forEach(E=>E.enterCallbacks={}),C=Tc(v,"beforeRouteEnter",x,I,ae),C.push(b),ut(C))).then(()=>{C=[];for(const E of o.list())C.push(js(E,x,I));return C.push(b),ut(C)}).catch(E=>us(E,8)?E:Promise.reject(E))}function ke(x,I,C){a.list().forEach(B=>ae(()=>B(x,I,C)))}function Oe(x,I,C,B,ye){const v=$(x,I);if(v)return v;const b=I===Vs,E=rr?history.state:{};C&&(B||b?r.replace(x.fullPath,Ke({scroll:b&&E&&E.scroll},ye)):r.push(x.fullPath,ye)),l.value=x,ct(x,I,C,b),dt()}let Me;function Ze(){Me||(Me=r.listen((x,I,C)=>{if(!Nt.listening)return;const B=k(x),ye=le(B);if(ye){te(Ke(ye,{replace:!0,force:!0}),B).catch(Eo);return}d=B;const v=l.value;rr&&PZ(jp(v.fullPath,C.delta),kZ()),pe(B,v).catch(b=>us(b,12)?b:us(b,2)?(te(Ke(R(b.to),{force:!0}),B).then(E=>{us(E,20)&&!C.delta&&C.type===Uo.pop&&r.go(-1,!1)}).catch(Eo),Promise.reject()):(C.delta&&r.go(-C.delta,!1),Se(b,B,v))).then(b=>{b=b||Oe(B,v,!1),b&&(C.delta&&!us(b,8)?r.go(-C.delta,!1):C.type===Uo.pop&&us(b,20)&&r.go(-1,!1)),ke(B,v,b)}).catch(Eo)}))}let st=ao(),we=ao(),ce;function Se(x,I,C){dt(x);const B=we.list();return B.length?B.forEach(ye=>ye(x,I,C)):console.error(x),Promise.reject(x)}function et(){return ce&&l.value!==Vs?Promise.resolve():new Promise((x,I)=>{st.add([x,I])})}function dt(x){return ce||(ce=!x,Ze(),st.list().forEach(([I,C])=>x?C(x):I()),st.reset()),x}function ct(x,I,C,B){const{scrollBehavior:ye}=t;if(!rr||!ye)return Promise.resolve();const v=!C&&MZ(jp(x.fullPath,0))||(B||!C)&&history.state&&history.state.scroll||null;return Ml().then(()=>ye(x,I,v)).then(b=>b&&CZ(b)).catch(b=>Se(b,x,I))}const nt=x=>r.go(x);let mt;const It=new Set,Nt={currentRoute:l,listening:!0,addRoute:g,removeRoute:w,clearRoutes:e.clearRoutes,hasRoute:P,getRoutes:_,resolve:k,options:t,push:A,replace:Z,go:nt,back:()=>nt(-1),forward:()=>nt(1),beforeEach:n.add,beforeResolve:o.add,afterEach:a.add,onError:we.add,isReady:et,install(x){const I=this;x.component("RouterLink",ZZ),x.component("RouterView",iX),x.config.globalProperties.$router=I,Object.defineProperty(x.config.globalProperties,"$route",{enumerable:!0,get:()=>mr(l)}),rr&&!mt&&l.value===Vs&&(mt=!0,A(r.location).catch(ye=>{}));const C={};for(const ye in Vs)Object.defineProperty(C,ye,{get:()=>l.value[ye],enumerable:!0});x.provide(Yh,I),x.provide(tw,Ig(C)),x.provide(au,l);const B=x.unmount;It.add(x),x.unmount=function(){It.delete(x),It.size<1&&(d=Vs,Me&&Me(),Me=null,l.value=Vs,mt=!1,ce=!1),B()}}};function ut(x){return x.reduce((I,C)=>I.then(()=>ae(C)),Promise.resolve())}return Nt}function nX(t,e){const i=[],s=[],r=[],n=Math.max(e.matched.length,t.matched.length);for(let o=0;o<n;o++){const a=e.matched[o];a&&(t.matched.find(d=>Nr(d,a))?s.push(a):i.push(a));const l=t.matched[o];l&&(e.matched.find(d=>Nr(d,l))||r.push(l))}return[i,s,r]}const Gh=IT(sZ),rX=[{path:"/",component:Ly},{path:"/item-tables",component:zb}],oX=sX({history:AZ(),routes:rX}),aX=CT();Gh.use(oX);Gh.use(aX);Gh.mount("#app");Date.prototype.toJSON=function(){return z(this).format()};export{Li as d};
