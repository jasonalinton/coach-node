var qp=t=>{throw TypeError(t)};var Kp=(t,e,i)=>e.has(t)||qp("Cannot "+i);var Jp=(t,e,i)=>(Kp(t,e,"read from private field"),i?i.call(t):e.get(t)),Qp=(t,e,i)=>e.has(t)?qp("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,i),Zp=(t,e,i,s)=>(Kp(t,e,"write to private field"),s?s.call(t,i):e.set(t,i),i);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const o of n.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function i(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerPolicy&&(n.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?n.credentials="include":r.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(r){if(r.ep)return;r.ep=!0;const n=i(r);fetch(r.href,n)}})();/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Pf(t){const e=Object.create(null);for(const i of t.split(","))e[i]=1;return i=>i in e}const Mt={},jo=[],ln=()=>{},r0=()=>!1,Du=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),Af=t=>t.startsWith("onUpdate:"),$i=Object.assign,Rf=(t,e)=>{const i=t.indexOf(e);i>-1&&t.splice(i,1)},o0=Object.prototype.hasOwnProperty,It=(t,e)=>o0.call(t,e),Je=Array.isArray,Ho=t=>$l(t)==="[object Map]",pa=t=>$l(t)==="[object Set]",Xp=t=>$l(t)==="[object Date]",rt=t=>typeof t=="function",ai=t=>typeof t=="string",Bs=t=>typeof t=="symbol",Wt=t=>t!==null&&typeof t=="object",n_=t=>(Wt(t)||rt(t))&&rt(t.then)&&rt(t.catch),r_=Object.prototype.toString,$l=t=>r_.call(t),a0=t=>$l(t).slice(8,-1),o_=t=>$l(t)==="[object Object]",Mf=t=>ai(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,qa=Pf(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),ku=t=>{const e=Object.create(null);return i=>e[i]||(e[i]=t(i))},l0=/-(\w)/g,Ss=ku(t=>t.replace(l0,(e,i)=>i?i.toUpperCase():"")),d0=/\B([A-Z])/g,Ir=ku(t=>t.replace(d0,"-$1").toLowerCase()),Cu=ku(t=>t.charAt(0).toUpperCase()+t.slice(1)),Fc=ku(t=>t?`on${Cu(t)}`:""),ur=(t,e)=>!Object.is(t,e),Bd=(t,...e)=>{for(let i=0;i<t.length;i++)t[i](...e)},a_=(t,e,i,s=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:s,value:i})},eu=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let eg;const Pu=()=>eg||(eg=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function $e(t){if(Je(t)){const e={};for(let i=0;i<t.length;i++){const s=t[i],r=ai(s)?f0(s):$e(s);if(r)for(const n in r)e[n]=r[n]}return e}else if(ai(t)||Wt(t))return t}const u0=/;(?![^(]*\))/g,c0=/:([^]+)/,h0=/\/\*[^]*?\*\//g;function f0(t){const e={};return t.replace(h0,"").split(u0).forEach(i=>{if(i){const s=i.split(c0);s.length>1&&(e[s[0].trim()]=s[1].trim())}}),e}function F(t){let e="";if(ai(t))e=t;else if(Je(t))for(let i=0;i<t.length;i++){const s=F(t[i]);s&&(e+=s+" ")}else if(Wt(t))for(const i in t)t[i]&&(e+=i+" ");return e.trim()}const m0="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",p0=Pf(m0);function l_(t){return!!t||t===""}function g0(t,e){if(t.length!==e.length)return!1;let i=!0;for(let s=0;i&&s<t.length;s++)i=to(t[s],e[s]);return i}function to(t,e){if(t===e)return!0;let i=Xp(t),s=Xp(e);if(i||s)return i&&s?t.getTime()===e.getTime():!1;if(i=Bs(t),s=Bs(e),i||s)return t===e;if(i=Je(t),s=Je(e),i||s)return i&&s?g0(t,e):!1;if(i=Wt(t),s=Wt(e),i||s){if(!i||!s)return!1;const r=Object.keys(t).length,n=Object.keys(e).length;if(r!==n)return!1;for(const o in t){const a=t.hasOwnProperty(o),l=e.hasOwnProperty(o);if(a&&!l||!a&&l||!to(t[o],e[o]))return!1}}return String(t)===String(e)}function Of(t,e){return t.findIndex(i=>to(i,e))}const d_=t=>!!(t&&t.__v_isRef===!0),k=t=>ai(t)?t:t==null?"":Je(t)||Wt(t)&&(t.toString===r_||!rt(t.toString))?d_(t)?k(t.value):JSON.stringify(t,u_,2):String(t),u_=(t,e)=>d_(e)?u_(t,e.value):Ho(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((i,[s,r],n)=>(i[Bc(s,n)+" =>"]=r,i),{})}:pa(e)?{[`Set(${e.size})`]:[...e.values()].map(i=>Bc(i))}:Bs(e)?Bc(e):Wt(e)&&!Je(e)&&!o_(e)?String(e):e,Bc=(t,e="")=>{var i;return Bs(t)?`Symbol(${(i=t.description)!=null?i:e})`:t};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Bi;class c_{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Bi,!e&&Bi&&(this.index=(Bi.scopes||(Bi.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,i;if(this.scopes)for(e=0,i=this.scopes.length;e<i;e++)this.scopes[e].pause();for(e=0,i=this.effects.length;e<i;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,i;if(this.scopes)for(e=0,i=this.scopes.length;e<i;e++)this.scopes[e].resume();for(e=0,i=this.effects.length;e<i;e++)this.effects[e].resume()}}run(e){if(this._active){const i=Bi;try{return Bi=this,e()}finally{Bi=i}}}on(){Bi=this}off(){Bi=this.parent}stop(e){if(this._active){this._active=!1;let i,s;for(i=0,s=this.effects.length;i<s;i++)this.effects[i].stop();for(this.effects.length=0,i=0,s=this.cleanups.length;i<s;i++)this.cleanups[i]();if(this.cleanups.length=0,this.scopes){for(i=0,s=this.scopes.length;i<s;i++)this.scopes[i].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0}}}function h_(t){return new c_(t)}function f_(){return Bi}function v0(t,e=!1){Bi&&Bi.cleanups.push(t)}let Vt;const zc=new WeakSet;class m_{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Bi&&Bi.active&&Bi.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,zc.has(this)&&(zc.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||g_(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,tg(this),v_(this);const e=Vt,i=Fs;Vt=this,Fs=!0;try{return this.fn()}finally{y_(this),Vt=e,Fs=i,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)Lf(e);this.deps=this.depsTail=void 0,tg(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?zc.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Gh(this)&&this.run()}get dirty(){return Gh(this)}}let p_=0,Ka,Ja;function g_(t,e=!1){if(t.flags|=8,e){t.next=Ja,Ja=t;return}t.next=Ka,Ka=t}function $f(){p_++}function Nf(){if(--p_>0)return;if(Ja){let e=Ja;for(Ja=void 0;e;){const i=e.next;e.next=void 0,e.flags&=-9,e=i}}let t;for(;Ka;){let e=Ka;for(Ka=void 0;e;){const i=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(s){t||(t=s)}e=i}}if(t)throw t}function v_(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function y_(t){let e,i=t.depsTail,s=i;for(;s;){const r=s.prevDep;s.version===-1?(s===i&&(i=r),Lf(s),y0(s)):e=s,s.dep.activeLink=s.prevActiveLink,s.prevActiveLink=void 0,s=r}t.deps=e,t.depsTail=i}function Gh(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(__(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function __(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===cl))return;t.globalVersion=cl;const e=t.dep;if(t.flags|=2,e.version>0&&!t.isSSR&&t.deps&&!Gh(t)){t.flags&=-3;return}const i=Vt,s=Fs;Vt=t,Fs=!0;try{v_(t);const r=t.fn(t._value);(e.version===0||ur(r,t._value))&&(t._value=r,e.version++)}catch(r){throw e.version++,r}finally{Vt=i,Fs=s,y_(t),t.flags&=-3}}function Lf(t,e=!1){const{dep:i,prevSub:s,nextSub:r}=t;if(s&&(s.nextSub=r,t.prevSub=void 0),r&&(r.prevSub=s,t.nextSub=void 0),i.subs===t&&(i.subs=s,!s&&i.computed)){i.computed.flags&=-5;for(let n=i.computed.deps;n;n=n.nextDep)Lf(n,!0)}!e&&!--i.sc&&i.map&&i.map.delete(i.key)}function y0(t){const{prevDep:e,nextDep:i}=t;e&&(e.nextDep=i,t.prevDep=void 0),i&&(i.prevDep=e,t.nextDep=void 0)}let Fs=!0;const b_=[];function Er(){b_.push(Fs),Fs=!1}function Dr(){const t=b_.pop();Fs=t===void 0?!0:t}function tg(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const i=Vt;Vt=void 0;try{e()}finally{Vt=i}}}let cl=0;class _0{constructor(e,i){this.sub=e,this.dep=i,this.version=i.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Vf{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(e){if(!Vt||!Fs||Vt===this.computed)return;let i=this.activeLink;if(i===void 0||i.sub!==Vt)i=this.activeLink=new _0(Vt,this),Vt.deps?(i.prevDep=Vt.depsTail,Vt.depsTail.nextDep=i,Vt.depsTail=i):Vt.deps=Vt.depsTail=i,w_(i);else if(i.version===-1&&(i.version=this.version,i.nextDep)){const s=i.nextDep;s.prevDep=i.prevDep,i.prevDep&&(i.prevDep.nextDep=s),i.prevDep=Vt.depsTail,i.nextDep=void 0,Vt.depsTail.nextDep=i,Vt.depsTail=i,Vt.deps===i&&(Vt.deps=s)}return i}trigger(e){this.version++,cl++,this.notify(e)}notify(e){$f();try{for(let i=this.subs;i;i=i.prevSub)i.sub.notify()&&i.sub.dep.notify()}finally{Nf()}}}function w_(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let s=e.deps;s;s=s.nextDep)w_(s)}const i=t.dep.subs;i!==t&&(t.prevSub=i,i&&(i.nextSub=t)),t.dep.subs=t}}const tu=new WeakMap,qr=Symbol(""),Yh=Symbol(""),hl=Symbol("");function Ai(t,e,i){if(Fs&&Vt){let s=tu.get(t);s||tu.set(t,s=new Map);let r=s.get(i);r||(s.set(i,r=new Vf),r.map=s,r.key=i),r.track()}}function Cn(t,e,i,s,r,n){const o=tu.get(t);if(!o){cl++;return}const a=l=>{l&&l.trigger()};if($f(),e==="clear")o.forEach(a);else{const l=Je(t),c=l&&Mf(i);if(l&&i==="length"){const f=Number(s);o.forEach((v,S)=>{(S==="length"||S===hl||!Bs(S)&&S>=f)&&a(v)})}else switch((i!==void 0||o.has(void 0))&&a(o.get(i)),c&&a(o.get(hl)),e){case"add":l?c&&a(o.get("length")):(a(o.get(qr)),Ho(t)&&a(o.get(Yh)));break;case"delete":l||(a(o.get(qr)),Ho(t)&&a(o.get(Yh)));break;case"set":Ho(t)&&a(o.get(qr));break}}Nf()}function b0(t,e){const i=tu.get(t);return i&&i.get(e)}function Do(t){const e=vt(t);return e===t?e:(Ai(e,"iterate",hl),_s(t)?e:e.map(Ri))}function Au(t){return Ai(t=vt(t),"iterate",hl),t}const w0={__proto__:null,[Symbol.iterator](){return jc(this,Symbol.iterator,Ri)},concat(...t){return Do(this).concat(...t.map(e=>Je(e)?Do(e):e))},entries(){return jc(this,"entries",t=>(t[1]=Ri(t[1]),t))},every(t,e){return Tn(this,"every",t,e,void 0,arguments)},filter(t,e){return Tn(this,"filter",t,e,i=>i.map(Ri),arguments)},find(t,e){return Tn(this,"find",t,e,Ri,arguments)},findIndex(t,e){return Tn(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return Tn(this,"findLast",t,e,Ri,arguments)},findLastIndex(t,e){return Tn(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return Tn(this,"forEach",t,e,void 0,arguments)},includes(...t){return Hc(this,"includes",t)},indexOf(...t){return Hc(this,"indexOf",t)},join(t){return Do(this).join(t)},lastIndexOf(...t){return Hc(this,"lastIndexOf",t)},map(t,e){return Tn(this,"map",t,e,void 0,arguments)},pop(){return La(this,"pop")},push(...t){return La(this,"push",t)},reduce(t,...e){return ig(this,"reduce",t,e)},reduceRight(t,...e){return ig(this,"reduceRight",t,e)},shift(){return La(this,"shift")},some(t,e){return Tn(this,"some",t,e,void 0,arguments)},splice(...t){return La(this,"splice",t)},toReversed(){return Do(this).toReversed()},toSorted(t){return Do(this).toSorted(t)},toSpliced(...t){return Do(this).toSpliced(...t)},unshift(...t){return La(this,"unshift",t)},values(){return jc(this,"values",Ri)}};function jc(t,e,i){const s=Au(t),r=s[e]();return s!==t&&!_s(t)&&(r._next=r.next,r.next=()=>{const n=r._next();return n.value&&(n.value=i(n.value)),n}),r}const S0=Array.prototype;function Tn(t,e,i,s,r,n){const o=Au(t),a=o!==t&&!_s(t),l=o[e];if(l!==S0[e]){const v=l.apply(t,n);return a?Ri(v):v}let c=i;o!==t&&(a?c=function(v,S){return i.call(this,Ri(v),S,t)}:i.length>2&&(c=function(v,S){return i.call(this,v,S,t)}));const f=l.call(o,c,s);return a&&r?r(f):f}function ig(t,e,i,s){const r=Au(t);let n=i;return r!==t&&(_s(t)?i.length>3&&(n=function(o,a,l){return i.call(this,o,a,l,t)}):n=function(o,a,l){return i.call(this,o,Ri(a),l,t)}),r[e](n,...s)}function Hc(t,e,i){const s=vt(t);Ai(s,"iterate",hl);const r=s[e](...i);return(r===-1||r===!1)&&Bf(i[0])?(i[0]=vt(i[0]),s[e](...i)):r}function La(t,e,i=[]){Er(),$f();const s=vt(t)[e].apply(t,i);return Nf(),Dr(),s}const T0=Pf("__proto__,__v_isRef,__isVue"),S_=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Bs));function x0(t){Bs(t)||(t=String(t));const e=vt(this);return Ai(e,"has",t),e.hasOwnProperty(t)}class T_{constructor(e=!1,i=!1){this._isReadonly=e,this._isShallow=i}get(e,i,s){if(i==="__v_skip")return e.__v_skip;const r=this._isReadonly,n=this._isShallow;if(i==="__v_isReactive")return!r;if(i==="__v_isReadonly")return r;if(i==="__v_isShallow")return n;if(i==="__v_raw")return s===(r?n?O0:D_:n?E_:I_).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(s)?e:void 0;const o=Je(e);if(!r){let l;if(o&&(l=w0[i]))return l;if(i==="hasOwnProperty")return x0}const a=Reflect.get(e,i,ni(e)?e:s);return(Bs(i)?S_.has(i):T0(i))||(r||Ai(e,"get",i),n)?a:ni(a)?o&&Mf(i)?a:a.value:Wt(a)?r?C_(a):Nl(a):a}}class x_ extends T_{constructor(e=!1){super(!1,e)}set(e,i,s,r){let n=e[i];if(!this._isShallow){const l=io(n);if(!_s(s)&&!io(s)&&(n=vt(n),s=vt(s)),!Je(e)&&ni(n)&&!ni(s))return l?!1:(n.value=s,!0)}const o=Je(e)&&Mf(i)?Number(i)<e.length:It(e,i),a=Reflect.set(e,i,s,ni(e)?e:r);return e===vt(r)&&(o?ur(s,n)&&Cn(e,"set",i,s):Cn(e,"add",i,s)),a}deleteProperty(e,i){const s=It(e,i);e[i];const r=Reflect.deleteProperty(e,i);return r&&s&&Cn(e,"delete",i,void 0),r}has(e,i){const s=Reflect.has(e,i);return(!Bs(i)||!S_.has(i))&&Ai(e,"has",i),s}ownKeys(e){return Ai(e,"iterate",Je(e)?"length":qr),Reflect.ownKeys(e)}}class I0 extends T_{constructor(e=!1){super(!0,e)}set(e,i){return!0}deleteProperty(e,i){return!0}}const E0=new x_,D0=new I0,k0=new x_(!0);const qh=t=>t,pd=t=>Reflect.getPrototypeOf(t);function C0(t,e,i){return function(...s){const r=this.__v_raw,n=vt(r),o=Ho(n),a=t==="entries"||t===Symbol.iterator&&o,l=t==="keys"&&o,c=r[t](...s),f=i?qh:e?Kh:Ri;return!e&&Ai(n,"iterate",l?Yh:qr),{next(){const{value:v,done:S}=c.next();return S?{value:v,done:S}:{value:a?[f(v[0]),f(v[1])]:f(v),done:S}},[Symbol.iterator](){return this}}}}function gd(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function P0(t,e){const i={get(r){const n=this.__v_raw,o=vt(n),a=vt(r);t||(ur(r,a)&&Ai(o,"get",r),Ai(o,"get",a));const{has:l}=pd(o),c=e?qh:t?Kh:Ri;if(l.call(o,r))return c(n.get(r));if(l.call(o,a))return c(n.get(a));n!==o&&n.get(r)},get size(){const r=this.__v_raw;return!t&&Ai(vt(r),"iterate",qr),Reflect.get(r,"size",r)},has(r){const n=this.__v_raw,o=vt(n),a=vt(r);return t||(ur(r,a)&&Ai(o,"has",r),Ai(o,"has",a)),r===a?n.has(r):n.has(r)||n.has(a)},forEach(r,n){const o=this,a=o.__v_raw,l=vt(a),c=e?qh:t?Kh:Ri;return!t&&Ai(l,"iterate",qr),a.forEach((f,v)=>r.call(n,c(f),c(v),o))}};return $i(i,t?{add:gd("add"),set:gd("set"),delete:gd("delete"),clear:gd("clear")}:{add(r){!e&&!_s(r)&&!io(r)&&(r=vt(r));const n=vt(this);return pd(n).has.call(n,r)||(n.add(r),Cn(n,"add",r,r)),this},set(r,n){!e&&!_s(n)&&!io(n)&&(n=vt(n));const o=vt(this),{has:a,get:l}=pd(o);let c=a.call(o,r);c||(r=vt(r),c=a.call(o,r));const f=l.call(o,r);return o.set(r,n),c?ur(n,f)&&Cn(o,"set",r,n):Cn(o,"add",r,n),this},delete(r){const n=vt(this),{has:o,get:a}=pd(n);let l=o.call(n,r);l||(r=vt(r),l=o.call(n,r)),a&&a.call(n,r);const c=n.delete(r);return l&&Cn(n,"delete",r,void 0),c},clear(){const r=vt(this),n=r.size!==0,o=r.clear();return n&&Cn(r,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(r=>{i[r]=C0(r,t,e)}),i}function Wf(t,e){const i=P0(t,e);return(s,r,n)=>r==="__v_isReactive"?!t:r==="__v_isReadonly"?t:r==="__v_raw"?s:Reflect.get(It(i,r)&&r in s?i:s,r,n)}const A0={get:Wf(!1,!1)},R0={get:Wf(!1,!0)},M0={get:Wf(!0,!1)};const I_=new WeakMap,E_=new WeakMap,D_=new WeakMap,O0=new WeakMap;function $0(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function N0(t){return t.__v_skip||!Object.isExtensible(t)?0:$0(a0(t))}function Nl(t){return io(t)?t:Ff(t,!1,E0,A0,I_)}function k_(t){return Ff(t,!1,k0,R0,E_)}function C_(t){return Ff(t,!0,D0,M0,D_)}function Ff(t,e,i,s,r){if(!Wt(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const n=r.get(t);if(n)return n;const o=N0(t);if(o===0)return t;const a=new Proxy(t,o===2?s:i);return r.set(t,a),a}function cr(t){return io(t)?cr(t.__v_raw):!!(t&&t.__v_isReactive)}function io(t){return!!(t&&t.__v_isReadonly)}function _s(t){return!!(t&&t.__v_isShallow)}function Bf(t){return t?!!t.__v_raw:!1}function vt(t){const e=t&&t.__v_raw;return e?vt(e):t}function zf(t){return!It(t,"__v_skip")&&Object.isExtensible(t)&&a_(t,"__v_skip",!0),t}const Ri=t=>Wt(t)?Nl(t):t,Kh=t=>Wt(t)?C_(t):t;function ni(t){return t?t.__v_isRef===!0:!1}function Uo(t){return P_(t,!1)}function L0(t){return P_(t,!0)}function P_(t,e){return ni(t)?t:new V0(t,e)}class V0{constructor(e,i){this.dep=new Vf,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=i?e:vt(e),this._value=i?e:Ri(e),this.__v_isShallow=i}get value(){return this.dep.track(),this._value}set value(e){const i=this._rawValue,s=this.__v_isShallow||_s(e)||io(e);e=s?e:vt(e),ur(e,i)&&(this._rawValue=e,this._value=s?e:Ri(e),this.dep.trigger())}}function Go(t){return ni(t)?t.value:t}const W0={get:(t,e,i)=>e==="__v_raw"?t:Go(Reflect.get(t,e,i)),set:(t,e,i,s)=>{const r=t[e];return ni(r)&&!ni(i)?(r.value=i,!0):Reflect.set(t,e,i,s)}};function A_(t){return cr(t)?t:new Proxy(t,W0)}function F0(t){const e=Je(t)?new Array(t.length):{};for(const i in t)e[i]=z0(t,i);return e}class B0{constructor(e,i,s){this._object=e,this._key=i,this._defaultValue=s,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return b0(vt(this._object),this._key)}}function z0(t,e,i){const s=t[e];return ni(s)?s:new B0(t,e,i)}class j0{constructor(e,i,s){this.fn=e,this.setter=i,this._value=void 0,this.dep=new Vf(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=cl-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!i,this.isSSR=s}notify(){if(this.flags|=16,!(this.flags&8)&&Vt!==this)return g_(this,!0),!0}get value(){const e=this.dep.track();return __(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function H0(t,e,i=!1){let s,r;return rt(t)?s=t:(s=t.get,r=t.set),new j0(s,r,i)}const vd={},iu=new WeakMap;let jr;function U0(t,e=!1,i=jr){if(i){let s=iu.get(i);s||iu.set(i,s=[]),s.push(t)}}function G0(t,e,i=Mt){const{immediate:s,deep:r,once:n,scheduler:o,augmentJob:a,call:l}=i,c=ee=>r?ee:_s(ee)||r===!1||r===0?Pn(ee,1):Pn(ee);let f,v,S,I,C=!1,D=!1;if(ni(t)?(v=()=>t.value,C=_s(t)):cr(t)?(v=()=>c(t),C=!0):Je(t)?(D=!0,C=t.some(ee=>cr(ee)||_s(ee)),v=()=>t.map(ee=>{if(ni(ee))return ee.value;if(cr(ee))return c(ee);if(rt(ee))return l?l(ee,2):ee()})):rt(t)?e?v=l?()=>l(t,2):t:v=()=>{if(S){Er();try{S()}finally{Dr()}}const ee=jr;jr=f;try{return l?l(t,3,[I]):t(I)}finally{jr=ee}}:v=ln,e&&r){const ee=v,_e=r===!0?1/0:r;v=()=>Pn(ee(),_e)}const J=f_(),V=()=>{f.stop(),J&&J.active&&Rf(J.effects,f)};if(n&&e){const ee=e;e=(..._e)=>{ee(..._e),V()}}let se=D?new Array(t.length).fill(vd):vd;const oe=ee=>{if(!(!(f.flags&1)||!f.dirty&&!ee))if(e){const _e=f.run();if(r||C||(D?_e.some((_,Ee)=>ur(_,se[Ee])):ur(_e,se))){S&&S();const _=jr;jr=f;try{const Ee=[_e,se===vd?void 0:D&&se[0]===vd?[]:se,I];l?l(e,3,Ee):e(...Ee),se=_e}finally{jr=_}}}else f.run()};return a&&a(oe),f=new m_(v),f.scheduler=o?()=>o(oe,!1):oe,I=ee=>U0(ee,!1,f),S=f.onStop=()=>{const ee=iu.get(f);if(ee){if(l)l(ee,4);else for(const _e of ee)_e();iu.delete(f)}},e?s?oe(!0):se=f.run():o?o(oe.bind(null,!0),!0):f.run(),V.pause=f.pause.bind(f),V.resume=f.resume.bind(f),V.stop=V,V}function Pn(t,e=1/0,i){if(e<=0||!Wt(t)||t.__v_skip||(i=i||new Set,i.has(t)))return t;if(i.add(t),e--,ni(t))Pn(t.value,e,i);else if(Je(t))for(let s=0;s<t.length;s++)Pn(t[s],e,i);else if(pa(t)||Ho(t))t.forEach(s=>{Pn(s,e,i)});else if(o_(t)){for(const s in t)Pn(t[s],e,i);for(const s of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,s)&&Pn(t[s],e,i)}return t}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Ll(t,e,i,s){try{return s?t(...s):t()}catch(r){Vl(r,e,i)}}function hn(t,e,i,s){if(rt(t)){const r=Ll(t,e,i,s);return r&&n_(r)&&r.catch(n=>{Vl(n,e,i)}),r}if(Je(t)){const r=[];for(let n=0;n<t.length;n++)r.push(hn(t[n],e,i,s));return r}}function Vl(t,e,i,s=!0){const r=e?e.vnode:null,{errorHandler:n,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||Mt;if(e){let a=e.parent;const l=e.proxy,c=`https://vuejs.org/error-reference/#runtime-${i}`;for(;a;){const f=a.ec;if(f){for(let v=0;v<f.length;v++)if(f[v](t,l,c)===!1)return}a=a.parent}if(n){Er(),Ll(n,null,10,[t,l,c]),Dr();return}}Y0(t,i,r,s,o)}function Y0(t,e,i,s=!0,r=!1){if(r)throw t;console.error(t)}const zi=[];let sn=-1;const Yo=[];let sr=null,Mo=0;const R_=Promise.resolve();let su=null;function Ru(t){const e=su||R_;return t?e.then(this?t.bind(this):t):e}function q0(t){let e=sn+1,i=zi.length;for(;e<i;){const s=e+i>>>1,r=zi[s],n=fl(r);n<t||n===t&&r.flags&2?e=s+1:i=s}return e}function jf(t){if(!(t.flags&1)){const e=fl(t),i=zi[zi.length-1];!i||!(t.flags&2)&&e>=fl(i)?zi.push(t):zi.splice(q0(e),0,t),t.flags|=1,M_()}}function M_(){su||(su=R_.then($_))}function K0(t){Je(t)?Yo.push(...t):sr&&t.id===-1?sr.splice(Mo+1,0,t):t.flags&1||(Yo.push(t),t.flags|=1),M_()}function sg(t,e,i=sn+1){for(;i<zi.length;i++){const s=zi[i];if(s&&s.flags&2){if(t&&s.id!==t.uid)continue;zi.splice(i,1),i--,s.flags&4&&(s.flags&=-2),s(),s.flags&4||(s.flags&=-2)}}}function O_(t){if(Yo.length){const e=[...new Set(Yo)].sort((i,s)=>fl(i)-fl(s));if(Yo.length=0,sr){sr.push(...e);return}for(sr=e,Mo=0;Mo<sr.length;Mo++){const i=sr[Mo];i.flags&4&&(i.flags&=-2),i.flags&8||i(),i.flags&=-2}sr=null,Mo=0}}const fl=t=>t.id==null?t.flags&2?-1:1/0:t.id;function $_(t){try{for(sn=0;sn<zi.length;sn++){const e=zi[sn];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),Ll(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;sn<zi.length;sn++){const e=zi[sn];e&&(e.flags&=-2)}sn=-1,zi.length=0,O_(),su=null,(zi.length||Yo.length)&&$_()}}let _i=null,N_=null;function nu(t){const e=_i;return _i=t,N_=t&&t.type.__scopeId||null,e}function L_(t,e=_i,i){if(!e||t._n)return t;const s=(...r)=>{s._d&&mg(-1);const n=nu(e);let o;try{o=t(...r)}finally{nu(n),s._d&&mg(1)}return o};return s._n=!0,s._c=!0,s._d=!0,s}function X(t,e){if(_i===null)return t;const i=Nu(_i),s=t.dirs||(t.dirs=[]);for(let r=0;r<e.length;r++){let[n,o,a,l=Mt]=e[r];n&&(rt(n)&&(n={mounted:n,updated:n}),n.deep&&Pn(o),s.push({dir:n,instance:i,value:o,oldValue:void 0,arg:a,modifiers:l}))}return t}function Wr(t,e,i,s){const r=t.dirs,n=e&&e.dirs;for(let o=0;o<r.length;o++){const a=r[o];n&&(a.oldValue=n[o].value);let l=a.dir[s];l&&(Er(),hn(l,i,8,[t.el,a,t,e]),Dr())}}const J0=Symbol("_vte"),Q0=t=>t.__isTeleport;function Hf(t,e){t.shapeFlag&6&&t.component?(t.transition=e,Hf(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}/*! #__NO_SIDE_EFFECTS__ */function Uf(t,e){return rt(t)?$i({name:t.name},e,{setup:t}):t}function Gf(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function ru(t,e,i,s,r=!1){if(Je(t)){t.forEach((C,D)=>ru(C,e&&(Je(e)?e[D]:e),i,s,r));return}if(qo(s)&&!r){s.shapeFlag&512&&s.type.__asyncResolved&&s.component.subTree.component&&ru(t,e,i,s.component.subTree);return}const n=s.shapeFlag&4?Nu(s.component):s.el,o=r?null:n,{i:a,r:l}=t,c=e&&e.r,f=a.refs===Mt?a.refs={}:a.refs,v=a.setupState,S=vt(v),I=v===Mt?()=>!1:C=>It(S,C);if(c!=null&&c!==l&&(ai(c)?(f[c]=null,I(c)&&(v[c]=null)):ni(c)&&(c.value=null)),rt(l))Ll(l,a,12,[o,f]);else{const C=ai(l),D=ni(l);if(C||D){const J=()=>{if(t.f){const V=C?I(l)?v[l]:f[l]:l.value;r?Je(V)&&Rf(V,n):Je(V)?V.includes(n)||V.push(n):C?(f[l]=[n],I(l)&&(v[l]=f[l])):(l.value=[n],t.k&&(f[t.k]=l.value))}else C?(f[l]=o,I(l)&&(v[l]=o)):D&&(l.value=o,t.k&&(f[t.k]=o))};o?(J.id=-1,rs(J,i)):J()}}}const ng=t=>t.nodeType===8;Pu().requestIdleCallback;Pu().cancelIdleCallback;function Z0(t,e){if(ng(t)&&t.data==="["){let i=1,s=t.nextSibling;for(;s;){if(s.nodeType===1){if(e(s)===!1)break}else if(ng(s))if(s.data==="]"){if(--i===0)break}else s.data==="["&&i++;s=s.nextSibling}}else e(t)}const qo=t=>!!t.type.__asyncLoader;/*! #__NO_SIDE_EFFECTS__ */function X0(t){rt(t)&&(t={loader:t});const{loader:e,loadingComponent:i,errorComponent:s,delay:r=200,hydrate:n,timeout:o,suspensible:a=!0,onError:l}=t;let c=null,f,v=0;const S=()=>(v++,c=null,I()),I=()=>{let C;return c||(C=c=e().catch(D=>{if(D=D instanceof Error?D:new Error(String(D)),l)return new Promise((J,V)=>{l(D,()=>J(S()),()=>V(D),v+1)});throw D}).then(D=>C!==c&&c?c:(D&&(D.__esModule||D[Symbol.toStringTag]==="Module")&&(D=D.default),f=D,D)))};return Uf({name:"AsyncComponentWrapper",__asyncLoader:I,__asyncHydrate(C,D,J){const V=n?()=>{const se=n(J,oe=>Z0(C,oe));se&&(D.bum||(D.bum=[])).push(se)}:J;f?V():I().then(()=>!D.isUnmounted&&V())},get __asyncResolved(){return f},setup(){const C=yi;if(Gf(C),f)return()=>Uc(f,C);const D=oe=>{c=null,Vl(oe,C,13,!s)};if(a&&C.suspense||ea)return I().then(oe=>()=>Uc(oe,C)).catch(oe=>(D(oe),()=>s?H(s,{error:oe}):null));const J=Uo(!1),V=Uo(),se=Uo(!!r);return r&&setTimeout(()=>{se.value=!1},r),o!=null&&setTimeout(()=>{if(!J.value&&!V.value){const oe=new Error(`Async component timed out after ${o}ms.`);D(oe),V.value=oe}},o),I().then(()=>{J.value=!0,C.parent&&Yf(C.parent.vnode)&&C.parent.update()}).catch(oe=>{D(oe),V.value=oe}),()=>{if(J.value&&f)return Uc(f,C);if(V.value&&s)return H(s,{error:V.value});if(i&&!se.value)return H(i)}}})}function Uc(t,e){const{ref:i,props:s,children:r,ce:n}=e.vnode,o=H(t,s,r);return o.ref=i,o.ce=n,delete e.vnode.ce,o}const Yf=t=>t.type.__isKeepAlive;function ex(t,e){V_(t,"a",e)}function tx(t,e){V_(t,"da",e)}function V_(t,e,i=yi){const s=t.__wdc||(t.__wdc=()=>{let r=i;for(;r;){if(r.isDeactivated)return;r=r.parent}return t()});if(Mu(e,s,i),i){let r=i.parent;for(;r&&r.parent;)Yf(r.parent.vnode)&&ix(s,e,i,r),r=r.parent}}function ix(t,e,i,s){const r=Mu(e,t,s,!0);W_(()=>{Rf(s[e],r)},i)}function Mu(t,e,i=yi,s=!1){if(i){const r=i[t]||(i[t]=[]),n=e.__weh||(e.__weh=(...o)=>{Er();const a=Wl(i),l=hn(e,i,t,o);return a(),Dr(),l});return s?r.unshift(n):r.push(n),n}}const Un=t=>(e,i=yi)=>{(!ea||t==="sp")&&Mu(t,(...s)=>e(...s),i)},sx=Un("bm"),nx=Un("m"),rx=Un("bu"),ox=Un("u"),ax=Un("bum"),W_=Un("um"),lx=Un("sp"),dx=Un("rtg"),ux=Un("rtc");function cx(t,e=yi){Mu("ec",t,e)}const hx="components";function $(t,e){return mx(hx,t,!0,e)||t}const fx=Symbol.for("v-ndc");function mx(t,e,i=!0,s=!1){const r=_i||yi;if(r){const n=r.type;{const a=iI(n,!1);if(a&&(a===e||a===Ss(e)||a===Cu(Ss(e))))return n}const o=rg(r[t]||n[t],e)||rg(r.appContext[t],e);return!o&&s?n:o}}function rg(t,e){return t&&(t[e]||t[Ss(e)]||t[Cu(Ss(e))])}function G(t,e,i,s){let r;const n=i,o=Je(t);if(o||ai(t)){const a=o&&cr(t);let l=!1;a&&(l=!_s(t),t=Au(t)),r=new Array(t.length);for(let c=0,f=t.length;c<f;c++)r[c]=e(l?Ri(t[c]):t[c],c,void 0,n)}else if(typeof t=="number"){r=new Array(t);for(let a=0;a<t;a++)r[a]=e(a+1,a,void 0,n)}else if(Wt(t))if(t[Symbol.iterator])r=Array.from(t,(a,l)=>e(a,l,void 0,n));else{const a=Object.keys(t);r=new Array(a.length);for(let l=0,c=a.length;l<c;l++){const f=a[l];r[l]=e(t[f],f,l,n)}}else r=[];return r}function px(t,e,i={},s,r){if(_i.ce||_i.parent&&qo(_i.parent)&&_i.parent.ce)return m(),ie(L,null,[H("slot",i,s)],64);let n=t[e];n&&n._c&&(n._d=!1),m();const o=n&&F_(n(i)),a=i.key||o&&o.key,l=ie(L,{key:(a&&!Bs(a)?a:`_${e}`)+""},o||[],o&&t._===1?64:-2);return n&&n._c&&(n._d=!0),l}function F_(t){return t.some(e=>pl(e)?!(e.type===mr||e.type===L&&!F_(e.children)):!0)?t:null}const Jh=t=>t?lb(t)?Nu(t):Jh(t.parent):null,Qa=$i(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Jh(t.parent),$root:t=>Jh(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>z_(t),$forceUpdate:t=>t.f||(t.f=()=>{jf(t.update)}),$nextTick:t=>t.n||(t.n=Ru.bind(t.proxy)),$watch:t=>Lx.bind(t)}),Gc=(t,e)=>t!==Mt&&!t.__isScriptSetup&&It(t,e),gx={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:i,setupState:s,data:r,props:n,accessCache:o,type:a,appContext:l}=t;let c;if(e[0]!=="$"){const I=o[e];if(I!==void 0)switch(I){case 1:return s[e];case 2:return r[e];case 4:return i[e];case 3:return n[e]}else{if(Gc(s,e))return o[e]=1,s[e];if(r!==Mt&&It(r,e))return o[e]=2,r[e];if((c=t.propsOptions[0])&&It(c,e))return o[e]=3,n[e];if(i!==Mt&&It(i,e))return o[e]=4,i[e];Qh&&(o[e]=0)}}const f=Qa[e];let v,S;if(f)return e==="$attrs"&&Ai(t.attrs,"get",""),f(t);if((v=a.__cssModules)&&(v=v[e]))return v;if(i!==Mt&&It(i,e))return o[e]=4,i[e];if(S=l.config.globalProperties,It(S,e))return S[e]},set({_:t},e,i){const{data:s,setupState:r,ctx:n}=t;return Gc(r,e)?(r[e]=i,!0):s!==Mt&&It(s,e)?(s[e]=i,!0):It(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(n[e]=i,!0)},has({_:{data:t,setupState:e,accessCache:i,ctx:s,appContext:r,propsOptions:n}},o){let a;return!!i[o]||t!==Mt&&It(t,o)||Gc(e,o)||(a=n[0])&&It(a,o)||It(s,o)||It(Qa,o)||It(r.config.globalProperties,o)},defineProperty(t,e,i){return i.get!=null?t._.accessCache[e]=0:It(i,"value")&&this.set(t,e,i.value,null),Reflect.defineProperty(t,e,i)}};function og(t){return Je(t)?t.reduce((e,i)=>(e[i]=null,e),{}):t}let Qh=!0;function vx(t){const e=z_(t),i=t.proxy,s=t.ctx;Qh=!1,e.beforeCreate&&ag(e.beforeCreate,t,"bc");const{data:r,computed:n,methods:o,watch:a,provide:l,inject:c,created:f,beforeMount:v,mounted:S,beforeUpdate:I,updated:C,activated:D,deactivated:J,beforeDestroy:V,beforeUnmount:se,destroyed:oe,unmounted:ee,render:_e,renderTracked:_,renderTriggered:Ee,errorCaptured:Te,serverPrefetch:Pe,expose:Fe,inheritAttrs:at,components:Xe,directives:lt,filters:Dt}=e;if(c&&yx(c,s,null),o)for(const Le in o){const et=o[Le];rt(et)&&(s[Le]=et.bind(i))}if(r){const Le=r.call(i,i);Wt(Le)&&(t.data=Nl(Le))}if(Qh=!0,n)for(const Le in n){const et=n[Le],Bt=rt(et)?et.bind(i,i):rt(et.get)?et.get.bind(i,i):ln,Jt=!rt(et)&&rt(et.set)?et.set.bind(i):ln,wt=ys({get:Bt,set:Jt});Object.defineProperty(s,Le,{enumerable:!0,configurable:!0,get:()=>wt.value,set:Gt=>wt.value=Gt})}if(a)for(const Le in a)B_(a[Le],s,i,Le);if(l){const Le=rt(l)?l.call(i):l;Reflect.ownKeys(Le).forEach(et=>{zd(et,Le[et])})}f&&ag(f,t,"c");function Ze(Le,et){Je(et)?et.forEach(Bt=>Le(Bt.bind(i))):et&&Le(et.bind(i))}if(Ze(sx,v),Ze(nx,S),Ze(rx,I),Ze(ox,C),Ze(ex,D),Ze(tx,J),Ze(cx,Te),Ze(ux,_),Ze(dx,Ee),Ze(ax,se),Ze(W_,ee),Ze(lx,Pe),Je(Fe))if(Fe.length){const Le=t.exposed||(t.exposed={});Fe.forEach(et=>{Object.defineProperty(Le,et,{get:()=>i[et],set:Bt=>i[et]=Bt})})}else t.exposed||(t.exposed={});_e&&t.render===ln&&(t.render=_e),at!=null&&(t.inheritAttrs=at),Xe&&(t.components=Xe),lt&&(t.directives=lt),Pe&&Gf(t)}function yx(t,e,i=ln){Je(t)&&(t=Zh(t));for(const s in t){const r=t[s];let n;Wt(r)?"default"in r?n=dn(r.from||s,r.default,!0):n=dn(r.from||s):n=dn(r),ni(n)?Object.defineProperty(e,s,{enumerable:!0,configurable:!0,get:()=>n.value,set:o=>n.value=o}):e[s]=n}}function ag(t,e,i){hn(Je(t)?t.map(s=>s.bind(e.proxy)):t.bind(e.proxy),e,i)}function B_(t,e,i,s){let r=s.includes(".")?ib(i,s):()=>i[s];if(ai(t)){const n=e[t];rt(n)&&Za(r,n)}else if(rt(t))Za(r,t.bind(i));else if(Wt(t))if(Je(t))t.forEach(n=>B_(n,e,i,s));else{const n=rt(t.handler)?t.handler.bind(i):e[t.handler];rt(n)&&Za(r,n,t)}}function z_(t){const e=t.type,{mixins:i,extends:s}=e,{mixins:r,optionsCache:n,config:{optionMergeStrategies:o}}=t.appContext,a=n.get(e);let l;return a?l=a:!r.length&&!i&&!s?l=e:(l={},r.length&&r.forEach(c=>ou(l,c,o,!0)),ou(l,e,o)),Wt(e)&&n.set(e,l),l}function ou(t,e,i,s=!1){const{mixins:r,extends:n}=e;n&&ou(t,n,i,!0),r&&r.forEach(o=>ou(t,o,i,!0));for(const o in e)if(!(s&&o==="expose")){const a=_x[o]||i&&i[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const _x={data:lg,props:dg,emits:dg,methods:Ya,computed:Ya,beforeCreate:Fi,created:Fi,beforeMount:Fi,mounted:Fi,beforeUpdate:Fi,updated:Fi,beforeDestroy:Fi,beforeUnmount:Fi,destroyed:Fi,unmounted:Fi,activated:Fi,deactivated:Fi,errorCaptured:Fi,serverPrefetch:Fi,components:Ya,directives:Ya,watch:wx,provide:lg,inject:bx};function lg(t,e){return e?t?function(){return $i(rt(t)?t.call(this,this):t,rt(e)?e.call(this,this):e)}:e:t}function bx(t,e){return Ya(Zh(t),Zh(e))}function Zh(t){if(Je(t)){const e={};for(let i=0;i<t.length;i++)e[t[i]]=t[i];return e}return t}function Fi(t,e){return t?[...new Set([].concat(t,e))]:e}function Ya(t,e){return t?$i(Object.create(null),t,e):e}function dg(t,e){return t?Je(t)&&Je(e)?[...new Set([...t,...e])]:$i(Object.create(null),og(t),og(e??{})):e}function wx(t,e){if(!t)return e;if(!e)return t;const i=$i(Object.create(null),t);for(const s in e)i[s]=Fi(t[s],e[s]);return i}function j_(){return{app:null,config:{isNativeTag:r0,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Sx=0;function Tx(t,e){return function(s,r=null){rt(s)||(s=$i({},s)),r!=null&&!Wt(r)&&(r=null);const n=j_(),o=new WeakSet,a=[];let l=!1;const c=n.app={_uid:Sx++,_component:s,_props:r,_container:null,_context:n,_instance:null,version:nI,get config(){return n.config},set config(f){},use(f,...v){return o.has(f)||(f&&rt(f.install)?(o.add(f),f.install(c,...v)):rt(f)&&(o.add(f),f(c,...v))),c},mixin(f){return n.mixins.includes(f)||n.mixins.push(f),c},component(f,v){return v?(n.components[f]=v,c):n.components[f]},directive(f,v){return v?(n.directives[f]=v,c):n.directives[f]},mount(f,v,S){if(!l){const I=c._ceVNode||H(s,r);return I.appContext=n,S===!0?S="svg":S===!1&&(S=void 0),t(I,f,S),l=!0,c._container=f,f.__vue_app__=c,Nu(I.component)}},onUnmount(f){a.push(f)},unmount(){l&&(hn(a,c._instance,16),t(null,c._container),delete c._container.__vue_app__)},provide(f,v){return n.provides[f]=v,c},runWithContext(f){const v=Kr;Kr=c;try{return f()}finally{Kr=v}}};return c}}let Kr=null;function zd(t,e){if(yi){let i=yi.provides;const s=yi.parent&&yi.parent.provides;s===i&&(i=yi.provides=Object.create(s)),i[t]=e}}function dn(t,e,i=!1){const s=yi||_i;if(s||Kr){const r=Kr?Kr._context.provides:s?s.parent==null?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:void 0;if(r&&t in r)return r[t];if(arguments.length>1)return i&&rt(e)?e.call(s&&s.proxy):e}}function xx(){return!!(yi||_i||Kr)}const H_={},U_=()=>Object.create(H_),G_=t=>Object.getPrototypeOf(t)===H_;function Ix(t,e,i,s=!1){const r={},n=U_();t.propsDefaults=Object.create(null),Y_(t,e,r,n);for(const o in t.propsOptions[0])o in r||(r[o]=void 0);i?t.props=s?r:k_(r):t.type.props?t.props=r:t.props=n,t.attrs=n}function Ex(t,e,i,s){const{props:r,attrs:n,vnode:{patchFlag:o}}=t,a=vt(r),[l]=t.propsOptions;let c=!1;if((s||o>0)&&!(o&16)){if(o&8){const f=t.vnode.dynamicProps;for(let v=0;v<f.length;v++){let S=f[v];if(Ou(t.emitsOptions,S))continue;const I=e[S];if(l)if(It(n,S))I!==n[S]&&(n[S]=I,c=!0);else{const C=Ss(S);r[C]=Xh(l,a,C,I,t,!1)}else I!==n[S]&&(n[S]=I,c=!0)}}}else{Y_(t,e,r,n)&&(c=!0);let f;for(const v in a)(!e||!It(e,v)&&((f=Ir(v))===v||!It(e,f)))&&(l?i&&(i[v]!==void 0||i[f]!==void 0)&&(r[v]=Xh(l,a,v,void 0,t,!0)):delete r[v]);if(n!==a)for(const v in n)(!e||!It(e,v))&&(delete n[v],c=!0)}c&&Cn(t.attrs,"set","")}function Y_(t,e,i,s){const[r,n]=t.propsOptions;let o=!1,a;if(e)for(let l in e){if(qa(l))continue;const c=e[l];let f;r&&It(r,f=Ss(l))?!n||!n.includes(f)?i[f]=c:(a||(a={}))[f]=c:Ou(t.emitsOptions,l)||(!(l in s)||c!==s[l])&&(s[l]=c,o=!0)}if(n){const l=vt(i),c=a||Mt;for(let f=0;f<n.length;f++){const v=n[f];i[v]=Xh(r,l,v,c[v],t,!It(c,v))}}return o}function Xh(t,e,i,s,r,n){const o=t[i];if(o!=null){const a=It(o,"default");if(a&&s===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&rt(l)){const{propsDefaults:c}=r;if(i in c)s=c[i];else{const f=Wl(r);s=c[i]=l.call(null,e),f()}}else s=l;r.ce&&r.ce._setProp(i,s)}o[0]&&(n&&!a?s=!1:o[1]&&(s===""||s===Ir(i))&&(s=!0))}return s}const Dx=new WeakMap;function q_(t,e,i=!1){const s=i?Dx:e.propsCache,r=s.get(t);if(r)return r;const n=t.props,o={},a=[];let l=!1;if(!rt(t)){const f=v=>{l=!0;const[S,I]=q_(v,e,!0);$i(o,S),I&&a.push(...I)};!i&&e.mixins.length&&e.mixins.forEach(f),t.extends&&f(t.extends),t.mixins&&t.mixins.forEach(f)}if(!n&&!l)return Wt(t)&&s.set(t,jo),jo;if(Je(n))for(let f=0;f<n.length;f++){const v=Ss(n[f]);ug(v)&&(o[v]=Mt)}else if(n)for(const f in n){const v=Ss(f);if(ug(v)){const S=n[f],I=o[v]=Je(S)||rt(S)?{type:S}:$i({},S),C=I.type;let D=!1,J=!0;if(Je(C))for(let V=0;V<C.length;++V){const se=C[V],oe=rt(se)&&se.name;if(oe==="Boolean"){D=!0;break}else oe==="String"&&(J=!1)}else D=rt(C)&&C.name==="Boolean";I[0]=D,I[1]=J,(D||It(I,"default"))&&a.push(v)}}const c=[o,a];return Wt(t)&&s.set(t,c),c}function ug(t){return t[0]!=="$"&&!qa(t)}const K_=t=>t[0]==="_"||t==="$stable",qf=t=>Je(t)?t.map(nn):[nn(t)],kx=(t,e,i)=>{if(e._n)return e;const s=L_((...r)=>qf(e(...r)),i);return s._c=!1,s},J_=(t,e,i)=>{const s=t._ctx;for(const r in t){if(K_(r))continue;const n=t[r];if(rt(n))e[r]=kx(r,n,s);else if(n!=null){const o=qf(n);e[r]=()=>o}}},Q_=(t,e)=>{const i=qf(e);t.slots.default=()=>i},Z_=(t,e,i)=>{for(const s in e)(i||s!=="_")&&(t[s]=e[s])},Cx=(t,e,i)=>{const s=t.slots=U_();if(t.vnode.shapeFlag&32){const r=e._;r?(Z_(s,e,i),i&&a_(s,"_",r,!0)):J_(e,s)}else e&&Q_(t,e)},Px=(t,e,i)=>{const{vnode:s,slots:r}=t;let n=!0,o=Mt;if(s.shapeFlag&32){const a=e._;a?i&&a===1?n=!1:Z_(r,e,i):(n=!e.$stable,J_(e,r)),o=e}else e&&(Q_(t,e),o={default:1});if(n)for(const a in r)!K_(a)&&o[a]==null&&delete r[a]},rs=Hx;function Ax(t){return Rx(t)}function Rx(t,e){const i=Pu();i.__VUE__=!0;const{insert:s,remove:r,patchProp:n,createElement:o,createText:a,createComment:l,setText:c,setElementText:f,parentNode:v,nextSibling:S,setScopeId:I=ln,insertStaticContent:C}=t,D=(P,A,B,ae=null,Y=null,ne=null,ke=void 0,xe=null,Se=!!A.dynamicChildren)=>{if(P===A)return;P&&!Va(P,A)&&(ae=W(P),Gt(P,Y,ne,!0),P=null),A.patchFlag===-2&&(Se=!1,A.dynamicChildren=null);const{type:ge,ref:ze,shapeFlag:De}=A;switch(ge){case $u:J(P,A,B,ae);break;case mr:V(P,A,B,ae);break;case jd:P==null&&se(A,B,ae,ke);break;case L:Xe(P,A,B,ae,Y,ne,ke,xe,Se);break;default:De&1?_e(P,A,B,ae,Y,ne,ke,xe,Se):De&6?lt(P,A,B,ae,Y,ne,ke,xe,Se):(De&64||De&128)&&ge.process(P,A,B,ae,Y,ne,ke,xe,Se,he)}ze!=null&&Y&&ru(ze,P&&P.ref,ne,A||P,!A)},J=(P,A,B,ae)=>{if(P==null)s(A.el=a(A.children),B,ae);else{const Y=A.el=P.el;A.children!==P.children&&c(Y,A.children)}},V=(P,A,B,ae)=>{P==null?s(A.el=l(A.children||""),B,ae):A.el=P.el},se=(P,A,B,ae)=>{[P.el,P.anchor]=C(P.children,A,B,ae,P.el,P.anchor)},oe=({el:P,anchor:A},B,ae)=>{let Y;for(;P&&P!==A;)Y=S(P),s(P,B,ae),P=Y;s(A,B,ae)},ee=({el:P,anchor:A})=>{let B;for(;P&&P!==A;)B=S(P),r(P),P=B;r(A)},_e=(P,A,B,ae,Y,ne,ke,xe,Se)=>{A.type==="svg"?ke="svg":A.type==="math"&&(ke="mathml"),P==null?_(A,B,ae,Y,ne,ke,xe,Se):Pe(P,A,Y,ne,ke,xe,Se)},_=(P,A,B,ae,Y,ne,ke,xe)=>{let Se,ge;const{props:ze,shapeFlag:De,transition:Oe,dirs:Be}=P;if(Se=P.el=o(P.type,ne,ze&&ze.is,ze),De&8?f(Se,P.children):De&16&&Te(P.children,Se,null,ae,Y,Yc(P,ne),ke,xe),Be&&Wr(P,null,ae,"created"),Ee(Se,P,P.scopeId,ke,ae),ze){for(const St in ze)St!=="value"&&!qa(St)&&n(Se,St,null,ze[St],ne,ae);"value"in ze&&n(Se,"value",null,ze.value,ne),(ge=ze.onVnodeBeforeMount)&&Xs(ge,ae,P)}Be&&Wr(P,null,ae,"beforeMount");const st=Mx(Y,Oe);st&&Oe.beforeEnter(Se),s(Se,A,B),((ge=ze&&ze.onVnodeMounted)||st||Be)&&rs(()=>{ge&&Xs(ge,ae,P),st&&Oe.enter(Se),Be&&Wr(P,null,ae,"mounted")},Y)},Ee=(P,A,B,ae,Y)=>{if(B&&I(P,B),ae)for(let ne=0;ne<ae.length;ne++)I(P,ae[ne]);if(Y){let ne=Y.subTree;if(A===ne||nb(ne.type)&&(ne.ssContent===A||ne.ssFallback===A)){const ke=Y.vnode;Ee(P,ke,ke.scopeId,ke.slotScopeIds,Y.parent)}}},Te=(P,A,B,ae,Y,ne,ke,xe,Se=0)=>{for(let ge=Se;ge<P.length;ge++){const ze=P[ge]=xe?nr(P[ge]):nn(P[ge]);D(null,ze,A,B,ae,Y,ne,ke,xe)}},Pe=(P,A,B,ae,Y,ne,ke)=>{const xe=A.el=P.el;let{patchFlag:Se,dynamicChildren:ge,dirs:ze}=A;Se|=P.patchFlag&16;const De=P.props||Mt,Oe=A.props||Mt;let Be;if(B&&Fr(B,!1),(Be=Oe.onVnodeBeforeUpdate)&&Xs(Be,B,A,P),ze&&Wr(A,P,B,"beforeUpdate"),B&&Fr(B,!0),(De.innerHTML&&Oe.innerHTML==null||De.textContent&&Oe.textContent==null)&&f(xe,""),ge?Fe(P.dynamicChildren,ge,xe,B,ae,Yc(A,Y),ne):ke||et(P,A,xe,null,B,ae,Yc(A,Y),ne,!1),Se>0){if(Se&16)at(xe,De,Oe,B,Y);else if(Se&2&&De.class!==Oe.class&&n(xe,"class",null,Oe.class,Y),Se&4&&n(xe,"style",De.style,Oe.style,Y),Se&8){const st=A.dynamicProps;for(let St=0;St<st.length;St++){const ct=st[St],Di=De[ct],Si=Oe[ct];(Si!==Di||ct==="value")&&n(xe,ct,Di,Si,Y,B)}}Se&1&&P.children!==A.children&&f(xe,A.children)}else!ke&&ge==null&&at(xe,De,Oe,B,Y);((Be=Oe.onVnodeUpdated)||ze)&&rs(()=>{Be&&Xs(Be,B,A,P),ze&&Wr(A,P,B,"updated")},ae)},Fe=(P,A,B,ae,Y,ne,ke)=>{for(let xe=0;xe<A.length;xe++){const Se=P[xe],ge=A[xe],ze=Se.el&&(Se.type===L||!Va(Se,ge)||Se.shapeFlag&70)?v(Se.el):B;D(Se,ge,ze,null,ae,Y,ne,ke,!0)}},at=(P,A,B,ae,Y)=>{if(A!==B){if(A!==Mt)for(const ne in A)!qa(ne)&&!(ne in B)&&n(P,ne,A[ne],null,Y,ae);for(const ne in B){if(qa(ne))continue;const ke=B[ne],xe=A[ne];ke!==xe&&ne!=="value"&&n(P,ne,xe,ke,Y,ae)}"value"in B&&n(P,"value",A.value,B.value,Y)}},Xe=(P,A,B,ae,Y,ne,ke,xe,Se)=>{const ge=A.el=P?P.el:a(""),ze=A.anchor=P?P.anchor:a("");let{patchFlag:De,dynamicChildren:Oe,slotScopeIds:Be}=A;Be&&(xe=xe?xe.concat(Be):Be),P==null?(s(ge,B,ae),s(ze,B,ae),Te(A.children||[],B,ze,Y,ne,ke,xe,Se)):De>0&&De&64&&Oe&&P.dynamicChildren?(Fe(P.dynamicChildren,Oe,B,Y,ne,ke,xe),(A.key!=null||Y&&A===Y.subTree)&&X_(P,A,!0)):et(P,A,B,ze,Y,ne,ke,xe,Se)},lt=(P,A,B,ae,Y,ne,ke,xe,Se)=>{A.slotScopeIds=xe,P==null?A.shapeFlag&512?Y.ctx.activate(A,B,ae,ke,Se):Dt(A,B,ae,Y,ne,ke,Se):Ft(P,A,Se)},Dt=(P,A,B,ae,Y,ne,ke)=>{const xe=P.component=Qx(P,ae,Y);if(Yf(P)&&(xe.ctx.renderer=he),Zx(xe,!1,ke),xe.asyncDep){if(Y&&Y.registerDep(xe,Ze,ke),!P.el){const Se=xe.subTree=H(mr);V(null,Se,A,B)}}else Ze(xe,P,A,B,Y,ne,ke)},Ft=(P,A,B)=>{const ae=A.component=P.component;if(zx(P,A,B))if(ae.asyncDep&&!ae.asyncResolved){Le(ae,A,B);return}else ae.next=A,ae.update();else A.el=P.el,ae.vnode=A},Ze=(P,A,B,ae,Y,ne,ke)=>{const xe=()=>{if(P.isMounted){let{next:De,bu:Oe,u:Be,parent:st,vnode:St}=P;{const Ti=eb(P);if(Ti){De&&(De.el=St.el,Le(P,De,ke)),Ti.asyncDep.then(()=>{P.isUnmounted||xe()});return}}let ct=De,Di;Fr(P,!1),De?(De.el=St.el,Le(P,De,ke)):De=St,Oe&&Bd(Oe),(Di=De.props&&De.props.onVnodeBeforeUpdate)&&Xs(Di,st,De,St),Fr(P,!0);const Si=hg(P),fs=P.subTree;P.subTree=Si,D(fs,Si,v(fs.el),W(fs),P,Y,ne),De.el=Si.el,ct===null&&jx(P,Si.el),Be&&rs(Be,Y),(Di=De.props&&De.props.onVnodeUpdated)&&rs(()=>Xs(Di,st,De,St),Y)}else{let De;const{el:Oe,props:Be}=A,{bm:st,m:St,parent:ct,root:Di,type:Si}=P,fs=qo(A);Fr(P,!1),st&&Bd(st),!fs&&(De=Be&&Be.onVnodeBeforeMount)&&Xs(De,ct,A),Fr(P,!0);{Di.ce&&Di.ce._injectChildStyle(Si);const Ti=P.subTree=hg(P);D(null,Ti,B,ae,P,Y,ne),A.el=Ti.el}if(St&&rs(St,Y),!fs&&(De=Be&&Be.onVnodeMounted)){const Ti=A;rs(()=>Xs(De,ct,Ti),Y)}(A.shapeFlag&256||ct&&qo(ct.vnode)&&ct.vnode.shapeFlag&256)&&P.a&&rs(P.a,Y),P.isMounted=!0,A=B=ae=null}};P.scope.on();const Se=P.effect=new m_(xe);P.scope.off();const ge=P.update=Se.run.bind(Se),ze=P.job=Se.runIfDirty.bind(Se);ze.i=P,ze.id=P.uid,Se.scheduler=()=>jf(ze),Fr(P,!0),ge()},Le=(P,A,B)=>{A.component=P;const ae=P.vnode.props;P.vnode=A,P.next=null,Ex(P,A.props,ae,B),Px(P,A.children,B),Er(),sg(P),Dr()},et=(P,A,B,ae,Y,ne,ke,xe,Se=!1)=>{const ge=P&&P.children,ze=P?P.shapeFlag:0,De=A.children,{patchFlag:Oe,shapeFlag:Be}=A;if(Oe>0){if(Oe&128){Jt(ge,De,B,ae,Y,ne,ke,xe,Se);return}else if(Oe&256){Bt(ge,De,B,ae,Y,ne,ke,xe,Se);return}}Be&8?(ze&16&&Xt(ge,Y,ne),De!==ge&&f(B,De)):ze&16?Be&16?Jt(ge,De,B,ae,Y,ne,ke,xe,Se):Xt(ge,Y,ne,!0):(ze&8&&f(B,""),Be&16&&Te(De,B,ae,Y,ne,ke,xe,Se))},Bt=(P,A,B,ae,Y,ne,ke,xe,Se)=>{P=P||jo,A=A||jo;const ge=P.length,ze=A.length,De=Math.min(ge,ze);let Oe;for(Oe=0;Oe<De;Oe++){const Be=A[Oe]=Se?nr(A[Oe]):nn(A[Oe]);D(P[Oe],Be,B,null,Y,ne,ke,xe,Se)}ge>ze?Xt(P,Y,ne,!0,!1,De):Te(A,B,ae,Y,ne,ke,xe,Se,De)},Jt=(P,A,B,ae,Y,ne,ke,xe,Se)=>{let ge=0;const ze=A.length;let De=P.length-1,Oe=ze-1;for(;ge<=De&&ge<=Oe;){const Be=P[ge],st=A[ge]=Se?nr(A[ge]):nn(A[ge]);if(Va(Be,st))D(Be,st,B,null,Y,ne,ke,xe,Se);else break;ge++}for(;ge<=De&&ge<=Oe;){const Be=P[De],st=A[Oe]=Se?nr(A[Oe]):nn(A[Oe]);if(Va(Be,st))D(Be,st,B,null,Y,ne,ke,xe,Se);else break;De--,Oe--}if(ge>De){if(ge<=Oe){const Be=Oe+1,st=Be<ze?A[Be].el:ae;for(;ge<=Oe;)D(null,A[ge]=Se?nr(A[ge]):nn(A[ge]),B,st,Y,ne,ke,xe,Se),ge++}}else if(ge>Oe)for(;ge<=De;)Gt(P[ge],Y,ne,!0),ge++;else{const Be=ge,st=ge,St=new Map;for(ge=st;ge<=Oe;ge++){const ki=A[ge]=Se?nr(A[ge]):nn(A[ge]);ki.key!=null&&St.set(ki.key,ge)}let ct,Di=0;const Si=Oe-st+1;let fs=!1,Ti=0;const Ps=new Array(Si);for(ge=0;ge<Si;ge++)Ps[ge]=0;for(ge=Be;ge<=De;ge++){const ki=P[ge];if(Di>=Si){Gt(ki,Y,ne,!0);continue}let Qt;if(ki.key!=null)Qt=St.get(ki.key);else for(ct=st;ct<=Oe;ct++)if(Ps[ct-st]===0&&Va(ki,A[ct])){Qt=ct;break}Qt===void 0?Gt(ki,Y,ne,!0):(Ps[Qt-st]=ge+1,Qt>=Ti?Ti=Qt:fs=!0,D(ki,A[Qt],B,null,Y,ne,ke,xe,Se),Di++)}const ka=fs?Ox(Ps):jo;for(ct=ka.length-1,ge=Si-1;ge>=0;ge--){const ki=st+ge,Qt=A[ki],xi=ki+1<ze?A[ki+1].el:ae;Ps[ge]===0?D(null,Qt,B,xi,Y,ne,ke,xe,Se):fs&&(ct<0||ge!==ka[ct]?wt(Qt,B,xi,2):ct--)}}},wt=(P,A,B,ae,Y=null)=>{const{el:ne,type:ke,transition:xe,children:Se,shapeFlag:ge}=P;if(ge&6){wt(P.component.subTree,A,B,ae);return}if(ge&128){P.suspense.move(A,B,ae);return}if(ge&64){ke.move(P,A,B,he);return}if(ke===L){s(ne,A,B);for(let De=0;De<Se.length;De++)wt(Se[De],A,B,ae);s(P.anchor,A,B);return}if(ke===jd){oe(P,A,B);return}if(ae!==2&&ge&1&&xe)if(ae===0)xe.beforeEnter(ne),s(ne,A,B),rs(()=>xe.enter(ne),Y);else{const{leave:De,delayLeave:Oe,afterLeave:Be}=xe,st=()=>s(ne,A,B),St=()=>{De(ne,()=>{st(),Be&&Be()})};Oe?Oe(ne,st,St):St()}else s(ne,A,B)},Gt=(P,A,B,ae=!1,Y=!1)=>{const{type:ne,props:ke,ref:xe,children:Se,dynamicChildren:ge,shapeFlag:ze,patchFlag:De,dirs:Oe,cacheIndex:Be}=P;if(De===-2&&(Y=!1),xe!=null&&ru(xe,null,B,P,!0),Be!=null&&(A.renderCache[Be]=void 0),ze&256){A.ctx.deactivate(P);return}const st=ze&1&&Oe,St=!qo(P);let ct;if(St&&(ct=ke&&ke.onVnodeBeforeUnmount)&&Xs(ct,A,P),ze&6)pi(P.component,B,ae);else{if(ze&128){P.suspense.unmount(B,ae);return}st&&Wr(P,null,A,"beforeUnmount"),ze&64?P.type.remove(P,A,B,he,ae):ge&&!ge.hasOnce&&(ne!==L||De>0&&De&64)?Xt(ge,A,B,!1,!0):(ne===L&&De&384||!Y&&ze&16)&&Xt(Se,A,B),ae&&Nt(P)}(St&&(ct=ke&&ke.onVnodeUnmounted)||st)&&rs(()=>{ct&&Xs(ct,A,P),st&&Wr(P,null,A,"unmounted")},B)},Nt=P=>{const{type:A,el:B,anchor:ae,transition:Y}=P;if(A===L){ii(B,ae);return}if(A===jd){ee(P);return}const ne=()=>{r(B),Y&&!Y.persisted&&Y.afterLeave&&Y.afterLeave()};if(P.shapeFlag&1&&Y&&!Y.persisted){const{leave:ke,delayLeave:xe}=Y,Se=()=>ke(B,ne);xe?xe(P.el,ne,Se):Se()}else ne()},ii=(P,A)=>{let B;for(;P!==A;)B=S(P),r(P),P=B;r(A)},pi=(P,A,B)=>{const{bum:ae,scope:Y,job:ne,subTree:ke,um:xe,m:Se,a:ge}=P;cg(Se),cg(ge),ae&&Bd(ae),Y.stop(),ne&&(ne.flags|=8,Gt(ke,P,A,B)),xe&&rs(xe,A),rs(()=>{P.isUnmounted=!0},A),A&&A.pendingBranch&&!A.isUnmounted&&P.asyncDep&&!P.asyncResolved&&P.suspenseId===A.pendingId&&(A.deps--,A.deps===0&&A.resolve())},Xt=(P,A,B,ae=!1,Y=!1,ne=0)=>{for(let ke=ne;ke<P.length;ke++)Gt(P[ke],A,B,ae,Y)},W=P=>{if(P.shapeFlag&6)return W(P.component.subTree);if(P.shapeFlag&128)return P.suspense.next();const A=S(P.anchor||P.el),B=A&&A[J0];return B?S(B):A};let U=!1;const q=(P,A,B)=>{P==null?A._vnode&&Gt(A._vnode,null,null,!0):D(A._vnode||null,P,A,null,null,null,B),A._vnode=P,U||(U=!0,sg(),O_(),U=!1)},he={p:D,um:Gt,m:wt,r:Nt,mt:Dt,mc:Te,pc:et,pbc:Fe,n:W,o:t};return{render:q,hydrate:void 0,createApp:Tx(q)}}function Yc({type:t,props:e},i){return i==="svg"&&t==="foreignObject"||i==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:i}function Fr({effect:t,job:e},i){i?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function Mx(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function X_(t,e,i=!1){const s=t.children,r=e.children;if(Je(s)&&Je(r))for(let n=0;n<s.length;n++){const o=s[n];let a=r[n];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=r[n]=nr(r[n]),a.el=o.el),!i&&a.patchFlag!==-2&&X_(o,a)),a.type===$u&&(a.el=o.el)}}function Ox(t){const e=t.slice(),i=[0];let s,r,n,o,a;const l=t.length;for(s=0;s<l;s++){const c=t[s];if(c!==0){if(r=i[i.length-1],t[r]<c){e[s]=r,i.push(s);continue}for(n=0,o=i.length-1;n<o;)a=n+o>>1,t[i[a]]<c?n=a+1:o=a;c<t[i[n]]&&(n>0&&(e[s]=i[n-1]),i[n]=s)}}for(n=i.length,o=i[n-1];n-- >0;)i[n]=o,o=e[o];return i}function eb(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:eb(e)}function cg(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const $x=Symbol.for("v-scx"),Nx=()=>dn($x);function Za(t,e,i){return tb(t,e,i)}function tb(t,e,i=Mt){const{immediate:s,deep:r,flush:n,once:o}=i,a=$i({},i),l=e&&s||!e&&n!=="post";let c;if(ea){if(n==="sync"){const I=Nx();c=I.__watcherHandles||(I.__watcherHandles=[])}else if(!l){const I=()=>{};return I.stop=ln,I.resume=ln,I.pause=ln,I}}const f=yi;a.call=(I,C,D)=>hn(I,f,C,D);let v=!1;n==="post"?a.scheduler=I=>{rs(I,f&&f.suspense)}:n!=="sync"&&(v=!0,a.scheduler=(I,C)=>{C?I():jf(I)}),a.augmentJob=I=>{e&&(I.flags|=4),v&&(I.flags|=2,f&&(I.id=f.uid,I.i=f))};const S=G0(t,e,a);return ea&&(c?c.push(S):l&&S()),S}function Lx(t,e,i){const s=this.proxy,r=ai(t)?t.includes(".")?ib(s,t):()=>s[t]:t.bind(s,s);let n;rt(e)?n=e:(n=e.handler,i=e);const o=Wl(this),a=tb(r,n.bind(s),i);return o(),a}function ib(t,e){const i=e.split(".");return()=>{let s=t;for(let r=0;r<i.length&&s;r++)s=s[i[r]];return s}}const Vx=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${Ss(e)}Modifiers`]||t[`${Ir(e)}Modifiers`];function Wx(t,e,...i){if(t.isUnmounted)return;const s=t.vnode.props||Mt;let r=i;const n=e.startsWith("update:"),o=n&&Vx(s,e.slice(7));o&&(o.trim&&(r=i.map(f=>ai(f)?f.trim():f)),o.number&&(r=i.map(eu)));let a,l=s[a=Fc(e)]||s[a=Fc(Ss(e))];!l&&n&&(l=s[a=Fc(Ir(e))]),l&&hn(l,t,6,r);const c=s[a+"Once"];if(c){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,hn(c,t,6,r)}}function sb(t,e,i=!1){const s=e.emitsCache,r=s.get(t);if(r!==void 0)return r;const n=t.emits;let o={},a=!1;if(!rt(t)){const l=c=>{const f=sb(c,e,!0);f&&(a=!0,$i(o,f))};!i&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!n&&!a?(Wt(t)&&s.set(t,null),null):(Je(n)?n.forEach(l=>o[l]=null):$i(o,n),Wt(t)&&s.set(t,o),o)}function Ou(t,e){return!t||!Du(e)?!1:(e=e.slice(2).replace(/Once$/,""),It(t,e[0].toLowerCase()+e.slice(1))||It(t,Ir(e))||It(t,e))}function hg(t){const{type:e,vnode:i,proxy:s,withProxy:r,propsOptions:[n],slots:o,attrs:a,emit:l,render:c,renderCache:f,props:v,data:S,setupState:I,ctx:C,inheritAttrs:D}=t,J=nu(t);let V,se;try{if(i.shapeFlag&4){const ee=r||s,_e=ee;V=nn(c.call(_e,ee,f,v,I,S,C)),se=a}else{const ee=e;V=nn(ee.length>1?ee(v,{attrs:a,slots:o,emit:l}):ee(v,null)),se=e.props?a:Fx(a)}}catch(ee){Xa.length=0,Vl(ee,t,1),V=H(mr)}let oe=V;if(se&&D!==!1){const ee=Object.keys(se),{shapeFlag:_e}=oe;ee.length&&_e&7&&(n&&ee.some(Af)&&(se=Bx(se,n)),oe=Xo(oe,se,!1,!0))}return i.dirs&&(oe=Xo(oe,null,!1,!0),oe.dirs=oe.dirs?oe.dirs.concat(i.dirs):i.dirs),i.transition&&Hf(oe,i.transition),V=oe,nu(J),V}const Fx=t=>{let e;for(const i in t)(i==="class"||i==="style"||Du(i))&&((e||(e={}))[i]=t[i]);return e},Bx=(t,e)=>{const i={};for(const s in t)(!Af(s)||!(s.slice(9)in e))&&(i[s]=t[s]);return i};function zx(t,e,i){const{props:s,children:r,component:n}=t,{props:o,children:a,patchFlag:l}=e,c=n.emitsOptions;if(e.dirs||e.transition)return!0;if(i&&l>=0){if(l&1024)return!0;if(l&16)return s?fg(s,o,c):!!o;if(l&8){const f=e.dynamicProps;for(let v=0;v<f.length;v++){const S=f[v];if(o[S]!==s[S]&&!Ou(c,S))return!0}}}else return(r||a)&&(!a||!a.$stable)?!0:s===o?!1:s?o?fg(s,o,c):!0:!!o;return!1}function fg(t,e,i){const s=Object.keys(e);if(s.length!==Object.keys(t).length)return!0;for(let r=0;r<s.length;r++){const n=s[r];if(e[n]!==t[n]&&!Ou(i,n))return!0}return!1}function jx({vnode:t,parent:e},i){for(;e;){const s=e.subTree;if(s.suspense&&s.suspense.activeBranch===t&&(s.el=t.el),s===t)(t=e.vnode).el=i,e=e.parent;else break}}const nb=t=>t.__isSuspense;function Hx(t,e){e&&e.pendingBranch?Je(t)?e.effects.push(...t):e.effects.push(t):K0(t)}const L=Symbol.for("v-fgt"),$u=Symbol.for("v-txt"),mr=Symbol.for("v-cmt"),jd=Symbol.for("v-stc"),Xa=[];let as=null;function m(t=!1){Xa.push(as=t?null:[])}function Ux(){Xa.pop(),as=Xa[Xa.length-1]||null}let ml=1;function mg(t,e=!1){ml+=t,t<0&&as&&e&&(as.hasOnce=!0)}function rb(t){return t.dynamicChildren=ml>0?as||jo:null,Ux(),ml>0&&as&&as.push(t),t}function p(t,e,i,s,r,n){return rb(d(t,e,i,s,r,n,!0))}function ie(t,e,i,s,r){return rb(H(t,e,i,s,r,!0))}function pl(t){return t?t.__v_isVNode===!0:!1}function Va(t,e){return t.type===e.type&&t.key===e.key}const ob=({key:t})=>t??null,Hd=({ref:t,ref_key:e,ref_for:i})=>(typeof t=="number"&&(t=""+t),t!=null?ai(t)||ni(t)||rt(t)?{i:_i,r:t,k:e,f:!!i}:t:null);function d(t,e=null,i=null,s=0,r=null,n=t===L?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&ob(e),ref:e&&Hd(e),scopeId:N_,slotScopeIds:null,children:i,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:n,patchFlag:s,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:_i};return a?(Kf(l,i),n&128&&t.normalize(l)):i&&(l.shapeFlag|=ai(i)?8:16),ml>0&&!o&&as&&(l.patchFlag>0||n&6)&&l.patchFlag!==32&&as.push(l),l}const H=Gx;function Gx(t,e=null,i=null,s=0,r=null,n=!1){if((!t||t===fx)&&(t=mr),pl(t)){const a=Xo(t,e,!0);return i&&Kf(a,i),ml>0&&!n&&as&&(a.shapeFlag&6?as[as.indexOf(t)]=a:as.push(a)),a.patchFlag=-2,a}if(sI(t)&&(t=t.__vccOpts),e){e=Yx(e);let{class:a,style:l}=e;a&&!ai(a)&&(e.class=F(a)),Wt(l)&&(Bf(l)&&!Je(l)&&(l=$i({},l)),e.style=$e(l))}const o=ai(t)?1:nb(t)?128:Q0(t)?64:Wt(t)?4:rt(t)?2:0;return d(t,e,i,s,r,o,n,!0)}function Yx(t){return t?Bf(t)||G_(t)?$i({},t):t:null}function Xo(t,e,i=!1,s=!1){const{props:r,ref:n,patchFlag:o,children:a,transition:l}=t,c=e?qx(r||{},e):r,f={__v_isVNode:!0,__v_skip:!0,type:t.type,props:c,key:c&&ob(c),ref:e&&e.ref?i&&n?Je(n)?n.concat(Hd(e)):[n,Hd(e)]:Hd(e):n,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==L?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:l,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Xo(t.ssContent),ssFallback:t.ssFallback&&Xo(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return l&&s&&Hf(f,l.clone(f)),f}function pr(t=" ",e=0){return H($u,null,t,e)}function ab(t,e){const i=H(jd,null,t);return i.staticCount=e,i}function x(t="",e=!1){return e?(m(),ie(mr,null,t)):H(mr,null,t)}function nn(t){return t==null||typeof t=="boolean"?H(mr):Je(t)?H(L,null,t.slice()):pl(t)?nr(t):H($u,null,String(t))}function nr(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Xo(t)}function Kf(t,e){let i=0;const{shapeFlag:s}=t;if(e==null)e=null;else if(Je(e))i=16;else if(typeof e=="object")if(s&65){const r=e.default;r&&(r._c&&(r._d=!1),Kf(t,r()),r._c&&(r._d=!0));return}else{i=32;const r=e._;!r&&!G_(e)?e._ctx=_i:r===3&&_i&&(_i.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else rt(e)?(e={default:e,_ctx:_i},i=32):(e=String(e),s&64?(i=16,e=[pr(e)]):i=8);t.children=e,t.shapeFlag|=i}function qx(...t){const e={};for(let i=0;i<t.length;i++){const s=t[i];for(const r in s)if(r==="class")e.class!==s.class&&(e.class=F([e.class,s.class]));else if(r==="style")e.style=$e([e.style,s.style]);else if(Du(r)){const n=e[r],o=s[r];o&&n!==o&&!(Je(n)&&n.includes(o))&&(e[r]=n?[].concat(n,o):o)}else r!==""&&(e[r]=s[r])}return e}function Xs(t,e,i,s=null){hn(t,e,7,[i,s])}const Kx=j_();let Jx=0;function Qx(t,e,i){const s=t.type,r=(e?e.appContext:t.appContext)||Kx,n={uid:Jx++,vnode:t,type:s,parent:e,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new c_(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(r.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:q_(s,r),emitsOptions:sb(s,r),emit:null,emitted:null,propsDefaults:Mt,inheritAttrs:s.inheritAttrs,ctx:Mt,data:Mt,props:Mt,attrs:Mt,slots:Mt,refs:Mt,setupState:Mt,setupContext:null,suspense:i,suspenseId:i?i.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return n.ctx={_:n},n.root=e?e.root:n,n.emit=Wx.bind(null,n),t.ce&&t.ce(n),n}let yi=null,au,ef;{const t=Pu(),e=(i,s)=>{let r;return(r=t[i])||(r=t[i]=[]),r.push(s),n=>{r.length>1?r.forEach(o=>o(n)):r[0](n)}};au=e("__VUE_INSTANCE_SETTERS__",i=>yi=i),ef=e("__VUE_SSR_SETTERS__",i=>ea=i)}const Wl=t=>{const e=yi;return au(t),t.scope.on(),()=>{t.scope.off(),au(e)}},pg=()=>{yi&&yi.scope.off(),au(null)};function lb(t){return t.vnode.shapeFlag&4}let ea=!1;function Zx(t,e=!1,i=!1){e&&ef(e);const{props:s,children:r}=t.vnode,n=lb(t);Ix(t,s,n,e),Cx(t,r,i);const o=n?Xx(t,e):void 0;return e&&ef(!1),o}function Xx(t,e){const i=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,gx);const{setup:s}=i;if(s){Er();const r=t.setupContext=s.length>1?tI(t):null,n=Wl(t),o=Ll(s,t,0,[t.props,r]),a=n_(o);if(Dr(),n(),(a||t.sp)&&!qo(t)&&Gf(t),a){if(o.then(pg,pg),e)return o.then(l=>{gg(t,l)}).catch(l=>{Vl(l,t,0)});t.asyncDep=o}else gg(t,o)}else db(t)}function gg(t,e,i){rt(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:Wt(e)&&(t.setupState=A_(e)),db(t)}function db(t,e,i){const s=t.type;t.render||(t.render=s.render||ln);{const r=Wl(t);Er();try{vx(t)}finally{Dr(),r()}}}const eI={get(t,e){return Ai(t,"get",""),t[e]}};function tI(t){const e=i=>{t.exposed=i||{}};return{attrs:new Proxy(t.attrs,eI),slots:t.slots,emit:t.emit,expose:e}}function Nu(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(A_(zf(t.exposed)),{get(e,i){if(i in e)return e[i];if(i in Qa)return Qa[i](t)},has(e,i){return i in e||i in Qa}})):t.proxy}function iI(t,e=!0){return rt(t)?t.displayName||t.name:t.name||e&&t.__name}function sI(t){return rt(t)&&"__vccOpts"in t}const ys=(t,e)=>H0(t,e,ea);function ub(t,e,i){const s=arguments.length;return s===2?Wt(e)&&!Je(e)?pl(e)?H(t,null,[e]):H(t,e):H(t,null,e):(s>3?i=Array.prototype.slice.call(arguments,2):s===3&&pl(i)&&(i=[i]),H(t,e,i))}const nI="3.5.13";/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let tf;const vg=typeof window<"u"&&window.trustedTypes;if(vg)try{tf=vg.createPolicy("vue",{createHTML:t=>t})}catch{}const cb=tf?t=>tf.createHTML(t):t=>t,rI="http://www.w3.org/2000/svg",oI="http://www.w3.org/1998/Math/MathML",Dn=typeof document<"u"?document:null,yg=Dn&&Dn.createElement("template"),aI={insert:(t,e,i)=>{e.insertBefore(t,i||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,i,s)=>{const r=e==="svg"?Dn.createElementNS(rI,t):e==="mathml"?Dn.createElementNS(oI,t):i?Dn.createElement(t,{is:i}):Dn.createElement(t);return t==="select"&&s&&s.multiple!=null&&r.setAttribute("multiple",s.multiple),r},createText:t=>Dn.createTextNode(t),createComment:t=>Dn.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Dn.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,i,s,r,n){const o=i?i.previousSibling:e.lastChild;if(r&&(r===n||r.nextSibling))for(;e.insertBefore(r.cloneNode(!0),i),!(r===n||!(r=r.nextSibling)););else{yg.innerHTML=cb(s==="svg"?`<svg>${t}</svg>`:s==="mathml"?`<math>${t}</math>`:t);const a=yg.content;if(s==="svg"||s==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,i)}return[o?o.nextSibling:e.firstChild,i?i.previousSibling:e.lastChild]}},lI=Symbol("_vtc");function dI(t,e,i){const s=t[lI];s&&(e=(e?[e,...s]:[...s]).join(" ")),e==null?t.removeAttribute("class"):i?t.setAttribute("class",e):t.className=e}const lu=Symbol("_vod"),hb=Symbol("_vsh"),it={beforeMount(t,{value:e},{transition:i}){t[lu]=t.style.display==="none"?"":t.style.display,i&&e?i.beforeEnter(t):Wa(t,e)},mounted(t,{value:e},{transition:i}){i&&e&&i.enter(t)},updated(t,{value:e,oldValue:i},{transition:s}){!e!=!i&&(s?e?(s.beforeEnter(t),Wa(t,!0),s.enter(t)):s.leave(t,()=>{Wa(t,!1)}):Wa(t,e))},beforeUnmount(t,{value:e}){Wa(t,e)}};function Wa(t,e){t.style.display=e?t[lu]:"none",t[hb]=!e}const uI=Symbol(""),cI=/(^|;)\s*display\s*:/;function hI(t,e,i){const s=t.style,r=ai(i);let n=!1;if(i&&!r){if(e)if(ai(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();i[a]==null&&Ud(s,a,"")}else for(const o in e)i[o]==null&&Ud(s,o,"");for(const o in i)o==="display"&&(n=!0),Ud(s,o,i[o])}else if(r){if(e!==i){const o=s[uI];o&&(i+=";"+o),s.cssText=i,n=cI.test(i)}}else e&&t.removeAttribute("style");lu in t&&(t[lu]=n?s.display:"",t[hb]&&(s.display="none"))}const _g=/\s*!important$/;function Ud(t,e,i){if(Je(i))i.forEach(s=>Ud(t,e,s));else if(i==null&&(i=""),e.startsWith("--"))t.setProperty(e,i);else{const s=fI(t,e);_g.test(i)?t.setProperty(Ir(s),i.replace(_g,""),"important"):t[s]=i}}const bg=["Webkit","Moz","ms"],qc={};function fI(t,e){const i=qc[e];if(i)return i;let s=Ss(e);if(s!=="filter"&&s in t)return qc[e]=s;s=Cu(s);for(let r=0;r<bg.length;r++){const n=bg[r]+s;if(n in t)return qc[e]=n}return e}const wg="http://www.w3.org/1999/xlink";function Sg(t,e,i,s,r,n=p0(e)){s&&e.startsWith("xlink:")?i==null?t.removeAttributeNS(wg,e.slice(6,e.length)):t.setAttributeNS(wg,e,i):i==null||n&&!l_(i)?t.removeAttribute(e):t.setAttribute(e,n?"":Bs(i)?String(i):i)}function Tg(t,e,i,s,r){if(e==="innerHTML"||e==="textContent"){i!=null&&(t[e]=e==="innerHTML"?cb(i):i);return}const n=t.tagName;if(e==="value"&&n!=="PROGRESS"&&!n.includes("-")){const a=n==="OPTION"?t.getAttribute("value")||"":t.value,l=i==null?t.type==="checkbox"?"on":"":String(i);(a!==l||!("_value"in t))&&(t.value=l),i==null&&t.removeAttribute(e),t._value=i;return}let o=!1;if(i===""||i==null){const a=typeof t[e];a==="boolean"?i=l_(i):i==null&&a==="string"?(i="",o=!0):a==="number"&&(i=0,o=!0)}try{t[e]=i}catch{}o&&t.removeAttribute(r||e)}function An(t,e,i,s){t.addEventListener(e,i,s)}function mI(t,e,i,s){t.removeEventListener(e,i,s)}const xg=Symbol("_vei");function pI(t,e,i,s,r=null){const n=t[xg]||(t[xg]={}),o=n[e];if(s&&o)o.value=s;else{const[a,l]=gI(e);if(s){const c=n[e]=_I(s,r);An(t,a,c,l)}else o&&(mI(t,a,o,l),n[e]=void 0)}}const Ig=/(?:Once|Passive|Capture)$/;function gI(t){let e;if(Ig.test(t)){e={};let s;for(;s=t.match(Ig);)t=t.slice(0,t.length-s[0].length),e[s[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Ir(t.slice(2)),e]}let Kc=0;const vI=Promise.resolve(),yI=()=>Kc||(vI.then(()=>Kc=0),Kc=Date.now());function _I(t,e){const i=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=i.attached)return;hn(bI(s,i.value),e,5,[s])};return i.value=t,i.attached=yI(),i}function bI(t,e){if(Je(e)){const i=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{i.call(t),t._stopped=!0},e.map(s=>r=>!r._stopped&&s&&s(r))}else return e}const Eg=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,wI=(t,e,i,s,r,n)=>{const o=r==="svg";e==="class"?dI(t,s,o):e==="style"?hI(t,i,s):Du(e)?Af(e)||pI(t,e,i,s,n):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):SI(t,e,s,o))?(Tg(t,e,s),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&Sg(t,e,s,o,n,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!ai(s))?Tg(t,Ss(e),s,n,e):(e==="true-value"?t._trueValue=s:e==="false-value"&&(t._falseValue=s),Sg(t,e,s,o))};function SI(t,e,i,s){if(s)return!!(e==="innerHTML"||e==="textContent"||e in t&&Eg(e)&&rt(i));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const r=t.tagName;if(r==="IMG"||r==="VIDEO"||r==="CANVAS"||r==="SOURCE")return!1}return Eg(e)&&ai(i)?!1:e in t}const gr=t=>{const e=t.props["onUpdate:modelValue"]||!1;return Je(e)?i=>Bd(e,i):e};function TI(t){t.target.composing=!0}function Dg(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const bs=Symbol("_assign"),Ae={created(t,{modifiers:{lazy:e,trim:i,number:s}},r){t[bs]=gr(r);const n=s||r.props&&r.props.type==="number";An(t,e?"change":"input",o=>{if(o.target.composing)return;let a=t.value;i&&(a=a.trim()),n&&(a=eu(a)),t[bs](a)}),i&&An(t,"change",()=>{t.value=t.value.trim()}),e||(An(t,"compositionstart",TI),An(t,"compositionend",Dg),An(t,"change",Dg))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:i,modifiers:{lazy:s,trim:r,number:n}},o){if(t[bs]=gr(o),t.composing)return;const a=(n||t.type==="number")&&!/^0\d/.test(t.value)?eu(t.value):t.value,l=e??"";a!==l&&(document.activeElement===t&&t.type!=="range"&&(s&&e===i||r&&t.value.trim()===l)||(t.value=l))}},ji={deep:!0,created(t,e,i){t[bs]=gr(i),An(t,"change",()=>{const s=t._modelValue,r=ta(t),n=t.checked,o=t[bs];if(Je(s)){const a=Of(s,r),l=a!==-1;if(n&&!l)o(s.concat(r));else if(!n&&l){const c=[...s];c.splice(a,1),o(c)}}else if(pa(s)){const a=new Set(s);n?a.add(r):a.delete(r),o(a)}else o(fb(t,n))})},mounted:kg,beforeUpdate(t,e,i){t[bs]=gr(i),kg(t,e,i)}};function kg(t,{value:e,oldValue:i},s){t._modelValue=e;let r;if(Je(e))r=Of(e,s.props.value)>-1;else if(pa(e))r=e.has(s.props.value);else{if(e===i)return;r=to(e,fb(t,!0))}t.checked!==r&&(t.checked=r)}const Hr={created(t,{value:e},i){t.checked=to(e,i.props.value),t[bs]=gr(i),An(t,"change",()=>{t[bs](ta(t))})},beforeUpdate(t,{value:e,oldValue:i},s){t[bs]=gr(s),e!==i&&(t.checked=to(e,s.props.value))}},Ts={deep:!0,created(t,{value:e,modifiers:{number:i}},s){const r=pa(e);An(t,"change",()=>{const n=Array.prototype.filter.call(t.options,o=>o.selected).map(o=>i?eu(ta(o)):ta(o));t[bs](t.multiple?r?new Set(n):n:n[0]),t._assigning=!0,Ru(()=>{t._assigning=!1})}),t[bs]=gr(s)},mounted(t,{value:e}){Cg(t,e)},beforeUpdate(t,e,i){t[bs]=gr(i)},updated(t,{value:e}){t._assigning||Cg(t,e)}};function Cg(t,e){const i=t.multiple,s=Je(e);if(!(i&&!s&&!pa(e))){for(let r=0,n=t.options.length;r<n;r++){const o=t.options[r],a=ta(o);if(i)if(s){const l=typeof a;l==="string"||l==="number"?o.selected=e.some(c=>String(c)===String(a)):o.selected=Of(e,a)>-1}else o.selected=e.has(a);else if(to(ta(o),e)){t.selectedIndex!==r&&(t.selectedIndex=r);return}}!i&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function ta(t){return"_value"in t?t._value:t.value}function fb(t,e){const i=e?"_trueValue":"_falseValue";return i in t?t[i]:e}const xI=["ctrl","shift","alt","meta"],II={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>xI.some(i=>t[`${i}Key`]&&!e.includes(i))},ye=(t,e)=>{const i=t._withMods||(t._withMods={}),s=e.join(".");return i[s]||(i[s]=(r,...n)=>{for(let o=0;o<e.length;o++){const a=II[e[o]];if(a&&a(r,e))return}return t(r,...n)})},EI={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},Ot=(t,e)=>{const i=t._withKeys||(t._withKeys={}),s=e.join(".");return i[s]||(i[s]=r=>{if(!("key"in r))return;const n=Ir(r.key);if(e.some(o=>o===n||EI[o]===n))return t(r)})},DI=$i({patchProp:wI},aI);let Pg;function kI(){return Pg||(Pg=Ax(DI))}const CI=(...t)=>{const e=kI().createApp(...t),{mount:i}=e;return e.mount=s=>{const r=AI(s);if(!r)return;const n=e._component;!rt(n)&&!n.render&&!n.template&&(n.template=r.innerHTML),r.nodeType===1&&(r.textContent="");const o=i(r,!1,PI(r));return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),o},e};function PI(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function AI(t){return ai(t)?document.querySelector(t):t}/*!
 * pinia v2.3.1
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let mb;const Lu=t=>mb=t,pb=Symbol();function sf(t){return t&&typeof t=="object"&&Object.prototype.toString.call(t)==="[object Object]"&&typeof t.toJSON!="function"}var el;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(el||(el={}));function RI(){const t=h_(!0),e=t.run(()=>Uo({}));let i=[],s=[];const r=zf({install(n){Lu(r),r._a=n,n.provide(pb,r),n.config.globalProperties.$pinia=r,s.forEach(o=>i.push(o)),s=[]},use(n){return this._a?i.push(n):s.push(n),this},_p:i,_a:null,_e:t,_s:new Map,state:e});return r}const gb=()=>{};function Ag(t,e,i,s=gb){t.push(e);const r=()=>{const n=t.indexOf(e);n>-1&&(t.splice(n,1),s())};return!i&&f_()&&v0(r),r}function ko(t,...e){t.slice().forEach(i=>{i(...e)})}const MI=t=>t(),Rg=Symbol(),Jc=Symbol();function nf(t,e){t instanceof Map&&e instanceof Map?e.forEach((i,s)=>t.set(s,i)):t instanceof Set&&e instanceof Set&&e.forEach(t.add,t);for(const i in e){if(!e.hasOwnProperty(i))continue;const s=e[i],r=t[i];sf(r)&&sf(s)&&t.hasOwnProperty(i)&&!ni(s)&&!cr(s)?t[i]=nf(r,s):t[i]=s}return t}const OI=Symbol();function $I(t){return!sf(t)||!t.hasOwnProperty(OI)}const{assign:ir}=Object;function NI(t){return!!(ni(t)&&t.effect)}function LI(t,e,i,s){const{state:r,actions:n,getters:o}=e,a=i.state.value[t];let l;function c(){a||(i.state.value[t]=r?r():{});const f=F0(i.state.value[t]);return ir(f,n,Object.keys(o||{}).reduce((v,S)=>(v[S]=zf(ys(()=>{Lu(i);const I=i._s.get(t);return o[S].call(I,I)})),v),{}))}return l=vb(t,c,e,i,s,!0),l}function vb(t,e,i={},s,r,n){let o;const a=ir({actions:{}},i),l={deep:!0};let c,f,v=[],S=[],I;const C=s.state.value[t];!n&&!C&&(s.state.value[t]={}),Uo({});let D;function J(Te){let Pe;c=f=!1,typeof Te=="function"?(Te(s.state.value[t]),Pe={type:el.patchFunction,storeId:t,events:I}):(nf(s.state.value[t],Te),Pe={type:el.patchObject,payload:Te,storeId:t,events:I});const Fe=D=Symbol();Ru().then(()=>{D===Fe&&(c=!0)}),f=!0,ko(v,Pe,s.state.value[t])}const V=n?function(){const{state:Pe}=i,Fe=Pe?Pe():{};this.$patch(at=>{ir(at,Fe)})}:gb;function se(){o.stop(),v=[],S=[],s._s.delete(t)}const oe=(Te,Pe="")=>{if(Rg in Te)return Te[Jc]=Pe,Te;const Fe=function(){Lu(s);const at=Array.from(arguments),Xe=[],lt=[];function Dt(Le){Xe.push(Le)}function Ft(Le){lt.push(Le)}ko(S,{args:at,name:Fe[Jc],store:_e,after:Dt,onError:Ft});let Ze;try{Ze=Te.apply(this&&this.$id===t?this:_e,at)}catch(Le){throw ko(lt,Le),Le}return Ze instanceof Promise?Ze.then(Le=>(ko(Xe,Le),Le)).catch(Le=>(ko(lt,Le),Promise.reject(Le))):(ko(Xe,Ze),Ze)};return Fe[Rg]=!0,Fe[Jc]=Pe,Fe},ee={_p:s,$id:t,$onAction:Ag.bind(null,S),$patch:J,$reset:V,$subscribe(Te,Pe={}){const Fe=Ag(v,Te,Pe.detached,()=>at()),at=o.run(()=>Za(()=>s.state.value[t],Xe=>{(Pe.flush==="sync"?f:c)&&Te({storeId:t,type:el.direct,events:I},Xe)},ir({},l,Pe)));return Fe},$dispose:se},_e=Nl(ee);s._s.set(t,_e);const Ee=(s._a&&s._a.runWithContext||MI)(()=>s._e.run(()=>(o=h_()).run(()=>e({action:oe}))));for(const Te in Ee){const Pe=Ee[Te];if(ni(Pe)&&!NI(Pe)||cr(Pe))n||(C&&$I(Pe)&&(ni(Pe)?Pe.value=C[Te]:nf(Pe,C[Te])),s.state.value[t][Te]=Pe);else if(typeof Pe=="function"){const Fe=oe(Pe,Te);Ee[Te]=Fe,a.actions[Te]=Pe}}return ir(_e,Ee),ir(vt(_e),Ee),Object.defineProperty(_e,"$state",{get:()=>s.state.value[t],set:Te=>{J(Pe=>{ir(Pe,Te)})}}),s._p.forEach(Te=>{ir(_e,o.run(()=>Te({store:_e,app:s._a,pinia:s,options:a})))}),C&&n&&i.hydrate&&i.hydrate(_e.$state,C),c=!0,f=!0,_e}/*! #__NO_SIDE_EFFECTS__ */function qs(t,e,i){let s,r;const n=typeof e=="function";typeof t=="string"?(s=t,r=n?i:e):(r=t,s=t.id);function o(a,l){const c=xx();return a=a||(c?dn(pb,null):null),a&&Lu(a),a=mb,a._s.has(s)||(n?vb(s,e,r,a):LI(s,r,a)),a._s.get(s)}return o.$id=s,o}let rr={PHYSICAL:1,SOCIAL:2,MENTAL:3,EMOTIONAL:4,FINANCIAL:5},VI={MEMORIZATION:190},Hi={MILLISECOND:39,SECOND:40,MINUTE:41,HOUR:42,DAY:43,WORKDAY:44,WEEKDAY:45,WEEKENDDAY:46,WEEKEND:47,WEEK:48,MONTH:49,SEASON:50,QUARTER:51,TRIMESTER:52,BIMESTER:53,SEMESTER:54,YEAR:55,MILESTONE:56,LIFE:57},Qc={DAILY:63,WEEKLY:68,MONTHLY:69},yb={SCHEDULED:80,RECOMMENDED:81,DUE:82},Jf={DATE:87,TIME:88,DATETIME:89},_b={SELF:140},bb={CONTROL:105,SLIDER:106,NUMBERPAD:107,COUNTER:108,TEXTBOX:109,TEXTAREA:110,TEXTBLOCK:111,DROPDOWN:112},Rn={EVENTTYPE:122,EVENT:123,ALLDAY:124,TODO:125,TASK:126,ROUTINE:127,ROUTINE2:128,TASKROUTINE:129,SUBTYPE:130,SLEEP:131,BRIEFING:132,MEAL:133,WORKOUT:134,LOG:135,INVENTORY:136,TIME:137,REPETITIVE:138},ar={ADVICE:162,REASON:163,MEASUREOFSUCCESS:164,NOTE:165,BLURB:166,QUESTION:167,ANSWER:168,INSECURITY:169,REMINDER:170,BRIEFING:172,DEBRIEFING:173,ISSUE:184},tn={WEEK:"week",MONTH:"month"},WI={FITNESS:183},du={EMOTIONAL_MOOD:1,MENTAL_ENERGY:6,MENTAL_CLARITY:7,PHYSICAL_ENERGY:11};class ia extends Error{constructor(e,i){const s=new.target.prototype;super(`${e}: Status code '${i}'`),this.statusCode=i,this.__proto__=s}}class Qf extends Error{constructor(e="A timeout occurred."){const i=new.target.prototype;super(e),this.__proto__=i}}class Vs extends Error{constructor(e="An abort occurred."){const i=new.target.prototype;super(e),this.__proto__=i}}class FI extends Error{constructor(e,i){const s=new.target.prototype;super(e),this.transport=i,this.errorType="UnsupportedTransportError",this.__proto__=s}}class BI extends Error{constructor(e,i){const s=new.target.prototype;super(e),this.transport=i,this.errorType="DisabledTransportError",this.__proto__=s}}class zI extends Error{constructor(e,i){const s=new.target.prototype;super(e),this.transport=i,this.errorType="FailedToStartTransportError",this.__proto__=s}}class jI extends Error{constructor(e){const i=new.target.prototype;super(e),this.errorType="FailedToNegotiateWithServerError",this.__proto__=i}}class HI extends Error{constructor(e,i){const s=new.target.prototype;super(e),this.innerErrors=i,this.__proto__=s}}class wb{constructor(e,i,s){this.statusCode=e,this.statusText=i,this.content=s}}class Vu{get(e,i){return this.send({...i,method:"GET",url:e})}post(e,i){return this.send({...i,method:"POST",url:e})}delete(e,i){return this.send({...i,method:"DELETE",url:e})}getCookieString(e){return""}}var ce;(function(t){t[t.Trace=0]="Trace",t[t.Debug=1]="Debug",t[t.Information=2]="Information",t[t.Warning=3]="Warning",t[t.Error=4]="Error",t[t.Critical=5]="Critical",t[t.None=6]="None"})(ce||(ce={}));class gl{constructor(){}log(e,i){}}gl.instance=new gl;const UI="7.0.0";class bi{static isRequired(e,i){if(e==null)throw new Error(`The '${i}' argument is required.`)}static isNotEmpty(e,i){if(!e||e.match(/^\s*$/))throw new Error(`The '${i}' argument should not be empty.`)}static isIn(e,i,s){if(!(e in i))throw new Error(`Unknown ${s} value: ${e}.`)}}class vi{static get isBrowser(){return typeof window=="object"&&typeof window.document=="object"}static get isWebWorker(){return typeof self=="object"&&"importScripts"in self}static get isReactNative(){return typeof window=="object"&&typeof window.document>"u"}static get isNode(){return!this.isBrowser&&!this.isWebWorker&&!this.isReactNative}}function vl(t,e){let i="";return Fl(t)?(i=`Binary data of length ${t.byteLength}`,e&&(i+=`. Content: '${GI(t)}'`)):typeof t=="string"&&(i=`String data of length ${t.length}`,e&&(i+=`. Content: '${t}'`)),i}function GI(t){const e=new Uint8Array(t);let i="";return e.forEach(s=>{const r=s<16?"0":"";i+=`0x${r}${s.toString(16)} `}),i.substr(0,i.length-1)}function Fl(t){return t&&typeof ArrayBuffer<"u"&&(t instanceof ArrayBuffer||t.constructor&&t.constructor.name==="ArrayBuffer")}async function Sb(t,e,i,s,r,n){const o={},[a,l]=sa();o[a]=l,t.log(ce.Trace,`(${e} transport) sending data. ${vl(r,n.logMessageContent)}.`);const c=Fl(r)?"arraybuffer":"text",f=await i.post(s,{content:r,headers:{...o,...n.headers},responseType:c,timeout:n.timeout,withCredentials:n.withCredentials});t.log(ce.Trace,`(${e} transport) request complete. Response status: ${f.statusCode}.`)}function YI(t){return t===void 0?new uu(ce.Information):t===null?gl.instance:t.log!==void 0?t:new uu(t)}class qI{constructor(e,i){this._subject=e,this._observer=i}dispose(){const e=this._subject.observers.indexOf(this._observer);e>-1&&this._subject.observers.splice(e,1),this._subject.observers.length===0&&this._subject.cancelCallback&&this._subject.cancelCallback().catch(i=>{})}}class uu{constructor(e){this._minLevel=e,this.out=console}log(e,i){if(e>=this._minLevel){const s=`[${new Date().toISOString()}] ${ce[e]}: ${i}`;switch(e){case ce.Critical:case ce.Error:this.out.error(s);break;case ce.Warning:this.out.warn(s);break;case ce.Information:this.out.info(s);break;default:this.out.log(s);break}}}}function sa(){let t="X-SignalR-User-Agent";return vi.isNode&&(t="User-Agent"),[t,KI(UI,JI(),ZI(),QI())]}function KI(t,e,i,s){let r="Microsoft SignalR/";const n=t.split(".");return r+=`${n[0]}.${n[1]}`,r+=` (${t}; `,e&&e!==""?r+=`${e}; `:r+="Unknown OS; ",r+=`${i}`,s?r+=`; ${s}`:r+="; Unknown Runtime Version",r+=")",r}function JI(){if(vi.isNode)switch(process.platform){case"win32":return"Windows NT";case"darwin":return"macOS";case"linux":return"Linux";default:return process.platform}else return""}function QI(){if(vi.isNode)return process.versions.node}function ZI(){return vi.isNode?"NodeJS":"Browser"}function Mg(t){return t.stack?t.stack:t.message?t.message:`${t}`}function XI(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("could not find global")}class eE extends Vu{constructor(e){if(super(),this._logger=e,typeof fetch>"u"){const i=typeof __webpack_require__=="function"?__non_webpack_require__:require;this._jar=new(i("tough-cookie")).CookieJar,this._fetchType=i("node-fetch"),this._fetchType=i("fetch-cookie")(this._fetchType,this._jar)}else this._fetchType=fetch.bind(XI());if(typeof AbortController>"u"){const i=typeof __webpack_require__=="function"?__non_webpack_require__:require;this._abortControllerType=i("abort-controller")}else this._abortControllerType=AbortController}async send(e){if(e.abortSignal&&e.abortSignal.aborted)throw new Vs;if(!e.method)throw new Error("No method defined.");if(!e.url)throw new Error("No url defined.");const i=new this._abortControllerType;let s;e.abortSignal&&(e.abortSignal.onabort=()=>{i.abort(),s=new Vs});let r=null;if(e.timeout){const l=e.timeout;r=setTimeout(()=>{i.abort(),this._logger.log(ce.Warning,"Timeout from HTTP request."),s=new Qf},l)}e.content===""&&(e.content=void 0),e.content&&(e.headers=e.headers||{},Fl(e.content)?e.headers["Content-Type"]="application/octet-stream":e.headers["Content-Type"]="text/plain;charset=UTF-8");let n;try{n=await this._fetchType(e.url,{body:e.content,cache:"no-cache",credentials:e.withCredentials===!0?"include":"same-origin",headers:{"X-Requested-With":"XMLHttpRequest",...e.headers},method:e.method,mode:"cors",redirect:"follow",signal:i.signal})}catch(l){throw s||(this._logger.log(ce.Warning,`Error from HTTP request. ${l}.`),l)}finally{r&&clearTimeout(r),e.abortSignal&&(e.abortSignal.onabort=null)}if(!n.ok){const l=await Og(n,"text");throw new ia(l||n.statusText,n.status)}const a=await Og(n,e.responseType);return new wb(n.status,n.statusText,a)}getCookieString(e){let i="";return vi.isNode&&this._jar&&this._jar.getCookies(e,(s,r)=>i=r.join("; ")),i}}function Og(t,e){let i;switch(e){case"arraybuffer":i=t.arrayBuffer();break;case"text":i=t.text();break;case"blob":case"document":case"json":throw new Error(`${e} is not supported.`);default:i=t.text();break}return i}class tE extends Vu{constructor(e){super(),this._logger=e}send(e){return e.abortSignal&&e.abortSignal.aborted?Promise.reject(new Vs):e.method?e.url?new Promise((i,s)=>{const r=new XMLHttpRequest;r.open(e.method,e.url,!0),r.withCredentials=e.withCredentials===void 0?!0:e.withCredentials,r.setRequestHeader("X-Requested-With","XMLHttpRequest"),e.content===""&&(e.content=void 0),e.content&&(Fl(e.content)?r.setRequestHeader("Content-Type","application/octet-stream"):r.setRequestHeader("Content-Type","text/plain;charset=UTF-8"));const n=e.headers;n&&Object.keys(n).forEach(o=>{r.setRequestHeader(o,n[o])}),e.responseType&&(r.responseType=e.responseType),e.abortSignal&&(e.abortSignal.onabort=()=>{r.abort(),s(new Vs)}),e.timeout&&(r.timeout=e.timeout),r.onload=()=>{e.abortSignal&&(e.abortSignal.onabort=null),r.status>=200&&r.status<300?i(new wb(r.status,r.statusText,r.response||r.responseText)):s(new ia(r.response||r.responseText||r.statusText,r.status))},r.onerror=()=>{this._logger.log(ce.Warning,`Error from HTTP request. ${r.status}: ${r.statusText}.`),s(new ia(r.statusText,r.status))},r.ontimeout=()=>{this._logger.log(ce.Warning,"Timeout from HTTP request."),s(new Qf)},r.send(e.content)}):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))}}class iE extends Vu{constructor(e){if(super(),typeof fetch<"u"||vi.isNode)this._httpClient=new eE(e);else if(typeof XMLHttpRequest<"u")this._httpClient=new tE(e);else throw new Error("No usable HttpClient found.")}send(e){return e.abortSignal&&e.abortSignal.aborted?Promise.reject(new Vs):e.method?e.url?this._httpClient.send(e):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))}getCookieString(e){return this._httpClient.getCookieString(e)}}class ls{static write(e){return`${e}${ls.RecordSeparator}`}static parse(e){if(e[e.length-1]!==ls.RecordSeparator)throw new Error("Message is incomplete.");const i=e.split(ls.RecordSeparator);return i.pop(),i}}ls.RecordSeparatorCode=30;ls.RecordSeparator=String.fromCharCode(ls.RecordSeparatorCode);class sE{writeHandshakeRequest(e){return ls.write(JSON.stringify(e))}parseHandshakeResponse(e){let i,s;if(Fl(e)){const a=new Uint8Array(e),l=a.indexOf(ls.RecordSeparatorCode);if(l===-1)throw new Error("Message is incomplete.");const c=l+1;i=String.fromCharCode.apply(null,Array.prototype.slice.call(a.slice(0,c))),s=a.byteLength>c?a.slice(c).buffer:null}else{const a=e,l=a.indexOf(ls.RecordSeparator);if(l===-1)throw new Error("Message is incomplete.");const c=l+1;i=a.substring(0,c),s=a.length>c?a.substring(c):null}const r=ls.parse(i),n=JSON.parse(r[0]);if(n.type)throw new Error("Expected a handshake response from the server.");return[s,n]}}var Lt;(function(t){t[t.Invocation=1]="Invocation",t[t.StreamItem=2]="StreamItem",t[t.Completion=3]="Completion",t[t.StreamInvocation=4]="StreamInvocation",t[t.CancelInvocation=5]="CancelInvocation",t[t.Ping=6]="Ping",t[t.Close=7]="Close"})(Lt||(Lt={}));class nE{constructor(){this.observers=[]}next(e){for(const i of this.observers)i.next(e)}error(e){for(const i of this.observers)i.error&&i.error(e)}complete(){for(const e of this.observers)e.complete&&e.complete()}subscribe(e){return this.observers.push(e),new qI(this,e)}}const rE=30*1e3,oE=15*1e3;var qt;(function(t){t.Disconnected="Disconnected",t.Connecting="Connecting",t.Connected="Connected",t.Disconnecting="Disconnecting",t.Reconnecting="Reconnecting"})(qt||(qt={}));class Zf{constructor(e,i,s,r){this._nextKeepAlive=0,this._freezeEventListener=()=>{this._logger.log(ce.Warning,"The page is being frozen, this will likely lead to the connection being closed and messages being lost. For more information see the docs at https://docs.microsoft.com/aspnet/core/signalr/javascript-client#bsleep")},bi.isRequired(e,"connection"),bi.isRequired(i,"logger"),bi.isRequired(s,"protocol"),this.serverTimeoutInMilliseconds=rE,this.keepAliveIntervalInMilliseconds=oE,this._logger=i,this._protocol=s,this.connection=e,this._reconnectPolicy=r,this._handshakeProtocol=new sE,this.connection.onreceive=n=>this._processIncomingData(n),this.connection.onclose=n=>this._connectionClosed(n),this._callbacks={},this._methods={},this._closedCallbacks=[],this._reconnectingCallbacks=[],this._reconnectedCallbacks=[],this._invocationId=0,this._receivedHandshakeResponse=!1,this._connectionState=qt.Disconnected,this._connectionStarted=!1,this._cachedPingMessage=this._protocol.writeMessage({type:Lt.Ping})}static create(e,i,s,r){return new Zf(e,i,s,r)}get state(){return this._connectionState}get connectionId(){return this.connection&&this.connection.connectionId||null}get baseUrl(){return this.connection.baseUrl||""}set baseUrl(e){if(this._connectionState!==qt.Disconnected&&this._connectionState!==qt.Reconnecting)throw new Error("The HubConnection must be in the Disconnected or Reconnecting state to change the url.");if(!e)throw new Error("The HubConnection url must be a valid url.");this.connection.baseUrl=e}start(){return this._startPromise=this._startWithStateTransitions(),this._startPromise}async _startWithStateTransitions(){if(this._connectionState!==qt.Disconnected)return Promise.reject(new Error("Cannot start a HubConnection that is not in the 'Disconnected' state."));this._connectionState=qt.Connecting,this._logger.log(ce.Debug,"Starting HubConnection.");try{await this._startInternal(),vi.isBrowser&&window.document.addEventListener("freeze",this._freezeEventListener),this._connectionState=qt.Connected,this._connectionStarted=!0,this._logger.log(ce.Debug,"HubConnection connected successfully.")}catch(e){return this._connectionState=qt.Disconnected,this._logger.log(ce.Debug,`HubConnection failed to start successfully because of error '${e}'.`),Promise.reject(e)}}async _startInternal(){this._stopDuringStartError=void 0,this._receivedHandshakeResponse=!1;const e=new Promise((i,s)=>{this._handshakeResolver=i,this._handshakeRejecter=s});await this.connection.start(this._protocol.transferFormat);try{const i={protocol:this._protocol.name,version:this._protocol.version};if(this._logger.log(ce.Debug,"Sending handshake request."),await this._sendMessage(this._handshakeProtocol.writeHandshakeRequest(i)),this._logger.log(ce.Information,`Using HubProtocol '${this._protocol.name}'.`),this._cleanupTimeout(),this._resetTimeoutPeriod(),this._resetKeepAliveInterval(),await e,this._stopDuringStartError)throw this._stopDuringStartError;this.connection.features.inherentKeepAlive||await this._sendMessage(this._cachedPingMessage)}catch(i){throw this._logger.log(ce.Debug,`Hub handshake failed with error '${i}' during start(). Stopping HubConnection.`),this._cleanupTimeout(),this._cleanupPingTimer(),await this.connection.stop(i),i}}async stop(){const e=this._startPromise;this._stopPromise=this._stopInternal(),await this._stopPromise;try{await e}catch{}}_stopInternal(e){return this._connectionState===qt.Disconnected?(this._logger.log(ce.Debug,`Call to HubConnection.stop(${e}) ignored because it is already in the disconnected state.`),Promise.resolve()):this._connectionState===qt.Disconnecting?(this._logger.log(ce.Debug,`Call to HttpConnection.stop(${e}) ignored because the connection is already in the disconnecting state.`),this._stopPromise):(this._connectionState=qt.Disconnecting,this._logger.log(ce.Debug,"Stopping HubConnection."),this._reconnectDelayHandle?(this._logger.log(ce.Debug,"Connection stopped during reconnect delay. Done reconnecting."),clearTimeout(this._reconnectDelayHandle),this._reconnectDelayHandle=void 0,this._completeClose(),Promise.resolve()):(this._cleanupTimeout(),this._cleanupPingTimer(),this._stopDuringStartError=e||new Vs("The connection was stopped before the hub handshake could complete."),this.connection.stop(e)))}stream(e,...i){const[s,r]=this._replaceStreamingParams(i),n=this._createStreamInvocation(e,i,r);let o;const a=new nE;return a.cancelCallback=()=>{const l=this._createCancelInvocation(n.invocationId);return delete this._callbacks[n.invocationId],o.then(()=>this._sendWithProtocol(l))},this._callbacks[n.invocationId]=(l,c)=>{if(c){a.error(c);return}else l&&(l.type===Lt.Completion?l.error?a.error(new Error(l.error)):a.complete():a.next(l.item))},o=this._sendWithProtocol(n).catch(l=>{a.error(l),delete this._callbacks[n.invocationId]}),this._launchStreams(s,o),a}_sendMessage(e){return this._resetKeepAliveInterval(),this.connection.send(e)}_sendWithProtocol(e){return this._sendMessage(this._protocol.writeMessage(e))}send(e,...i){const[s,r]=this._replaceStreamingParams(i),n=this._sendWithProtocol(this._createInvocation(e,i,!0,r));return this._launchStreams(s,n),n}invoke(e,...i){const[s,r]=this._replaceStreamingParams(i),n=this._createInvocation(e,i,!1,r);return new Promise((a,l)=>{this._callbacks[n.invocationId]=(f,v)=>{if(v){l(v);return}else f&&(f.type===Lt.Completion?f.error?l(new Error(f.error)):a(f.result):l(new Error(`Unexpected message type: ${f.type}`)))};const c=this._sendWithProtocol(n).catch(f=>{l(f),delete this._callbacks[n.invocationId]});this._launchStreams(s,c)})}on(e,i){!e||!i||(e=e.toLowerCase(),this._methods[e]||(this._methods[e]=[]),this._methods[e].indexOf(i)===-1&&this._methods[e].push(i))}off(e,i){if(!e)return;e=e.toLowerCase();const s=this._methods[e];if(s)if(i){const r=s.indexOf(i);r!==-1&&(s.splice(r,1),s.length===0&&delete this._methods[e])}else delete this._methods[e]}onclose(e){e&&this._closedCallbacks.push(e)}onreconnecting(e){e&&this._reconnectingCallbacks.push(e)}onreconnected(e){e&&this._reconnectedCallbacks.push(e)}_processIncomingData(e){if(this._cleanupTimeout(),this._receivedHandshakeResponse||(e=this._processHandshakeResponse(e),this._receivedHandshakeResponse=!0),e){const i=this._protocol.parseMessages(e,this._logger);for(const s of i)switch(s.type){case Lt.Invocation:this._invokeClientMethod(s);break;case Lt.StreamItem:case Lt.Completion:{const r=this._callbacks[s.invocationId];if(r){s.type===Lt.Completion&&delete this._callbacks[s.invocationId];try{r(s)}catch(n){this._logger.log(ce.Error,`Stream callback threw error: ${Mg(n)}`)}}break}case Lt.Ping:break;case Lt.Close:{this._logger.log(ce.Information,"Close message received from server.");const r=s.error?new Error("Server returned an error on close: "+s.error):void 0;s.allowReconnect===!0?this.connection.stop(r):this._stopPromise=this._stopInternal(r);break}default:this._logger.log(ce.Warning,`Invalid message type: ${s.type}.`);break}}this._resetTimeoutPeriod()}_processHandshakeResponse(e){let i,s;try{[s,i]=this._handshakeProtocol.parseHandshakeResponse(e)}catch(r){const n="Error parsing handshake response: "+r;this._logger.log(ce.Error,n);const o=new Error(n);throw this._handshakeRejecter(o),o}if(i.error){const r="Server returned handshake error: "+i.error;this._logger.log(ce.Error,r);const n=new Error(r);throw this._handshakeRejecter(n),n}else this._logger.log(ce.Debug,"Server handshake complete.");return this._handshakeResolver(),s}_resetKeepAliveInterval(){this.connection.features.inherentKeepAlive||(this._nextKeepAlive=new Date().getTime()+this.keepAliveIntervalInMilliseconds,this._cleanupPingTimer())}_resetTimeoutPeriod(){if((!this.connection.features||!this.connection.features.inherentKeepAlive)&&(this._timeoutHandle=setTimeout(()=>this.serverTimeout(),this.serverTimeoutInMilliseconds),this._pingServerHandle===void 0)){let e=this._nextKeepAlive-new Date().getTime();e<0&&(e=0),this._pingServerHandle=setTimeout(async()=>{if(this._connectionState===qt.Connected)try{await this._sendMessage(this._cachedPingMessage)}catch{this._cleanupPingTimer()}},e)}}serverTimeout(){this.connection.stop(new Error("Server timeout elapsed without receiving a message from the server."))}async _invokeClientMethod(e){const i=e.target.toLowerCase(),s=this._methods[i];if(!s){this._logger.log(ce.Warning,`No client method with the name '${i}' found.`),e.invocationId&&(this._logger.log(ce.Warning,`No result given for '${i}' method and invocation ID '${e.invocationId}'.`),await this._sendWithProtocol(this._createCompletionMessage(e.invocationId,"Client didn't provide a result.",null)));return}const r=s.slice(),n=!!e.invocationId;let o,a,l;for(const c of r)try{const f=o;o=await c.apply(this,e.arguments),n&&o&&f&&(this._logger.log(ce.Error,`Multiple results provided for '${i}'. Sending error to server.`),l=this._createCompletionMessage(e.invocationId,"Client provided multiple results.",null)),a=void 0}catch(f){a=f,this._logger.log(ce.Error,`A callback for the method '${i}' threw error '${f}'.`)}l?await this._sendWithProtocol(l):n?(a?l=this._createCompletionMessage(e.invocationId,`${a}`,null):o!==void 0?l=this._createCompletionMessage(e.invocationId,null,o):(this._logger.log(ce.Warning,`No result given for '${i}' method and invocation ID '${e.invocationId}'.`),l=this._createCompletionMessage(e.invocationId,"Client didn't provide a result.",null)),await this._sendWithProtocol(l)):o&&this._logger.log(ce.Error,`Result given for '${i}' method but server is not expecting a result.`)}_connectionClosed(e){this._logger.log(ce.Debug,`HubConnection.connectionClosed(${e}) called while in state ${this._connectionState}.`),this._stopDuringStartError=this._stopDuringStartError||e||new Vs("The underlying connection was closed before the hub handshake could complete."),this._handshakeResolver&&this._handshakeResolver(),this._cancelCallbacksWithError(e||new Error("Invocation canceled due to the underlying connection being closed.")),this._cleanupTimeout(),this._cleanupPingTimer(),this._connectionState===qt.Disconnecting?this._completeClose(e):this._connectionState===qt.Connected&&this._reconnectPolicy?this._reconnect(e):this._connectionState===qt.Connected&&this._completeClose(e)}_completeClose(e){if(this._connectionStarted){this._connectionState=qt.Disconnected,this._connectionStarted=!1,vi.isBrowser&&window.document.removeEventListener("freeze",this._freezeEventListener);try{this._closedCallbacks.forEach(i=>i.apply(this,[e]))}catch(i){this._logger.log(ce.Error,`An onclose callback called with error '${e}' threw error '${i}'.`)}}}async _reconnect(e){const i=Date.now();let s=0,r=e!==void 0?e:new Error("Attempting to reconnect due to a unknown error."),n=this._getNextRetryDelay(s++,0,r);if(n===null){this._logger.log(ce.Debug,"Connection not reconnecting because the IRetryPolicy returned null on the first reconnect attempt."),this._completeClose(e);return}if(this._connectionState=qt.Reconnecting,e?this._logger.log(ce.Information,`Connection reconnecting because of error '${e}'.`):this._logger.log(ce.Information,"Connection reconnecting."),this._reconnectingCallbacks.length!==0){try{this._reconnectingCallbacks.forEach(o=>o.apply(this,[e]))}catch(o){this._logger.log(ce.Error,`An onreconnecting callback called with error '${e}' threw error '${o}'.`)}if(this._connectionState!==qt.Reconnecting){this._logger.log(ce.Debug,"Connection left the reconnecting state in onreconnecting callback. Done reconnecting.");return}}for(;n!==null;){if(this._logger.log(ce.Information,`Reconnect attempt number ${s} will start in ${n} ms.`),await new Promise(o=>{this._reconnectDelayHandle=setTimeout(o,n)}),this._reconnectDelayHandle=void 0,this._connectionState!==qt.Reconnecting){this._logger.log(ce.Debug,"Connection left the reconnecting state during reconnect delay. Done reconnecting.");return}try{if(await this._startInternal(),this._connectionState=qt.Connected,this._logger.log(ce.Information,"HubConnection reconnected successfully."),this._reconnectedCallbacks.length!==0)try{this._reconnectedCallbacks.forEach(o=>o.apply(this,[this.connection.connectionId]))}catch(o){this._logger.log(ce.Error,`An onreconnected callback called with connectionId '${this.connection.connectionId}; threw error '${o}'.`)}return}catch(o){if(this._logger.log(ce.Information,`Reconnect attempt failed because of error '${o}'.`),this._connectionState!==qt.Reconnecting){this._logger.log(ce.Debug,`Connection moved to the '${this._connectionState}' from the reconnecting state during reconnect attempt. Done reconnecting.`),this._connectionState===qt.Disconnecting&&this._completeClose();return}r=o instanceof Error?o:new Error(o.toString()),n=this._getNextRetryDelay(s++,Date.now()-i,r)}}this._logger.log(ce.Information,`Reconnect retries have been exhausted after ${Date.now()-i} ms and ${s} failed attempts. Connection disconnecting.`),this._completeClose()}_getNextRetryDelay(e,i,s){try{return this._reconnectPolicy.nextRetryDelayInMilliseconds({elapsedMilliseconds:i,previousRetryCount:e,retryReason:s})}catch(r){return this._logger.log(ce.Error,`IRetryPolicy.nextRetryDelayInMilliseconds(${e}, ${i}) threw error '${r}'.`),null}}_cancelCallbacksWithError(e){const i=this._callbacks;this._callbacks={},Object.keys(i).forEach(s=>{const r=i[s];try{r(null,e)}catch(n){this._logger.log(ce.Error,`Stream 'error' callback called with '${e}' threw error: ${Mg(n)}`)}})}_cleanupPingTimer(){this._pingServerHandle&&(clearTimeout(this._pingServerHandle),this._pingServerHandle=void 0)}_cleanupTimeout(){this._timeoutHandle&&clearTimeout(this._timeoutHandle)}_createInvocation(e,i,s,r){if(s)return r.length!==0?{arguments:i,streamIds:r,target:e,type:Lt.Invocation}:{arguments:i,target:e,type:Lt.Invocation};{const n=this._invocationId;return this._invocationId++,r.length!==0?{arguments:i,invocationId:n.toString(),streamIds:r,target:e,type:Lt.Invocation}:{arguments:i,invocationId:n.toString(),target:e,type:Lt.Invocation}}}_launchStreams(e,i){if(e.length!==0){i||(i=Promise.resolve());for(const s in e)e[s].subscribe({complete:()=>{i=i.then(()=>this._sendWithProtocol(this._createCompletionMessage(s)))},error:r=>{let n;r instanceof Error?n=r.message:r&&r.toString?n=r.toString():n="Unknown error",i=i.then(()=>this._sendWithProtocol(this._createCompletionMessage(s,n)))},next:r=>{i=i.then(()=>this._sendWithProtocol(this._createStreamItemMessage(s,r)))}})}}_replaceStreamingParams(e){const i=[],s=[];for(let r=0;r<e.length;r++){const n=e[r];if(this._isObservable(n)){const o=this._invocationId;this._invocationId++,i[o]=n,s.push(o.toString()),e.splice(r,1)}}return[i,s]}_isObservable(e){return e&&e.subscribe&&typeof e.subscribe=="function"}_createStreamInvocation(e,i,s){const r=this._invocationId;return this._invocationId++,s.length!==0?{arguments:i,invocationId:r.toString(),streamIds:s,target:e,type:Lt.StreamInvocation}:{arguments:i,invocationId:r.toString(),target:e,type:Lt.StreamInvocation}}_createCancelInvocation(e){return{invocationId:e,type:Lt.CancelInvocation}}_createStreamItemMessage(e,i){return{invocationId:e,item:i,type:Lt.StreamItem}}_createCompletionMessage(e,i,s){return i?{error:i,invocationId:e,type:Lt.Completion}:{invocationId:e,result:s,type:Lt.Completion}}}const aE=[0,2e3,1e4,3e4,null];class $g{constructor(e){this._retryDelays=e!==void 0?[...e,null]:aE}nextRetryDelayInMilliseconds(e){return this._retryDelays[e.previousRetryCount]}}class Jr{}Jr.Authorization="Authorization";Jr.Cookie="Cookie";class lE extends Vu{constructor(e,i){super(),this._innerClient=e,this._accessTokenFactory=i}async send(e){let i=!0;this._accessTokenFactory&&(!this._accessToken||e.url&&e.url.indexOf("/negotiate?")>0)&&(i=!1,this._accessToken=await this._accessTokenFactory()),this._setAuthorizationHeader(e);const s=await this._innerClient.send(e);return i&&s.statusCode===401&&this._accessTokenFactory?(this._accessToken=await this._accessTokenFactory(),this._setAuthorizationHeader(e),await this._innerClient.send(e)):s}_setAuthorizationHeader(e){e.headers||(e.headers={}),this._accessToken?e.headers[Jr.Authorization]=`Bearer ${this._accessToken}`:this._accessTokenFactory&&e.headers[Jr.Authorization]&&delete e.headers[Jr.Authorization]}getCookieString(e){return this._innerClient.getCookieString(e)}}var gi;(function(t){t[t.None=0]="None",t[t.WebSockets=1]="WebSockets",t[t.ServerSentEvents=2]="ServerSentEvents",t[t.LongPolling=4]="LongPolling"})(gi||(gi={}));var Mi;(function(t){t[t.Text=1]="Text",t[t.Binary=2]="Binary"})(Mi||(Mi={}));let dE=class{constructor(){this._isAborted=!1,this.onabort=null}abort(){this._isAborted||(this._isAborted=!0,this.onabort&&this.onabort())}get signal(){return this}get aborted(){return this._isAborted}};class Ng{constructor(e,i,s){this._httpClient=e,this._logger=i,this._pollAbort=new dE,this._options=s,this._running=!1,this.onreceive=null,this.onclose=null}get pollAborted(){return this._pollAbort.aborted}async connect(e,i){if(bi.isRequired(e,"url"),bi.isRequired(i,"transferFormat"),bi.isIn(i,Mi,"transferFormat"),this._url=e,this._logger.log(ce.Trace,"(LongPolling transport) Connecting."),i===Mi.Binary&&typeof XMLHttpRequest<"u"&&typeof new XMLHttpRequest().responseType!="string")throw new Error("Binary protocols over XmlHttpRequest not implementing advanced features are not supported.");const[s,r]=sa(),n={[s]:r,...this._options.headers},o={abortSignal:this._pollAbort.signal,headers:n,timeout:1e5,withCredentials:this._options.withCredentials};i===Mi.Binary&&(o.responseType="arraybuffer");const a=`${e}&_=${Date.now()}`;this._logger.log(ce.Trace,`(LongPolling transport) polling: ${a}.`);const l=await this._httpClient.get(a,o);l.statusCode!==200?(this._logger.log(ce.Error,`(LongPolling transport) Unexpected response code: ${l.statusCode}.`),this._closeError=new ia(l.statusText||"",l.statusCode),this._running=!1):this._running=!0,this._receiving=this._poll(this._url,o)}async _poll(e,i){try{for(;this._running;)try{const s=`${e}&_=${Date.now()}`;this._logger.log(ce.Trace,`(LongPolling transport) polling: ${s}.`);const r=await this._httpClient.get(s,i);r.statusCode===204?(this._logger.log(ce.Information,"(LongPolling transport) Poll terminated by server."),this._running=!1):r.statusCode!==200?(this._logger.log(ce.Error,`(LongPolling transport) Unexpected response code: ${r.statusCode}.`),this._closeError=new ia(r.statusText||"",r.statusCode),this._running=!1):r.content?(this._logger.log(ce.Trace,`(LongPolling transport) data received. ${vl(r.content,this._options.logMessageContent)}.`),this.onreceive&&this.onreceive(r.content)):this._logger.log(ce.Trace,"(LongPolling transport) Poll timed out, reissuing.")}catch(s){this._running?s instanceof Qf?this._logger.log(ce.Trace,"(LongPolling transport) Poll timed out, reissuing."):(this._closeError=s,this._running=!1):this._logger.log(ce.Trace,`(LongPolling transport) Poll errored after shutdown: ${s.message}`)}}finally{this._logger.log(ce.Trace,"(LongPolling transport) Polling complete."),this.pollAborted||this._raiseOnClose()}}async send(e){return this._running?Sb(this._logger,"LongPolling",this._httpClient,this._url,e,this._options):Promise.reject(new Error("Cannot send until the transport is connected"))}async stop(){this._logger.log(ce.Trace,"(LongPolling transport) Stopping polling."),this._running=!1,this._pollAbort.abort();try{await this._receiving,this._logger.log(ce.Trace,`(LongPolling transport) sending DELETE request to ${this._url}.`);const e={},[i,s]=sa();e[i]=s;const r={headers:{...e,...this._options.headers},timeout:this._options.timeout,withCredentials:this._options.withCredentials};await this._httpClient.delete(this._url,r),this._logger.log(ce.Trace,"(LongPolling transport) DELETE request sent.")}finally{this._logger.log(ce.Trace,"(LongPolling transport) Stop finished."),this._raiseOnClose()}}_raiseOnClose(){if(this.onclose){let e="(LongPolling transport) Firing onclose event.";this._closeError&&(e+=" Error: "+this._closeError),this._logger.log(ce.Trace,e),this.onclose(this._closeError)}}}class uE{constructor(e,i,s,r){this._httpClient=e,this._accessToken=i,this._logger=s,this._options=r,this.onreceive=null,this.onclose=null}async connect(e,i){return bi.isRequired(e,"url"),bi.isRequired(i,"transferFormat"),bi.isIn(i,Mi,"transferFormat"),this._logger.log(ce.Trace,"(SSE transport) Connecting."),this._url=e,this._accessToken&&(e+=(e.indexOf("?")<0?"?":"&")+`access_token=${encodeURIComponent(this._accessToken)}`),new Promise((s,r)=>{let n=!1;if(i!==Mi.Text){r(new Error("The Server-Sent Events transport only supports the 'Text' transfer format"));return}let o;if(vi.isBrowser||vi.isWebWorker)o=new this._options.EventSource(e,{withCredentials:this._options.withCredentials});else{const a=this._httpClient.getCookieString(e),l={};l.Cookie=a;const[c,f]=sa();l[c]=f,o=new this._options.EventSource(e,{withCredentials:this._options.withCredentials,headers:{...l,...this._options.headers}})}try{o.onmessage=a=>{if(this.onreceive)try{this._logger.log(ce.Trace,`(SSE transport) data received. ${vl(a.data,this._options.logMessageContent)}.`),this.onreceive(a.data)}catch(l){this._close(l);return}},o.onerror=a=>{n?this._close():r(new Error("EventSource failed to connect. The connection could not be found on the server, either the connection ID is not present on the server, or a proxy is refusing/buffering the connection. If you have multiple servers check that sticky sessions are enabled."))},o.onopen=()=>{this._logger.log(ce.Information,`SSE connected to ${this._url}`),this._eventSource=o,n=!0,s()}}catch(a){r(a);return}})}async send(e){return this._eventSource?Sb(this._logger,"SSE",this._httpClient,this._url,e,this._options):Promise.reject(new Error("Cannot send until the transport is connected"))}stop(){return this._close(),Promise.resolve()}_close(e){this._eventSource&&(this._eventSource.close(),this._eventSource=void 0,this.onclose&&this.onclose(e))}}class cE{constructor(e,i,s,r,n,o){this._logger=s,this._accessTokenFactory=i,this._logMessageContent=r,this._webSocketConstructor=n,this._httpClient=e,this.onreceive=null,this.onclose=null,this._headers=o}async connect(e,i){bi.isRequired(e,"url"),bi.isRequired(i,"transferFormat"),bi.isIn(i,Mi,"transferFormat"),this._logger.log(ce.Trace,"(WebSockets transport) Connecting.");let s;return this._accessTokenFactory&&(s=await this._accessTokenFactory()),new Promise((r,n)=>{e=e.replace(/^http/,"ws");let o;const a=this._httpClient.getCookieString(e);let l=!1;if(vi.isNode||vi.isReactNative){const c={},[f,v]=sa();c[f]=v,s&&(c[Jr.Authorization]=`Bearer ${s}`),a&&(c[Jr.Cookie]=a),o=new this._webSocketConstructor(e,void 0,{headers:{...c,...this._headers}})}else s&&(e+=(e.indexOf("?")<0?"?":"&")+`access_token=${encodeURIComponent(s)}`);o||(o=new this._webSocketConstructor(e)),i===Mi.Binary&&(o.binaryType="arraybuffer"),o.onopen=c=>{this._logger.log(ce.Information,`WebSocket connected to ${e}.`),this._webSocket=o,l=!0,r()},o.onerror=c=>{let f=null;typeof ErrorEvent<"u"&&c instanceof ErrorEvent?f=c.error:f="There was an error with the transport",this._logger.log(ce.Information,`(WebSockets transport) ${f}.`)},o.onmessage=c=>{if(this._logger.log(ce.Trace,`(WebSockets transport) data received. ${vl(c.data,this._logMessageContent)}.`),this.onreceive)try{this.onreceive(c.data)}catch(f){this._close(f);return}},o.onclose=c=>{if(l)this._close(c);else{let f=null;typeof ErrorEvent<"u"&&c instanceof ErrorEvent?f=c.error:f="WebSocket failed to connect. The connection could not be found on the server, either the endpoint may not be a SignalR endpoint, the connection ID is not present on the server, or there is a proxy blocking WebSockets. If you have multiple servers check that sticky sessions are enabled.",n(new Error(f))}}})}send(e){return this._webSocket&&this._webSocket.readyState===this._webSocketConstructor.OPEN?(this._logger.log(ce.Trace,`(WebSockets transport) sending data. ${vl(e,this._logMessageContent)}.`),this._webSocket.send(e),Promise.resolve()):Promise.reject("WebSocket is not in the OPEN state")}stop(){return this._webSocket&&this._close(void 0),Promise.resolve()}_close(e){this._webSocket&&(this._webSocket.onclose=()=>{},this._webSocket.onmessage=()=>{},this._webSocket.onerror=()=>{},this._webSocket.close(),this._webSocket=void 0),this._logger.log(ce.Trace,"(WebSockets transport) socket closed."),this.onclose&&(this._isCloseEvent(e)&&(e.wasClean===!1||e.code!==1e3)?this.onclose(new Error(`WebSocket closed with status code: ${e.code} (${e.reason||"no reason given"}).`)):e instanceof Error?this.onclose(e):this.onclose())}_isCloseEvent(e){return e&&typeof e.wasClean=="boolean"&&typeof e.code=="number"}}const Lg=100;class hE{constructor(e,i={}){if(this._stopPromiseResolver=()=>{},this.features={},this._negotiateVersion=1,bi.isRequired(e,"url"),this._logger=YI(i.logger),this.baseUrl=this._resolveUrl(e),i=i||{},i.logMessageContent=i.logMessageContent===void 0?!1:i.logMessageContent,typeof i.withCredentials=="boolean"||i.withCredentials===void 0)i.withCredentials=i.withCredentials===void 0?!0:i.withCredentials;else throw new Error("withCredentials option was not a 'boolean' or 'undefined' value");i.timeout=i.timeout===void 0?100*1e3:i.timeout;let s=null,r=null;if(vi.isNode&&typeof require<"u"){const n=typeof __webpack_require__=="function"?__non_webpack_require__:require;s=n("ws"),r=n("eventsource")}!vi.isNode&&typeof WebSocket<"u"&&!i.WebSocket?i.WebSocket=WebSocket:vi.isNode&&!i.WebSocket&&s&&(i.WebSocket=s),!vi.isNode&&typeof EventSource<"u"&&!i.EventSource?i.EventSource=EventSource:vi.isNode&&!i.EventSource&&typeof r<"u"&&(i.EventSource=r),this._httpClient=new lE(i.httpClient||new iE(this._logger),i.accessTokenFactory),this._connectionState="Disconnected",this._connectionStarted=!1,this._options=i,this.onreceive=null,this.onclose=null}async start(e){if(e=e||Mi.Binary,bi.isIn(e,Mi,"transferFormat"),this._logger.log(ce.Debug,`Starting connection with transfer format '${Mi[e]}'.`),this._connectionState!=="Disconnected")return Promise.reject(new Error("Cannot start an HttpConnection that is not in the 'Disconnected' state."));if(this._connectionState="Connecting",this._startInternalPromise=this._startInternal(e),await this._startInternalPromise,this._connectionState==="Disconnecting"){const i="Failed to start the HttpConnection before stop() was called.";return this._logger.log(ce.Error,i),await this._stopPromise,Promise.reject(new Vs(i))}else if(this._connectionState!=="Connected"){const i="HttpConnection.startInternal completed gracefully but didn't enter the connection into the connected state!";return this._logger.log(ce.Error,i),Promise.reject(new Vs(i))}this._connectionStarted=!0}send(e){return this._connectionState!=="Connected"?Promise.reject(new Error("Cannot send data if the connection is not in the 'Connected' State.")):(this._sendQueue||(this._sendQueue=new Xf(this.transport)),this._sendQueue.send(e))}async stop(e){if(this._connectionState==="Disconnected")return this._logger.log(ce.Debug,`Call to HttpConnection.stop(${e}) ignored because the connection is already in the disconnected state.`),Promise.resolve();if(this._connectionState==="Disconnecting")return this._logger.log(ce.Debug,`Call to HttpConnection.stop(${e}) ignored because the connection is already in the disconnecting state.`),this._stopPromise;this._connectionState="Disconnecting",this._stopPromise=new Promise(i=>{this._stopPromiseResolver=i}),await this._stopInternal(e),await this._stopPromise}async _stopInternal(e){this._stopError=e;try{await this._startInternalPromise}catch{}if(this.transport){try{await this.transport.stop()}catch(i){this._logger.log(ce.Error,`HttpConnection.transport.stop() threw error '${i}'.`),this._stopConnection()}this.transport=void 0}else this._logger.log(ce.Debug,"HttpConnection.transport is undefined in HttpConnection.stop() because start() failed.")}async _startInternal(e){let i=this.baseUrl;this._accessTokenFactory=this._options.accessTokenFactory,this._httpClient._accessTokenFactory=this._accessTokenFactory;try{if(this._options.skipNegotiation)if(this._options.transport===gi.WebSockets)this.transport=this._constructTransport(gi.WebSockets),await this._startTransport(i,e);else throw new Error("Negotiation can only be skipped when using the WebSocket transport directly.");else{let s=null,r=0;do{if(s=await this._getNegotiationResponse(i),this._connectionState==="Disconnecting"||this._connectionState==="Disconnected")throw new Vs("The connection was stopped during negotiation.");if(s.error)throw new Error(s.error);if(s.ProtocolVersion)throw new Error("Detected a connection attempt to an ASP.NET SignalR Server. This client only supports connecting to an ASP.NET Core SignalR Server. See https://aka.ms/signalr-core-differences for details.");if(s.url&&(i=s.url),s.accessToken){const n=s.accessToken;this._accessTokenFactory=()=>n,this._httpClient._accessToken=n,this._httpClient._accessTokenFactory=void 0}r++}while(s.url&&r<Lg);if(r===Lg&&s.url)throw new Error("Negotiate redirection limit exceeded.");await this._createTransport(i,this._options.transport,s,e)}this.transport instanceof Ng&&(this.features.inherentKeepAlive=!0),this._connectionState==="Connecting"&&(this._logger.log(ce.Debug,"The HttpConnection connected successfully."),this._connectionState="Connected")}catch(s){return this._logger.log(ce.Error,"Failed to start the connection: "+s),this._connectionState="Disconnected",this.transport=void 0,this._stopPromiseResolver(),Promise.reject(s)}}async _getNegotiationResponse(e){const i={},[s,r]=sa();i[s]=r;const n=this._resolveNegotiateUrl(e);this._logger.log(ce.Debug,`Sending negotiation request: ${n}.`);try{const o=await this._httpClient.post(n,{content:"",headers:{...i,...this._options.headers},timeout:this._options.timeout,withCredentials:this._options.withCredentials});if(o.statusCode!==200)return Promise.reject(new Error(`Unexpected status code returned from negotiate '${o.statusCode}'`));const a=JSON.parse(o.content);return(!a.negotiateVersion||a.negotiateVersion<1)&&(a.connectionToken=a.connectionId),a}catch(o){let a="Failed to complete negotiation with the server: "+o;return o instanceof ia&&o.statusCode===404&&(a=a+" Either this is not a SignalR endpoint or there is a proxy blocking the connection."),this._logger.log(ce.Error,a),Promise.reject(new jI(a))}}_createConnectUrl(e,i){return i?e+(e.indexOf("?")===-1?"?":"&")+`id=${i}`:e}async _createTransport(e,i,s,r){let n=this._createConnectUrl(e,s.connectionToken);if(this._isITransport(i)){this._logger.log(ce.Debug,"Connection was provided an instance of ITransport, using that directly."),this.transport=i,await this._startTransport(n,r),this.connectionId=s.connectionId;return}const o=[],a=s.availableTransports||[];let l=s;for(const c of a){const f=this._resolveTransportOrError(c,i,r);if(f instanceof Error)o.push(`${c.transport} failed:`),o.push(f);else if(this._isITransport(f)){if(this.transport=f,!l){try{l=await this._getNegotiationResponse(e)}catch(v){return Promise.reject(v)}n=this._createConnectUrl(e,l.connectionToken)}try{await this._startTransport(n,r),this.connectionId=l.connectionId;return}catch(v){if(this._logger.log(ce.Error,`Failed to start the transport '${c.transport}': ${v}`),l=void 0,o.push(new zI(`${c.transport} failed: ${v}`,gi[c.transport])),this._connectionState!=="Connecting"){const S="Failed to select transport before stop() was called.";return this._logger.log(ce.Debug,S),Promise.reject(new Vs(S))}}}}return o.length>0?Promise.reject(new HI(`Unable to connect to the server with any of the available transports. ${o.join(" ")}`,o)):Promise.reject(new Error("None of the transports supported by the client are supported by the server."))}_constructTransport(e){switch(e){case gi.WebSockets:if(!this._options.WebSocket)throw new Error("'WebSocket' is not supported in your environment.");return new cE(this._httpClient,this._accessTokenFactory,this._logger,this._options.logMessageContent,this._options.WebSocket,this._options.headers||{});case gi.ServerSentEvents:if(!this._options.EventSource)throw new Error("'EventSource' is not supported in your environment.");return new uE(this._httpClient,this._httpClient._accessToken,this._logger,this._options);case gi.LongPolling:return new Ng(this._httpClient,this._logger,this._options);default:throw new Error(`Unknown transport: ${e}.`)}}_startTransport(e,i){return this.transport.onreceive=this.onreceive,this.transport.onclose=s=>this._stopConnection(s),this.transport.connect(e,i)}_resolveTransportOrError(e,i,s){const r=gi[e.transport];if(r==null)return this._logger.log(ce.Debug,`Skipping transport '${e.transport}' because it is not supported by this client.`),new Error(`Skipping transport '${e.transport}' because it is not supported by this client.`);if(fE(i,r))if(e.transferFormats.map(o=>Mi[o]).indexOf(s)>=0){if(r===gi.WebSockets&&!this._options.WebSocket||r===gi.ServerSentEvents&&!this._options.EventSource)return this._logger.log(ce.Debug,`Skipping transport '${gi[r]}' because it is not supported in your environment.'`),new FI(`'${gi[r]}' is not supported in your environment.`,r);this._logger.log(ce.Debug,`Selecting transport '${gi[r]}'.`);try{return this._constructTransport(r)}catch(o){return o}}else return this._logger.log(ce.Debug,`Skipping transport '${gi[r]}' because it does not support the requested transfer format '${Mi[s]}'.`),new Error(`'${gi[r]}' does not support ${Mi[s]}.`);else return this._logger.log(ce.Debug,`Skipping transport '${gi[r]}' because it was disabled by the client.`),new BI(`'${gi[r]}' is disabled by the client.`,r)}_isITransport(e){return e&&typeof e=="object"&&"connect"in e}_stopConnection(e){if(this._logger.log(ce.Debug,`HttpConnection.stopConnection(${e}) called while in state ${this._connectionState}.`),this.transport=void 0,e=this._stopError||e,this._stopError=void 0,this._connectionState==="Disconnected"){this._logger.log(ce.Debug,`Call to HttpConnection.stopConnection(${e}) was ignored because the connection is already in the disconnected state.`);return}if(this._connectionState==="Connecting")throw this._logger.log(ce.Warning,`Call to HttpConnection.stopConnection(${e}) was ignored because the connection is still in the connecting state.`),new Error(`HttpConnection.stopConnection(${e}) was called while the connection is still in the connecting state.`);if(this._connectionState==="Disconnecting"&&this._stopPromiseResolver(),e?this._logger.log(ce.Error,`Connection disconnected with error '${e}'.`):this._logger.log(ce.Information,"Connection disconnected."),this._sendQueue&&(this._sendQueue.stop().catch(i=>{this._logger.log(ce.Error,`TransportSendQueue.stop() threw error '${i}'.`)}),this._sendQueue=void 0),this.connectionId=void 0,this._connectionState="Disconnected",this._connectionStarted){this._connectionStarted=!1;try{this.onclose&&this.onclose(e)}catch(i){this._logger.log(ce.Error,`HttpConnection.onclose(${e}) threw error '${i}'.`)}}}_resolveUrl(e){if(e.lastIndexOf("https://",0)===0||e.lastIndexOf("http://",0)===0)return e;if(!vi.isBrowser)throw new Error(`Cannot resolve '${e}'.`);const i=window.document.createElement("a");return i.href=e,this._logger.log(ce.Information,`Normalizing '${e}' to '${i.href}'.`),i.href}_resolveNegotiateUrl(e){const i=e.indexOf("?");let s=e.substring(0,i===-1?e.length:i);return s[s.length-1]!=="/"&&(s+="/"),s+="negotiate",s+=i===-1?"":e.substring(i),s.indexOf("negotiateVersion")===-1&&(s+=i===-1?"?":"&",s+="negotiateVersion="+this._negotiateVersion),s}}function fE(t,e){return!t||(e&t)!==0}class Xf{constructor(e){this._transport=e,this._buffer=[],this._executing=!0,this._sendBufferedData=new yd,this._transportResult=new yd,this._sendLoopPromise=this._sendLoop()}send(e){return this._bufferData(e),this._transportResult||(this._transportResult=new yd),this._transportResult.promise}stop(){return this._executing=!1,this._sendBufferedData.resolve(),this._sendLoopPromise}_bufferData(e){if(this._buffer.length&&typeof this._buffer[0]!=typeof e)throw new Error(`Expected data to be of type ${typeof this._buffer} but was of type ${typeof e}`);this._buffer.push(e),this._sendBufferedData.resolve()}async _sendLoop(){for(;;){if(await this._sendBufferedData.promise,!this._executing){this._transportResult&&this._transportResult.reject("Connection stopped.");break}this._sendBufferedData=new yd;const e=this._transportResult;this._transportResult=void 0;const i=typeof this._buffer[0]=="string"?this._buffer.join(""):Xf._concatBuffers(this._buffer);this._buffer.length=0;try{await this._transport.send(i),e.resolve()}catch(s){e.reject(s)}}}static _concatBuffers(e){const i=e.map(n=>n.byteLength).reduce((n,o)=>n+o),s=new Uint8Array(i);let r=0;for(const n of e)s.set(new Uint8Array(n),r),r+=n.byteLength;return s.buffer}}class yd{constructor(){this.promise=new Promise((e,i)=>[this._resolver,this._rejecter]=[e,i])}resolve(){this._resolver()}reject(e){this._rejecter(e)}}const mE="json";class pE{constructor(){this.name=mE,this.version=1,this.transferFormat=Mi.Text}parseMessages(e,i){if(typeof e!="string")throw new Error("Invalid input for JSON hub protocol. Expected a string.");if(!e)return[];i===null&&(i=gl.instance);const s=ls.parse(e),r=[];for(const n of s){const o=JSON.parse(n);if(typeof o.type!="number")throw new Error("Invalid payload.");switch(o.type){case Lt.Invocation:this._isInvocationMessage(o);break;case Lt.StreamItem:this._isStreamItemMessage(o);break;case Lt.Completion:this._isCompletionMessage(o);break;case Lt.Ping:break;case Lt.Close:break;default:i.log(ce.Information,"Unknown message type '"+o.type+"' ignored.");continue}r.push(o)}return r}writeMessage(e){return ls.write(JSON.stringify(e))}_isInvocationMessage(e){this._assertNotEmptyString(e.target,"Invalid payload for Invocation message."),e.invocationId!==void 0&&this._assertNotEmptyString(e.invocationId,"Invalid payload for Invocation message.")}_isStreamItemMessage(e){if(this._assertNotEmptyString(e.invocationId,"Invalid payload for StreamItem message."),e.item===void 0)throw new Error("Invalid payload for StreamItem message.")}_isCompletionMessage(e){if(e.result&&e.error)throw new Error("Invalid payload for Completion message.");!e.result&&e.error&&this._assertNotEmptyString(e.error,"Invalid payload for Completion message."),this._assertNotEmptyString(e.invocationId,"Invalid payload for Completion message.")}_assertNotEmptyString(e,i){if(typeof e!="string"||e==="")throw new Error(i)}}const gE={trace:ce.Trace,debug:ce.Debug,info:ce.Information,information:ce.Information,warn:ce.Warning,warning:ce.Warning,error:ce.Error,critical:ce.Critical,none:ce.None};function vE(t){const e=gE[t.toLowerCase()];if(typeof e<"u")return e;throw new Error(`Unknown log level: ${t}`)}class yE{configureLogging(e){if(bi.isRequired(e,"logging"),_E(e))this.logger=e;else if(typeof e=="string"){const i=vE(e);this.logger=new uu(i)}else this.logger=new uu(e);return this}withUrl(e,i){return bi.isRequired(e,"url"),bi.isNotEmpty(e,"url"),this.url=e,typeof i=="object"?this.httpConnectionOptions={...this.httpConnectionOptions,...i}:this.httpConnectionOptions={...this.httpConnectionOptions,transport:i},this}withHubProtocol(e){return bi.isRequired(e,"protocol"),this.protocol=e,this}withAutomaticReconnect(e){if(this.reconnectPolicy)throw new Error("A reconnectPolicy has already been set.");return e?Array.isArray(e)?this.reconnectPolicy=new $g(e):this.reconnectPolicy=e:this.reconnectPolicy=new $g,this}build(){const e=this.httpConnectionOptions||{};if(e.logger===void 0&&(e.logger=this.logger),!this.url)throw new Error("The 'HubConnectionBuilder.withUrl' method must be called before building the connection.");const i=new hE(this.url,e);return Zf.create(i,this.logger||gl.instance,this.protocol||new pE,this.reconnectPolicy)}}function _E(t){return t.log!==void 0}var cu={coachHub:void 0};function vn(t){return cu[t]==null&&Tb(t),cu[t]}function Tb(t){if(cu[t]==null){let e=new yE().withUrl(`${Pt}/${t}`,{withCredentials:!1,timeout:12e4}).withAutomaticReconnect().build();e.keepAliveIntervalInMilliseconds=6e4,e.serverTimeoutInMilliseconds=12e4,e.start(),e.onclose(async()=>{e.start()}),cu[t]=e}}function bE(t){return vn(t).state==qt.Connected}async function wE(){return fetch(`${Pt}/api/Metric/GetMetrics`,{method:"POST",headers:{"Content-Type":"application/json"}}).then(t=>t.json()).then(t=>{if(t.errorMessage)this.errorMessage=t.errorMessage;else return t}).catch(t=>{console.error("Error:",t)})}async function SE(){return fetch(`${Pt}/api/Metric/GetLogItems`,{method:"POST",headers:{"Content-Type":"application/json"}}).then(t=>t.json()).then(t=>{if(t.errorMessage)this.errorMessage=t.errorMessage;else return t}).catch(t=>{console.error("Error:",t)})}async function TE(t){return fetch(`${Pt}/api/Metric/DeleteLogEntry`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({logEntryID:t})}).then(e=>e.json()).then(e=>{if(e.errorMessage)this.errorMessage=e.errorMessage;else return e}).catch(e=>{console.error("Error:",e)})}//! moment.js
//! version : 2.29.1
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com
var xb;function de(){return xb.apply(null,arguments)}function xE(t){xb=t}function zs(t){return t instanceof Array||Object.prototype.toString.call(t)==="[object Array]"}function Qr(t){return t!=null&&Object.prototype.toString.call(t)==="[object Object]"}function yt(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function em(t){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(t).length===0;var e;for(e in t)if(yt(t,e))return!1;return!0}function Qi(t){return t===void 0}function Bn(t){return typeof t=="number"||Object.prototype.toString.call(t)==="[object Number]"}function Bl(t){return t instanceof Date||Object.prototype.toString.call(t)==="[object Date]"}function Ib(t,e){var i=[],s;for(s=0;s<t.length;++s)i.push(e(t[s],s));return i}function lr(t,e){for(var i in e)yt(e,i)&&(t[i]=e[i]);return yt(e,"toString")&&(t.toString=e.toString),yt(e,"valueOf")&&(t.valueOf=e.valueOf),t}function yn(t,e,i,s){return Kb(t,e,i,s,!0).utc()}function IE(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function ot(t){return t._pf==null&&(t._pf=IE()),t._pf}var rf;Array.prototype.some?rf=Array.prototype.some:rf=function(t){var e=Object(this),i=e.length>>>0,s;for(s=0;s<i;s++)if(s in e&&t.call(this,e[s],s,e))return!0;return!1};function tm(t){if(t._isValid==null){var e=ot(t),i=rf.call(e.parsedDateParts,function(r){return r!=null}),s=!isNaN(t._d.getTime())&&e.overflow<0&&!e.empty&&!e.invalidEra&&!e.invalidMonth&&!e.invalidWeekday&&!e.weekdayMismatch&&!e.nullInput&&!e.invalidFormat&&!e.userInvalidated&&(!e.meridiem||e.meridiem&&i);if(t._strict&&(s=s&&e.charsLeftOver===0&&e.unusedTokens.length===0&&e.bigHour===void 0),Object.isFrozen==null||!Object.isFrozen(t))t._isValid=s;else return s}return t._isValid}function Wu(t){var e=yn(NaN);return t!=null?lr(ot(e),t):ot(e).userInvalidated=!0,e}var Zc=de.momentProperties=[],Xc=!1;function im(t,e){var i,s,r;if(Qi(e._isAMomentObject)||(t._isAMomentObject=e._isAMomentObject),Qi(e._i)||(t._i=e._i),Qi(e._f)||(t._f=e._f),Qi(e._l)||(t._l=e._l),Qi(e._strict)||(t._strict=e._strict),Qi(e._tzm)||(t._tzm=e._tzm),Qi(e._isUTC)||(t._isUTC=e._isUTC),Qi(e._offset)||(t._offset=e._offset),Qi(e._pf)||(t._pf=ot(e)),Qi(e._locale)||(t._locale=e._locale),Zc.length>0)for(i=0;i<Zc.length;i++)s=Zc[i],r=e[s],Qi(r)||(t[s]=r);return t}function zl(t){im(this,t),this._d=new Date(t._d!=null?t._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),Xc===!1&&(Xc=!0,de.updateOffset(this),Xc=!1)}function js(t){return t instanceof zl||t!=null&&t._isAMomentObject!=null}function Eb(t){de.suppressDeprecationWarnings===!1&&typeof console<"u"&&console.warn&&console.warn("Deprecation warning: "+t)}function Ds(t,e){var i=!0;return lr(function(){if(de.deprecationHandler!=null&&de.deprecationHandler(null,t),i){var s=[],r,n,o;for(n=0;n<arguments.length;n++){if(r="",typeof arguments[n]=="object"){r+=`
[`+n+"] ";for(o in arguments[0])yt(arguments[0],o)&&(r+=o+": "+arguments[0][o]+", ");r=r.slice(0,-2)}else r=arguments[n];s.push(r)}Eb(t+`
Arguments: `+Array.prototype.slice.call(s).join("")+`
`+new Error().stack),i=!1}return e.apply(this,arguments)},e)}var Vg={};function Db(t,e){de.deprecationHandler!=null&&de.deprecationHandler(t,e),Vg[t]||(Eb(e),Vg[t]=!0)}de.suppressDeprecationWarnings=!1;de.deprecationHandler=null;function _n(t){return typeof Function<"u"&&t instanceof Function||Object.prototype.toString.call(t)==="[object Function]"}function EE(t){var e,i;for(i in t)yt(t,i)&&(e=t[i],_n(e)?this[i]=e:this["_"+i]=e);this._config=t,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function of(t,e){var i=lr({},t),s;for(s in e)yt(e,s)&&(Qr(t[s])&&Qr(e[s])?(i[s]={},lr(i[s],t[s]),lr(i[s],e[s])):e[s]!=null?i[s]=e[s]:delete i[s]);for(s in t)yt(t,s)&&!yt(e,s)&&Qr(t[s])&&(i[s]=lr({},i[s]));return i}function sm(t){t!=null&&this.set(t)}var af;Object.keys?af=Object.keys:af=function(t){var e,i=[];for(e in t)yt(t,e)&&i.push(e);return i};var DE={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function kE(t,e,i){var s=this._calendar[t]||this._calendar.sameElse;return _n(s)?s.call(e,i):s}function fn(t,e,i){var s=""+Math.abs(t),r=e-s.length,n=t>=0;return(n?i?"+":"":"-")+Math.pow(10,Math.max(0,r)).toString().substr(1)+s}var nm=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,_d=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,eh={},Ko={};function je(t,e,i,s){var r=s;typeof s=="string"&&(r=function(){return this[s]()}),t&&(Ko[t]=r),e&&(Ko[e[0]]=function(){return fn(r.apply(this,arguments),e[1],e[2])}),i&&(Ko[i]=function(){return this.localeData().ordinal(r.apply(this,arguments),t)})}function CE(t){return t.match(/\[[\s\S]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"")}function PE(t){var e=t.match(nm),i,s;for(i=0,s=e.length;i<s;i++)Ko[e[i]]?e[i]=Ko[e[i]]:e[i]=CE(e[i]);return function(r){var n="",o;for(o=0;o<s;o++)n+=_n(e[o])?e[o].call(r,t):e[o];return n}}function Gd(t,e){return t.isValid()?(e=kb(e,t.localeData()),eh[e]=eh[e]||PE(e),eh[e](t)):t.localeData().invalidDate()}function kb(t,e){var i=5;function s(r){return e.longDateFormat(r)||r}for(_d.lastIndex=0;i>=0&&_d.test(t);)t=t.replace(_d,s),_d.lastIndex=0,i-=1;return t}var AE={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function RE(t){var e=this._longDateFormat[t],i=this._longDateFormat[t.toUpperCase()];return e||!i?e:(this._longDateFormat[t]=i.match(nm).map(function(s){return s==="MMMM"||s==="MM"||s==="DD"||s==="dddd"?s.slice(1):s}).join(""),this._longDateFormat[t])}var ME="Invalid date";function OE(){return this._invalidDate}var $E="%d",NE=/\d{1,2}/;function LE(t){return this._ordinal.replace("%d",t)}var VE={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function WE(t,e,i,s){var r=this._relativeTime[i];return _n(r)?r(t,e,i,s):r.replace(/%d/i,t)}function FE(t,e){var i=this._relativeTime[t>0?"future":"past"];return _n(i)?i(e):i.replace(/%s/i,e)}var tl={};function Li(t,e){var i=t.toLowerCase();tl[i]=tl[i+"s"]=tl[e]=t}function ks(t){return typeof t=="string"?tl[t]||tl[t.toLowerCase()]:void 0}function rm(t){var e={},i,s;for(s in t)yt(t,s)&&(i=ks(s),i&&(e[i]=t[s]));return e}var Cb={};function Vi(t,e){Cb[t]=e}function BE(t){var e=[],i;for(i in t)yt(t,i)&&e.push({unit:i,priority:Cb[i]});return e.sort(function(s,r){return s.priority-r.priority}),e}function Fu(t){return t%4===0&&t%100!==0||t%400===0}function vs(t){return t<0?Math.ceil(t)||0:Math.floor(t)}function ut(t){var e=+t,i=0;return e!==0&&isFinite(e)&&(i=vs(e)),i}function ga(t,e){return function(i){return i!=null?(Pb(this,t,i),de.updateOffset(this,e),this):hu(this,t)}}function hu(t,e){return t.isValid()?t._d["get"+(t._isUTC?"UTC":"")+e]():NaN}function Pb(t,e,i){t.isValid()&&!isNaN(i)&&(e==="FullYear"&&Fu(t.year())&&t.month()===1&&t.date()===29?(i=ut(i),t._d["set"+(t._isUTC?"UTC":"")+e](i,t.month(),Gu(i,t.month()))):t._d["set"+(t._isUTC?"UTC":"")+e](i))}function zE(t){return t=ks(t),_n(this[t])?this[t]():this}function jE(t,e){if(typeof t=="object"){t=rm(t);var i=BE(t),s;for(s=0;s<i.length;s++)this[i[s].unit](t[i[s].unit])}else if(t=ks(t),_n(this[t]))return this[t](e);return this}var Ab=/\d/,hs=/\d\d/,Rb=/\d{3}/,om=/\d{4}/,Bu=/[+-]?\d{6}/,Ut=/\d\d?/,Mb=/\d\d\d\d?/,Ob=/\d\d\d\d\d\d?/,zu=/\d{1,3}/,am=/\d{1,4}/,ju=/[+-]?\d{1,6}/,va=/\d+/,Hu=/[+-]?\d+/,HE=/Z|[+-]\d\d:?\d\d/gi,Uu=/Z|[+-]\d\d(?::?\d\d)?/gi,UE=/[+-]?\d+(\.\d{1,3})?/,jl=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,fu;fu={};function Me(t,e,i){fu[t]=_n(e)?e:function(s,r){return s&&i?i:e}}function GE(t,e){return yt(fu,t)?fu[t](e._strict,e._locale):new RegExp(YE(t))}function YE(t){return os(t.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,i,s,r,n){return i||s||r||n}))}function os(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var lf={};function Ct(t,e){var i,s=e;for(typeof t=="string"&&(t=[t]),Bn(e)&&(s=function(r,n){n[e]=ut(r)}),i=0;i<t.length;i++)lf[t[i]]=s}function Hl(t,e){Ct(t,function(i,s,r,n){r._w=r._w||{},e(i,r._w,r,n)})}function qE(t,e,i){e!=null&&yt(lf,t)&&lf[t](e,i._a,i,t)}var Oi=0,Mn=1,rn=2,ci=3,Ws=4,On=5,Ur=6,KE=7,JE=8;function QE(t,e){return(t%e+e)%e}var si;Array.prototype.indexOf?si=Array.prototype.indexOf:si=function(t){var e;for(e=0;e<this.length;++e)if(this[e]===t)return e;return-1};function Gu(t,e){if(isNaN(t)||isNaN(e))return NaN;var i=QE(e,12);return t+=(e-i)/12,i===1?Fu(t)?29:28:31-i%7%2}je("M",["MM",2],"Mo",function(){return this.month()+1});je("MMM",0,0,function(t){return this.localeData().monthsShort(this,t)});je("MMMM",0,0,function(t){return this.localeData().months(this,t)});Li("month","M");Vi("month",8);Me("M",Ut);Me("MM",Ut,hs);Me("MMM",function(t,e){return e.monthsShortRegex(t)});Me("MMMM",function(t,e){return e.monthsRegex(t)});Ct(["M","MM"],function(t,e){e[Mn]=ut(t)-1});Ct(["MMM","MMMM"],function(t,e,i,s){var r=i._locale.monthsParse(t,s,i._strict);r!=null?e[Mn]=r:ot(i).invalidMonth=t});var ZE="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),$b="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),Nb=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,XE=jl,eD=jl;function tD(t,e){return t?zs(this._months)?this._months[t.month()]:this._months[(this._months.isFormat||Nb).test(e)?"format":"standalone"][t.month()]:zs(this._months)?this._months:this._months.standalone}function iD(t,e){return t?zs(this._monthsShort)?this._monthsShort[t.month()]:this._monthsShort[Nb.test(e)?"format":"standalone"][t.month()]:zs(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function sD(t,e,i){var s,r,n,o=t.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],s=0;s<12;++s)n=yn([2e3,s]),this._shortMonthsParse[s]=this.monthsShort(n,"").toLocaleLowerCase(),this._longMonthsParse[s]=this.months(n,"").toLocaleLowerCase();return i?e==="MMM"?(r=si.call(this._shortMonthsParse,o),r!==-1?r:null):(r=si.call(this._longMonthsParse,o),r!==-1?r:null):e==="MMM"?(r=si.call(this._shortMonthsParse,o),r!==-1?r:(r=si.call(this._longMonthsParse,o),r!==-1?r:null)):(r=si.call(this._longMonthsParse,o),r!==-1?r:(r=si.call(this._shortMonthsParse,o),r!==-1?r:null))}function nD(t,e,i){var s,r,n;if(this._monthsParseExact)return sD.call(this,t,e,i);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),s=0;s<12;s++){if(r=yn([2e3,s]),i&&!this._longMonthsParse[s]&&(this._longMonthsParse[s]=new RegExp("^"+this.months(r,"").replace(".","")+"$","i"),this._shortMonthsParse[s]=new RegExp("^"+this.monthsShort(r,"").replace(".","")+"$","i")),!i&&!this._monthsParse[s]&&(n="^"+this.months(r,"")+"|^"+this.monthsShort(r,""),this._monthsParse[s]=new RegExp(n.replace(".",""),"i")),i&&e==="MMMM"&&this._longMonthsParse[s].test(t))return s;if(i&&e==="MMM"&&this._shortMonthsParse[s].test(t))return s;if(!i&&this._monthsParse[s].test(t))return s}}function Lb(t,e){var i;if(!t.isValid())return t;if(typeof e=="string"){if(/^\d+$/.test(e))e=ut(e);else if(e=t.localeData().monthsParse(e),!Bn(e))return t}return i=Math.min(t.date(),Gu(t.year(),e)),t._d["set"+(t._isUTC?"UTC":"")+"Month"](e,i),t}function Vb(t){return t!=null?(Lb(this,t),de.updateOffset(this,!0),this):hu(this,"Month")}function rD(){return Gu(this.year(),this.month())}function oD(t){return this._monthsParseExact?(yt(this,"_monthsRegex")||Wb.call(this),t?this._monthsShortStrictRegex:this._monthsShortRegex):(yt(this,"_monthsShortRegex")||(this._monthsShortRegex=XE),this._monthsShortStrictRegex&&t?this._monthsShortStrictRegex:this._monthsShortRegex)}function aD(t){return this._monthsParseExact?(yt(this,"_monthsRegex")||Wb.call(this),t?this._monthsStrictRegex:this._monthsRegex):(yt(this,"_monthsRegex")||(this._monthsRegex=eD),this._monthsStrictRegex&&t?this._monthsStrictRegex:this._monthsRegex)}function Wb(){function t(o,a){return a.length-o.length}var e=[],i=[],s=[],r,n;for(r=0;r<12;r++)n=yn([2e3,r]),e.push(this.monthsShort(n,"")),i.push(this.months(n,"")),s.push(this.months(n,"")),s.push(this.monthsShort(n,""));for(e.sort(t),i.sort(t),s.sort(t),r=0;r<12;r++)e[r]=os(e[r]),i[r]=os(i[r]);for(r=0;r<24;r++)s[r]=os(s[r]);this._monthsRegex=new RegExp("^("+s.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+i.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+e.join("|")+")","i")}je("Y",0,0,function(){var t=this.year();return t<=9999?fn(t,4):"+"+t});je(0,["YY",2],0,function(){return this.year()%100});je(0,["YYYY",4],0,"year");je(0,["YYYYY",5],0,"year");je(0,["YYYYYY",6,!0],0,"year");Li("year","y");Vi("year",1);Me("Y",Hu);Me("YY",Ut,hs);Me("YYYY",am,om);Me("YYYYY",ju,Bu);Me("YYYYYY",ju,Bu);Ct(["YYYYY","YYYYYY"],Oi);Ct("YYYY",function(t,e){e[Oi]=t.length===2?de.parseTwoDigitYear(t):ut(t)});Ct("YY",function(t,e){e[Oi]=de.parseTwoDigitYear(t)});Ct("Y",function(t,e){e[Oi]=parseInt(t,10)});function il(t){return Fu(t)?366:365}de.parseTwoDigitYear=function(t){return ut(t)+(ut(t)>68?1900:2e3)};var Fb=ga("FullYear",!0);function lD(){return Fu(this.year())}function dD(t,e,i,s,r,n,o){var a;return t<100&&t>=0?(a=new Date(t+400,e,i,s,r,n,o),isFinite(a.getFullYear())&&a.setFullYear(t)):a=new Date(t,e,i,s,r,n,o),a}function yl(t){var e,i;return t<100&&t>=0?(i=Array.prototype.slice.call(arguments),i[0]=t+400,e=new Date(Date.UTC.apply(null,i)),isFinite(e.getUTCFullYear())&&e.setUTCFullYear(t)):e=new Date(Date.UTC.apply(null,arguments)),e}function mu(t,e,i){var s=7+e-i,r=(7+yl(t,0,s).getUTCDay()-e)%7;return-r+s-1}function Bb(t,e,i,s,r){var n=(7+i-s)%7,o=mu(t,s,r),a=1+7*(e-1)+n+o,l,c;return a<=0?(l=t-1,c=il(l)+a):a>il(t)?(l=t+1,c=a-il(t)):(l=t,c=a),{year:l,dayOfYear:c}}function _l(t,e,i){var s=mu(t.year(),e,i),r=Math.floor((t.dayOfYear()-s-1)/7)+1,n,o;return r<1?(o=t.year()-1,n=r+Vn(o,e,i)):r>Vn(t.year(),e,i)?(n=r-Vn(t.year(),e,i),o=t.year()+1):(o=t.year(),n=r),{week:n,year:o}}function Vn(t,e,i){var s=mu(t,e,i),r=mu(t+1,e,i);return(il(t)-s+r)/7}je("w",["ww",2],"wo","week");je("W",["WW",2],"Wo","isoWeek");Li("week","w");Li("isoWeek","W");Vi("week",5);Vi("isoWeek",5);Me("w",Ut);Me("ww",Ut,hs);Me("W",Ut);Me("WW",Ut,hs);Hl(["w","ww","W","WW"],function(t,e,i,s){e[s.substr(0,1)]=ut(t)});function uD(t){return _l(t,this._week.dow,this._week.doy).week}var cD={dow:0,doy:6};function hD(){return this._week.dow}function fD(){return this._week.doy}function mD(t){var e=this.localeData().week(this);return t==null?e:this.add((t-e)*7,"d")}function pD(t){var e=_l(this,1,4).week;return t==null?e:this.add((t-e)*7,"d")}je("d",0,"do","day");je("dd",0,0,function(t){return this.localeData().weekdaysMin(this,t)});je("ddd",0,0,function(t){return this.localeData().weekdaysShort(this,t)});je("dddd",0,0,function(t){return this.localeData().weekdays(this,t)});je("e",0,0,"weekday");je("E",0,0,"isoWeekday");Li("day","d");Li("weekday","e");Li("isoWeekday","E");Vi("day",11);Vi("weekday",11);Vi("isoWeekday",11);Me("d",Ut);Me("e",Ut);Me("E",Ut);Me("dd",function(t,e){return e.weekdaysMinRegex(t)});Me("ddd",function(t,e){return e.weekdaysShortRegex(t)});Me("dddd",function(t,e){return e.weekdaysRegex(t)});Hl(["dd","ddd","dddd"],function(t,e,i,s){var r=i._locale.weekdaysParse(t,s,i._strict);r!=null?e.d=r:ot(i).invalidWeekday=t});Hl(["d","e","E"],function(t,e,i,s){e[s]=ut(t)});function gD(t,e){return typeof t!="string"?t:isNaN(t)?(t=e.weekdaysParse(t),typeof t=="number"?t:null):parseInt(t,10)}function vD(t,e){return typeof t=="string"?e.weekdaysParse(t)%7||7:isNaN(t)?null:t}function lm(t,e){return t.slice(e,7).concat(t.slice(0,e))}var yD="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),zb="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),_D="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),bD=jl,wD=jl,SD=jl;function TD(t,e){var i=zs(this._weekdays)?this._weekdays:this._weekdays[t&&t!==!0&&this._weekdays.isFormat.test(e)?"format":"standalone"];return t===!0?lm(i,this._week.dow):t?i[t.day()]:i}function xD(t){return t===!0?lm(this._weekdaysShort,this._week.dow):t?this._weekdaysShort[t.day()]:this._weekdaysShort}function ID(t){return t===!0?lm(this._weekdaysMin,this._week.dow):t?this._weekdaysMin[t.day()]:this._weekdaysMin}function ED(t,e,i){var s,r,n,o=t.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],s=0;s<7;++s)n=yn([2e3,1]).day(s),this._minWeekdaysParse[s]=this.weekdaysMin(n,"").toLocaleLowerCase(),this._shortWeekdaysParse[s]=this.weekdaysShort(n,"").toLocaleLowerCase(),this._weekdaysParse[s]=this.weekdays(n,"").toLocaleLowerCase();return i?e==="dddd"?(r=si.call(this._weekdaysParse,o),r!==-1?r:null):e==="ddd"?(r=si.call(this._shortWeekdaysParse,o),r!==-1?r:null):(r=si.call(this._minWeekdaysParse,o),r!==-1?r:null):e==="dddd"?(r=si.call(this._weekdaysParse,o),r!==-1||(r=si.call(this._shortWeekdaysParse,o),r!==-1)?r:(r=si.call(this._minWeekdaysParse,o),r!==-1?r:null)):e==="ddd"?(r=si.call(this._shortWeekdaysParse,o),r!==-1||(r=si.call(this._weekdaysParse,o),r!==-1)?r:(r=si.call(this._minWeekdaysParse,o),r!==-1?r:null)):(r=si.call(this._minWeekdaysParse,o),r!==-1||(r=si.call(this._weekdaysParse,o),r!==-1)?r:(r=si.call(this._shortWeekdaysParse,o),r!==-1?r:null))}function DD(t,e,i){var s,r,n;if(this._weekdaysParseExact)return ED.call(this,t,e,i);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),s=0;s<7;s++){if(r=yn([2e3,1]).day(s),i&&!this._fullWeekdaysParse[s]&&(this._fullWeekdaysParse[s]=new RegExp("^"+this.weekdays(r,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[s]=new RegExp("^"+this.weekdaysShort(r,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[s]=new RegExp("^"+this.weekdaysMin(r,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[s]||(n="^"+this.weekdays(r,"")+"|^"+this.weekdaysShort(r,"")+"|^"+this.weekdaysMin(r,""),this._weekdaysParse[s]=new RegExp(n.replace(".",""),"i")),i&&e==="dddd"&&this._fullWeekdaysParse[s].test(t))return s;if(i&&e==="ddd"&&this._shortWeekdaysParse[s].test(t))return s;if(i&&e==="dd"&&this._minWeekdaysParse[s].test(t))return s;if(!i&&this._weekdaysParse[s].test(t))return s}}function kD(t){if(!this.isValid())return t!=null?this:NaN;var e=this._isUTC?this._d.getUTCDay():this._d.getDay();return t!=null?(t=gD(t,this.localeData()),this.add(t-e,"d")):e}function CD(t){if(!this.isValid())return t!=null?this:NaN;var e=(this.day()+7-this.localeData()._week.dow)%7;return t==null?e:this.add(t-e,"d")}function PD(t){if(!this.isValid())return t!=null?this:NaN;if(t!=null){var e=vD(t,this.localeData());return this.day(this.day()%7?e:e-7)}else return this.day()||7}function AD(t){return this._weekdaysParseExact?(yt(this,"_weekdaysRegex")||dm.call(this),t?this._weekdaysStrictRegex:this._weekdaysRegex):(yt(this,"_weekdaysRegex")||(this._weekdaysRegex=bD),this._weekdaysStrictRegex&&t?this._weekdaysStrictRegex:this._weekdaysRegex)}function RD(t){return this._weekdaysParseExact?(yt(this,"_weekdaysRegex")||dm.call(this),t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(yt(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=wD),this._weekdaysShortStrictRegex&&t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function MD(t){return this._weekdaysParseExact?(yt(this,"_weekdaysRegex")||dm.call(this),t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(yt(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=SD),this._weekdaysMinStrictRegex&&t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function dm(){function t(f,v){return v.length-f.length}var e=[],i=[],s=[],r=[],n,o,a,l,c;for(n=0;n<7;n++)o=yn([2e3,1]).day(n),a=os(this.weekdaysMin(o,"")),l=os(this.weekdaysShort(o,"")),c=os(this.weekdays(o,"")),e.push(a),i.push(l),s.push(c),r.push(a),r.push(l),r.push(c);e.sort(t),i.sort(t),s.sort(t),r.sort(t),this._weekdaysRegex=new RegExp("^("+r.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+i.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+e.join("|")+")","i")}function um(){return this.hours()%12||12}function OD(){return this.hours()||24}je("H",["HH",2],0,"hour");je("h",["hh",2],0,um);je("k",["kk",2],0,OD);je("hmm",0,0,function(){return""+um.apply(this)+fn(this.minutes(),2)});je("hmmss",0,0,function(){return""+um.apply(this)+fn(this.minutes(),2)+fn(this.seconds(),2)});je("Hmm",0,0,function(){return""+this.hours()+fn(this.minutes(),2)});je("Hmmss",0,0,function(){return""+this.hours()+fn(this.minutes(),2)+fn(this.seconds(),2)});function jb(t,e){je(t,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)})}jb("a",!0);jb("A",!1);Li("hour","h");Vi("hour",13);function Hb(t,e){return e._meridiemParse}Me("a",Hb);Me("A",Hb);Me("H",Ut);Me("h",Ut);Me("k",Ut);Me("HH",Ut,hs);Me("hh",Ut,hs);Me("kk",Ut,hs);Me("hmm",Mb);Me("hmmss",Ob);Me("Hmm",Mb);Me("Hmmss",Ob);Ct(["H","HH"],ci);Ct(["k","kk"],function(t,e,i){var s=ut(t);e[ci]=s===24?0:s});Ct(["a","A"],function(t,e,i){i._isPm=i._locale.isPM(t),i._meridiem=t});Ct(["h","hh"],function(t,e,i){e[ci]=ut(t),ot(i).bigHour=!0});Ct("hmm",function(t,e,i){var s=t.length-2;e[ci]=ut(t.substr(0,s)),e[Ws]=ut(t.substr(s)),ot(i).bigHour=!0});Ct("hmmss",function(t,e,i){var s=t.length-4,r=t.length-2;e[ci]=ut(t.substr(0,s)),e[Ws]=ut(t.substr(s,2)),e[On]=ut(t.substr(r)),ot(i).bigHour=!0});Ct("Hmm",function(t,e,i){var s=t.length-2;e[ci]=ut(t.substr(0,s)),e[Ws]=ut(t.substr(s))});Ct("Hmmss",function(t,e,i){var s=t.length-4,r=t.length-2;e[ci]=ut(t.substr(0,s)),e[Ws]=ut(t.substr(s,2)),e[On]=ut(t.substr(r))});function $D(t){return(t+"").toLowerCase().charAt(0)==="p"}var ND=/[ap]\.?m?\.?/i,LD=ga("Hours",!0);function VD(t,e,i){return t>11?i?"pm":"PM":i?"am":"AM"}var Ub={calendar:DE,longDateFormat:AE,invalidDate:ME,ordinal:$E,dayOfMonthOrdinalParse:NE,relativeTime:VE,months:ZE,monthsShort:$b,week:cD,weekdays:yD,weekdaysMin:_D,weekdaysShort:zb,meridiemParse:ND},Kt={},Fa={},bl;function WD(t,e){var i,s=Math.min(t.length,e.length);for(i=0;i<s;i+=1)if(t[i]!==e[i])return i;return s}function Wg(t){return t&&t.toLowerCase().replace("_","-")}function FD(t){for(var e=0,i,s,r,n;e<t.length;){for(n=Wg(t[e]).split("-"),i=n.length,s=Wg(t[e+1]),s=s?s.split("-"):null;i>0;){if(r=Yu(n.slice(0,i).join("-")),r)return r;if(s&&s.length>=i&&WD(n,s)>=i-1)break;i--}e++}return bl}function Yu(t){var e=null,i;if(Kt[t]===void 0&&typeof module<"u"&&module&&module.exports)try{e=bl._abbr,i=require,i("./locale/"+t),hr(e)}catch{Kt[t]=null}return Kt[t]}function hr(t,e){var i;return t&&(Qi(e)?i=Gn(t):i=cm(t,e),i?bl=i:typeof console<"u"&&console.warn&&console.warn("Locale "+t+" not found. Did you forget to load it?")),bl._abbr}function cm(t,e){if(e!==null){var i,s=Ub;if(e.abbr=t,Kt[t]!=null)Db("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),s=Kt[t]._config;else if(e.parentLocale!=null)if(Kt[e.parentLocale]!=null)s=Kt[e.parentLocale]._config;else if(i=Yu(e.parentLocale),i!=null)s=i._config;else return Fa[e.parentLocale]||(Fa[e.parentLocale]=[]),Fa[e.parentLocale].push({name:t,config:e}),null;return Kt[t]=new sm(of(s,e)),Fa[t]&&Fa[t].forEach(function(r){cm(r.name,r.config)}),hr(t),Kt[t]}else return delete Kt[t],null}function BD(t,e){if(e!=null){var i,s,r=Ub;Kt[t]!=null&&Kt[t].parentLocale!=null?Kt[t].set(of(Kt[t]._config,e)):(s=Yu(t),s!=null&&(r=s._config),e=of(r,e),s==null&&(e.abbr=t),i=new sm(e),i.parentLocale=Kt[t],Kt[t]=i),hr(t)}else Kt[t]!=null&&(Kt[t].parentLocale!=null?(Kt[t]=Kt[t].parentLocale,t===hr()&&hr(t)):Kt[t]!=null&&delete Kt[t]);return Kt[t]}function Gn(t){var e;if(t&&t._locale&&t._locale._abbr&&(t=t._locale._abbr),!t)return bl;if(!zs(t)){if(e=Yu(t),e)return e;t=[t]}return FD(t)}function zD(){return af(Kt)}function hm(t){var e,i=t._a;return i&&ot(t).overflow===-2&&(e=i[Mn]<0||i[Mn]>11?Mn:i[rn]<1||i[rn]>Gu(i[Oi],i[Mn])?rn:i[ci]<0||i[ci]>24||i[ci]===24&&(i[Ws]!==0||i[On]!==0||i[Ur]!==0)?ci:i[Ws]<0||i[Ws]>59?Ws:i[On]<0||i[On]>59?On:i[Ur]<0||i[Ur]>999?Ur:-1,ot(t)._overflowDayOfYear&&(e<Oi||e>rn)&&(e=rn),ot(t)._overflowWeeks&&e===-1&&(e=KE),ot(t)._overflowWeekday&&e===-1&&(e=JE),ot(t).overflow=e),t}var jD=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,HD=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,UD=/Z|[+-]\d\d(?::?\d\d)?/,bd=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],th=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],GD=/^\/?Date\((-?\d+)/i,YD=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,qD={UT:0,GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function Gb(t){var e,i,s=t._i,r=jD.exec(s)||HD.exec(s),n,o,a,l;if(r){for(ot(t).iso=!0,e=0,i=bd.length;e<i;e++)if(bd[e][1].exec(r[1])){o=bd[e][0],n=bd[e][2]!==!1;break}if(o==null){t._isValid=!1;return}if(r[3]){for(e=0,i=th.length;e<i;e++)if(th[e][1].exec(r[3])){a=(r[2]||" ")+th[e][0];break}if(a==null){t._isValid=!1;return}}if(!n&&a!=null){t._isValid=!1;return}if(r[4])if(UD.exec(r[4]))l="Z";else{t._isValid=!1;return}t._f=o+(a||"")+(l||""),mm(t)}else t._isValid=!1}function KD(t,e,i,s,r,n){var o=[JD(t),$b.indexOf(e),parseInt(i,10),parseInt(s,10),parseInt(r,10)];return n&&o.push(parseInt(n,10)),o}function JD(t){var e=parseInt(t,10);return e<=49?2e3+e:e<=999?1900+e:e}function QD(t){return t.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function ZD(t,e,i){if(t){var s=zb.indexOf(t),r=new Date(e[0],e[1],e[2]).getDay();if(s!==r)return ot(i).weekdayMismatch=!0,i._isValid=!1,!1}return!0}function XD(t,e,i){if(t)return qD[t];if(e)return 0;var s=parseInt(i,10),r=s%100,n=(s-r)/100;return n*60+r}function Yb(t){var e=YD.exec(QD(t._i)),i;if(e){if(i=KD(e[4],e[3],e[2],e[5],e[6],e[7]),!ZD(e[1],i,t))return;t._a=i,t._tzm=XD(e[8],e[9],e[10]),t._d=yl.apply(null,t._a),t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),ot(t).rfc2822=!0}else t._isValid=!1}function ek(t){var e=GD.exec(t._i);if(e!==null){t._d=new Date(+e[1]);return}if(Gb(t),t._isValid===!1)delete t._isValid;else return;if(Yb(t),t._isValid===!1)delete t._isValid;else return;t._strict?t._isValid=!1:de.createFromInputFallback(t)}de.createFromInputFallback=Ds("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(t){t._d=new Date(t._i+(t._useUTC?" UTC":""))});function Oo(t,e,i){return t??e??i}function tk(t){var e=new Date(de.now());return t._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}function fm(t){var e,i,s=[],r,n,o;if(!t._d){for(r=tk(t),t._w&&t._a[rn]==null&&t._a[Mn]==null&&ik(t),t._dayOfYear!=null&&(o=Oo(t._a[Oi],r[Oi]),(t._dayOfYear>il(o)||t._dayOfYear===0)&&(ot(t)._overflowDayOfYear=!0),i=yl(o,0,t._dayOfYear),t._a[Mn]=i.getUTCMonth(),t._a[rn]=i.getUTCDate()),e=0;e<3&&t._a[e]==null;++e)t._a[e]=s[e]=r[e];for(;e<7;e++)t._a[e]=s[e]=t._a[e]==null?e===2?1:0:t._a[e];t._a[ci]===24&&t._a[Ws]===0&&t._a[On]===0&&t._a[Ur]===0&&(t._nextDay=!0,t._a[ci]=0),t._d=(t._useUTC?yl:dD).apply(null,s),n=t._useUTC?t._d.getUTCDay():t._d.getDay(),t._tzm!=null&&t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),t._nextDay&&(t._a[ci]=24),t._w&&typeof t._w.d<"u"&&t._w.d!==n&&(ot(t).weekdayMismatch=!0)}}function ik(t){var e,i,s,r,n,o,a,l,c;e=t._w,e.GG!=null||e.W!=null||e.E!=null?(n=1,o=4,i=Oo(e.GG,t._a[Oi],_l(Ht(),1,4).year),s=Oo(e.W,1),r=Oo(e.E,1),(r<1||r>7)&&(l=!0)):(n=t._locale._week.dow,o=t._locale._week.doy,c=_l(Ht(),n,o),i=Oo(e.gg,t._a[Oi],c.year),s=Oo(e.w,c.week),e.d!=null?(r=e.d,(r<0||r>6)&&(l=!0)):e.e!=null?(r=e.e+n,(e.e<0||e.e>6)&&(l=!0)):r=n),s<1||s>Vn(i,n,o)?ot(t)._overflowWeeks=!0:l!=null?ot(t)._overflowWeekday=!0:(a=Bb(i,s,r,n,o),t._a[Oi]=a.year,t._dayOfYear=a.dayOfYear)}de.ISO_8601=function(){};de.RFC_2822=function(){};function mm(t){if(t._f===de.ISO_8601){Gb(t);return}if(t._f===de.RFC_2822){Yb(t);return}t._a=[],ot(t).empty=!0;var e=""+t._i,i,s,r,n,o,a=e.length,l=0,c;for(r=kb(t._f,t._locale).match(nm)||[],i=0;i<r.length;i++)n=r[i],s=(e.match(GE(n,t))||[])[0],s&&(o=e.substr(0,e.indexOf(s)),o.length>0&&ot(t).unusedInput.push(o),e=e.slice(e.indexOf(s)+s.length),l+=s.length),Ko[n]?(s?ot(t).empty=!1:ot(t).unusedTokens.push(n),qE(n,s,t)):t._strict&&!s&&ot(t).unusedTokens.push(n);ot(t).charsLeftOver=a-l,e.length>0&&ot(t).unusedInput.push(e),t._a[ci]<=12&&ot(t).bigHour===!0&&t._a[ci]>0&&(ot(t).bigHour=void 0),ot(t).parsedDateParts=t._a.slice(0),ot(t).meridiem=t._meridiem,t._a[ci]=sk(t._locale,t._a[ci],t._meridiem),c=ot(t).era,c!==null&&(t._a[Oi]=t._locale.erasConvertYear(c,t._a[Oi])),fm(t),hm(t)}function sk(t,e,i){var s;return i==null?e:t.meridiemHour!=null?t.meridiemHour(e,i):(t.isPM!=null&&(s=t.isPM(i),s&&e<12&&(e+=12),!s&&e===12&&(e=0)),e)}function nk(t){var e,i,s,r,n,o,a=!1;if(t._f.length===0){ot(t).invalidFormat=!0,t._d=new Date(NaN);return}for(r=0;r<t._f.length;r++)n=0,o=!1,e=im({},t),t._useUTC!=null&&(e._useUTC=t._useUTC),e._f=t._f[r],mm(e),tm(e)&&(o=!0),n+=ot(e).charsLeftOver,n+=ot(e).unusedTokens.length*10,ot(e).score=n,a?n<s&&(s=n,i=e):(s==null||n<s||o)&&(s=n,i=e,o&&(a=!0));lr(t,i||e)}function rk(t){if(!t._d){var e=rm(t._i),i=e.day===void 0?e.date:e.day;t._a=Ib([e.year,e.month,i,e.hour,e.minute,e.second,e.millisecond],function(s){return s&&parseInt(s,10)}),fm(t)}}function ok(t){var e=new zl(hm(qb(t)));return e._nextDay&&(e.add(1,"d"),e._nextDay=void 0),e}function qb(t){var e=t._i,i=t._f;return t._locale=t._locale||Gn(t._l),e===null||i===void 0&&e===""?Wu({nullInput:!0}):(typeof e=="string"&&(t._i=e=t._locale.preparse(e)),js(e)?new zl(hm(e)):(Bl(e)?t._d=e:zs(i)?nk(t):i?mm(t):ak(t),tm(t)||(t._d=null),t))}function ak(t){var e=t._i;Qi(e)?t._d=new Date(de.now()):Bl(e)?t._d=new Date(e.valueOf()):typeof e=="string"?ek(t):zs(e)?(t._a=Ib(e.slice(0),function(i){return parseInt(i,10)}),fm(t)):Qr(e)?rk(t):Bn(e)?t._d=new Date(e):de.createFromInputFallback(t)}function Kb(t,e,i,s,r){var n={};return(e===!0||e===!1)&&(s=e,e=void 0),(i===!0||i===!1)&&(s=i,i=void 0),(Qr(t)&&em(t)||zs(t)&&t.length===0)&&(t=void 0),n._isAMomentObject=!0,n._useUTC=n._isUTC=r,n._l=i,n._i=t,n._f=e,n._strict=s,ok(n)}function Ht(t,e,i,s){return Kb(t,e,i,s,!1)}var lk=Ds("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=Ht.apply(null,arguments);return this.isValid()&&t.isValid()?t<this?this:t:Wu()}),dk=Ds("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=Ht.apply(null,arguments);return this.isValid()&&t.isValid()?t>this?this:t:Wu()});function Jb(t,e){var i,s;if(e.length===1&&zs(e[0])&&(e=e[0]),!e.length)return Ht();for(i=e[0],s=1;s<e.length;++s)(!e[s].isValid()||e[s][t](i))&&(i=e[s]);return i}function uk(){var t=[].slice.call(arguments,0);return Jb("isBefore",t)}function ck(){var t=[].slice.call(arguments,0);return Jb("isAfter",t)}var hk=function(){return Date.now?Date.now():+new Date},Ba=["year","quarter","month","week","day","hour","minute","second","millisecond"];function fk(t){var e,i=!1,s;for(e in t)if(yt(t,e)&&!(si.call(Ba,e)!==-1&&(t[e]==null||!isNaN(t[e]))))return!1;for(s=0;s<Ba.length;++s)if(t[Ba[s]]){if(i)return!1;parseFloat(t[Ba[s]])!==ut(t[Ba[s]])&&(i=!0)}return!0}function mk(){return this._isValid}function pk(){return Ks(NaN)}function qu(t){var e=rm(t),i=e.year||0,s=e.quarter||0,r=e.month||0,n=e.week||e.isoWeek||0,o=e.day||0,a=e.hour||0,l=e.minute||0,c=e.second||0,f=e.millisecond||0;this._isValid=fk(e),this._milliseconds=+f+c*1e3+l*6e4+a*1e3*60*60,this._days=+o+n*7,this._months=+r+s*3+i*12,this._data={},this._locale=Gn(),this._bubble()}function Yd(t){return t instanceof qu}function df(t){return t<0?Math.round(-1*t)*-1:Math.round(t)}function gk(t,e,i){var s=Math.min(t.length,e.length),r=Math.abs(t.length-e.length),n=0,o;for(o=0;o<s;o++)ut(t[o])!==ut(e[o])&&n++;return n+r}function Qb(t,e){je(t,0,0,function(){var i=this.utcOffset(),s="+";return i<0&&(i=-i,s="-"),s+fn(~~(i/60),2)+e+fn(~~i%60,2)})}Qb("Z",":");Qb("ZZ","");Me("Z",Uu);Me("ZZ",Uu);Ct(["Z","ZZ"],function(t,e,i){i._useUTC=!0,i._tzm=pm(Uu,t)});var vk=/([\+\-]|\d\d)/gi;function pm(t,e){var i=(e||"").match(t),s,r,n;return i===null?null:(s=i[i.length-1]||[],r=(s+"").match(vk)||["-",0,0],n=+(r[1]*60)+ut(r[2]),n===0?0:r[0]==="+"?n:-n)}function gm(t,e){var i,s;return e._isUTC?(i=e.clone(),s=(js(t)||Bl(t)?t.valueOf():Ht(t).valueOf())-i.valueOf(),i._d.setTime(i._d.valueOf()+s),de.updateOffset(i,!1),i):Ht(t).local()}function uf(t){return-Math.round(t._d.getTimezoneOffset())}de.updateOffset=function(){};function yk(t,e,i){var s=this._offset||0,r;if(!this.isValid())return t!=null?this:NaN;if(t!=null){if(typeof t=="string"){if(t=pm(Uu,t),t===null)return this}else Math.abs(t)<16&&!i&&(t=t*60);return!this._isUTC&&e&&(r=uf(this)),this._offset=t,this._isUTC=!0,r!=null&&this.add(r,"m"),s!==t&&(!e||this._changeInProgress?ew(this,Ks(t-s,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,de.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?s:uf(this)}function _k(t,e){return t!=null?(typeof t!="string"&&(t=-t),this.utcOffset(t,e),this):-this.utcOffset()}function bk(t){return this.utcOffset(0,t)}function wk(t){return this._isUTC&&(this.utcOffset(0,t),this._isUTC=!1,t&&this.subtract(uf(this),"m")),this}function Sk(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var t=pm(HE,this._i);t!=null?this.utcOffset(t):this.utcOffset(0,!0)}return this}function Tk(t){return this.isValid()?(t=t?Ht(t).utcOffset():0,(this.utcOffset()-t)%60===0):!1}function xk(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Ik(){if(!Qi(this._isDSTShifted))return this._isDSTShifted;var t={},e;return im(t,this),t=qb(t),t._a?(e=t._isUTC?yn(t._a):Ht(t._a),this._isDSTShifted=this.isValid()&&gk(t._a,e.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function Ek(){return this.isValid()?!this._isUTC:!1}function Dk(){return this.isValid()?this._isUTC:!1}function Zb(){return this.isValid()?this._isUTC&&this._offset===0:!1}var kk=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,Ck=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Ks(t,e){var i=t,s=null,r,n,o;return Yd(t)?i={ms:t._milliseconds,d:t._days,M:t._months}:Bn(t)||!isNaN(+t)?(i={},e?i[e]=+t:i.milliseconds=+t):(s=kk.exec(t))?(r=s[1]==="-"?-1:1,i={y:0,d:ut(s[rn])*r,h:ut(s[ci])*r,m:ut(s[Ws])*r,s:ut(s[On])*r,ms:ut(df(s[Ur]*1e3))*r}):(s=Ck.exec(t))?(r=s[1]==="-"?-1:1,i={y:Br(s[2],r),M:Br(s[3],r),w:Br(s[4],r),d:Br(s[5],r),h:Br(s[6],r),m:Br(s[7],r),s:Br(s[8],r)}):i==null?i={}:typeof i=="object"&&("from"in i||"to"in i)&&(o=Pk(Ht(i.from),Ht(i.to)),i={},i.ms=o.milliseconds,i.M=o.months),n=new qu(i),Yd(t)&&yt(t,"_locale")&&(n._locale=t._locale),Yd(t)&&yt(t,"_isValid")&&(n._isValid=t._isValid),n}Ks.fn=qu.prototype;Ks.invalid=pk;function Br(t,e){var i=t&&parseFloat(t.replace(",","."));return(isNaN(i)?0:i)*e}function Fg(t,e){var i={};return i.months=e.month()-t.month()+(e.year()-t.year())*12,t.clone().add(i.months,"M").isAfter(e)&&--i.months,i.milliseconds=+e-+t.clone().add(i.months,"M"),i}function Pk(t,e){var i;return t.isValid()&&e.isValid()?(e=gm(e,t),t.isBefore(e)?i=Fg(t,e):(i=Fg(e,t),i.milliseconds=-i.milliseconds,i.months=-i.months),i):{milliseconds:0,months:0}}function Xb(t,e){return function(i,s){var r,n;return s!==null&&!isNaN(+s)&&(Db(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),n=i,i=s,s=n),r=Ks(i,s),ew(this,r,t),this}}function ew(t,e,i,s){var r=e._milliseconds,n=df(e._days),o=df(e._months);t.isValid()&&(s=s??!0,o&&Lb(t,hu(t,"Month")+o*i),n&&Pb(t,"Date",hu(t,"Date")+n*i),r&&t._d.setTime(t._d.valueOf()+r*i),s&&de.updateOffset(t,n||o))}var Ak=Xb(1,"add"),Rk=Xb(-1,"subtract");function tw(t){return typeof t=="string"||t instanceof String}function Mk(t){return js(t)||Bl(t)||tw(t)||Bn(t)||$k(t)||Ok(t)||t===null||t===void 0}function Ok(t){var e=Qr(t)&&!em(t),i=!1,s=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],r,n;for(r=0;r<s.length;r+=1)n=s[r],i=i||yt(t,n);return e&&i}function $k(t){var e=zs(t),i=!1;return e&&(i=t.filter(function(s){return!Bn(s)&&tw(t)}).length===0),e&&i}function Nk(t){var e=Qr(t)&&!em(t),i=!1,s=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],r,n;for(r=0;r<s.length;r+=1)n=s[r],i=i||yt(t,n);return e&&i}function Lk(t,e){var i=t.diff(e,"days",!0);return i<-6?"sameElse":i<-1?"lastWeek":i<0?"lastDay":i<1?"sameDay":i<2?"nextDay":i<7?"nextWeek":"sameElse"}function Vk(t,e){arguments.length===1&&(arguments[0]?Mk(arguments[0])?(t=arguments[0],e=void 0):Nk(arguments[0])&&(e=arguments[0],t=void 0):(t=void 0,e=void 0));var i=t||Ht(),s=gm(i,this).startOf("day"),r=de.calendarFormat(this,s)||"sameElse",n=e&&(_n(e[r])?e[r].call(this,i):e[r]);return this.format(n||this.localeData().calendar(r,this,Ht(i)))}function Wk(){return new zl(this)}function Fk(t,e){var i=js(t)?t:Ht(t);return this.isValid()&&i.isValid()?(e=ks(e)||"millisecond",e==="millisecond"?this.valueOf()>i.valueOf():i.valueOf()<this.clone().startOf(e).valueOf()):!1}function Bk(t,e){var i=js(t)?t:Ht(t);return this.isValid()&&i.isValid()?(e=ks(e)||"millisecond",e==="millisecond"?this.valueOf()<i.valueOf():this.clone().endOf(e).valueOf()<i.valueOf()):!1}function zk(t,e,i,s){var r=js(t)?t:Ht(t),n=js(e)?e:Ht(e);return this.isValid()&&r.isValid()&&n.isValid()?(s=s||"()",(s[0]==="("?this.isAfter(r,i):!this.isBefore(r,i))&&(s[1]===")"?this.isBefore(n,i):!this.isAfter(n,i))):!1}function jk(t,e){var i=js(t)?t:Ht(t),s;return this.isValid()&&i.isValid()?(e=ks(e)||"millisecond",e==="millisecond"?this.valueOf()===i.valueOf():(s=i.valueOf(),this.clone().startOf(e).valueOf()<=s&&s<=this.clone().endOf(e).valueOf())):!1}function Hk(t,e){return this.isSame(t,e)||this.isAfter(t,e)}function Uk(t,e){return this.isSame(t,e)||this.isBefore(t,e)}function Gk(t,e,i){var s,r,n;if(!this.isValid())return NaN;if(s=gm(t,this),!s.isValid())return NaN;switch(r=(s.utcOffset()-this.utcOffset())*6e4,e=ks(e),e){case"year":n=qd(this,s)/12;break;case"month":n=qd(this,s);break;case"quarter":n=qd(this,s)/3;break;case"second":n=(this-s)/1e3;break;case"minute":n=(this-s)/6e4;break;case"hour":n=(this-s)/36e5;break;case"day":n=(this-s-r)/864e5;break;case"week":n=(this-s-r)/6048e5;break;default:n=this-s}return i?n:vs(n)}function qd(t,e){if(t.date()<e.date())return-qd(e,t);var i=(e.year()-t.year())*12+(e.month()-t.month()),s=t.clone().add(i,"months"),r,n;return e-s<0?(r=t.clone().add(i-1,"months"),n=(e-s)/(s-r)):(r=t.clone().add(i+1,"months"),n=(e-s)/(r-s)),-(i+n)||0}de.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";de.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function Yk(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function qk(t){if(!this.isValid())return null;var e=t!==!0,i=e?this.clone().utc():this;return i.year()<0||i.year()>9999?Gd(i,e?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):_n(Date.prototype.toISOString)?e?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",Gd(i,"Z")):Gd(i,e?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function Kk(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var t="moment",e="",i,s,r,n;return this.isLocal()||(t=this.utcOffset()===0?"moment.utc":"moment.parseZone",e="Z"),i="["+t+'("]',s=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",r="-MM-DD[T]HH:mm:ss.SSS",n=e+'[")]',this.format(i+s+r+n)}function Jk(t){t||(t=this.isUtc()?de.defaultFormatUtc:de.defaultFormat);var e=Gd(this,t);return this.localeData().postformat(e)}function Qk(t,e){return this.isValid()&&(js(t)&&t.isValid()||Ht(t).isValid())?Ks({to:this,from:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function Zk(t){return this.from(Ht(),t)}function Xk(t,e){return this.isValid()&&(js(t)&&t.isValid()||Ht(t).isValid())?Ks({from:this,to:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function eC(t){return this.to(Ht(),t)}function iw(t){var e;return t===void 0?this._locale._abbr:(e=Gn(t),e!=null&&(this._locale=e),this)}var sw=Ds("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(t){return t===void 0?this.localeData():this.locale(t)});function nw(){return this._locale}var pu=1e3,Jo=60*pu,gu=60*Jo,rw=(365*400+97)*24*gu;function Qo(t,e){return(t%e+e)%e}function ow(t,e,i){return t<100&&t>=0?new Date(t+400,e,i)-rw:new Date(t,e,i).valueOf()}function aw(t,e,i){return t<100&&t>=0?Date.UTC(t+400,e,i)-rw:Date.UTC(t,e,i)}function tC(t){var e,i;if(t=ks(t),t===void 0||t==="millisecond"||!this.isValid())return this;switch(i=this._isUTC?aw:ow,t){case"year":e=i(this.year(),0,1);break;case"quarter":e=i(this.year(),this.month()-this.month()%3,1);break;case"month":e=i(this.year(),this.month(),1);break;case"week":e=i(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":e=i(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":e=i(this.year(),this.month(),this.date());break;case"hour":e=this._d.valueOf(),e-=Qo(e+(this._isUTC?0:this.utcOffset()*Jo),gu);break;case"minute":e=this._d.valueOf(),e-=Qo(e,Jo);break;case"second":e=this._d.valueOf(),e-=Qo(e,pu);break}return this._d.setTime(e),de.updateOffset(this,!0),this}function iC(t){var e,i;if(t=ks(t),t===void 0||t==="millisecond"||!this.isValid())return this;switch(i=this._isUTC?aw:ow,t){case"year":e=i(this.year()+1,0,1)-1;break;case"quarter":e=i(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":e=i(this.year(),this.month()+1,1)-1;break;case"week":e=i(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":e=i(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":e=i(this.year(),this.month(),this.date()+1)-1;break;case"hour":e=this._d.valueOf(),e+=gu-Qo(e+(this._isUTC?0:this.utcOffset()*Jo),gu)-1;break;case"minute":e=this._d.valueOf(),e+=Jo-Qo(e,Jo)-1;break;case"second":e=this._d.valueOf(),e+=pu-Qo(e,pu)-1;break}return this._d.setTime(e),de.updateOffset(this,!0),this}function sC(){return this._d.valueOf()-(this._offset||0)*6e4}function nC(){return Math.floor(this.valueOf()/1e3)}function rC(){return new Date(this.valueOf())}function oC(){var t=this;return[t.year(),t.month(),t.date(),t.hour(),t.minute(),t.second(),t.millisecond()]}function aC(){var t=this;return{years:t.year(),months:t.month(),date:t.date(),hours:t.hours(),minutes:t.minutes(),seconds:t.seconds(),milliseconds:t.milliseconds()}}function lC(){return this.isValid()?this.toISOString():null}function dC(){return tm(this)}function uC(){return lr({},ot(this))}function cC(){return ot(this).overflow}function hC(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}je("N",0,0,"eraAbbr");je("NN",0,0,"eraAbbr");je("NNN",0,0,"eraAbbr");je("NNNN",0,0,"eraName");je("NNNNN",0,0,"eraNarrow");je("y",["y",1],"yo","eraYear");je("y",["yy",2],0,"eraYear");je("y",["yyy",3],0,"eraYear");je("y",["yyyy",4],0,"eraYear");Me("N",vm);Me("NN",vm);Me("NNN",vm);Me("NNNN",TC);Me("NNNNN",xC);Ct(["N","NN","NNN","NNNN","NNNNN"],function(t,e,i,s){var r=i._locale.erasParse(t,s,i._strict);r?ot(i).era=r:ot(i).invalidEra=t});Me("y",va);Me("yy",va);Me("yyy",va);Me("yyyy",va);Me("yo",IC);Ct(["y","yy","yyy","yyyy"],Oi);Ct(["yo"],function(t,e,i,s){var r;i._locale._eraYearOrdinalRegex&&(r=t.match(i._locale._eraYearOrdinalRegex)),i._locale.eraYearOrdinalParse?e[Oi]=i._locale.eraYearOrdinalParse(t,r):e[Oi]=parseInt(t,10)});function fC(t,e){var i,s,r,n=this._eras||Gn("en")._eras;for(i=0,s=n.length;i<s;++i){switch(typeof n[i].since){case"string":r=de(n[i].since).startOf("day"),n[i].since=r.valueOf();break}switch(typeof n[i].until){case"undefined":n[i].until=1/0;break;case"string":r=de(n[i].until).startOf("day").valueOf(),n[i].until=r.valueOf();break}}return n}function mC(t,e,i){var s,r,n=this.eras(),o,a,l;for(t=t.toUpperCase(),s=0,r=n.length;s<r;++s)if(o=n[s].name.toUpperCase(),a=n[s].abbr.toUpperCase(),l=n[s].narrow.toUpperCase(),i)switch(e){case"N":case"NN":case"NNN":if(a===t)return n[s];break;case"NNNN":if(o===t)return n[s];break;case"NNNNN":if(l===t)return n[s];break}else if([o,a,l].indexOf(t)>=0)return n[s]}function pC(t,e){var i=t.since<=t.until?1:-1;return e===void 0?de(t.since).year():de(t.since).year()+(e-t.offset)*i}function gC(){var t,e,i,s=this.localeData().eras();for(t=0,e=s.length;t<e;++t)if(i=this.clone().startOf("day").valueOf(),s[t].since<=i&&i<=s[t].until||s[t].until<=i&&i<=s[t].since)return s[t].name;return""}function vC(){var t,e,i,s=this.localeData().eras();for(t=0,e=s.length;t<e;++t)if(i=this.clone().startOf("day").valueOf(),s[t].since<=i&&i<=s[t].until||s[t].until<=i&&i<=s[t].since)return s[t].narrow;return""}function yC(){var t,e,i,s=this.localeData().eras();for(t=0,e=s.length;t<e;++t)if(i=this.clone().startOf("day").valueOf(),s[t].since<=i&&i<=s[t].until||s[t].until<=i&&i<=s[t].since)return s[t].abbr;return""}function _C(){var t,e,i,s,r=this.localeData().eras();for(t=0,e=r.length;t<e;++t)if(i=r[t].since<=r[t].until?1:-1,s=this.clone().startOf("day").valueOf(),r[t].since<=s&&s<=r[t].until||r[t].until<=s&&s<=r[t].since)return(this.year()-de(r[t].since).year())*i+r[t].offset;return this.year()}function bC(t){return yt(this,"_erasNameRegex")||ym.call(this),t?this._erasNameRegex:this._erasRegex}function wC(t){return yt(this,"_erasAbbrRegex")||ym.call(this),t?this._erasAbbrRegex:this._erasRegex}function SC(t){return yt(this,"_erasNarrowRegex")||ym.call(this),t?this._erasNarrowRegex:this._erasRegex}function vm(t,e){return e.erasAbbrRegex(t)}function TC(t,e){return e.erasNameRegex(t)}function xC(t,e){return e.erasNarrowRegex(t)}function IC(t,e){return e._eraYearOrdinalRegex||va}function ym(){var t=[],e=[],i=[],s=[],r,n,o=this.eras();for(r=0,n=o.length;r<n;++r)e.push(os(o[r].name)),t.push(os(o[r].abbr)),i.push(os(o[r].narrow)),s.push(os(o[r].name)),s.push(os(o[r].abbr)),s.push(os(o[r].narrow));this._erasRegex=new RegExp("^("+s.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+e.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+t.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+i.join("|")+")","i")}je(0,["gg",2],0,function(){return this.weekYear()%100});je(0,["GG",2],0,function(){return this.isoWeekYear()%100});function Ku(t,e){je(0,[t,t.length],0,e)}Ku("gggg","weekYear");Ku("ggggg","weekYear");Ku("GGGG","isoWeekYear");Ku("GGGGG","isoWeekYear");Li("weekYear","gg");Li("isoWeekYear","GG");Vi("weekYear",1);Vi("isoWeekYear",1);Me("G",Hu);Me("g",Hu);Me("GG",Ut,hs);Me("gg",Ut,hs);Me("GGGG",am,om);Me("gggg",am,om);Me("GGGGG",ju,Bu);Me("ggggg",ju,Bu);Hl(["gggg","ggggg","GGGG","GGGGG"],function(t,e,i,s){e[s.substr(0,2)]=ut(t)});Hl(["gg","GG"],function(t,e,i,s){e[s]=de.parseTwoDigitYear(t)});function EC(t){return lw.call(this,t,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function DC(t){return lw.call(this,t,this.isoWeek(),this.isoWeekday(),1,4)}function kC(){return Vn(this.year(),1,4)}function CC(){return Vn(this.isoWeekYear(),1,4)}function PC(){var t=this.localeData()._week;return Vn(this.year(),t.dow,t.doy)}function AC(){var t=this.localeData()._week;return Vn(this.weekYear(),t.dow,t.doy)}function lw(t,e,i,s,r){var n;return t==null?_l(this,s,r).year:(n=Vn(t,s,r),e>n&&(e=n),RC.call(this,t,e,i,s,r))}function RC(t,e,i,s,r){var n=Bb(t,e,i,s,r),o=yl(n.year,0,n.dayOfYear);return this.year(o.getUTCFullYear()),this.month(o.getUTCMonth()),this.date(o.getUTCDate()),this}je("Q",0,"Qo","quarter");Li("quarter","Q");Vi("quarter",7);Me("Q",Ab);Ct("Q",function(t,e){e[Mn]=(ut(t)-1)*3});function MC(t){return t==null?Math.ceil((this.month()+1)/3):this.month((t-1)*3+this.month()%3)}je("D",["DD",2],"Do","date");Li("date","D");Vi("date",9);Me("D",Ut);Me("DD",Ut,hs);Me("Do",function(t,e){return t?e._dayOfMonthOrdinalParse||e._ordinalParse:e._dayOfMonthOrdinalParseLenient});Ct(["D","DD"],rn);Ct("Do",function(t,e){e[rn]=ut(t.match(Ut)[0])});var dw=ga("Date",!0);je("DDD",["DDDD",3],"DDDo","dayOfYear");Li("dayOfYear","DDD");Vi("dayOfYear",4);Me("DDD",zu);Me("DDDD",Rb);Ct(["DDD","DDDD"],function(t,e,i){i._dayOfYear=ut(t)});function OC(t){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return t==null?e:this.add(t-e,"d")}je("m",["mm",2],0,"minute");Li("minute","m");Vi("minute",14);Me("m",Ut);Me("mm",Ut,hs);Ct(["m","mm"],Ws);var $C=ga("Minutes",!1);je("s",["ss",2],0,"second");Li("second","s");Vi("second",15);Me("s",Ut);Me("ss",Ut,hs);Ct(["s","ss"],On);var NC=ga("Seconds",!1);je("S",0,0,function(){return~~(this.millisecond()/100)});je(0,["SS",2],0,function(){return~~(this.millisecond()/10)});je(0,["SSS",3],0,"millisecond");je(0,["SSSS",4],0,function(){return this.millisecond()*10});je(0,["SSSSS",5],0,function(){return this.millisecond()*100});je(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3});je(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4});je(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5});je(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6});Li("millisecond","ms");Vi("millisecond",16);Me("S",zu,Ab);Me("SS",zu,hs);Me("SSS",zu,Rb);var dr,uw;for(dr="SSSS";dr.length<=9;dr+="S")Me(dr,va);function LC(t,e){e[Ur]=ut(("0."+t)*1e3)}for(dr="S";dr.length<=9;dr+="S")Ct(dr,LC);uw=ga("Milliseconds",!1);je("z",0,0,"zoneAbbr");je("zz",0,0,"zoneName");function VC(){return this._isUTC?"UTC":""}function WC(){return this._isUTC?"Coordinated Universal Time":""}var we=zl.prototype;we.add=Ak;we.calendar=Vk;we.clone=Wk;we.diff=Gk;we.endOf=iC;we.format=Jk;we.from=Qk;we.fromNow=Zk;we.to=Xk;we.toNow=eC;we.get=zE;we.invalidAt=cC;we.isAfter=Fk;we.isBefore=Bk;we.isBetween=zk;we.isSame=jk;we.isSameOrAfter=Hk;we.isSameOrBefore=Uk;we.isValid=dC;we.lang=sw;we.locale=iw;we.localeData=nw;we.max=dk;we.min=lk;we.parsingFlags=uC;we.set=jE;we.startOf=tC;we.subtract=Rk;we.toArray=oC;we.toObject=aC;we.toDate=rC;we.toISOString=qk;we.inspect=Kk;typeof Symbol<"u"&&Symbol.for!=null&&(we[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"});we.toJSON=lC;we.toString=Yk;we.unix=nC;we.valueOf=sC;we.creationData=hC;we.eraName=gC;we.eraNarrow=vC;we.eraAbbr=yC;we.eraYear=_C;we.year=Fb;we.isLeapYear=lD;we.weekYear=EC;we.isoWeekYear=DC;we.quarter=we.quarters=MC;we.month=Vb;we.daysInMonth=rD;we.week=we.weeks=mD;we.isoWeek=we.isoWeeks=pD;we.weeksInYear=PC;we.weeksInWeekYear=AC;we.isoWeeksInYear=kC;we.isoWeeksInISOWeekYear=CC;we.date=dw;we.day=we.days=kD;we.weekday=CD;we.isoWeekday=PD;we.dayOfYear=OC;we.hour=we.hours=LD;we.minute=we.minutes=$C;we.second=we.seconds=NC;we.millisecond=we.milliseconds=uw;we.utcOffset=yk;we.utc=bk;we.local=wk;we.parseZone=Sk;we.hasAlignedHourOffset=Tk;we.isDST=xk;we.isLocal=Ek;we.isUtcOffset=Dk;we.isUtc=Zb;we.isUTC=Zb;we.zoneAbbr=VC;we.zoneName=WC;we.dates=Ds("dates accessor is deprecated. Use date instead.",dw);we.months=Ds("months accessor is deprecated. Use month instead",Vb);we.years=Ds("years accessor is deprecated. Use year instead",Fb);we.zone=Ds("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",_k);we.isDSTShifted=Ds("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",Ik);function FC(t){return Ht(t*1e3)}function BC(){return Ht.apply(null,arguments).parseZone()}function cw(t){return t}var _t=sm.prototype;_t.calendar=kE;_t.longDateFormat=RE;_t.invalidDate=OE;_t.ordinal=LE;_t.preparse=cw;_t.postformat=cw;_t.relativeTime=WE;_t.pastFuture=FE;_t.set=EE;_t.eras=fC;_t.erasParse=mC;_t.erasConvertYear=pC;_t.erasAbbrRegex=wC;_t.erasNameRegex=bC;_t.erasNarrowRegex=SC;_t.months=tD;_t.monthsShort=iD;_t.monthsParse=nD;_t.monthsRegex=aD;_t.monthsShortRegex=oD;_t.week=uD;_t.firstDayOfYear=fD;_t.firstDayOfWeek=hD;_t.weekdays=TD;_t.weekdaysMin=ID;_t.weekdaysShort=xD;_t.weekdaysParse=DD;_t.weekdaysRegex=AD;_t.weekdaysShortRegex=RD;_t.weekdaysMinRegex=MD;_t.isPM=$D;_t.meridiem=VD;function vu(t,e,i,s){var r=Gn(),n=yn().set(s,e);return r[i](n,t)}function hw(t,e,i){if(Bn(t)&&(e=t,t=void 0),t=t||"",e!=null)return vu(t,e,i,"month");var s,r=[];for(s=0;s<12;s++)r[s]=vu(t,s,i,"month");return r}function _m(t,e,i,s){typeof t=="boolean"?(Bn(e)&&(i=e,e=void 0),e=e||""):(e=t,i=e,t=!1,Bn(e)&&(i=e,e=void 0),e=e||"");var r=Gn(),n=t?r._week.dow:0,o,a=[];if(i!=null)return vu(e,(i+n)%7,s,"day");for(o=0;o<7;o++)a[o]=vu(e,(o+n)%7,s,"day");return a}function zC(t,e){return hw(t,e,"months")}function jC(t,e){return hw(t,e,"monthsShort")}function HC(t,e,i){return _m(t,e,i,"weekdays")}function UC(t,e,i){return _m(t,e,i,"weekdaysShort")}function GC(t,e,i){return _m(t,e,i,"weekdaysMin")}hr("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var e=t%10,i=ut(t%100/10)===1?"th":e===1?"st":e===2?"nd":e===3?"rd":"th";return t+i}});de.lang=Ds("moment.lang is deprecated. Use moment.locale instead.",hr);de.langData=Ds("moment.langData is deprecated. Use moment.localeData instead.",Gn);var xn=Math.abs;function YC(){var t=this._data;return this._milliseconds=xn(this._milliseconds),this._days=xn(this._days),this._months=xn(this._months),t.milliseconds=xn(t.milliseconds),t.seconds=xn(t.seconds),t.minutes=xn(t.minutes),t.hours=xn(t.hours),t.months=xn(t.months),t.years=xn(t.years),this}function fw(t,e,i,s){var r=Ks(e,i);return t._milliseconds+=s*r._milliseconds,t._days+=s*r._days,t._months+=s*r._months,t._bubble()}function qC(t,e){return fw(this,t,e,1)}function KC(t,e){return fw(this,t,e,-1)}function Bg(t){return t<0?Math.floor(t):Math.ceil(t)}function JC(){var t=this._milliseconds,e=this._days,i=this._months,s=this._data,r,n,o,a,l;return t>=0&&e>=0&&i>=0||t<=0&&e<=0&&i<=0||(t+=Bg(cf(i)+e)*864e5,e=0,i=0),s.milliseconds=t%1e3,r=vs(t/1e3),s.seconds=r%60,n=vs(r/60),s.minutes=n%60,o=vs(n/60),s.hours=o%24,e+=vs(o/24),l=vs(mw(e)),i+=l,e-=Bg(cf(l)),a=vs(i/12),i%=12,s.days=e,s.months=i,s.years=a,this}function mw(t){return t*4800/146097}function cf(t){return t*146097/4800}function QC(t){if(!this.isValid())return NaN;var e,i,s=this._milliseconds;if(t=ks(t),t==="month"||t==="quarter"||t==="year")switch(e=this._days+s/864e5,i=this._months+mw(e),t){case"month":return i;case"quarter":return i/3;case"year":return i/12}else switch(e=this._days+Math.round(cf(this._months)),t){case"week":return e/7+s/6048e5;case"day":return e+s/864e5;case"hour":return e*24+s/36e5;case"minute":return e*1440+s/6e4;case"second":return e*86400+s/1e3;case"millisecond":return Math.floor(e*864e5)+s;default:throw new Error("Unknown unit "+t)}}function ZC(){return this.isValid()?this._milliseconds+this._days*864e5+this._months%12*2592e6+ut(this._months/12)*31536e6:NaN}function Yn(t){return function(){return this.as(t)}}var XC=Yn("ms"),eP=Yn("s"),tP=Yn("m"),iP=Yn("h"),sP=Yn("d"),nP=Yn("w"),rP=Yn("M"),oP=Yn("Q"),aP=Yn("y");function lP(){return Ks(this)}function dP(t){return t=ks(t),this.isValid()?this[t+"s"]():NaN}function ho(t){return function(){return this.isValid()?this._data[t]:NaN}}var uP=ho("milliseconds"),cP=ho("seconds"),hP=ho("minutes"),fP=ho("hours"),mP=ho("days"),pP=ho("months"),gP=ho("years");function vP(){return vs(this.days()/7)}var kn=Math.round,Wo={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function yP(t,e,i,s,r){return r.relativeTime(e||1,!!i,t,s)}function _P(t,e,i,s){var r=Ks(t).abs(),n=kn(r.as("s")),o=kn(r.as("m")),a=kn(r.as("h")),l=kn(r.as("d")),c=kn(r.as("M")),f=kn(r.as("w")),v=kn(r.as("y")),S=n<=i.ss&&["s",n]||n<i.s&&["ss",n]||o<=1&&["m"]||o<i.m&&["mm",o]||a<=1&&["h"]||a<i.h&&["hh",a]||l<=1&&["d"]||l<i.d&&["dd",l];return i.w!=null&&(S=S||f<=1&&["w"]||f<i.w&&["ww",f]),S=S||c<=1&&["M"]||c<i.M&&["MM",c]||v<=1&&["y"]||["yy",v],S[2]=e,S[3]=+t>0,S[4]=s,yP.apply(null,S)}function bP(t){return t===void 0?kn:typeof t=="function"?(kn=t,!0):!1}function wP(t,e){return Wo[t]===void 0?!1:e===void 0?Wo[t]:(Wo[t]=e,t==="s"&&(Wo.ss=e-1),!0)}function SP(t,e){if(!this.isValid())return this.localeData().invalidDate();var i=!1,s=Wo,r,n;return typeof t=="object"&&(e=t,t=!1),typeof t=="boolean"&&(i=t),typeof e=="object"&&(s=Object.assign({},Wo,e),e.s!=null&&e.ss==null&&(s.ss=e.s-1)),r=this.localeData(),n=_P(this,!i,s,r),i&&(n=r.pastFuture(+this,n)),r.postformat(n)}var ih=Math.abs;function Co(t){return(t>0)-(t<0)||+t}function Ju(){if(!this.isValid())return this.localeData().invalidDate();var t=ih(this._milliseconds)/1e3,e=ih(this._days),i=ih(this._months),s,r,n,o,a=this.asSeconds(),l,c,f,v;return a?(s=vs(t/60),r=vs(s/60),t%=60,s%=60,n=vs(i/12),i%=12,o=t?t.toFixed(3).replace(/\.?0+$/,""):"",l=a<0?"-":"",c=Co(this._months)!==Co(a)?"-":"",f=Co(this._days)!==Co(a)?"-":"",v=Co(this._milliseconds)!==Co(a)?"-":"",l+"P"+(n?c+n+"Y":"")+(i?c+i+"M":"")+(e?f+e+"D":"")+(r||s||t?"T":"")+(r?v+r+"H":"")+(s?v+s+"M":"")+(t?v+o+"S":"")):"P0D"}var mt=qu.prototype;mt.isValid=mk;mt.abs=YC;mt.add=qC;mt.subtract=KC;mt.as=QC;mt.asMilliseconds=XC;mt.asSeconds=eP;mt.asMinutes=tP;mt.asHours=iP;mt.asDays=sP;mt.asWeeks=nP;mt.asMonths=rP;mt.asQuarters=oP;mt.asYears=aP;mt.valueOf=ZC;mt._bubble=JC;mt.clone=lP;mt.get=dP;mt.milliseconds=uP;mt.seconds=cP;mt.minutes=hP;mt.hours=fP;mt.days=mP;mt.weeks=vP;mt.months=pP;mt.years=gP;mt.humanize=SP;mt.toISOString=Ju;mt.toString=Ju;mt.toJSON=Ju;mt.locale=iw;mt.localeData=nw;mt.toIsoString=Ds("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Ju);mt.lang=sw;je("X",0,0,"unix");je("x",0,0,"valueOf");Me("x",Hu);Me("X",UE);Ct("X",function(t,e,i){i._d=new Date(parseFloat(t)*1e3)});Ct("x",function(t,e,i){i._d=new Date(ut(t))});//! moment.js
de.version="2.29.1";xE(Ht);de.fn=we;de.min=uk;de.max=ck;de.now=hk;de.utc=yn;de.unix=FC;de.months=zC;de.isDate=Bl;de.locale=hr;de.invalid=Wu;de.duration=Ks;de.isMoment=js;de.weekdays=HC;de.parseZone=BC;de.localeData=Gn;de.isDuration=Yd;de.monthsShort=jC;de.weekdaysMin=GC;de.defineLocale=cm;de.updateLocale=BD;de.locales=zD;de.weekdaysShort=UC;de.normalizeUnits=ks;de.relativeTimeRounding=bP;de.relativeTimeThreshold=wP;de.calendarFormat=Lk;de.prototype=we;de.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"};/**
 * @preserve date-and-time (c) KNOWLEDGECODE | MIT
 */var Ne={},Qu={},zg={},fr="en",TP={MMMM:["January","February","March","April","May","June","July","August","September","October","November","December"],MMM:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dddd:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],ddd:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dd:["Su","Mo","Tu","We","Th","Fr","Sa"],A:["AM","PM"]},xP={YYYY:function(t){return("000"+t.getFullYear()).slice(-4)},YY:function(t){return("0"+t.getFullYear()).slice(-2)},Y:function(t){return""+t.getFullYear()},MMMM:function(t){return this.res.MMMM[t.getMonth()]},MMM:function(t){return this.res.MMM[t.getMonth()]},MM:function(t){return("0"+(t.getMonth()+1)).slice(-2)},M:function(t){return""+(t.getMonth()+1)},DD:function(t){return("0"+t.getDate()).slice(-2)},D:function(t){return""+t.getDate()},HH:function(t){return("0"+t.getHours()).slice(-2)},H:function(t){return""+t.getHours()},A:function(t){return this.res.A[t.getHours()>11|0]},hh:function(t){return("0"+(t.getHours()%12||12)).slice(-2)},h:function(t){return""+(t.getHours()%12||12)},mm:function(t){return("0"+t.getMinutes()).slice(-2)},m:function(t){return""+t.getMinutes()},ss:function(t){return("0"+t.getSeconds()).slice(-2)},s:function(t){return""+t.getSeconds()},SSS:function(t){return("00"+t.getMilliseconds()).slice(-3)},SS:function(t){return("0"+(t.getMilliseconds()/10|0)).slice(-2)},S:function(t){return""+(t.getMilliseconds()/100|0)},dddd:function(t){return this.res.dddd[t.getDay()]},ddd:function(t){return this.res.ddd[t.getDay()]},dd:function(t){return this.res.dd[t.getDay()]},Z:function(t){var e=t.utc?0:t.getTimezoneOffset()/.6;return(e>0?"-":"+")+("000"+Math.abs(e-e%100*.4)).slice(-4)},post:function(t){return t}},IP={YYYY:function(t){return this.exec(/^\d{4}/,t)},Y:function(t){return this.exec(/^\d{1,4}/,t)},MMMM:function(t){var e=this.find(this.res.MMMM,t);return e.value++,e},MMM:function(t){var e=this.find(this.res.MMM,t);return e.value++,e},MM:function(t){return this.exec(/^\d\d/,t)},M:function(t){return this.exec(/^\d\d?/,t)},DD:function(t){return this.exec(/^\d\d/,t)},D:function(t){return this.exec(/^\d\d?/,t)},HH:function(t){return this.exec(/^\d\d/,t)},H:function(t){return this.exec(/^\d\d?/,t)},A:function(t){return this.find(this.res.A,t)},hh:function(t){return this.exec(/^\d\d/,t)},h:function(t){return this.exec(/^\d\d?/,t)},mm:function(t){return this.exec(/^\d\d/,t)},m:function(t){return this.exec(/^\d\d?/,t)},ss:function(t){return this.exec(/^\d\d/,t)},s:function(t){return this.exec(/^\d\d?/,t)},SSS:function(t){return this.exec(/^\d{1,3}/,t)},SS:function(t){var e=this.exec(/^\d\d?/,t);return e.value*=10,e},S:function(t){var e=this.exec(/^\d/,t);return e.value*=100,e},Z:function(t){var e=this.exec(/^[\+-]\d{2}[0-5]\d/,t);return e.value=(e.value/100|0)*-60-e.value%100,e},h12:function(t,e){return(t===12?0:t)+e*12},exec:function(t,e){var i=(t.exec(e)||[""])[0];return{value:i|0,length:i.length}},find:function(t,e){for(var i=-1,s=0,r=0,n=t.length,o;r<n;r++)o=t[r],!e.indexOf(o)&&o.length>s&&(i=r,s=o.length);return{value:i,length:s}},pre:function(t){return t}},pw=function(t,e,i){var s=function(n,o,a){var l=function(S){S&&(this.res=S)};l.prototype=n,l.prototype.constructor=l;var c=new l(a),f;for(var v in o||{})f=o[v],c[v]=f.slice?f.slice():f;return c},r={res:s(e.res,i.res)};r.formatter=s(e.formatter,i.formatter,r.res),r.parser=s(e.parser,i.parser,r.res),Qu[t]=r};Ne.compile=function(t){for(var e=/\[([^\[\]]|\[[^\[\]]*])*]|([A-Za-z])\2+|\.{3}|./g,i,s=[t];i=e.exec(t);)s[s.length]=i[0];return s};Ne.format=function(t,e,i){var s=typeof e=="string"?Ne.compile(e):e,r=Ne.addMinutes(t,i?t.getTimezoneOffset():0),n=Qu[fr].formatter,o="";r.utc=i||!1;for(var a=1,l=s.length,c;a<l;a++)c=s[a],o+=n[c]?n.post(n[c](r,s[0])):c.replace(/\[(.*)]/,"$1");return o};Ne.preparse=function(t,e){var i=typeof e=="string"?Ne.compile(e):e,s={Y:1970,M:1,D:1,H:0,A:0,h:0,m:0,s:0,S:0,Z:0,_index:0,_length:0,_match:0},r=/\[(.*)]/,n=Qu[fr].parser,o=0;t=n.pre(t);for(var a=1,l=i.length,c,f;a<l;a++)if(c=i[a],n[c]){if(f=n[c](t.slice(o),i[0]),!f.length)break;o+=f.length,s[c.charAt(0)]=f.value,s._match++}else if(c===t.charAt(o)||c===" ")o++;else if(r.test(c)&&!t.slice(o).indexOf(r.exec(c)[1]))o+=c.length-2;else if(c==="..."){o=t.length;break}else break;return s.H=s.H||n.h12(s.h,s.A),s._index=o,s._length=t.length,s};Ne.isValid=function(t,e){var i=typeof t=="string"?Ne.preparse(t,e):t,s=[31,28+Ne.isLeapYear(i.Y)|0,31,30,31,30,31,31,30,31,30,31][i.M-1];return!(i._index<1||i._length<1||i._index-i._length||i._match<1||i.Y<1||i.Y>9999||i.M<1||i.M>12||i.D<1||i.D>s||i.H<0||i.H>23||i.m<0||i.m>59||i.s<0||i.s>59||i.S<0||i.S>999||i.Z<-720||i.Z>840)};Ne.parse=function(t,e,i){var s=Ne.preparse(t,e);return Ne.isValid(s)?(s.M-=s.Y<100?22801:1,i||s.Z?new Date(Date.UTC(s.Y,s.M,s.D,s.H,s.m+s.Z,s.s,s.S)):new Date(s.Y,s.M,s.D,s.H,s.m,s.s,s.S)):new Date(NaN)};Ne.transform=function(t,e,i,s){return Ne.format(Ne.parse(t,e),i,s)};Ne.addYears=function(t,e){return Ne.addMonths(t,e*12)};Ne.addMonths=function(t,e){var i=new Date(t.getTime());return i.setMonth(i.getMonth()+e),i};Ne.addDays=function(t,e){var i=new Date(t.getTime());return i.setDate(i.getDate()+e),i};Ne.addHours=function(t,e){return Ne.addMinutes(t,e*60)};Ne.addMinutes=function(t,e){return Ne.addSeconds(t,e*60)};Ne.addSeconds=function(t,e){return Ne.addMilliseconds(t,e*1e3)};Ne.addMilliseconds=function(t,e){return new Date(t.getTime()+e)};Ne.subtract=function(t,e){var i=t.getTime()-e.getTime();return{toMilliseconds:function(){return i},toSeconds:function(){return i/1e3},toMinutes:function(){return i/6e4},toHours:function(){return i/36e5},toDays:function(){return i/864e5}}};Ne.isLeapYear=function(t){return!(t%4)&&!!(t%100)||!(t%400)};Ne.isSameDay=function(t,e){return t.toDateString()===e.toDateString()};Ne.locale=function(t,e){return e?pw(t,{res:TP,formatter:xP,parser:IP},e):fr=(typeof t=="function"?t:Ne.locale[t]||function(){})(Ne)||fr,fr};Ne.extend=function(t){var e=t.extender||{};for(var i in e)Ne[i]||(Ne[i]=e[i]);(t.formatter||t.parser||t.res)&&pw(fr,Qu[fr],t)};Ne.plugin=function(t,e){e?zg[t]||Ne.extend(zg[t]=e):(typeof t=="function"?t:Ne.plugin[t]||function(){})(Ne)};Ne.locale(fr,{});function sl(t,e){return t.reduce((i,s)=>i+s[e],0)}function Zu(t,e=2){return(Math.round(t*100)/100).toFixed(e)}function EP(t,e=2){return new Intl.NumberFormat([],{minimumFractionDigits:e,maximumFractionDigits:e}).format(t)}function He(t,e){return e=e||"id",t.sort((i,s)=>i[e]-s[e])}function Xu(t,e){return e=e||"id",t.sort((i,s)=>s[e]-i[e])}function sh(t){return t.sort((e,i)=>e-i)}function so(t,e){return t.toSorted((i,s)=>new Date(i[e])-new Date(s[e]))}function Ul(t,e){return t.toSorted((i,s)=>new Date(s[e])-new Date(i[e]))}function yu(t,e){return e?t.sort((i,s)=>i[e].toLowerCase()<s[e].toLowerCase()?-1:i[e].toLowerCase()>s[e].toLowerCase()?1:0):t.sort((i,s)=>i.toLowerCase()<s.toLowerCase()?-1:i.toLowerCase()>s.toLowerCase()?1:0)}function jg(t,e){return t.sort((i,s)=>!i[e]&&s[e]?-1:i[e]&&!s[e]?1:0)}function ya(t,e){let i="";try{let s=0;t.forEach(r=>{s++!==0&&(i+=", "),i+=r[e]})}catch{console.log()}return i}function Zr(t,e,i){var s=t.sort((r,n)=>{let o=r.positions.find(l=>l.parentType==e&&l.parentID==i).position,a=n.positions.find(l=>l.parentType==e&&l.parentID==i).position;return o-a});return s}function _a(t,e){var i=r=>r.id==t.id,s=e.findIndex(i);return s===-1?!1:(e.splice(s,1),!0)}function on(t,e){var i=r=>r.id==t,s=e.findIndex(i);return s===-1?!1:(e.splice(s,1),!0)}function Hs(t,e){var i=r=>r.id==t.id,s=e.findIndex(i);return s===-1?!1:(e.splice(s,1,t),!0)}function gt(t,e){var i=r=>r.id==t.id,s=e.findIndex(i);return s===-1?(e.push(t),!1):(e.splice(s,1,t),!0)}function $n(t,e){var i=r=>r.id==t.id,s=e.findIndex(i);return s===-1?(e.push(t),!1):(e.splice(s,1,t),!0)}function fe(t){return JSON.parse(JSON.stringify(t))}function gw(t){return t.replace(/(?:^\w|[A-Z]|\b\w)/g,function(e,i){return i===0?e.toLowerCase():e.toUpperCase()}).replace(/\s+/g,"")}function wi(t){return t.charAt(0).toUpperCase()+t.slice(1)}function ec(t){let i=t.split("T")[0].split("-");return`${i[0]}-${i[1]}-${i[2]}`}function DP(t){let i=t.split("T")[1].split(":");return`${i[0]}:${i[1]}`}function kP(t){let e=t.split("T"),i=e[0].split("-"),s=e[1].split(":");return`${i[0]}-${i[1]}-${i[2]} ${s[0]}:${s[1]}`}function vw(t){return t.slice(19,25)}function Tt(t){return de(t).startOf("day").toDate()}function wl(t){return de(t).hour(0).minute(0).second(0).millisecond(0).toDate()}function CP(t){return de(t).startOf("week").toDate()}function PP(t){return de(t).endOf("week").millisecond(0).toDate()}function yw(t=new Date){return Ne.format(t,"YYYY")}function _w(t=new Date){return Ne.format(t,"MMMM")}function bw(t=new Date,e=1){return de(t).add(e,"day").toDate()}function AP(t=new Date,e=1){return de(t).add(-e,"day").toDate()}function na(t=new Date,e=1){return de(t).add(e,"month").toDate()}function bm(t=new Date,e=1){return de(t).add(-e,"month").toDate()}async function RP(){return fetch(`${Pt}/api/Goal/GetGoals`,{method:"POST",headers:{"Content-Type":"application/json"}}).then(t=>t.json()).then(t=>{if(t.errorMessage)this.errorMessage=t.errorMessage;else return t}).catch(t=>{console.error("Error:",t)})}async function MP(t,e){let i={start:t,end:e};return fetch(`${Pt}/api/Goal/GetGoalsWithTimeframe`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}).then(s=>s.json()).then(s=>{if(s.errorMessage)this.errorMessage=s.errorMessage;else return s}).catch(s=>{console.error("Error:",s)})}async function OP(){return fetch(`${Pt}/api/Todo/GetTodos`,{method:"POST",headers:{"Content-Type":"application/json"}}).then(t=>t.json()).then(t=>{if(t.errorMessage)this.errorMessage=t.errorMessage;else return t}).catch(t=>{console.error("Error:",t)})}async function $P(t,e){let i={startAt:t,endAt:e};return fetch(`${Pt}/api/Todo/GetRepetitiveTodoIterations`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}).then(s=>s.json()).then(s=>{if(s.errorMessage)this.errorMessage=s.errorMessage;else return s}).catch(s=>{console.error("Error:",s)})}async function NP(){return fetch(`${Pt}/api/Routine/GetRoutines`,{method:"POST",headers:{"Content-Type":"application/json"}}).then(t=>t.json()).then(t=>{if(t.errorMessage)this.errorMessage=t.errorMessage;else return t}).catch(t=>{console.error("Error:",t)})}async function LP(t,e,i){let s={routineID:t,addedIDs:e,removedIDs:i};return fetch(`${Pt}/api/Routine/MapTodosToRoutine`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}).then(r=>r.json()).then(r=>{if(r.errorMessage)this.errorMessage=r.errorMessage;else return r}).catch(r=>{console.error("Error:",r)})}async function VP(t,e,i){let s={routineID:t,itemType:e,itemText:i};return fetch(`${Pt}/api/Routine/CreateAndMapItemToRoutine`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}).then(r=>r.json()).then(r=>{if(r.errorMessage)this.errorMessage=r.errorMessage;else return r}).catch(r=>{console.error("Error:",r)})}async function WP(t,e){let i={id:t,repeatID:e};return fetch(`${Pt}/api/Routine/RefreshRepetitionForRoutine`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}).then(s=>s.json()).then(s=>{if(s.status.success)return s.result;console.error("Error:",s.status.errorMessage)}).catch(s=>{console.error("Error:",s)})}let Hg=!1;const ba=qs("routine",{state:()=>({routines:[]}),getters:{},actions:{async initialize(){let t=this.fill();return this.connectSocket(),Hg=!0,t},async fill(){return NP().then(t=>this.routines=t)},initializeItems(t){let e=qn(),i=vr(),s=fo();t=t||this.routines,t.forEach(r=>{r.parents=this.routines.filter(n=>r.parentIDs.includes(n.id)),r.children=this.routines.filter(n=>r.childIDs.includes(n.id)),r.metrics=e.getItems().filter(n=>r.metricIDs.includes(n.id)),r.todos=i.getItems().filter(n=>r.todoIDs.includes(n.id)),r.goals=s.getItems().filter(n=>r.goalIDs.includes(n.id))})},getItems(t){return this.routines=t?this.routines.find(e=>t.includes(e.id)):this.routines},getItem(t){return this.routines.find(e=>e.id==t)},getTaskRoutines(){return this.routines.filter(e=>e.isTaskRoutine)},getTaskRoutinesForDay(t){return this.routines.filter(i=>{let s=!1;return i.isTaskRoutine&&i.repeats.forEach(r=>{+r.startDate.toDate()<=+t&&(r.endDate?+t<=+r.endDate.toDate()&&(s=!0):s=!0)}),s})},repositionItem(t,e,i,s,r){var n={newPosition:r};return n[`${t}ID`]=i,n.itemID=s,e=wi(e),t=wi(t),Re(t,`Reposition${e}In${t}`,n)},refreshRepetitionForRepeat(t,e){WP(t,e)},saveRoutine(t){return Re("Routine","SaveRoutine",t).then(e=>e.result)},saveRepeat(t){return Re("Routine","SaveRoutineRepeat",{repeat:t}).then(e=>e.result)},runUpdates(t){let e=this;t.routines&&t.routines.length>0&&(t.routines.forEach(i=>{gt(i,e.routines)}),this.initializeItems(t.routines),He(e.routines)),t.routineIDsRemoved&&t.routineIDsRemoved.length>0&&(t.routineIDsRemoved.forEach(i=>{removeItemByID(i,e.routines)}),He(e.routines))},connectSocket(){Hg||vn("coachHub").on("SendUpdates",e=>{this.runUpdates(e)})}}}),mn=Object.freeze(Object.defineProperty({__proto__:null,useRoutineStore:ba},Symbol.toStringTag,{value:"Module"}));let Ug=!1;const vr=qs("todo",{state:()=>({todos:[]}),getters:{},actions:{async initialize(){let t=this.fill();return this.connectSocket(),Ug=!0,t},async fill(){return OP().then(t=>this.todos=t)},initializeItems(t){let e=qn(),i=fo(),s=ba();t=t||this.todos,t.forEach(r=>{r.parents=this.todos.filter(n=>r.parentIDs.includes(n.id)),r.children=this.todos.filter(n=>r.childIDs.includes(n.id)),r.metrics=e.getItems().filter(n=>r.metricIDs.includes(n.id)),r.goals=i.getItems().filter(n=>r.goalIDs.includes(n.id)),r.routines=s.getItems().filter(n=>r.routineIDs.includes(n.id))})},getItems(){return this.todos},getItemsByID(t){return this.todos.filter(e=>t.includes(e.id))},getItem(t){return this.todos.find(e=>e.id==t)},getMemorizationTodos(){return Re("Todo","GetMemorizationTodos").then(e=>this.runUpdates({todos:e})),this.todos.filter(e=>e.typeID==VI.MEMORIZATION)},saveTodo(t){return Re("Todo","SaveTodo",t).then(e=>e.result)},deleteTodo(t){return Re("Todo","DeleteTodo",{id:t}).then(e=>e.result)},createTask(t,e){return Re("Todo","CreateTaskForTodo",{todoID:t,datetime:e}).then(i=>i.result)},createDefaultTask(t,e,i){return Re("Todo","CreateDefaultTask",{text:t,isComplete:e,datetime:i}).then(s=>s.result)},createAndMapItem(t,e,i){return Re("Todo","CreateAndMapItemToTodo",{todoID:t,itemType:e,itemText:i}).then(s=>s.result)},saveText(t,e){let i={id:t,text:{value:e}};return this.saveTodo(i)},saveDescription(t,e){let i={id:t,description:{value:e}};return this.saveTodo(i)},savePoints(t,e){let i={id:t,points:{value:e}};return this.saveTodo(i)},saveType(t,e){let i={id:t,typeID:{value:e}};return this.saveTodo(i)},saveMedium(t,e){let i={id:t,mediumID:{value:e}};return this.saveTodo(i)},mapItems(t,e,i,s){return Re("Todo","MapItemsToTodo",{todoID:t,itemType:e,addedIDs:i,removedIDs:s}).then(n=>n.result)},mapTypes(t,e,i){return Re("Todo","MapTypesToTodo",{todoID:t,addedIDs:e,removedIDs:i}).then(r=>r.result)},repositionItem(t,e,i,s,r){var n={newPosition:r};return n[`${t}ID`]=i,n.itemID=s,e=wi(e),t=wi(t),Re(t,`Reposition${e}In${t}`,n)},refreshRepetitionForRepeat(t,e){return Re("Todo","RefreshRepetitionForTodo",{id:t,repeatID:e}).then(s=>s.result)},toggleGoalTimePairTodoCompletion(t,e){return Re("Todo","ToggleGoalTimePairTodoCompletion",{goalTimePairTodoID:t,completedAt:e}).then(s=>s.result)},deleteFutureRepetitionsForRepeat(t,e,i){return Re("Todo","DeleteFutureRepetitionsForTodo",{id:t,repeatID:e,selectedDate:i}).then(r=>r.result)},deleteOrArchiveRepeat(t,e){return Re("Todo","DeleteOrArchiveRepeat",{todoID:t,repeatID:e}).then(s=>s.result)},deleteTimePair(t){return Re("Todo","DeleteTodoTimePair",{id:t}).then(e=>e.result)},saveTimePair(t){return Re("Todo","SaveTodoTimePair",{timePair:t}).then(e=>e.result)},saveRepeat(t){return Re("Todo","SaveTodoRepeat",{repeat:t}).then(e=>e.result)},runUpdates(t){let e=this;t.todos&&t.todos.length>0&&(t.todos.forEach(i=>{gt(i,e.todos)}),this.initializeItems(t.todos),He(e.todos)),t.todoIDsRemoved&&t.todoIDsRemoved.length>0&&(t.todoIDsRemoved.forEach(i=>{on(i,e.todos)}),He(e.todos))},connectSocket(){Ug||vn("coachHub").on("SendUpdates",e=>{this.runUpdates(e)})}}}),hi=Object.freeze(Object.defineProperty({__proto__:null,useTodoStore:vr},Symbol.toStringTag,{value:"Module"}));async function FP(t,e){let i={startAt:t,endAt:e};return fetch(`${Pt}/api/Planner/GetAllIterationsInRange`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}).then(s=>s.json()).then(s=>{if(s.status.success)return s.result;console.error("Error:",s.status.errorMessage)}).catch(s=>{console.error("Error:",s)})}async function BP(){return fetch(`${Pt}/api/Planner/GetUnplannedIterations`,{method:"POST",headers:{"Content-Type":"application/json"}}).then(t=>t.json()).then(t=>{if(t.status.success)return t.result;console.error("Error:",t.status.errorMessage)}).catch(t=>{console.error("Error:",t)})}let Gg=!1;const Sl=qs("iteration",{state:()=>({iterations:[]}),getters:{},actions:{async initialize(){this.connectSocket(),Gg=!0},getIteration(t){return this.iterations.find(e=>e.id=t)},getIterations(){return this.iterations},getIterationsInRange(t,e,i){let s=this;return i&&FP(t,e).then(r=>{r.forEach(n=>{gt(n,s.iterations)}),He(s.iterations,"startAt")}),this.iterations.filter(r=>new Date(r.startAt).getTime()>=t&&new Date(r.startAt).getTime()<=e)},getRepetitiveTodoIterations(t,e){let i=this;return $P(t,e).then(s=>{s.forEach(r=>{gt(r,i.iterations)}),He(i.iterations,"startAt")}),this.iterations.filter(s=>new Date(s.startAt).getTime()>=t&&new Date(s.startAt).getTime()<=e&&s.idRoutine==null&&s.idRoutineIteration==null)},getUnplannedIterations(t){let e=this;return t&&BP().then(i=>{i.forEach(s=>{gt(s,e.iterations)}),He(e.iterations,"startAt")}),this.iterations.filter(i=>!i.startAt&&i.idRoutine==null&&i.idRoutineIteration==null)},getIterationsForTodo(t){return this.iterations.filter(i=>i.todoID==t)},updateIteration(t,e,i,s,r,n){return Re("Planner","UpdateIteration",{iterationID:t,text:e,blurb:i,points:s,startAt:r,endAt:n,date:new Date}).then(l=>l.result)},rescheduleIteration(t,e,i){return Re("Planner","RescheduleIteration",{iterationID:t,startAt:e,endAt:i}).then(r=>r.result)},toggleCompletion(t,e,i){return Re("Planner","ToggleTaskCompletion",{iterationID:t,attemptedAt:e,completedAt:i}).then(r=>r.result)},attemptIteration(t,e){return Re("Planner","AttemptIteration",{iterationID:t,attemptedAt:e}).then(s=>s.result)},completeAndCreatSibling(t,e,i,s,r){return Re("Planner","CompleteAndCreatSibling",{iterationID:t,completedAt:e,newText:i,newStart:s,newEnd:r}).then(o=>o.result)},toggleVerification(t,e){return Re("Planner","ToggleIterationVerification",{iterationID:t,isVerified:e}).then(i=>i.result)},deleteIteration(t){return Re("Planner","DeleteIteration",{iterationID:t}).then(e=>e.result)},runUpdates(t){let e=this;t.iterations&&t.iterations.length>0&&(t.iterations.forEach(i=>{gt(i,e.iterations)}),He(e.iterations)),t.iterationIDsRemoved&&t.iterationIDsRemoved.length>0&&(t.iterationIDsRemoved.forEach(i=>{on(i,e.iterations)}),He(e.iterations))},connectSocket(){Gg||vn("coachHub").on("SendUpdates",e=>{this.runUpdates(e)})}}}),Et=Object.freeze(Object.defineProperty({__proto__:null,useIterationStore:Sl},Symbol.toStringTag,{value:"Module"}));let Yg=!1;const fo=qs("goal",{state:()=>({goals:[]}),getters:{},actions:{async initialize(){let t=this.fill();return this.connectSocket(),Yg=!0,t},async refresh(){return this.fill()},async fill(){let t=RP().then(e=>this.goals=e);return this.initializeItems(),t},initializeItems(t){let e=qn(),i=vr(),s=ba();t=t||this.goals,t.forEach(r=>{r.parents=this.goals.filter(n=>r.parentIDs.includes(n.id)),r.children=this.goals.filter(n=>r.childIDs.includes(n.id)),r.metrics=e.getItems().filter(n=>r.metricIDs.includes(n.id)),r.todos=i.getItems().filter(n=>r.todoIDs.includes(n.id)),r.routines=s.getItems().filter(n=>r.routineIDs.includes(n.id))})},getItems(){return this.goals},getItem(t){return this.goals.find(e=>e.id==t)},getTimeframeItems(t,e){let i=this;return MP(t,e).then(s=>(s.forEach(r=>{gt(r,i.goals)}),this.initializeItems(s),He(i.goals),s))},getGoalsInTimeframe(t,e){var i=this.goals.filter(s=>{var r=s.timePairs.findIndex(n=>{if(n.idTimeframe!=t)return!1;let o=n.startTime?new Date(n.startTime.dateTime):void 0,a=n.endTime?new Date(n.endTime.dateTime):void 0;return!!(o&&+o<=+e&&(a&&+a>=+e||a==null))});return r>-1});return i},getActiveGoals(t){var e=this.goals.filter(i=>{var s=i.timePairs.findIndex(r=>{let n=r.startTime?new Date(r.startTime.dateTime):void 0,o=r.endTime?new Date(r.endTime.dateTime):void 0;return!!(n&&+n<=+t&&o&&+o>=+t)});return s>-1});return e},getFitnessGoals(){return this.goals.filter(e=>e.types.some(s=>s.id==WI.FITNESS))},getPoints(t){let e=this.getIterationIDs(t),n=Sl().iterations.filter(a=>e.includes(a.id)).filter(a=>a.completedAt||a.attemptedAt).filter(a=>a.points);return sl(n,"points")},getIterationIDs(t){let e={goals:[],todos:[],iterations:[]};return this.getAncensorIterationsFromGoal(t,e),e.iterations},getAncensorIterationsFromGoal(t,e){if(!e.goals.includes(t)){e.goals.push(t);let i=this.goals.find(s=>s.id==t);i.todoIDs.forEach(s=>{this.getAncestorIterationsFromTodo(s,e)}),i.childIDs.forEach(s=>{this.getAncensorIterationsFromGoal(s,e)})}},getAncestorIterationsFromTodo(t,e){if(!e.todos.includes(t)){e.todos.push(t),vr().getItem(t).childIDs.forEach(a=>{this.getAncestorIterationsFromTodo(a,e)});let o=Sl().getIterationsForTodo(t).map(a=>a.id);e.iterations=e.iterations.concat(o)}},saveGoal(t){return Re("Goal","SaveGoal",t).then(e=>e.result)},repositionItem(t,e,i,s,r){var n={newPosition:r};return n[`${t}ID`]=i,n.itemID=s,e=wi(e),t=wi(t),Re(t,`Reposition${e}In${t}`,n)},createAndMapItem(t,e,i){return Re("Goal","CreateAndMapItemToGoal",{goalID:t,itemType:e,itemText:i}).then(r=>r.result)},mapItems(t,e,i,s){return Re("Goal","MapItemsToGoal",{goalID:t,itemType:e,addedIDs:i,removedIDs:s}).then(n=>n.result)},deleteTimePair(t){return Re("Goal","DeleteGoalTimePair",{goalTimePairID:t}).then(e=>e.result)},unmapTodoFromGoalTimePair(t){return Re("Goal","UnmapTodoFromGoalTimePair",{goalTimePairTodoID:t}).then(e=>e.result)},saveDescription(t,e){let i={id:t,description:{value:e}};this.saveGoal(i)},saveMetrics(t,e,i){let s={id:t,metrics:{addedIDs:e,removedIDs:i}};this.saveGoal(s)},createIteration(t,e,i){return Re("Goal","CreateIterationForGoal",{idGoal:t,text:e,datetime:i}).then(s=>s.result)},saveTimePair(t){return Re("Goal","SaveGoalTimePair",{timePair:t}).then(e=>e.result)},addReason(t,e,i){return Re("Goal","AddReason",{id:t,datetime:e,text:i}).then(s=>s.result)},addBlurb(t,e){let i={idGoal:t,idBlurbType:e.idType,...e};return Re("Goal","AddBlurbToGoal",i).then(s=>s.result)},updateBlurb(t){let e={idBlurb:t.id,idBlurbType:t.idType,...t};return Re("Goal","UpdateBlurbInGoal",e).then(i=>i.result)},runUpdates(t){let e=this;t.goals&&t.goals.length>0&&(t.goals.forEach(i=>{gt(i,e.goals)}),this.initializeItems(t.goals),He(e.goals)),t.goalIDsRemoved&&t.goalIDsRemoved.length>0&&(t.goalIDsRemoved.forEach(i=>{removeItemByID(i,e.goals)}),He(e.goals))},connectSocket(){Yg||vn("coachHub").on("SendUpdates",e=>{this.runUpdates(e)})}}}),Ni=Object.freeze(Object.defineProperty({__proto__:null,useGoalStore:fo},Symbol.toStringTag,{value:"Module"}));let qg=!1;const qn=qs("metric",{state:()=>({metrics:[],logItems:[]}),getters:{},actions:{async initialize(){let t=this.fill();return this.connectSocket(),qg=!0,t},async fill(){return wE().then(t=>this.metrics=t)},initializeItems(t){let e=fo(),i=vr(),s=ba();t=t||this.metrics,t.forEach(r=>{r.parents=this.metrics.filter(n=>r.parentIDs.includes(n.id)),r.children=this.metrics.filter(n=>r.childIDs.includes(n.id)),r.goals=e.getItems().filter(n=>r.goalIDs.includes(n.id)),r.todos=i.getItems().filter(n=>r.todoIDs.includes(n.id)),r.routines=s.getItems().filter(n=>r.routineIDs.includes(n.id))})},getItems(){return this.metrics},getItem(t){return this.metrics.find(e=>e.id==t)},repositionItem(t,e,i,s,r){var n={newPosition:r};return n[`${t}ID`]=i,n.itemID=s,e=wi(e),t=wi(t),Re(t,`Reposition${e}In${t}`,n)},initializeLogItems(){let t=this;SE().then(e=>{t.logItems=e})},getLogItems(){return fe(this.logItems)},getLogItem(t){return this.logItems.find(i=>i.id==t)?fe(this.logItems.find(i=>i.id==t)):void 0},async logLogItem(t){let e=this;return Re("Metric","LogLogItem",t).then(i=>{i.result&&gt(i.result,e.logItems)})},async deleteLogEntry(t){let e=this;return TE(t).then(i=>{gt(i,e.logItems)})},runUpdates(t){let e=this;t.metrics&&t.metrics.length>0&&(t.metrics.forEach(i=>{gt(i,e.metrics)}),this.initializeItems(t.metrics),He(this.metrics))},connectSocket(){qg||vn("coachHub").on("SendUpdates",e=>{this.runUpdates(e)})}}}),no=Object.freeze(Object.defineProperty({__proto__:null,useMetricStore:qn},Symbol.toStringTag,{value:"Module"}));async function zP(t){let e={id:t};return fetch(`${Pt}/api/Event/GetEvent`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(i=>i.json()).then(i=>{if(i.errorMessage)this.errorMessage=i.errorMessage;else return i}).catch(i=>{console.error("Error:",i)})}async function Kg(t,e){let i={start:t,end:e};return fetch(`${Pt}/api/Event/GetEventsInRange`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}).then(s=>s.json()).then(s=>{if(s.errorMessage)this.errorMessage=s.errorMessage;else return s}).catch(s=>{console.error("Error:",s)})}let Jg=!1;const wm=qs("event",{state:()=>({events:[]}),getters:{},actions:{async initialize(){this.connectSocket(),Jg=!0},async fill(){this.events=await Kg()},getEvent(t,e){const i=this;return e&&zP(t).then(s=>{gt(s,i.events)}),this.events.find(s=>s.id==t)},getEvents(t,e,i){const s=this;return i&&Kg(t,e).then(n=>{n.forEach(o=>{gt(o,s.events)})}),this.events.filter(n=>new Date(n.startAt).getTime()>=t&&new Date(n.startAt).getTime()<=e)},async updateEvent(t,e,i,s){return Re("Event","UpdateEvent",{eventID:t,text:e,start:i,end:s})},runUpdates(t){let e=this;t.events&&t.events.length>0&&(t.events.forEach(i=>{gt(i,e.events)}),He(e.events)),t.eventIDRemoved&&t.eventIDRemoved.length>0&&(t.eventIDRemoved.forEach(i=>{on(i,e.events)}),He(e.events)),t.iterations&&t.iterations.length>0&&t.iterations.forEach(i=>{e.events.forEach(s=>{var r=s.iterations.some(n=>n.id==i.id);r&&(gt(i,s.iterations),He(s.iterations))})}),t.iterationIDsRemoved&&t.iterationIDsRemoved.length>0&&t.iterationIDsRemoved.forEach(i=>{e.events.forEach(s=>{var r=s.iterations.some(n=>n.id==i);r&&(on(i,s.iterations),He(s.iterations))})})},connectSocket(){Jg||vn("coachHub").on("SendUpdates",e=>{this.runUpdates(e)})}}}),mo=Object.freeze(Object.defineProperty({__proto__:null,useEventStore:wm},Symbol.toStringTag,{value:"Module"}));async function jP(){return fetch(`${Pt}/api/Physical/GetNutritionHistory`,{method:"POST",headers:{"Content-Type":"application/json"}}).then(t=>t.json()).then(t=>{if(t.errorMessage)this.errorMessage=t.errorMessage;else return t}).catch(t=>{console.error("Error:",t)})}async function HP(t,e){let i={startAt:t,endAt:e};return fetch(`${Pt}/api/Physical/GetMealsInRange`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}).then(s=>s.json()).then(s=>{if(s.errorMessage)this.errorMessage=s.errorMessage;else return s}).catch(s=>{console.error("Error:",s)})}async function UP(){return fetch(`${Pt}/api/Physical/GetWaterLogs`,{method:"POST",headers:{"Content-Type":"application/json"}}).then(t=>t.json()).then(t=>{if(t.errorMessage)this.errorMessage=t.errorMessage;else return t}).catch(t=>{console.error("Error:",t)})}async function GP(t){let e={query:t};return fetch(`${Pt}/api/Physical/FoodSearchAutoComplete`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(i=>i.json()).then(i=>{if(i.errorMessage)this.errorMessage=i.errorMessage;else return i}).catch(i=>{console.error("Error:",i)})}let Qg=!1;const Js=qs("physical",{state:()=>({foodItems:[],meals:[],mealHistories:[],waterLogs:[],bodyMeasurements:[]}),getters:{},actions:{async initialize(){let t=this;this.connectSocket(),jP().then(e=>{t.mealHistories=e.meals,t.waterLogs=e.waterLogs}),Re("Physical","GetBodyMeasurements").then(e=>{this.bodyMeasurements=e.result}),Qg=!0},getMealsInRange(t,e,i){let s=this;return i&&HP(t,e).then(r=>{r.forEach(n=>{gt(n,s.meals)}),He(s.meals)}),this.meals.filter(r=>+new Date(r.startAt)>=t&&+new Date(r.startAt)<=e)},async getRecentFoodItems(){return Re("Physical","GetRecentFoodItems").then(t=>t.result)},getRecentFoodItems2(){return Re("Physical","GetRecentFoodItems_Refactored").then(t=>{t.result.forEach(e=>{gt(e,this.foodItems)})}),this.foodItems},async getWaterLogs(){return await UP()},getBodyMeasurements(){return this.bodyMeasurements},async foodSearchAutoComplete(t){return await GP(t)},async searchFoodUPC(t){return Re("Physical","SearchFoodUPC",{upc:t}).then(e=>e.result)},async saveFoodItem(t){return Re("Physical","SaveFoodItem",{model:t}).then(e=>e.result)},async addFoodItemToMeal(t){return Re("Physical","AddFoodItemToMeal",t).then(e=>e.result)},async replaceOGFoodItem(t,e){return Re("Physical","ReplaceOGFoodItem",{id_OG:t,id_New:e})},async logWater(t,e,i){return Re("Physical","LogWater",{amountFLOZ:t,dateTime:e,mealID:i}).then(s=>s.result)},async setMealTime(t,e,i){return Re("Physical","SetMealTime",{mealID:t,startAt:e,endAt:i}).then(s=>s.result)},async removeFoodItem(t,e){return Re("Physical","RemoveFoodItem",{mealID:t,foodItemID:e}).then(i=>i.result)},runUpdates(t){let e=this;t.meals&&t.meals.length>0&&(t.meals.forEach(i=>{gt(i,e.meals);let s={id:i.id,name:i.name,dateTime:i.dateTime,calories:i.calories,carbs:i.carbohydrates,protein:i.protein,fat:i.fat};gt(s,e.mealHistories)}),He(e.meals)),t.mealIDsRemoved&&t.mealIDsRemoved.length>0&&(t.mealIDsRemoved.forEach(i=>{on(i,e.meals),on(i,e.mealHistories)}),He(e.meals)),t.foodItems&&t.foodItems.length>0&&t.foodItems.forEach(i=>{gt(i,this.foodItems)}),t.foodItemIDsRemoved&&t.foodItemIDsRemoved.length>0&&(t.foodItemIDsRemoved.forEach(i=>{on(i,e.foodItems)}),He(e.foodItems)),t.waterLogs&&t.waterLogs.length>0&&(t.waterLogs.forEach(i=>{gt(i,e.waterLogs)}),He(e.waterLogs)),t.waterLogIDsRemoved&&t.waterLogIDsRemoved.length>0&&(t.waterLogIDsRemoved.forEach(i=>{on(i,e.waterLogs)}),He(e.waterLogs))},connectSocket(){Qg||vn("coachHub").on("SendUpdates",e=>{this.runUpdates(e)})},createFoodItem(){return{id:null,edamamID:null,nutritionixID:null,name:null,brandName:null,quantity:1,idUnit:null,unit:null,weight:1,grams:null,upc:null,thumbURL:null,wasConsumed:!1,units:[],calories:null,carbohydrates:null,protein:null,fat:null,calcium:null,cholesterol:null,monounsaturatedFat:null,polyunsaturatedFat:null,saturatedFat:null,transFat:null,iron:null,fiber:null,folate:null,potassium:null,magnesium:null,sodium:null,niacinB3:null,phosphorus:null,riboflavinB2:null,sugars:null,thiaminB1:null,vitaminE:null,vitaminA:null,vitaminB12:null,vitaminB6:null,vitaminC:null,vitaminD:null,vitaminK:null}}}}),ww=Object.freeze(Object.defineProperty({__proto__:null,usePhysicalStore:Js},Symbol.toStringTag,{value:"Module"})),Pt="https://coach-eea3hnh7fje3gxhw.canadacentral-01.azurewebsites.net";async function Re(t,e,i){return fetch(`${Pt}/api/${t}/${e}`,{method:"POST",headers:{"Content-Type":"application/json","Return-Updates":!YP()},body:JSON.stringify(i)}).then(s=>s.json()).then(qP).then(s=>(s.status.success||(console.error("Error:",s.status.message),alert(s.status.message)),s)).catch(s=>{console.error("Error:",s)})}function YP(){return bE("coachHub")}function qP(t){if(t.updates){let e=qn(),i=fo(),s=vr(),r=ba(),n=Sl(),o=wm(),a=Js();e.runUpdates(t.updates),i.runUpdates(t.updates),s.runUpdates(t.updates),r.runUpdates(t.updates),n.runUpdates(t.updates),o.runUpdates(t.updates),a.runUpdates(t.updates)}return t}async function KP(){return fetch(`${Pt}/api/Physical/GetWorkoutInfo`,{method:"POST",headers:{"Content-Type":"application/json"}}).then(t=>t.json()).then(t=>{if(t.errorMessage)this.errorMessage=t.errorMessage;else return t}).catch(t=>{console.error("Error:",t)})}async function nh(t){let e={id:t};return fetch(`${Pt}/api/Physical/GetWorkout`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(i=>i.json()).then(i=>{if(i.errorMessage)this.errorMessage=i.errorMessage;else return i}).catch(i=>{console.error("Error:",i)})}async function JP(){return fetch(`${Pt}/api/Physical/GetWorkouts`,{method:"POST",headers:{"Content-Type":"application/json"}}).then(t=>t.json()).then(t=>{if(t.errorMessage)this.errorMessage=t.errorMessage;else return t}).catch(t=>{console.error("Error:",t)})}async function QP(){return fetch(`${Pt}/api/Physical/GetExercises`,{method:"POST",headers:{"Content-Type":"application/json"}}).then(t=>t.json()).then(t=>{if(t.errorMessage)this.errorMessage=t.errorMessage;else return t}).catch(t=>{console.error("Error:",t)})}async function ZP(t){let e={eventID:t};return fetch(`${Pt}/api/Physical/GetWorkoutIDFromEvent`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(i=>i.json()).then(i=>{if(i.status.success)return i.result;console.error("Error:",i.status.errorMessage)}).catch(i=>{console.error("Error:",i)})}async function XP(t,e){let i={idExercise:t,variationIDs:e};return fetch(`${Pt}/api/Physical/GetExerciseHistory`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}).then(s=>s.json()).then(s=>{if(s.status.success)return s.result;console.error("Error:",s.status.errorMessage)}).catch(s=>{console.error("Error:",s)})}let Zg=!1;const mi=qs("workout",{state:()=>({workouts:[],exercises:[],sets:[],variations:[],muscleGroups:[],muscles:[],exerciseHistory:[],displaySettings:[],dragged:{exerciseID:void 0},selectedWorkoutID:void 0}),getters:{getDragged(){return this.dragged}},actions:{async initialize(){let t=this.fill();return this.connectSocket(),Zg=!0,t},async refresh(){return this.fill()},async fill(){return KP().then(e=>{this.workouts=e.workouts,this.exercises=e.exercises,this.variations=e.variations,this.muscleGroups=e.muscleGroups,this.muscles=e.muscles})},initializeItems(){let t=this;this.workouts.forEach(e=>{e.exercises.forEach(i=>{let s=t.exercises.find(r=>r.id==i.exercise.id);s&&(i.exercise=s)})})},setDraggedProps(t){this.dragged.exerciseID=t},clearDraggedProps(){this.dragged.exerciseID=void 0},selectWorkout(t){this.selectedWorkoutID=t},getDisplaySettings(t){var e=this.displaySettings.find(s=>s.workoutID==t);if(e)return e;e={workoutID:t,sections:[]};var i=this.getWorkout(t);return i.sections.forEach(s=>{e.sections.push({id:s.id,isOpen:!0})}),this.displaySettings.push(e),e},async getWorkoutIDFromEvent(t){var e=await ZP(t),i=nh(e);return i||(i=await nh(e).then(s=>(gt(s,_this.workouts),s))),e},getWorkout(t){const e=this;var i=this.workouts.find(s=>s.id==t);if(!i){nh(t).then(s=>{gt(s,e.workouts)});return}return i},getWorkouts(t){const e=this;return t&&JP().then(i=>(i.forEach(s=>{gt(s,e.workouts)}),i)),this.workouts},getActiveWorkouts(){return this.workouts.filter(e=>e.iteration?!e.iteration.completedAt:!1)},getWorkoutsInDate(t){return this.workouts.filter(i=>!!(i.iteration&&+i.iteration.startAt.startOfDay()==+t))},getExercise(t){return this.exercises.find(e=>e.id==t)},getExercises(t){const e=this;return t&&QP().then(i=>(i.forEach(s=>{gt(s,e.exercises)}),i)),this.exercises},getWorkoutExercise(t,e){let i,s=this.workouts.find(r=>r.id==e);if(s)for(let r=0;r<s.sections.length&&(i=s.sections[r].exercises.find(n=>n.idWorkoutExercise==t),!i);r++);return i},getVariation(t){return this.variations.find(e=>e.id==t)},getVariations(){return this.variations},getExerciseHistory(t,e){let i=this;e=e||[];let s=sh(e).toString();XP(t,e).then(n=>{let o=this.exerciseHistory.findIndex(l=>{let c=sh(l.variationIDs).toString();return l.idExercise==t&&s==c}),a={idExercise:t,variationIDs:e,history:n};o==-1&&i.exerciseHistory.push(a)});let r=this.exerciseHistory.find(n=>{let o=sh(n.variationIDs).toString();return n.idExercise==t&&s==o});return r?r.history:[]},getSetsForIterations(t){return this.sets.filter(i=>i.idIteration&&t.includes(i.id))},getExerciseIDOfTodo(t){var e=this.exercises.find(i=>i.idTodo==t);return e?e.id:void 0},getExerciseForTodo(t){var e=this.exercises.find(i=>i.idTodo==t);return e},addVariation(t,e,i){if(!this.variations.find(r=>r.name==t&&r.type.id==e)){let r={name:t,description:void 0,type:{id:e,text:i}};this.variations.splice(0,0,r)}},addExercisesToSection(t,e,i,s){let n=this.workouts.find(a=>a.id==t).sections.find(a=>a.id==e);if(s==null){let a=n.exercises.filter(l=>l.position!=null);s=a.length>0?a.at(-1).position+1:1}return Re("Physical","AddExercisesToWorkout",{exerciseIDs:i,idWorkout:t,idWorkoutSection:e,position:s}).then(this.onResponse)},getActiveExercise(t){let e,i=this.workouts.find(s=>s.id==t);if(i){let s=i.sections.flatMap(r=>r.exercises);for(let r=0;r<s.length;r++){let n=!1;if(e=s[r],e.sets.forEach(o=>{o.iteration==null&&(n=!0)}),n)break}}return e},getNextWorkoutExercise(t,e){let i,s=this.workouts.find(r=>r.id==t);if(s){let r=s.sections.flatMap(o=>o.exercises),n=r.findIndex(o=>o.id==e);if(n<r.length-1)return r[n+1]}return i},getPreviouseExercise(t,e){},getMuscleGroup(t){return this.muscleGroups.find(e=>e.id==t)},getMuscleGroups(){return this.muscleGroups},async saveExercise(t){return Re("Physical","SaveExercise",t).then(this.onResponse)},async saveWorkout(t){return Re("Physical","SaveWorkout",t).then(this.onResponse)},async copyAndStartWorkout(t,e){return Re("Physical","CopyAndStartWorkout",{workoutID:t,startAt:e}).then(this.onResponse)},async saveSet(t){return Re("Physical","SaveSet",t).then(this.onResponse)},async logSet(t,e){return Re("Physical","LogSet",{setID:t,completedAt:e}).then(this.onResponse)},async logAllSets(t){return Re("Physical","LogAllSets",{idWorkoutExercise:t}).then(this.onResponse)},async completeWorkout(t,e,i,s){return Re("Physical","CompleteWorkout",{workoutID:t,startAt:e,endAt:i,createEvent:s}).then(this.onResponse)},async repositionExercise(t,e,i){return Re("Physical","RepositionExercise",{exerciseID:t,sectionID:e,position:i}).then(this.onResponse)},async removeExerciseFromWorkout(t){return Re("Physical","RemoveExerciseFromWorkout",{idWorkoutExercise:t}).then(this.onResponse)},async createFitnessGoal(t,e,i,s,r,n){Re("Physical","CreateFitnessGoal",{idGoalTimePairTodo:t,frequency:e,sets:i,reps:s,weight:r,time:n}).then(this.onResponse)},async saveFitnessGoal(t,e,i,s,r,n){Re("Physical","SaveFitnessGoal",{idFitnessGoal:t,frequency:e,sets:i,reps:s,weight:r,time:n}).then(this.onResponse)},onResponse(t){return t.updates&&this.runUpdates(t.updates),t.result},runUpdates(t){let e=this;t.workouts&&t.workouts.length>0&&(t.workouts.forEach(i=>{gt(i,e.workouts)}),He(e.workouts)),t.workoutIDsRemoved&&t.workoutIDsRemoved.length>0&&(t.workoutIDsRemoved.forEach(i=>{on(i,e.workouts)}),He(e.workouts)),t.exercises&&t.exercises.length>0&&(t.exercises.forEach(i=>{gt(i,e.exercises)}),He(e.exercises))},connectSocket(){Zg||vn("coachHub").on("SendUpdates",e=>{this.runUpdates(e)})}}}),Gl=Object.freeze(Object.defineProperty({__proto__:null,useWorkoutStore:mi},Symbol.toStringTag,{value:"Module"}));var Kd={exports:{}};/*!
 * jQuery JavaScript Library v3.6.0
 * https://jquery.com/
 *
 * Includes Sizzle.js
 * https://sizzlejs.com/
 *
 * Copyright OpenJS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2021-03-02T17:08Z
 */var eA=Kd.exports,Xg;function tA(){return Xg||(Xg=1,function(t){(function(e,i){t.exports=e.document?i(e,!0):function(s){if(!s.document)throw new Error("jQuery requires a window with a document");return i(s)}})(typeof window<"u"?window:eA,function(e,i){var s=[],r=Object.getPrototypeOf,n=s.slice,o=s.flat?function(u){return s.flat.call(u)}:function(u){return s.concat.apply([],u)},a=s.push,l=s.indexOf,c={},f=c.toString,v=c.hasOwnProperty,S=v.toString,I=S.call(Object),C={},D=function(h){return typeof h=="function"&&typeof h.nodeType!="number"&&typeof h.item!="function"},J=function(h){return h!=null&&h===h.window},V=e.document,se={type:!0,src:!0,nonce:!0,noModule:!0};function oe(u,h,g){g=g||V;var y,b,w=g.createElement("script");if(w.text=u,h)for(y in se)b=h[y]||h.getAttribute&&h.getAttribute(y),b&&w.setAttribute(y,b);g.head.appendChild(w).parentNode.removeChild(w)}function ee(u){return u==null?u+"":typeof u=="object"||typeof u=="function"?c[f.call(u)]||"object":typeof u}var _e="3.6.0",_=function(u,h){return new _.fn.init(u,h)};_.fn=_.prototype={jquery:_e,constructor:_,length:0,toArray:function(){return n.call(this)},get:function(u){return u==null?n.call(this):u<0?this[u+this.length]:this[u]},pushStack:function(u){var h=_.merge(this.constructor(),u);return h.prevObject=this,h},each:function(u){return _.each(this,u)},map:function(u){return this.pushStack(_.map(this,function(h,g){return u.call(h,g,h)}))},slice:function(){return this.pushStack(n.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(_.grep(this,function(u,h){return(h+1)%2}))},odd:function(){return this.pushStack(_.grep(this,function(u,h){return h%2}))},eq:function(u){var h=this.length,g=+u+(u<0?h:0);return this.pushStack(g>=0&&g<h?[this[g]]:[])},end:function(){return this.prevObject||this.constructor()},push:a,sort:s.sort,splice:s.splice},_.extend=_.fn.extend=function(){var u,h,g,y,b,w,T=arguments[0]||{},M=1,O=arguments.length,z=!1;for(typeof T=="boolean"&&(z=T,T=arguments[M]||{},M++),typeof T!="object"&&!D(T)&&(T={}),M===O&&(T=this,M--);M<O;M++)if((u=arguments[M])!=null)for(h in u)y=u[h],!(h==="__proto__"||T===y)&&(z&&y&&(_.isPlainObject(y)||(b=Array.isArray(y)))?(g=T[h],b&&!Array.isArray(g)?w=[]:!b&&!_.isPlainObject(g)?w={}:w=g,b=!1,T[h]=_.extend(z,w,y)):y!==void 0&&(T[h]=y));return T},_.extend({expando:"jQuery"+(_e+Math.random()).replace(/\D/g,""),isReady:!0,error:function(u){throw new Error(u)},noop:function(){},isPlainObject:function(u){var h,g;return!u||f.call(u)!=="[object Object]"?!1:(h=r(u),h?(g=v.call(h,"constructor")&&h.constructor,typeof g=="function"&&S.call(g)===I):!0)},isEmptyObject:function(u){var h;for(h in u)return!1;return!0},globalEval:function(u,h,g){oe(u,{nonce:h&&h.nonce},g)},each:function(u,h){var g,y=0;if(Ee(u))for(g=u.length;y<g&&h.call(u[y],y,u[y])!==!1;y++);else for(y in u)if(h.call(u[y],y,u[y])===!1)break;return u},makeArray:function(u,h){var g=h||[];return u!=null&&(Ee(Object(u))?_.merge(g,typeof u=="string"?[u]:u):a.call(g,u)),g},inArray:function(u,h,g){return h==null?-1:l.call(h,u,g)},merge:function(u,h){for(var g=+h.length,y=0,b=u.length;y<g;y++)u[b++]=h[y];return u.length=b,u},grep:function(u,h,g){for(var y,b=[],w=0,T=u.length,M=!g;w<T;w++)y=!h(u[w],w),y!==M&&b.push(u[w]);return b},map:function(u,h,g){var y,b,w=0,T=[];if(Ee(u))for(y=u.length;w<y;w++)b=h(u[w],w,g),b!=null&&T.push(b);else for(w in u)b=h(u[w],w,g),b!=null&&T.push(b);return o(T)},guid:1,support:C}),typeof Symbol=="function"&&(_.fn[Symbol.iterator]=s[Symbol.iterator]),_.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(u,h){c["[object "+h+"]"]=h.toLowerCase()});function Ee(u){var h=!!u&&"length"in u&&u.length,g=ee(u);return D(u)||J(u)?!1:g==="array"||h===0||typeof h=="number"&&h>0&&h-1 in u}var Te=function(u){var h,g,y,b,w,T,M,O,z,te,me,Z,re,Ve,nt,We,di,oi,ts,kt="sizzle"+1*new Date,tt=u.document,Ki=0,pt=0,Zt=cd(),Ma=cd(),ld=cd(),is=cd(),Or=function(E,R){return E===R&&(me=!0),0},$r={}.hasOwnProperty,Ji=[],Qn=Ji.pop,ms=Ji.push,Zn=Ji.push,Wp=Ji.slice,Nr=function(E,R){for(var N=0,le=E.length;N<le;N++)if(E[N]===R)return N;return-1},Rc="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",xt="[\\x20\\t\\r\\n\\f]",Lr="(?:\\\\[\\da-fA-F]{1,6}"+xt+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",Fp="\\["+xt+"*("+Lr+")(?:"+xt+"*([*^$|!~]?=)"+xt+`*(?:'((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)"|(`+Lr+"))|)"+xt+"*\\]",Mc=":("+Lr+`)(?:\\((('((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)")|((?:\\\\.|[^\\\\()[\\]]|`+Fp+")*)|.*)\\)|)",UT=new RegExp(xt+"+","g"),dd=new RegExp("^"+xt+"+|((?:^|[^\\\\])(?:\\\\.)*)"+xt+"+$","g"),GT=new RegExp("^"+xt+"*,"+xt+"*"),Bp=new RegExp("^"+xt+"*([>+~]|"+xt+")"+xt+"*"),YT=new RegExp(xt+"|>"),qT=new RegExp(Mc),KT=new RegExp("^"+Lr+"$"),ud={ID:new RegExp("^#("+Lr+")"),CLASS:new RegExp("^\\.("+Lr+")"),TAG:new RegExp("^("+Lr+"|[*])"),ATTR:new RegExp("^"+Fp),PSEUDO:new RegExp("^"+Mc),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+xt+"*(even|odd|(([+-]|)(\\d*)n|)"+xt+"*(?:([+-]|)"+xt+"*(\\d+)|))"+xt+"*\\)|)","i"),bool:new RegExp("^(?:"+Rc+")$","i"),needsContext:new RegExp("^"+xt+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+xt+"*((?:-\\d)?\\d*)"+xt+"*\\)|)(?=[^-]|$)","i")},JT=/HTML$/i,QT=/^(?:input|select|textarea|button)$/i,ZT=/^h\d$/i,Oa=/^[^{]+\{\s*\[native \w/,XT=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Oc=/[+~]/,wn=new RegExp("\\\\[\\da-fA-F]{1,6}"+xt+"?|\\\\([^\\r\\n\\f])","g"),Sn=function(E,R){var N="0x"+E.slice(1)-65536;return R||(N<0?String.fromCharCode(N+65536):String.fromCharCode(N>>10|55296,N&1023|56320))},zp=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,jp=function(E,R){return R?E==="\0"?"":E.slice(0,-1)+"\\"+E.charCodeAt(E.length-1).toString(16)+" ":"\\"+E},Hp=function(){Z()},e0=fd(function(E){return E.disabled===!0&&E.nodeName.toLowerCase()==="fieldset"},{dir:"parentNode",next:"legend"});try{Zn.apply(Ji=Wp.call(tt.childNodes),tt.childNodes),Ji[tt.childNodes.length].nodeType}catch{Zn={apply:Ji.length?function(R,N){ms.apply(R,Wp.call(N))}:function(R,N){for(var le=R.length,j=0;R[le++]=N[j++];);R.length=le-1}}}function At(E,R,N,le){var j,ue,pe,Ie,Ce,qe,Ue,Qe=R&&R.ownerDocument,dt=R?R.nodeType:9;if(N=N||[],typeof E!="string"||!E||dt!==1&&dt!==9&&dt!==11)return N;if(!le&&(Z(R),R=R||re,nt)){if(dt!==11&&(Ce=XT.exec(E)))if(j=Ce[1]){if(dt===9)if(pe=R.getElementById(j)){if(pe.id===j)return N.push(pe),N}else return N;else if(Qe&&(pe=Qe.getElementById(j))&&ts(R,pe)&&pe.id===j)return N.push(pe),N}else{if(Ce[2])return Zn.apply(N,R.getElementsByTagName(E)),N;if((j=Ce[3])&&g.getElementsByClassName&&R.getElementsByClassName)return Zn.apply(N,R.getElementsByClassName(j)),N}if(g.qsa&&!is[E+" "]&&(!We||!We.test(E))&&(dt!==1||R.nodeName.toLowerCase()!=="object")){if(Ue=E,Qe=R,dt===1&&(YT.test(E)||Bp.test(E))){for(Qe=Oc.test(E)&&Nc(R.parentNode)||R,(Qe!==R||!g.scope)&&((Ie=R.getAttribute("id"))?Ie=Ie.replace(zp,jp):R.setAttribute("id",Ie=kt)),qe=T(E),ue=qe.length;ue--;)qe[ue]=(Ie?"#"+Ie:":scope")+" "+hd(qe[ue]);Ue=qe.join(",")}try{return Zn.apply(N,Qe.querySelectorAll(Ue)),N}catch{is(E,!0)}finally{Ie===kt&&R.removeAttribute("id")}}}return O(E.replace(dd,"$1"),R,N,le)}function cd(){var E=[];function R(N,le){return E.push(N+" ")>y.cacheLength&&delete R[E.shift()],R[N+" "]=le}return R}function Rs(E){return E[kt]=!0,E}function Ms(E){var R=re.createElement("fieldset");try{return!!E(R)}catch{return!1}finally{R.parentNode&&R.parentNode.removeChild(R),R=null}}function $c(E,R){for(var N=E.split("|"),le=N.length;le--;)y.attrHandle[N[le]]=R}function Up(E,R){var N=R&&E,le=N&&E.nodeType===1&&R.nodeType===1&&E.sourceIndex-R.sourceIndex;if(le)return le;if(N){for(;N=N.nextSibling;)if(N===R)return-1}return E?1:-1}function t0(E){return function(R){var N=R.nodeName.toLowerCase();return N==="input"&&R.type===E}}function i0(E){return function(R){var N=R.nodeName.toLowerCase();return(N==="input"||N==="button")&&R.type===E}}function Gp(E){return function(R){return"form"in R?R.parentNode&&R.disabled===!1?"label"in R?"label"in R.parentNode?R.parentNode.disabled===E:R.disabled===E:R.isDisabled===E||R.isDisabled!==!E&&e0(R)===E:R.disabled===E:"label"in R?R.disabled===E:!1}}function Vr(E){return Rs(function(R){return R=+R,Rs(function(N,le){for(var j,ue=E([],N.length,R),pe=ue.length;pe--;)N[j=ue[pe]]&&(N[j]=!(le[j]=N[j]))})})}function Nc(E){return E&&typeof E.getElementsByTagName<"u"&&E}g=At.support={},w=At.isXML=function(E){var R=E&&E.namespaceURI,N=E&&(E.ownerDocument||E).documentElement;return!JT.test(R||N&&N.nodeName||"HTML")},Z=At.setDocument=function(E){var R,N,le=E?E.ownerDocument||E:tt;return le==re||le.nodeType!==9||!le.documentElement||(re=le,Ve=re.documentElement,nt=!w(re),tt!=re&&(N=re.defaultView)&&N.top!==N&&(N.addEventListener?N.addEventListener("unload",Hp,!1):N.attachEvent&&N.attachEvent("onunload",Hp)),g.scope=Ms(function(j){return Ve.appendChild(j).appendChild(re.createElement("div")),typeof j.querySelectorAll<"u"&&!j.querySelectorAll(":scope fieldset div").length}),g.attributes=Ms(function(j){return j.className="i",!j.getAttribute("className")}),g.getElementsByTagName=Ms(function(j){return j.appendChild(re.createComment("")),!j.getElementsByTagName("*").length}),g.getElementsByClassName=Oa.test(re.getElementsByClassName),g.getById=Ms(function(j){return Ve.appendChild(j).id=kt,!re.getElementsByName||!re.getElementsByName(kt).length}),g.getById?(y.filter.ID=function(j){var ue=j.replace(wn,Sn);return function(pe){return pe.getAttribute("id")===ue}},y.find.ID=function(j,ue){if(typeof ue.getElementById<"u"&&nt){var pe=ue.getElementById(j);return pe?[pe]:[]}}):(y.filter.ID=function(j){var ue=j.replace(wn,Sn);return function(pe){var Ie=typeof pe.getAttributeNode<"u"&&pe.getAttributeNode("id");return Ie&&Ie.value===ue}},y.find.ID=function(j,ue){if(typeof ue.getElementById<"u"&&nt){var pe,Ie,Ce,qe=ue.getElementById(j);if(qe){if(pe=qe.getAttributeNode("id"),pe&&pe.value===j)return[qe];for(Ce=ue.getElementsByName(j),Ie=0;qe=Ce[Ie++];)if(pe=qe.getAttributeNode("id"),pe&&pe.value===j)return[qe]}return[]}}),y.find.TAG=g.getElementsByTagName?function(j,ue){if(typeof ue.getElementsByTagName<"u")return ue.getElementsByTagName(j);if(g.qsa)return ue.querySelectorAll(j)}:function(j,ue){var pe,Ie=[],Ce=0,qe=ue.getElementsByTagName(j);if(j==="*"){for(;pe=qe[Ce++];)pe.nodeType===1&&Ie.push(pe);return Ie}return qe},y.find.CLASS=g.getElementsByClassName&&function(j,ue){if(typeof ue.getElementsByClassName<"u"&&nt)return ue.getElementsByClassName(j)},di=[],We=[],(g.qsa=Oa.test(re.querySelectorAll))&&(Ms(function(j){var ue;Ve.appendChild(j).innerHTML="<a id='"+kt+"'></a><select id='"+kt+"-\r\\' msallowcapture=''><option selected=''></option></select>",j.querySelectorAll("[msallowcapture^='']").length&&We.push("[*^$]="+xt+`*(?:''|"")`),j.querySelectorAll("[selected]").length||We.push("\\["+xt+"*(?:value|"+Rc+")"),j.querySelectorAll("[id~="+kt+"-]").length||We.push("~="),ue=re.createElement("input"),ue.setAttribute("name",""),j.appendChild(ue),j.querySelectorAll("[name='']").length||We.push("\\["+xt+"*name"+xt+"*="+xt+`*(?:''|"")`),j.querySelectorAll(":checked").length||We.push(":checked"),j.querySelectorAll("a#"+kt+"+*").length||We.push(".#.+[+~]"),j.querySelectorAll("\\\f"),We.push("[\\r\\n\\f]")}),Ms(function(j){j.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var ue=re.createElement("input");ue.setAttribute("type","hidden"),j.appendChild(ue).setAttribute("name","D"),j.querySelectorAll("[name=d]").length&&We.push("name"+xt+"*[*^$|!~]?="),j.querySelectorAll(":enabled").length!==2&&We.push(":enabled",":disabled"),Ve.appendChild(j).disabled=!0,j.querySelectorAll(":disabled").length!==2&&We.push(":enabled",":disabled"),j.querySelectorAll("*,:x"),We.push(",.*:")})),(g.matchesSelector=Oa.test(oi=Ve.matches||Ve.webkitMatchesSelector||Ve.mozMatchesSelector||Ve.oMatchesSelector||Ve.msMatchesSelector))&&Ms(function(j){g.disconnectedMatch=oi.call(j,"*"),oi.call(j,"[s!='']:x"),di.push("!=",Mc)}),We=We.length&&new RegExp(We.join("|")),di=di.length&&new RegExp(di.join("|")),R=Oa.test(Ve.compareDocumentPosition),ts=R||Oa.test(Ve.contains)?function(j,ue){var pe=j.nodeType===9?j.documentElement:j,Ie=ue&&ue.parentNode;return j===Ie||!!(Ie&&Ie.nodeType===1&&(pe.contains?pe.contains(Ie):j.compareDocumentPosition&&j.compareDocumentPosition(Ie)&16))}:function(j,ue){if(ue){for(;ue=ue.parentNode;)if(ue===j)return!0}return!1},Or=R?function(j,ue){if(j===ue)return me=!0,0;var pe=!j.compareDocumentPosition-!ue.compareDocumentPosition;return pe||(pe=(j.ownerDocument||j)==(ue.ownerDocument||ue)?j.compareDocumentPosition(ue):1,pe&1||!g.sortDetached&&ue.compareDocumentPosition(j)===pe?j==re||j.ownerDocument==tt&&ts(tt,j)?-1:ue==re||ue.ownerDocument==tt&&ts(tt,ue)?1:te?Nr(te,j)-Nr(te,ue):0:pe&4?-1:1)}:function(j,ue){if(j===ue)return me=!0,0;var pe,Ie=0,Ce=j.parentNode,qe=ue.parentNode,Ue=[j],Qe=[ue];if(!Ce||!qe)return j==re?-1:ue==re?1:Ce?-1:qe?1:te?Nr(te,j)-Nr(te,ue):0;if(Ce===qe)return Up(j,ue);for(pe=j;pe=pe.parentNode;)Ue.unshift(pe);for(pe=ue;pe=pe.parentNode;)Qe.unshift(pe);for(;Ue[Ie]===Qe[Ie];)Ie++;return Ie?Up(Ue[Ie],Qe[Ie]):Ue[Ie]==tt?-1:Qe[Ie]==tt?1:0}),re},At.matches=function(E,R){return At(E,null,null,R)},At.matchesSelector=function(E,R){if(Z(E),g.matchesSelector&&nt&&!is[R+" "]&&(!di||!di.test(R))&&(!We||!We.test(R)))try{var N=oi.call(E,R);if(N||g.disconnectedMatch||E.document&&E.document.nodeType!==11)return N}catch{is(R,!0)}return At(R,re,null,[E]).length>0},At.contains=function(E,R){return(E.ownerDocument||E)!=re&&Z(E),ts(E,R)},At.attr=function(E,R){(E.ownerDocument||E)!=re&&Z(E);var N=y.attrHandle[R.toLowerCase()],le=N&&$r.call(y.attrHandle,R.toLowerCase())?N(E,R,!nt):void 0;return le!==void 0?le:g.attributes||!nt?E.getAttribute(R):(le=E.getAttributeNode(R))&&le.specified?le.value:null},At.escape=function(E){return(E+"").replace(zp,jp)},At.error=function(E){throw new Error("Syntax error, unrecognized expression: "+E)},At.uniqueSort=function(E){var R,N=[],le=0,j=0;if(me=!g.detectDuplicates,te=!g.sortStable&&E.slice(0),E.sort(Or),me){for(;R=E[j++];)R===E[j]&&(le=N.push(j));for(;le--;)E.splice(N[le],1)}return te=null,E},b=At.getText=function(E){var R,N="",le=0,j=E.nodeType;if(j){if(j===1||j===9||j===11){if(typeof E.textContent=="string")return E.textContent;for(E=E.firstChild;E;E=E.nextSibling)N+=b(E)}else if(j===3||j===4)return E.nodeValue}else for(;R=E[le++];)N+=b(R);return N},y=At.selectors={cacheLength:50,createPseudo:Rs,match:ud,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(E){return E[1]=E[1].replace(wn,Sn),E[3]=(E[3]||E[4]||E[5]||"").replace(wn,Sn),E[2]==="~="&&(E[3]=" "+E[3]+" "),E.slice(0,4)},CHILD:function(E){return E[1]=E[1].toLowerCase(),E[1].slice(0,3)==="nth"?(E[3]||At.error(E[0]),E[4]=+(E[4]?E[5]+(E[6]||1):2*(E[3]==="even"||E[3]==="odd")),E[5]=+(E[7]+E[8]||E[3]==="odd")):E[3]&&At.error(E[0]),E},PSEUDO:function(E){var R,N=!E[6]&&E[2];return ud.CHILD.test(E[0])?null:(E[3]?E[2]=E[4]||E[5]||"":N&&qT.test(N)&&(R=T(N,!0))&&(R=N.indexOf(")",N.length-R)-N.length)&&(E[0]=E[0].slice(0,R),E[2]=N.slice(0,R)),E.slice(0,3))}},filter:{TAG:function(E){var R=E.replace(wn,Sn).toLowerCase();return E==="*"?function(){return!0}:function(N){return N.nodeName&&N.nodeName.toLowerCase()===R}},CLASS:function(E){var R=Zt[E+" "];return R||(R=new RegExp("(^|"+xt+")"+E+"("+xt+"|$)"))&&Zt(E,function(N){return R.test(typeof N.className=="string"&&N.className||typeof N.getAttribute<"u"&&N.getAttribute("class")||"")})},ATTR:function(E,R,N){return function(le){var j=At.attr(le,E);return j==null?R==="!=":R?(j+="",R==="="?j===N:R==="!="?j!==N:R==="^="?N&&j.indexOf(N)===0:R==="*="?N&&j.indexOf(N)>-1:R==="$="?N&&j.slice(-N.length)===N:R==="~="?(" "+j.replace(UT," ")+" ").indexOf(N)>-1:R==="|="?j===N||j.slice(0,N.length+1)===N+"-":!1):!0}},CHILD:function(E,R,N,le,j){var ue=E.slice(0,3)!=="nth",pe=E.slice(-4)!=="last",Ie=R==="of-type";return le===1&&j===0?function(Ce){return!!Ce.parentNode}:function(Ce,qe,Ue){var Qe,dt,Rt,Ke,ui,Ci,ss=ue!==pe?"nextSibling":"previousSibling",Yt=Ce.parentNode,$a=Ie&&Ce.nodeName.toLowerCase(),Na=!Ue&&!Ie,ns=!1;if(Yt){if(ue){for(;ss;){for(Ke=Ce;Ke=Ke[ss];)if(Ie?Ke.nodeName.toLowerCase()===$a:Ke.nodeType===1)return!1;Ci=ss=E==="only"&&!Ci&&"nextSibling"}return!0}if(Ci=[pe?Yt.firstChild:Yt.lastChild],pe&&Na){for(Ke=Yt,Rt=Ke[kt]||(Ke[kt]={}),dt=Rt[Ke.uniqueID]||(Rt[Ke.uniqueID]={}),Qe=dt[E]||[],ui=Qe[0]===Ki&&Qe[1],ns=ui&&Qe[2],Ke=ui&&Yt.childNodes[ui];Ke=++ui&&Ke&&Ke[ss]||(ns=ui=0)||Ci.pop();)if(Ke.nodeType===1&&++ns&&Ke===Ce){dt[E]=[Ki,ui,ns];break}}else if(Na&&(Ke=Ce,Rt=Ke[kt]||(Ke[kt]={}),dt=Rt[Ke.uniqueID]||(Rt[Ke.uniqueID]={}),Qe=dt[E]||[],ui=Qe[0]===Ki&&Qe[1],ns=ui),ns===!1)for(;(Ke=++ui&&Ke&&Ke[ss]||(ns=ui=0)||Ci.pop())&&!((Ie?Ke.nodeName.toLowerCase()===$a:Ke.nodeType===1)&&++ns&&(Na&&(Rt=Ke[kt]||(Ke[kt]={}),dt=Rt[Ke.uniqueID]||(Rt[Ke.uniqueID]={}),dt[E]=[Ki,ns]),Ke===Ce)););return ns-=j,ns===le||ns%le===0&&ns/le>=0}}},PSEUDO:function(E,R){var N,le=y.pseudos[E]||y.setFilters[E.toLowerCase()]||At.error("unsupported pseudo: "+E);return le[kt]?le(R):le.length>1?(N=[E,E,"",R],y.setFilters.hasOwnProperty(E.toLowerCase())?Rs(function(j,ue){for(var pe,Ie=le(j,R),Ce=Ie.length;Ce--;)pe=Nr(j,Ie[Ce]),j[pe]=!(ue[pe]=Ie[Ce])}):function(j){return le(j,0,N)}):le}},pseudos:{not:Rs(function(E){var R=[],N=[],le=M(E.replace(dd,"$1"));return le[kt]?Rs(function(j,ue,pe,Ie){for(var Ce,qe=le(j,null,Ie,[]),Ue=j.length;Ue--;)(Ce=qe[Ue])&&(j[Ue]=!(ue[Ue]=Ce))}):function(j,ue,pe){return R[0]=j,le(R,null,pe,N),R[0]=null,!N.pop()}}),has:Rs(function(E){return function(R){return At(E,R).length>0}}),contains:Rs(function(E){return E=E.replace(wn,Sn),function(R){return(R.textContent||b(R)).indexOf(E)>-1}}),lang:Rs(function(E){return KT.test(E||"")||At.error("unsupported lang: "+E),E=E.replace(wn,Sn).toLowerCase(),function(R){var N;do if(N=nt?R.lang:R.getAttribute("xml:lang")||R.getAttribute("lang"))return N=N.toLowerCase(),N===E||N.indexOf(E+"-")===0;while((R=R.parentNode)&&R.nodeType===1);return!1}}),target:function(E){var R=u.location&&u.location.hash;return R&&R.slice(1)===E.id},root:function(E){return E===Ve},focus:function(E){return E===re.activeElement&&(!re.hasFocus||re.hasFocus())&&!!(E.type||E.href||~E.tabIndex)},enabled:Gp(!1),disabled:Gp(!0),checked:function(E){var R=E.nodeName.toLowerCase();return R==="input"&&!!E.checked||R==="option"&&!!E.selected},selected:function(E){return E.parentNode&&E.parentNode.selectedIndex,E.selected===!0},empty:function(E){for(E=E.firstChild;E;E=E.nextSibling)if(E.nodeType<6)return!1;return!0},parent:function(E){return!y.pseudos.empty(E)},header:function(E){return ZT.test(E.nodeName)},input:function(E){return QT.test(E.nodeName)},button:function(E){var R=E.nodeName.toLowerCase();return R==="input"&&E.type==="button"||R==="button"},text:function(E){var R;return E.nodeName.toLowerCase()==="input"&&E.type==="text"&&((R=E.getAttribute("type"))==null||R.toLowerCase()==="text")},first:Vr(function(){return[0]}),last:Vr(function(E,R){return[R-1]}),eq:Vr(function(E,R,N){return[N<0?N+R:N]}),even:Vr(function(E,R){for(var N=0;N<R;N+=2)E.push(N);return E}),odd:Vr(function(E,R){for(var N=1;N<R;N+=2)E.push(N);return E}),lt:Vr(function(E,R,N){for(var le=N<0?N+R:N>R?R:N;--le>=0;)E.push(le);return E}),gt:Vr(function(E,R,N){for(var le=N<0?N+R:N;++le<R;)E.push(le);return E})}},y.pseudos.nth=y.pseudos.eq;for(h in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})y.pseudos[h]=t0(h);for(h in{submit:!0,reset:!0})y.pseudos[h]=i0(h);function Yp(){}Yp.prototype=y.filters=y.pseudos,y.setFilters=new Yp,T=At.tokenize=function(E,R){var N,le,j,ue,pe,Ie,Ce,qe=Ma[E+" "];if(qe)return R?0:qe.slice(0);for(pe=E,Ie=[],Ce=y.preFilter;pe;){(!N||(le=GT.exec(pe)))&&(le&&(pe=pe.slice(le[0].length)||pe),Ie.push(j=[])),N=!1,(le=Bp.exec(pe))&&(N=le.shift(),j.push({value:N,type:le[0].replace(dd," ")}),pe=pe.slice(N.length));for(ue in y.filter)(le=ud[ue].exec(pe))&&(!Ce[ue]||(le=Ce[ue](le)))&&(N=le.shift(),j.push({value:N,type:ue,matches:le}),pe=pe.slice(N.length));if(!N)break}return R?pe.length:pe?At.error(E):Ma(E,Ie).slice(0)};function hd(E){for(var R=0,N=E.length,le="";R<N;R++)le+=E[R].value;return le}function fd(E,R,N){var le=R.dir,j=R.next,ue=j||le,pe=N&&ue==="parentNode",Ie=pt++;return R.first?function(Ce,qe,Ue){for(;Ce=Ce[le];)if(Ce.nodeType===1||pe)return E(Ce,qe,Ue);return!1}:function(Ce,qe,Ue){var Qe,dt,Rt,Ke=[Ki,Ie];if(Ue){for(;Ce=Ce[le];)if((Ce.nodeType===1||pe)&&E(Ce,qe,Ue))return!0}else for(;Ce=Ce[le];)if(Ce.nodeType===1||pe)if(Rt=Ce[kt]||(Ce[kt]={}),dt=Rt[Ce.uniqueID]||(Rt[Ce.uniqueID]={}),j&&j===Ce.nodeName.toLowerCase())Ce=Ce[le]||Ce;else{if((Qe=dt[ue])&&Qe[0]===Ki&&Qe[1]===Ie)return Ke[2]=Qe[2];if(dt[ue]=Ke,Ke[2]=E(Ce,qe,Ue))return!0}return!1}}function Lc(E){return E.length>1?function(R,N,le){for(var j=E.length;j--;)if(!E[j](R,N,le))return!1;return!0}:E[0]}function s0(E,R,N){for(var le=0,j=R.length;le<j;le++)At(E,R[le],N);return N}function md(E,R,N,le,j){for(var ue,pe=[],Ie=0,Ce=E.length,qe=R!=null;Ie<Ce;Ie++)(ue=E[Ie])&&(!N||N(ue,le,j))&&(pe.push(ue),qe&&R.push(Ie));return pe}function Vc(E,R,N,le,j,ue){return le&&!le[kt]&&(le=Vc(le)),j&&!j[kt]&&(j=Vc(j,ue)),Rs(function(pe,Ie,Ce,qe){var Ue,Qe,dt,Rt=[],Ke=[],ui=Ie.length,Ci=pe||s0(R||"*",Ce.nodeType?[Ce]:Ce,[]),ss=E&&(pe||!R)?md(Ci,Rt,E,Ce,qe):Ci,Yt=N?j||(pe?E:ui||le)?[]:Ie:ss;if(N&&N(ss,Yt,Ce,qe),le)for(Ue=md(Yt,Ke),le(Ue,[],Ce,qe),Qe=Ue.length;Qe--;)(dt=Ue[Qe])&&(Yt[Ke[Qe]]=!(ss[Ke[Qe]]=dt));if(pe){if(j||E){if(j){for(Ue=[],Qe=Yt.length;Qe--;)(dt=Yt[Qe])&&Ue.push(ss[Qe]=dt);j(null,Yt=[],Ue,qe)}for(Qe=Yt.length;Qe--;)(dt=Yt[Qe])&&(Ue=j?Nr(pe,dt):Rt[Qe])>-1&&(pe[Ue]=!(Ie[Ue]=dt))}}else Yt=md(Yt===Ie?Yt.splice(ui,Yt.length):Yt),j?j(null,Ie,Yt,qe):Zn.apply(Ie,Yt)})}function Wc(E){for(var R,N,le,j=E.length,ue=y.relative[E[0].type],pe=ue||y.relative[" "],Ie=ue?1:0,Ce=fd(function(Qe){return Qe===R},pe,!0),qe=fd(function(Qe){return Nr(R,Qe)>-1},pe,!0),Ue=[function(Qe,dt,Rt){var Ke=!ue&&(Rt||dt!==z)||((R=dt).nodeType?Ce(Qe,dt,Rt):qe(Qe,dt,Rt));return R=null,Ke}];Ie<j;Ie++)if(N=y.relative[E[Ie].type])Ue=[fd(Lc(Ue),N)];else{if(N=y.filter[E[Ie].type].apply(null,E[Ie].matches),N[kt]){for(le=++Ie;le<j&&!y.relative[E[le].type];le++);return Vc(Ie>1&&Lc(Ue),Ie>1&&hd(E.slice(0,Ie-1).concat({value:E[Ie-2].type===" "?"*":""})).replace(dd,"$1"),N,Ie<le&&Wc(E.slice(Ie,le)),le<j&&Wc(E=E.slice(le)),le<j&&hd(E))}Ue.push(N)}return Lc(Ue)}function n0(E,R){var N=R.length>0,le=E.length>0,j=function(ue,pe,Ie,Ce,qe){var Ue,Qe,dt,Rt=0,Ke="0",ui=ue&&[],Ci=[],ss=z,Yt=ue||le&&y.find.TAG("*",qe),$a=Ki+=ss==null?1:Math.random()||.1,Na=Yt.length;for(qe&&(z=pe==re||pe||qe);Ke!==Na&&(Ue=Yt[Ke])!=null;Ke++){if(le&&Ue){for(Qe=0,!pe&&Ue.ownerDocument!=re&&(Z(Ue),Ie=!nt);dt=E[Qe++];)if(dt(Ue,pe||re,Ie)){Ce.push(Ue);break}qe&&(Ki=$a)}N&&((Ue=!dt&&Ue)&&Rt--,ue&&ui.push(Ue))}if(Rt+=Ke,N&&Ke!==Rt){for(Qe=0;dt=R[Qe++];)dt(ui,Ci,pe,Ie);if(ue){if(Rt>0)for(;Ke--;)ui[Ke]||Ci[Ke]||(Ci[Ke]=Qn.call(Ce));Ci=md(Ci)}Zn.apply(Ce,Ci),qe&&!ue&&Ci.length>0&&Rt+R.length>1&&At.uniqueSort(Ce)}return qe&&(Ki=$a,z=ss),ui};return N?Rs(j):j}return M=At.compile=function(E,R){var N,le=[],j=[],ue=ld[E+" "];if(!ue){for(R||(R=T(E)),N=R.length;N--;)ue=Wc(R[N]),ue[kt]?le.push(ue):j.push(ue);ue=ld(E,n0(j,le)),ue.selector=E}return ue},O=At.select=function(E,R,N,le){var j,ue,pe,Ie,Ce,qe=typeof E=="function"&&E,Ue=!le&&T(E=qe.selector||E);if(N=N||[],Ue.length===1){if(ue=Ue[0]=Ue[0].slice(0),ue.length>2&&(pe=ue[0]).type==="ID"&&R.nodeType===9&&nt&&y.relative[ue[1].type]){if(R=(y.find.ID(pe.matches[0].replace(wn,Sn),R)||[])[0],R)qe&&(R=R.parentNode);else return N;E=E.slice(ue.shift().value.length)}for(j=ud.needsContext.test(E)?0:ue.length;j--&&(pe=ue[j],!y.relative[Ie=pe.type]);)if((Ce=y.find[Ie])&&(le=Ce(pe.matches[0].replace(wn,Sn),Oc.test(ue[0].type)&&Nc(R.parentNode)||R))){if(ue.splice(j,1),E=le.length&&hd(ue),!E)return Zn.apply(N,le),N;break}}return(qe||M(E,Ue))(le,R,!nt,N,!R||Oc.test(E)&&Nc(R.parentNode)||R),N},g.sortStable=kt.split("").sort(Or).join("")===kt,g.detectDuplicates=!!me,Z(),g.sortDetached=Ms(function(E){return E.compareDocumentPosition(re.createElement("fieldset"))&1}),Ms(function(E){return E.innerHTML="<a href='#'></a>",E.firstChild.getAttribute("href")==="#"})||$c("type|href|height|width",function(E,R,N){if(!N)return E.getAttribute(R,R.toLowerCase()==="type"?1:2)}),(!g.attributes||!Ms(function(E){return E.innerHTML="<input/>",E.firstChild.setAttribute("value",""),E.firstChild.getAttribute("value")===""}))&&$c("value",function(E,R,N){if(!N&&E.nodeName.toLowerCase()==="input")return E.defaultValue}),Ms(function(E){return E.getAttribute("disabled")==null})||$c(Rc,function(E,R,N){var le;if(!N)return E[R]===!0?R.toLowerCase():(le=E.getAttributeNode(R))&&le.specified?le.value:null}),At}(e);_.find=Te,_.expr=Te.selectors,_.expr[":"]=_.expr.pseudos,_.uniqueSort=_.unique=Te.uniqueSort,_.text=Te.getText,_.isXMLDoc=Te.isXML,_.contains=Te.contains,_.escapeSelector=Te.escape;var Pe=function(u,h,g){for(var y=[],b=g!==void 0;(u=u[h])&&u.nodeType!==9;)if(u.nodeType===1){if(b&&_(u).is(g))break;y.push(u)}return y},Fe=function(u,h){for(var g=[];u;u=u.nextSibling)u.nodeType===1&&u!==h&&g.push(u);return g},at=_.expr.match.needsContext;function Xe(u,h){return u.nodeName&&u.nodeName.toLowerCase()===h.toLowerCase()}var lt=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function Dt(u,h,g){return D(h)?_.grep(u,function(y,b){return!!h.call(y,b,y)!==g}):h.nodeType?_.grep(u,function(y){return y===h!==g}):typeof h!="string"?_.grep(u,function(y){return l.call(h,y)>-1!==g}):_.filter(h,u,g)}_.filter=function(u,h,g){var y=h[0];return g&&(u=":not("+u+")"),h.length===1&&y.nodeType===1?_.find.matchesSelector(y,u)?[y]:[]:_.find.matches(u,_.grep(h,function(b){return b.nodeType===1}))},_.fn.extend({find:function(u){var h,g,y=this.length,b=this;if(typeof u!="string")return this.pushStack(_(u).filter(function(){for(h=0;h<y;h++)if(_.contains(b[h],this))return!0}));for(g=this.pushStack([]),h=0;h<y;h++)_.find(u,b[h],g);return y>1?_.uniqueSort(g):g},filter:function(u){return this.pushStack(Dt(this,u||[],!1))},not:function(u){return this.pushStack(Dt(this,u||[],!0))},is:function(u){return!!Dt(this,typeof u=="string"&&at.test(u)?_(u):u||[],!1).length}});var Ft,Ze=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,Le=_.fn.init=function(u,h,g){var y,b;if(!u)return this;if(g=g||Ft,typeof u=="string")if(u[0]==="<"&&u[u.length-1]===">"&&u.length>=3?y=[null,u,null]:y=Ze.exec(u),y&&(y[1]||!h))if(y[1]){if(h=h instanceof _?h[0]:h,_.merge(this,_.parseHTML(y[1],h&&h.nodeType?h.ownerDocument||h:V,!0)),lt.test(y[1])&&_.isPlainObject(h))for(y in h)D(this[y])?this[y](h[y]):this.attr(y,h[y]);return this}else return b=V.getElementById(y[2]),b&&(this[0]=b,this.length=1),this;else return!h||h.jquery?(h||g).find(u):this.constructor(h).find(u);else{if(u.nodeType)return this[0]=u,this.length=1,this;if(D(u))return g.ready!==void 0?g.ready(u):u(_)}return _.makeArray(u,this)};Le.prototype=_.fn,Ft=_(V);var et=/^(?:parents|prev(?:Until|All))/,Bt={children:!0,contents:!0,next:!0,prev:!0};_.fn.extend({has:function(u){var h=_(u,this),g=h.length;return this.filter(function(){for(var y=0;y<g;y++)if(_.contains(this,h[y]))return!0})},closest:function(u,h){var g,y=0,b=this.length,w=[],T=typeof u!="string"&&_(u);if(!at.test(u)){for(;y<b;y++)for(g=this[y];g&&g!==h;g=g.parentNode)if(g.nodeType<11&&(T?T.index(g)>-1:g.nodeType===1&&_.find.matchesSelector(g,u))){w.push(g);break}}return this.pushStack(w.length>1?_.uniqueSort(w):w)},index:function(u){return u?typeof u=="string"?l.call(_(u),this[0]):l.call(this,u.jquery?u[0]:u):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(u,h){return this.pushStack(_.uniqueSort(_.merge(this.get(),_(u,h))))},addBack:function(u){return this.add(u==null?this.prevObject:this.prevObject.filter(u))}});function Jt(u,h){for(;(u=u[h])&&u.nodeType!==1;);return u}_.each({parent:function(u){var h=u.parentNode;return h&&h.nodeType!==11?h:null},parents:function(u){return Pe(u,"parentNode")},parentsUntil:function(u,h,g){return Pe(u,"parentNode",g)},next:function(u){return Jt(u,"nextSibling")},prev:function(u){return Jt(u,"previousSibling")},nextAll:function(u){return Pe(u,"nextSibling")},prevAll:function(u){return Pe(u,"previousSibling")},nextUntil:function(u,h,g){return Pe(u,"nextSibling",g)},prevUntil:function(u,h,g){return Pe(u,"previousSibling",g)},siblings:function(u){return Fe((u.parentNode||{}).firstChild,u)},children:function(u){return Fe(u.firstChild)},contents:function(u){return u.contentDocument!=null&&r(u.contentDocument)?u.contentDocument:(Xe(u,"template")&&(u=u.content||u),_.merge([],u.childNodes))}},function(u,h){_.fn[u]=function(g,y){var b=_.map(this,h,g);return u.slice(-5)!=="Until"&&(y=g),y&&typeof y=="string"&&(b=_.filter(y,b)),this.length>1&&(Bt[u]||_.uniqueSort(b),et.test(u)&&b.reverse()),this.pushStack(b)}});var wt=/[^\x20\t\r\n\f]+/g;function Gt(u){var h={};return _.each(u.match(wt)||[],function(g,y){h[y]=!0}),h}_.Callbacks=function(u){u=typeof u=="string"?Gt(u):_.extend({},u);var h,g,y,b,w=[],T=[],M=-1,O=function(){for(b=b||u.once,y=h=!0;T.length;M=-1)for(g=T.shift();++M<w.length;)w[M].apply(g[0],g[1])===!1&&u.stopOnFalse&&(M=w.length,g=!1);u.memory||(g=!1),h=!1,b&&(g?w=[]:w="")},z={add:function(){return w&&(g&&!h&&(M=w.length-1,T.push(g)),function te(me){_.each(me,function(Z,re){D(re)?(!u.unique||!z.has(re))&&w.push(re):re&&re.length&&ee(re)!=="string"&&te(re)})}(arguments),g&&!h&&O()),this},remove:function(){return _.each(arguments,function(te,me){for(var Z;(Z=_.inArray(me,w,Z))>-1;)w.splice(Z,1),Z<=M&&M--}),this},has:function(te){return te?_.inArray(te,w)>-1:w.length>0},empty:function(){return w&&(w=[]),this},disable:function(){return b=T=[],w=g="",this},disabled:function(){return!w},lock:function(){return b=T=[],!g&&!h&&(w=g=""),this},locked:function(){return!!b},fireWith:function(te,me){return b||(me=me||[],me=[te,me.slice?me.slice():me],T.push(me),h||O()),this},fire:function(){return z.fireWith(this,arguments),this},fired:function(){return!!y}};return z};function Nt(u){return u}function ii(u){throw u}function pi(u,h,g,y){var b;try{u&&D(b=u.promise)?b.call(u).done(h).fail(g):u&&D(b=u.then)?b.call(u,h,g):h.apply(void 0,[u].slice(y))}catch(w){g.apply(void 0,[w])}}_.extend({Deferred:function(u){var h=[["notify","progress",_.Callbacks("memory"),_.Callbacks("memory"),2],["resolve","done",_.Callbacks("once memory"),_.Callbacks("once memory"),0,"resolved"],["reject","fail",_.Callbacks("once memory"),_.Callbacks("once memory"),1,"rejected"]],g="pending",y={state:function(){return g},always:function(){return b.done(arguments).fail(arguments),this},catch:function(w){return y.then(null,w)},pipe:function(){var w=arguments;return _.Deferred(function(T){_.each(h,function(M,O){var z=D(w[O[4]])&&w[O[4]];b[O[1]](function(){var te=z&&z.apply(this,arguments);te&&D(te.promise)?te.promise().progress(T.notify).done(T.resolve).fail(T.reject):T[O[0]+"With"](this,z?[te]:arguments)})}),w=null}).promise()},then:function(w,T,M){var O=0;function z(te,me,Z,re){return function(){var Ve=this,nt=arguments,We=function(){var oi,ts;if(!(te<O)){if(oi=Z.apply(Ve,nt),oi===me.promise())throw new TypeError("Thenable self-resolution");ts=oi&&(typeof oi=="object"||typeof oi=="function")&&oi.then,D(ts)?re?ts.call(oi,z(O,me,Nt,re),z(O,me,ii,re)):(O++,ts.call(oi,z(O,me,Nt,re),z(O,me,ii,re),z(O,me,Nt,me.notifyWith))):(Z!==Nt&&(Ve=void 0,nt=[oi]),(re||me.resolveWith)(Ve,nt))}},di=re?We:function(){try{We()}catch(oi){_.Deferred.exceptionHook&&_.Deferred.exceptionHook(oi,di.stackTrace),te+1>=O&&(Z!==ii&&(Ve=void 0,nt=[oi]),me.rejectWith(Ve,nt))}};te?di():(_.Deferred.getStackHook&&(di.stackTrace=_.Deferred.getStackHook()),e.setTimeout(di))}}return _.Deferred(function(te){h[0][3].add(z(0,te,D(M)?M:Nt,te.notifyWith)),h[1][3].add(z(0,te,D(w)?w:Nt)),h[2][3].add(z(0,te,D(T)?T:ii))}).promise()},promise:function(w){return w!=null?_.extend(w,y):y}},b={};return _.each(h,function(w,T){var M=T[2],O=T[5];y[T[1]]=M.add,O&&M.add(function(){g=O},h[3-w][2].disable,h[3-w][3].disable,h[0][2].lock,h[0][3].lock),M.add(T[3].fire),b[T[0]]=function(){return b[T[0]+"With"](this===b?void 0:this,arguments),this},b[T[0]+"With"]=M.fireWith}),y.promise(b),u&&u.call(b,b),b},when:function(u){var h=arguments.length,g=h,y=Array(g),b=n.call(arguments),w=_.Deferred(),T=function(M){return function(O){y[M]=this,b[M]=arguments.length>1?n.call(arguments):O,--h||w.resolveWith(y,b)}};if(h<=1&&(pi(u,w.done(T(g)).resolve,w.reject,!h),w.state()==="pending"||D(b[g]&&b[g].then)))return w.then();for(;g--;)pi(b[g],T(g),w.reject);return w.promise()}});var Xt=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;_.Deferred.exceptionHook=function(u,h){e.console&&e.console.warn&&u&&Xt.test(u.name)&&e.console.warn("jQuery.Deferred exception: "+u.message,u.stack,h)},_.readyException=function(u){e.setTimeout(function(){throw u})};var W=_.Deferred();_.fn.ready=function(u){return W.then(u).catch(function(h){_.readyException(h)}),this},_.extend({isReady:!1,readyWait:1,ready:function(u){(u===!0?--_.readyWait:_.isReady)||(_.isReady=!0,!(u!==!0&&--_.readyWait>0)&&W.resolveWith(V,[_]))}}),_.ready.then=W.then;function U(){V.removeEventListener("DOMContentLoaded",U),e.removeEventListener("load",U),_.ready()}V.readyState==="complete"||V.readyState!=="loading"&&!V.documentElement.doScroll?e.setTimeout(_.ready):(V.addEventListener("DOMContentLoaded",U),e.addEventListener("load",U));var q=function(u,h,g,y,b,w,T){var M=0,O=u.length,z=g==null;if(ee(g)==="object"){b=!0;for(M in g)q(u,h,M,g[M],!0,w,T)}else if(y!==void 0&&(b=!0,D(y)||(T=!0),z&&(T?(h.call(u,y),h=null):(z=h,h=function(te,me,Z){return z.call(_(te),Z)})),h))for(;M<O;M++)h(u[M],g,T?y:y.call(u[M],M,h(u[M],g)));return b?u:z?h.call(u):O?h(u[0],g):w},he=/^-ms-/,Ye=/-([a-z])/g;function P(u,h){return h.toUpperCase()}function A(u){return u.replace(he,"ms-").replace(Ye,P)}var B=function(u){return u.nodeType===1||u.nodeType===9||!+u.nodeType};function ae(){this.expando=_.expando+ae.uid++}ae.uid=1,ae.prototype={cache:function(u){var h=u[this.expando];return h||(h={},B(u)&&(u.nodeType?u[this.expando]=h:Object.defineProperty(u,this.expando,{value:h,configurable:!0}))),h},set:function(u,h,g){var y,b=this.cache(u);if(typeof h=="string")b[A(h)]=g;else for(y in h)b[A(y)]=h[y];return b},get:function(u,h){return h===void 0?this.cache(u):u[this.expando]&&u[this.expando][A(h)]},access:function(u,h,g){return h===void 0||h&&typeof h=="string"&&g===void 0?this.get(u,h):(this.set(u,h,g),g!==void 0?g:h)},remove:function(u,h){var g,y=u[this.expando];if(y!==void 0){if(h!==void 0)for(Array.isArray(h)?h=h.map(A):(h=A(h),h=h in y?[h]:h.match(wt)||[]),g=h.length;g--;)delete y[h[g]];(h===void 0||_.isEmptyObject(y))&&(u.nodeType?u[this.expando]=void 0:delete u[this.expando])}},hasData:function(u){var h=u[this.expando];return h!==void 0&&!_.isEmptyObject(h)}};var Y=new ae,ne=new ae,ke=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,xe=/[A-Z]/g;function Se(u){return u==="true"?!0:u==="false"?!1:u==="null"?null:u===+u+""?+u:ke.test(u)?JSON.parse(u):u}function ge(u,h,g){var y;if(g===void 0&&u.nodeType===1)if(y="data-"+h.replace(xe,"-$&").toLowerCase(),g=u.getAttribute(y),typeof g=="string"){try{g=Se(g)}catch{}ne.set(u,h,g)}else g=void 0;return g}_.extend({hasData:function(u){return ne.hasData(u)||Y.hasData(u)},data:function(u,h,g){return ne.access(u,h,g)},removeData:function(u,h){ne.remove(u,h)},_data:function(u,h,g){return Y.access(u,h,g)},_removeData:function(u,h){Y.remove(u,h)}}),_.fn.extend({data:function(u,h){var g,y,b,w=this[0],T=w&&w.attributes;if(u===void 0){if(this.length&&(b=ne.get(w),w.nodeType===1&&!Y.get(w,"hasDataAttrs"))){for(g=T.length;g--;)T[g]&&(y=T[g].name,y.indexOf("data-")===0&&(y=A(y.slice(5)),ge(w,y,b[y])));Y.set(w,"hasDataAttrs",!0)}return b}return typeof u=="object"?this.each(function(){ne.set(this,u)}):q(this,function(M){var O;if(w&&M===void 0)return O=ne.get(w,u),O!==void 0||(O=ge(w,u),O!==void 0)?O:void 0;this.each(function(){ne.set(this,u,M)})},null,h,arguments.length>1,null,!0)},removeData:function(u){return this.each(function(){ne.remove(this,u)})}}),_.extend({queue:function(u,h,g){var y;if(u)return h=(h||"fx")+"queue",y=Y.get(u,h),g&&(!y||Array.isArray(g)?y=Y.access(u,h,_.makeArray(g)):y.push(g)),y||[]},dequeue:function(u,h){h=h||"fx";var g=_.queue(u,h),y=g.length,b=g.shift(),w=_._queueHooks(u,h),T=function(){_.dequeue(u,h)};b==="inprogress"&&(b=g.shift(),y--),b&&(h==="fx"&&g.unshift("inprogress"),delete w.stop,b.call(u,T,w)),!y&&w&&w.empty.fire()},_queueHooks:function(u,h){var g=h+"queueHooks";return Y.get(u,g)||Y.access(u,g,{empty:_.Callbacks("once memory").add(function(){Y.remove(u,[h+"queue",g])})})}}),_.fn.extend({queue:function(u,h){var g=2;return typeof u!="string"&&(h=u,u="fx",g--),arguments.length<g?_.queue(this[0],u):h===void 0?this:this.each(function(){var y=_.queue(this,u,h);_._queueHooks(this,u),u==="fx"&&y[0]!=="inprogress"&&_.dequeue(this,u)})},dequeue:function(u){return this.each(function(){_.dequeue(this,u)})},clearQueue:function(u){return this.queue(u||"fx",[])},promise:function(u,h){var g,y=1,b=_.Deferred(),w=this,T=this.length,M=function(){--y||b.resolveWith(w,[w])};for(typeof u!="string"&&(h=u,u=void 0),u=u||"fx";T--;)g=Y.get(w[T],u+"queueHooks"),g&&g.empty&&(y++,g.empty.add(M));return M(),b.promise(h)}});var ze=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,De=new RegExp("^(?:([+-])=|)("+ze+")([a-z%]*)$","i"),Oe=["Top","Right","Bottom","Left"],Be=V.documentElement,st=function(u){return _.contains(u.ownerDocument,u)},St={composed:!0};Be.getRootNode&&(st=function(u){return _.contains(u.ownerDocument,u)||u.getRootNode(St)===u.ownerDocument});var ct=function(u,h){return u=h||u,u.style.display==="none"||u.style.display===""&&st(u)&&_.css(u,"display")==="none"};function Di(u,h,g,y){var b,w,T=20,M=y?function(){return y.cur()}:function(){return _.css(u,h,"")},O=M(),z=g&&g[3]||(_.cssNumber[h]?"":"px"),te=u.nodeType&&(_.cssNumber[h]||z!=="px"&&+O)&&De.exec(_.css(u,h));if(te&&te[3]!==z){for(O=O/2,z=z||te[3],te=+O||1;T--;)_.style(u,h,te+z),(1-w)*(1-(w=M()/O||.5))<=0&&(T=0),te=te/w;te=te*2,_.style(u,h,te+z),g=g||[]}return g&&(te=+te||+O||0,b=g[1]?te+(g[1]+1)*g[2]:+g[2],y&&(y.unit=z,y.start=te,y.end=b)),b}var Si={};function fs(u){var h,g=u.ownerDocument,y=u.nodeName,b=Si[y];return b||(h=g.body.appendChild(g.createElement(y)),b=_.css(h,"display"),h.parentNode.removeChild(h),b==="none"&&(b="block"),Si[y]=b,b)}function Ti(u,h){for(var g,y,b=[],w=0,T=u.length;w<T;w++)y=u[w],y.style&&(g=y.style.display,h?(g==="none"&&(b[w]=Y.get(y,"display")||null,b[w]||(y.style.display="")),y.style.display===""&&ct(y)&&(b[w]=fs(y))):g!=="none"&&(b[w]="none",Y.set(y,"display",g)));for(w=0;w<T;w++)b[w]!=null&&(u[w].style.display=b[w]);return u}_.fn.extend({show:function(){return Ti(this,!0)},hide:function(){return Ti(this)},toggle:function(u){return typeof u=="boolean"?u?this.show():this.hide():this.each(function(){ct(this)?_(this).show():_(this).hide()})}});var Ps=/^(?:checkbox|radio)$/i,ka=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,ki=/^$|^module$|\/(?:java|ecma)script/i;(function(){var u=V.createDocumentFragment(),h=u.appendChild(V.createElement("div")),g=V.createElement("input");g.setAttribute("type","radio"),g.setAttribute("checked","checked"),g.setAttribute("name","t"),h.appendChild(g),C.checkClone=h.cloneNode(!0).cloneNode(!0).lastChild.checked,h.innerHTML="<textarea>x</textarea>",C.noCloneChecked=!!h.cloneNode(!0).lastChild.defaultValue,h.innerHTML="<option></option>",C.option=!!h.lastChild})();var Qt={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Qt.tbody=Qt.tfoot=Qt.colgroup=Qt.caption=Qt.thead,Qt.th=Qt.td,C.option||(Qt.optgroup=Qt.option=[1,"<select multiple='multiple'>","</select>"]);function xi(u,h){var g;return typeof u.getElementsByTagName<"u"?g=u.getElementsByTagName(h||"*"):typeof u.querySelectorAll<"u"?g=u.querySelectorAll(h||"*"):g=[],h===void 0||h&&Xe(u,h)?_.merge([u],g):g}function _c(u,h){for(var g=0,y=u.length;g<y;g++)Y.set(u[g],"globalEval",!h||Y.get(h[g],"globalEval"))}var dT=/<|&#?\w+;/;function fp(u,h,g,y,b){for(var w,T,M,O,z,te,me=h.createDocumentFragment(),Z=[],re=0,Ve=u.length;re<Ve;re++)if(w=u[re],w||w===0)if(ee(w)==="object")_.merge(Z,w.nodeType?[w]:w);else if(!dT.test(w))Z.push(h.createTextNode(w));else{for(T=T||me.appendChild(h.createElement("div")),M=(ka.exec(w)||["",""])[1].toLowerCase(),O=Qt[M]||Qt._default,T.innerHTML=O[1]+_.htmlPrefilter(w)+O[2],te=O[0];te--;)T=T.lastChild;_.merge(Z,T.childNodes),T=me.firstChild,T.textContent=""}for(me.textContent="",re=0;w=Z[re++];){if(y&&_.inArray(w,y)>-1){b&&b.push(w);continue}if(z=st(w),T=xi(me.appendChild(w),"script"),z&&_c(T),g)for(te=0;w=T[te++];)ki.test(w.type||"")&&g.push(w)}return me}var mp=/^([^.]*)(?:\.(.+)|)/;function To(){return!0}function xo(){return!1}function uT(u,h){return u===cT()==(h==="focus")}function cT(){try{return V.activeElement}catch{}}function bc(u,h,g,y,b,w){var T,M;if(typeof h=="object"){typeof g!="string"&&(y=y||g,g=void 0);for(M in h)bc(u,M,g,y,h[M],w);return u}if(y==null&&b==null?(b=g,y=g=void 0):b==null&&(typeof g=="string"?(b=y,y=void 0):(b=y,y=g,g=void 0)),b===!1)b=xo;else if(!b)return u;return w===1&&(T=b,b=function(O){return _().off(O),T.apply(this,arguments)},b.guid=T.guid||(T.guid=_.guid++)),u.each(function(){_.event.add(this,h,b,y,g)})}_.event={global:{},add:function(u,h,g,y,b){var w,T,M,O,z,te,me,Z,re,Ve,nt,We=Y.get(u);if(B(u))for(g.handler&&(w=g,g=w.handler,b=w.selector),b&&_.find.matchesSelector(Be,b),g.guid||(g.guid=_.guid++),(O=We.events)||(O=We.events=Object.create(null)),(T=We.handle)||(T=We.handle=function(di){return typeof _<"u"&&_.event.triggered!==di.type?_.event.dispatch.apply(u,arguments):void 0}),h=(h||"").match(wt)||[""],z=h.length;z--;)M=mp.exec(h[z])||[],re=nt=M[1],Ve=(M[2]||"").split(".").sort(),re&&(me=_.event.special[re]||{},re=(b?me.delegateType:me.bindType)||re,me=_.event.special[re]||{},te=_.extend({type:re,origType:nt,data:y,handler:g,guid:g.guid,selector:b,needsContext:b&&_.expr.match.needsContext.test(b),namespace:Ve.join(".")},w),(Z=O[re])||(Z=O[re]=[],Z.delegateCount=0,(!me.setup||me.setup.call(u,y,Ve,T)===!1)&&u.addEventListener&&u.addEventListener(re,T)),me.add&&(me.add.call(u,te),te.handler.guid||(te.handler.guid=g.guid)),b?Z.splice(Z.delegateCount++,0,te):Z.push(te),_.event.global[re]=!0)},remove:function(u,h,g,y,b){var w,T,M,O,z,te,me,Z,re,Ve,nt,We=Y.hasData(u)&&Y.get(u);if(!(!We||!(O=We.events))){for(h=(h||"").match(wt)||[""],z=h.length;z--;){if(M=mp.exec(h[z])||[],re=nt=M[1],Ve=(M[2]||"").split(".").sort(),!re){for(re in O)_.event.remove(u,re+h[z],g,y,!0);continue}for(me=_.event.special[re]||{},re=(y?me.delegateType:me.bindType)||re,Z=O[re]||[],M=M[2]&&new RegExp("(^|\\.)"+Ve.join("\\.(?:.*\\.|)")+"(\\.|$)"),T=w=Z.length;w--;)te=Z[w],(b||nt===te.origType)&&(!g||g.guid===te.guid)&&(!M||M.test(te.namespace))&&(!y||y===te.selector||y==="**"&&te.selector)&&(Z.splice(w,1),te.selector&&Z.delegateCount--,me.remove&&me.remove.call(u,te));T&&!Z.length&&((!me.teardown||me.teardown.call(u,Ve,We.handle)===!1)&&_.removeEvent(u,re,We.handle),delete O[re])}_.isEmptyObject(O)&&Y.remove(u,"handle events")}},dispatch:function(u){var h,g,y,b,w,T,M=new Array(arguments.length),O=_.event.fix(u),z=(Y.get(this,"events")||Object.create(null))[O.type]||[],te=_.event.special[O.type]||{};for(M[0]=O,h=1;h<arguments.length;h++)M[h]=arguments[h];if(O.delegateTarget=this,!(te.preDispatch&&te.preDispatch.call(this,O)===!1)){for(T=_.event.handlers.call(this,O,z),h=0;(b=T[h++])&&!O.isPropagationStopped();)for(O.currentTarget=b.elem,g=0;(w=b.handlers[g++])&&!O.isImmediatePropagationStopped();)(!O.rnamespace||w.namespace===!1||O.rnamespace.test(w.namespace))&&(O.handleObj=w,O.data=w.data,y=((_.event.special[w.origType]||{}).handle||w.handler).apply(b.elem,M),y!==void 0&&(O.result=y)===!1&&(O.preventDefault(),O.stopPropagation()));return te.postDispatch&&te.postDispatch.call(this,O),O.result}},handlers:function(u,h){var g,y,b,w,T,M=[],O=h.delegateCount,z=u.target;if(O&&z.nodeType&&!(u.type==="click"&&u.button>=1)){for(;z!==this;z=z.parentNode||this)if(z.nodeType===1&&!(u.type==="click"&&z.disabled===!0)){for(w=[],T={},g=0;g<O;g++)y=h[g],b=y.selector+" ",T[b]===void 0&&(T[b]=y.needsContext?_(b,this).index(z)>-1:_.find(b,this,null,[z]).length),T[b]&&w.push(y);w.length&&M.push({elem:z,handlers:w})}}return z=this,O<h.length&&M.push({elem:z,handlers:h.slice(O)}),M},addProp:function(u,h){Object.defineProperty(_.Event.prototype,u,{enumerable:!0,configurable:!0,get:D(h)?function(){if(this.originalEvent)return h(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[u]},set:function(g){Object.defineProperty(this,u,{enumerable:!0,configurable:!0,writable:!0,value:g})}})},fix:function(u){return u[_.expando]?u:new _.Event(u)},special:{load:{noBubble:!0},click:{setup:function(u){var h=this||u;return Ps.test(h.type)&&h.click&&Xe(h,"input")&&nd(h,"click",To),!1},trigger:function(u){var h=this||u;return Ps.test(h.type)&&h.click&&Xe(h,"input")&&nd(h,"click"),!0},_default:function(u){var h=u.target;return Ps.test(h.type)&&h.click&&Xe(h,"input")&&Y.get(h,"click")||Xe(h,"a")}},beforeunload:{postDispatch:function(u){u.result!==void 0&&u.originalEvent&&(u.originalEvent.returnValue=u.result)}}}};function nd(u,h,g){if(!g){Y.get(u,h)===void 0&&_.event.add(u,h,To);return}Y.set(u,h,!1),_.event.add(u,h,{namespace:!1,handler:function(y){var b,w,T=Y.get(this,h);if(y.isTrigger&1&&this[h]){if(T.length)(_.event.special[h]||{}).delegateType&&y.stopPropagation();else if(T=n.call(arguments),Y.set(this,h,T),b=g(this,h),this[h](),w=Y.get(this,h),T!==w||b?Y.set(this,h,!1):w={},T!==w)return y.stopImmediatePropagation(),y.preventDefault(),w&&w.value}else T.length&&(Y.set(this,h,{value:_.event.trigger(_.extend(T[0],_.Event.prototype),T.slice(1),this)}),y.stopImmediatePropagation())}})}_.removeEvent=function(u,h,g){u.removeEventListener&&u.removeEventListener(h,g)},_.Event=function(u,h){if(!(this instanceof _.Event))return new _.Event(u,h);u&&u.type?(this.originalEvent=u,this.type=u.type,this.isDefaultPrevented=u.defaultPrevented||u.defaultPrevented===void 0&&u.returnValue===!1?To:xo,this.target=u.target&&u.target.nodeType===3?u.target.parentNode:u.target,this.currentTarget=u.currentTarget,this.relatedTarget=u.relatedTarget):this.type=u,h&&_.extend(this,h),this.timeStamp=u&&u.timeStamp||Date.now(),this[_.expando]=!0},_.Event.prototype={constructor:_.Event,isDefaultPrevented:xo,isPropagationStopped:xo,isImmediatePropagationStopped:xo,isSimulated:!1,preventDefault:function(){var u=this.originalEvent;this.isDefaultPrevented=To,u&&!this.isSimulated&&u.preventDefault()},stopPropagation:function(){var u=this.originalEvent;this.isPropagationStopped=To,u&&!this.isSimulated&&u.stopPropagation()},stopImmediatePropagation:function(){var u=this.originalEvent;this.isImmediatePropagationStopped=To,u&&!this.isSimulated&&u.stopImmediatePropagation(),this.stopPropagation()}},_.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},_.event.addProp),_.each({focus:"focusin",blur:"focusout"},function(u,h){_.event.special[u]={setup:function(){return nd(this,u,uT),!1},trigger:function(){return nd(this,u),!0},_default:function(){return!0},delegateType:h}}),_.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(u,h){_.event.special[u]={delegateType:h,bindType:h,handle:function(g){var y,b=this,w=g.relatedTarget,T=g.handleObj;return(!w||w!==b&&!_.contains(b,w))&&(g.type=T.origType,y=T.handler.apply(this,arguments),g.type=h),y}}}),_.fn.extend({on:function(u,h,g,y){return bc(this,u,h,g,y)},one:function(u,h,g,y){return bc(this,u,h,g,y,1)},off:function(u,h,g){var y,b;if(u&&u.preventDefault&&u.handleObj)return y=u.handleObj,_(u.delegateTarget).off(y.namespace?y.origType+"."+y.namespace:y.origType,y.selector,y.handler),this;if(typeof u=="object"){for(b in u)this.off(b,h,u[b]);return this}return(h===!1||typeof h=="function")&&(g=h,h=void 0),g===!1&&(g=xo),this.each(function(){_.event.remove(this,u,g,h)})}});var hT=/<script|<style|<link/i,fT=/checked\s*(?:[^=]|=\s*.checked.)/i,mT=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function pp(u,h){return Xe(u,"table")&&Xe(h.nodeType!==11?h:h.firstChild,"tr")&&_(u).children("tbody")[0]||u}function pT(u){return u.type=(u.getAttribute("type")!==null)+"/"+u.type,u}function gT(u){return(u.type||"").slice(0,5)==="true/"?u.type=u.type.slice(5):u.removeAttribute("type"),u}function gp(u,h){var g,y,b,w,T,M,O;if(h.nodeType===1){if(Y.hasData(u)&&(w=Y.get(u),O=w.events,O)){Y.remove(h,"handle events");for(b in O)for(g=0,y=O[b].length;g<y;g++)_.event.add(h,b,O[b][g])}ne.hasData(u)&&(T=ne.access(u),M=_.extend({},T),ne.set(h,M))}}function vT(u,h){var g=h.nodeName.toLowerCase();g==="input"&&Ps.test(u.type)?h.checked=u.checked:(g==="input"||g==="textarea")&&(h.defaultValue=u.defaultValue)}function Io(u,h,g,y){h=o(h);var b,w,T,M,O,z,te=0,me=u.length,Z=me-1,re=h[0],Ve=D(re);if(Ve||me>1&&typeof re=="string"&&!C.checkClone&&fT.test(re))return u.each(function(nt){var We=u.eq(nt);Ve&&(h[0]=re.call(this,nt,We.html())),Io(We,h,g,y)});if(me&&(b=fp(h,u[0].ownerDocument,!1,u,y),w=b.firstChild,b.childNodes.length===1&&(b=w),w||y)){for(T=_.map(xi(b,"script"),pT),M=T.length;te<me;te++)O=b,te!==Z&&(O=_.clone(O,!0,!0),M&&_.merge(T,xi(O,"script"))),g.call(u[te],O,te);if(M)for(z=T[T.length-1].ownerDocument,_.map(T,gT),te=0;te<M;te++)O=T[te],ki.test(O.type||"")&&!Y.access(O,"globalEval")&&_.contains(z,O)&&(O.src&&(O.type||"").toLowerCase()!=="module"?_._evalUrl&&!O.noModule&&_._evalUrl(O.src,{nonce:O.nonce||O.getAttribute("nonce")},z):oe(O.textContent.replace(mT,""),O,z))}return u}function vp(u,h,g){for(var y,b=h?_.filter(h,u):u,w=0;(y=b[w])!=null;w++)!g&&y.nodeType===1&&_.cleanData(xi(y)),y.parentNode&&(g&&st(y)&&_c(xi(y,"script")),y.parentNode.removeChild(y));return u}_.extend({htmlPrefilter:function(u){return u},clone:function(u,h,g){var y,b,w,T,M=u.cloneNode(!0),O=st(u);if(!C.noCloneChecked&&(u.nodeType===1||u.nodeType===11)&&!_.isXMLDoc(u))for(T=xi(M),w=xi(u),y=0,b=w.length;y<b;y++)vT(w[y],T[y]);if(h)if(g)for(w=w||xi(u),T=T||xi(M),y=0,b=w.length;y<b;y++)gp(w[y],T[y]);else gp(u,M);return T=xi(M,"script"),T.length>0&&_c(T,!O&&xi(u,"script")),M},cleanData:function(u){for(var h,g,y,b=_.event.special,w=0;(g=u[w])!==void 0;w++)if(B(g)){if(h=g[Y.expando]){if(h.events)for(y in h.events)b[y]?_.event.remove(g,y):_.removeEvent(g,y,h.handle);g[Y.expando]=void 0}g[ne.expando]&&(g[ne.expando]=void 0)}}}),_.fn.extend({detach:function(u){return vp(this,u,!0)},remove:function(u){return vp(this,u)},text:function(u){return q(this,function(h){return h===void 0?_.text(this):this.empty().each(function(){(this.nodeType===1||this.nodeType===11||this.nodeType===9)&&(this.textContent=h)})},null,u,arguments.length)},append:function(){return Io(this,arguments,function(u){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var h=pp(this,u);h.appendChild(u)}})},prepend:function(){return Io(this,arguments,function(u){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var h=pp(this,u);h.insertBefore(u,h.firstChild)}})},before:function(){return Io(this,arguments,function(u){this.parentNode&&this.parentNode.insertBefore(u,this)})},after:function(){return Io(this,arguments,function(u){this.parentNode&&this.parentNode.insertBefore(u,this.nextSibling)})},empty:function(){for(var u,h=0;(u=this[h])!=null;h++)u.nodeType===1&&(_.cleanData(xi(u,!1)),u.textContent="");return this},clone:function(u,h){return u=u??!1,h=h??u,this.map(function(){return _.clone(this,u,h)})},html:function(u){return q(this,function(h){var g=this[0]||{},y=0,b=this.length;if(h===void 0&&g.nodeType===1)return g.innerHTML;if(typeof h=="string"&&!hT.test(h)&&!Qt[(ka.exec(h)||["",""])[1].toLowerCase()]){h=_.htmlPrefilter(h);try{for(;y<b;y++)g=this[y]||{},g.nodeType===1&&(_.cleanData(xi(g,!1)),g.innerHTML=h);g=0}catch{}}g&&this.empty().append(h)},null,u,arguments.length)},replaceWith:function(){var u=[];return Io(this,arguments,function(h){var g=this.parentNode;_.inArray(this,u)<0&&(_.cleanData(xi(this)),g&&g.replaceChild(h,this))},u)}}),_.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(u,h){_.fn[u]=function(g){for(var y,b=[],w=_(g),T=w.length-1,M=0;M<=T;M++)y=M===T?this:this.clone(!0),_(w[M])[h](y),a.apply(b,y.get());return this.pushStack(b)}});var wc=new RegExp("^("+ze+")(?!px)[a-z%]+$","i"),rd=function(u){var h=u.ownerDocument.defaultView;return(!h||!h.opener)&&(h=e),h.getComputedStyle(u)},yp=function(u,h,g){var y,b,w={};for(b in h)w[b]=u.style[b],u.style[b]=h[b];y=g.call(u);for(b in h)u.style[b]=w[b];return y},yT=new RegExp(Oe.join("|"),"i");(function(){function u(){if(z){O.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",z.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",Be.appendChild(O).appendChild(z);var te=e.getComputedStyle(z);g=te.top!=="1%",M=h(te.marginLeft)===12,z.style.right="60%",w=h(te.right)===36,y=h(te.width)===36,z.style.position="absolute",b=h(z.offsetWidth/3)===12,Be.removeChild(O),z=null}}function h(te){return Math.round(parseFloat(te))}var g,y,b,w,T,M,O=V.createElement("div"),z=V.createElement("div");z.style&&(z.style.backgroundClip="content-box",z.cloneNode(!0).style.backgroundClip="",C.clearCloneStyle=z.style.backgroundClip==="content-box",_.extend(C,{boxSizingReliable:function(){return u(),y},pixelBoxStyles:function(){return u(),w},pixelPosition:function(){return u(),g},reliableMarginLeft:function(){return u(),M},scrollboxSize:function(){return u(),b},reliableTrDimensions:function(){var te,me,Z,re;return T==null&&(te=V.createElement("table"),me=V.createElement("tr"),Z=V.createElement("div"),te.style.cssText="position:absolute;left:-11111px;border-collapse:separate",me.style.cssText="border:1px solid",me.style.height="1px",Z.style.height="9px",Z.style.display="block",Be.appendChild(te).appendChild(me).appendChild(Z),re=e.getComputedStyle(me),T=parseInt(re.height,10)+parseInt(re.borderTopWidth,10)+parseInt(re.borderBottomWidth,10)===me.offsetHeight,Be.removeChild(te)),T}}))})();function Ca(u,h,g){var y,b,w,T,M=u.style;return g=g||rd(u),g&&(T=g.getPropertyValue(h)||g[h],T===""&&!st(u)&&(T=_.style(u,h)),!C.pixelBoxStyles()&&wc.test(T)&&yT.test(h)&&(y=M.width,b=M.minWidth,w=M.maxWidth,M.minWidth=M.maxWidth=M.width=T,T=g.width,M.width=y,M.minWidth=b,M.maxWidth=w)),T!==void 0?T+"":T}function _p(u,h){return{get:function(){if(u()){delete this.get;return}return(this.get=h).apply(this,arguments)}}}var bp=["Webkit","Moz","ms"],wp=V.createElement("div").style,Sp={};function _T(u){for(var h=u[0].toUpperCase()+u.slice(1),g=bp.length;g--;)if(u=bp[g]+h,u in wp)return u}function Sc(u){var h=_.cssProps[u]||Sp[u];return h||(u in wp?u:Sp[u]=_T(u)||u)}var bT=/^(none|table(?!-c[ea]).+)/,Tp=/^--/,wT={position:"absolute",visibility:"hidden",display:"block"},xp={letterSpacing:"0",fontWeight:"400"};function Ip(u,h,g){var y=De.exec(h);return y?Math.max(0,y[2]-(g||0))+(y[3]||"px"):h}function Tc(u,h,g,y,b,w){var T=h==="width"?1:0,M=0,O=0;if(g===(y?"border":"content"))return 0;for(;T<4;T+=2)g==="margin"&&(O+=_.css(u,g+Oe[T],!0,b)),y?(g==="content"&&(O-=_.css(u,"padding"+Oe[T],!0,b)),g!=="margin"&&(O-=_.css(u,"border"+Oe[T]+"Width",!0,b))):(O+=_.css(u,"padding"+Oe[T],!0,b),g!=="padding"?O+=_.css(u,"border"+Oe[T]+"Width",!0,b):M+=_.css(u,"border"+Oe[T]+"Width",!0,b));return!y&&w>=0&&(O+=Math.max(0,Math.ceil(u["offset"+h[0].toUpperCase()+h.slice(1)]-w-O-M-.5))||0),O}function Ep(u,h,g){var y=rd(u),b=!C.boxSizingReliable()||g,w=b&&_.css(u,"boxSizing",!1,y)==="border-box",T=w,M=Ca(u,h,y),O="offset"+h[0].toUpperCase()+h.slice(1);if(wc.test(M)){if(!g)return M;M="auto"}return(!C.boxSizingReliable()&&w||!C.reliableTrDimensions()&&Xe(u,"tr")||M==="auto"||!parseFloat(M)&&_.css(u,"display",!1,y)==="inline")&&u.getClientRects().length&&(w=_.css(u,"boxSizing",!1,y)==="border-box",T=O in u,T&&(M=u[O])),M=parseFloat(M)||0,M+Tc(u,h,g||(w?"border":"content"),T,y,M)+"px"}_.extend({cssHooks:{opacity:{get:function(u,h){if(h){var g=Ca(u,"opacity");return g===""?"1":g}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(u,h,g,y){if(!(!u||u.nodeType===3||u.nodeType===8||!u.style)){var b,w,T,M=A(h),O=Tp.test(h),z=u.style;if(O||(h=Sc(M)),T=_.cssHooks[h]||_.cssHooks[M],g!==void 0){if(w=typeof g,w==="string"&&(b=De.exec(g))&&b[1]&&(g=Di(u,h,b),w="number"),g==null||g!==g)return;w==="number"&&!O&&(g+=b&&b[3]||(_.cssNumber[M]?"":"px")),!C.clearCloneStyle&&g===""&&h.indexOf("background")===0&&(z[h]="inherit"),(!T||!("set"in T)||(g=T.set(u,g,y))!==void 0)&&(O?z.setProperty(h,g):z[h]=g)}else return T&&"get"in T&&(b=T.get(u,!1,y))!==void 0?b:z[h]}},css:function(u,h,g,y){var b,w,T,M=A(h),O=Tp.test(h);return O||(h=Sc(M)),T=_.cssHooks[h]||_.cssHooks[M],T&&"get"in T&&(b=T.get(u,!0,g)),b===void 0&&(b=Ca(u,h,y)),b==="normal"&&h in xp&&(b=xp[h]),g===""||g?(w=parseFloat(b),g===!0||isFinite(w)?w||0:b):b}}),_.each(["height","width"],function(u,h){_.cssHooks[h]={get:function(g,y,b){if(y)return bT.test(_.css(g,"display"))&&(!g.getClientRects().length||!g.getBoundingClientRect().width)?yp(g,wT,function(){return Ep(g,h,b)}):Ep(g,h,b)},set:function(g,y,b){var w,T=rd(g),M=!C.scrollboxSize()&&T.position==="absolute",O=M||b,z=O&&_.css(g,"boxSizing",!1,T)==="border-box",te=b?Tc(g,h,b,z,T):0;return z&&M&&(te-=Math.ceil(g["offset"+h[0].toUpperCase()+h.slice(1)]-parseFloat(T[h])-Tc(g,h,"border",!1,T)-.5)),te&&(w=De.exec(y))&&(w[3]||"px")!=="px"&&(g.style[h]=y,y=_.css(g,h)),Ip(g,y,te)}}}),_.cssHooks.marginLeft=_p(C.reliableMarginLeft,function(u,h){if(h)return(parseFloat(Ca(u,"marginLeft"))||u.getBoundingClientRect().left-yp(u,{marginLeft:0},function(){return u.getBoundingClientRect().left}))+"px"}),_.each({margin:"",padding:"",border:"Width"},function(u,h){_.cssHooks[u+h]={expand:function(g){for(var y=0,b={},w=typeof g=="string"?g.split(" "):[g];y<4;y++)b[u+Oe[y]+h]=w[y]||w[y-2]||w[0];return b}},u!=="margin"&&(_.cssHooks[u+h].set=Ip)}),_.fn.extend({css:function(u,h){return q(this,function(g,y,b){var w,T,M={},O=0;if(Array.isArray(y)){for(w=rd(g),T=y.length;O<T;O++)M[y[O]]=_.css(g,y[O],!1,w);return M}return b!==void 0?_.style(g,y,b):_.css(g,y)},u,h,arguments.length>1)}});function qi(u,h,g,y,b){return new qi.prototype.init(u,h,g,y,b)}_.Tween=qi,qi.prototype={constructor:qi,init:function(u,h,g,y,b,w){this.elem=u,this.prop=g,this.easing=b||_.easing._default,this.options=h,this.start=this.now=this.cur(),this.end=y,this.unit=w||(_.cssNumber[g]?"":"px")},cur:function(){var u=qi.propHooks[this.prop];return u&&u.get?u.get(this):qi.propHooks._default.get(this)},run:function(u){var h,g=qi.propHooks[this.prop];return this.options.duration?this.pos=h=_.easing[this.easing](u,this.options.duration*u,0,1,this.options.duration):this.pos=h=u,this.now=(this.end-this.start)*h+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),g&&g.set?g.set(this):qi.propHooks._default.set(this),this}},qi.prototype.init.prototype=qi.prototype,qi.propHooks={_default:{get:function(u){var h;return u.elem.nodeType!==1||u.elem[u.prop]!=null&&u.elem.style[u.prop]==null?u.elem[u.prop]:(h=_.css(u.elem,u.prop,""),!h||h==="auto"?0:h)},set:function(u){_.fx.step[u.prop]?_.fx.step[u.prop](u):u.elem.nodeType===1&&(_.cssHooks[u.prop]||u.elem.style[Sc(u.prop)]!=null)?_.style(u.elem,u.prop,u.now+u.unit):u.elem[u.prop]=u.now}}},qi.propHooks.scrollTop=qi.propHooks.scrollLeft={set:function(u){u.elem.nodeType&&u.elem.parentNode&&(u.elem[u.prop]=u.now)}},_.easing={linear:function(u){return u},swing:function(u){return .5-Math.cos(u*Math.PI)/2},_default:"swing"},_.fx=qi.prototype.init,_.fx.step={};var Eo,od,ST=/^(?:toggle|show|hide)$/,TT=/queueHooks$/;function xc(){od&&(V.hidden===!1&&e.requestAnimationFrame?e.requestAnimationFrame(xc):e.setTimeout(xc,_.fx.interval),_.fx.tick())}function Dp(){return e.setTimeout(function(){Eo=void 0}),Eo=Date.now()}function ad(u,h){var g,y=0,b={height:u};for(h=h?1:0;y<4;y+=2-h)g=Oe[y],b["margin"+g]=b["padding"+g]=u;return h&&(b.opacity=b.width=u),b}function kp(u,h,g){for(var y,b=(As.tweeners[h]||[]).concat(As.tweeners["*"]),w=0,T=b.length;w<T;w++)if(y=b[w].call(g,h,u))return y}function xT(u,h,g){var y,b,w,T,M,O,z,te,me="width"in h||"height"in h,Z=this,re={},Ve=u.style,nt=u.nodeType&&ct(u),We=Y.get(u,"fxshow");g.queue||(T=_._queueHooks(u,"fx"),T.unqueued==null&&(T.unqueued=0,M=T.empty.fire,T.empty.fire=function(){T.unqueued||M()}),T.unqueued++,Z.always(function(){Z.always(function(){T.unqueued--,_.queue(u,"fx").length||T.empty.fire()})}));for(y in h)if(b=h[y],ST.test(b)){if(delete h[y],w=w||b==="toggle",b===(nt?"hide":"show"))if(b==="show"&&We&&We[y]!==void 0)nt=!0;else continue;re[y]=We&&We[y]||_.style(u,y)}if(O=!_.isEmptyObject(h),!(!O&&_.isEmptyObject(re))){me&&u.nodeType===1&&(g.overflow=[Ve.overflow,Ve.overflowX,Ve.overflowY],z=We&&We.display,z==null&&(z=Y.get(u,"display")),te=_.css(u,"display"),te==="none"&&(z?te=z:(Ti([u],!0),z=u.style.display||z,te=_.css(u,"display"),Ti([u]))),(te==="inline"||te==="inline-block"&&z!=null)&&_.css(u,"float")==="none"&&(O||(Z.done(function(){Ve.display=z}),z==null&&(te=Ve.display,z=te==="none"?"":te)),Ve.display="inline-block")),g.overflow&&(Ve.overflow="hidden",Z.always(function(){Ve.overflow=g.overflow[0],Ve.overflowX=g.overflow[1],Ve.overflowY=g.overflow[2]})),O=!1;for(y in re)O||(We?"hidden"in We&&(nt=We.hidden):We=Y.access(u,"fxshow",{display:z}),w&&(We.hidden=!nt),nt&&Ti([u],!0),Z.done(function(){nt||Ti([u]),Y.remove(u,"fxshow");for(y in re)_.style(u,y,re[y])})),O=kp(nt?We[y]:0,y,Z),y in We||(We[y]=O.start,nt&&(O.end=O.start,O.start=0))}}function IT(u,h){var g,y,b,w,T;for(g in u)if(y=A(g),b=h[y],w=u[g],Array.isArray(w)&&(b=w[1],w=u[g]=w[0]),g!==y&&(u[y]=w,delete u[g]),T=_.cssHooks[y],T&&"expand"in T){w=T.expand(w),delete u[y];for(g in w)g in u||(u[g]=w[g],h[g]=b)}else h[y]=b}function As(u,h,g){var y,b,w=0,T=As.prefilters.length,M=_.Deferred().always(function(){delete O.elem}),O=function(){if(b)return!1;for(var me=Eo||Dp(),Z=Math.max(0,z.startTime+z.duration-me),re=Z/z.duration||0,Ve=1-re,nt=0,We=z.tweens.length;nt<We;nt++)z.tweens[nt].run(Ve);return M.notifyWith(u,[z,Ve,Z]),Ve<1&&We?Z:(We||M.notifyWith(u,[z,1,0]),M.resolveWith(u,[z]),!1)},z=M.promise({elem:u,props:_.extend({},h),opts:_.extend(!0,{specialEasing:{},easing:_.easing._default},g),originalProperties:h,originalOptions:g,startTime:Eo||Dp(),duration:g.duration,tweens:[],createTween:function(me,Z){var re=_.Tween(u,z.opts,me,Z,z.opts.specialEasing[me]||z.opts.easing);return z.tweens.push(re),re},stop:function(me){var Z=0,re=me?z.tweens.length:0;if(b)return this;for(b=!0;Z<re;Z++)z.tweens[Z].run(1);return me?(M.notifyWith(u,[z,1,0]),M.resolveWith(u,[z,me])):M.rejectWith(u,[z,me]),this}}),te=z.props;for(IT(te,z.opts.specialEasing);w<T;w++)if(y=As.prefilters[w].call(z,u,te,z.opts),y)return D(y.stop)&&(_._queueHooks(z.elem,z.opts.queue).stop=y.stop.bind(y)),y;return _.map(te,kp,z),D(z.opts.start)&&z.opts.start.call(u,z),z.progress(z.opts.progress).done(z.opts.done,z.opts.complete).fail(z.opts.fail).always(z.opts.always),_.fx.timer(_.extend(O,{elem:u,anim:z,queue:z.opts.queue})),z}_.Animation=_.extend(As,{tweeners:{"*":[function(u,h){var g=this.createTween(u,h);return Di(g.elem,u,De.exec(h),g),g}]},tweener:function(u,h){D(u)?(h=u,u=["*"]):u=u.match(wt);for(var g,y=0,b=u.length;y<b;y++)g=u[y],As.tweeners[g]=As.tweeners[g]||[],As.tweeners[g].unshift(h)},prefilters:[xT],prefilter:function(u,h){h?As.prefilters.unshift(u):As.prefilters.push(u)}}),_.speed=function(u,h,g){var y=u&&typeof u=="object"?_.extend({},u):{complete:g||!g&&h||D(u)&&u,duration:u,easing:g&&h||h&&!D(h)&&h};return _.fx.off?y.duration=0:typeof y.duration!="number"&&(y.duration in _.fx.speeds?y.duration=_.fx.speeds[y.duration]:y.duration=_.fx.speeds._default),(y.queue==null||y.queue===!0)&&(y.queue="fx"),y.old=y.complete,y.complete=function(){D(y.old)&&y.old.call(this),y.queue&&_.dequeue(this,y.queue)},y},_.fn.extend({fadeTo:function(u,h,g,y){return this.filter(ct).css("opacity",0).show().end().animate({opacity:h},u,g,y)},animate:function(u,h,g,y){var b=_.isEmptyObject(u),w=_.speed(h,g,y),T=function(){var M=As(this,_.extend({},u),w);(b||Y.get(this,"finish"))&&M.stop(!0)};return T.finish=T,b||w.queue===!1?this.each(T):this.queue(w.queue,T)},stop:function(u,h,g){var y=function(b){var w=b.stop;delete b.stop,w(g)};return typeof u!="string"&&(g=h,h=u,u=void 0),h&&this.queue(u||"fx",[]),this.each(function(){var b=!0,w=u!=null&&u+"queueHooks",T=_.timers,M=Y.get(this);if(w)M[w]&&M[w].stop&&y(M[w]);else for(w in M)M[w]&&M[w].stop&&TT.test(w)&&y(M[w]);for(w=T.length;w--;)T[w].elem===this&&(u==null||T[w].queue===u)&&(T[w].anim.stop(g),b=!1,T.splice(w,1));(b||!g)&&_.dequeue(this,u)})},finish:function(u){return u!==!1&&(u=u||"fx"),this.each(function(){var h,g=Y.get(this),y=g[u+"queue"],b=g[u+"queueHooks"],w=_.timers,T=y?y.length:0;for(g.finish=!0,_.queue(this,u,[]),b&&b.stop&&b.stop.call(this,!0),h=w.length;h--;)w[h].elem===this&&w[h].queue===u&&(w[h].anim.stop(!0),w.splice(h,1));for(h=0;h<T;h++)y[h]&&y[h].finish&&y[h].finish.call(this);delete g.finish})}}),_.each(["toggle","show","hide"],function(u,h){var g=_.fn[h];_.fn[h]=function(y,b,w){return y==null||typeof y=="boolean"?g.apply(this,arguments):this.animate(ad(h,!0),y,b,w)}}),_.each({slideDown:ad("show"),slideUp:ad("hide"),slideToggle:ad("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(u,h){_.fn[u]=function(g,y,b){return this.animate(h,g,y,b)}}),_.timers=[],_.fx.tick=function(){var u,h=0,g=_.timers;for(Eo=Date.now();h<g.length;h++)u=g[h],!u()&&g[h]===u&&g.splice(h--,1);g.length||_.fx.stop(),Eo=void 0},_.fx.timer=function(u){_.timers.push(u),_.fx.start()},_.fx.interval=13,_.fx.start=function(){od||(od=!0,xc())},_.fx.stop=function(){od=null},_.fx.speeds={slow:600,fast:200,_default:400},_.fn.delay=function(u,h){return u=_.fx&&_.fx.speeds[u]||u,h=h||"fx",this.queue(h,function(g,y){var b=e.setTimeout(g,u);y.stop=function(){e.clearTimeout(b)}})},function(){var u=V.createElement("input"),h=V.createElement("select"),g=h.appendChild(V.createElement("option"));u.type="checkbox",C.checkOn=u.value!=="",C.optSelected=g.selected,u=V.createElement("input"),u.value="t",u.type="radio",C.radioValue=u.value==="t"}();var Cp,Pa=_.expr.attrHandle;_.fn.extend({attr:function(u,h){return q(this,_.attr,u,h,arguments.length>1)},removeAttr:function(u){return this.each(function(){_.removeAttr(this,u)})}}),_.extend({attr:function(u,h,g){var y,b,w=u.nodeType;if(!(w===3||w===8||w===2)){if(typeof u.getAttribute>"u")return _.prop(u,h,g);if((w!==1||!_.isXMLDoc(u))&&(b=_.attrHooks[h.toLowerCase()]||(_.expr.match.bool.test(h)?Cp:void 0)),g!==void 0){if(g===null){_.removeAttr(u,h);return}return b&&"set"in b&&(y=b.set(u,g,h))!==void 0?y:(u.setAttribute(h,g+""),g)}return b&&"get"in b&&(y=b.get(u,h))!==null?y:(y=_.find.attr(u,h),y??void 0)}},attrHooks:{type:{set:function(u,h){if(!C.radioValue&&h==="radio"&&Xe(u,"input")){var g=u.value;return u.setAttribute("type",h),g&&(u.value=g),h}}}},removeAttr:function(u,h){var g,y=0,b=h&&h.match(wt);if(b&&u.nodeType===1)for(;g=b[y++];)u.removeAttribute(g)}}),Cp={set:function(u,h,g){return h===!1?_.removeAttr(u,g):u.setAttribute(g,g),g}},_.each(_.expr.match.bool.source.match(/\w+/g),function(u,h){var g=Pa[h]||_.find.attr;Pa[h]=function(y,b,w){var T,M,O=b.toLowerCase();return w||(M=Pa[O],Pa[O]=T,T=g(y,b,w)!=null?O:null,Pa[O]=M),T}});var ET=/^(?:input|select|textarea|button)$/i,DT=/^(?:a|area)$/i;_.fn.extend({prop:function(u,h){return q(this,_.prop,u,h,arguments.length>1)},removeProp:function(u){return this.each(function(){delete this[_.propFix[u]||u]})}}),_.extend({prop:function(u,h,g){var y,b,w=u.nodeType;if(!(w===3||w===8||w===2))return(w!==1||!_.isXMLDoc(u))&&(h=_.propFix[h]||h,b=_.propHooks[h]),g!==void 0?b&&"set"in b&&(y=b.set(u,g,h))!==void 0?y:u[h]=g:b&&"get"in b&&(y=b.get(u,h))!==null?y:u[h]},propHooks:{tabIndex:{get:function(u){var h=_.find.attr(u,"tabindex");return h?parseInt(h,10):ET.test(u.nodeName)||DT.test(u.nodeName)&&u.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),C.optSelected||(_.propHooks.selected={get:function(u){var h=u.parentNode;return h&&h.parentNode&&h.parentNode.selectedIndex,null},set:function(u){var h=u.parentNode;h&&(h.selectedIndex,h.parentNode&&h.parentNode.selectedIndex)}}),_.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){_.propFix[this.toLowerCase()]=this});function Rr(u){var h=u.match(wt)||[];return h.join(" ")}function Mr(u){return u.getAttribute&&u.getAttribute("class")||""}function Ic(u){return Array.isArray(u)?u:typeof u=="string"?u.match(wt)||[]:[]}_.fn.extend({addClass:function(u){var h,g,y,b,w,T,M,O=0;if(D(u))return this.each(function(z){_(this).addClass(u.call(this,z,Mr(this)))});if(h=Ic(u),h.length){for(;g=this[O++];)if(b=Mr(g),y=g.nodeType===1&&" "+Rr(b)+" ",y){for(T=0;w=h[T++];)y.indexOf(" "+w+" ")<0&&(y+=w+" ");M=Rr(y),b!==M&&g.setAttribute("class",M)}}return this},removeClass:function(u){var h,g,y,b,w,T,M,O=0;if(D(u))return this.each(function(z){_(this).removeClass(u.call(this,z,Mr(this)))});if(!arguments.length)return this.attr("class","");if(h=Ic(u),h.length){for(;g=this[O++];)if(b=Mr(g),y=g.nodeType===1&&" "+Rr(b)+" ",y){for(T=0;w=h[T++];)for(;y.indexOf(" "+w+" ")>-1;)y=y.replace(" "+w+" "," ");M=Rr(y),b!==M&&g.setAttribute("class",M)}}return this},toggleClass:function(u,h){var g=typeof u,y=g==="string"||Array.isArray(u);return typeof h=="boolean"&&y?h?this.addClass(u):this.removeClass(u):D(u)?this.each(function(b){_(this).toggleClass(u.call(this,b,Mr(this),h),h)}):this.each(function(){var b,w,T,M;if(y)for(w=0,T=_(this),M=Ic(u);b=M[w++];)T.hasClass(b)?T.removeClass(b):T.addClass(b);else(u===void 0||g==="boolean")&&(b=Mr(this),b&&Y.set(this,"__className__",b),this.setAttribute&&this.setAttribute("class",b||u===!1?"":Y.get(this,"__className__")||""))})},hasClass:function(u){var h,g,y=0;for(h=" "+u+" ";g=this[y++];)if(g.nodeType===1&&(" "+Rr(Mr(g))+" ").indexOf(h)>-1)return!0;return!1}});var kT=/\r/g;_.fn.extend({val:function(u){var h,g,y,b=this[0];return arguments.length?(y=D(u),this.each(function(w){var T;this.nodeType===1&&(y?T=u.call(this,w,_(this).val()):T=u,T==null?T="":typeof T=="number"?T+="":Array.isArray(T)&&(T=_.map(T,function(M){return M==null?"":M+""})),h=_.valHooks[this.type]||_.valHooks[this.nodeName.toLowerCase()],(!h||!("set"in h)||h.set(this,T,"value")===void 0)&&(this.value=T))})):b?(h=_.valHooks[b.type]||_.valHooks[b.nodeName.toLowerCase()],h&&"get"in h&&(g=h.get(b,"value"))!==void 0?g:(g=b.value,typeof g=="string"?g.replace(kT,""):g??"")):void 0}}),_.extend({valHooks:{option:{get:function(u){var h=_.find.attr(u,"value");return h??Rr(_.text(u))}},select:{get:function(u){var h,g,y,b=u.options,w=u.selectedIndex,T=u.type==="select-one",M=T?null:[],O=T?w+1:b.length;for(w<0?y=O:y=T?w:0;y<O;y++)if(g=b[y],(g.selected||y===w)&&!g.disabled&&(!g.parentNode.disabled||!Xe(g.parentNode,"optgroup"))){if(h=_(g).val(),T)return h;M.push(h)}return M},set:function(u,h){for(var g,y,b=u.options,w=_.makeArray(h),T=b.length;T--;)y=b[T],(y.selected=_.inArray(_.valHooks.option.get(y),w)>-1)&&(g=!0);return g||(u.selectedIndex=-1),w}}}}),_.each(["radio","checkbox"],function(){_.valHooks[this]={set:function(u,h){if(Array.isArray(h))return u.checked=_.inArray(_(u).val(),h)>-1}},C.checkOn||(_.valHooks[this].get=function(u){return u.getAttribute("value")===null?"on":u.value})}),C.focusin="onfocusin"in e;var Pp=/^(?:focusinfocus|focusoutblur)$/,Ap=function(u){u.stopPropagation()};_.extend(_.event,{trigger:function(u,h,g,y){var b,w,T,M,O,z,te,me,Z=[g||V],re=v.call(u,"type")?u.type:u,Ve=v.call(u,"namespace")?u.namespace.split("."):[];if(w=me=T=g=g||V,!(g.nodeType===3||g.nodeType===8)&&!Pp.test(re+_.event.triggered)&&(re.indexOf(".")>-1&&(Ve=re.split("."),re=Ve.shift(),Ve.sort()),O=re.indexOf(":")<0&&"on"+re,u=u[_.expando]?u:new _.Event(re,typeof u=="object"&&u),u.isTrigger=y?2:3,u.namespace=Ve.join("."),u.rnamespace=u.namespace?new RegExp("(^|\\.)"+Ve.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,u.result=void 0,u.target||(u.target=g),h=h==null?[u]:_.makeArray(h,[u]),te=_.event.special[re]||{},!(!y&&te.trigger&&te.trigger.apply(g,h)===!1))){if(!y&&!te.noBubble&&!J(g)){for(M=te.delegateType||re,Pp.test(M+re)||(w=w.parentNode);w;w=w.parentNode)Z.push(w),T=w;T===(g.ownerDocument||V)&&Z.push(T.defaultView||T.parentWindow||e)}for(b=0;(w=Z[b++])&&!u.isPropagationStopped();)me=w,u.type=b>1?M:te.bindType||re,z=(Y.get(w,"events")||Object.create(null))[u.type]&&Y.get(w,"handle"),z&&z.apply(w,h),z=O&&w[O],z&&z.apply&&B(w)&&(u.result=z.apply(w,h),u.result===!1&&u.preventDefault());return u.type=re,!y&&!u.isDefaultPrevented()&&(!te._default||te._default.apply(Z.pop(),h)===!1)&&B(g)&&O&&D(g[re])&&!J(g)&&(T=g[O],T&&(g[O]=null),_.event.triggered=re,u.isPropagationStopped()&&me.addEventListener(re,Ap),g[re](),u.isPropagationStopped()&&me.removeEventListener(re,Ap),_.event.triggered=void 0,T&&(g[O]=T)),u.result}},simulate:function(u,h,g){var y=_.extend(new _.Event,g,{type:u,isSimulated:!0});_.event.trigger(y,null,h)}}),_.fn.extend({trigger:function(u,h){return this.each(function(){_.event.trigger(u,h,this)})},triggerHandler:function(u,h){var g=this[0];if(g)return _.event.trigger(u,h,g,!0)}}),C.focusin||_.each({focus:"focusin",blur:"focusout"},function(u,h){var g=function(y){_.event.simulate(h,y.target,_.event.fix(y))};_.event.special[h]={setup:function(){var y=this.ownerDocument||this.document||this,b=Y.access(y,h);b||y.addEventListener(u,g,!0),Y.access(y,h,(b||0)+1)},teardown:function(){var y=this.ownerDocument||this.document||this,b=Y.access(y,h)-1;b?Y.access(y,h,b):(y.removeEventListener(u,g,!0),Y.remove(y,h))}}});var Aa=e.location,Rp={guid:Date.now()},Ec=/\?/;_.parseXML=function(u){var h,g;if(!u||typeof u!="string")return null;try{h=new e.DOMParser().parseFromString(u,"text/xml")}catch{}return g=h&&h.getElementsByTagName("parsererror")[0],(!h||g)&&_.error("Invalid XML: "+(g?_.map(g.childNodes,function(y){return y.textContent}).join(`
`):u)),h};var CT=/\[\]$/,Mp=/\r?\n/g,PT=/^(?:submit|button|image|reset|file)$/i,AT=/^(?:input|select|textarea|keygen)/i;function Dc(u,h,g,y){var b;if(Array.isArray(h))_.each(h,function(w,T){g||CT.test(u)?y(u,T):Dc(u+"["+(typeof T=="object"&&T!=null?w:"")+"]",T,g,y)});else if(!g&&ee(h)==="object")for(b in h)Dc(u+"["+b+"]",h[b],g,y);else y(u,h)}_.param=function(u,h){var g,y=[],b=function(w,T){var M=D(T)?T():T;y[y.length]=encodeURIComponent(w)+"="+encodeURIComponent(M??"")};if(u==null)return"";if(Array.isArray(u)||u.jquery&&!_.isPlainObject(u))_.each(u,function(){b(this.name,this.value)});else for(g in u)Dc(g,u[g],h,b);return y.join("&")},_.fn.extend({serialize:function(){return _.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var u=_.prop(this,"elements");return u?_.makeArray(u):this}).filter(function(){var u=this.type;return this.name&&!_(this).is(":disabled")&&AT.test(this.nodeName)&&!PT.test(u)&&(this.checked||!Ps.test(u))}).map(function(u,h){var g=_(this).val();return g==null?null:Array.isArray(g)?_.map(g,function(y){return{name:h.name,value:y.replace(Mp,`\r
`)}}):{name:h.name,value:g.replace(Mp,`\r
`)}}).get()}});var RT=/%20/g,MT=/#.*$/,OT=/([?&])_=[^&]*/,$T=/^(.*?):[ \t]*([^\r\n]*)$/mg,NT=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,LT=/^(?:GET|HEAD)$/,VT=/^\/\//,Op={},kc={},$p="*/".concat("*"),Cc=V.createElement("a");Cc.href=Aa.href;function Np(u){return function(h,g){typeof h!="string"&&(g=h,h="*");var y,b=0,w=h.toLowerCase().match(wt)||[];if(D(g))for(;y=w[b++];)y[0]==="+"?(y=y.slice(1)||"*",(u[y]=u[y]||[]).unshift(g)):(u[y]=u[y]||[]).push(g)}}function Lp(u,h,g,y){var b={},w=u===kc;function T(M){var O;return b[M]=!0,_.each(u[M]||[],function(z,te){var me=te(h,g,y);if(typeof me=="string"&&!w&&!b[me])return h.dataTypes.unshift(me),T(me),!1;if(w)return!(O=me)}),O}return T(h.dataTypes[0])||!b["*"]&&T("*")}function Pc(u,h){var g,y,b=_.ajaxSettings.flatOptions||{};for(g in h)h[g]!==void 0&&((b[g]?u:y||(y={}))[g]=h[g]);return y&&_.extend(!0,u,y),u}function WT(u,h,g){for(var y,b,w,T,M=u.contents,O=u.dataTypes;O[0]==="*";)O.shift(),y===void 0&&(y=u.mimeType||h.getResponseHeader("Content-Type"));if(y){for(b in M)if(M[b]&&M[b].test(y)){O.unshift(b);break}}if(O[0]in g)w=O[0];else{for(b in g){if(!O[0]||u.converters[b+" "+O[0]]){w=b;break}T||(T=b)}w=w||T}if(w)return w!==O[0]&&O.unshift(w),g[w]}function FT(u,h,g,y){var b,w,T,M,O,z={},te=u.dataTypes.slice();if(te[1])for(T in u.converters)z[T.toLowerCase()]=u.converters[T];for(w=te.shift();w;)if(u.responseFields[w]&&(g[u.responseFields[w]]=h),!O&&y&&u.dataFilter&&(h=u.dataFilter(h,u.dataType)),O=w,w=te.shift(),w){if(w==="*")w=O;else if(O!=="*"&&O!==w){if(T=z[O+" "+w]||z["* "+w],!T){for(b in z)if(M=b.split(" "),M[1]===w&&(T=z[O+" "+M[0]]||z["* "+M[0]],T)){T===!0?T=z[b]:z[b]!==!0&&(w=M[0],te.unshift(M[1]));break}}if(T!==!0)if(T&&u.throws)h=T(h);else try{h=T(h)}catch(me){return{state:"parsererror",error:T?me:"No conversion from "+O+" to "+w}}}}return{state:"success",data:h}}_.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Aa.href,type:"GET",isLocal:NT.test(Aa.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":$p,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":_.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(u,h){return h?Pc(Pc(u,_.ajaxSettings),h):Pc(_.ajaxSettings,u)},ajaxPrefilter:Np(Op),ajaxTransport:Np(kc),ajax:function(u,h){typeof u=="object"&&(h=u,u=void 0),h=h||{};var g,y,b,w,T,M,O,z,te,me,Z=_.ajaxSetup({},h),re=Z.context||Z,Ve=Z.context&&(re.nodeType||re.jquery)?_(re):_.event,nt=_.Deferred(),We=_.Callbacks("once memory"),di=Z.statusCode||{},oi={},ts={},kt="canceled",tt={readyState:0,getResponseHeader:function(pt){var Zt;if(O){if(!w)for(w={};Zt=$T.exec(b);)w[Zt[1].toLowerCase()+" "]=(w[Zt[1].toLowerCase()+" "]||[]).concat(Zt[2]);Zt=w[pt.toLowerCase()+" "]}return Zt==null?null:Zt.join(", ")},getAllResponseHeaders:function(){return O?b:null},setRequestHeader:function(pt,Zt){return O==null&&(pt=ts[pt.toLowerCase()]=ts[pt.toLowerCase()]||pt,oi[pt]=Zt),this},overrideMimeType:function(pt){return O==null&&(Z.mimeType=pt),this},statusCode:function(pt){var Zt;if(pt)if(O)tt.always(pt[tt.status]);else for(Zt in pt)di[Zt]=[di[Zt],pt[Zt]];return this},abort:function(pt){var Zt=pt||kt;return g&&g.abort(Zt),Ki(0,Zt),this}};if(nt.promise(tt),Z.url=((u||Z.url||Aa.href)+"").replace(VT,Aa.protocol+"//"),Z.type=h.method||h.type||Z.method||Z.type,Z.dataTypes=(Z.dataType||"*").toLowerCase().match(wt)||[""],Z.crossDomain==null){M=V.createElement("a");try{M.href=Z.url,M.href=M.href,Z.crossDomain=Cc.protocol+"//"+Cc.host!=M.protocol+"//"+M.host}catch{Z.crossDomain=!0}}if(Z.data&&Z.processData&&typeof Z.data!="string"&&(Z.data=_.param(Z.data,Z.traditional)),Lp(Op,Z,h,tt),O)return tt;z=_.event&&Z.global,z&&_.active++===0&&_.event.trigger("ajaxStart"),Z.type=Z.type.toUpperCase(),Z.hasContent=!LT.test(Z.type),y=Z.url.replace(MT,""),Z.hasContent?Z.data&&Z.processData&&(Z.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&(Z.data=Z.data.replace(RT,"+")):(me=Z.url.slice(y.length),Z.data&&(Z.processData||typeof Z.data=="string")&&(y+=(Ec.test(y)?"&":"?")+Z.data,delete Z.data),Z.cache===!1&&(y=y.replace(OT,"$1"),me=(Ec.test(y)?"&":"?")+"_="+Rp.guid+++me),Z.url=y+me),Z.ifModified&&(_.lastModified[y]&&tt.setRequestHeader("If-Modified-Since",_.lastModified[y]),_.etag[y]&&tt.setRequestHeader("If-None-Match",_.etag[y])),(Z.data&&Z.hasContent&&Z.contentType!==!1||h.contentType)&&tt.setRequestHeader("Content-Type",Z.contentType),tt.setRequestHeader("Accept",Z.dataTypes[0]&&Z.accepts[Z.dataTypes[0]]?Z.accepts[Z.dataTypes[0]]+(Z.dataTypes[0]!=="*"?", "+$p+"; q=0.01":""):Z.accepts["*"]);for(te in Z.headers)tt.setRequestHeader(te,Z.headers[te]);if(Z.beforeSend&&(Z.beforeSend.call(re,tt,Z)===!1||O))return tt.abort();if(kt="abort",We.add(Z.complete),tt.done(Z.success),tt.fail(Z.error),g=Lp(kc,Z,h,tt),!g)Ki(-1,"No Transport");else{if(tt.readyState=1,z&&Ve.trigger("ajaxSend",[tt,Z]),O)return tt;Z.async&&Z.timeout>0&&(T=e.setTimeout(function(){tt.abort("timeout")},Z.timeout));try{O=!1,g.send(oi,Ki)}catch(pt){if(O)throw pt;Ki(-1,pt)}}function Ki(pt,Zt,Ma,ld){var is,Or,$r,Ji,Qn,ms=Zt;O||(O=!0,T&&e.clearTimeout(T),g=void 0,b=ld||"",tt.readyState=pt>0?4:0,is=pt>=200&&pt<300||pt===304,Ma&&(Ji=WT(Z,tt,Ma)),!is&&_.inArray("script",Z.dataTypes)>-1&&_.inArray("json",Z.dataTypes)<0&&(Z.converters["text script"]=function(){}),Ji=FT(Z,Ji,tt,is),is?(Z.ifModified&&(Qn=tt.getResponseHeader("Last-Modified"),Qn&&(_.lastModified[y]=Qn),Qn=tt.getResponseHeader("etag"),Qn&&(_.etag[y]=Qn)),pt===204||Z.type==="HEAD"?ms="nocontent":pt===304?ms="notmodified":(ms=Ji.state,Or=Ji.data,$r=Ji.error,is=!$r)):($r=ms,(pt||!ms)&&(ms="error",pt<0&&(pt=0))),tt.status=pt,tt.statusText=(Zt||ms)+"",is?nt.resolveWith(re,[Or,ms,tt]):nt.rejectWith(re,[tt,ms,$r]),tt.statusCode(di),di=void 0,z&&Ve.trigger(is?"ajaxSuccess":"ajaxError",[tt,Z,is?Or:$r]),We.fireWith(re,[tt,ms]),z&&(Ve.trigger("ajaxComplete",[tt,Z]),--_.active||_.event.trigger("ajaxStop")))}return tt},getJSON:function(u,h,g){return _.get(u,h,g,"json")},getScript:function(u,h){return _.get(u,void 0,h,"script")}}),_.each(["get","post"],function(u,h){_[h]=function(g,y,b,w){return D(y)&&(w=w||b,b=y,y=void 0),_.ajax(_.extend({url:g,type:h,dataType:w,data:y,success:b},_.isPlainObject(g)&&g))}}),_.ajaxPrefilter(function(u){var h;for(h in u.headers)h.toLowerCase()==="content-type"&&(u.contentType=u.headers[h]||"")}),_._evalUrl=function(u,h,g){return _.ajax({url:u,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(y){_.globalEval(y,h,g)}})},_.fn.extend({wrapAll:function(u){var h;return this[0]&&(D(u)&&(u=u.call(this[0])),h=_(u,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&h.insertBefore(this[0]),h.map(function(){for(var g=this;g.firstElementChild;)g=g.firstElementChild;return g}).append(this)),this},wrapInner:function(u){return D(u)?this.each(function(h){_(this).wrapInner(u.call(this,h))}):this.each(function(){var h=_(this),g=h.contents();g.length?g.wrapAll(u):h.append(u)})},wrap:function(u){var h=D(u);return this.each(function(g){_(this).wrapAll(h?u.call(this,g):u)})},unwrap:function(u){return this.parent(u).not("body").each(function(){_(this).replaceWith(this.childNodes)}),this}}),_.expr.pseudos.hidden=function(u){return!_.expr.pseudos.visible(u)},_.expr.pseudos.visible=function(u){return!!(u.offsetWidth||u.offsetHeight||u.getClientRects().length)},_.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch{}};var BT={0:200,1223:204},Ra=_.ajaxSettings.xhr();C.cors=!!Ra&&"withCredentials"in Ra,C.ajax=Ra=!!Ra,_.ajaxTransport(function(u){var h,g;if(C.cors||Ra&&!u.crossDomain)return{send:function(y,b){var w,T=u.xhr();if(T.open(u.type,u.url,u.async,u.username,u.password),u.xhrFields)for(w in u.xhrFields)T[w]=u.xhrFields[w];u.mimeType&&T.overrideMimeType&&T.overrideMimeType(u.mimeType),!u.crossDomain&&!y["X-Requested-With"]&&(y["X-Requested-With"]="XMLHttpRequest");for(w in y)T.setRequestHeader(w,y[w]);h=function(M){return function(){h&&(h=g=T.onload=T.onerror=T.onabort=T.ontimeout=T.onreadystatechange=null,M==="abort"?T.abort():M==="error"?typeof T.status!="number"?b(0,"error"):b(T.status,T.statusText):b(BT[T.status]||T.status,T.statusText,(T.responseType||"text")!=="text"||typeof T.responseText!="string"?{binary:T.response}:{text:T.responseText},T.getAllResponseHeaders()))}},T.onload=h(),g=T.onerror=T.ontimeout=h("error"),T.onabort!==void 0?T.onabort=g:T.onreadystatechange=function(){T.readyState===4&&e.setTimeout(function(){h&&g()})},h=h("abort");try{T.send(u.hasContent&&u.data||null)}catch(M){if(h)throw M}},abort:function(){h&&h()}}}),_.ajaxPrefilter(function(u){u.crossDomain&&(u.contents.script=!1)}),_.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(u){return _.globalEval(u),u}}}),_.ajaxPrefilter("script",function(u){u.cache===void 0&&(u.cache=!1),u.crossDomain&&(u.type="GET")}),_.ajaxTransport("script",function(u){if(u.crossDomain||u.scriptAttrs){var h,g;return{send:function(y,b){h=_("<script>").attr(u.scriptAttrs||{}).prop({charset:u.scriptCharset,src:u.url}).on("load error",g=function(w){h.remove(),g=null,w&&b(w.type==="error"?404:200,w.type)}),V.head.appendChild(h[0])},abort:function(){g&&g()}}}});var Vp=[],Ac=/(=)\?(?=&|$)|\?\?/;_.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var u=Vp.pop()||_.expando+"_"+Rp.guid++;return this[u]=!0,u}}),_.ajaxPrefilter("json jsonp",function(u,h,g){var y,b,w,T=u.jsonp!==!1&&(Ac.test(u.url)?"url":typeof u.data=="string"&&(u.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&Ac.test(u.data)&&"data");if(T||u.dataTypes[0]==="jsonp")return y=u.jsonpCallback=D(u.jsonpCallback)?u.jsonpCallback():u.jsonpCallback,T?u[T]=u[T].replace(Ac,"$1"+y):u.jsonp!==!1&&(u.url+=(Ec.test(u.url)?"&":"?")+u.jsonp+"="+y),u.converters["script json"]=function(){return w||_.error(y+" was not called"),w[0]},u.dataTypes[0]="json",b=e[y],e[y]=function(){w=arguments},g.always(function(){b===void 0?_(e).removeProp(y):e[y]=b,u[y]&&(u.jsonpCallback=h.jsonpCallback,Vp.push(y)),w&&D(b)&&b(w[0]),w=b=void 0}),"script"}),C.createHTMLDocument=function(){var u=V.implementation.createHTMLDocument("").body;return u.innerHTML="<form></form><form></form>",u.childNodes.length===2}(),_.parseHTML=function(u,h,g){if(typeof u!="string")return[];typeof h=="boolean"&&(g=h,h=!1);var y,b,w;return h||(C.createHTMLDocument?(h=V.implementation.createHTMLDocument(""),y=h.createElement("base"),y.href=V.location.href,h.head.appendChild(y)):h=V),b=lt.exec(u),w=!g&&[],b?[h.createElement(b[1])]:(b=fp([u],h,w),w&&w.length&&_(w).remove(),_.merge([],b.childNodes))},_.fn.load=function(u,h,g){var y,b,w,T=this,M=u.indexOf(" ");return M>-1&&(y=Rr(u.slice(M)),u=u.slice(0,M)),D(h)?(g=h,h=void 0):h&&typeof h=="object"&&(b="POST"),T.length>0&&_.ajax({url:u,type:b||"GET",dataType:"html",data:h}).done(function(O){w=arguments,T.html(y?_("<div>").append(_.parseHTML(O)).find(y):O)}).always(g&&function(O,z){T.each(function(){g.apply(this,w||[O.responseText,z,O])})}),this},_.expr.pseudos.animated=function(u){return _.grep(_.timers,function(h){return u===h.elem}).length},_.offset={setOffset:function(u,h,g){var y,b,w,T,M,O,z,te=_.css(u,"position"),me=_(u),Z={};te==="static"&&(u.style.position="relative"),M=me.offset(),w=_.css(u,"top"),O=_.css(u,"left"),z=(te==="absolute"||te==="fixed")&&(w+O).indexOf("auto")>-1,z?(y=me.position(),T=y.top,b=y.left):(T=parseFloat(w)||0,b=parseFloat(O)||0),D(h)&&(h=h.call(u,g,_.extend({},M))),h.top!=null&&(Z.top=h.top-M.top+T),h.left!=null&&(Z.left=h.left-M.left+b),"using"in h?h.using.call(u,Z):me.css(Z)}},_.fn.extend({offset:function(u){if(arguments.length)return u===void 0?this:this.each(function(b){_.offset.setOffset(this,u,b)});var h,g,y=this[0];if(y)return y.getClientRects().length?(h=y.getBoundingClientRect(),g=y.ownerDocument.defaultView,{top:h.top+g.pageYOffset,left:h.left+g.pageXOffset}):{top:0,left:0}},position:function(){if(this[0]){var u,h,g,y=this[0],b={top:0,left:0};if(_.css(y,"position")==="fixed")h=y.getBoundingClientRect();else{for(h=this.offset(),g=y.ownerDocument,u=y.offsetParent||g.documentElement;u&&(u===g.body||u===g.documentElement)&&_.css(u,"position")==="static";)u=u.parentNode;u&&u!==y&&u.nodeType===1&&(b=_(u).offset(),b.top+=_.css(u,"borderTopWidth",!0),b.left+=_.css(u,"borderLeftWidth",!0))}return{top:h.top-b.top-_.css(y,"marginTop",!0),left:h.left-b.left-_.css(y,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var u=this.offsetParent;u&&_.css(u,"position")==="static";)u=u.offsetParent;return u||Be})}}),_.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(u,h){var g=h==="pageYOffset";_.fn[u]=function(y){return q(this,function(b,w,T){var M;if(J(b)?M=b:b.nodeType===9&&(M=b.defaultView),T===void 0)return M?M[h]:b[w];M?M.scrollTo(g?M.pageXOffset:T,g?T:M.pageYOffset):b[w]=T},u,y,arguments.length)}}),_.each(["top","left"],function(u,h){_.cssHooks[h]=_p(C.pixelPosition,function(g,y){if(y)return y=Ca(g,h),wc.test(y)?_(g).position()[h]+"px":y})}),_.each({Height:"height",Width:"width"},function(u,h){_.each({padding:"inner"+u,content:h,"":"outer"+u},function(g,y){_.fn[y]=function(b,w){var T=arguments.length&&(g||typeof b!="boolean"),M=g||(b===!0||w===!0?"margin":"border");return q(this,function(O,z,te){var me;return J(O)?y.indexOf("outer")===0?O["inner"+u]:O.document.documentElement["client"+u]:O.nodeType===9?(me=O.documentElement,Math.max(O.body["scroll"+u],me["scroll"+u],O.body["offset"+u],me["offset"+u],me["client"+u])):te===void 0?_.css(O,z,M):_.style(O,z,te,M)},h,T?b:void 0,T)}})}),_.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(u,h){_.fn[h]=function(g){return this.on(h,g)}}),_.fn.extend({bind:function(u,h,g){return this.on(u,null,h,g)},unbind:function(u,h){return this.off(u,null,h)},delegate:function(u,h,g,y){return this.on(h,u,g,y)},undelegate:function(u,h,g){return arguments.length===1?this.off(u,"**"):this.off(h,u||"**",g)},hover:function(u,h){return this.mouseenter(u).mouseleave(h||u)}}),_.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(u,h){_.fn[h]=function(g,y){return arguments.length>0?this.on(h,null,g,y):this.trigger(h)}});var zT=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;_.proxy=function(u,h){var g,y,b;if(typeof h=="string"&&(g=u[h],h=u,u=g),!!D(u))return y=n.call(arguments,2),b=function(){return u.apply(h||this,y.concat(n.call(arguments)))},b.guid=u.guid=u.guid||_.guid++,b},_.holdReady=function(u){u?_.readyWait++:_.ready(!0)},_.isArray=Array.isArray,_.parseJSON=JSON.parse,_.nodeName=Xe,_.isFunction=D,_.isWindow=J,_.camelCase=A,_.type=ee,_.now=Date.now,_.isNumeric=function(u){var h=_.type(u);return(h==="number"||h==="string")&&!isNaN(u-parseFloat(u))},_.trim=function(u){return u==null?"":(u+"").replace(zT,"")};var jT=e.jQuery,HT=e.$;return _.noConflict=function(u){return e.$===_&&(e.$=HT),u&&e.jQuery===_&&(e.jQuery=jT),_},typeof i>"u"&&(e.jQuery=e.$=_),_})}(Kd)),Kd.exports}tA();const bt=qs("app",{state:()=>({windowWidth:void 0,windowHeight:void 0,windowOuterWidth:void 0,windowOuterHeight:void 0,browserType:void 0,isTouchscreen:void 0,isExtraSmall:void 0,selectedItemPanel:"todo",isTabBarShown:!0,navbar:{active:"main",selectedPage:"planner"},showLeftPanel:!0,isMobileCalendarShown:!1,calendarMobile:{isShown:!0,type:tn.WEEK},thumbnailCalendar:{monthCount:1},planner:{selectedView:"week",dayCount:7},itemPanel:{selected:"todo",briefing:{title:"Briefing"},todo:{showRepeat:!0,showTimeline:!1,showRecommended:!0,showHierarchy:!0,sort:{by:"Default",items:[{id:1,text:"Default"},{id:2,text:"Backlog"},{id:3,text:"Custom"},{id:4,text:"Repetition"},{id:5,text:"Metric"},{id:5,text:"Memorization"}]}},goal:{showReverse:!0,showTimeline:!1,showHierarchy:!0,sort:{by:"Timeframe",items:[{id:1,text:"Dashboard"},{id:2,text:"Timeframe"},{id:3,text:"Custom"},{id:4,text:"Repetition"},{id:5,text:"Metric"},{id:6,text:"Date"}]}},inventory:{title:"Inventory",showPrimary:!0,showSecondary:!1,showTertiary:!1,primaryToggled:void 0,secondaryToggled:void 0,tertiaryToggled:void 0,clear:0},event:{type:void 0,event:void 0},workout:{selectedView:"dashboard",selectedWorkoutID:void 0,selectedExerciseID:void 0,activeExerciseID:void 0,exerciseList:{selectedSectionID:void 0,nextExercisePosition:void 0,isSelector:void 0},exerciseHistory:{idExercise:void 0,variationIDs:[]},panelQueue:[]}}}),getters:{},actions:{setWindowSize(t,e){this.windowWidth=t,this.windowHeight=e,t<576?this.isExtraSmall=!0:this.isExtraSmall=!1},setWindowOuterSize(t,e){this.windowOuterWidth=t,this.windowOuterHeight=e},onMenuButtonClicked(){this.navbar.active=="main"?this.isTabBarShown?(this.navbar.active="itemPanel",this.isTabBarShown=!1):this.isTabBarShown=!0:(this.navbar.active="main",this.isTabBarShown||(this.isTabBarShown=!0))},setLeftPanelVisibility(t){this.showLeftPanel=t},toggleLeftPanel(){this.showLeftPanel=!this.showLeftPanel},selectPage(t){this.navbar.selectedPage=t},selectPlannerView(t){this.planner.selectedView=t},setPlannerDayCount(t){this.planner.dayCount=t},initItemPanels(){},onItemPanelTabButtonClicked(t){this.itemPanel.selected==t?this.navbar.active=="main"?this.navbar.active="itemPanel":this.isTabBarShown=!1:(this.itemPanel.selected=t,this.navbar.active="itemPanel")},setSelectedItemPanel(t){this.itemPanel.selected=t},setItemPanelSetting(t,e,i){this.itemPanel[t][e]=i},setItemPanelSortBy(t,e){this.itemPanel[t].sort.by=e,localStorage.setItem(`${t}-panel-sort-by`,e)},async setSelectedEvent(t){if(t.type.id==Rn.WORKOUT){let i=await mi().getWorkoutIDFromEvent(t.id);this.selectWorkout(i),this.itemPanel.selected="workout"}else t.type.id==Rn.TODO?(this.itemPanel.selected="event",this.itemPanel.event.type=Rn.TODO,this.itemPanel.event.event=t):t.type.id==Rn.ROUTINE&&(this.itemPanel.selected="event",this.itemPanel.event.type=Rn.ROUTINE,this.itemPanel.event.event=t)},toggleTabBar(){this.isTabBarShown=!this.isTabBarShown},toggleMobileCalendar(){this.calendarMobile.isShown==!1?(this.calendarMobile.type=tn.WEEK,this.calendarMobile.isShown=!0):this.calendarMobile.type==tn.WEEK?(this.calendarMobile.type=tn.MONTH,this.calendarMobile.isShown=!0):this.calendarMobile.type==tn.MONTH&&(this.calendarMobile.type=void 0,this.calendarMobile.isShown=!1)},setCalendarMobileType(t){t==tn.WEEK?this.calendarMobile.type=tn.WEEK:t==tn.MONTH&&(this.calendarMobile.type=tn.MONTH)},selectWorkoutView(t){let e=this.itemPanel.workout;e.selectedView!=t&&e.panelQueue.push(e.selectedView),e.selectedView=t},selectWorkout(t){this.itemPanel.workout.selectedWorkoutID=t,this.selectWorkoutView("workoutActive")},selectExercise(t){this.itemPanel.workout.selectedExerciseID=t,this.selectWorkoutView("workoutExercise")},setActiveExercise(t){this.itemPanel.workout.activeExerciseID=t},selectExerciseHistory(t,e){this.itemPanel.workout.exerciseHistory.idExercise=t,this.itemPanel.workout.exerciseHistory.variationIDs=[...e],this.selectWorkoutView("exerciseHistory")},onAddExerciseToSection(t,e){this.itemPanel.workout.exerciseList.selectedSectionID=t,this.itemPanel.workout.exerciseList.nextExercisePosition=e,this.itemPanel.workout.exerciseList.isSelector=!0,this.selectWorkoutView("exerciseList")},onDoneExerciseSelection(){this.itemPanel.workout.exerciseList.selectedSectionID=void 0,this.itemPanel.workout.exerciseList.nextExercisePosition=void 0,this.itemPanel.workout.exerciseList.addedExerciseIDs=[],this.itemPanel.workout.exerciseList.isSelector=void 0},onDoneWorkout(){this.itemPanel.workout.selectedWorkoutID=void 0,this.itemPanel.workout.selectedExerciseID=void 0,this.itemPanel.workout.activeExerciseID=void 0},onBackWorkoutPanel(){this.itemPanel.workout.selectedView=this.itemPanel.workout.panelQueue.pop()}}}),Kn=Object.freeze(Object.defineProperty({__proto__:null,useAppStore:bt},Symbol.toStringTag,{value:"Module"})),iA="modulepreload",sA=function(t){return"/"+t},ev={},K=function(e,i,s){let r=Promise.resolve();if(i&&i.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));r=Promise.allSettled(i.map(l=>{if(l=sA(l),l in ev)return;ev[l]=!0;const c=l.endsWith(".css"),f=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${f}`))return;const v=document.createElement("link");if(v.rel=c?"stylesheet":iA,c||(v.as="script"),v.crossOrigin="",v.href=l,a&&v.setAttribute("nonce",a),document.head.appendChild(v),c)return new Promise((S,I)=>{v.addEventListener("load",S),v.addEventListener("error",()=>I(new Error(`Unable to preload CSS for ${l}`)))})}))}function n(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return r.then(o=>{for(const a of o||[])a.status==="rejected"&&n(a.reason);return e().catch(n)})},Q=(t,e)=>{const i=t.__vccOpts||t;for(const[s,r]of e)i[s]=r;return i},nA={name:"MenuButton",props:{src:String,width:Number,height:Number},data:function(){return{iconWidth:48,iconHeight:48}},created:function(){this.iconWidth=this.width?this.width:this.iconWidth,this.iconHeight=this.height?this.height:this.iconHeight},methods:{click:rA}};function rA(){this.$emit("clicked")}const oA=["src","width","height"];function aA(t,e,i,s,r,n){return m(),p("img",{class:"icon-button",src:i.src,width:t.iconWidth,height:t.iconHeight,onClick:e[0]||(e[0]=(...o)=>n.click&&n.click(...o))},null,8,oA)}const po=Q(nA,[["render",aA]]),lA={name:"NavbarMenuButton",components:{IconButton:po},props:{},data:function(){return{appStore:void 0}},created:function(){this.appStore=bt()},methods:{onClick(){console.log("hello"),this.appStore.onMenuButtonClicked()}}};function dA(t,e,i,s,r,n){const o=$("IconButton");return m(),ie(o,{class:"menu-button float-left",src:"/icon/menu-button.png",width:40,height:40,onClicked:n.onClick},null,8,["onClicked"])}const Sw=Q(lA,[["render",dA],["__scopeId","data-v-5f415dbf"]]),Tw="/icon/planner-icon.png",uA={name:"NavbarCalendarButton",components:{},props:{},data:function(){return{appStore:void 0}},created:function(){this.appStore=bt()},methods:{toggleCalendar(){this.appStore.toggleMobileCalendar()}}};function cA(t,e,i,s,r,n){return m(),p("img",{class:"icon calendar-button",src:Tw,width:36,height:36,onClick:e[0]||(e[0]=(...o)=>n.toggleCalendar&&n.toggleCalendar(...o))})}const xw=Q(uA,[["render",cA],["__scopeId","data-v-03d16cec"]]),hA={components:{NavbarMenuButton:Sw,NavbarCalendarButton:xw},name:"ItemPanelHeader",props:{title:String,sort:Object,nextPages:Array},data:function(){return{appStore:void 0,sortBy:this.sort?this.sort.by:void 0,sortItems:this.sort?this.sort.items:void 0}},created:function(){this.appStore=bt()},computed:{isExtraSmall(){return this.appStore?this.appStore.isExtraSmall:!0}},methods:{onSortChange:fA},watch:{sort(t){this.sortBy=t?t.by:void 0,this.sortItems=t?t.items:void 0}}};function fA(){this.$emit("onSortChange",this.sortBy)}const mA={class:"header d-flex flex-row justify-content-between"},pA={class:"d-flex flex-row"},gA={class:"labels d-flex flex-column justify-content-center"},vA=["value"],yA={class:"d-flex flex-row"};function _A(t,e,i,s,r,n){const o=$("NavbarMenuButton"),a=$("NavbarCalendarButton");return m(),p("div",null,[d("div",mA,[d("div",pA,[n.isExtraSmall?(m(),ie(o,{key:0,class:"float-left"})):x("",!0),d("div",gA,[d("h1",null,k(i.title),1),i.sort?X((m(),p("select",{key:0,class:"form-select panel-select","aria-label":"select",onChange:e[0]||(e[0]=(...l)=>n.onSortChange&&n.onSortChange(...l)),"onUpdate:modelValue":e[1]||(e[1]=l=>t.sortBy=l)},[(m(!0),p(L,null,G(t.sortItems,l=>(m(),p("option",{key:l.id,value:l.text},k(l.text),9,vA))),128))],544)),[[Ts,t.sortBy]]):x("",!0)])]),d("div",yA,[px(t.$slots,"default",{},void 0),n.isExtraSmall?(m(),ie(a,{key:0})):x("",!0)])])])}const tc=Q(hA,[["render",_A],["__scopeId","data-v-1e8454e0"]]),bA="/icon/button/repeat.png",tv="/icon/button/timeline.png",wA="/icon/button/thumbs-up.png",iv="/icon/button/hierarchy.png",SA="/icon/button/reverse.png",TA="/icon/button/eraser.png",xA="/icon/button/one.png",IA="/icon/button/two.png",EA="/icon/button/three.png",DA={name:"ItemPanelNavbar",components:{ItemPanelHeader:tc},data:function(){return{appStore:void 0}},created:async function(){let t=await K(()=>Promise.resolve().then(()=>Kn),void 0);this.appStore=t.useAppStore()},computed:{isExtraSmall(){return this.appStore?this.appStore.isExtraSmall:!0},selectedPanel(){return this.appStore?this.appStore.itemPanel.selected:"todo"},title(){return this.selectedPanel=="inventory"?"Inventory":this.selectedPanel=="briefing"?"Briefing":`${this.selectedPanel}s`},sort(){return this.appStore&&this.appStore.itemPanel[this.selectedPanel]?this.appStore.itemPanel[this.selectedPanel].sort:void 0},showReverse(){return this.appStore?this.appStore.itemPanel[this.selectedPanel].showReverse:void 0},showRepeat(){return this.appStore?this.appStore.itemPanel[this.selectedPanel].showRepeat:void 0},showTimeline(){return this.appStore?this.appStore.itemPanel[this.selectedPanel].showTimeline:void 0},showRecommended(){return this.appStore?this.appStore.itemPanel[this.selectedPanel].showRecommended:void 0},showHierarchy(){return this.appStore?this.appStore.itemPanel[this.selectedPanel].showHierarchy:void 0},showPrimary(){return this.appStore?this.appStore.itemPanel.inventory.showPrimary:!0},showSecondary(){return this.appStore?this.appStore.itemPanel.inventory.showSecondary:!1},showTertiary(){return this.appStore?this.appStore.itemPanel.inventory.showTertiary:!1},primaryToggled(){return this.appStore?this.appStore.itemPanel.inventory.primaryToggled:void 0},secondaryToggled(){return this.appStore?this.appStore.itemPanel.inventory.secondaryToggled:void 0},tertiaryToggled(){return this.appStore?this.appStore.itemPanel.inventory.tertiaryToggled:void 0}},methods:{onSortChange(t){this.appStore.setItemPanelSortBy(this.selectedPanel,t)},setSetting(t){this.appStore.setItemPanelSetting(this.selectedPanel,t,!this[t])},setInventorySetting(t,e){this.appStore.itemPanel.inventory[t]=e},clearInventoryValues(){this.appStore.itemPanel.inventory.showPrimary=!0,this.appStore.itemPanel.inventory.showSecondary=!1,this.appStore.itemPanel.inventory.showTertiary=!1,this.appStore.itemPanel.inventory.primaryToggled=void 0,this.appStore.itemPanel.inventory.secondaryToggled=void 0,this.appStore.itemPanel.inventory.tertiaryToggled=void 0,this.appStore.itemPanel.inventory.clear++}}};function kA(t,e,i,s,r,n){const o=$("ItemPanelHeader");return m(),p("div",{class:F(["item-panel-navbar",n.selectedPanel])},[H(o,{title:`${n.title}`,sort:n.sort,onOnSortChange:n.onSortChange},{default:L_(()=>[t.appStore?(m(),p("div",{key:0,class:F(["buttons d-flex flex-row justify-content-end pe-2 mt-auto",[{"mb-auto":n.isExtraSmall}]])},[n.selectedPanel=="todo"?(m(),p(L,{key:0},[d("img",{class:F(["header-button me-1",{active:n.showRepeat}]),src:bA,width:"24",height:"24",onClick:e[0]||(e[0]=ye(a=>n.setSetting("showRepeat"),["prevent"]))},null,2),d("img",{class:F(["header-button me-1",{active:n.showTimeline}]),src:tv,width:"24",height:"24",onClick:e[1]||(e[1]=ye(a=>n.setSetting("showTimeline"),["prevent"]))},null,2),d("img",{class:F(["header-button me-1",{active:n.showRecommended}]),src:wA,width:"24",height:"24",onClick:e[2]||(e[2]=ye(a=>n.setSetting("showRecommended"),["prevent"]))},null,2),d("img",{class:F(["header-button me-1",{active:n.showHierarchy}]),src:iv,width:"24",height:"24",onClick:e[3]||(e[3]=ye(a=>n.setSetting("showHierarchy"),["prevent"]))},null,2)],64)):x("",!0),n.selectedPanel=="goal"?(m(),p(L,{key:1},[d("img",{class:F(["header-button me-1",{active:n.showReverse}]),src:SA,width:"24",height:"24",onClick:e[4]||(e[4]=ye(a=>n.setSetting("showReverse"),["prevent"]))},null,2),d("img",{class:F(["header-button me-1",{active:n.showTimeline}]),src:tv,width:"24",height:"24",onClick:e[5]||(e[5]=ye(a=>n.setSetting("showTimeline"),["prevent"]))},null,2),d("img",{class:F(["header-button me-1",{active:n.showHierarchy}]),src:iv,width:"24",height:"24",onClick:e[6]||(e[6]=ye(a=>n.setSetting("showHierarchy"),["prevent"]))},null,2)],64)):x("",!0),n.selectedPanel=="inventory"?(m(),p(L,{key:2},[d("img",{class:"header-button me-1",src:TA,width:"24",height:"24",onClick:e[7]||(e[7]=ye((...a)=>n.clearInventoryValues&&n.clearInventoryValues(...a),["prevent"]))}),d("img",{class:F(["header-button me-1",{active:n.primaryToggled==null?n.showPrimary:n.primaryToggled}]),src:xA,width:"24",height:"24",onClick:e[8]||(e[8]=ye(a=>n.setInventorySetting("primaryToggled",n.primaryToggled==null?!n.showPrimary:!n.primaryToggled),["prevent"]))},null,2),d("img",{class:F(["header-button me-1",{active:n.secondaryToggled==null?n.showSecondary:n.secondaryToggled}]),src:IA,width:"24",height:"24",onClick:e[9]||(e[9]=ye(a=>n.setInventorySetting("secondaryToggled",n.secondaryToggled==null?!n.showSecondary:!n.secondaryToggled),["prevent"]))},null,2),d("img",{class:F(["header-button me-1",{active:n.tertiaryToggled==null?n.showTertiary:n.tertiaryToggled}]),src:EA,width:"24",height:"24",onClick:e[10]||(e[10]=ye(a=>n.setInventorySetting("tertiaryToggled",n.tertiaryToggled==null?!n.showTertiary:!n.tertiaryToggled),["prevent"]))},null,2)],64)):x("",!0),n.selectedPanel=="briefing"?(m(),p(L,{key:3},[],64)):x("",!0)],2)):x("",!0)]),_:1},8,["title","sort","onOnSortChange"])],2)}const Yl=Q(DA,[["render",kA],["__scopeId","data-v-796c1476"]]),CA={name:"MobileNavbar",components:{NavbarMenuButton:Sw,NavbarCalendarButton:xw,ItemPanelNavbar:Yl},props:{},data:function(){return{appStore:void 0,itemPanelHeaders:["todo","goal","inventory"]}},created:function(){this.appStore=bt()},computed:{activeNavbar(){return this.appStore?this.appStore.navbar.active:"main"},selectedPanel(){return this.appStore?this.appStore.itemPanel.selected:"todo"}},methods:{selectPage:PA}};function PA(){}const AA={key:0,id:"navbar",class:"navbar navbar-expand-sm navbar-light"},RA={class:"d-flex flex-row justify-content-between w-100"},MA={class:"d-flex flex-row"},OA={class:"d-flex flex-row"},$A={key:1};function NA(t,e,i,s,r,n){const o=$("NavbarMenuButton"),a=$("NavbarCalendarButton"),l=$("ItemPanelNavbar");return!t.itemPanelHeaders.includes(n.selectedPanel)||n.activeNavbar=="main"?(m(),p("nav",AA,[d("div",RA,[d("div",MA,[H(o),e[3]||(e[3]=d("a",{class:"navbar-brand float-left",href:"#"},"Coach",-1))]),d("div",OA,[d("button",{class:"btn btn-sm",type:"button",onClick:e[0]||(e[0]=c=>n.selectPage("planner"))},"Planner"),d("button",{class:"btn btn-sm",type:"button",onClick:e[1]||(e[1]=c=>n.selectPage("items"))},"Items"),d("button",{class:"btn btn-sm",type:"button",onClick:e[2]||(e[2]=c=>n.selectPage("metrics"))},"Metrics")]),H(a)])])):(m(),p("nav",$A,[t.itemPanelHeaders.includes(n.selectedPanel)?(m(),ie(l,{key:0})):x("",!0)]))}const LA=Q(CA,[["render",NA],["__scopeId","data-v-6c8f4a73"]]),Iw="/icon/dashboard-icon.png",ql="/icon/todo-icon.png",Ew="/icon/routine-icon.png",Tl="/icon/goal-icon.png",Dw="/icon/task-routine-icon.png",kw="/icon/inventory-icon.png",Cw="/icon/nutrition-icon.png",Pw="/icon/workout-icon.png",VA={name:"ItemPanelTabBar",components:{},props:{},data:function(){return{appStore:void 0}},created:function(){this.appStore=bt()},computed:{selectedPanel(){return this.appStore?this.appStore.itemPanel.selected:"dashboard"},isTabBarShown(){return this.appStore?this.appStore.isTabBarShown:!0}},methods:{setSelectedPanel:WA}};function WA(t){this.appStore.onItemPanelTabButtonClicked(t)}const FA={class:"button d-flex flex-row mb-1"},BA={key:0},zA={class:"button d-flex flex-row mb-1"},jA={key:0},HA={class:"button d-flex flex-row mb-1"},UA={key:0},GA={class:"button d-flex flex-row mb-1"},YA={key:0},qA={class:"button d-flex flex-row mb-1"},KA={key:0},JA={class:"button d-flex flex-row mb-1"},QA={key:0},ZA={class:"button d-flex flex-row mb-1"},XA={key:0},eR={class:"button d-flex flex-row mb-1"},tR={key:0};function iR(t,e,i,s,r,n){return m(),p("div",{class:F(["item-panel-tab-bar",{hidden:!n.isTabBarShown}])},[d("div",FA,[d("img",{class:F(["dashboard",[{active:n.selectedPanel=="dashboard"}]]),src:Iw,width:"40",height:"40",style:{"margin-top":"8px"},onClick:e[0]||(e[0]=o=>n.setSelectedPanel("dashboard"))},null,2),n.selectedPanel=="dashboard"?(m(),p("div",BA,e[8]||(e[8]=[d("div",{style:{width:"12px",height:"40px","background-color":"#4285F4","margin-left":"3px","margin-top":"8px","border-radius":"4px"}},null,-1)]))):x("",!0)]),d("div",zA,[d("img",{class:F(["todo",[{active:n.selectedPanel=="todo"}]]),src:ql,width:"40",height:"40",onClick:e[1]||(e[1]=o=>n.setSelectedPanel("todo"))},null,2),n.selectedPanel=="todo"?(m(),p("div",jA,e[9]||(e[9]=[d("div",{style:{width:"12px",height:"40px","background-color":"#4285F4","margin-left":"3px","border-radius":"4px"}},null,-1)]))):x("",!0)]),d("div",HA,[d("img",{class:F(["planner",[{active:n.selectedPanel=="planner"}]]),src:Ew,width:"40",height:"40",onClick:e[2]||(e[2]=o=>n.setSelectedPanel("planner"))},null,2),n.selectedPanel=="planner"?(m(),p("div",UA,e[10]||(e[10]=[d("div",{style:{width:"12px",height:"40px","background-color":"#4C6EF5","margin-left":"3px","border-radius":"4px"}},null,-1)]))):x("",!0)]),d("div",GA,[d("img",{class:F(["goal",[{active:n.selectedPanel=="goal"}]]),src:Tl,width:"40",height:"40",onClick:e[3]||(e[3]=o=>n.setSelectedPanel("goal"))},null,2),n.selectedPanel=="goal"?(m(),p("div",YA,e[11]||(e[11]=[d("div",{style:{width:"12px",height:"40px","background-color":"#9013FE","margin-left":"3px","border-radius":"4px"}},null,-1)]))):x("",!0)]),d("div",qA,[d("img",{class:F(["event",[{active:n.selectedPanel=="event"}]]),src:Dw,width:"40",height:"40",onClick:e[4]||(e[4]=o=>n.setSelectedPanel("event"))},null,2),n.selectedPanel=="event"?(m(),p("div",KA,e[12]||(e[12]=[d("div",{style:{width:"12px",height:"40px","background-color":"#F4511E","margin-left":"3px","border-radius":"4px"}},null,-1)]))):x("",!0)]),d("div",JA,[d("img",{class:F(["inventory",[{active:n.selectedPanel=="inventory"}]]),src:kw,width:"40",height:"40",onClick:e[5]||(e[5]=o=>n.setSelectedPanel("inventory"))},null,2),n.selectedPanel=="inventory"?(m(),p("div",QA,e[13]||(e[13]=[d("div",{style:{width:"12px",height:"40px","background-color":"#3B99FC","margin-left":"3px","border-radius":"4px"}},null,-1)]))):x("",!0)]),d("div",ZA,[d("img",{class:F(["nutrition",[{active:n.selectedPanel=="nutrition"}]]),src:Cw,width:"40",height:"40",onClick:e[6]||(e[6]=o=>n.setSelectedPanel("nutrition"))},null,2),n.selectedPanel=="nutrition"?(m(),p("div",XA,e[14]||(e[14]=[d("div",{style:{width:"12px",height:"40px","background-color":"#F4511E","margin-left":"3px","border-radius":"4px"}},null,-1)]))):x("",!0)]),d("div",eR,[d("img",{class:F(["workout",[{active:n.selectedPanel=="workout"}]]),src:Pw,width:"40",height:"40",onClick:e[7]||(e[7]=o=>n.setSelectedPanel("workout"))},null,2),n.selectedPanel=="workout"?(m(),p("div",tR,e[15]||(e[15]=[d("div",{style:{width:"12px",height:"40px","background-color":"#F4511E","margin-left":"3px","border-radius":"4px"}},null,-1)]))):x("",!0)])],2)}const sR=Q(VA,[["render",iR],["__scopeId","data-v-f798c193"]]);function Aw(t){let s=t.toJSON().split("T")[0].split("-");return`${s[0]}-${s[1]}-${s[2]}`}function Rw(t=new Date){let i=t.toJSON().split("T"),s=i[0].split("-"),r=i[1].split(":");return`${s[0]}-${s[1]}-${s[2]} ${r[0]}:${r[1]}`}function nR(t){return t.toLocaleTimeString([],{hour:"numeric",minute:"2-digit"})}function yr(t,e){let i=new Date(t);return e?Ne.format(i,"ddd MMM D"):Ne.format(i,"ddd, MMM D")}function Sm(t){let e=new Date(t);return de(e).format("LL")}function zn(t){let e=new Date(t);return Ne.format(e,"h:mm A")}function Mw(t){if(!t)return"";let e=new Date(t.dateTime);if(t.idMoment==87)return de(e).format("LL");if(t.idMoment==88)return de(e).format("LT");if(t.idMoment==89)return de(e).format("LLL")}function rR(t){let e=new Date(t);return de(e).format("M/D/YY h:mm A")}function Tm(t,e){e=e||Date.now();let s=(e-t.getTime())/1e3/60/60,r=Math.floor(s),n=(s-r)*60,o=Math.floor(n),l=Math.floor((n-o)*60).toLocaleString(void 0,{minimumIntegerDigits:2,useGrouping:!1});return`${r}:${o}:${l}`}function oR(t){return de(t).format()}function xl(t){return+$t(new Date)==+de(t).startOf("day").toDate()}function $t(t){return de(t).startOf("day").toDate()}function Ei(t){return de(t).startOf("day").toDate()}function ft(t){return de(t).endOf("day").millisecond(0).toDate()}function ei(t){return de(t).startOf("week").toDate()}function ti(t){return de(t).startOf("month").toDate()}function wa(t){return de(t).startOf("year").toDate()}function li(t){return de(t).endOf("week").toDate()}function fi(t){return de(t).endOf("month").toDate()}function Xi(t){return de(t).endOf("year").toDate()}function xm(t,e){let i,s;return t==Hi.DAY&&(i=e,s=e),t==Hi.WEEK&&(i=ei(e),s=li(e)),t==Hi.MONTH&&(i=ti(e),s=fi(e)),t==Hi.YEAR&&(i=wa(e),s=Xi(e)),{start:i,end:s}}function Il(t){return de(t).weekday(0).toDate()}function Ow(t=new Date){return Ne.format(t,"D")}function $w(t=new Date){return Ne.format(t,"ddd")}function aR(t=new Date){return Ne.format(t,"dddd")}function Nw(t=new Date){return Ne.format(t,"MMM")}function Lw(t=new Date,e){return Ne.format(t,"ddd, MMM D, YYYY")}function Vw(t=new Date){return de(t).format("MMM D, h:mm A")}function lR(t=new Date){return de(t).format("LL")}function Ww(t=new Date){return de(t).format("l")}function Fw(t=new Date,e=1){return de(t).add(e,"second").toDate()}function Bw(t=1,e=new Date){return de(e).add(t,"minute").toDate()}function Im(t=1,e=new Date){return de(e).add(-t,"minute").toDate()}function xs(t=new Date,e=1){return de(t).add(e,"day").toDate()}function rh(t=new Date,e=1){return de(t).add(e,"month").toDate()}function hf(t,e){return Ne.subtract(e,t).toMinutes()}function zw(t,e){return Ne.subtract(e,t).toDays()}function ic(t,e){t.setHours(e.getHours(),e.getMinutes(),e.getSeconds())}const bn=qs("planner",{state:()=>({currentTime:new Date,selectedDate:Tt(new Date)}),getters:{},actions:{startClock(){this.currentTime=new Date;let t=this.currentTime.getSeconds();setTimeout(()=>{this.currentTime=new Date,setInterval(()=>{this.currentTime=new Date},6e4)},(60-t)*1e3)},selectDate(t){this.selectedDate=wl(new Date(t))},createRepeat(){return{id:null,routineRepeatID:null,startDate:Aw(new Date),endDate:void 0,startTime:void 0,endTime:void 0,startRepeat:{id:null,dateTime:Tt(new Date).toJSON(),type:80,endPoint:84,moment:87,idType:80,idEndPoint:84,idMoment:87},endRepeat:null,startIteration:null,endIteration:null,duration:null,type:80,timeframe:63,moment:0,points:null,position:null,isRecommended:!1,isEventVisible:!1,idInheritance:142,idType:80,idTimeframe:63,idMoment:0,todoIDs:[],interval:1,frequency:1,pointInTime:null,pointInTimeIndex:0,dayIndecies:[],routineRepeat:null,todoRepeats:[],positions:[]}},createTimePair(){return{id:null,idTodo:null,idParent:null,idTimeType:80,idInheritance:140,idTimeframe:null,points:null,startTime:{id:null,dateTime:Tt(new Date).toJSON(),idType:81,idEndPoint:84,idMoment:89},endTime:{id:null,dateTime:Tt(new Date).toJSON(),idType:81,idEndPoint:84,idMoment:89},isOwner:!0,isRecommended:!1,isEventVisible:!1,todoIDs:[]}}}}),ht=Object.freeze(Object.defineProperty({__proto__:null,usePlannerStore:bn},Symbol.toStringTag,{value:"Module"})),dR={name:"CalendarToolbar",components:{},props:{},data:function(){return{plannerStore:void 0}},created:function(){this.plannerStore=bn()},computed:{initialDate(){let t=$t(new Date);return this.selectDate(t),t},daysOfWeek(){let t=ei(this.initialDate),e=[this.getDayObject(t)];for(let i=1;i<7;i++)t=xs(t),e.push(this.getDayObject(t));return e}},methods:{getDayObject(t){return{dateObject:t,dow:$w(t),date:`${Nw(t)} ${Ow(t)}`}},selectDate(t){this.$emit("selectDate",t)}}},uR={class:"week-toolbar d-flex flex-row flex-grow-1 justify-content-evenly"},cR=["onClick"],hR={class:"day"},fR={class:"date"};function mR(t,e,i,s,r,n){return m(),p("div",uR,[(m(!0),p(L,null,G(n.daysOfWeek,(o,a)=>(m(),p("div",{key:a,class:"day-of-week d-flex flex-column",onClick:l=>n.selectDate(o.dateObject)},[d("span",hR,k(o.dow),1),d("span",fR,k(o.date),1)],8,cR))),128))])}const pR=Q(dR,[["render",mR],["__scopeId","data-v-61031a15"]]),gR={name:"DashboardRoutine",components:{},props:{idRoutine:Number},data:function(){return{plannerStore:void 0,iterationStore:void 0,routineStore:void 0}},created:async function(){let t=await K(()=>Promise.resolve().then(()=>ht),void 0);this.plannerStore=t.usePlannerStore();let e=await K(()=>Promise.resolve().then(()=>Et),void 0);this.iterationStore=e.useIterationStore();let i=await K(()=>Promise.resolve().then(()=>mn),void 0);this.routineStore=i.useRoutineStore()},computed:{selectedDate(){return this.plannerStore?this.plannerStore.selectedDate:today()},routine(){if(this.routineStore)return this.routineStore.getItem(this.idRoutine)},routineName(){return this.routine?this.routine.text:""},routineIteration(){if(this.iterationStore)return this.iterationStore.getIterationsInRange(this.selectedDate,ft(this.selectedDate),!1).find(i=>i.idRoutine==this.idRoutine)},todoIterations(){return this.routineIteration?this.iterationStore.iterations.filter(e=>e.routineIterationID==this.routineIteration.id):[]},isVerified(){return this.routineIteration?this.routineIteration.isVerified:!1}},methods:{toggleVerification:vR}};function vR(){this.iterationStore.toggleVerification(this.routineIteration.id,!this.isVerified)}const yR={class:"dashboard-routine d-flex flex-grow-1 justify-content-between align-items-center gap-2 pe-2"},_R={class:"d-flex flex-column flex-grow-1"},bR={class:"text-start ms-2 mb-1"},wR={class:"d-flex flex-row justify-content-evenly flex-grow-1"};function SR(t,e,i,s,r,n){return m(),p("div",yR,[d("div",_R,[d("span",bR,k(n.routineName),1),d("div",wR,[(m(!0),p(L,null,G(n.todoIterations,o=>(m(),p("span",{key:o.id,class:F(["dot",{complete:o.attemptedAt}])},null,2))),128))])]),d("span",{class:F(["verification",{verified:n.isVerified}]),onClick:e[0]||(e[0]=(...o)=>n.toggleVerification&&n.toggleVerification(...o))},null,2)])}const TR=Q(gR,[["render",SR],["__scopeId","data-v-d852db71"]]),xR={name:"DashboardInventory",components:{},props:{idTodo:Number},data:function(){return{plannerStore:void 0,iterationStore:void 0}},created:async function(){let t=await K(()=>Promise.resolve().then(()=>ht),void 0);this.plannerStore=t.usePlannerStore();let e=await K(()=>Promise.resolve().then(()=>Et),void 0);this.iterationStore=e.useIterationStore()},computed:{selectedDate(){return this.plannerStore?this.plannerStore.selectedDate:$t()},iterations(){if(this.iterationStore){let t=this.iterationStore.getIterationsInRange(this.selectedDate,ft(this.selectedDate),!1);return t=t.filter(e=>e.todoID==this.idTodo),t}return[]},isVerified(){let t=!1;return this.iterations.forEach(e=>{e.isVerified||(t=!0)}),!t}},methods:{toggleVerification:IR}};function IR(){this.iterations.forEach(t=>{this.iterationStore.toggleVerification(t.id,!this.isVerified)})}const ER={class:"dashboard-inventory d-flex flex-grow-1 justify-content-between align-items-center gap-2 pe-2"},DR={class:"d-flex flex-column flex-grow-1"},kR={class:"d-flex flex-row justify-content-evenly flex-grow-1"};function CR(t,e,i,s,r,n){return m(),p("div",ER,[d("div",DR,[e[1]||(e[1]=d("span",{class:"text-start ms-2 mb-1"},"Record Inventory",-1)),d("div",kR,[(m(!0),p(L,null,G(n.iterations,o=>(m(),p("span",{key:o.id,class:F(["dot",{complete:o.attemptedAt}])},null,2))),128))])]),d("span",{class:F(["verification",{verified:n.isVerified}]),onClick:e[0]||(e[0]=(...o)=>n.toggleVerification&&n.toggleVerification(...o))},null,2)])}const PR=Q(xR,[["render",CR],["__scopeId","data-v-b5065f0e"]]),AR={name:"DashboardExercise",components:{},props:{},data:function(){return{plannerStore:void 0,workoutStore:void 0,iterationStore:void 0}},created:async function(){let t=await K(()=>Promise.resolve().then(()=>ht),void 0);this.plannerStore=t.usePlannerStore();let e=await K(()=>Promise.resolve().then(()=>Gl),void 0);this.workoutStore=e.useWorkoutStore();let i=await K(()=>Promise.resolve().then(()=>Et),void 0);this.iterationStore=i.useIterationStore()},computed:{selectedDate(){return this.plannerStore?this.plannerStore.selectedDate:$t()},workouts(){let t=[];return this.workoutStore&&(t=this.workoutStore.getWorkoutsInDate(this.selectedDate),console.log(t)),t},iterations(){if(this.iterationStore){let t=this.workouts.map(e=>e.iteration);return console.log(t),t}return[]},isVerified(){let t=!1;return this.iterations.forEach(e=>{e.isVerified||(t=!0)}),!t}},methods:{toggleVerification:RR}};function RR(){this.iterations.forEach(t=>{this.iterationStore.toggleVerification(t.id,!this.isVerified)})}const MR={class:"dashboard-exercise d-flex flex-grow-1 justify-content-between align-items-center gap-2 pe-2"},OR={class:"d-flex flex-column flex-grow-1"},$R={class:"d-flex flex-row justify-content-evenly flex-grow-1"};function NR(t,e,i,s,r,n){return m(),p("div",MR,[d("div",OR,[e[1]||(e[1]=d("span",{class:"text-start ms-2 mb-1"},"Exercise",-1)),d("div",$R,[(m(!0),p(L,null,G(n.iterations,o=>(m(),p("span",{key:o.id,class:F(["dot",{complete:o.attemptedAt}])},null,2))),128))])]),d("span",{class:F(["verification",{verified:n.isVerified}]),onClick:e[0]||(e[0]=(...o)=>n.toggleVerification&&n.toggleVerification(...o))},null,2)])}const LR=Q(AR,[["render",NR],["__scopeId","data-v-17e22b2f"]]),VR={name:"DashboardMeal",components:{},props:{idTodo:Number},data:function(){return{plannerStore:void 0,todoStore:void 0,iterationStore:void 0}},created:async function(){let t=await K(()=>Promise.resolve().then(()=>ht),void 0);this.plannerStore=t.usePlannerStore();let e=await K(()=>Promise.resolve().then(()=>hi),void 0);this.todoStore=e.useTodoStore();let i=await K(()=>Promise.resolve().then(()=>Et),void 0);this.iterationStore=i.useIterationStore()},computed:{selectedDate(){return this.plannerStore?this.plannerStore.selectedDate:today()},todo(){if(this.todoStore)return this.todoStore.getItem(this.idTodo)},mealName(){return this.todo?this.todo.text:""},iterations(){if(this.iterationStore&&this.todoStore){let t=this.iterationStore.getIterationsInRange(this.selectedDate,ft(this.selectedDate),!1);return t=t.filter(e=>e.todoID==this.idTodo),t}return[]},isVerified(){let t=!1;return this.iterations.forEach(e=>{e.isVerified||(t=!0)}),!t}},methods:{toggleVerification:WR}};function WR(){this.iterations.forEach(t=>{this.iterationStore.toggleVerification(t.id,!this.isVerified)})}const FR={class:"dashboard-meal d-flex flex-grow-1 justify-content-between align-items-center gap-2 pe-2"},BR={class:"d-flex flex-column flex-grow-1"},zR={class:"text-start ms-2 mb-1"},jR={class:"d-flex flex-row justify-content-evenly flex-grow-1"};function HR(t,e,i,s,r,n){return m(),p("div",FR,[d("div",BR,[d("span",zR,k(n.mealName),1),d("div",jR,[(m(!0),p(L,null,G(n.iterations,o=>(m(),p("span",{key:o.id,class:F(["dot",{complete:o.attemptedAt}])},null,2))),128))])]),d("span",{class:F(["verification",{verified:n.isVerified}]),onClick:e[0]||(e[0]=(...o)=>n.toggleVerification&&n.toggleVerification(...o))},null,2)])}const UR=Q(VR,[["render",HR],["__scopeId","data-v-208215c0"]]),GR={name:"DashboardView",components:{CalendarToolbar:pR,DashboardRoutine:TR,DashboardInventory:PR,DashboardMeal:UR,DashboardExercise:LR},props:{},data:function(){return{selectedDate:void 0,items:[{type:"routine",id:6},{type:"inventory-log",id:6},{type:"meal",id:14},{type:"meal",id:216},{type:"meal",id:267},{type:"exercise"},{type:"routine",id:3}]}},methods:{selectDate(t){this.selectedDate=t}}},YR={class:"d-flex flex-column"},qR={class:"d-flex flex-column mt-2 gap-3"};function KR(t,e,i,s,r,n){const o=$("DashboardRoutine"),a=$("DashboardInventory"),l=$("DashboardMeal"),c=$("DashboardExercise");return m(),p("div",YR,[d("div",qR,[(m(!0),p(L,null,G(t.items,f=>(m(),p(L,null,[f.type=="routine"?(m(),ie(o,{key:0,idRoutine:f.id},null,8,["idRoutine"])):x("",!0),f.type=="inventory-log"?(m(),ie(a,{key:1,idTodo:f.id},null,8,["idTodo"])):x("",!0),f.type=="meal"?(m(),ie(l,{key:2,idTodo:f.id},null,8,["idTodo"])):x("",!0),f.type=="exercise"?(m(),ie(c,{key:3})):x("",!0)],64))),256))])])}const JR=Q(GR,[["render",KR]]),Wi="/icon/previous.png",QR={name:"DashboardPanel",components:{DashboardView:JR},props:{showHead:{type:Boolean,default:!0}},data:function(){return{plannerStore:void 0}},created:async function(){let t=await K(()=>Promise.resolve().then(()=>ht),void 0);this.plannerStore=t.usePlannerStore()},computed:{selectedDate(){return this.plannerStore?this.plannerStore.selectedDate:$t}},methods:{}},ZR={class:"row g-0 h-100"},XR={class:"col h-100 d-flex flex-column"},e2={class:"dashboard d-flex flex-column flex-grow-1 overflow-hidden"},t2={class:"head align-content-center"},i2={class:"body d-flex flex-column flex-grow-1"};function s2(t,e,i,s,r,n){const o=$("DashboardView");return m(),p("div",ZR,[d("div",XR,[d("div",e2,[X(d("div",t2,e[0]||(e[0]=[d("span",{class:"label"},"Dashboard",-1),d("div",{class:"d-flex flex-row justify-content-start ps-2"},[d("img",{class:"icon-button",src:Wi,width:"20",height:"20"})],-1)]),512),[[it,i.showHead]]),d("div",i2,[H(o)])])])])}const jw=Q(QR,[["render",s2],["__scopeId","data-v-f672592e"]]),n2={name:"MetricPanel",props:{showHead:{type:Boolean,default:!0}},data:function(){return{plannerStore:void 0}},created:async function(){let t=await K(()=>Promise.resolve().then(()=>ht),void 0);this.plannerStore=t.usePlannerStore()},computed:{selectedDate(){return this.plannerStore?this.plannerStore.selectedDate:$t}}};function r2(t,e,i,s,r,n){return m(),p("div")}const Hw=Q(n2,[["render",r2]]),o2={name:"ItemCheckbox",props:{width:Number,height:Number,checked:Boolean},data:function(){return{width_:this.width?this.width:40,height_:this.height?this.height:40,hovered:!1,pressed:!1,disabled:!1}},computed:{state(){return this.disabled?"disabled":this.pressed?"pressed":this.hovered?"hovered":"enabled"}},methods:{click:a2}};function a2(){this.checked?this.$emit("onUnchecked"):this.$emit("onChecked")}const l2=["src","width","height"],d2=["src","width","height"];function u2(t,e,i,s,r,n){return m(),p("div",{onClick:e[0]||(e[0]=(...o)=>n.click&&n.click(...o)),onMouseover:e[1]||(e[1]=o=>t.hovered=!0),onMouseleave:e[2]||(e[2]=o=>{t.hovered=!1,t.pressed=!1}),onMousedown:e[3]||(e[3]=o=>t.pressed=!0),onMouseup:e[4]||(e[4]=o=>t.pressed=!1)},[i.checked?x("",!0):(m(),p("img",{key:0,class:"checked",src:`/icon/checkbox/unchecked/${n.state}.png`,width:t.width_,height:t.height_},null,8,l2)),i.checked?(m(),p("img",{key:1,class:"checked",src:`/icon/checkbox/checked/${n.state}.png`,width:t.width_,height:t.height_},null,8,d2)):x("",!0)],32)}const Sa=Q(o2,[["render",u2],["__scopeId","data-v-3f3d4402"]]),go="/icon/edit-button.png",jn="/icon/delete-button.png",c2={name:"ListItem",components:{ItemCheckbox:Sa},props:{iteration:Object,parent:Object,parentType:String,isUnplanned:Boolean,size:String},data:function(){return{iterationStore:void 0}},created:async function(){let t=await K(()=>Promise.resolve().then(()=>Et),void 0);this.iterationStore=t.useIterationStore()},computed:{checked(){return!!this.iteration.attemptedAt},fontSize(){return this.size&&this.size=="sm"||this.size&&this.size=="md","14px"}},methods:{markComplete:h2,markIncomplete:f2,onEdit:m2,onDelete:p2,onDragStart:g2,onDragEnd:v2}};function h2(){let t=new Date().toJSON();this.iteration.attemptedAt=t,this.iteration.completedAt=t,this.iterationStore.toggleCompletion(this.iteration.id,this.iteration.attemptedAt,this.iteration.completedAt)}function f2(){this.iteration.attemptedAt=null,this.iteration.completedAt=null,this.iterationStore.toggleCompletion(this.iteration.id,this.iteration.attemptedAt,this.iteration.completedAt)}function m2(){let t=fe(this.iteration);delete t.__typename,this.$emit("onEdit",t)}function p2(){this.iterationStore.deleteIteration(this.iteration.id)}function g2(t){let e={id:this.iteration.id,type:this.parentType=="goal"?"todo":"task",parentType:this.parentType,parentID:this.parent.id};e=JSON.stringify(e),console.log("Drag Started"),t.target.classList.add("drag"),t.dataTransfer.dropEffect="move",t.dataTransfer.effectAllowed="move",t.dataTransfer.setData("text",e)}function v2(t){t.target.classList.remove("drag")}const y2={key:0,class:"points"},_2={class:"text"},b2={class:"button-group d-flex flex-column justify-content-between"};function w2(t,e,i,s,r,n){const o=$("ItemCheckbox");return m(),p("div",null,[d("div",{class:F(["iteration d-flex flex-row justify-content-between align-items-center",[{complete:n.checked,unplanned:i.isUnplanned,recommended:i.iteration.isRecommended}]]),style:$e({"font-size":n.fontSize}),draggable:"true",onDragstart:e[2]||(e[2]=a=>n.onDragStart(a)),onDragend:e[3]||(e[3]=a=>n.onDragEnd(a))},[H(o,{class:"checkbox align-self-start",checked:n.checked,onOnChecked:n.markComplete,onOnUnchecked:n.markIncomplete,onOnDelete:n.onDelete},null,8,["checked","onOnChecked","onOnUnchecked","onOnDelete"]),d("div",{class:F(["d-flex flex-fill",{"flex-column":i.iteration.points}])},[i.iteration.points?(m(),p("span",y2,k(i.iteration.points)+" pts",1)):x("",!0),d("span",_2,k(i.iteration.text),1)],2),d("div",b2,[d("img",{class:"icon-button",src:go,width:"16",height:"16",onClick:e[0]||(e[0]=(...a)=>n.onEdit&&n.onEdit(...a))}),d("img",{class:"icon-button",src:jn,width:"16",height:"16",onClick:e[1]||(e[1]=(...a)=>n.onDelete&&n.onDelete(...a))})])],38)])}const vo=Q(c2,[["render",w2],["__scopeId","data-v-591ca173"]]),S2={name:"TodoItem",components:{ItemCheckbox:Sa},props:{todo:Object,parent:Object,parentType:String,isUnplanned:Boolean,size:String},data:function(){return{todoStore:void 0,isAttempted:!1}},created:async function(){let t=await K(()=>Promise.resolve().then(()=>hi),void 0);this.todoStore=t.useTodoStore()},computed:{checked(){return!!this.isAttempted},fontSize(){return this.size&&this.size=="sm"||this.size&&this.size=="md","14px"}},methods:{markComplete:T2,markIncomplete:x2,onDelete:I2,onDragStart:E2,onDragEnd:D2}};function T2(){let t=new Date().toJSON();this.iteration.attemptedAt=t,this.iteration.completedAt=t,this.iterationStore.toggleCompletion(this.iteration.id,this.iteration.attemptedAt,this.iteration.completedAt)}function x2(){this.iteration.attemptedAt=null,this.iteration.completedAt=null,this.iterationStore.toggleCompletion(this.iteration.id,this.iteration.attemptedAt,this.iteration.completedAt)}function I2(){this.iterationStore.deleteIteration(this.iteration.id)}function E2(t){let e={id:this.iteration.id,type:this.parentType=="goal"?"todo":"task",parentType:this.parentType,parentID:this.parent.id};e=JSON.stringify(e),console.log("Drag Started"),t.target.classList.add("drag"),t.dataTransfer.dropEffect="move",t.dataTransfer.effectAllowed="move",t.dataTransfer.setData("text",e)}function D2(t){t.target.classList.remove("drag")}const k2={key:0,class:"points"},C2={class:"text"};function P2(t,e,i,s,r,n){const o=$("ItemCheckbox");return m(),p("div",null,[d("div",{class:F(["todo d-flex flex-row justify-content-between align-items-center",[{complete:n.checked,unplanned:i.isUnplanned}]]),style:$e({"font-size":n.fontSize}),draggable:"true",onDragstart:e[0]||(e[0]=a=>n.onDragStart(a)),onDragend:e[1]||(e[1]=a=>n.onDragEnd(a))},[H(o,{class:"checkbox align-self-start",checked:n.checked,onOnChecked:n.markComplete,onOnUnchecked:n.markIncomplete,onOnDelete:n.onDelete},null,8,["checked","onOnChecked","onOnUnchecked","onOnDelete"]),d("div",{class:F(["d-flex flex-fill",{"flex-column":i.todo.points}])},[i.todo.points?(m(),p("span",k2,k(i.todo.points)+" pts",1)):x("",!0),d("span",C2,k(i.todo.text),1)],2)],38)])}const A2=Q(S2,[["render",P2],["__scopeId","data-v-620bc8fb"]]);let R2=[{id:1,text:"Physcial"},{id:2,text:"Social"},{id:3,text:"Mental"},{id:4,text:"Emotional"},{id:5,text:"Financial"}],M2=[{id:9,text:"Reminder"},{id:10,text:"Tally"},{id:11,text:"Inverse"},{id:12,text:"Errand"},{id:190,text:"Memorization"}],O2=[{id:28,text:"Mobile"},{id:29,text:"Computer"},{id:30,text:"Travel"},{id:31,text:"Brick & Mortar"},{id:32,text:"Home"},{id:33,text:"Any"}],_r=[{id:43,text:"Day",isActive:!0},{id:48,text:"Week",isActive:!0},{id:49,text:"Month",isActive:!0},{id:52,text:"Trimester",isActive:!1},{id:54,text:"Semester",isActive:!1},{id:55,text:"Year",isActive:!0},{id:56,text:"Milestone",isActive:!0},{id:57,text:"Life",isActive:!0}],Uw=[{id:140,text:"Self"},{id:141,text:"Children"},{id:142,text:"Descendants"}],$2=[{id:144,text:"Angle"},{id:151,text:"Hand Position"},{id:145,text:"Arm Position"},{id:146,text:"Body Position"},{id:152,text:"Leg Position"},{id:147,text:"Equipment"},{id:148,text:"Misc"}],N2=[{id:157,text:"Log",color:"#3B99FC"},{id:153,text:"Sleep",color:void 0},{id:154,text:"Briefing",color:void 0},{id:155,text:"Meal",color:"#FC3B3B"},{id:156,text:"Workout",color:"#F4511E"},{id:158,text:"Exercise",color:"#F4511E"},{id:159,text:"Water",color:void 0}],L2=[{id:150,text:"Main"},{id:174,text:"Warm-Up"},{id:175,text:"Stretch"},{id:176,text:"Warm-Up/Stretch"},{id:177,text:"Skill Training"},{id:178,text:"Strength"},{id:179,text:"Cool-Down"},{id:180,text:"Mobility"},{id:181,text:"Cool-Down/Mobility"}];const V2={name:"TimeframeRadio",props:{container:String,timeframe:String,timeframeIDs:{type:Array,default:function(){return[]}},isToggle:Boolean},data:function(){return{TIMEFRAME:fe(Hi),timeframes:fe(_r)}},computed:{picked:{get(){return this.timeframe},set(t){this.$emit("timeframeSelected",t)}},selectedTimeframeIDs:{get(){return this.timeframeIDs},set(t){this.$emit("timeframesSelected",t)}},timeframesFirstRow(){let t=this;return this.timeframes.filter(i=>[t.TIMEFRAME.DAY,t.TIMEFRAME.WEEK,t.TIMEFRAME.MONTH,t.TIMEFRAME.YEAR].includes(i.id))},timeframesSecondRow(){let t=this;return this.timeframes.filter(i=>[t.TIMEFRAME.MILESTONE,t.TIMEFRAME.LIFE].includes(i.id))}},methods:{isSelected(t){return this.isToggle?this.selectedTimeframeIDs.includes(t):this.timeframes.find(i=>i.id=t).text.toLowerCase()==this.timeframe.toLowerCase()},toggleTimeframe(t){this.$emit("toggleTimeframe",t)}}},W2={class:"timeframe-radio d-flex flex-column"},F2={key:0,class:"btn-group",role:"group","aria-label":"moment"},B2=["id","checked","onChange"],z2=["for"],j2=["id","checked","onChange"],H2=["for"],U2={key:1,class:"btn-group",role:"group","aria-label":"moment"},G2=["id"],Y2=["for"],q2=["id"],K2=["for"],J2=["id"],Q2=["for"],Z2=["id"],X2=["for"];function eM(t,e,i,s,r,n){return m(),p("div",W2,[i.isToggle?(m(),p("div",F2,[(m(!0),p(L,null,G(n.timeframesFirstRow,o=>(m(),p(L,{key:-o.id},[d("input",{type:"checkbox",class:"btn-check",id:`${o.text}-${i.container}`,checked:n.isSelected(o.id),onChange:a=>n.toggleTimeframe(o.id)},null,40,B2),d("label",{class:"btn btn-outline-primary",for:`${o.text}-${i.container}`},k(o.text),9,z2)],64))),128)),(m(!0),p(L,null,G(n.timeframesSecondRow,o=>(m(),p(L,{key:o.id},[d("input",{type:"checkbox",class:"btn-check",id:`${o.text}-${i.container}`,checked:n.isSelected(o.id),onChange:a=>n.toggleTimeframe(o.id)},null,40,j2),d("label",{class:"btn btn-outline-primary",for:`${o.text}-${i.container}`},k(o.text),9,H2)],64))),128))])):x("",!0),i.isToggle?x("",!0):(m(),p("div",U2,[X(d("input",{type:"radio",class:"btn-check",id:`day-${i.container}`,"onUpdate:modelValue":e[0]||(e[0]=o=>n.picked=o),value:"day"},null,8,G2),[[Hr,n.picked]]),d("label",{class:"btn btn-outline-primary",for:`day-${i.container}`},"Day",8,Y2),X(d("input",{type:"radio",class:"btn-check",id:`week-${i.container}`,"onUpdate:modelValue":e[1]||(e[1]=o=>n.picked=o),value:"week"},null,8,q2),[[Hr,n.picked]]),d("label",{class:"btn btn-outline-primary",for:`week-${i.container}`},"Week",8,K2),X(d("input",{type:"radio",class:"btn-check",id:`month-${i.container}`,"onUpdate:modelValue":e[2]||(e[2]=o=>n.picked=o),value:"month"},null,8,J2),[[Hr,n.picked]]),d("label",{class:"btn btn-outline-primary",for:`month-${i.container}`},"Month",8,Q2),X(d("input",{type:"radio",class:"btn-check",id:`year-${i.container}`,"onUpdate:modelValue":e[3]||(e[3]=o=>n.picked=o),value:"year"},null,8,Z2),[[Hr,n.picked]]),d("label",{class:"btn btn-outline-primary",for:`year-${i.container}`},"Year",8,X2)]))])}const yo=Q(V2,[["render",eM],["__scopeId","data-v-be1dc114"]]),tM={name:"GoalPanelByCustom",components:{ListItem:vo,TodoItem:A2,TimeframeRadio:yo},props:{},data:function(){return{plannerStore:void 0,goalStore:null,goals:[],timeframe:"month",goalInTimeframe:{allCollapsed:!1,completedCollapsed:!0},taskInTimeframe:{allCollapsed:!1,completedCollapsed:!0},goalTimeCollapsed:!1,taskTimeCollapsed:!1}},created:async function(){let t=await K(()=>Promise.resolve().then(()=>ht),void 0);this.plannerStore=t.usePlannerStore();let e=await K(()=>Promise.resolve().then(()=>Ni),void 0);this.goalStore=e.useGoalStore(),this.goals=await this.goalStore.getTimeframeItems(this.start,this.end)},computed:{start(){return this.timeframe=="day"?this.selectedDate:this.timeframe=="week"?ei(this.selectedDate):this.timeframe=="month"?ti(this.selectedDate):this.timeframe=="year"?wa(this.selectedDate):null},end(){return this.timeframe=="day"?this.selectedDate:this.timeframe=="week"?li(this.selectedDate):this.timeframe=="month"?fi(this.selectedDate):this.timeframe=="year"?Xi(this.selectedDate):null},selectedDate(){return this.plannerStore?this.plannerStore.selectedDate:$t},goalsMappedToTimeframe(){let t=this;return this.goals.filter(e=>{let i=c=>c.startTime&&t.start.getTime()>=new Date(c.startTime.dateTime).getTime(),s=c=>c.startTime&&t.start.getTime()<=new Date(c.endTime.dateTime).getTime(),r=c=>c.endTime&&t.end.getTime()>=new Date(c.startTime.dateTime).getTime(),n=c=>c.endTime&&t.end.getTime()<=new Date(c.endTime.dateTime).getTime(),o=c=>i(c)&&s(c),a=c=>r(c)&&n(c);return e.timePairs.filter(c=>o(c)||a(c)).length>0})},goalsWithIterationMappedToTimeframe(){let t=this.goalsMappedToTimeframe.map(e=>e.id);return this.goals.filter(e=>!t.includes(e.id))},iterationsMappedToTimeframe(){return this.goals.filter(t=>{let e=l=>l.startAt&&new Date(l.startAt).getTime()>this.start.getTime(),i=l=>l.startAt&&new Date(l.startAt).getTime()>this.end.getTime(),s=l=>l.endAt&&new Date(l.endAt).getTime()>this.start.getTime(),r=l=>l.endAt&&new Date(l.endAt).getTime()>this.end.getTime(),n=l=>e(l)&&i(l),o=l=>s(l)&&r(l),a=t.todos.flat().flatMap(l=>l.iterations);return a=a.filter(l=>n(l)||o(l)),a.length>0})}},methods:{incompleteIterations(t){let e=[];return t.todos.forEach(i=>{let s=i.iterations.filter(r=>!r.attemptedAt);e=e.concat(s)}),e},completeIterations(t){let e=[];return t.todos.forEach(i=>{let s=i.iterations.filter(r=>r.attemptedAt);e=e.concat(s)}),e},iterationsInTimeframe(t){let e=this,i=c=>c.startAt&&new Date(c.startAt).getTime()>=e.start.getTime(),s=c=>c.startAt&&new Date(c.startAt).getTime()<=e.end.getTime(),r=c=>c.endAt&&new Date(c.endAt).getTime()>=e.start.getTime(),n=c=>c.endAt&&new Date(c.endAt).getTime()<=e.end.getTime(),o=c=>i(c)&&s(c),a=c=>r(c)&&n(c),l=t.todos.flat().flatMap(c=>c.iterations);return l=l.filter(c=>o(c)||a(c)),l},getTodoQueue(t){let e=this,i=[];return t.todos.forEach(s=>{let r=e.getTodoChildren(s);i=i.concat(r),i.push(s)}),i},getTodoChildren(t){let e=this,i=[];return t.children.forEach(s=>{let r=e.getTodoChildren(s);i=i.concat(r),i.push(s)}),i}},watch:{async timeframe(){this.goalStore&&(this.goals=await this.goalStore.getTimeframeItems(this.start,this.end))},async selectedDate(){this.goalStore&&(this.goals=await this.goalStore.getTimeframeItems(this.start,this.end))}}},iM={class:"row g-0"},sM={key:0,class:"d-flex flex-column",style:{"margin-top":"8px"}},nM={class:"d-flex flex-column"},rM={key:0,class:"d-flex flex-column"};function oM(t,e,i,s,r,n){const o=$("TimeframeRadio"),a=$("TodoItem"),l=$("ListItem");return m(),p("div",iM,[H(o,{timeframe:t.timeframe,onTimeframeSelected:e[0]||(e[0]=c=>t.timeframe=c),container:"goalPanelCustom"},null,8,["timeframe"]),t.goals?(m(),p("div",sM,[X(d("ul",null,[(m(!0),p(L,null,G(n.goalsMappedToTimeframe,c=>(m(),p("li",{key:c.id,class:"goal"},[d("div",nM,[d("h1",null,k(c.text),1),d("ul",null,[(m(!0),p(L,null,G(n.getTodoQueue(c),f=>(m(),p("li",{key:f.id,class:"todo"},[H(a,{todo:f,parentType:"goal",parent:c,size:"sm"},null,8,["todo","parent"])]))),128))]),d("ul",null,[(m(!0),p(L,null,G(n.incompleteIterations(c),f=>(m(),p("li",{key:f.id,class:"todo"},[H(l,{iteration:f,parentType:"goal",parent:c,size:"sm"},null,8,["iteration","parent"])]))),128))]),n.iterationsInTimeframe(c).filter(f=>f.attemptedAt).length>0?(m(),p("div",rM,[d("h2",{onClick:e[1]||(e[1]=f=>t.goalInTimeframe.completedCollapsed=!t.goalInTimeframe.completedCollapsed)},"Complete ("+k(n.iterationsInTimeframe(c).filter(f=>f.attemptedAt).length)+")",1),X(d("ul",null,[(m(!0),p(L,null,G(n.completeIterations(c),f=>(m(),p("li",{key:f.id,class:"todo"},[H(l,{iteration:f,parentType:"goal",parent:c,size:"sm"},null,8,["iteration","parent"])]))),128))],512),[[it,!t.goalInTimeframe.completedCollapsed]])])):x("",!0)])]))),128))],512),[[it,!t.goalInTimeframe.allCollapsed]])])):x("",!0)])}const aM=Q(tM,[["render",oM],["__scopeId","data-v-a3d3188b"]]),Gw="/icon/child-icon.png",lM={name:"GoalTimeframeTodoItem",components:{ItemCheckbox:Sa},props:{todoID:Number,goalTimePairTodoID:Number,completedAt:String,size:{type:String,default:"sm"}},data:function(){return{plannerStore:void 0,goalStore:void 0,todoStore:void 0,isExpanded:!1,showToolbar:!1,showTasks:!1,showTodos:!1,showChildren:!1,showDay:!1,showWeek:!1,showMonth:!1}},created:async function(){let t=await K(()=>Promise.resolve().then(()=>ht),void 0);this.plannerStore=t.usePlannerStore();let e=await K(()=>Promise.resolve().then(()=>Ni),void 0);this.goalStore=e.useGoalStore();let i=await K(()=>Promise.resolve().then(()=>hi),void 0);this.todoStore=i.useTodoStore()},computed:{selectedDate(){return this.plannerStore?this.plannerStore.selectedDate:$t()},todo(){if(this.todoStore)return this.todoStore.getItem(this.todoID)},points(){},checked(){return!!this.completedAt},fontSize(){return this.size&&this.size=="sm"||this.size&&this.size=="md","14px"},showExpander(){return this.childIDs.length>0},points(){return 4},childIDs(){return this.todo?this.todo.childIDs:[]}},methods:{markComplete(){this.todoStore.toggleGoalTimePairTodoCompletion(this.goalTimePairTodoID,this.selectedDate)},markIncomplete(){this.todoStore.toggleGoalTimePairTodoCompletion(this.goalTimePairTodoID,null)},markAttempted(){this.todoStore.createTask(this.todoID,this.selectedDate)},unmapTodo(){this.goalStore.unmapTodoFromGoalTimePair(this.goalTimePairTodoID)},expanderClicked:dM,pointsClicked:uM,childrenClicked:cM}};function dM(){this.isExpanded?(this.isExpanded=!1,this.showTasks=!1,this.showChildren=!1):(this.showTasks=!1,this.showChildren=!0,this.showToolbar=!0,this.isExpanded=!0)}function uM(){this.showChildren=!1,this.isExpanded=!1,this.showTasks=!this.showTasks}function cM(){this.showTasks=!1,this.showChildren=!this.showChildren,this.isExpanded=this.showChildren}const hM={class:"d-flex justify-content-between align-items-center"},fM={class:"d-flex flex-column"},mM={class:"text"},pM={key:0,class:"toolbar d-flex flex-row align-items-center gap-1"},gM={class:"d-flex"},vM={class:"button-group d-flex flex-column justify-content-between"},yM={key:0,class:"progress-bar d-flex flex-row justify-content-start"},_M={key:1,class:"d-flex flex-column"},bM={key:2,class:"d-flex flex-column"};function wM(t,e,i,s,r,n){const o=$("GoalTimeframeTodoItem",!0);return n.todo?(m(),p("div",{key:0,class:F(["goal-timeframe-todo d-flex flex-column justify-content-between",[{complete:n.checked}]]),style:$e({"font-size":n.fontSize}),onClick:e[5]||(e[5]=ye(a=>t.showToolbar=!t.showToolbar,["stop"]))},[d("div",hM,[d("img",{class:F(["icon me-2",{selected:t.showTodos}]),src:ql,width:"30",height:"30"},null,2),d("div",fM,[d("div",{class:F(["d-flex flex-fill",{"flex-column":n.points}])},[d("span",mM,k(n.todo.text),1)],2),t.showToolbar?(m(),p("div",pM,[d("span",{class:F(["points",{selected:t.showTasks}]),onClick:e[0]||(e[0]=ye((...a)=>n.pointsClicked&&n.pointsClicked(...a),["stop"]))},k(`${n.points} pts`),3),d("img",{class:F(["icon",{selected:t.showChildren}]),src:Gw,width:"18",height:"18",onClick:e[1]||(e[1]=ye((...a)=>n.childrenClicked&&n.childrenClicked(...a),["stop"]))},null,2)])):x("",!0)]),d("div",gM,[d("div",vM,[d("img",{class:"attempted button",width:"14",height:"14",src:"/icon/thumbs-up-dark-2.png",onClick:e[2]||(e[2]=a=>n.markAttempted())}),d("img",{class:"icon-button",src:jn,width:"16",height:"16",onClick:e[3]||(e[3]=(...a)=>n.unmapTodo&&n.unmapTodo(...a))})])])]),t.showToolbar?(m(),p("div",yM,e[6]||(e[6]=[d("span",{class:"bar"},null,-1)]))):x("",!0),t.showTasks?(m(),p("div",_M,e[7]||(e[7]=[d("span",null,"Tasks",-1)]))):x("",!0),t.showChildren?(m(),p("div",bM,[(m(!0),p(L,null,G(n.childIDs,a=>(m(),ie(o,{key:a,todoID:a,onClick:e[4]||(e[4]=ye(()=>{},["stop"]))},null,8,["todoID"]))),128))])):x("",!0)],6)):x("",!0)}const SM=Q(lM,[["render",wM],["__scopeId","data-v-b11ddc3b"]]),TM="/icon/dots-vertical.png",xM={name:"GoalTimeframeItem",components:{GoalTimeframeTodoItem:SM},props:{goalID:Number,timeframeID:Number,level:{type:Number,default:()=>1}},data:function(){return{TIMEFRAME:Hi,plannerStore:void 0,goalStore:void 0,iterationStore:void 0,isExpanded:!1,showToolbar:!1,showContext:!1,showTasks:!1,showTodos:!1,showChildren:!1,showDay:!1,showWeek:!1,showMonth:!1,newTask:void 0}},created:async function(){let t=await K(()=>Promise.resolve().then(()=>ht),void 0);this.plannerStore=t.usePlannerStore();let e=await K(()=>Promise.resolve().then(()=>Ni),void 0);this.goalStore=e.useGoalStore();let i=await K(()=>Promise.resolve().then(()=>Et),void 0);this.iterationStore=i.useIterationStore()},computed:{selectedDate(){return this.plannerStore?this.plannerStore.selectedDate:$t()},goal(){if(this.goalStore)return this.goalStore.getItem(this.goalID)},showExpander(){return this.childIDs.length>0},points(){let t=this.iterations.filter(i=>i.completedAt||i.attemptedAt);return sl(t,"points")},goalTimePairTodos(){if(this.goal){var t=this.goal.timePairs.findIndex(i=>{if(i.idTimeframe!=this.timeframeID)return!1;let s=i.startTime?new Date(i.startTime.dateTime):void 0,r=i.endTime?new Date(i.endTime.dateTime):void 0;return!!(s&&+s<=+this.selectedDate&&r&&+r>=+this.selectedDate)});return this.goal.timePairs[t].goalTimePairTodos}return[]},childIDs(){let t=[];return this.goalStore&&(t=this.goalStore.goals.filter(e=>this.goal.childIDs.includes(e.id))),t.map(e=>e.id)},iterations(){if(this.goalStore){let{start:t,end:e}=xm(this.timeframeID,this.selectedDate),i=this.goalStore.getIterationIDs(this.goalID),s=this.iterationStore.getIterationsInRange(t,e,!1);return s=s.filter(o=>i.includes(o.id)),s.filter(o=>o.completedAt||o.attemptedAt).filter(o=>o.points)}return[]}},methods:{expanderClicked:IM,onGoalClicked:EM,pointsClicked:DM,todosClicked:kM,childrenClicked:CM,startAt:PM,createTask:AM,onNewTaskClicked:RM,onNewChildClicked:MM,onSetToTimeframe:OM}};function IM(){this.isExpanded?(this.isExpanded=!1,this.showTasks=!1,this.showTodos=!1,this.showChildren=!1,this.showToolbar=!1):(this.showTasks=!1,this.showTodos=!1,this.showChildren=!0,this.showToolbar=!0,this.isExpanded=!0)}function EM(){this.showToolbar=!this.showToolbar,this.showToolbar?(this.showTasks||this.showTodos||this.showChildren)&&(this.isExpanded=!0):this.isExpanded=!1}function DM(){this.showTodos=!1,this.showChildren=!1,this.showTasks=!this.showTasks,this.isExpanded=this.showTasks}function kM(){this.showTasks=!1,this.showChildren=!1,this.showTodos=!this.showTodos,this.isExpanded=this.showTodos}function CM(){this.showTasks=!1,this.showTodos=!1,this.showChildren=!this.showChildren,this.isExpanded=this.showChildren}function PM(t){return t.startAt?Lw(t.startAt.toDate()):""}function AM(){let t=this.newTask.trim();t!=""&&(this.goalStore.createIteration(this.goalID,t,this.selectedDate),this.newTask=void 0)}function RM(){this.showTodos=!1,this.showChildren=!1,this.showTasks=!0,this.isExpanded=!0,this.showContext=!1,this.newTask=""}function MM(){this.showContext=!1}function OM(t){let{start:e,end:i}=xm(t,this.selectedDate),s={itemId:this.goalID,itemType:"goal",idTimeframe:t,idTimeType:yb.SCHEDULED,idInheritance:_b.SELF,isOwner:!0,startTime:{value:{dateTime:e,idEndPoint:84,idMoment:87,idType:80}},endTime:{value:{dateTime:i,idEndPoint:84,idMoment:87,idType:80}}};this.goalStore.saveTimePair(s),this.showContext=!1}const $M={class:"d-flex flex-row justify-content-between align-items-center w-100"},NM={class:"d-flex flex-column flex-grow-1"},LM={class:"head d-flex flex-column justify-content-between"},VM={class:"d-flex flex-row align-items-center"},WM={key:0,class:"caret"},FM=["src"],BM={key:0,class:"d-flex flex-column"},zM={class:"toolbar d-flex flex-row align-items-center gap-1"},jM={key:0,class:"context-menu d-flex flex-column"},HM={key:1,class:"body d-flex flex-column w-100"},UM={key:0,class:"dropdown d-flex flex-column"},GM={class:"ps-2 pe-2"},YM={class:"points"},qM={class:"text"},KM={class:"start"},JM={key:1,class:"dropdown d-flex flex-column"};function QM(t,e,i,s,r,n){const o=$("GoalTimeframeTodoItem"),a=$("GoalTimeframeItem",!0);return n.goal?(m(),p("div",{key:0,class:"goal d-flex flex-column justify-content-between align-items-center",onClick:e[15]||(e[15]=ye((...l)=>n.onGoalClicked&&n.onGoalClicked(...l),["stop"]))},[d("div",$M,[d("div",NM,[d("div",LM,[d("div",VM,[n.showExpander?x("",!0):(m(),p("span",WM)),n.showExpander?(m(),p("img",{key:1,class:"caret",src:t.isExpanded?"/icon/icon-expanded.png":"/icon/icon-collapsed-right.png",width:"14",height:"14",onClick:e[0]||(e[0]=ye((...l)=>n.expanderClicked&&n.expanderClicked(...l),["stop"]))},null,8,FM)):x("",!0),d("div",null,k(n.goal.text),1)])]),t.showToolbar?(m(),p("div",BM,[d("div",zM,[d("span",{class:F(["points",{selected:t.showTasks}]),onClick:e[1]||(e[1]=ye((...l)=>n.pointsClicked&&n.pointsClicked(...l),["stop"]))},k(`${n.points} pts`),3),d("img",{class:F(["icon",{selected:t.showTodos}]),src:ql,width:"18",height:"18",onClick:e[2]||(e[2]=ye((...l)=>n.todosClicked&&n.todosClicked(...l),["stop"]))},null,2),d("img",{class:F(["icon",{selected:t.showChildren}]),src:Gw,width:"18",height:"18",onClick:e[3]||(e[3]=ye((...l)=>n.childrenClicked&&n.childrenClicked(...l),["stop"]))},null,2)]),e[16]||(e[16]=d("div",{class:"progress-bar d-flex flex-row justify-content-start"},[d("span",{class:"bar"})],-1))])):x("",!0)]),d("img",{class:"context icon me-3",width:"3",height:"15",src:TM,onClick:e[4]||(e[4]=ye(l=>t.showContext=!t.showContext,["stop"]))})]),t.showContext?(m(),p("div",jM,[d("button",{class:"context-item btn",type:"button",onClick:e[5]||(e[5]=ye((...l)=>n.onNewTaskClicked&&n.onNewTaskClicked(...l),["stop"]))}," New Task "),d("button",{class:"context-item btn",type:"button",onClick:e[6]||(e[6]=ye((...l)=>n.onNewChildClicked&&n.onNewChildClicked(...l),["stop"]))}," New Child "),d("button",{class:"context-item btn",type:"button",onClick:e[7]||(e[7]=ye(l=>n.onSetToTimeframe(t.TIMEFRAME.MONTH),["stop"]))}," Set to Month "),d("button",{class:"context-item btn",type:"button",onClick:e[8]||(e[8]=ye(l=>n.onSetToTimeframe(t.TIMEFRAME.WEEK),["stop"]))}," Set to Week "),d("button",{class:"context-item btn",type:"button",onClick:e[9]||(e[9]=ye(l=>n.onSetToTimeframe(t.TIMEFRAME.DAY),["stop"]))}," Set to Day ")])):x("",!0),t.showToolbar?(m(),p("div",HM,[t.showTasks?(m(),p("div",UM,[d("div",GM,[t.newTask!=null?X((m(),p("input",{key:0,class:"textbox text",type:"text",placeholder:"Title","onUpdate:modelValue":e[10]||(e[10]=l=>t.newTask=l),onKeyup:[e[11]||(e[11]=Ot((...l)=>n.createTask&&n.createTask(...l),["enter"])),e[12]||(e[12]=Ot(l=>t.newTask=void 0,["esc"]))],spellcheck:"true",autofocus:"",onClick:e[13]||(e[13]=ye(()=>{},["stop"]))},null,544)),[[Ae,t.newTask,void 0,{lazy:!0,trim:!0}]]):x("",!0)]),(m(!0),p(L,null,G(n.iterations,l=>(m(),p("div",{key:l.id,class:F(["task d-flex flex-column",{attempted:l.attemptedAt||l.completedAt}])},[d("span",YM,k(`${l.points} pts`),1),d("span",qM,k(l.text),1),d("span",KM,k(n.startAt(l)),1)],2))),128))])):x("",!0),t.showTodos?(m(),p("div",JM,[(m(!0),p(L,null,G(n.goalTimePairTodos,l=>(m(),ie(o,{key:l.id,todoID:l.todoID,goalTimePairTodoID:l.id,completedAt:l.completedAt,onClick:e[14]||(e[14]=ye(()=>{},["stop"]))},null,8,["todoID","goalTimePairTodoID","completedAt"]))),128))])):x("",!0),t.showChildren?(m(),p("div",{key:2,class:"dropdown d-flex flex-column",style:$e({"padding-left":`${i.level*28}px`})},[(m(!0),p(L,null,G(n.childIDs,l=>(m(),ie(a,{key:l,goalID:l,timeframeID:i.timeframeID,level:i.level+1},null,8,["goalID","timeframeID","level"]))),128))],4)):x("",!0)])):x("",!0)])):x("",!0)}const ZM=Q(xM,[["render",QM],["__scopeId","data-v-98691834"]]),XM={name:"GoalDailyTimeframeItem",components:{},props:{goalID:Number,iterationIDs:Array},data:function(){return{goalStore:void 0,iterationStore:void 0,showTodos:!1}},created:async function(){let t=await K(()=>Promise.resolve().then(()=>Ni),void 0);this.goalStore=t.useGoalStore();let e=await K(()=>Promise.resolve().then(()=>Et),void 0);this.iterationStore=e.useIterationStore()},computed:{goal(){if(this.goalStore)return this.goalStore.getItem(this.goalID)},iterations(){return this.iterationStore?this.iterationStore.iterations.filter(e=>this.iterationIDs.includes(e.id)):[]}},methods:{}},eO={key:0,class:"goal-daily-timeframe-item"},tO={key:0,class:"d-flex flex-column"};function iO(t,e,i,s,r,n){return n.goal?(m(),p("div",eO,[d("div",{class:"goal",onClick:e[0]||(e[0]=o=>t.showTodos=!t.showTodos)},k(n.goal.text),1),t.showTodos?(m(),p("div",tO,[(m(!0),p(L,null,G(n.iterations,o=>(m(),p("span",{key:o.id,class:"iteration"},k(o.text),1))),128))])):x("",!0)])):x("",!0)}const sO=Q(XM,[["render",iO],["__scopeId","data-v-7e5dd631"]]),nO={name:"GoalsInTimeframe",components:{GoalTimeframeItem:ZM,GoalDailyTimeframeItem:sO},props:{timeframeID:Number},data:function(){return{plannerStore:void 0,goalStore:void 0,todoStore:void 0,iterationStore:void 0,timeframes:fe(_r),TIMEFRAME:fe(Hi)}},created:async function(){let t=await K(()=>Promise.resolve().then(()=>ht),void 0);this.plannerStore=t.usePlannerStore();let e=await K(()=>Promise.resolve().then(()=>Ni),void 0);this.goalStore=e.useGoalStore();let i=await K(()=>Promise.resolve().then(()=>hi),void 0);this.todoStore=i.useTodoStore();let s=await K(()=>Promise.resolve().then(()=>Et),void 0);this.iterationStore=s.useIterationStore()},computed:{selectedDate(){return this.plannerStore?this.plannerStore.selectedDate:Tt()},date(){return yr(this.selectedDate,!0)},isToday(){return xl(this.selectedDate)},timeframe(){var t=this.timeframes.find(e=>e.id==this.timeframeID);return t?t.text:""},goalIDs(){return this.goalStore?this.goalStore.getGoalsInTimeframe(this.timeframeID,this.selectedDate).map(i=>i.id):[]},indirectIterations(){if(this.goalStore&&this.todoStore&&this.iterationStore&&this.timeframeID==Hi.DAY){let t=[];if(this.timeframeID==Hi.DAY){let s=this.goalStore.getActiveGoals(this.selectedDate).map(n=>n.id);this.iterationStore.getIterationsInRange(this.selectedDate,ft(this.selectedDate),!1).forEach(n=>{let o=[],a=[];n.todoID&&(this.getGoalIDs(n.todoID,a,o),a=a.filter(l=>s.includes(l)),a.length>0&&t.push({task:n,goalIDs:a}))})}let e=[];return t.forEach(i=>{let s=[];i.goalIDs.forEach(r=>{this.goalStore.getItem(r).childIDs.forEach(o=>{i.goalIDs.includes(o)&&s.push(o)})}),i.goalIDs=i.goalIDs.filter(r=>!s.includes(r)),i.goalIDs.forEach(r=>{let n=e.findIndex(o=>o.goalID==r);n>-1?e[n].iterationIDs.push(i.task.id):e.push({goalID:r,iterationIDs:[i.task.id]})})}),e}}},methods:{getGoalIDs:rO}};function rO(t,e,i){i.push(t);let s=this.todoStore.getItem(t);s.goalIDs.forEach(r=>{e.includes(r)||e.push(r)}),s.parentIDs.forEach(r=>{i.includes(r)||this.getGoalIDs(r,e,i)})}const oO={class:"goals-in-timeframe d-flex flex-column text-start"},aO={key:0,class:"d-flex flex-row"},lO={key:0,class:"timeframe"},dO={key:1,class:"timeframe"},uO={class:"date"},cO={key:1,class:"timeframe"};function hO(t,e,i,s,r,n){const o=$("GoalTimeframeItem");return m(),p("div",oO,[i.timeframeID==t.TIMEFRAME.DAY?(m(),p("div",aO,[n.isToday?(m(),p("span",lO,"Today")):x("",!0),n.isToday?x("",!0):(m(),p("span",dO,"Day")),e[0]||(e[0]=d("span",{class:"dash"},"-",-1)),d("span",uO,k(n.date),1)])):(m(),p("span",cO,k(n.timeframe),1)),(m(!0),p(L,null,G(n.goalIDs,a=>(m(),ie(o,{key:a,goalID:a,timeframeID:i.timeframeID},null,8,["goalID","timeframeID"]))),128)),(m(!0),p(L,null,G(n.indirectIterations,a=>(m(),ie(o,{key:a.goalID,goalID:a.goalID,timeframeID:i.timeframeID},null,8,["goalID","timeframeID"]))),128))])}const fO=Q(nO,[["render",hO],["__scopeId","data-v-f703838b"]]),mO={name:"GoalPanelByTimeframe",components:{GoalsInTimeframe:fO,TimeframeRadio:yo},props:{},data:function(){return{appStore:void 0,timeframes:fe(_r),timeframeIDs:[]}},created:async function(){let t=await K(()=>Promise.resolve().then(()=>Kn),void 0);this.appStore=t.useAppStore();let e=this.timeframes.filter(i=>i.isActive).map(i=>i.id);this.timeframeIDs=this.showReverse?e.reverse():e},computed:{showReverse(){return this.appStore?this.appStore.itemPanel.goal.showReverse:void 0},showTimeline(){return this.appStore?this.appStore.itemPanel.goal.showTimeline:void 0},showHierarchy(){return this.appStore?this.appStore.itemPanel.goal.showHierarchy:void 0}},methods:{toggleTimeframe(t){let e=this.timeframes.find(s=>s.id==t);e.isActive=!e.isActive;let i=this.timeframes.filter(s=>s.isActive).map(s=>s.id);this.timeframeIDs=this.showReverse?i.reverse():i}},watch:{timeframes:{handler(t){let e=t.filter(i=>i.isActive).map(i=>i.id);this.timeframeIDs=this.showReverse==!0?e.reverse():e},deep:!0},showReverse(){this.timeframeIDs=this.timeframeIDs.reverse()}}},pO={class:"goal-panel-by-timeframe"};function gO(t,e,i,s,r,n){const o=$("TimeframeRadio"),a=$("GoalsInTimeframe");return m(),p("div",pO,[H(o,{timeframeIDs:t.timeframeIDs,isToggle:!0,container:"goal-by-timeframe",onToggleTimeframe:n.toggleTimeframe},null,8,["timeframeIDs","onToggleTimeframe"]),(m(!0),p(L,null,G(t.timeframeIDs,l=>(m(),ie(a,{key:l,class:"pt-2",timeframeID:l},null,8,["timeframeID"]))),128))])}const vO=Q(mO,[["render",gO]]),yO={name:"GoalPanelByDefault",components:{},props:{},data:function(){return{plannerStore:void 0,goalStore:null,mainGoalIDs:[48,211,182,232,6],skillGoalIDs:[211,6,233,234]}},created:async function(){let t=await K(()=>Promise.resolve().then(()=>ht),void 0);this.plannerStore=t.usePlannerStore();let e=await K(()=>Promise.resolve().then(()=>Ni),void 0);this.goalStore=e.useGoalStore()},computed:{selectedDate(){return this.plannerStore?this.plannerStore.selectedDate:$t},mainGoals(){let t=[];return this.goalStore&&this.mainGoalIDs.forEach(e=>{let i=this.goalStore.getItem(e);t.push(i)}),t},skillGoals(){if(this.goalStore){let t=this.goalStore.getItems();return t=t.filter(e=>this.skillGoalIDs.includes(e.id)),t}return[]}},methods:{}},_O={class:"goal-panel-dashboard d-flex flex-column"},bO={class:"d-flex flex-column"},wO={class:"d-flex flex-column"};function SO(t,e,i,s,r,n){return m(),p("div",_O,[d("div",{class:"main card",onClick:e[0]||(e[0]=o=>t.$emit("selectView",{panel:"main"}))},e[3]||(e[3]=[d("span",null,"Main",-1)])),d("div",bO,[(m(!0),p(L,null,G(n.mainGoals,o=>(m(),p("div",{key:o.id,class:"goal text-start"},k(o.text),1))),128))]),d("div",{class:"skill card",onClick:e[1]||(e[1]=o=>t.$emit("selectView",{panel:"skill"}))},e[4]||(e[4]=[d("span",null,"Skills",-1)])),d("div",wO,[(m(!0),p(L,null,G(n.skillGoals,o=>(m(),p("div",{key:o.id,class:"goal text-start"},k(o.text),1))),128))]),d("div",{class:"metrics card",onClick:e[2]||(e[2]=o=>t.$emit("selectView",{panel:"metrics"}))},e[5]||(e[5]=[d("span",null,"Metrics",-1)]))])}const TO=Q(yO,[["render",SO],["__scopeId","data-v-171b807e"]]);var xO=[{id:3,text:"Timeframe"},{id:4,text:"Repetition"},{id:5,text:"Custom"},{id:6,text:"Dashboard"}];const IO={name:"GoalPanel",components:{ItemPanelNavbar:Yl,GoalPanelByTimeframe:vO,GoalPanelByCustom:aM,GoalPanelByDashboard:TO},props:{showHead:{type:Boolean,default:!0}},data:function(){return{appStore:void 0,title:"Goals",sort:{by:"Timeframe",items:xO}}},created:async function(){let t=await K(()=>Promise.resolve().then(()=>Kn),void 0);this.appStore=t.useAppStore(),localStorage.getItem("goal-panel-sort-by")||localStorage.setItem("goal-panel-sort-by",this.sortBy)},computed:{sortBy(){if(this.appStore)return this.appStore.itemPanel.goal.sort.by}},methods:{onSortChange:EO}};function EO(t){localStorage.setItem("goal-panel-sort-by",t)}const DO={class:"row g-0"},kO={class:"col"};function CO(t,e,i,s,r,n){const o=$("ItemPanelNavbar"),a=$("GoalPanelByCustom"),l=$("GoalPanelByTimeframe"),c=$("GoalPanelByDashboard");return m(),p("div",DO,[d("div",kO,[i.showHead?(m(),ie(o,{key:0})):x("",!0),n.sortBy=="Custom"?(m(),ie(a,{key:1})):x("",!0),n.sortBy=="Timeframe"?(m(),ie(l,{key:2})):x("",!0),n.sortBy=="Dashboard"?(m(),ie(c,{key:3})):x("",!0)])])}const Yw=Q(IO,[["render",CO],["__scopeId","data-v-d92151c1"]]),PO={name:"MetricSelector",props:{selected:{type:Object,default:()=>({physical:!0,emotional:!0,mental:!0,social:!0,financial:!0})}}},AO={class:"d-flex flex-row justify-content-between"};function RO(t,e,i,s,r,n){return m(),p("div",AO,[d("span",{class:F(["metric physical",[{selected:i.selected.physical}]]),onClick:e[0]||(e[0]=o=>i.selected.physical=!i.selected.physical)},"P",2),d("span",{class:F(["metric emotional",[{selected:i.selected.emotional}]]),onClick:e[1]||(e[1]=o=>i.selected.emotional=!i.selected.emotional)},"E",2),d("span",{class:F(["metric mental",[{selected:i.selected.mental}]]),onClick:e[2]||(e[2]=o=>i.selected.mental=!i.selected.mental)},"M",2),d("span",{class:F(["metric social",[{selected:i.selected.social}]]),onClick:e[3]||(e[3]=o=>i.selected.social=!i.selected.social)},"S",2),d("span",{class:F(["metric financial",[{selected:i.selected.financial}]]),onClick:e[4]||(e[4]=o=>i.selected.financial=!i.selected.financial)},"F",2)])}const qw=Q(PO,[["render",RO],["__scopeId","data-v-940d5c70"]]);let Kw={itemType:"todo",itemName:"Todo",properties:[{id:0,text:"Order",position:1,isSelected:!0},{id:1,text:"ID",position:2,isSelected:!0},{id:2,text:"Text",position:3,isSelected:!0},{id:3,text:"Time",position:4,isSelected:!0},{id:4,text:"Repeat",position:5,isSelected:!0},{id:5,text:"Type",position:6,isSelected:!1},{id:6,text:"Parents",position:7,isSelected:!0},{id:7,text:"Children",position:8,isSelected:!0},{id:8,text:"Metrics",position:9,isSelected:!0},{id:9,text:"Goals",position:10,isSelected:!0},{id:11,position:12,text:"Routines",isSelected:!0},{id:12,position:13,text:"Iterations",isSelected:!1},{id:13,text:"Events",position:14,isSelected:!1}],props:[{id:1,name:"ID",prop:"id",queryField:"id",type:"int",isColumn:!0},{id:2,name:"Name",prop:"text",queryField:"text",type:"string",isColumn:!0},{id:3,name:"Description",prop:"description",queryField:"description",type:"blurd",isColumn:!0},{id:4,name:"Repeats",prop:"repeats",queryField:"repeats",type:"length",isColumn:!0},{id:5,name:"Parents",prop:"parents",queryField:"todos",type:"objects",isItem:!0,isColumn:!0,icon:"/icon/parent-icon.png"},{id:6,name:"Children",prop:"children",queryField:"todos",type:"objects",isItem:!0,isColumn:!0,icon:"/icon/child-icon.png"},{id:7,name:"Metrics",prop:"metrics",queryField:"metrics",type:"objects",isItem:!0,isColumn:!0},{id:8,name:"Goals",prop:"goals",queryField:"goals",type:"objects",isItem:!0,isColumn:!0,icon:"/icon/goal-icon.png"},{id:9,name:"Routines",prop:"routines",queryField:"routines",type:"objects",isItem:!0,isColumn:!0,icon:"/icon/routine-icon.png"},{id:10,name:"Repeats",prop:"repeats",queryField:"repeats",type:"objects",isItem:!1,isColumn:!1},{id:11,name:"TimePairs",prop:"timePairs",queryField:"timePairs",type:"objects",isItem:!1,isColumn:!1}],itemModel:{text:"",description:null,parents:[],children:[],metrics:[],goals:[],routines:[],timePairs:[{id:-1,timeType:{id:80},startTime:{id:-1,type:{id:80},endpoint:{id:84},moment:{id:87,text:"Date"},flexibility:{id:25},dateTime:oR($t())},endTime:null}],repeats:[],iterations:[]}};const MO={name:"TodoPanelByMetric",components:{MetricSelector:qw,IconButton:po,ListItem:vo,TimeframeRadio:yo},props:{selectedDate:Date},data:function(){return{iterationStore:void 0,todoStore:void 0,config:Kw,selectedMetrics:{physical:!0,emotional:!0,mental:!0,social:!0,financial:!0},timeframe:"day",metrics:[]}},created:async function(){let t=await K(()=>Promise.resolve().then(()=>Et),void 0);this.iterationStore=t.useIterationStore();let e=await K(()=>Promise.resolve().then(()=>hi),void 0);this.todoStore=e.useTodoStore()},computed:{start(){return this.timeframe=="day"?this.selectedDate:this.timeframe=="week"?ei(this.selectedDate):this.timeframe=="month"?ti(this.selectedDate):null},end(){return this.timeframe=="day"?ft(this.selectedDate):this.timeframe=="week"?li(this.selectedDate):this.timeframe=="month"?fi(this.selectedDate):null},iterations2(){if(this.iterationStore){let t=this.iterationStore.iterations;return t=t.filter(e=>+new Date(e.startAt)>=+this.start&&+ft(new Date(e.endAt))<=+this.end&&!e.isRepeat),t=t.filter(e=>e.idRoutine==null&&e.idRoutineIteration==null),t=He(t,"startAt"),t}else return[]},todos(){if(this.todoStore){let t=this.iterations2.map(i=>i.todo.id);return this.todoStore.getItemsByID(t)}else return[]},physicalTodos(){return this.getMetricTodos("physical")},emotionalTodos(){return this.getMetricTodos("emotional")},mentalTodos(){return this.getMetricTodos("mental")},socialTodos(){return this.getMetricTodos("social")},financialTodos(){return this.getMetricTodos("financial")}},methods:{getMetricTodos:OO},watch:{iterations2:{handler(){this.metrics=[{id:1,name:"physical",todos:this.physicalTodos,selected:this.selectedMetrics.physical,collapsed:!1},{id:2,name:"emotional",todos:this.emotionalTodos,selected:this.selectedMetrics.emotional,collapsed:!1},{id:3,name:"mental",todos:this.mentalTodos,selected:this.selectedMetrics.mental,collapsed:!1},{id:4,name:"social",todos:this.socialTodos,selected:this.selectedMetrics.social,collapsed:!1},{id:5,name:"financial",todos:this.financialTodos,selected:this.selectedMetrics.financial,collapsed:!1}]},deep:!0}}};function OO(t){let e=[];return this.iterations2&&this.todos.filter(i=>{i.metrics.some(s=>s.text.toLowerCase()==t)&&e.push(this.iterations2.filter(s=>s.todo.id==i.id))}),e.flat()}const $O={class:"row g-0"},NO={class:"metric-selector-wrapper col-12 d-flex flex-column justify-content-between"},LO={class:"d-flex flex-column"},VO=["onClick"];function WO(t,e,i,s,r,n){const o=$("TimeframeRadio"),a=$("MetricSelector"),l=$("IconButton"),c=$("ListItem");return m(),p("div",$O,[H(o,{timeframe:t.timeframe,onTimeframeSelected:e[0]||(e[0]=f=>t.timeframe=f),container:"todoPanelCustom"},null,8,["timeframe"]),d("div",NO,[H(a,{class:"metric-selector",selected:t.selectedMetrics},null,8,["selected"])]),d("div",LO,[(m(!0),p(L,null,G(t.metrics,f=>(m(),p("div",{key:f.id,class:F(["d-flex flex-column",f.name])},[X(d("div",null,[d("div",{class:"metric-header d-flex flex-row justify-content-between align-items-center",onClick:v=>f.collapsed=!f.collapsed},[d("h1",null,k(f.name),1),f.collapsed?x("",!0):(m(),ie(l,{key:0,class:"caret",src:"/icon/icon-expanded.png",width:24,height:24})),f.collapsed?(m(),ie(l,{key:1,class:"caret",src:"/icon/icon-collapsed.png",width:24,height:24})):x("",!0)],8,VO),X(d("ul",null,[(m(!0),p(L,null,G(f.todos,v=>(m(),p("li",{key:v.id,class:"todo"},[H(c,{iteration:v},null,8,["iteration"])]))),128))],512),[[it,!f.collapsed]])],512),[[it,f.selected.selected]])],2))),128))])])}const FO=Q(MO,[["render",WO],["__scopeId","data-v-d1815994"]]),BO={name:"TodoPanelBacklog",components:{ListItem:vo},data:function(){return{appStore:void 0,iterationStore:void 0,newTaskText:void 0}},created:async function(){let t=await K(()=>Promise.resolve().then(()=>Kn),void 0);this.appStore=t.useAppStore();let e=await K(()=>Promise.resolve().then(()=>Et),void 0);this.iterationStore=e.useIterationStore(),this.iterationStore.getUnplannedIterations(!0)},computed:{iterations(){if(this.iterationStore){let t=this.iterationStore.iterations;return t=t.filter(e=>!e.startAt&&!e.isRepeat),t=t.filter(e=>e.idRoutine==null&&e.idRoutineIteration==null),Xu(t,"id")}else return[]}}},zO={class:"backlog d-flex flex-column flex-grow-1 overflow-scroll"},jO={key:0,class:"item-list mt-2"};function HO(t,e,i,s,r,n){const o=$("ListItem");return m(),p("div",zO,[n.iterations?(m(),p("ul",jO,[(m(!0),p(L,null,G(n.iterations,(a,l)=>(m(),p("li",{key:a.id,style:$e({"z-index":-l})},[H(o,{iteration:a,onOnEdit:c=>t.$emit("editIteration",a)},null,8,["iteration","onOnEdit"])],4))),128))])):x("",!0)])}const UO=Q(BO,[["render",HO],["__scopeId","data-v-f62f97e2"]]),GO={name:"TodoPanelByRepetition",components:{ListItem:vo,TimeframeRadio:yo},props:{selectedDate:Date},created:async function(){let t=await K(()=>Promise.resolve().then(()=>Et),void 0);this.iterationStore=t.useIterationStore(),this.iterationStore.getRepetitiveTodoIterations(this.start,this.end)},data:function(){return{iterationStore:void 0,tasks:{complete:[],pending:[],new:null},newItemID:-1,today:Tt(),allIterations:[],timeframe:"day",showGoals:!1,showRoutineTasks:!1}},computed:{start(){return this.timeframe=="day"?this.selectedDate:this.timeframe=="week"?ei(this.selectedDate):this.timeframe=="month"?ti(this.selectedDate):null},end(){return this.timeframe=="day"?ft(this.selectedDate):this.timeframe=="week"?li(this.selectedDate):this.timeframe=="month"?fi(this.selectedDate):null},iterations(){if(this.iterationStore){let t=this.iterationStore.iterations;return t=t.filter(e=>+new Date(e.startAt)==+this.start&&+Ei(new Date(e.endAt))==+Ei(this.end)&&e.isRepeat),t=t.filter(e=>e.idRoutine==null&&e.idRoutineIteration==null),t=He(t,"startAt"),t}else return[]},complete(){return this.iterations.filter(t=>t.attemptedAt)},pending(){return this.iterations.filter(t=>!t.attemptedAt)},goals(){return this.iterations.map(e=>e.todo).map(e=>e.goals).flat()}},methods:{initIteration:YO,replaceItem:Hs,removeItem:_a,show(t){this.showGoals=!t,console.log(this.goals)}},watch:{selectedDate(){this.iterationStore.getRepetitiveTodoIterations(this.start,this.end,!0)},timeframe(){this.iterationStore.getRepetitiveTodoIterations(this.start,this.end,!0)}}};function YO(){return{id:this.newItemID--,text:"",startAt:this.start,endAt:this.end,attemptedAt:null,completedAt:null,isRecommended:!1}}const qO={class:"custom d-flex flex-column flex-grow-1"},KO={class:"d-flex flex-column flex-grow-1 justify-content-start"},JO={key:0,class:"complete d-flex flex-column"},QO={class:"header"},ZO={class:"item-list"},XO={class:"d-flex flex-column flex-grow-1 justify-content-between"},e$={class:"item-list pending"},t$={class:"complete d-flex flex-column"},i$={class:"header"},s$={key:0,class:"item-list"};function n$(t,e,i,s,r,n){const o=$("TimeframeRadio"),a=$("ListItem");return m(),p("div",qO,[H(o,{timeframe:t.timeframe,onTimeframeSelected:e[0]||(e[0]=l=>t.timeframe=l),container:"todoPanelRepetition"},null,8,["timeframe"]),d("div",KO,[t.showGoals?(m(),p("div",JO,[d("div",QO,"Goals ("+k(n.goals.length)+")",1),d("ul",ZO,[(m(!0),p(L,null,G(n.goals,(l,c)=>(m(),p("li",{key:c,style:$e({"z-index":-c})},k(l.text),5))),128))])])):x("",!0),d("div",XO,[d("ul",e$,[(m(!0),p(L,null,G(n.pending,(l,c)=>(m(),p("li",{key:l.id,style:$e({"z-index":-c})},[H(a,{iteration:l,onOnEdit:f=>t.$emit("editIteration",l)},null,8,["iteration","onOnEdit"])],4))),128))]),d("div",t$,[d("div",i$,"Completed ("+k(n.complete.length)+")",1),n.complete?(m(),p("ul",s$,[(m(!0),p(L,null,G(n.complete,(l,c)=>(m(),p("li",{key:c,style:$e({"z-index":-c})},[H(a,{class:"complete",iteration:l,onOnEdit:f=>t.$emit("editIteration",l)},null,8,["iteration","onOnEdit"])],4))),128))])):x("",!0)])])])])}const r$=Q(GO,[["render",n$],["__scopeId","data-v-64352747"]]),o$={name:"AddTaskButton",methods:{onClick:a$}};function a$(){this.$emit("click")}function l$(t,e,i,s,r,n){return m(),p("button",{class:"add-item",onClick:e[0]||(e[0]=(...o)=>n.onClick&&n.onClick(...o))},e[1]||(e[1]=[d("div",{class:"d-flex align-items-center"},[d("i",{class:"fas fa-check"}),d("div",{class:"text"},"Add a task")],-1)]))}const Em=Q(o$,[["render",l$],["__scopeId","data-v-97904de5"]]),d$={name:"TodoPanelByCustom",components:{AddTaskButton:Em,IconButton:po,ListItem:vo,TimeframeRadio:yo},props:{selectedDate:Date},created:async function(){let t=await K(()=>Promise.resolve().then(()=>Et),void 0);this.iterationStore=t.useIterationStore()},data:function(){return{iterationStore:void 0,todos:{complete:[],pending:[],new:null},newItemID:-1,today:Tt(),allIterations:[],timeframe:"day",showGoals:!1,showRoutineTasks:!1}},computed:{start(){return this.timeframe=="day"?this.selectedDate:this.timeframe=="week"?ei(this.selectedDate):this.timeframe=="month"?ti(this.selectedDate):null},end(){return this.timeframe=="day"?this.selectedDate:this.timeframe=="week"?li(this.selectedDate):this.timeframe=="month"?fi(this.selectedDate):null},iterations(){if(this.iterationStore){let t=this.iterationStore.iterations;return t=t.filter(e=>+new Date(e.startAt)>=+this.start&&+new Date(e.endAt)<=+this.end&&!e.isRepeat),t=t.filter(e=>e.idRoutine==null&&e.idRoutineIteration==null),t=He(t,"startAt"),t}else return[]},complete(){return this.iterations.filter(t=>t.attemptedAt)},pending(){return this.iterations.filter(t=>!t.attemptedAt)},goals(){return this.iterations.map(e=>e.todo).map(e=>e.goals).flat()}},methods:{initIteration:u$,addNewTask:c$,cancelAddTask:h$,replaceItem:Hs,removeItem:_a,show(t){this.showGoals=!t,console.log(this.goals)},temp(){console.log("Temp")},isUnplanned(t){if(this.start.toDateString()!=this.end.toDateString())return new Date(t.startAt).toDateString()==this.start.toDateString()&&t.endAt!=null&&new Date(t.endAt).toDateString()==this.end.toDateString()}},watch:{selectedDate(){this.iterationStore.getIterationsInRange(this.start,this.end,!0)},timeframe(){this.iterationStore.getIterationsInRange(this.start,this.end,!0)}}};function u$(){return{id:this.newItemID--,text:"",startAt:this.start,endAt:this.end,attemptedAt:null,completedAt:null,isRecommended:!1}}function c$(){this.todos.new=this.initIteration(),this.$nextTick(()=>this.$refs.newTask.focus())}function h$(){this.todos.new=null}const f$={class:"custom d-flex flex-column flex-grow-1"},m$={class:"toolbar d-flex flex-row justify-content-between align-items-center"},p$={class:"d-flex flex-column flex-grow-1 justify-content-start"},g$={key:0,class:"complete d-flex flex-column"},v$={class:"header"},y$={class:"item-list"},_$={class:"d-flex flex-column flex-grow-1 justify-content-between"},b$={key:0,class:"item-list pending"},w$={class:"complete d-flex flex-column"},S$={class:"header"},T$={key:0,class:"item-list"};function x$(t,e,i,s,r,n){const o=$("TimeframeRadio"),a=$("AddTaskButton"),l=$("IconButton"),c=$("ListItem");return m(),p("div",f$,[H(o,{timeframe:t.timeframe,onTimeframeSelected:e[0]||(e[0]=f=>t.timeframe=f),container:"todoPanelCustom"},null,8,["timeframe"]),d("div",m$,[H(a,{onClick:n.addNewTask},null,8,["onClick"]),H(l,{src:"/icon/goal-icon.png",width:32,height:32,onClicked:e[1]||(e[1]=f=>n.show(t.showGoals))})]),d("div",p$,[t.showGoals?(m(),p("div",g$,[d("div",v$,"Goals ("+k(n.goals.length)+")",1),d("ul",y$,[(m(!0),p(L,null,G(n.goals,(f,v)=>(m(),p("li",{key:v,style:$e({"z-index":-v})},k(f.text),5))),128))])])):x("",!0),d("div",_$,[n.pending?(m(),p("ul",b$,[(m(!0),p(L,null,G(n.pending,(f,v)=>(m(),p("li",{key:f.id,style:$e({"z-index":-v})},[H(c,{iteration:f,isUnplanned:n.isUnplanned(f),onOnEdit:S=>t.$emit("editIteration",f)},null,8,["iteration","isUnplanned","onOnEdit"])],4))),128))])):x("",!0),d("div",w$,[d("div",S$,"Completed ("+k(n.complete.length)+")",1),n.complete?(m(),p("ul",T$,[(m(!0),p(L,null,G(n.complete,(f,v)=>(m(),p("li",{key:v,style:$e({"z-index":-v})},[H(c,{class:"complete",iteration:f,onOnEdit:S=>t.$emit("editIteration",f)},null,8,["iteration","onOnEdit"])],4))),128))])):x("",!0)])])])])}const I$=Q(d$,[["render",x$],["__scopeId","data-v-af4a59d1"]]),kr="/icon/caret-right.png",Ta="/icon/caret-down.png",E$="/icon/repeat.png",D$={name:"HierarchicalListItem",components:{ItemCheckbox:Sa},props:{viewModel:Object,level:Number,parent:Object,parentType:String,isUnplanned:Boolean,size:String},data:function(){return{iterationStore:void 0,iteration:void 0,showChildren:!1,padding:12}},created:async function(){this.iteration=this.viewModel.iterations[0];let t=await K(()=>Promise.resolve().then(()=>Et),void 0);this.iterationStore=t.useIterationStore()},computed:{checked(){return!!this.iteration.attemptedAt},fontSize(){return this.size&&this.size=="sm"||this.size&&this.size=="md","14px"},isParent(){return this.viewModel.children.length>0}},methods:{markComplete:C$,markIncomplete:P$,onEdit:A$,onDelete:R$,toggleChildren:k$},watch:{viewModel(){this.iteration=this.viewModel.iterations[0]}}};function k$(){this.isParent&&(this.showChildren=!this.showChildren)}function C$(){let t=new Date().toJSON();this.iteration.attemptedAt=t,this.iteration.completedAt=t,this.iterationStore.toggleCompletion(this.iteration.id,this.iteration.attemptedAt,this.iteration.completedAt)}function P$(){this.iteration.attemptedAt=null,this.iteration.completedAt=null,this.iterationStore.toggleCompletion(this.iteration.id,this.iteration.attemptedAt,this.iteration.completedAt)}function A$(){let t=fe(this.iteration);delete t.__typename,this.$emit("onEdit",t)}function R$(){this.iterationStore.deleteIteration(this.iteration.id)}const M$={class:"d-flex flex-row align-items-center flex-grow-1 justify-content-between"},O$={class:"d-flex flex-row"},$$={key:0,class:"points"},N$={key:0,class:"caret d-flex flex-row me-2"},L$={key:0,class:"caret-right",src:kr,width:"5",height:"8"},V$={key:1,class:"caret-down",src:Ta,width:"8",height:"5"},W$={class:"text flex-fill"},F$={key:0,class:"icon-button",src:E$,width:"12",height:"12"},B$={class:"button-group d-flex flex-column justify-content-between"},z$={key:0,class:"children d-flex flex-column"};function j$(t,e,i,s,r,n){const o=$("ItemCheckbox"),a=$("HierarchicalListItem",!0);return m(),p("div",null,[d("div",{class:F(["iteration d-flex flex-row justify-content-between align-items-center",[{complete:n.checked,unplanned:i.isUnplanned,recommended:t.iteration.isRecommended}]]),style:$e({"font-size":n.fontSize})},[d("div",M$,[d("div",O$,[H(o,{class:"checkbox align-self-start",style:$e({"padding-left":`${(i.level-2)*t.padding}px`}),checked:n.checked,onOnChecked:n.markComplete,onOnUnchecked:n.markIncomplete,onOnDelete:n.onDelete},null,8,["style","checked","onOnChecked","onOnUnchecked","onOnDelete"]),d("div",{class:F(["d-flex",{"flex-column":t.iteration.points}])},[t.iteration.points?(m(),p("span",$$,k(t.iteration.points)+" pts",1)):x("",!0),d("div",{class:"d-flex flex-row align-items-center",onClick:e[0]||(e[0]=(...l)=>n.toggleChildren&&n.toggleChildren(...l))},[n.isParent?(m(),p("div",N$,[t.showChildren?x("",!0):(m(),p("img",L$)),t.showChildren?(m(),p("img",V$)):x("",!0)])):x("",!0),d("span",W$,k(t.iteration.text),1)])],2)]),i.viewModel.repeatID?(m(),p("img",F$)):x("",!0)]),d("div",B$,[d("img",{class:"icon-button",src:go,width:"16",height:"16",onClick:e[1]||(e[1]=(...l)=>n.onEdit&&n.onEdit(...l))}),d("img",{class:"icon-button",src:jn,width:"16",height:"16",onClick:e[2]||(e[2]=(...l)=>n.onDelete&&n.onDelete(...l))})])],6),t.showChildren?(m(),p("div",z$,[(m(!0),p(L,null,G(i.viewModel.children,l=>(m(),ie(a,{key:l.id,viewModel:l,level:i.level+1},null,8,["viewModel","level"]))),128))])):x("",!0)])}const H$=Q(D$,[["render",j$],["__scopeId","data-v-775eace6"]]),U$={name:"TodoPanelDefault",components:{AddTaskButton:Em,ItemCheckbox:Sa,HierarchicalListItem:H$},props:{selectedDate:Date},data:function(){return{appStore:void 0,iterationStore:void 0,todoStore:void 0,TIMEFRAME:fe(Hi),newTaskText:void 0}},created:async function(){let t=await K(()=>Promise.resolve().then(()=>Kn),void 0);this.appStore=t.useAppStore();let e=await K(()=>Promise.resolve().then(()=>hi),void 0);this.todoStore=e.useTodoStore();let i=await K(()=>Promise.resolve().then(()=>Et),void 0);this.iterationStore=i.useIterationStore()},computed:{date(){return yr(this.selectedDate,!0)},start(){return ei(ti(this.selectedDate))},end(){return li(fi(this.selectedDate))},isToday(){return xl(this.selectedDate)},iterations(){if(this.iterationStore){let t=this.iterationStore.iterations;return t=t.filter(e=>+new Date(e.startAt)>=+this.start&&+new Date(e.endAt)<=+this.end&&e.eventID==null),t=t.filter(e=>e.idRoutine==null&&e.routineIterationID==null),t=He(t,"startAt"),this.showRepeat||(t=t.filter(e=>!e.isRepeat)),this.showRecommended||(t=t.filter(e=>!e.isRecommended)),t}else return[]},todayPending(){return this.iterations.length>0?this.getViewModels(this.TIMEFRAME.DAY,!1):[]},todayComplete(){return this.iterations.length>0?this.getViewModels(this.TIMEFRAME.DAY,!0):[]},todayPoints(){let t=0,e=0;this.todayPending.forEach(s=>{s.iterations.forEach(r=>{r.points&&(e+=r.points)})}),this.todayComplete.forEach(s=>{s.iterations.forEach(r=>{r.points&&(t+=r.points)})});let i=t+e;return{complete:t,incomplete:e,total:i,text:`${t}/${i}`}},weekPending(){return this.iterations.length>0?this.getViewModels(this.TIMEFRAME.WEEK,!1):[]},weekComplete(){return this.iterations.length>0?this.getViewModels(this.TIMEFRAME.WEEK,!0):[]},completeCount(){return this.todayComplete.length+this.weekComplete.length},showRepeat(){return this.appStore?this.appStore.itemPanel.todo.showRepeat:void 0},showTimeline(){return this.appStore?this.appStore.itemPanel.todo.showTimeline:void 0},showRecommended(){return this.appStore?this.appStore.itemPanel.todo.showRecommended:void 0},showHierarchy(){return this.appStore?this.appStore.itemPanel.todo.showHierarchy:void 0}},methods:{initNewTask(){this.newTaskText="",this.$nextTick(()=>this.$refs.newTask.focus())},addTask(t){let e=this.newTaskText.trim();if(e!=""){let i=Ei(this.selectedDate);this.todoStore.createDefaultTask(e,t,i),this.newTaskText=void 0}},getViewModels(t,e){let i=this,s,r;t==this.TIMEFRAME.DAY&&(s=this.selectedDate,r=this.selectedDate),t==this.TIMEFRAME.WEEK&&(s=ei(this.selectedDate),r=li(this.selectedDate)),t==this.TIMEFRAME.MONTH&&(s=ti(this.selectedDate),r=fi(this.selectedDate));let n=this.iterations.filter(l=>l.isRepeat).map(l=>l.repeatID),o=[],a=this.iterations.filter(l=>+new Date(l.startAt)==+s&&+Ei(new Date(l.endAt))==+Ei(r));return e?a=a.filter(l=>l.attemptedAt):a=a.filter(l=>!l.attemptedAt),a=jg(a,"isRecommended"),a=jg(a,"isRepeat"),a.forEach(l=>{let c,f=i.todoStore.getItem(l.todoID);if(l.isRepeat?c=o.find(v=>v.todoID==l.todoID&&v.repeatID==l.RepeatID):c=o.find(v=>v.todoID==l.todoID),c==null&&(f==null&&console.log("Todo undefined"),c={id:l.id,timeframeID:void 0,todoID:l.todoID,text:f.text,children:[],iterationIDs:[],iterations:[],isChild:!1,repeatID:void 0,repeatParentID:void 0,isRepeatOwner:!1,isRepeatChild:!1}),o.push(c),c.iterationIDs.push(l.id),c.iterations.push(l),l.isRepeat){let v=i.todoStore.getItem(c.todoID),S=v.repeats.find(I=>I.id==l.repeatID);S?(c.repeatID=S.id,c.repeatParentID=S.parentID,c.timeframeID=S.idTimeframe,c.isRepeatOwner=S.ownerID==c.todoID,c.isRepeatChild=S.parentID!=null&&n.includes(S.id)):console.log(`Not repeat for todo, ${v.text}`)}}),i.showHierarchy?(o.forEach(c=>{i.todoStore.getItem(c.todoID).children.forEach(v=>{let S=[];c.repeatID!=null?S=o.filter(I=>I.todoID==v.id&&(I.repeatID==c.repeatID||I.repeatParentID==c.repeatID)):S=o.filter(I=>I.todoID==v.id),S.forEach(I=>{I.isChild=!0,c.children.push(I)})})}),o.filter(c=>c.isRepeatOwner&&!c.isChild||c.repeatID==null||!c.isChild)):o}}},G$={class:"default d-flex flex-column flex-grow-1 overflow-scroll"},Y$={class:"toolbar d-flex flex-row justify-content-between align-items-center"},q$={class:"d-flex flex-column flex-grow-1"},K$={class:"d-flex flex-column flex-grow-1"},J$={class:"d-flex flex-column"},Q$={class:"d-flex flex-row"},Z$={key:0,class:"timeframe"},X$={key:1,class:"timeframe"},eN={class:"date"},tN={class:"item-list pending"},iN={key:0},sN={class:"new-task d-flex flex-row align-items-center"},nN={key:0,class:"d-flex flex-column"},rN={class:"item-list pending"},oN={class:"complete d-flex flex-column"},aN={class:"header float-start"},lN={key:0,class:"d-flex flex-column"},dN={class:"d-flex flex-row justify-content-between"},uN={class:"d-flex flex-row"},cN={key:0,class:"timeframe"},hN={key:1,class:"timeframe"},fN={class:"date"},mN={class:"d-flex flex-row"},pN={class:"points"},gN={class:"item-list"},vN={key:1,class:"d-flex flex-column"},yN={class:"item-list pending"};function _N(t,e,i,s,r,n){const o=$("AddTaskButton"),a=$("ItemCheckbox"),l=$("HierarchicalListItem");return m(),p("div",G$,[d("div",Y$,[H(o,{onClick:n.initNewTask},null,8,["onClick"])]),d("div",q$,[d("div",K$,[d("div",J$,[d("div",Q$,[n.isToday?(m(),p("span",Z$,"Today")):x("",!0),n.isToday?x("",!0):(m(),p("span",X$,"Day")),e[8]||(e[8]=d("span",{class:"dash"},"-",-1)),d("span",eN,k(n.date),1)]),d("ul",tN,[t.newTaskText!=null?(m(),p("li",iN,[d("div",sN,[H(a,{width:40,height:40,onOnChecked:e[0]||(e[0]=c=>n.addTask(!0))}),X(d("input",{id:"newTask",ref:"newTask",class:"form-control form-control-sm",type:"text","onUpdate:modelValue":e[1]||(e[1]=c=>t.newTaskText=c),onKeyup:[e[2]||(e[2]=Ot(c=>n.addTask(!1),["enter"])),e[3]||(e[3]=Ot(c=>t.newTaskText=void 0,["esc"]))],autofocus:""},null,544),[[Ae,t.newTaskText]])])])):x("",!0),(m(!0),p(L,null,G(n.todayPending,(c,f)=>(m(),p("li",{key:c.id,style:$e({"z-index":-f})},[H(l,{viewModel:c,onOnEdit:e[4]||(e[4]=v=>t.$emit("editIteration",v))},null,8,["viewModel"])],4))),128))])]),n.weekPending.length>0?(m(),p("div",nN,[e[9]||(e[9]=d("div",{class:"d-flex flex-row"},[d("span",{class:"timeframe"},"Week")],-1)),d("ul",rN,[(m(!0),p(L,null,G(n.weekPending,(c,f)=>(m(),p("li",{key:c.id,style:$e({"z-index":-f})},[H(l,{viewModel:c,level:2,onOnEdit:e[5]||(e[5]=v=>t.$emit("editIteration",v))},null,8,["viewModel"])],4))),128))])])):x("",!0)]),d("div",oN,[d("div",aN,"Completed ("+k(n.completeCount)+")",1),n.todayComplete.length>0?(m(),p("div",lN,[d("div",dN,[d("div",uN,[n.isToday?(m(),p("span",cN,"Today")):x("",!0),n.isToday?x("",!0):(m(),p("span",hN,"Day")),e[10]||(e[10]=d("span",{class:"dash"},"-",-1)),d("span",fN,k(n.date),1)]),d("div",mN,[d("span",pN,k(n.todayPoints.text),1)])]),d("ul",gN,[(m(!0),p(L,null,G(n.todayComplete,(c,f)=>(m(),p("li",{key:c.id,style:$e({"z-index":-f})},[H(l,{viewModel:c,level:2,onOnEdit:e[6]||(e[6]=v=>t.$emit("editIteration",v))},null,8,["viewModel"])],4))),128))])])):x("",!0),n.weekComplete.length>0?(m(),p("div",vN,[e[11]||(e[11]=d("div",{class:"d-flex flex-row"},[d("span",{class:"timeframe"},"Week")],-1)),d("ul",yN,[(m(!0),p(L,null,G(n.weekComplete,(c,f)=>(m(),p("li",{key:c.id,style:$e({"z-index":-f})},[H(l,{viewModel:c,level:2,onOnEdit:e[7]||(e[7]=v=>t.$emit("editIteration",v))},null,8,["viewModel"])],4))),128))])])):x("",!0)])])])}const bN=Q(U$,[["render",_N],["__scopeId","data-v-579010f0"]]),wN={name:"TodoMemorizationTimeline",components:{},props:{idTodo:Number},data:function(){return{iterationStore:void 0,timeline:void 0,selected:void 0}},created:async function(){let t=await K(()=>Promise.resolve().then(()=>Et),void 0);this.iterationStore=t.useIterationStore(),this.refreshTimeline()},computed:{iterations(){if(this.iterationStore){let t=this.iterationStore.iterations.filter(e=>e.todoID==this.idTodo);return t=fe(t),so(t,"startAt")}return[]}},methods:{refreshTimeline:SN,initTimeline:TN,loopIterations:xN,isComplete:IN,isInComplete:EN,selectData:DN},watch:{iterations(){this.refreshTimeline(),this.iterations.length>0&&this.initTimeline()}}};function SN(){this.timeline={d0:{day:"D0",nextDay:"D1",daysToComplete:1,daysTillNext:1,iteration:void 0},d1:{day:"D1",nextDay:"D3",daysToComplete:1,daysTillNext:2,iteration:void 0},d3:{day:"D3",nextDay:"D7",daysToComplete:1,daysTillNext:4,iteration:void 0},d7:{day:"D7",nextDay:"D16",daysToComplete:2,daysTillNext:9,iteration:void 0},d16:{day:"D16",nextDay:"D30",daysToComplete:2,daysTillNext:14,iteration:void 0},d30:{day:"D30",nextDay:void 0,daysToComplete:2,daysTillNext:void 0,iteration:void 0}}}function TN(){let t=0,e;do e=this.loopIterations(t),!e&&t<this.iterations.length-1?(t++,this.refreshTimeline()):t=-1;while(t>0)}function xN(t){let e,i,s=new Date;for(let r=t,n=0;r<this.iterations.length;r++){let o=this.timeline[`d${n}`],a=this.iterations[r].startAt.toDate();if(r>t){if(+a<+e||+a>i)return!1;+s>=+e&&+s<=i&&(o.isActive=!0)}else+Ei(a)==+Ei(s)&&(o.isActive=!0);o.iteration=this.iterations[r],n==0?n=1:n=n+o.daysTillNext,e=xs(a,o.daysTillNext),i=Fw(xs(e,o.daysToComplete),-1)}return!0}function IN(t){return t.iteration?t.iteration.attemptedAt!=null:!1}function EN(t){if(t.iteration)return t.iteration.attemptedAt==null}function DN(t){this.selected=this.selected!=t?t:void 0}const kN={class:"todo-memorization-timeline d-flex justify-content-evenly mb-3"},CN=["onClick"];function PN(t,e,i,s,r,n){return m(),p("div",kN,[(m(!0),p(L,null,G(t.timeline,o=>(m(),p("span",{class:F(["dot",{complete:n.isComplete(o),selected:o==t.selected,incomplete:n.isInComplete(o),"is-active":o.isActive}]),onClick:a=>n.selectData(o)},null,10,CN))),256))])}const Jw=Q(wN,[["render",PN],["__scopeId","data-v-1196d174"]]),AN={name:"MemorizationItemCard",components:{TodoMemorizationTimeline:Jw},props:{idTodo:Number},data:function(){return{todoStore:void 0}},created:async function(){let t=await K(()=>Promise.resolve().then(()=>hi),void 0);this.todoStore=t.useTodoStore()},computed:{todo(){if(this.todoStore)return this.todoStore.getItem(this.idTodo)}},methods:{}},RN={key:0,class:"memorization-item-card d-flex flex-column"},MN={class:"text-start mb-2"};function ON(t,e,i,s,r,n){const o=$("TodoMemorizationTimeline");return n.todo?(m(),p("div",RN,[d("div",MN,k(n.todo.text),1),H(o,{idTodo:i.idTodo},null,8,["idTodo"])])):x("",!0)}const $N=Q(AN,[["render",ON]]),NN={name:"TodoMemorizationItem",components:{TodoMemorizationTimeline:Jw},props:{idTodo:Number},data:function(){return{todoStore:void 0,iterationStore:void 0,universalStore:void 0,timeline:void 0,selected:void 0}},created:async function(){let t=await K(()=>Promise.resolve().then(()=>hi),void 0);this.todoStore=t.useTodoStore();let e=await K(()=>Promise.resolve().then(()=>Et),void 0);this.iterationStore=e.useIterationStore();let i=await K(()=>Promise.resolve().then(()=>bo),void 0);this.universalStore=i.useUniversalStore(),this.refreshTimeline()},computed:{todo(){if(this.todoStore)return this.todoStore.getItem(this.idTodo)},iterations(){if(this.iterationStore&&this.universalStore){let t=this.iterationStore.iterations.filter(e=>e.todoID==this.idTodo);return t=fe(t),so(t,"startAt")}return[]},lastBlurb(){for(let t=this.iterations.length-1;t>-1;t--)if(this.iterations[t].blurbIds.length>0){let e=this.universalStore.getBlurb(this.iterations[t].blurbIds[0]);if(e)return e.text}},showCompletionButton(){let t=!1;return this.selected&&Object.keys(this.timeline).reverse().forEach(e=>{let i=this.timeline[e];i.isActive&&(t=!0);let s=i.iteration;s&&s.startAt.toDate()<+Tt().endOfDay()&&!s.attemptedAt&&(t=!0)}),t}},methods:{getLongDateString:lR,refreshTimeline:LN,initTimeline:VN,loopIterations:WN,isComplete:FN,isInComplete:BN,selectData:zN,markComplete:jN},watch:{iterations(){this.refreshTimeline(),this.iterations.length>0&&this.initTimeline()}}};function LN(){this.selected=void 0,this.timeline={d0:{day:"D0",nextDay:"D1",daysToComplete:1,daysTillNext:1,iteration:void 0},d1:{day:"D1",nextDay:"D3",daysToComplete:1,daysTillNext:2,iteration:void 0},d3:{day:"D3",nextDay:"D7",daysToComplete:1,daysTillNext:4,iteration:void 0},d7:{day:"D7",nextDay:"D16",daysToComplete:2,daysTillNext:9,iteration:void 0},d16:{day:"D16",nextDay:"D30",daysToComplete:2,daysTillNext:14,iteration:void 0},d30:{day:"D30",nextDay:void 0,daysToComplete:2,daysTillNext:void 0,iteration:void 0}}}function VN(){let t=0,e;do e=this.loopIterations(t),!e&&t<this.iterations.length-1?(t++,this.refreshTimeline()):t=-1;while(t>0)}function WN(t){let e,i,s=new Date;for(let r=t,n=0;r<this.iterations.length;r++){let o=this.timeline[`d${n}`],a=this.iterations[r].startAt.toDate();if(r>t){if(+a<+e||+a>i)return!1;+s>=+e&&+s<=i&&(o.isActive=!0,this.selected=o)}else+Ei(a)==+Ei(s)&&(o.isActive=!0,this.selected=o);if(o.iteration=this.iterations[r],this.iterations[r].blurbIds.length>0){let l=this.universalStore.getBlurb(this.iterations[r].blurbIds[0]);l&&(this.iterations[r].blurb=l.text)}else this.iterations[r].blurb=void 0;n==0?n=1:n=n+o.daysTillNext,e=xs(a,o.daysTillNext),i=Fw(xs(e,o.daysToComplete),-1)}return!0}function FN(t){return t.iteration?t.iteration.attemptedAt!=null:!1}function BN(t){if(t.iteration)return t.iteration.attemptedAt==null}function zN(t){this.selected=this.selected!=t?t:void 0}function jN(){let t=new Date;if(this.selected.nextDay){let e=this.selected.iteration.text.replace(this.selected.day,this.selected.nextDay),i=xs(this.selected.iteration.startAt.toDate(),this.selected.daysTillNext);this.iterationStore.completeAndCreatSibling(this.selected.iteration.id,t,e,i,i)}else this.iterationStore.toggleCompletion(this.selected.iteration.id,t,t)}const HN={key:0,class:"todo-memorization-item d-flex flex-column"},UN={class:"top d-flex flex-column sticky-top pt-2"},GN={class:"label d-flex flex-row mb-2"},YN={class:"text-start mb-2"},qN={class:"d-flex justify-content-evenly mb-3"},KN=["onClick"],JN={key:0,class:"text-start"},QN={key:1,class:"d-flex flex-column"},ZN={key:0,class:"blurb text-start"},XN={key:1,class:"blurb flex-grow-1 form-group mt-1"};function eL(t,e,i,s,r,n){return n.todo?(m(),p("div",HN,[d("div",UN,[d("div",GN,[d("img",{class:"icon-button",src:Wi,width:"20",height:"20",onClick:e[0]||(e[0]=ye(o=>t.$emit("back"),["prevent"]))}),d("div",YN,k(n.todo.text),1)]),d("div",qN,[(m(!0),p(L,null,G(t.timeline,o=>(m(),p("span",{class:F(["dot",{complete:n.isComplete(o),selected:o==t.selected,incomplete:n.isInComplete(o),"is-active":o.isActive}]),onClick:a=>n.selectData(o)},null,10,KN))),256))]),t.selected?(m(),p("div",JN,k(n.getLongDateString(t.selected.iteration.startAt)),1)):x("",!0),n.showCompletionButton?(m(),p("div",QN,[d("button",{class:"btn btn-sm btn-primary mt-2 mb-2",type:"button",onClick:e[1]||(e[1]=(...o)=>n.markComplete&&n.markComplete(...o))}," Mark Complete ")])):x("",!0)]),!t.selected&&n.lastBlurb?(m(),p("div",ZN,k(n.lastBlurb),1)):x("",!0),t.selected?(m(),p("div",XN,[X(d("textarea",{class:"textarea","onUpdate:modelValue":e[2]||(e[2]=o=>t.selected.iteration.blurb=o),placeholder:"Click to add blurb",spellcheck:"true"},"            ",512),[[Ae,t.selected.iteration.blurb,void 0,{lazy:!0,trim:!0}]])])):x("",!0)])):x("",!0)}const tL=Q(NN,[["render",eL],["__scopeId","data-v-803e48ed"]]),iL={name:"TodoPanelMemorization",components:{MemorizationItemCard:$N,TodoMemorizationItem:tL},props:{},data:function(){return{todoStore:void 0,iterationStore:void 0,selectedTodoID:void 0}},created:async function(){let t=await K(()=>Promise.resolve().then(()=>hi),void 0);this.todoStore=t.useTodoStore();let e=await K(()=>Promise.resolve().then(()=>Et),void 0);this.iterationStore=e.useIterationStore()},computed:{todoDatas(){let t=[];return this.todoStore&&this.iterationStore&&this.todoStore.getMemorizationTodos().forEach(i=>{let s=this.iterationStore.iterations.filter(r=>r.todoID==i.id);s=Ul(s,"startAt"),s.length>0?+s[0].startAt.toDate().startOfDay()<+$t()?s[0].text.substring(s[0].text.length-4)!="(D30)"&&t.push({id:i.id,status:"missed"}):+s[0].startAt.toDate().startOfDay()==+$t()?s[0].attemptedAt||t.push({id:i.id,status:"active"}):s[0].attemptedAt||t.push({id:i.id,status:"pending"}):t.push({id:i.id,status:"backlog"})}),t},activeItems(){return this.todoDatas.filter(t=>t.status=="active")},pendingItems(){return this.todoDatas.filter(t=>t.status=="pending")},missedItems(){return this.todoDatas.filter(t=>t.status=="missed")},backlogItems(){return this.todoDatas.filter(t=>t.status=="backlog")}},methods:{}},sL={class:"todo-panel-memorization d-flex flex-column flex-grow-1 overflow-scroll ps-2 pe-2"},nL={key:0,class:"mt-2"},rL={class:"d-flex flex-column"},oL={class:"d-flex flex-column"},aL={class:"d-flex flex-column"},lL={class:"d-flex flex-column"};function dL(t,e,i,s,r,n){const o=$("MemorizationItemCard"),a=$("TodoMemorizationItem");return m(),p("div",sL,[t.selectedTodoID?x("",!0):(m(),p("div",nL,[d("div",rL,[e[1]||(e[1]=d("h5",null,"Active",-1)),(m(!0),p(L,null,G(n.activeItems,l=>(m(),ie(o,{key:l.id,class:"mb-2","id-todo":l.id,onClick:ye(c=>t.selectedTodoID=l.id,["prevent"])},null,8,["id-todo","onClick"]))),128))]),d("div",oL,[e[2]||(e[2]=d("h5",null,"Pending",-1)),(m(!0),p(L,null,G(n.pendingItems,l=>(m(),ie(o,{key:l.id,class:"mb-2","id-todo":l.id,onClick:ye(c=>t.selectedTodoID=l.id,["prevent"])},null,8,["id-todo","onClick"]))),128))]),d("div",aL,[e[3]||(e[3]=d("h5",null,"Missed",-1)),(m(!0),p(L,null,G(n.missedItems,l=>(m(),ie(o,{key:l.id,class:"mb-2","id-todo":l.id,onClick:ye(c=>t.selectedTodoID=l.id,["prevent"])},null,8,["id-todo","onClick"]))),128))]),d("div",lL,[e[4]||(e[4]=d("h5",null,"Backlog",-1)),(m(!0),p(L,null,G(n.backlogItems,l=>(m(),ie(o,{key:l.id,class:"mb-2","id-todo":l.id,onSetStatus:c=>t.setStatus(l,c),onClick:ye(c=>t.selectedTodoID=l.id,["prevent"])},null,8,["id-todo","onSetStatus","onClick"]))),128))])])),t.selectedTodoID?(m(),ie(a,{key:1,idTodo:t.selectedTodoID,class:"flex-grow-1",onBack:e[0]||(e[0]=l=>t.selectedTodoID=void 0)},null,8,["idTodo"])):x("",!0)])}const uL=Q(iL,[["render",dL]]),cL={name:"DateSelector",props:{date:String},data:function(){return{}},computed:{dateTimeString(){return this.date?this.toDateString(this.date):""}},methods:{setDateTime:hL,toDateString:ec,toTimezoneOffset:vw}};function hL(t){if(t=t.currentTarget.value,t){let e=this.toTimezoneOffset(new Date(t).toJSON()),i=t+"T00:00:00"+e;this.$emit("onChange",i)}else this.$emit("onChange",null)}const fL=["value"];function mL(t,e,i,s,r,n){return m(),p("input",{class:"date-picker",type:"date",value:n.dateTimeString,onChange:e[0]||(e[0]=(...o)=>n.setDateTime&&n.setDateTime(...o))},null,40,fL)}const pL=Q(cL,[["render",mL]]),gL={name:"IterationForm",components:{DateSelector:pL},props:{iteration:Object},data:function(){return{iterationStore:void 0,universalStore:void 0,iteration_updated:void 0,isValid:!0}},created:async function(){let t=await K(()=>Promise.resolve().then(()=>Et),void 0);this.iterationStore=t.useIterationStore();let e=await K(()=>Promise.resolve().then(()=>bo),void 0);this.universalStore=e.useUniversalStore(),this.initUpdatedIteration()},methods:{initUpdatedIteration:vL,validateTimes:yL,save:_L,close:bL},watch:{iteration(){this.initUpdatedIteration()},"iteration_updated.startAt"(){this.validateTimes()},"iteration_updated.endAt"(){this.validateTimes()}}};function vL(){if(this.iteration_updated={id:this.iteration.id,text:this.iteration.text,points:this.iteration.points,startAt:this.iteration.startAt,endAt:this.iteration.endAt},this.iteration.blurbIds.length>0){let t=this.universalStore.getBlurb(this.iteration.blurbIds[0]);t&&(this.iteration_updated.blurb=t.text)}}function yL(){this.iteration_updated.startAt&&this.iteration_updated.endAt?+new Date(this.iteration_updated.startAt)>+new Date(this.iteration_updated.endAt)?this.isValid=!1:+new Date(this.iteration_updated.startAt)<=+new Date(this.iteration_updated.endAt)&&(this.isValid=!0):this.isValid=!0}function _L(){var t=this.iteration_updated.text.trim();t!=""&&(this.iterationStore.updateIteration(this.iteration_updated.id,this.iteration_updated.text,this.iteration_updated.blurb,this.iteration_updated.points,this.iteration_updated.startAt,this.iteration_updated.endAt),this.close())}function bL(){this.$emit("closeForm")}const wL={class:"d-flex flew-row justify-content-between mt-2"},SL={class:"form-group d-flex justify-content-start"},TL={class:"mt-1 float-start"},xL={class:"form-group mt-3"},IL={class:"points d-flex flex-row align-items-center mt-1"},EL={class:"form-group mt-1"},DL={class:"form-group mt-1"},kL={class:"d-flex flew-row justify-content-end mt-3"},CL={class:"form-group d-flex justify-content-end"},PL=["disabled"];function AL(t,e,i,s,r,n){const o=$("DateSelector");return t.iteration_updated?(m(),p("form",{key:0,id:"iteration-form",class:"pb-2",onSubmit:e[9]||(e[9]=ye(()=>{},["prevent"]))},[d("div",wL,[d("div",SL,[d("img",{class:"icon-button",src:Wi,width:"16",height:"16",onClick:e[0]||(e[0]=ye((...a)=>n.close&&n.close(...a),["prevent"]))})])]),d("span",TL,k(i.iteration.id),1),d("div",xL,[X(d("input",{class:"title textbox",type:"text",ref:"text",placeholder:"Title","onUpdate:modelValue":e[1]||(e[1]=a=>t.iteration_updated.text=a),onKeyup:e[2]||(e[2]=Ot((...a)=>n.save&&n.save(...a),["enter"])),spellcheck:"true"},null,544),[[Ae,t.iteration_updated.text,void 0,{lazy:!0,trim:!0}]])]),d("div",IL,[e[10]||(e[10]=d("span",{class:"me-1"},"Points",-1)),X(d("input",{class:"form-control form-control-sm me-1",type:"number",min:"1","onUpdate:modelValue":e[3]||(e[3]=a=>t.iteration_updated.points=a),style:{width:"41px"},required:""},null,512),[[Ae,t.iteration_updated.points]])]),d("div",EL,[H(o,{class:F(["date-selector mt-1",{invalid:!t.isValid}]),date:t.iteration_updated.startAt,onOnChange:e[4]||(e[4]=a=>t.iteration_updated.startAt=a)},null,8,["class","date"]),H(o,{class:F(["date-selector mt-3",{invalid:!t.isValid}]),date:t.iteration_updated.endAt,onOnChange:e[5]||(e[5]=a=>t.iteration_updated.endAt=a)},null,8,["class","date"])]),d("div",DL,[X(d("textarea",{class:"textarea","onUpdate:modelValue":e[6]||(e[6]=a=>t.iteration_updated.blurb=a),placeholder:"Click to add blurb",spellcheck:"true"},"            ",512),[[Ae,t.iteration_updated.blurb,void 0,{lazy:!0,trim:!0}]])]),d("div",kL,[d("div",CL,[d("button",{class:F(["btn-sm btn-primary me-2",{"btn-primary":t.isValid,"btn-danger":!t.isValid}]),type:"button",disabled:!t.isValid,onClick:e[7]||(e[7]=ye((...a)=>n.save&&n.save(...a),["prevent"]))},"Save",10,PL),d("button",{class:"btn-sm btn-warning",type:"button",onClick:e[8]||(e[8]=ye((...a)=>n.close&&n.close(...a),["prevent"]))},"Cancel")])])],32)):x("",!0)}const Qw=Q(gL,[["render",AL],["__scopeId","data-v-a3e79a23"]]),RL={name:"TodoPanel",components:{ItemPanelNavbar:Yl,TodoPanelByMetric:FO,TodoPanelBacklog:UO,TodoPanelByRepetition:r$,TodoPanelByCustom:I$,TodoPanelDefault:bN,TodoPanelMemorization:uL,IterationForm:Qw},props:{showHead:{type:Boolean,default:!0}},data:function(){return{appStore:void 0,plannerStore:void 0,iteration_Form:null}},created:async function(){let t=await K(()=>Promise.resolve().then(()=>Kn),void 0);this.appStore=t.useAppStore();let e=await K(()=>Promise.resolve().then(()=>ht),void 0);this.plannerStore=e.usePlannerStore();let i=await K(()=>Promise.resolve().then(()=>Et),void 0);this.iterationStore=i.useIterationStore(),this.iterationStore.getIterationsInRange(this.start,this.end,!0)},computed:{selectedDate(){return this.plannerStore?this.plannerStore.selectedDate:$t()},start(){return ti(ti(this.selectedDate))},end(){return fi(fi(this.selectedDate))},sortBy(){if(this.appStore)return this.appStore.itemPanel.todo.sort.by}},methods:{}},ML={class:"row g-0 h-100"},OL={class:"col h-100 d-flex flex-column flex-grow-1 overflow-hidden"};function $L(t,e,i,s,r,n){const o=$("ItemPanelNavbar"),a=$("TodoPanelByMetric"),l=$("TodoPanelBacklog"),c=$("TodoPanelByRepetition"),f=$("TodoPanelByCustom"),v=$("TodoPanelDefault"),S=$("TodoPanelMemorization"),I=$("IterationForm");return m(),p("div",ML,[d("div",OL,[i.showHead?(m(),ie(o,{key:0})):x("",!0),t.iteration_Form?x("",!0):(m(),p(L,{key:1},[n.sortBy=="Metric"?(m(),ie(a,{key:0,selectedDate:n.selectedDate,onEditIteration:e[0]||(e[0]=C=>t.iteration_Form=C)},null,8,["selectedDate"])):x("",!0),n.sortBy=="Backlog"?(m(),ie(l,{key:1,selectedDate:n.selectedDate,onEditIteration:e[1]||(e[1]=C=>t.iteration_Form=C)},null,8,["selectedDate"])):x("",!0),n.sortBy=="Repetition"?(m(),ie(c,{key:2,selectedDate:n.selectedDate,onEditIteration:e[2]||(e[2]=C=>t.iteration_Form=C)},null,8,["selectedDate"])):x("",!0),n.sortBy=="Custom"?(m(),ie(f,{key:3,selectedDate:n.selectedDate,onEditIteration:e[3]||(e[3]=C=>t.iteration_Form=C)},null,8,["selectedDate"])):x("",!0),n.sortBy=="Default"?(m(),ie(v,{key:4,selectedDate:n.selectedDate,onEditIteration:e[4]||(e[4]=C=>t.iteration_Form=C)},null,8,["selectedDate"])):x("",!0),n.sortBy=="Memorization"?(m(),ie(S,{key:5})):x("",!0)],64)),t.iteration_Form?(m(),ie(I,{key:2,iteration:t.iteration_Form,onCloseForm:e[5]||(e[5]=C=>t.iteration_Form=null)},null,8,["iteration"])):x("",!0)])])}const Zw=Q(RL,[["render",$L],["__scopeId","data-v-11f9a38c"]]),NL={name:"TaskRoutineItem",components:{},props:{idRoutine:Number},data:function(){return{routineStore:void 0,todoStore:void 0}},created:async function(){let t=await K(()=>Promise.resolve().then(()=>mn),void 0);this.routineStore=t.useRoutineStore();let e=await K(()=>Promise.resolve().then(()=>hi),void 0);this.todoStore=e.useTodoStore()},computed:{routine(){if(this.routineStore)return this.routineStore.getItem(this.idRoutine)},todos(){return this.todoStore&&this.routine?this.todoStore.getItemsByID(this.routine.todoIDs):[]}},methods:{}},LL={key:0,class:"task-routine-item d-flex flex-column"},VL={class:"text-start ps-2"};function WL(t,e,i,s,r,n){return n.routine?(m(),p("div",LL,[d("span",VL,k(n.routine.text),1),(m(!0),p(L,null,G(n.todos,o=>(m(),p("span",{key:o.id,class:"todo text-start ps-2"},k(o.text),1))),128))])):x("",!0)}const FL=Q(NL,[["render",WL],["__scopeId","data-v-ce58e0dd"]]),BL={name:"RoutinePanelByTask",components:{TaskRoutineItem:FL},props:{},data:function(){return{plannerStore:void 0,routineStore:void 0}},created:async function(){let t=await K(()=>Promise.resolve().then(()=>ht),void 0);this.plannerStore=t.usePlannerStore();let e=await K(()=>Promise.resolve().then(()=>mn),void 0);this.routineStore=e.useRoutineStore()},computed:{selectedDate(){return this.plannerStore?this.plannerStore.selectedDate:$t()},taskRoutines(){let t=this;if(this.routineStore){let e=this.routineStore.getTaskRoutines();return e=e.filter(i=>{let s=!1;return i.repeats.forEach(r=>{let n=!1;if(i.repeats.forEach(o=>{+o.startDate.toDate()<=+this.selectedDate&&(o.endDate?+this.selectedDate<=+o.endDate.toDate()&&(n=!0):n=!0)}),!!n){if(r.idTimeframe==Qc.DAILY)s=!0;else if(r.idTimeframe==Qc.WEEKLY){let o=aR(t.selectedDate);(r.dayIndecies.findIndex(a=>a==1)>-1&&o=="Sunday"||r.dayIndecies.findIndex(a=>a==2)>-1&&o=="Monday"||r.dayIndecies.findIndex(a=>a==3)>-1&&o=="Tuesday"||r.dayIndecies.findIndex(a=>a==4)>-1&&o=="Wednesday"||r.dayIndecies.findIndex(a=>a==5)>-1&&o=="Thursday"||r.dayIndecies.findIndex(a=>a==6)>-1&&o=="Friday"||r.dayIndecies.findIndex(a=>a==7)>-1&&o=="Saturday")&&(s=!0)}else if(r.idTimeframe==Qc.MONTHLY){let o=this.selectedDate.getDate();r.dayIndecies.findIndex(a=>a==o)>-1&&(s=!0)}}}),s}),e}return[]}},methods:{}},zL={class:"routine-panel-by-task d-flex flex-column pt-2"};function jL(t,e,i,s,r,n){const o=$("TaskRoutineItem");return m(),p("div",zL,[(m(!0),p(L,null,G(n.taskRoutines,a=>(m(),ie(o,{key:a.id,class:"mb-3",idRoutine:a.id},null,8,["idRoutine"]))),128))])}const HL=Q(BL,[["render",jL]]);var UL=[{id:1,text:"Task Routine"}];const GL={name:"RoutinePanel",components:{ItemPanelHeader:tc,RoutinePanelByTask:HL},props:{showHead:{type:Boolean,default:!0}},data:function(){return{sort:{by:"Task Routine",items:UL}}},created:function(){let t=localStorage.getItem("routine-panel-sort-by");t?this.sort.by=t:localStorage.setItem("routine-panel-sort-by",this.sort.by)},methods:{onSortChange:YL}};function YL(t){this.sort.by=t,localStorage.setItem("routine-panel-sort-by",t)}const qL={class:"row g-0 h-100"},KL={class:"col h-100"};function JL(t,e,i,s,r,n){const o=$("ItemPanelHeader"),a=$("RoutinePanelByTask");return m(),p("div",qL,[d("div",KL,[X(H(o,{title:"routine",sort:t.sort,onOnSortChange:n.onSortChange},null,8,["sort","onOnSortChange"]),[[it,i.showHead]]),t.sort.by=="Task Routine"?(m(),ie(a,{key:0})):x("",!0)])])}const Xw=Q(GL,[["render",JL]]),QL={name:"TaskRoutinePanel",components:{},props:{},data:function(){return{plannerStore:void 0,routineStore:void 0}},created:async function(){let t=await K(()=>Promise.resolve().then(()=>ht),void 0);this.plannerStore=t.usePlannerStore();let e=await K(()=>Promise.resolve().then(()=>mn),void 0);this.routineStore=e.useRoutineStore()},computed:{selectedDate(){return this.plannerStore?this.plannerStore.selectedDate:today()},routines(){if(this.routineStore){let t=this.routineStore.getTaskRoutinesForDay(this.selectedDate);return console.log(t),t}return[]}},methods:{}},ZL={class:"task-routine-panel"},XL=[":key"];function eV(t,e,i,s,r,n){return m(),p("div",ZL,[(m(!0),p(L,null,G(n.routines,o=>(m(),p("div",{":key":o.id,class:"task-routine"},[d("span",null,k(o.text),1)],8,XL))),256))])}const eS=Q(QL,[["render",eV]]),tV={name:"Task",props:{task:Object},created:async function(){let t=await K(()=>Promise.resolve().then(()=>Et),void 0);this.iterationStore=t.useIterationStore()},data:function(){return{iterationStore:void 0}},computed:{isComplete(){return!!this.task.attemptedAt}},methods:{toNextDay:iV,markAttempted:sV,markComplete:nV,markIncomplete:rV,deleteTask:oV,onDragStart:aV,onDragEnd:lV}};function iV(){let t=bw(new Date(this.task.startAt));this.iterationStore.rescheduleIteration(this.task.id,t,t)}function sV(){this.iterationStore.attemptIteration(this.task.id,new Date(this.task.startAt))}function nV(){let t=new Date().toJSON();this.task.attemptedAt=t,this.task.completedAt=t,this.iterationStore.toggleCompletion(this.task.id,this.task.attemptedAt,this.task.completedAt)}function rV(){this.task.attemptedAt=null,this.task.completedAt=null,this.iterationStore.toggleCompletion(this.task.id,this.task.attemptedAt,this.task.completedAt)}function oV(){this.iterationStore.deleteIteration(this.task.id)}function aV(t){let e={type:"task",id:this.task.id};e=JSON.stringify(e),console.log("Drag Started"),t.target.classList.add("drag"),t.dataTransfer.dropEffect="move",t.dataTransfer.effectAllowed="move",t.dataTransfer.setData("text",e)}function lV(t){t.target.classList.remove("drag")}const dV={class:"actions d-flex align-items-center"},uV=["src"],cV=["src"],hV=["src"],fV=["src"],mV={class:"text"};function pV(t,e,i,s,r,n){return m(),p("div",{class:F(["task d-flex",{complete:n.isComplete,incomplete:!n.isComplete}]),draggable:"true",onDragstart:e[4]||(e[4]=o=>n.onDragStart(o)),onDragend:e[5]||(e[5]=o=>n.onDragEnd(o))},[d("div",dV,[d("img",{class:"check button",width:"14",height:"14",src:`/icon/task-icon-${n.isComplete?"black":"white"}.png`,onClick:e[0]||(e[0]=o=>n.isComplete?n.markIncomplete():n.markComplete())},null,8,uV),d("img",{class:"attempted button vanishing",width:"14",height:"14",src:`/icon/thumbs-up-${n.isComplete?"dark":"lite"}-2.png`,onClick:e[1]||(e[1]=o=>n.markAttempted())},null,8,cV),d("img",{class:"delete button vanishing",width:"14",height:"14",src:`/icon/delete-${n.isComplete?"dark":"lite"}.png`,onClick:e[2]||(e[2]=o=>n.deleteTask())},null,8,hV),d("img",{class:"next button vanishing",width:"14",height:"14",src:`/icon/next-${n.isComplete?"dark":"lite"}.png`,onClick:e[3]||(e[3]=o=>n.toNextDay())},null,8,fV)]),d("div",mV,k(i.task.text),1)],34)}const gV=Q(tV,[["render",pV],["__scopeId","data-v-e04af934"]]),vV={name:"TaskList",components:{Task:gV},props:{date:Date,taskList:Array,minHeight:Number},created:async function(){let t=await K(()=>Promise.resolve().then(()=>Et),void 0);this.iterationStore=t.useIterationStore()},data:function(){return{iterationStore:void 0,showRoutineTasks:!1}},computed:{height(){return this.minHeight?this.minHeight+"px":"22px"},iterations(){if(this.iterationStore){let t=Ei(this.date),e=Ei(this.date),i=this.iterationStore.iterations;return i=i.filter(s=>+new Date(s.startAt)>=+t&&+new Date(s.endAt)<=+e&&!s.isRepeat),i=i.filter(s=>s.idRoutine==null&&s.idRoutineIteration==null),i=He(i,"startAt"),i}else return[]}},methods:{onDrop:yV}};function yV(t){t.preventDefault();let e=t.dataTransfer.getData("text");e=JSON.parse(e),e.type&&e.type=="task"&&(e.parentType&&e.parentType=="routineEvent"?console.log("this.unmapTaskFromRoutineEvent(data.id, data.parentID, this.date, null, null, this.$apollo)"):this.iterationStore.rescheduleIteration(e.id,this.date,this.date))}function _V(t,e,i,s,r,n){const o=$("Task");return m(),p("div",{class:"task-list d-flex flex-column flex-fill",style:$e({"min-height":n.height}),onDrop:e[0]||(e[0]=a=>n.onDrop(a)),onDragover:e[1]||(e[1]=ye(()=>{},["prevent"])),onDragenter:e[2]||(e[2]=ye(()=>{},["prevent"]))},[(m(!0),p(L,null,G(n.iterations,(a,l)=>(m(),ie(o,{key:l,task:a},null,8,["task"]))),128))],36)}const Dm=Q(vV,[["render",_V],["__scopeId","data-v-729e778e"]]),bV={name:"DayPoints",components:{},props:{date:Date},created:async function(){let t=await K(()=>Promise.resolve().then(()=>Et),void 0);this.iterationStore=t.useIterationStore()},data:function(){return{iterationStore:void 0}},computed:{iterations(){if(this.iterationStore){let t=Ei(this.date),e=ft(this.date),i=this.iterationStore.iterations;return i=i.filter(s=>+new Date(s.startAt)>=+t&&+new Date(s.endAt)<=+e),i=He(i,"startAt"),i}else return[]},pointTotal(){var t=0;return this.iterations.forEach(e=>{e.points!=null&&(t+=e.points)}),t},pointCompleted(){var t=0;return this.iterations.forEach(e=>{e.points!=null&&e.attemptedAt&&(t+=e.points)}),t}},methods:{}},wV={class:"points"};function SV(t,e,i,s,r,n){return m(),p("div",null,[d("span",wV,k(`${n.pointCompleted}`),1)])}const tS=Q(bV,[["render",SV],["__scopeId","data-v-fb12fccb"]]),TV={name:"Event",props:{_event:Object,minuteHeight:Number,zIndex:Number},data:function(){return{appStore:void 0,plannerStore:void 0}},created:function(){this.appStore=bt(),this.plannerStore=bn()},computed:{minutes(){return hf(new Date(this._event.startAt),new Date(this._event.endAt))},height(){return this.minuteHeight*this.minutes},top(){let e=new Date(this._event.startAt).getMinutes();return this.minuteHeight*e},size(){return this.minutes<=30?"sm":this.minutes>30&&this.minutes<=60?"md":"lg"},flexDirection(){return this.size=="sm"?"flex-row":"flex-column"},paddingTopBottom(){return this.size=="sm"?4:6},todoIterations(){return this._event.iterations.filter(t=>t.routineIteration==null)},routineTodoIterations(){let t=this._event.iterations.filter(e=>e.routineIteration!=null).flat();return t=t.map(e=>e.routineIteration),t.map(e=>e.todoIterations).flat()},iterations(){let t=[];return t=t.concat(this.routineTodoIterations).concat(this.todoIterations),this._event.type.id==Rn.ROUTINE&&(t=t.filter(e=>e.text!=this._event.text)),Xu(t,"id")},complete(){return this.iterations.filter(t=>t.attemptedAt)},pending(){return this.iterations.filter(t=>!t.attemptedAt)},percentComplete(){return this.iterations.length==0?100:this.complete.length/this.iterations.length*100},successStatus(){return this.percentComplete>=90?"success":this.percentComplete>=50&&this.percentComplete<90?"close":this.percentComplete<50?"fail":""},color(){return this._event.type.id==Rn.ROUTINE?"#4C6EF5":this._event.type.id==Rn.WORKOUT?"#F54C70":"#039BE5"}},methods:{getDurationInMinutes:hf,getTimeString:nR,onDrop:xV,selectEvent:IV}};function xV(t){t.preventDefault();let e=t.dataTransfer.getData("text");e=JSON.parse(e),e.type&&e.type=="task"?e.parentType&&e.parentType=="routineEvent"?console.log("this.unmapTaskFromRoutineEvent(data.id, data.parentID, this._event.startAt, this._event.endAt, this._event.id, this.$apollo)"):console.log("this.mapIterationToEvent(data.id, this._event.id, this.$apollo)"):e.type&&e.type=="todo"&&e.parentType&&e.parentType=="goal"&&console.log("this.mapTodoToEvent(data.id, this._event.id, this.$apollo)")}function IV(){this.appStore.setSelectedEvent(this._event),this.plannerStore.selectDate(new Date(this._event.startAt))}const EV={class:"title"},DV={key:0},kV={class:"time"};function CV(t,e,i,s,r,n){return m(),p("div",{class:F(["event cursor-default position-relative d-flex w-100",[n.size,n.successStatus]]),style:$e({top:`${n.top}px`,"padding-top":`${n.paddingTopBottom}px`,"padding-bottom":`${n.paddingTopBottom}px`,"z-index":1,"background-color":n.color}),onClick:e[0]||(e[0]=(...o)=>n.selectEvent&&n.selectEvent(...o)),onDrop:e[1]||(e[1]=o=>n.onDrop(o)),onDragover:e[2]||(e[2]=ye(()=>{},["prevent"])),onDragenter:e[3]||(e[3]=ye(()=>{},["prevent"]))},[d("div",{class:F(["d-flex","overflow-scroll",n.flexDirection]),style:$e({height:`${n.height-n.paddingTopBottom*2}px`})},[d("div",EV,[pr(k(i._event.text)+" ",1),n.size=="sm"?(m(),p("span",DV,",")):x("",!0)]),d("div",kV,k(n.getTimeString(new Date(i._event.startAt))),1)],6)],38)}const PV=Q(TV,[["render",CV],["__scopeId","data-v-bb69719e"]]),AV={components:{Event:PV},name:"HourBlock",props:{date:Date,hour:Object,blockHeight:Number,zIndex:Number},computed:{timeTop(){return this.minuteHeight*this.minute},minuteHeight(){return this.blockHeight/60},currentTime(){return this.plannerStore?this.plannerStore.currentTime:new Date},minute(){return this.currentTime.getMinutes()},isCurrentHour(){return this.currentTime.toDateString()==this.date.toDateString()&&this.currentTime.getHours()==this.hour.military},events(){if(this.eventStore){let t=Ei(this.date);t.setHours(this.hour.military);let e=Ei(this.date);e.setHours(this.hour.military,59,59,59);let i=this.eventStore.getEvents(t,e,!1);return i=i.filter(s=>new Date(s.startAt).getTime()>=t&&new Date(s.startAt).getTime()<=e),i}else return[]}},data:function(){return{plannerStore:void 0,eventStore:void 0}},created:async function(){let t=await K(()=>Promise.resolve().then(()=>ht),void 0);this.plannerStore=t.usePlannerStore();let e=await K(()=>Promise.resolve().then(()=>mo),void 0);this.eventStore=e.useEventStore()},methods:{}};function RV(t,e,i,s,r,n){const o=$("Event");return m(),p("div",{class:"hour-block position-relative",style:$e({height:`${i.blockHeight}px`})},[n.isCurrentHour?(m(),p("span",{key:0,class:"time circle",style:$e({top:`${n.timeTop-4}px`})},null,4)):x("",!0),n.isCurrentHour?(m(),p("span",{key:1,class:"time line",style:$e({top:`${n.timeTop}px`})},null,4)):x("",!0),(m(!0),p(L,null,G(n.events,(a,l)=>(m(),ie(o,{key:l,_event:a,minuteHeight:n.minuteHeight,zIndex:i.zIndex},null,8,["_event","minuteHeight","zIndex"]))),128))],4)}const MV=Q(AV,[["render",RV],["__scopeId","data-v-bfafac2b"]]);function km(){let t=[];for(let e=4;e<24;e++){let i={};if(t.push(i),e<13){let s=e>0?e:12,r=e<12?"AM":"PM";i.military=e,i.militaryString=e<10?`0${e}`:`${e}`,i.twelveHour=s,i.meridian=r,i.twelveHourString=`${s} ${r}`}else if(e>12){let s=e%12;i.military=e,i.militaryString=`${e}`,i.twelveHour=s,i.meridian="PM",i.twelveHourString=`${s} PM`}}return t}const OV={name:"HourBlocks",components:{HourBlock:MV},props:{date:Date,blockHeight:Number},created:function(){this.initHours()},data:function(){return{hours:[]}},methods:{initHours:$V,getHoursObjectArray:km}};function $V(){this.hours=this.getHoursObjectArray()}const NV={class:"d-flex flex-column"};function LV(t,e,i,s,r,n){const o=$("HourBlock");return m(),p("div",NV,[(m(!0),p(L,null,G(t.hours,(a,l)=>(m(),p("div",{key:l,class:"text-start"},[H(o,{hour:a,date:i.date,blockHeight:i.blockHeight,zIndex:l*100},null,8,["hour","date","blockHeight","zIndex"])]))),128))])}const iS=Q(OV,[["render",LV]]),VV={name:"PlannerPanel",components:{TaskList:Dm,DayPoints:tS,HourBlocks:iS},props:{dayCount:Number},data:function(){return{padding:60,days:[],dayModels:[],date:Ne,maxTasks:0,width:0,grid:"",hour:{hours:[],labelWidth:50,blockHeight:48},events:[],tasks:[],firstDay:null,lastDay:null,plannerStore:void 0,eventStore:void 0,iterationStore:void 0}},computed:{selectedDate(){return this.plannerStore?this.plannerStore.selectedDate:$t},startAt(){return ei(this.selectedDate)},endAt(){return li(this.selectedDate)}},created:async function(){let t=await K(()=>Promise.resolve().then(()=>mo),void 0);this.eventStore=t.useEventStore();let e=await K(()=>Promise.resolve().then(()=>Et),void 0);this.iterationStore=e.useIterationStore();let i=await K(()=>Promise.resolve().then(()=>ht),void 0);this.plannerStore=i.usePlannerStore(),this.plannerStore.startClock()},beforeMount:function(){},mounted:function(){this.width=this.$refs.weekView.clientWidth,this.initHours()},methods:{initHours:WV,initTimeline:FV,newDay:BV,replaceItem:Hs,removeItem:_a,getHoursObjectArray:km,onScroll:zV,taskList(t){return t.tasks.filter(e=>!e.isInEvent)}},watch:{dayCount(){this.initTimeline()},selectedDate(){this.initTimeline(),this.eventStore.getEvents(this.startAt,this.endAt,!0),this.iterationStore.getIterationsInRange(this.startAt,this.endAt,!0)}}};function WV(){this.hour.hours=this.getHoursObjectArray()}function FV(){let t=this.dayCount==7?ei(this.selectedDate):xs(new Date(this.selectedDate),-1);this.firstDay=new Date(t),this.days=[];let e=[];for(let i=0;i<this.dayCount;i++)this.days.push(t),e.push(this.newDay(t)),t=xs(t,1);this.lastDay=new Date(t),this.dayModels=e}function BV(t){let e=this.tasks.filter(s=>new Date(s.startAt).toDateString()==t.toDateString()&&(s.endAt==null||new Date(s.endAt).toDateString()==t.toDateString()));e=e.filter(s=>s.events.length==0);let i="";return t.getTime()<this.selectedDate.getTime()?i="past":t.getTime()==this.selectedDate.getTime()?i="present":t.getTime()>this.selectedDate.getTime()&&(i="future"),{dow:Ne.format(t,"ddd"),day:Ne.format(t,"D"),date:new Date(t.getTime()),dateString:t.toDateString(),tasks:e,pointInTime:i}}function zV(){}const jV={class:"row g-0 h-100"},HV={class:"col h-100"},UV={class:"date-label d-flex flex-column justify-content-between"},GV={class:"dow"},YV={class:"date-icon"},qV={class:"body d-flex h-100 overflow-scroll"},KV={key:0},JV={class:"hour-label"};function QV(t,e,i,s,r,n){const o=$("TaskList"),a=$("DayPoints"),l=$("HourBlocks");return m(),p("div",jV,[d("div",HV,[d("div",{class:"week-view d-flex flex-column h-100 w-100",ref:"weekView",style:$e({"min-width":`${64*i.dayCount}px`})},[d("div",{class:"header d-flex",style:$e({"padding-left":`${t.hour.labelWidth}px`})},[(m(!0),p(L,null,G(t.dayModels,(c,f)=>(m(),p("div",{key:f,class:F(["head day-view d-flex flex-column flex-grow-1 h-100",c.pointInTime]),style:{"flex-basis":0}},[d("div",UV,[d("div",GV,k(c.dow),1),d("div",YV,k(c.day),1)]),H(o,{date:c.date,taskList:n.taskList(c)},null,8,["date","taskList"]),H(a,{date:c.date},null,8,["date"])],2))),128))],4),d("div",qV,[d("div",{class:"hour-labels overflow-hidden",style:$e({"min-width":`${t.hour.labelWidth}px`,height:"fit-content"})},[(m(!0),p(L,null,G(t.hour.hours,(c,f)=>(m(),p("div",{key:f,style:$e({height:`${t.hour.blockHeight}px`})},[f!=0?(m(),p("div",KV,[d("p",JV,k(c.twelveHourString),1)])):x("",!0)],4))),128))],4),t.dayModels.length>0?(m(),p("div",{key:0,class:"hour-blocks d-flex w-100 overflow-hidden",ref:"hourBlocks",style:{height:"fit-content"},onScroll:e[1]||(e[1]=(...c)=>n.onScroll&&n.onScroll(...c))},[(m(!0),p(L,null,G(t.dayModels,(c,f)=>(m(),ie(l,{key:f,class:"day-view flex-grow-1",date:c.date,style:{"flex-basis":0},blockHeight:t.hour.blockHeight,onSelectEvent:e[0]||(e[0]=v=>t.$emit("selectEvent",v))},null,8,["date","blockHeight"]))),128))],544)):x("",!0)])],4)])])}const ZV=Q(VV,[["render",QV],["__scopeId","data-v-f4f0049f"]]),XV={name:"DateTimeSelector",props:{dateTime:String},data:function(){return{}},computed:{dateTimeString(){if(this.dateTime){let i=new Date(this.dateTime).toJSON().split("T"),s=i[0].split("-"),r=i[1].split(":");return`${s[0]}-${s[1]}-${s[2]} ${r[0]}:${r[1]}`}else return""}},methods:{onChange:eW}};function eW(t){if(t=t.currentTarget.value,t){let i=new Date(t).toJSON();this.$emit("onChange",i)}else this.$emit("onChange",null)}const tW=["value"];function iW(t,e,i,s,r,n){return m(),p("input",{class:"date-picker",type:"datetime-local",value:n.dateTimeString,onChange:e[0]||(e[0]=(...o)=>n.onChange&&n.onChange(...o))},null,40,tW)}const _o=Q(XV,[["render",iW]]),sW={name:"SpinningLoader",props:{isVisible:{type:Boolean,default:()=>!0}}},nW={key:0,class:"loader"};function rW(t,e,i,s,r,n){return i.isVisible?(m(),p("div",nW)):x("",!0)}const oW=Q(sW,[["render",rW],["__scopeId","data-v-23a42071"]]),aW={name:"EventTodoPanel",components:{ListItem:vo,AddTaskButton:Em,IconButton:po,DateTimeSelector:_o,SpinningLoader:oW},props:{_event:Object},data:function(){return{eventStore:void 0,iterations:{new:null},original:{id:void 0,text:void 0,startAt:void 0,endAt:void 0},showForm:!1,isValid:!0,isProcessing:!1}},created:async function(){let t=await K(()=>Promise.resolve().then(()=>mo),void 0);this.eventStore=t.useEventStore(),this.original.id=this._event.id,this.original.text=this._event.text,this.original.startAt=this._event.startAt,this.original.endAt=this._event.endAt,this.showForm=!1},computed:{eventt(){if(this.eventStore)return this.eventStore.events.find(e=>e.id==this._event.id)},date(){return this.eventt?yr(this.eventt.startAt,!0):""},startAt(){return this.eventt?this.eventt.startAt.toDate():void 0},endAt(){return this.eventt?this.eventt.endAt.toDate():void 0},startDate(){return this.startAt?zn(this.startAt):""},endDate(){return this.endAt?zn(this.endAt):""},isToday(){if(this.eventt)return xl(this.eventt.startAt)},completeIterations(){if(this.eventt){var t=this.eventt.iterations.filter(e=>e.attemptedAt);return He(t,"id")}else return[]},incompleteIterations(){if(this.eventt){var t=this.eventt.iterations.filter(e=>!e.attemptedAt);return He(t,"id")}else return[]},isToday(){if(this.eventt)return xl(this.eventt.startAt)}},methods:{initIteration:lW,setTime:cW,openForm:dW,closeForm:uW,validateTimes:hW,addNewTask:fW,cancelAddTask:mW,replaceItem:Hs,removeItem:_a,today:Tt,toShortWeekdayString:yr,save:pW},watch:{_event(t){(this.original.id==null||this.original.id&&this.original.id!=t.id)&&(this.original.id=t.id,this.original.text=t.text,this.original.startAt=t.startAt,this.original.endAt=t.endAt)}}};function lW(){return{id:this.newItemID--,text:"",startAt:Ei(this._event.startAt),endAt:null,attemptedAt:null,completedAt:null,isRecommended:!1}}function dW(){this.showForm=!0}function uW(){this._event.text=this.original.text,this._event.startAt=this.original.startAt,this._event.endAt=this.original.endAt,this.showForm=!1,this.validateTimes()}function cW(t,e){t=="start"?this._event.startAt=e:t=="end"&&(this._event.endAt=e),this.validateTimes()}function hW(){+new Date(this._event.startAt)>+new Date(this._event.endAt)?this.isValid=!1:+new Date(this._event.startAt)<=+new Date(this._event.endAt)&&(this.isValid=!0)}function fW(){this.iterations.new=this.initIteration(),this.$nextTick(()=>this.$refs.newTask.focus())}function mW(){this.iterations.new=null}function pW(){this.isProcessing=!0;var t=this._event.text.trim();t!=""&&this.eventStore.updateEvent(this._event.id,t,this._event.startAt,this._event.endAt).then(e=>{this.isProcessing=!1,this.showForm=!1})}const gW={class:"event-todo-panel d-flex flex-column flex-grow-1"},vW={class:"head d-flex flex-column px-2 pt-2"},yW={key:0,class:"d-flex flex-column"},_W={class:"label text-start mt-1 mb-1"},bW={class:"d-flex flex-row justify-content-between"},wW={class:"d-flex flex-column"},SW={class:"d-flex flex-row mt-1"},TW={key:0,class:"timeframe"},xW={key:1,class:"timeframe"},IW={class:"date"},EW={class:"time d-flex flex-row"},DW={class:"date"},kW={class:"date"},CW={key:1,class:"form d-flex flex-column"},PW={class:"form-group mt-1"},AW={class:"form-group mt-1"},RW={key:0,class:"form-group d-flex justify-content-end mt-2"},MW=["disabled"],OW={key:0,class:"d-flex flex-column flex-grow-1 justify-content-between mt-2"},$W={key:0,class:"item-list pending"},NW={class:"complete d-flex flex-column"},LW={class:"header"},VW={key:0,class:"item-list"};function WW(t,e,i,s,r,n){const o=$("DateTimeSelector"),a=$("SpinningLoader"),l=$("ListItem");return m(),p("div",gW,[d("div",vW,[t.showForm?x("",!0):(m(),p("div",yW,[d("span",_W,k(i._event.text),1),d("div",bW,[d("div",wW,[d("div",SW,[n.isToday?(m(),p("span",TW,"Today")):x("",!0),n.isToday?x("",!0):(m(),p("span",xW,"Day")),e[9]||(e[9]=d("span",{class:"dash"},"-",-1)),d("span",IW,k(n.date),1)]),d("div",EW,[d("span",DW,k(n.startDate),1),e[10]||(e[10]=d("span",{class:"dash"},"-",-1)),d("span",kW,k(n.endDate),1)])]),d("img",{class:"edit icon-button ms-2 mt-auto mb-auto",src:go,width:"20",height:"20",onClick:e[0]||(e[0]=(...c)=>n.openForm&&n.openForm(...c))})])])),t.showForm?(m(),p("div",CW,[d("div",PW,[X(d("input",{id:"event-routine-panel-text",class:"title textbox",type:"text",ref:"text",placeholder:"Title","onUpdate:modelValue":e[1]||(e[1]=c=>i._event.text=c),onKeyup:e[2]||(e[2]=Ot((...c)=>n.save&&n.save(...c),["enter"])),spellcheck:"true"},null,544),[[Ae,i._event.text,void 0,{lazy:!0,trim:!0}]])]),d("div",AW,[H(o,{class:F(["date-selector mt-2",{invalid:!t.isValid}]),dateTime:i._event.startAt,onOnChange:e[3]||(e[3]=c=>n.setTime("start",c))},null,8,["class","dateTime"]),H(o,{class:F(["date-selector mt-2",{invalid:!t.isValid}]),dateTime:i._event.endAt,onOnChange:e[4]||(e[4]=c=>n.setTime("end",c))},null,8,["class","dateTime"])]),H(a,{isVisible:t.isProcessing},null,8,["isVisible"]),t.isProcessing?x("",!0):(m(),p("div",RW,[d("button",{class:F(["btn-sm btn-primary me-2",{"btn-primary":t.isValid,"btn-danger":!t.isValid}]),type:"button",disabled:!t.isValid,onClick:e[5]||(e[5]=ye((...c)=>n.save&&n.save(...c),["prevent"]))},"Save",10,MW),d("button",{class:"btn-sm btn-warning",type:"button",onClick:e[6]||(e[6]=ye((...c)=>n.closeForm&&n.closeForm(...c),["prevent"]))},"Cancel")]))])):x("",!0)]),i._event?(m(),p("div",OW,[n.incompleteIterations?(m(),p("ul",$W,[(m(!0),p(L,null,G(n.incompleteIterations,(c,f)=>(m(),p("li",{key:c.id,style:$e({"z-index":-f})},[H(l,{iteration:c,onOnEdit:e[7]||(e[7]=v=>t.$emit("editIteration",v))},null,8,["iteration"])],4))),128))])):x("",!0),d("div",NW,[d("div",LW,"Completed ("+k(n.completeIterations.length)+")",1),n.completeIterations?(m(),p("ul",VW,[(m(!0),p(L,null,G(n.completeIterations,(c,f)=>(m(),p("li",{key:f,style:$e({"z-index":-f})},[H(l,{class:"complete",iteration:c,onOnEdit:e[8]||(e[8]=v=>t.$emit("editIteration",v))},null,8,["iteration"])],4))),128))])):x("",!0)])])):x("",!0)])}const FW=Q(aW,[["render",WW],["__scopeId","data-v-35e3cbb7"]]),BW={name:"EventRoutinePanel",components:{ListItem:vo,DateTimeSelector:_o},props:{_event:Object},data:function(){return{eventStore:void 0,iterations:{new:null},original:{id:void 0,text:void 0,startAt:void 0,endAt:void 0},showForm:!1,isValid:!0,isProcessing:!1}},created:async function(){let t=await K(()=>Promise.resolve().then(()=>mo),void 0);this.eventStore=t.useEventStore(),this.original.id=this._event.id,this.original.text=this._event.text,this.original.startAt=this._event.startAt,this.original.endAt=this._event.endAt,this.showForm=!1},computed:{eventt(){if(this.eventStore)return this.eventStore.events.find(e=>e.id==this._event.id)},startAt(){return this.eventt?this.eventt.startAt.toDate():void 0},endAt(){return this.eventt?this.eventt.endAt.toDate():void 0},completeIterations(){if(this.eventt){var t=this.eventt.iterations.filter(e=>e.attemptedAt&&e.routineIterationID);return He(t,"id")}else return[]},incompleteIterations(){if(this.eventt){var t=this.eventt.iterations.filter(e=>!e.attemptedAt&&e.routineIterationID);return He(t,"id")}else return[]},date(){return this.eventt?yr(this.eventt.startAt,!0):""},startDate(){return this.startAt?zn(this.startAt):""},endDate(){return this.endAt?zn(this.endAt):""},isToday(){if(this.eventt)return xl(this.eventt.startAt)},points(){let t=0,e=0;this.incompleteIterations.forEach(s=>{s.points&&(e+=s.points)}),this.completeIterations.forEach(s=>{s.points&&(t+=s.points)});let i=t+e;return{complete:t,incomplete:e,total:i,text:`${t}/${i}`}}},methods:{initIteration:zW,setTime:UW,openForm:jW,closeForm:HW,validateTimes:GW,addNewTask:YW,cancelAddTask:qW,replaceItem:Hs,removeItem:_a,today:Tt,toShortWeekdayString:yr,sortAsc:He,save:KW},watch:{_event(t){(this.original.id==null||this.original.id&&this.original.id!=t.id)&&(this.original.id=t.id,this.original.text=t.text,this.original.startAt=t.startAt,this.original.endAt=t.endAt)}}};function zW(){return{id:this.newItemID--,text:"",startAt:Ei(this._event.startAt),endAt:null,attemptedAt:null,completedAt:null,isRecommended:!1}}function jW(){this.showForm=!0}function HW(){this._event.text=this.original.text,this._event.startAt=this.original.startAt,this._event.endAt=this.original.endAt,this.showForm=!1,this.validateTimes()}function UW(t,e){t=="start"?this._event.startAt=e:t=="end"&&(this._event.endAt=e),this.validateTimes()}function GW(){+new Date(this._event.startAt)>+new Date(this._event.endAt)?this.isValid=!1:+new Date(this._event.startAt)<=+new Date(this._event.endAt)&&(this.isValid=!0)}function YW(){this.iterations.new=this.initIteration(),this.$nextTick(()=>this.$refs.newTask.focus())}function qW(){this.iterations.new=null}function KW(){this.isProcessing=!0;var t=this._event.text.trim();t!=""&&this.eventStore.updateEvent(this._event.id,t,this._event.startAt,this._event.endAt).then(e=>{this.isProcessing=!1,this.showForm=!1})}const JW={class:"event-routine-panel d-flex flex-column flex-grow-1"},QW={class:"head d-flex flex-column px-2 pt-2"},ZW={key:0,class:"d-flex flex-column"},XW={class:"label text-start mt-1 mb-1"},eF={class:"d-flex flex-row justify-content-between"},tF={class:"d-flex flex-column"},iF={class:"d-flex flex-row mt-1"},sF={key:0,class:"timeframe"},nF={key:1,class:"timeframe"},rF={class:"date"},oF={class:"time d-flex flex-row"},aF={class:"date"},lF={class:"date"},dF={key:1,class:"form d-flex flex-column"},uF={class:"form-group mt-1"},cF={class:"form-group mt-1"},hF={key:0,class:"d-flex flex-row mt-auto mb-2 justify-content-center position-sticky bottom-0"},fF={key:1,class:"form-group d-flex justify-content-end mt-2"},mF=["disabled"],pF={class:"points text-start mt-1"},gF={key:0,class:"d-flex flex-column flex-grow-1 justify-content-between mt-2"},vF={key:0,class:"item-list pending"},yF={class:"complete d-flex flex-column"},_F={class:"header"},bF={key:0,class:"item-list"};function wF(t,e,i,s,r,n){const o=$("DateTimeSelector"),a=$("ListItem");return m(),p("div",JW,[d("div",QW,[t.showForm?x("",!0):(m(),p("div",ZW,[d("span",XW,k(i._event.text),1),d("div",eF,[d("div",tF,[d("div",iF,[n.isToday?(m(),p("span",sF,"Today")):x("",!0),n.isToday?x("",!0):(m(),p("span",nF,"Day")),e[9]||(e[9]=d("span",{class:"dash"},"-",-1)),d("span",rF,k(n.date),1)]),d("div",oF,[d("span",aF,k(n.startDate),1),e[10]||(e[10]=d("span",{class:"dash"},"-",-1)),d("span",lF,k(n.endDate),1)])]),d("img",{class:"edit icon-button ms-2 mt-auto mb-auto",src:go,width:"20",height:"20",onClick:e[0]||(e[0]=(...l)=>n.openForm&&n.openForm(...l))})])])),t.showForm?(m(),p("div",dF,[d("div",uF,[X(d("input",{id:"event-routine-panel-text",class:"title textbox",type:"text",ref:"text",placeholder:"Title","onUpdate:modelValue":e[1]||(e[1]=l=>i._event.text=l),onKeyup:e[2]||(e[2]=Ot((...l)=>n.save&&n.save(...l),["enter"])),spellcheck:"true"},null,544),[[Ae,i._event.text,void 0,{lazy:!0,trim:!0}]])]),d("div",cF,[H(o,{class:F(["date-selector mt-2",{invalid:!t.isValid}]),dateTime:i._event.startAt,onOnChange:e[3]||(e[3]=l=>n.setTime("start",l))},null,8,["class","dateTime"]),H(o,{class:F(["date-selector mt-2",{invalid:!t.isValid}]),dateTime:i._event.endAt,onOnChange:e[4]||(e[4]=l=>n.setTime("end",l))},null,8,["class","dateTime"])]),t.isProcessing?(m(),p("div",hF,e[11]||(e[11]=[d("div",{class:"loader"},null,-1)]))):x("",!0),t.isProcessing?x("",!0):(m(),p("div",fF,[d("button",{class:F(["btn-sm btn-primary me-2",{"btn-primary":t.isValid,"btn-danger":!t.isValid}]),type:"button",disabled:!t.isValid,onClick:e[5]||(e[5]=ye((...l)=>n.save&&n.save(...l),["prevent"]))},"Save",10,mF),d("button",{class:"btn-sm btn-warning",type:"button",onClick:e[6]||(e[6]=ye((...l)=>n.closeForm&&n.closeForm(...l),["prevent"]))},"Cancel")]))])):x("",!0),d("span",pF,k(n.points.text),1)]),i._event?(m(),p("div",gF,[n.incompleteIterations?(m(),p("ul",vF,[(m(!0),p(L,null,G(n.incompleteIterations,(l,c)=>(m(),p("li",{key:l.id,style:$e({"z-index":-c})},[H(a,{iteration:l,parent:i._event,parentType:"routineEvent",onOnEdit:e[7]||(e[7]=f=>t.$emit("editIteration",f))},null,8,["iteration","parent"])],4))),128))])):x("",!0),d("div",yF,[d("div",_F,"Completed ("+k(n.completeIterations.length)+")",1),n.completeIterations?(m(),p("ul",bF,[(m(!0),p(L,null,G(n.completeIterations,(l,c)=>(m(),p("li",{key:c,style:$e({"z-index":-c})},[H(a,{class:"complete",iteration:l,onOnEdit:e[8]||(e[8]=f=>t.$emit("editIteration",f))},null,8,["iteration"])],4))),128))])):x("",!0)])])):x("",!0)])}const SF=Q(BW,[["render",wF],["__scopeId","data-v-6a2841e2"]]);var TF=[{id:1,text:"Metric"},{id:2,text:"Date"},{id:3,text:"Type"}];const xF={name:"EventPanel",components:{ItemPanelHeader:tc,EventTodoPanel:FW,EventRoutinePanel:SF,IterationForm:Qw},props:{props:Object,showHead:{type:Boolean,default:!0}},data:function(){return{appStore:void 0,EVENTTYPE:{...Rn},activeType:"SortBy",sort:{by:"Date",items:TF},iteration_Form:null}},created:function(){this.appStore=bt();let t=localStorage.getItem("event-panel-sort-by");t?this.sort.by=t:localStorage.setItem("event-panel-sort-by",this.sort.by)},computed:{type(){return this.appStore?this.appStore.itemPanel.event.type:void 0},eventt(){return this.appStore?this.appStore.itemPanel.event.event:void 0}},methods:{onSortChange:IF}};function IF(t){this.sort.by=t,localStorage.setItem("event-panel-sort-by",t)}const EF={class:"row g-0 h-100"},DF={class:"col h-100"};function kF(t,e,i,s,r,n){const o=$("ItemPanelHeader"),a=$("EventTodoPanel"),l=$("EventRoutinePanel"),c=$("IterationForm");return m(),p("div",EF,[d("div",DF,[X(H(o,{title:"events",sort:t.sort,onOnSortChange:n.onSortChange},null,8,["sort","onOnSortChange"]),[[it,i.showHead]]),t.iteration_Form?x("",!0):(m(),p(L,{key:0},[n.type==t.EVENTTYPE.TODO?(m(),ie(a,{key:0,_event:n.eventt,onEditIteration:e[0]||(e[0]=f=>t.iteration_Form=f)},null,8,["_event"])):x("",!0),n.type==t.EVENTTYPE.ROUTINE?(m(),ie(l,{key:1,_event:n.eventt,onEditIteration:e[1]||(e[1]=f=>t.iteration_Form=f)},null,8,["_event"])):x("",!0)],64)),t.iteration_Form?(m(),ie(c,{key:1,iteration:t.iteration_Form,onCloseForm:e[2]||(e[2]=f=>t.iteration_Form=null)},null,8,["iteration"])):x("",!0)])])}const sS=Q(xF,[["render",kF]]);async function CF(t,e){let i={idTimeframe:t,datetime:e};return fetch(`${Pt}/api/Universal/GetBriefingBlurbs`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}).then(s=>s.json()).then(s=>{if(s.status.success)return s.result;console.error("Error:",s.status.errorMessage)}).catch(s=>{console.error("Error:",s)})}let sv=!1;const Kl=qs("universal",{state:()=>({blurbs:[]}),getters:{},actions:{async initialize(){this.connectSocket(),sv=!0},getBlurb(t){let e=this.blurbs.find(i=>i.id==t);if(!e){let i=this;Re("Universal","GetBlurb",{id:t}).then(s=>{gt(s.result,i.blurbs)})}return e},getBlurbs(t,e){let i=this;Re("Universal","GetBlurbs",{idTimeframe:t,datetime:e}).then(n=>{n.result.forEach(o=>{gt(o,i.blurbs)})});let{start:s,end:r}=xm(t,e);return this.blurbs.filter(n=>new Date(n.datetime).getTime()>=s&&new Date(n.datetime).getTime()<=r)},async getBlurbsInMetric(t,e,i){let s=this;return Re("Universal","GetBlurbsInMetric",{idMetric:t,idTimeframe:e,datetime:i}).then(r=>(r.result.forEach(n=>{gt(n,s.blurbs)}),He(s.blurbs),r.result))},getBriefingBlurbs(t,e){let i=this;return CF(t,e).then(s=>{s.forEach(r=>{gt(r,i.blurbs)})}),this.blurbs},addBriefingBlurb(t,e,i,s,r){return Re("Universal","AddBriefingBlurb",{text:t,datetime:e,idBlurbType:i,idMetric:s,idTimeframe:r}).then(this.onResponse)},onResponse(t){return t.updates&&this.runUpdates(t.updates),t.result},runUpdates(t){let e=this;t.blurbs&&t.blurbs.length>0&&(t.blurbs.forEach(i=>{gt(i,e.blurbs)}),He(e.blurbs)),t.blurbIDsRemoved&&t.blurbIDsRemoved.length>0&&(t.blurbIDsRemoved.forEach(i=>{removeItemByID(i,e.blurbs)}),He(e.blurbs))},addMetricBlurb(t,e,i,s){return Re("Universal","AddMetricBlurb",{idMetric:t,datetime:e,text:i,title:s}).then(r=>r.result)},connectSocket(){sv||vn("coachHub").on("SendUpdates",e=>{this.runUpdates(e)})}}}),bo=Object.freeze(Object.defineProperty({__proto__:null,useUniversalStore:Kl},Symbol.toStringTag,{value:"Module"})),PF="/icon/next.png",AF="/icon/icon-expanded.png",RF={name:"LogItemView",components:{DateTimeSelector:_o},props:{logItemID:Number,clearValues:Number,clearMinutes:{type:Number,default:60}},data:function(){return{metricStore:void 0,universalStore:void 0,CONTROL:bb,fields:[],entryDateTime:void 0,updatedDateTime:void 0,blurb:null,hasValue:!1,timeout:void 0,showAdditionalValues:!1}},created:function(){this.metricStore=qn(),this.universalStore=Kl()},computed:{logItem(){if(this.metricStore)return this.metricStore.getLogItem(this.logItemID)},value(){let t="";return this.fields.forEach(e=>{e.value!=null&&(t+=e.value)}),t},lastEntry(){return this.logItem&&this.logItem.entries?this.logItem.entries[this.logItem.entries.length-1]:void 0},isLevel(){return!!(this.logItem&&this.logItem.fields.length==1&&this.logItem.fields[0].name.toLowerCase()=="level")},isDrug(){return!!(this.logItem&&this.logItem.name.toLowerCase()=="drugs")}},methods:{setProps:MF,setTimeout(t){this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(()=>{this.clear()},t*60*1e3)},sliderStart(t,e){e.value==null&&(e.value=t.currentTarget.value)},sliderEnd(){this.entryDateTime==null?(this.entryDateTime=new Date,this.save(!0)):this.save(),this.setTimeout(this.clearMinutes)},updateEntryDateTime:OF,clear(){this.setProps(!0)},save(t){let e={logItemID:this.logItem.id,dateTime:this.entryDateTime,fields:[],isNew:t||!1,isUpdated:!t};this.fields.forEach(i=>{e.fields.push({id:i.id,value:i.value})}),this.metricStore.logLogItem(e)}},watch:{logItem(){this.setProps()},clearValues(){this.clear()},showAdditionalValues(t){t&&(this.updatedDateTime=this.entryDateTime.toJSON())},blurb(t){if(t==null||this.lastEntry.reason==t)return;let e={logItemID:this.logItem.id,dateTime:this.entryDateTime,reason:{value:t,isUpdated:!0},isUpdated:!0};this.metricStore.logLogItem(e)}}};function MF(t){let e=!t&&this.logItem.entries?this.logItem.entries[this.logItem.entries.length-1]:void 0,i=[];this.logItem.fields.forEach(s=>{let r={id:s.id,value:void 0,controlTypeID:s.controlTypeID,dataTypeID:s.dataTypeID};if(i.push(r),!t&&e){let n=e.fieldValues.find(o=>o.logItemFieldID==s.id);if(n){let o=new Date(e.dateTime),a=Im(this.clearMinutes);if(+o>+a){if(r.value=n.value,e.idBlurb){let f=this.universalStore.getBlurb(e.idBlurb);f&&(this.blurb=f.text)}this.entryDateTime=o;let l=hf(o,new Date),c=this.clearMinutes-l;this.setTimeout(c)}else this.entryDateTime=void 0,this.updatedDateTime=void 0,this.blurb=null,this.showAdditionalValues=!1}}}),t&&(this.entryDateTime=void 0,this.updatedDateTime=void 0,this.blurb=null,this.showAdditionalValues=!1),this.fields=i}function OF(t){let e={logItemID:this.logItem.id,dateTime:this.entryDateTime,updatedDateTime:t,fields:[],isUpdated:!0};this.updatedDateTime=t,this.entryDateTime=new Date(t),this.metricStore.logLogItem(e)}const $F={key:0,class:"log-item d-flex flex-column"},NF={class:"d-flex flex-row justify-content-between"},LF={class:"d-flex flex-row"},VF={class:"last-value"},WF={class:"fields d-flex flex-column"},FF=["onUpdate:modelValue","onMousedown","onMouseup","onTouchstart","onTouchend"],BF={key:0,class:"additional-values d-flex flex-column"};function zF(t,e,i,s,r,n){const o=$("DateTimeSelector");return n.logItem?(m(),p("div",$F,[d("div",NF,[d("div",LF,[d("div",{class:"name",onClick:e[0]||(e[0]=a=>t.$emit("selectLogItem",n.logItem.id))},k(n.logItem.name),1),t.showAdditionalValues?x("",!0):(m(),p("img",{key:0,class:F(["icon-button",{show:!!n.value}]),src:PF,width:"16",height:"16",onClick:e[1]||(e[1]=ye(a=>t.showAdditionalValues=n.value?!0:t.showAdditionalValues,["prevent"]))},null,2)),t.showAdditionalValues?(m(),p("img",{key:1,class:F(["icon-button",{show:!!n.value}]),src:AF,width:"16",height:"16",onClick:e[2]||(e[2]=ye(a=>t.showAdditionalValues=n.value?!1:t.showAdditionalValues,["prevent"]))},null,2)):x("",!0)]),d("div",VF,k(n.value),1)]),d("div",WF,[(m(!0),p(L,null,G(t.fields,a=>(m(),p(L,null,[t.CONTROL.SLIDER==a.controlTypeID?X((m(),p("input",{key:a.id,class:F(["slider",{"has-value":a.value}]),type:"range",min:"1",max:"10",step:"0.1","onUpdate:modelValue":l=>a.value=l,onMousedown:l=>n.sliderStart(l,a),onMouseup:l=>n.sliderEnd(l,a),onTouchstart:l=>n.sliderStart(l,a),onTouchend:l=>n.sliderEnd(l,a)},null,42,FF)),[[Ae,a.value]]):x("",!0)],64))),256))]),n.value&&t.showAdditionalValues?(m(),p("div",BF,[H(o,{class:"date-selector mt-2",dateTime:t.updatedDateTime,onOnChange:n.updateEntryDateTime},null,8,["dateTime","onOnChange"]),X(d("textarea",{id:"blurb",class:"textarea mt-2",type:"text",placeholder:"Blurb","onUpdate:modelValue":e[3]||(e[3]=a=>t.blurb=a),spellcheck:"true"},"            ",512),[[Ae,t.blurb,void 0,{lazy:!0}]])])):x("",!0)])):x("",!0)}const sc=Q(RF,[["render",zF],["__scopeId","data-v-27522726"]]);function jt(t){var e=t.width,i=t.height;if(e<0)throw new Error("Negative width is not allowed for Size");if(i<0)throw new Error("Negative height is not allowed for Size");return{width:e,height:i}}function Xr(t,e){return t.width===e.width&&t.height===e.height}var jF=function(){function t(e){var i=this;this._resolutionListener=function(){return i._onResolutionChanged()},this._resolutionMediaQueryList=null,this._observers=[],this._window=e,this._installResolutionListener()}return t.prototype.dispose=function(){this._uninstallResolutionListener(),this._window=null},Object.defineProperty(t.prototype,"value",{get:function(){return this._window.devicePixelRatio},enumerable:!1,configurable:!0}),t.prototype.subscribe=function(e){var i=this,s={next:e};return this._observers.push(s),{unsubscribe:function(){i._observers=i._observers.filter(function(r){return r!==s})}}},t.prototype._installResolutionListener=function(){if(this._resolutionMediaQueryList!==null)throw new Error("Resolution listener is already installed");var e=this._window.devicePixelRatio;this._resolutionMediaQueryList=this._window.matchMedia("all and (resolution: ".concat(e,"dppx)")),this._resolutionMediaQueryList.addListener(this._resolutionListener)},t.prototype._uninstallResolutionListener=function(){this._resolutionMediaQueryList!==null&&(this._resolutionMediaQueryList.removeListener(this._resolutionListener),this._resolutionMediaQueryList=null)},t.prototype._reinstallResolutionListener=function(){this._uninstallResolutionListener(),this._installResolutionListener()},t.prototype._onResolutionChanged=function(){var e=this;this._observers.forEach(function(i){return i.next(e._window.devicePixelRatio)}),this._reinstallResolutionListener()},t}();function HF(t){return new jF(t)}var UF=function(){function t(e,i,s){var r;this._canvasElement=null,this._bitmapSizeChangedListeners=[],this._suggestedBitmapSize=null,this._suggestedBitmapSizeChangedListeners=[],this._devicePixelRatioObservable=null,this._canvasElementResizeObserver=null,this._canvasElement=e,this._canvasElementClientSize=jt({width:this._canvasElement.clientWidth,height:this._canvasElement.clientHeight}),this._transformBitmapSize=i??function(n){return n},this._allowResizeObserver=(r=s==null?void 0:s.allowResizeObserver)!==null&&r!==void 0?r:!0,this._chooseAndInitObserver()}return t.prototype.dispose=function(){var e,i;if(this._canvasElement===null)throw new Error("Object is disposed");(e=this._canvasElementResizeObserver)===null||e===void 0||e.disconnect(),this._canvasElementResizeObserver=null,(i=this._devicePixelRatioObservable)===null||i===void 0||i.dispose(),this._devicePixelRatioObservable=null,this._suggestedBitmapSizeChangedListeners.length=0,this._bitmapSizeChangedListeners.length=0,this._canvasElement=null},Object.defineProperty(t.prototype,"canvasElement",{get:function(){if(this._canvasElement===null)throw new Error("Object is disposed");return this._canvasElement},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canvasElementClientSize",{get:function(){return this._canvasElementClientSize},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bitmapSize",{get:function(){return jt({width:this.canvasElement.width,height:this.canvasElement.height})},enumerable:!1,configurable:!0}),t.prototype.resizeCanvasElement=function(e){this._canvasElementClientSize=jt(e),this.canvasElement.style.width="".concat(this._canvasElementClientSize.width,"px"),this.canvasElement.style.height="".concat(this._canvasElementClientSize.height,"px"),this._invalidateBitmapSize()},t.prototype.subscribeBitmapSizeChanged=function(e){this._bitmapSizeChangedListeners.push(e)},t.prototype.unsubscribeBitmapSizeChanged=function(e){this._bitmapSizeChangedListeners=this._bitmapSizeChangedListeners.filter(function(i){return i!==e})},Object.defineProperty(t.prototype,"suggestedBitmapSize",{get:function(){return this._suggestedBitmapSize},enumerable:!1,configurable:!0}),t.prototype.subscribeSuggestedBitmapSizeChanged=function(e){this._suggestedBitmapSizeChangedListeners.push(e)},t.prototype.unsubscribeSuggestedBitmapSizeChanged=function(e){this._suggestedBitmapSizeChangedListeners=this._suggestedBitmapSizeChangedListeners.filter(function(i){return i!==e})},t.prototype.applySuggestedBitmapSize=function(){if(this._suggestedBitmapSize!==null){var e=this._suggestedBitmapSize;this._suggestedBitmapSize=null,this._resizeBitmap(e),this._emitSuggestedBitmapSizeChanged(e,this._suggestedBitmapSize)}},t.prototype._resizeBitmap=function(e){var i=this.bitmapSize;Xr(i,e)||(this.canvasElement.width=e.width,this.canvasElement.height=e.height,this._emitBitmapSizeChanged(i,e))},t.prototype._emitBitmapSizeChanged=function(e,i){var s=this;this._bitmapSizeChangedListeners.forEach(function(r){return r.call(s,e,i)})},t.prototype._suggestNewBitmapSize=function(e){var i=this._suggestedBitmapSize,s=jt(this._transformBitmapSize(e,this._canvasElementClientSize)),r=Xr(this.bitmapSize,s)?null:s;i===null&&r===null||i!==null&&r!==null&&Xr(i,r)||(this._suggestedBitmapSize=r,this._emitSuggestedBitmapSizeChanged(i,r))},t.prototype._emitSuggestedBitmapSizeChanged=function(e,i){var s=this;this._suggestedBitmapSizeChangedListeners.forEach(function(r){return r.call(s,e,i)})},t.prototype._chooseAndInitObserver=function(){var e=this;if(!this._allowResizeObserver){this._initDevicePixelRatioObservable();return}YF().then(function(i){return i?e._initResizeObserver():e._initDevicePixelRatioObservable()})},t.prototype._initDevicePixelRatioObservable=function(){var e=this;if(this._canvasElement!==null){var i=nv(this._canvasElement);if(i===null)throw new Error("No window is associated with the canvas");this._devicePixelRatioObservable=HF(i),this._devicePixelRatioObservable.subscribe(function(){return e._invalidateBitmapSize()}),this._invalidateBitmapSize()}},t.prototype._invalidateBitmapSize=function(){var e,i;if(this._canvasElement!==null){var s=nv(this._canvasElement);if(s!==null){var r=(i=(e=this._devicePixelRatioObservable)===null||e===void 0?void 0:e.value)!==null&&i!==void 0?i:s.devicePixelRatio,n=this._canvasElement.getClientRects(),o=n[0]!==void 0?qF(n[0],r):jt({width:this._canvasElementClientSize.width*r,height:this._canvasElementClientSize.height*r});this._suggestNewBitmapSize(o)}}},t.prototype._initResizeObserver=function(){var e=this;this._canvasElement!==null&&(this._canvasElementResizeObserver=new ResizeObserver(function(i){var s=i.find(function(o){return o.target===e._canvasElement});if(!(!s||!s.devicePixelContentBoxSize||!s.devicePixelContentBoxSize[0])){var r=s.devicePixelContentBoxSize[0],n=jt({width:r.inlineSize,height:r.blockSize});e._suggestNewBitmapSize(n)}}),this._canvasElementResizeObserver.observe(this._canvasElement,{box:"device-pixel-content-box"}))},t}();function GF(t,e){return new UF(t,e.transform,e.options)}function nv(t){return t.ownerDocument.defaultView}function YF(){return new Promise(function(t){var e=new ResizeObserver(function(i){t(i.every(function(s){return"devicePixelContentBoxSize"in s})),e.disconnect()});e.observe(document.body,{box:"device-pixel-content-box"})}).catch(function(){return!1})}function qF(t,e){return jt({width:Math.round(t.left*e+t.width*e)-Math.round(t.left*e),height:Math.round(t.top*e+t.height*e)-Math.round(t.top*e)})}var KF=function(){function t(e,i,s){if(i.width===0||i.height===0)throw new TypeError("Rendering target could only be created on a media with positive width and height");if(this._mediaSize=i,s.width===0||s.height===0)throw new TypeError("Rendering target could only be created using a bitmap with positive integer width and height");this._bitmapSize=s,this._context=e}return t.prototype.useMediaCoordinateSpace=function(e){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),this._context.scale(this._horizontalPixelRatio,this._verticalPixelRatio),e({context:this._context,mediaSize:this._mediaSize})}finally{this._context.restore()}},t.prototype.useBitmapCoordinateSpace=function(e){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),e({context:this._context,mediaSize:this._mediaSize,bitmapSize:this._bitmapSize,horizontalPixelRatio:this._horizontalPixelRatio,verticalPixelRatio:this._verticalPixelRatio})}finally{this._context.restore()}},Object.defineProperty(t.prototype,"_horizontalPixelRatio",{get:function(){return this._bitmapSize.width/this._mediaSize.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_verticalPixelRatio",{get:function(){return this._bitmapSize.height/this._mediaSize.height},enumerable:!1,configurable:!0}),t}();function ro(t,e){var i=t.canvasElementClientSize;if(i.width===0||i.height===0)return null;var s=t.bitmapSize;if(s.width===0||s.height===0)return null;var r=t.canvasElement.getContext("2d",e);return r===null?null:new KF(r,i,s)}/*!
 * @license
 * TradingView Lightweight Charts v4.1.3
 * Copyright (c) 2024 TradingView, Inc.
 * Licensed under Apache License 2.0 https://www.apache.org/licenses/LICENSE-2.0
 */const JF={upColor:"#26a69a",downColor:"#ef5350",wickVisible:!0,borderVisible:!0,borderColor:"#378658",borderUpColor:"#26a69a",borderDownColor:"#ef5350",wickColor:"#737375",wickUpColor:"#26a69a",wickDownColor:"#ef5350"},QF={upColor:"#26a69a",downColor:"#ef5350",openVisible:!0,thinBars:!0},ZF={color:"#2196f3",lineStyle:0,lineWidth:3,lineType:0,lineVisible:!0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0,pointMarkersVisible:!1},XF={topColor:"rgba( 46, 220, 135, 0.4)",bottomColor:"rgba( 40, 221, 100, 0)",invertFilledArea:!1,lineColor:"#33D778",lineStyle:0,lineWidth:3,lineType:0,lineVisible:!0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0,pointMarkersVisible:!1},e4={baseValue:{type:"price",price:0},topFillColor1:"rgba(38, 166, 154, 0.28)",topFillColor2:"rgba(38, 166, 154, 0.05)",topLineColor:"rgba(38, 166, 154, 1)",bottomFillColor1:"rgba(239, 83, 80, 0.05)",bottomFillColor2:"rgba(239, 83, 80, 0.28)",bottomLineColor:"rgba(239, 83, 80, 1)",lineWidth:3,lineStyle:0,lineType:0,lineVisible:!0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0,pointMarkersVisible:!1},t4={color:"#26a69a",base:0},nS={color:"#2196f3"},rS={title:"",visible:!0,lastValueVisible:!0,priceLineVisible:!0,priceLineSource:0,priceLineWidth:1,priceLineColor:"",priceLineStyle:2,baseLineVisible:!0,baseLineWidth:1,baseLineColor:"#B2B5BE",baseLineStyle:0,priceFormat:{type:"price",precision:2,minMove:.01}};var rv,ov;function oo(t,e){const i={0:[],1:[t.lineWidth,t.lineWidth],2:[2*t.lineWidth,2*t.lineWidth],3:[6*t.lineWidth,6*t.lineWidth],4:[t.lineWidth,4*t.lineWidth]}[e];t.setLineDash(i)}function oS(t,e,i,s){t.beginPath();const r=t.lineWidth%2?.5:0;t.moveTo(i,e+r),t.lineTo(s,e+r),t.stroke()}function br(t,e){if(!t)throw new Error("Assertion failed"+(e?": "+e:""))}function Yi(t){if(t===void 0)throw new Error("Value is undefined");return t}function be(t){if(t===null)throw new Error("Value is null");return t}function Fo(t){return be(Yi(t))}(function(t){t[t.Simple=0]="Simple",t[t.WithSteps=1]="WithSteps",t[t.Curved=2]="Curved"})(rv||(rv={})),function(t){t[t.Solid=0]="Solid",t[t.Dotted=1]="Dotted",t[t.Dashed=2]="Dashed",t[t.LargeDashed=3]="LargeDashed",t[t.SparseDotted=4]="SparseDotted"}(ov||(ov={}));const av={khaki:"#f0e68c",azure:"#f0ffff",aliceblue:"#f0f8ff",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",gray:"#808080",green:"#008000",honeydew:"#f0fff0",floralwhite:"#fffaf0",lightblue:"#add8e6",lightcoral:"#f08080",lemonchiffon:"#fffacd",hotpink:"#ff69b4",lightyellow:"#ffffe0",greenyellow:"#adff2f",lightgoldenrodyellow:"#fafad2",limegreen:"#32cd32",linen:"#faf0e6",lightcyan:"#e0ffff",magenta:"#f0f",maroon:"#800000",olive:"#808000",orange:"#ffa500",oldlace:"#fdf5e6",mediumblue:"#0000cd",transparent:"#0000",lime:"#0f0",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",midnightblue:"#191970",orchid:"#da70d6",mediumorchid:"#ba55d3",mediumturquoise:"#48d1cc",orangered:"#ff4500",royalblue:"#4169e1",powderblue:"#b0e0e6",red:"#f00",coral:"#ff7f50",turquoise:"#40e0d0",white:"#fff",whitesmoke:"#f5f5f5",wheat:"#f5deb3",teal:"#008080",steelblue:"#4682b4",bisque:"#ffe4c4",aquamarine:"#7fffd4",aqua:"#0ff",sienna:"#a0522d",silver:"#c0c0c0",springgreen:"#00ff7f",antiquewhite:"#faebd7",burlywood:"#deb887",brown:"#a52a2a",beige:"#f5f5dc",chocolate:"#d2691e",chartreuse:"#7fff00",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cadetblue:"#5f9ea0",tomato:"#ff6347",fuchsia:"#f0f",blue:"#00f",salmon:"#fa8072",blanchedalmond:"#ffebcd",slateblue:"#6a5acd",slategray:"#708090",thistle:"#d8bfd8",tan:"#d2b48c",cyan:"#0ff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",blueviolet:"#8a2be2",black:"#000",darkmagenta:"#8b008b",darkslateblue:"#483d8b",darkkhaki:"#bdb76b",darkorchid:"#9932cc",darkorange:"#ff8c00",darkgreen:"#006400",darkred:"#8b0000",dodgerblue:"#1e90ff",darkslategray:"#2f4f4f",dimgray:"#696969",deepskyblue:"#00bfff",firebrick:"#b22222",forestgreen:"#228b22",indigo:"#4b0082",ivory:"#fffff0",lavenderblush:"#fff0f5",feldspar:"#d19275",indianred:"#cd5c5c",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightskyblue:"#87cefa",lightslategray:"#789",lightslateblue:"#8470ff",snow:"#fffafa",lightseagreen:"#20b2aa",lightsalmon:"#ffa07a",darksalmon:"#e9967a",darkviolet:"#9400d3",mediumpurple:"#9370d8",mediumaquamarine:"#66cdaa",skyblue:"#87ceeb",lavender:"#e6e6fa",lightsteelblue:"#b0c4de",mediumvioletred:"#c71585",mintcream:"#f5fffa",navajowhite:"#ffdead",navy:"#000080",olivedrab:"#6b8e23",palevioletred:"#d87093",violetred:"#d02090",yellow:"#ff0",yellowgreen:"#9acd32",lawngreen:"#7cfc00",pink:"#ffc0cb",paleturquoise:"#afeeee",palegoldenrod:"#eee8aa",darkolivegreen:"#556b2f",darkseagreen:"#8fbc8f",darkturquoise:"#00ced1",peachpuff:"#ffdab9",deeppink:"#ff1493",violet:"#ee82ee",palegreen:"#98fb98",mediumseagreen:"#3cb371",peru:"#cd853f",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",purple:"#800080",seagreen:"#2e8b57",seashell:"#fff5ee",papayawhip:"#ffefd5",mediumslateblue:"#7b68ee",plum:"#dda0dd",mediumspringgreen:"#00fa9a"};function gs(t){return t<0?0:t>255?255:Math.round(t)||0}function aS(t){return t<=0||t>0?t<0?0:t>1?1:Math.round(1e4*t)/1e4:0}const i4=/^#([0-9a-f])([0-9a-f])([0-9a-f])([0-9a-f])?$/i,s4=/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})?$/i,n4=/^rgb\(\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*\)$/,r4=/^rgba\(\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?[\d]{0,10}(?:\.\d+)?)\s*\)$/;function _u(t){(t=t.toLowerCase())in av&&(t=av[t]);{const e=r4.exec(t)||n4.exec(t);if(e)return[gs(parseInt(e[1],10)),gs(parseInt(e[2],10)),gs(parseInt(e[3],10)),aS(e.length<5?1:parseFloat(e[4]))]}{const e=s4.exec(t);if(e)return[gs(parseInt(e[1],16)),gs(parseInt(e[2],16)),gs(parseInt(e[3],16)),1]}{const e=i4.exec(t);if(e)return[gs(17*parseInt(e[1],16)),gs(17*parseInt(e[2],16)),gs(17*parseInt(e[3],16)),1]}throw new Error(`Cannot parse color: ${t}`)}function nc(t){const e=_u(t);return{t:`rgb(${e[0]}, ${e[1]}, ${e[2]})`,i:(i=e,.199*i[0]+.687*i[1]+.114*i[2]>160?"black":"white")};var i}class ri{constructor(){this.h=[]}l(e,i,s){const r={o:e,_:i,u:s===!0};this.h.push(r)}v(e){const i=this.h.findIndex(s=>e===s.o);i>-1&&this.h.splice(i,1)}p(e){this.h=this.h.filter(i=>i._!==e)}m(e,i,s){const r=[...this.h];this.h=this.h.filter(n=>!n.u),r.forEach(n=>n.o(e,i,s))}M(){return this.h.length>0}S(){this.h=[]}}function Us(t,...e){for(const i of e)for(const s in i)i[s]!==void 0&&(typeof i[s]!="object"||t[s]===void 0||Array.isArray(i[s])?t[s]=i[s]:Us(t[s],i[s]));return t}function an(t){return typeof t=="number"&&isFinite(t)}function El(t){return typeof t=="number"&&t%1==0}function Jl(t){return typeof t=="string"}function wd(t){return typeof t=="boolean"}function Nn(t){const e=t;if(!e||typeof e!="object")return e;let i,s,r;for(s in i=Array.isArray(e)?[]:{},e)e.hasOwnProperty(s)&&(r=e[s],i[s]=r&&typeof r=="object"?Nn(r):r);return i}function o4(t){return t!==null}function Dl(t){return t===null?void 0:t}const Cm="-apple-system, BlinkMacSystemFont, 'Trebuchet MS', Roboto, Ubuntu, sans-serif";function ra(t,e,i){return e===void 0&&(e=Cm),`${i=i!==void 0?`${i} `:""}${t}px ${e}`}class a4{constructor(e){this.k={C:1,T:5,P:NaN,R:"",D:"",O:"",A:"",V:0,B:0,I:0,L:0,N:0},this.F=e}W(){const e=this.k,i=this.j(),s=this.H();return e.P===i&&e.D===s||(e.P=i,e.D=s,e.R=ra(i,s),e.L=2.5/12*i,e.V=e.L,e.B=i/12*e.T,e.I=i/12*e.T,e.N=0),e.O=this.$(),e.A=this.U(),this.k}$(){return this.F.W().layout.textColor}U(){return this.F.q()}j(){return this.F.W().layout.fontSize}H(){return this.F.W().layout.fontFamily}}class Pm{constructor(){this.Y=[]}X(e){this.Y=e}K(e,i,s){this.Y.forEach(r=>{r.K(e,i,s)})}}class Qs{K(e,i,s){e.useBitmapCoordinateSpace(r=>this.Z(r,i,s))}}class l4 extends Qs{constructor(){super(...arguments),this.G=null}J(e){this.G=e}Z({context:e,horizontalPixelRatio:i,verticalPixelRatio:s}){if(this.G===null||this.G.tt===null)return;const r=this.G.tt,n=this.G,o=Math.max(1,Math.floor(i))%2/2,a=l=>{e.beginPath();for(let c=r.to-1;c>=r.from;--c){const f=n.it[c],v=Math.round(f.nt*i)+o,S=f.st*s,I=l*s+o;e.moveTo(v,S),e.arc(v,S,I,0,2*Math.PI)}e.fill()};n.et>0&&(e.fillStyle=n.rt,a(n.ht+n.et)),e.fillStyle=n.lt,a(n.ht)}}function d4(){return{it:[{nt:0,st:0,ot:0,_t:0}],lt:"",rt:"",ht:0,et:0,tt:null}}const u4={from:0,to:1};class c4{constructor(e,i){this.ut=new Pm,this.ct=[],this.dt=[],this.ft=!0,this.F=e,this.vt=i,this.ut.X(this.ct)}bt(e){const i=this.F.wt();i.length!==this.ct.length&&(this.dt=i.map(d4),this.ct=this.dt.map(s=>{const r=new l4;return r.J(s),r}),this.ut.X(this.ct)),this.ft=!0}gt(){return this.ft&&(this.Mt(),this.ft=!1),this.ut}Mt(){const e=this.vt.W().mode===2,i=this.F.wt(),s=this.vt.xt(),r=this.F.St();i.forEach((n,o)=>{var a;const l=this.dt[o],c=n.kt(s);if(e||c===null||!n.yt())return void(l.tt=null);const f=be(n.Ct());l.lt=c.Tt,l.ht=c.ht,l.et=c.Pt,l.it[0]._t=c._t,l.it[0].st=n.Dt().Rt(c._t,f.Ot),l.rt=(a=c.At)!==null&&a!==void 0?a:this.F.Vt(l.it[0].st/n.Dt().Bt()),l.it[0].ot=s,l.it[0].nt=r.It(s),l.tt=u4})}}class h4 extends Qs{constructor(e){super(),this.zt=e}Z({context:e,bitmapSize:i,horizontalPixelRatio:s,verticalPixelRatio:r}){if(this.zt===null)return;const n=this.zt.Lt.yt,o=this.zt.Et.yt;if(!n&&!o)return;const a=Math.round(this.zt.nt*s),l=Math.round(this.zt.st*r);e.lineCap="butt",n&&a>=0&&(e.lineWidth=Math.floor(this.zt.Lt.et*s),e.strokeStyle=this.zt.Lt.O,e.fillStyle=this.zt.Lt.O,oo(e,this.zt.Lt.Nt),function(c,f,v,S){c.beginPath();const I=c.lineWidth%2?.5:0;c.moveTo(f+I,v),c.lineTo(f+I,S),c.stroke()}(e,a,0,i.height)),o&&l>=0&&(e.lineWidth=Math.floor(this.zt.Et.et*r),e.strokeStyle=this.zt.Et.O,e.fillStyle=this.zt.Et.O,oo(e,this.zt.Et.Nt),oS(e,l,0,i.width))}}class f4{constructor(e){this.ft=!0,this.Ft={Lt:{et:1,Nt:0,O:"",yt:!1},Et:{et:1,Nt:0,O:"",yt:!1},nt:0,st:0},this.Wt=new h4(this.Ft),this.jt=e}bt(){this.ft=!0}gt(){return this.ft&&(this.Mt(),this.ft=!1),this.Wt}Mt(){const e=this.jt.yt(),i=be(this.jt.Ht()),s=i.$t().W().crosshair,r=this.Ft;if(s.mode===2)return r.Et.yt=!1,void(r.Lt.yt=!1);r.Et.yt=e&&this.jt.Ut(i),r.Lt.yt=e&&this.jt.qt(),r.Et.et=s.horzLine.width,r.Et.Nt=s.horzLine.style,r.Et.O=s.horzLine.color,r.Lt.et=s.vertLine.width,r.Lt.Nt=s.vertLine.style,r.Lt.O=s.vertLine.color,r.nt=this.jt.Yt(),r.st=this.jt.Xt()}}function m4(t,e,i,s,r,n){t.fillRect(e+n,i,s-2*n,n),t.fillRect(e+n,i+r-n,s-2*n,n),t.fillRect(e,i,n,r),t.fillRect(e+s-n,i,n,r)}function rc(t,e,i,s,r,n){t.save(),t.globalCompositeOperation="copy",t.fillStyle=n,t.fillRect(e,i,s,r),t.restore()}function lv(t,e){return t.map(i=>i===0?i:i+e)}function oh(t,e,i,s,r,n){t.beginPath(),t.lineTo(e+s-n[1],i),n[1]!==0&&t.arcTo(e+s,i,e+s,i+n[1],n[1]),t.lineTo(e+s,i+r-n[2]),n[2]!==0&&t.arcTo(e+s,i+r,e+s-n[2],i+r,n[2]),t.lineTo(e+n[3],i+r),n[3]!==0&&t.arcTo(e,i+r,e,i+r-n[3],n[3]),t.lineTo(e,i+n[0]),n[0]!==0&&t.arcTo(e,i,e+n[0],i,n[0])}function dv(t,e,i,s,r,n,o=0,a=[0,0,0,0],l=""){if(t.save(),!o||!l||l===n)return oh(t,e,i,s,r,a),t.fillStyle=n,t.fill(),void t.restore();const c=o/2;n!=="transparent"&&(oh(t,e+o,i+o,s-2*o,r-2*o,lv(a,-o)),t.fillStyle=n,t.fill()),l!=="transparent"&&(oh(t,e+c,i+c,s-o,r-o,lv(a,-c)),t.lineWidth=o,t.strokeStyle=l,t.closePath(),t.stroke()),t.restore()}function lS(t,e,i,s,r,n,o){t.save(),t.globalCompositeOperation="copy";const a=t.createLinearGradient(0,0,0,r);a.addColorStop(0,n),a.addColorStop(1,o),t.fillStyle=a,t.fillRect(e,i,s,r),t.restore()}class uv{constructor(e,i){this.J(e,i)}J(e,i){this.zt=e,this.Kt=i}Bt(e,i){return this.zt.yt?e.P+e.L+e.V:0}K(e,i,s,r){if(!this.zt.yt||this.zt.Zt.length===0)return;const n=this.zt.O,o=this.Kt.t,a=e.useBitmapCoordinateSpace(l=>{const c=l.context;c.font=i.R;const f=this.Gt(l,i,s,r),v=f.Jt,S=(I,C)=>{f.Qt?dv(c,v.ti,v.ii,v.ni,v.si,I,v.ei,[v.ht,0,0,v.ht],C):dv(c,v.ri,v.ii,v.ni,v.si,I,v.ei,[0,v.ht,v.ht,0],C)};return S(o,"transparent"),this.zt.hi&&(c.fillStyle=n,c.fillRect(v.ri,v.li,v.ai-v.ri,v.oi)),S("transparent",o),this.zt._i&&(c.fillStyle=i.A,c.fillRect(f.Qt?v.ui-v.ei:0,v.ii,v.ei,v.ci-v.ii)),f});e.useMediaCoordinateSpace(({context:l})=>{const c=a.di;l.font=i.R,l.textAlign=a.Qt?"right":"left",l.textBaseline="middle",l.fillStyle=n,l.fillText(this.zt.Zt,c.fi,(c.ii+c.ci)/2+c.vi)})}Gt(e,i,s,r){var n;const{context:o,bitmapSize:a,mediaSize:l,horizontalPixelRatio:c,verticalPixelRatio:f}=e,v=this.zt.hi||!this.zt.pi?i.T:0,S=this.zt.mi?i.C:0,I=i.L+this.Kt.bi,C=i.V+this.Kt.wi,D=i.B,J=i.I,V=this.zt.Zt,se=i.P,oe=s.gi(o,V),ee=Math.ceil(s.Mi(o,V)),_e=se+I+C,_=i.C+D+J+ee+v,Ee=Math.max(1,Math.floor(f));let Te=Math.round(_e*f);Te%2!=Ee%2&&(Te+=1);const Pe=S>0?Math.max(1,Math.floor(S*c)):0,Fe=Math.round(_*c),at=Math.round(v*c),Xe=(n=this.Kt.xi)!==null&&n!==void 0?n:this.Kt.Si,lt=Math.round(Xe*f)-Math.floor(.5*f),Dt=Math.floor(lt+Ee/2-Te/2),Ft=Dt+Te,Ze=r==="right",Le=Ze?l.width-S:S,et=Ze?a.width-Pe:Pe;let Bt,Jt,wt;return Ze?(Bt=et-Fe,Jt=et-at,wt=Le-v-D-S):(Bt=et+Fe,Jt=et+at,wt=Le+v+D),{Qt:Ze,Jt:{ii:Dt,li:lt,ci:Ft,ni:Fe,si:Te,ht:2*c,ei:Pe,ti:Bt,ri:et,ai:Jt,oi:Ee,ui:a.width},di:{ii:Dt/f,ci:Ft/f,fi:wt,vi:oe}}}}class oc{constructor(e){this.ki={Si:0,t:"#000",wi:0,bi:0},this.yi={Zt:"",yt:!1,hi:!0,pi:!1,At:"",O:"#FFF",_i:!1,mi:!1},this.Ci={Zt:"",yt:!1,hi:!1,pi:!0,At:"",O:"#FFF",_i:!0,mi:!0},this.ft=!0,this.Ti=new(e||uv)(this.yi,this.ki),this.Pi=new(e||uv)(this.Ci,this.ki)}Zt(){return this.Ri(),this.yi.Zt}Si(){return this.Ri(),this.ki.Si}bt(){this.ft=!0}Bt(e,i=!1){return Math.max(this.Ti.Bt(e,i),this.Pi.Bt(e,i))}Di(){return this.ki.xi||0}Oi(e){this.ki.xi=e}Ai(){return this.Ri(),this.yi.yt||this.Ci.yt}Vi(){return this.Ri(),this.yi.yt}gt(e){return this.Ri(),this.yi.hi=this.yi.hi&&e.W().ticksVisible,this.Ci.hi=this.Ci.hi&&e.W().ticksVisible,this.Ti.J(this.yi,this.ki),this.Pi.J(this.Ci,this.ki),this.Ti}Bi(){return this.Ri(),this.Ti.J(this.yi,this.ki),this.Pi.J(this.Ci,this.ki),this.Pi}Ri(){this.ft&&(this.yi.hi=!0,this.Ci.hi=!1,this.Ii(this.yi,this.Ci,this.ki))}}class p4 extends oc{constructor(e,i,s){super(),this.jt=e,this.zi=i,this.Li=s}Ii(e,i,s){if(e.yt=!1,this.jt.W().mode===2)return;const r=this.jt.W().horzLine;if(!r.labelVisible)return;const n=this.zi.Ct();if(!this.jt.yt()||this.zi.Ei()||n===null)return;const o=nc(r.labelBackgroundColor);s.t=o.t,e.O=o.i;const a=2/12*this.zi.P();s.bi=a,s.wi=a;const l=this.Li(this.zi);s.Si=l.Si,e.Zt=this.zi.Ni(l._t,n),e.yt=!0}}const g4=/[1-9]/g;class dS{constructor(){this.zt=null}J(e){this.zt=e}K(e,i){if(this.zt===null||this.zt.yt===!1||this.zt.Zt.length===0)return;const s=e.useMediaCoordinateSpace(({context:S})=>(S.font=i.R,Math.round(i.Fi.Mi(S,be(this.zt).Zt,g4))));if(s<=0)return;const r=i.Wi,n=s+2*r,o=n/2,a=this.zt.ji;let l=this.zt.Si,c=Math.floor(l-o)+.5;c<0?(l+=Math.abs(0-c),c=Math.floor(l-o)+.5):c+n>a&&(l-=Math.abs(a-(c+n)),c=Math.floor(l-o)+.5);const f=c+n,v=Math.ceil(0+i.C+i.T+i.L+i.P+i.V);e.useBitmapCoordinateSpace(({context:S,horizontalPixelRatio:I,verticalPixelRatio:C})=>{const D=be(this.zt);S.fillStyle=D.t;const J=Math.round(c*I),V=Math.round(0*C),se=Math.round(f*I),oe=Math.round(v*C),ee=Math.round(2*I);if(S.beginPath(),S.moveTo(J,V),S.lineTo(J,oe-ee),S.arcTo(J,oe,J+ee,oe,ee),S.lineTo(se-ee,oe),S.arcTo(se,oe,se,oe-ee,ee),S.lineTo(se,V),S.fill(),D.hi){const _e=Math.round(D.Si*I),_=V,Ee=Math.round((_+i.T)*C);S.fillStyle=D.O;const Te=Math.max(1,Math.floor(I)),Pe=Math.floor(.5*I);S.fillRect(_e-Pe,_,Te,Ee-_)}}),e.useMediaCoordinateSpace(({context:S})=>{const I=be(this.zt),C=0+i.C+i.T+i.L+i.P/2;S.font=i.R,S.textAlign="left",S.textBaseline="middle",S.fillStyle=I.O;const D=i.Fi.gi(S,"Apr0");S.translate(c+r,C+D),S.fillText(I.Zt,0,0)})}}class v4{constructor(e,i,s){this.ft=!0,this.Wt=new dS,this.Ft={yt:!1,t:"#4c525e",O:"white",Zt:"",ji:0,Si:NaN,hi:!0},this.vt=e,this.Hi=i,this.Li=s}bt(){this.ft=!0}gt(){return this.ft&&(this.Mt(),this.ft=!1),this.Wt.J(this.Ft),this.Wt}Mt(){const e=this.Ft;if(e.yt=!1,this.vt.W().mode===2)return;const i=this.vt.W().vertLine;if(!i.labelVisible)return;const s=this.Hi.St();if(s.Ei())return;e.ji=s.ji();const r=this.Li();if(r===null)return;e.Si=r.Si;const n=s.$i(this.vt.xt());e.Zt=s.Ui(be(n)),e.yt=!0;const o=nc(i.labelBackgroundColor);e.t=o.t,e.O=o.i,e.hi=s.W().ticksVisible}}class Am{constructor(){this.qi=null,this.Yi=0}Xi(){return this.Yi}Ki(e){this.Yi=e}Dt(){return this.qi}Zi(e){this.qi=e}Gi(e){return[]}Ji(){return[]}yt(){return!0}}var cv;(function(t){t[t.Normal=0]="Normal",t[t.Magnet=1]="Magnet",t[t.Hidden=2]="Hidden"})(cv||(cv={}));class y4 extends Am{constructor(e,i){super(),this.Qi=null,this.tn=NaN,this.nn=0,this.sn=!0,this.en=new Map,this.rn=!1,this.hn=NaN,this.ln=NaN,this.an=NaN,this.on=NaN,this.Hi=e,this._n=i,this.un=new c4(e,this),this.cn=((r,n)=>o=>{const a=n(),l=r();if(o===be(this.Qi).dn())return{_t:l,Si:a};{const c=be(o.Ct());return{_t:o.fn(a,c),Si:a}}})(()=>this.tn,()=>this.ln);const s=((r,n)=>()=>{const o=this.Hi.St().vn(r()),a=n();return o&&Number.isFinite(a)?{ot:o,Si:a}:null})(()=>this.nn,()=>this.Yt());this.pn=new v4(this,e,s),this.mn=new f4(this)}W(){return this._n}bn(e,i){this.an=e,this.on=i}wn(){this.an=NaN,this.on=NaN}gn(){return this.an}Mn(){return this.on}xn(e,i,s){this.rn||(this.rn=!0),this.sn=!0,this.Sn(e,i,s)}xt(){return this.nn}Yt(){return this.hn}Xt(){return this.ln}yt(){return this.sn}kn(){this.sn=!1,this.yn(),this.tn=NaN,this.hn=NaN,this.ln=NaN,this.Qi=null,this.wn()}Cn(e){return this.Qi!==null?[this.mn,this.un]:[]}Ut(e){return e===this.Qi&&this._n.horzLine.visible}qt(){return this._n.vertLine.visible}Tn(e,i){this.sn&&this.Qi===e||this.en.clear();const s=[];return this.Qi===e&&s.push(this.Pn(this.en,i,this.cn)),s}Ji(){return this.sn?[this.pn]:[]}Ht(){return this.Qi}Rn(){this.mn.bt(),this.en.forEach(e=>e.bt()),this.pn.bt(),this.un.bt()}Dn(e){return e&&!e.dn().Ei()?e.dn():null}Sn(e,i,s){this.On(e,i,s)&&this.Rn()}On(e,i,s){const r=this.hn,n=this.ln,o=this.tn,a=this.nn,l=this.Qi,c=this.Dn(s);this.nn=e,this.hn=isNaN(e)?NaN:this.Hi.St().It(e),this.Qi=s;const f=c!==null?c.Ct():null;return c!==null&&f!==null?(this.tn=i,this.ln=c.Rt(i,f)):(this.tn=NaN,this.ln=NaN),r!==this.hn||n!==this.ln||a!==this.nn||o!==this.tn||l!==this.Qi}yn(){const e=this.Hi.wt().map(s=>s.Vn().An()).filter(o4),i=e.length===0?null:Math.max(...e);this.nn=i!==null?i:NaN}Pn(e,i,s){let r=e.get(i);return r===void 0&&(r=new p4(this,i,s),e.set(i,r)),r}}function ac(t){return t==="left"||t==="right"}class Ii{constructor(e){this.Bn=new Map,this.In=[],this.zn=e}Ln(e,i){const s=function(r,n){return r===void 0?n:{En:Math.max(r.En,n.En),Nn:r.Nn||n.Nn}}(this.Bn.get(e),i);this.Bn.set(e,s)}Fn(){return this.zn}Wn(e){const i=this.Bn.get(e);return i===void 0?{En:this.zn}:{En:Math.max(this.zn,i.En),Nn:i.Nn}}jn(){this.Hn(),this.In=[{$n:0}]}Un(e){this.Hn(),this.In=[{$n:1,Ot:e}]}qn(e){this.Yn(),this.In.push({$n:5,Ot:e})}Hn(){this.Yn(),this.In.push({$n:6})}Xn(){this.Hn(),this.In=[{$n:4}]}Kn(e){this.Hn(),this.In.push({$n:2,Ot:e})}Zn(e){this.Hn(),this.In.push({$n:3,Ot:e})}Gn(){return this.In}Jn(e){for(const i of e.In)this.Qn(i);this.zn=Math.max(this.zn,e.zn),e.Bn.forEach((i,s)=>{this.Ln(s,i)})}static ts(){return new Ii(2)}static ns(){return new Ii(3)}Qn(e){switch(e.$n){case 0:this.jn();break;case 1:this.Un(e.Ot);break;case 2:this.Kn(e.Ot);break;case 3:this.Zn(e.Ot);break;case 4:this.Xn();break;case 5:this.qn(e.Ot);break;case 6:this.Yn()}}Yn(){const e=this.In.findIndex(i=>i.$n===5);e!==-1&&this.In.splice(e,1)}}const hv=".";function Ln(t,e){if(!an(t))return"n/a";if(!El(e))throw new TypeError("invalid length");if(e<0||e>16)throw new TypeError("invalid length");return e===0?t.toString():("0000000000000000"+t.toString()).slice(-e)}class lc{constructor(e,i){if(i||(i=1),an(e)&&El(e)||(e=100),e<0)throw new TypeError("invalid base");this.zi=e,this.ss=i,this.es()}format(e){const i=e<0?"":"";return e=Math.abs(e),i+this.rs(e)}es(){if(this.hs=0,this.zi>0&&this.ss>0){let e=this.zi;for(;e>1;)e/=10,this.hs++}}rs(e){const i=this.zi/this.ss;let s=Math.floor(e),r="";const n=this.hs!==void 0?this.hs:NaN;if(i>1){let o=+(Math.round(e*i)-s*i).toFixed(this.hs);o>=i&&(o-=i,s+=1),r=hv+Ln(+o.toFixed(this.hs)*this.ss,n)}else s=Math.round(s*i)/i,n>0&&(r=hv+Ln(0,n));return s.toFixed(0)+r}}class uS extends lc{constructor(e=100){super(e)}format(e){return`${super.format(e)}%`}}class _4{constructor(e){this.ls=e}format(e){let i="";return e<0&&(i="-",e=-e),e<995?i+this.os(e):e<999995?i+this.os(e/1e3)+"K":e<999999995?(e=1e3*Math.round(e/1e3),i+this.os(e/1e6)+"M"):(e=1e6*Math.round(e/1e6),i+this.os(e/1e9)+"B")}os(e){let i;const s=Math.pow(10,this.ls);return i=(e=Math.round(e*s)/s)>=1e-15&&e<1?e.toFixed(this.ls).replace(/\.?0+$/,""):String(e),i.replace(/(\.[1-9]*)0+$/,(r,n)=>n)}}function cS(t,e,i,s,r,n,o){if(e.length===0||s.from>=e.length||s.to<=0)return;const{context:a,horizontalPixelRatio:l,verticalPixelRatio:c}=t,f=e[s.from];let v=n(t,f),S=f;if(s.to-s.from<2){const I=r/2;a.beginPath();const C={nt:f.nt-I,st:f.st},D={nt:f.nt+I,st:f.st};a.moveTo(C.nt*l,C.st*c),a.lineTo(D.nt*l,D.st*c),o(t,v,C,D)}else{const I=(D,J)=>{o(t,v,S,J),a.beginPath(),v=D,S=J};let C=S;a.beginPath(),a.moveTo(f.nt*l,f.st*c);for(let D=s.from+1;D<s.to;++D){C=e[D];const J=n(t,C);switch(i){case 0:a.lineTo(C.nt*l,C.st*c);break;case 1:a.lineTo(C.nt*l,e[D-1].st*c),J!==v&&(I(J,C),a.lineTo(C.nt*l,e[D-1].st*c)),a.lineTo(C.nt*l,C.st*c);break;case 2:{const[V,se]=b4(e,D-1,D);a.bezierCurveTo(V.nt*l,V.st*c,se.nt*l,se.st*c,C.nt*l,C.st*c);break}}i!==1&&J!==v&&(I(J,C),a.moveTo(C.nt*l,C.st*c))}(S!==C||S===C&&i===1)&&o(t,v,S,C)}}const fv=6;function ah(t,e){return{nt:t.nt-e.nt,st:t.st-e.st}}function mv(t,e){return{nt:t.nt/e,st:t.st/e}}function b4(t,e,i){const s=Math.max(0,e-1),r=Math.min(t.length-1,i+1);var n,o;return[(n=t[e],o=mv(ah(t[i],t[s]),fv),{nt:n.nt+o.nt,st:n.st+o.st}),ah(t[i],mv(ah(t[r],t[e]),fv))]}function w4(t,e,i,s,r){const{context:n,horizontalPixelRatio:o,verticalPixelRatio:a}=e;n.lineTo(r.nt*o,t*a),n.lineTo(s.nt*o,t*a),n.closePath(),n.fillStyle=i,n.fill()}class hS extends Qs{constructor(){super(...arguments),this.G=null}J(e){this.G=e}Z(e){var i;if(this.G===null)return;const{it:s,tt:r,_s:n,et:o,Nt:a,us:l}=this.G,c=(i=this.G.cs)!==null&&i!==void 0?i:this.G.ds?0:e.mediaSize.height;if(r===null)return;const f=e.context;f.lineCap="butt",f.lineJoin="round",f.lineWidth=o,oo(f,a),f.lineWidth=1,cS(e,s,l,r,n,this.fs.bind(this),w4.bind(null,c))}}function ff(t,e,i){return Math.min(Math.max(t,e),i)}function Sd(t,e,i){return e-t<=i}function fS(t){const e=Math.ceil(t);return e%2==0?e-1:e}class Rm{vs(e,i){const s=this.ps,{bs:r,ws:n,gs:o,Ms:a,xs:l,cs:c}=i;if(this.Ss===void 0||s===void 0||s.bs!==r||s.ws!==n||s.gs!==o||s.Ms!==a||s.cs!==c||s.xs!==l){const f=e.context.createLinearGradient(0,0,0,l);if(f.addColorStop(0,r),c!=null){const v=ff(c*e.verticalPixelRatio/l,0,1);f.addColorStop(v,n),f.addColorStop(v,o)}f.addColorStop(1,a),this.Ss=f,this.ps=i}return this.Ss}}class S4 extends hS{constructor(){super(...arguments),this.ks=new Rm}fs(e,i){return this.ks.vs(e,{bs:i.ys,ws:"",gs:"",Ms:i.Cs,xs:e.bitmapSize.height})}}function T4(t,e){const i=t.context;i.strokeStyle=e,i.stroke()}class mS extends Qs{constructor(){super(...arguments),this.G=null}J(e){this.G=e}Z(e){if(this.G===null)return;const{it:i,tt:s,_s:r,us:n,et:o,Nt:a,Ts:l}=this.G;if(s===null)return;const c=e.context;c.lineCap="butt",c.lineWidth=o*e.verticalPixelRatio,oo(c,a),c.lineJoin="round";const f=this.Ps.bind(this);n!==void 0&&cS(e,i,n,s,r,f,T4),l&&function(v,S,I,C,D){const{horizontalPixelRatio:J,verticalPixelRatio:V,context:se}=v;let oe=null;const ee=Math.max(1,Math.floor(J))%2/2,_e=I*V+ee;for(let _=C.to-1;_>=C.from;--_){const Ee=S[_];if(Ee){const Te=D(v,Ee);Te!==oe&&(se.beginPath(),oe!==null&&se.fill(),se.fillStyle=Te,oe=Te);const Pe=Math.round(Ee.nt*J)+ee,Fe=Ee.st*V;se.moveTo(Pe,Fe),se.arc(Pe,Fe,_e,0,2*Math.PI)}}se.fill()}(e,i,l,s,f)}}class pS extends mS{Ps(e,i){return i.lt}}function gS(t,e,i,s,r=0,n=e.length){let o=n-r;for(;0<o;){const a=o>>1,l=r+a;s(e[l],i)===t?(r=l+1,o-=a+1):o=a}return r}const Ql=gS.bind(null,!0),vS=gS.bind(null,!1);function x4(t,e){return t.ot<e}function I4(t,e){return e<t.ot}function yS(t,e,i){const s=e.Rs(),r=e.ui(),n=Ql(t,s,x4),o=vS(t,r,I4);if(!i)return{from:n,to:o};let a=n,l=o;return n>0&&n<t.length&&t[n].ot>=s&&(a=n-1),o>0&&o<t.length&&t[o-1].ot<=r&&(l=o+1),{from:a,to:l}}class Mm{constructor(e,i,s){this.Ds=!0,this.Os=!0,this.As=!0,this.Vs=[],this.Bs=null,this.Is=e,this.zs=i,this.Ls=s}bt(e){this.Ds=!0,e==="data"&&(this.Os=!0),e==="options"&&(this.As=!0)}gt(){return this.Is.yt()?(this.Es(),this.Bs===null?null:this.Ns):null}Fs(){this.Vs=this.Vs.map(e=>Object.assign(Object.assign({},e),this.Is.js().Ws(e.ot)))}Hs(){this.Bs=null}Es(){this.Os&&(this.$s(),this.Os=!1),this.As&&(this.Fs(),this.As=!1),this.Ds&&(this.Us(),this.Ds=!1)}Us(){const e=this.Is.Dt(),i=this.zs.St();if(this.Hs(),i.Ei()||e.Ei())return;const s=i.qs();if(s===null||this.Is.Vn().Ys()===0)return;const r=this.Is.Ct();r!==null&&(this.Bs=yS(this.Vs,s,this.Ls),this.Xs(e,i,r.Ot),this.Ks())}}class dc extends Mm{constructor(e,i){super(e,i,!0)}Xs(e,i,s){i.Zs(this.Vs,Dl(this.Bs)),e.Gs(this.Vs,s,Dl(this.Bs))}Js(e,i){return{ot:e,_t:i,nt:NaN,st:NaN}}$s(){const e=this.Is.js();this.Vs=this.Is.Vn().Qs().map(i=>{const s=i.Ot[3];return this.te(i.ie,s,e)})}}class E4 extends dc{constructor(e,i){super(e,i),this.Ns=new Pm,this.ne=new S4,this.se=new pS,this.Ns.X([this.ne,this.se])}te(e,i,s){return Object.assign(Object.assign({},this.Js(e,i)),s.Ws(e))}Ks(){const e=this.Is.W();this.ne.J({us:e.lineType,it:this.Vs,Nt:e.lineStyle,et:e.lineWidth,cs:null,ds:e.invertFilledArea,tt:this.Bs,_s:this.zs.St().ee()}),this.se.J({us:e.lineVisible?e.lineType:void 0,it:this.Vs,Nt:e.lineStyle,et:e.lineWidth,tt:this.Bs,_s:this.zs.St().ee(),Ts:e.pointMarkersVisible?e.pointMarkersRadius||e.lineWidth/2+2:void 0})}}class D4 extends Qs{constructor(){super(...arguments),this.zt=null,this.re=0,this.he=0}J(e){this.zt=e}Z({context:e,horizontalPixelRatio:i,verticalPixelRatio:s}){if(this.zt===null||this.zt.Vn.length===0||this.zt.tt===null)return;this.re=this.le(i),this.re>=2&&Math.max(1,Math.floor(i))%2!=this.re%2&&this.re--,this.he=this.zt.ae?Math.min(this.re,Math.floor(i)):this.re;let r=null;const n=this.he<=this.re&&this.zt.ee>=Math.floor(1.5*i);for(let o=this.zt.tt.from;o<this.zt.tt.to;++o){const a=this.zt.Vn[o];r!==a.oe&&(e.fillStyle=a.oe,r=a.oe);const l=Math.floor(.5*this.he),c=Math.round(a.nt*i),f=c-l,v=this.he,S=f+v-1,I=Math.min(a._e,a.ue),C=Math.max(a._e,a.ue),D=Math.round(I*s)-l,J=Math.round(C*s)+l,V=Math.max(J-D,this.he);e.fillRect(f,D,v,V);const se=Math.ceil(1.5*this.re);if(n){if(this.zt.ce){const _=c-se;let Ee=Math.max(D,Math.round(a.de*s)-l),Te=Ee+v-1;Te>D+V-1&&(Te=D+V-1,Ee=Te-v+1),e.fillRect(_,Ee,f-_,Te-Ee+1)}const oe=c+se;let ee=Math.max(D,Math.round(a.fe*s)-l),_e=ee+v-1;_e>D+V-1&&(_e=D+V-1,ee=_e-v+1),e.fillRect(S+1,ee,oe-S,_e-ee+1)}}}le(e){const i=Math.floor(e);return Math.max(i,Math.floor(function(s,r){return Math.floor(.3*s*r)}(be(this.zt).ee,e)))}}class _S extends Mm{constructor(e,i){super(e,i,!1)}Xs(e,i,s){i.Zs(this.Vs,Dl(this.Bs)),e.ve(this.Vs,s,Dl(this.Bs))}pe(e,i,s){return{ot:e,me:i.Ot[0],be:i.Ot[1],we:i.Ot[2],ge:i.Ot[3],nt:NaN,de:NaN,_e:NaN,ue:NaN,fe:NaN}}$s(){const e=this.Is.js();this.Vs=this.Is.Vn().Qs().map(i=>this.te(i.ie,i,e))}}class k4 extends _S{constructor(){super(...arguments),this.Ns=new D4}te(e,i,s){return Object.assign(Object.assign({},this.pe(e,i,s)),s.Ws(e))}Ks(){const e=this.Is.W();this.Ns.J({Vn:this.Vs,ee:this.zs.St().ee(),ce:e.openVisible,ae:e.thinBars,tt:this.Bs})}}class C4 extends hS{constructor(){super(...arguments),this.ks=new Rm}fs(e,i){const s=this.G;return this.ks.vs(e,{bs:i.Me,ws:i.xe,gs:i.Se,Ms:i.ke,xs:e.bitmapSize.height,cs:s.cs})}}class P4 extends mS{constructor(){super(...arguments),this.ye=new Rm}Ps(e,i){const s=this.G;return this.ye.vs(e,{bs:i.Ce,ws:i.Ce,gs:i.Te,Ms:i.Te,xs:e.bitmapSize.height,cs:s.cs})}}class A4 extends dc{constructor(e,i){super(e,i),this.Ns=new Pm,this.Pe=new C4,this.Re=new P4,this.Ns.X([this.Pe,this.Re])}te(e,i,s){return Object.assign(Object.assign({},this.Js(e,i)),s.Ws(e))}Ks(){const e=this.Is.Ct();if(e===null)return;const i=this.Is.W(),s=this.Is.Dt().Rt(i.baseValue.price,e.Ot),r=this.zs.St().ee();this.Pe.J({it:this.Vs,et:i.lineWidth,Nt:i.lineStyle,us:i.lineType,cs:s,ds:!1,tt:this.Bs,_s:r}),this.Re.J({it:this.Vs,et:i.lineWidth,Nt:i.lineStyle,us:i.lineVisible?i.lineType:void 0,Ts:i.pointMarkersVisible?i.pointMarkersRadius||i.lineWidth/2+2:void 0,cs:s,tt:this.Bs,_s:r})}}class R4 extends Qs{constructor(){super(...arguments),this.zt=null,this.re=0}J(e){this.zt=e}Z(e){if(this.zt===null||this.zt.Vn.length===0||this.zt.tt===null)return;const{horizontalPixelRatio:i}=e;this.re=function(n,o){if(n>=2.5&&n<=4)return Math.floor(3*o);const a=1-.2*Math.atan(Math.max(4,n)-4)/(.5*Math.PI),l=Math.floor(n*a*o),c=Math.floor(n*o),f=Math.min(l,c);return Math.max(Math.floor(o),f)}(this.zt.ee,i),this.re>=2&&Math.floor(i)%2!=this.re%2&&this.re--;const s=this.zt.Vn;this.zt.De&&this.Oe(e,s,this.zt.tt),this.zt._i&&this.Ae(e,s,this.zt.tt);const r=this.Ve(i);(!this.zt._i||this.re>2*r)&&this.Be(e,s,this.zt.tt)}Oe(e,i,s){if(this.zt===null)return;const{context:r,horizontalPixelRatio:n,verticalPixelRatio:o}=e;let a="",l=Math.min(Math.floor(n),Math.floor(this.zt.ee*n));l=Math.max(Math.floor(n),Math.min(l,this.re));const c=Math.floor(.5*l);let f=null;for(let v=s.from;v<s.to;v++){const S=i[v];S.Ie!==a&&(r.fillStyle=S.Ie,a=S.Ie);const I=Math.round(Math.min(S.de,S.fe)*o),C=Math.round(Math.max(S.de,S.fe)*o),D=Math.round(S._e*o),J=Math.round(S.ue*o);let V=Math.round(n*S.nt)-c;const se=V+l-1;f!==null&&(V=Math.max(f+1,V),V=Math.min(V,se));const oe=se-V+1;r.fillRect(V,D,oe,I-D),r.fillRect(V,C+1,oe,J-C),f=se}}Ve(e){let i=Math.floor(1*e);this.re<=2*i&&(i=Math.floor(.5*(this.re-1)));const s=Math.max(Math.floor(e),i);return this.re<=2*s?Math.max(Math.floor(e),Math.floor(1*e)):s}Ae(e,i,s){if(this.zt===null)return;const{context:r,horizontalPixelRatio:n,verticalPixelRatio:o}=e;let a="";const l=this.Ve(n);let c=null;for(let f=s.from;f<s.to;f++){const v=i[f];v.ze!==a&&(r.fillStyle=v.ze,a=v.ze);let S=Math.round(v.nt*n)-Math.floor(.5*this.re);const I=S+this.re-1,C=Math.round(Math.min(v.de,v.fe)*o),D=Math.round(Math.max(v.de,v.fe)*o);if(c!==null&&(S=Math.max(c+1,S),S=Math.min(S,I)),this.zt.ee*n>2*l)m4(r,S,C,I-S+1,D-C+1,l);else{const J=I-S+1;r.fillRect(S,C,J,D-C+1)}c=I}}Be(e,i,s){if(this.zt===null)return;const{context:r,horizontalPixelRatio:n,verticalPixelRatio:o}=e;let a="";const l=this.Ve(n);for(let c=s.from;c<s.to;c++){const f=i[c];let v=Math.round(Math.min(f.de,f.fe)*o),S=Math.round(Math.max(f.de,f.fe)*o),I=Math.round(f.nt*n)-Math.floor(.5*this.re),C=I+this.re-1;if(f.oe!==a){const D=f.oe;r.fillStyle=D,a=D}this.zt._i&&(I+=l,v+=l,C-=l,S-=l),v>S||r.fillRect(I,v,C-I+1,S-v+1)}}}class M4 extends _S{constructor(){super(...arguments),this.Ns=new R4}te(e,i,s){return Object.assign(Object.assign({},this.pe(e,i,s)),s.Ws(e))}Ks(){const e=this.Is.W();this.Ns.J({Vn:this.Vs,ee:this.zs.St().ee(),De:e.wickVisible,_i:e.borderVisible,tt:this.Bs})}}class O4{constructor(e,i){this.Le=e,this.zi=i}K(e,i,s){this.Le.draw(e,this.zi,i,s)}}class lh extends Mm{constructor(e,i,s){super(e,i,!1),this.mn=s,this.Ns=new O4(this.mn.renderer(),r=>{const n=e.Ct();return n===null?null:e.Dt().Rt(r,n.Ot)})}Ee(e){return this.mn.priceValueBuilder(e)}Ne(e){return this.mn.isWhitespace(e)}$s(){const e=this.Is.js();this.Vs=this.Is.Vn().Qs().map(i=>Object.assign(Object.assign({ot:i.ie,nt:NaN},e.Ws(i.ie)),{Fe:i.We}))}Xs(e,i){i.Zs(this.Vs,Dl(this.Bs))}Ks(){this.mn.update({bars:this.Vs.map($4),barSpacing:this.zs.St().ee(),visibleRange:this.Bs},this.Is.W())}}function $4(t){return{x:t.nt,time:t.ot,originalData:t.Fe,barColor:t.oe}}class N4 extends Qs{constructor(){super(...arguments),this.zt=null,this.je=[]}J(e){this.zt=e,this.je=[]}Z({context:e,horizontalPixelRatio:i,verticalPixelRatio:s}){if(this.zt===null||this.zt.it.length===0||this.zt.tt===null)return;this.je.length||this.He(i);const r=Math.max(1,Math.floor(s)),n=Math.round(this.zt.$e*s)-Math.floor(r/2),o=n+r;for(let a=this.zt.tt.from;a<this.zt.tt.to;a++){const l=this.zt.it[a],c=this.je[a-this.zt.tt.from],f=Math.round(l.st*s);let v,S;e.fillStyle=l.oe,f<=n?(v=f,S=o):(v=n,S=f-Math.floor(r/2)+r),e.fillRect(c.Rs,v,c.ui-c.Rs+1,S-v)}}He(e){if(this.zt===null||this.zt.it.length===0||this.zt.tt===null)return void(this.je=[]);const i=Math.ceil(this.zt.ee*e)<=1?0:Math.max(1,Math.floor(e)),s=Math.round(this.zt.ee*e)-i;this.je=new Array(this.zt.tt.to-this.zt.tt.from);for(let n=this.zt.tt.from;n<this.zt.tt.to;n++){const o=this.zt.it[n],a=Math.round(o.nt*e);let l,c;if(s%2){const f=(s-1)/2;l=a-f,c=a+f}else{const f=s/2;l=a-f,c=a+f-1}this.je[n-this.zt.tt.from]={Rs:l,ui:c,Ue:a,qe:o.nt*e,ot:o.ot}}for(let n=this.zt.tt.from+1;n<this.zt.tt.to;n++){const o=this.je[n-this.zt.tt.from],a=this.je[n-this.zt.tt.from-1];o.ot===a.ot+1&&o.Rs-a.ui!==i+1&&(a.Ue>a.qe?a.ui=o.Rs-i-1:o.Rs=a.ui+i+1)}let r=Math.ceil(this.zt.ee*e);for(let n=this.zt.tt.from;n<this.zt.tt.to;n++){const o=this.je[n-this.zt.tt.from];o.ui<o.Rs&&(o.ui=o.Rs);const a=o.ui-o.Rs+1;r=Math.min(a,r)}if(i>0&&r<4)for(let n=this.zt.tt.from;n<this.zt.tt.to;n++){const o=this.je[n-this.zt.tt.from];o.ui-o.Rs+1>r&&(o.Ue>o.qe?o.ui-=1:o.Rs+=1)}}}class L4 extends dc{constructor(){super(...arguments),this.Ns=new N4}te(e,i,s){return Object.assign(Object.assign({},this.Js(e,i)),s.Ws(e))}Ks(){const e={it:this.Vs,ee:this.zs.St().ee(),tt:this.Bs,$e:this.Is.Dt().Rt(this.Is.W().base,be(this.Is.Ct()).Ot)};this.Ns.J(e)}}class V4 extends dc{constructor(){super(...arguments),this.Ns=new pS}te(e,i,s){return Object.assign(Object.assign({},this.Js(e,i)),s.Ws(e))}Ks(){const e=this.Is.W(),i={it:this.Vs,Nt:e.lineStyle,us:e.lineVisible?e.lineType:void 0,et:e.lineWidth,Ts:e.pointMarkersVisible?e.pointMarkersRadius||e.lineWidth/2+2:void 0,tt:this.Bs,_s:this.zs.St().ee()};this.Ns.J(i)}}const W4=/[2-9]/g;class kl{constructor(e=50){this.Ye=0,this.Xe=1,this.Ke=1,this.Ze={},this.Ge=new Map,this.Je=e}Qe(){this.Ye=0,this.Ge.clear(),this.Xe=1,this.Ke=1,this.Ze={}}Mi(e,i,s){return this.tr(e,i,s).width}gi(e,i,s){const r=this.tr(e,i,s);return((r.actualBoundingBoxAscent||0)-(r.actualBoundingBoxDescent||0))/2}tr(e,i,s){const r=s||W4,n=String(i).replace(r,"0");if(this.Ge.has(n))return Yi(this.Ge.get(n)).ir;if(this.Ye===this.Je){const a=this.Ze[this.Ke];delete this.Ze[this.Ke],this.Ge.delete(a),this.Ke++,this.Ye--}e.save(),e.textBaseline="middle";const o=e.measureText(n);return e.restore(),o.width===0&&i.length||(this.Ge.set(n,{ir:o,nr:this.Xe}),this.Ze[this.Xe]=n,this.Ye++,this.Xe++),o}}class F4{constructor(e){this.sr=null,this.k=null,this.er="right",this.rr=e}hr(e,i,s){this.sr=e,this.k=i,this.er=s}K(e){this.k!==null&&this.sr!==null&&this.sr.K(e,this.k,this.rr,this.er)}}class bS{constructor(e,i,s){this.lr=e,this.rr=new kl(50),this.ar=i,this.F=s,this.j=-1,this.Wt=new F4(this.rr)}gt(){const e=this.F._r(this.ar);if(e===null)return null;const i=e.ur(this.ar)?e.cr():this.ar.Dt();if(i===null)return null;const s=e.dr(i);if(s==="overlay")return null;const r=this.F.vr();return r.P!==this.j&&(this.j=r.P,this.rr.Qe()),this.Wt.hr(this.lr.Bi(),r,s),this.Wt}}class B4 extends Qs{constructor(){super(...arguments),this.zt=null}J(e){this.zt=e}pr(e,i){var s;if(!(!((s=this.zt)===null||s===void 0)&&s.yt))return null;const{st:r,et:n,mr:o}=this.zt;return i>=r-n-7&&i<=r+n+7?{br:this.zt,mr:o}:null}Z({context:e,bitmapSize:i,horizontalPixelRatio:s,verticalPixelRatio:r}){if(this.zt===null||this.zt.yt===!1)return;const n=Math.round(this.zt.st*r);n<0||n>i.height||(e.lineCap="butt",e.strokeStyle=this.zt.O,e.lineWidth=Math.floor(this.zt.et*s),oo(e,this.zt.Nt),oS(e,n,0,i.width))}}class Om{constructor(e){this.wr={st:0,O:"rgba(0, 0, 0, 0)",et:1,Nt:0,yt:!1},this.gr=new B4,this.ft=!0,this.Is=e,this.zs=e.$t(),this.gr.J(this.wr)}bt(){this.ft=!0}gt(){return this.Is.yt()?(this.ft&&(this.Mr(),this.ft=!1),this.gr):null}}class z4 extends Om{constructor(e){super(e)}Mr(){this.wr.yt=!1;const e=this.Is.Dt(),i=e.Sr().Sr;if(i!==2&&i!==3)return;const s=this.Is.W();if(!s.baseLineVisible||!this.Is.yt())return;const r=this.Is.Ct();r!==null&&(this.wr.yt=!0,this.wr.st=e.Rt(r.Ot,r.Ot),this.wr.O=s.baseLineColor,this.wr.et=s.baseLineWidth,this.wr.Nt=s.baseLineStyle)}}class j4 extends Qs{constructor(){super(...arguments),this.zt=null}J(e){this.zt=e}We(){return this.zt}Z({context:e,horizontalPixelRatio:i,verticalPixelRatio:s}){const r=this.zt;if(r===null)return;const n=Math.max(1,Math.floor(i)),o=n%2/2,a=Math.round(r.qe.x*i)+o,l=r.qe.y*s;e.fillStyle=r.kr,e.beginPath();const c=Math.max(2,1.5*r.yr)*i;e.arc(a,l,c,0,2*Math.PI,!1),e.fill(),e.fillStyle=r.Cr,e.beginPath(),e.arc(a,l,r.ht*i,0,2*Math.PI,!1),e.fill(),e.lineWidth=n,e.strokeStyle=r.Tr,e.beginPath(),e.arc(a,l,r.ht*i+n/2,0,2*Math.PI,!1),e.stroke()}}const H4=[{Pr:0,Rr:.25,Dr:4,Or:10,Ar:.25,Vr:0,Br:.4,Ir:.8},{Pr:.25,Rr:.525,Dr:10,Or:14,Ar:0,Vr:0,Br:.8,Ir:0},{Pr:.525,Rr:1,Dr:14,Or:14,Ar:0,Vr:0,Br:0,Ir:0}];function pv(t,e,i,s){return function(r,n){if(r==="transparent")return r;const o=_u(r),a=o[3];return`rgba(${o[0]}, ${o[1]}, ${o[2]}, ${n*a})`}(t,i+(s-i)*e)}function gv(t,e){const i=t%2600/2600;let s;for(const l of H4)if(i>=l.Pr&&i<=l.Rr){s=l;break}br(s!==void 0,"Last price animation internal logic error");const r=(i-s.Pr)/(s.Rr-s.Pr);return{Cr:pv(e,r,s.Ar,s.Vr),Tr:pv(e,r,s.Br,s.Ir),ht:(n=r,o=s.Dr,a=s.Or,o+(a-o)*n)};var n,o,a}class U4{constructor(e){this.Wt=new j4,this.ft=!0,this.zr=!0,this.Lr=performance.now(),this.Er=this.Lr-1,this.Nr=e}Fr(){this.Er=this.Lr-1,this.bt()}Wr(){if(this.bt(),this.Nr.W().lastPriceAnimation===2){const e=performance.now(),i=this.Er-e;if(i>0)return void(i<650&&(this.Er+=2600));this.Lr=e,this.Er=e+2600}}bt(){this.ft=!0}jr(){this.zr=!0}yt(){return this.Nr.W().lastPriceAnimation!==0}Hr(){switch(this.Nr.W().lastPriceAnimation){case 0:return!1;case 1:return!0;case 2:return performance.now()<=this.Er}}gt(){return this.ft?(this.Mt(),this.ft=!1,this.zr=!1):this.zr&&(this.$r(),this.zr=!1),this.Wt}Mt(){this.Wt.J(null);const e=this.Nr.$t().St(),i=e.qs(),s=this.Nr.Ct();if(i===null||s===null)return;const r=this.Nr.Ur(!0);if(r.qr||!i.Yr(r.ie))return;const n={x:e.It(r.ie),y:this.Nr.Dt().Rt(r._t,s.Ot)},o=r.O,a=this.Nr.W().lineWidth,l=gv(this.Xr(),o);this.Wt.J({kr:o,yr:a,Cr:l.Cr,Tr:l.Tr,ht:l.ht,qe:n})}$r(){const e=this.Wt.We();if(e!==null){const i=gv(this.Xr(),e.kr);e.Cr=i.Cr,e.Tr=i.Tr,e.ht=i.ht}}Xr(){return this.Hr()?performance.now()-this.Lr:2599}}function nl(t,e){return fS(Math.min(Math.max(t,12),30)*e)}function Cl(t,e){switch(t){case"arrowDown":case"arrowUp":return nl(e,1);case"circle":return nl(e,.8);case"square":return nl(e,.7)}}function wS(t){return function(e){const i=Math.ceil(e);return i%2!=0?i-1:i}(nl(t,1))}function vv(t){return Math.max(nl(t,.1),3)}function SS(t,e,i,s,r){const n=Cl("square",i),o=(n-1)/2,a=t-o,l=e-o;return s>=a&&s<=a+n&&r>=l&&r<=l+n}function yv(t,e,i,s){const r=(Cl("arrowUp",s)-1)/2*i.Kr,n=(fS(s/2)-1)/2*i.Kr;e.beginPath(),t?(e.moveTo(i.nt-r,i.st),e.lineTo(i.nt,i.st-r),e.lineTo(i.nt+r,i.st),e.lineTo(i.nt+n,i.st),e.lineTo(i.nt+n,i.st+r),e.lineTo(i.nt-n,i.st+r),e.lineTo(i.nt-n,i.st)):(e.moveTo(i.nt-r,i.st),e.lineTo(i.nt,i.st+r),e.lineTo(i.nt+r,i.st),e.lineTo(i.nt+n,i.st),e.lineTo(i.nt+n,i.st-r),e.lineTo(i.nt-n,i.st-r),e.lineTo(i.nt-n,i.st)),e.fill()}function G4(t,e,i,s,r,n){return SS(e,i,s,r,n)}class Y4 extends Qs{constructor(){super(...arguments),this.zt=null,this.rr=new kl,this.j=-1,this.H="",this.Zr=""}J(e){this.zt=e}hr(e,i){this.j===e&&this.H===i||(this.j=e,this.H=i,this.Zr=ra(e,i),this.rr.Qe())}pr(e,i){if(this.zt===null||this.zt.tt===null)return null;for(let s=this.zt.tt.from;s<this.zt.tt.to;s++){const r=this.zt.it[s];if(K4(r,e,i))return{br:r.Gr,mr:r.mr}}return null}Z({context:e,horizontalPixelRatio:i,verticalPixelRatio:s},r,n){if(this.zt!==null&&this.zt.tt!==null){e.textBaseline="middle",e.font=this.Zr;for(let o=this.zt.tt.from;o<this.zt.tt.to;o++){const a=this.zt.it[o];a.Zt!==void 0&&(a.Zt.ji=this.rr.Mi(e,a.Zt.Jr),a.Zt.Bt=this.j,a.Zt.nt=a.nt-a.Zt.ji/2),q4(a,e,i,s)}}}}function q4(t,e,i,s){e.fillStyle=t.O,t.Zt!==void 0&&function(r,n,o,a,l,c){r.save(),r.scale(l,c),r.fillText(n,o,a),r.restore()}(e,t.Zt.Jr,t.Zt.nt,t.Zt.st,i,s),function(r,n,o){if(r.Ys!==0){switch(r.Qr){case"arrowDown":return void yv(!1,n,o,r.Ys);case"arrowUp":return void yv(!0,n,o,r.Ys);case"circle":return void function(a,l,c){const f=(Cl("circle",c)-1)/2;a.beginPath(),a.arc(l.nt,l.st,f*l.Kr,0,2*Math.PI,!1),a.fill()}(n,o,r.Ys);case"square":return void function(a,l,c){const f=Cl("square",c),v=(f-1)*l.Kr/2,S=l.nt-v,I=l.st-v;a.fillRect(S,I,f*l.Kr,f*l.Kr)}(n,o,r.Ys)}r.Qr}}(t,e,function(r,n,o){const a=Math.max(1,Math.floor(n))%2/2;return{nt:Math.round(r.nt*n)+a,st:r.st*o,Kr:n}}(t,i,s))}function K4(t,e,i){return!(t.Zt===void 0||!function(s,r,n,o,a,l){const c=o/2;return a>=s&&a<=s+n&&l>=r-c&&l<=r+c}(t.Zt.nt,t.Zt.st,t.Zt.ji,t.Zt.Bt,e,i))||function(s,r,n){if(s.Ys===0)return!1;switch(s.Qr){case"arrowDown":case"arrowUp":return G4(0,s.nt,s.st,s.Ys,r,n);case"circle":return function(o,a,l,c,f){const v=2+Cl("circle",l)/2,S=o-c,I=a-f;return Math.sqrt(S*S+I*I)<=v}(s.nt,s.st,s.Ys,r,n);case"square":return SS(s.nt,s.st,s.Ys,r,n)}}(t,e,i)}function J4(t,e,i,s,r,n,o,a,l){const c=an(i)?i:i.ge,f=an(i)?i:i.be,v=an(i)?i:i.we,S=an(e.size)?Math.max(e.size,0):1,I=wS(a.ee())*S,C=I/2;switch(t.Ys=I,e.position){case"inBar":return t.st=o.Rt(c,l),void(t.Zt!==void 0&&(t.Zt.st=t.st+C+n+.6*r));case"aboveBar":return t.st=o.Rt(f,l)-C-s.th,t.Zt!==void 0&&(t.Zt.st=t.st-C-.6*r,s.th+=1.2*r),void(s.th+=I+n);case"belowBar":return t.st=o.Rt(v,l)+C+s.ih,t.Zt!==void 0&&(t.Zt.st=t.st+C+n+.6*r,s.ih+=1.2*r),void(s.ih+=I+n)}e.position}class Q4{constructor(e,i){this.ft=!0,this.nh=!0,this.sh=!0,this.eh=null,this.Wt=new Y4,this.Nr=e,this.Hi=i,this.zt={it:[],tt:null}}bt(e){this.ft=!0,this.sh=!0,e==="data"&&(this.nh=!0)}gt(e){if(!this.Nr.yt())return null;this.ft&&this.rh();const i=this.Hi.W().layout;return this.Wt.hr(i.fontSize,i.fontFamily),this.Wt.J(this.zt),this.Wt}hh(){if(this.sh){if(this.Nr.lh().length>0){const e=this.Hi.St().ee(),i=vv(e),s=1.5*wS(e)+2*i;this.eh={above:s,below:s}}else this.eh=null;this.sh=!1}return this.eh}rh(){const e=this.Nr.Dt(),i=this.Hi.St(),s=this.Nr.lh();this.nh&&(this.zt.it=s.map(f=>({ot:f.time,nt:0,st:0,Ys:0,Qr:f.shape,O:f.color,Gr:f.Gr,mr:f.id,Zt:void 0})),this.nh=!1);const r=this.Hi.W().layout;this.zt.tt=null;const n=i.qs();if(n===null)return;const o=this.Nr.Ct();if(o===null||this.zt.it.length===0)return;let a=NaN;const l=vv(i.ee()),c={th:l,ih:l};this.zt.tt=yS(this.zt.it,n,!0);for(let f=this.zt.tt.from;f<this.zt.tt.to;f++){const v=s[f];v.time!==a&&(c.th=l,c.ih=l,a=v.time);const S=this.zt.it[f];S.nt=i.It(v.time),v.text!==void 0&&v.text.length>0&&(S.Zt={Jr:v.text,nt:0,st:0,ji:0,Bt:0});const I=this.Nr.ah(v.time);I!==null&&J4(S,v,I,c,r.fontSize,l,e,i,o.Ot)}this.ft=!1}}class Z4 extends Om{constructor(e){super(e)}Mr(){const e=this.wr;e.yt=!1;const i=this.Is.W();if(!i.priceLineVisible||!this.Is.yt())return;const s=this.Is.Ur(i.priceLineSource===0);s.qr||(e.yt=!0,e.st=s.Si,e.O=this.Is.oh(s.O),e.et=i.priceLineWidth,e.Nt=i.priceLineStyle)}}class X4 extends oc{constructor(e){super(),this.jt=e}Ii(e,i,s){e.yt=!1,i.yt=!1;const r=this.jt;if(!r.yt())return;const n=r.W(),o=n.lastValueVisible,a=r._h()!=="",l=n.seriesLastValueMode===0,c=r.Ur(!1);if(c.qr)return;o&&(e.Zt=this.uh(c,o,l),e.yt=e.Zt.length!==0),(a||l)&&(i.Zt=this.dh(c,o,a,l),i.yt=i.Zt.length>0);const f=r.oh(c.O),v=nc(f);s.t=v.t,s.Si=c.Si,i.At=r.$t().Vt(c.Si/r.Dt().Bt()),e.At=f,e.O=v.i,i.O=v.i}dh(e,i,s,r){let n="";const o=this.jt._h();return s&&o.length!==0&&(n+=`${o} `),i&&r&&(n+=this.jt.Dt().fh()?e.ph:e.mh),n.trim()}uh(e,i,s){return i?s?this.jt.Dt().fh()?e.mh:e.ph:e.Zt:""}}function _v(t,e,i,s){const r=Number.isFinite(e),n=Number.isFinite(i);return r&&n?t(e,i):r||n?r?e:i:s}class es{constructor(e,i){this.bh=e,this.wh=i}gh(e){return e!==null&&this.bh===e.bh&&this.wh===e.wh}Mh(){return new es(this.bh,this.wh)}xh(){return this.bh}Sh(){return this.wh}kh(){return this.wh-this.bh}Ei(){return this.wh===this.bh||Number.isNaN(this.wh)||Number.isNaN(this.bh)}Jn(e){return e===null?this:new es(_v(Math.min,this.xh(),e.xh(),-1/0),_v(Math.max,this.Sh(),e.Sh(),1/0))}yh(e){if(!an(e)||this.wh-this.bh===0)return;const i=.5*(this.wh+this.bh);let s=this.wh-i,r=this.bh-i;s*=e,r*=e,this.wh=i+s,this.bh=i+r}Ch(e){an(e)&&(this.wh+=e,this.bh+=e)}Th(){return{minValue:this.bh,maxValue:this.wh}}static Ph(e){return e===null?null:new es(e.minValue,e.maxValue)}}class bu{constructor(e,i){this.Rh=e,this.Dh=i||null}Oh(){return this.Rh}Ah(){return this.Dh}Th(){return this.Rh===null?null:{priceRange:this.Rh.Th(),margins:this.Dh||void 0}}static Ph(e){return e===null?null:new bu(es.Ph(e.priceRange),e.margins)}}class eB extends Om{constructor(e,i){super(e),this.Vh=i}Mr(){const e=this.wr;e.yt=!1;const i=this.Vh.W();if(!this.Is.yt()||!i.lineVisible)return;const s=this.Vh.Bh();s!==null&&(e.yt=!0,e.st=s,e.O=i.color,e.et=i.lineWidth,e.Nt=i.lineStyle,e.mr=this.Vh.W().id)}}class tB extends oc{constructor(e,i){super(),this.Nr=e,this.Vh=i}Ii(e,i,s){e.yt=!1,i.yt=!1;const r=this.Vh.W(),n=r.axisLabelVisible,o=r.title!=="",a=this.Nr;if(!n||!a.yt())return;const l=this.Vh.Bh();if(l===null)return;o&&(i.Zt=r.title,i.yt=!0),i.At=a.$t().Vt(l/a.Dt().Bt()),e.Zt=this.Ih(r.price),e.yt=!0;const c=nc(r.axisLabelColor||r.color);s.t=c.t;const f=r.axisLabelTextColor||c.i;e.O=f,i.O=f,s.Si=l}Ih(e){const i=this.Nr.Ct();return i===null?"":this.Nr.Dt().Ni(e,i.Ot)}}class iB{constructor(e,i){this.Nr=e,this._n=i,this.zh=new eB(e,this),this.lr=new tB(e,this),this.Lh=new bS(this.lr,e,e.$t())}Eh(e){Us(this._n,e),this.bt(),this.Nr.$t().Nh()}W(){return this._n}Fh(){return this.zh}Wh(){return this.Lh}jh(){return this.lr}bt(){this.zh.bt(),this.lr.bt()}Bh(){const e=this.Nr,i=e.Dt();if(e.$t().St().Ei()||i.Ei())return null;const s=e.Ct();return s===null?null:i.Rt(this._n.price,s.Ot)}}class sB extends Am{constructor(e){super(),this.Hi=e}$t(){return this.Hi}}const nB={Bar:(t,e,i,s)=>{var r;const n=e.upColor,o=e.downColor,a=be(t(i,s)),l=Fo(a.Ot[0])<=Fo(a.Ot[3]);return{oe:(r=a.O)!==null&&r!==void 0?r:l?n:o}},Candlestick:(t,e,i,s)=>{var r,n,o;const a=e.upColor,l=e.downColor,c=e.borderUpColor,f=e.borderDownColor,v=e.wickUpColor,S=e.wickDownColor,I=be(t(i,s)),C=Fo(I.Ot[0])<=Fo(I.Ot[3]);return{oe:(r=I.O)!==null&&r!==void 0?r:C?a:l,ze:(n=I.At)!==null&&n!==void 0?n:C?c:f,Ie:(o=I.Hh)!==null&&o!==void 0?o:C?v:S}},Custom:(t,e,i,s)=>{var r;return{oe:(r=be(t(i,s)).O)!==null&&r!==void 0?r:e.color}},Area:(t,e,i,s)=>{var r,n,o,a;const l=be(t(i,s));return{oe:(r=l.lt)!==null&&r!==void 0?r:e.lineColor,lt:(n=l.lt)!==null&&n!==void 0?n:e.lineColor,ys:(o=l.ys)!==null&&o!==void 0?o:e.topColor,Cs:(a=l.Cs)!==null&&a!==void 0?a:e.bottomColor}},Baseline:(t,e,i,s)=>{var r,n,o,a,l,c;const f=be(t(i,s));return{oe:f.Ot[3]>=e.baseValue.price?e.topLineColor:e.bottomLineColor,Ce:(r=f.Ce)!==null&&r!==void 0?r:e.topLineColor,Te:(n=f.Te)!==null&&n!==void 0?n:e.bottomLineColor,Me:(o=f.Me)!==null&&o!==void 0?o:e.topFillColor1,xe:(a=f.xe)!==null&&a!==void 0?a:e.topFillColor2,Se:(l=f.Se)!==null&&l!==void 0?l:e.bottomFillColor1,ke:(c=f.ke)!==null&&c!==void 0?c:e.bottomFillColor2}},Line:(t,e,i,s)=>{var r,n;const o=be(t(i,s));return{oe:(r=o.O)!==null&&r!==void 0?r:e.color,lt:(n=o.O)!==null&&n!==void 0?n:e.color}},Histogram:(t,e,i,s)=>{var r;return{oe:(r=be(t(i,s)).O)!==null&&r!==void 0?r:e.color}}};class rB{constructor(e){this.$h=(i,s)=>s!==void 0?s.Ot:this.Nr.Vn().Uh(i),this.Nr=e,this.qh=nB[e.Yh()]}Ws(e,i){return this.qh(this.$h,this.Nr.W(),e,i)}}var bv;(function(t){t[t.NearestLeft=-1]="NearestLeft",t[t.None=0]="None",t[t.NearestRight=1]="NearestRight"})(bv||(bv={}));const Xn=30;class oB{constructor(){this.Xh=[],this.Kh=new Map,this.Zh=new Map}Gh(){return this.Ys()>0?this.Xh[this.Xh.length-1]:null}Jh(){return this.Ys()>0?this.Qh(0):null}An(){return this.Ys()>0?this.Qh(this.Xh.length-1):null}Ys(){return this.Xh.length}Ei(){return this.Ys()===0}Yr(e){return this.tl(e,0)!==null}Uh(e){return this.il(e)}il(e,i=0){const s=this.tl(e,i);return s===null?null:Object.assign(Object.assign({},this.nl(s)),{ie:this.Qh(s)})}Qs(){return this.Xh}sl(e,i,s){if(this.Ei())return null;let r=null;for(const n of s)r=Td(r,this.el(e,i,n));return r}J(e){this.Zh.clear(),this.Kh.clear(),this.Xh=e}Qh(e){return this.Xh[e].ie}nl(e){return this.Xh[e]}tl(e,i){const s=this.rl(e);if(s===null&&i!==0)switch(i){case-1:return this.hl(e);case 1:return this.ll(e);default:throw new TypeError("Unknown search mode")}return s}hl(e){let i=this.al(e);return i>0&&(i-=1),i!==this.Xh.length&&this.Qh(i)<e?i:null}ll(e){const i=this.ol(e);return i!==this.Xh.length&&e<this.Qh(i)?i:null}rl(e){const i=this.al(e);return i===this.Xh.length||e<this.Xh[i].ie?null:i}al(e){return Ql(this.Xh,e,(i,s)=>i.ie<s)}ol(e){return vS(this.Xh,e,(i,s)=>i.ie>s)}_l(e,i,s){let r=null;for(let n=e;n<i;n++){const o=this.Xh[n].Ot[s];Number.isNaN(o)||(r===null?r={ul:o,cl:o}:(o<r.ul&&(r.ul=o),o>r.cl&&(r.cl=o)))}return r}el(e,i,s){if(this.Ei())return null;let r=null;const n=be(this.Jh()),o=be(this.An()),a=Math.max(e,n),l=Math.min(i,o),c=Math.ceil(a/Xn)*Xn,f=Math.max(c,Math.floor(l/Xn)*Xn);{const S=this.al(a),I=this.ol(Math.min(l,c,i));r=Td(r,this._l(S,I,s))}let v=this.Kh.get(s);v===void 0&&(v=new Map,this.Kh.set(s,v));for(let S=Math.max(c+1,a);S<f;S+=Xn){const I=Math.floor(S/Xn);let C=v.get(I);if(C===void 0){const D=this.al(I*Xn),J=this.ol((I+1)*Xn-1);C=this._l(D,J,s),v.set(I,C)}r=Td(r,C)}{const S=this.al(f),I=this.ol(l);r=Td(r,this._l(S,I,s))}return r}}function Td(t,e){return t===null?e:e===null?t:{ul:Math.min(t.ul,e.ul),cl:Math.max(t.cl,e.cl)}}class aB{constructor(e){this.dl=e}K(e,i,s){this.dl.draw(e)}fl(e,i,s){var r,n;(n=(r=this.dl).drawBackground)===null||n===void 0||n.call(r,e)}}class dh{constructor(e){this.Ge=null,this.mn=e}gt(){var e;const i=this.mn.renderer();if(i===null)return null;if(((e=this.Ge)===null||e===void 0?void 0:e.vl)===i)return this.Ge.pl;const s=new aB(i);return this.Ge={vl:i,pl:s},s}ml(){var e,i,s;return(s=(i=(e=this.mn).zOrder)===null||i===void 0?void 0:i.call(e))!==null&&s!==void 0?s:"normal"}}function TS(t){var e,i,s,r,n;return{Zt:t.text(),Si:t.coordinate(),xi:(e=t.fixedCoordinate)===null||e===void 0?void 0:e.call(t),O:t.textColor(),t:t.backColor(),yt:(s=(i=t.visible)===null||i===void 0?void 0:i.call(t))===null||s===void 0||s,hi:(n=(r=t.tickVisible)===null||r===void 0?void 0:r.call(t))===null||n===void 0||n}}class lB{constructor(e,i){this.Wt=new dS,this.bl=e,this.wl=i}gt(){return this.Wt.J(Object.assign({ji:this.wl.ji()},TS(this.bl))),this.Wt}}class dB extends oc{constructor(e,i){super(),this.bl=e,this.zi=i}Ii(e,i,s){const r=TS(this.bl);s.t=r.t,e.O=r.O;const n=2/12*this.zi.P();s.bi=n,s.wi=n,s.Si=r.Si,s.xi=r.xi,e.Zt=r.Zt,e.yt=r.yt,e.hi=r.hi}}class uB{constructor(e,i){this.gl=null,this.Ml=null,this.xl=null,this.Sl=null,this.kl=null,this.yl=e,this.Nr=i}Cl(){return this.yl}Rn(){var e,i;(i=(e=this.yl).updateAllViews)===null||i===void 0||i.call(e)}Cn(){var e,i,s,r;const n=(s=(i=(e=this.yl).paneViews)===null||i===void 0?void 0:i.call(e))!==null&&s!==void 0?s:[];if(((r=this.gl)===null||r===void 0?void 0:r.vl)===n)return this.gl.pl;const o=n.map(a=>new dh(a));return this.gl={vl:n,pl:o},o}Ji(){var e,i,s,r;const n=(s=(i=(e=this.yl).timeAxisViews)===null||i===void 0?void 0:i.call(e))!==null&&s!==void 0?s:[];if(((r=this.Ml)===null||r===void 0?void 0:r.vl)===n)return this.Ml.pl;const o=this.Nr.$t().St(),a=n.map(l=>new lB(l,o));return this.Ml={vl:n,pl:a},a}Tn(){var e,i,s,r;const n=(s=(i=(e=this.yl).priceAxisViews)===null||i===void 0?void 0:i.call(e))!==null&&s!==void 0?s:[];if(((r=this.xl)===null||r===void 0?void 0:r.vl)===n)return this.xl.pl;const o=this.Nr.Dt(),a=n.map(l=>new dB(l,o));return this.xl={vl:n,pl:a},a}Tl(){var e,i,s,r;const n=(s=(i=(e=this.yl).priceAxisPaneViews)===null||i===void 0?void 0:i.call(e))!==null&&s!==void 0?s:[];if(((r=this.Sl)===null||r===void 0?void 0:r.vl)===n)return this.Sl.pl;const o=n.map(a=>new dh(a));return this.Sl={vl:n,pl:o},o}Pl(){var e,i,s,r;const n=(s=(i=(e=this.yl).timeAxisPaneViews)===null||i===void 0?void 0:i.call(e))!==null&&s!==void 0?s:[];if(((r=this.kl)===null||r===void 0?void 0:r.vl)===n)return this.kl.pl;const o=n.map(a=>new dh(a));return this.kl={vl:n,pl:o},o}Rl(e,i){var s,r,n;return(n=(r=(s=this.yl).autoscaleInfo)===null||r===void 0?void 0:r.call(s,e,i))!==null&&n!==void 0?n:null}pr(e,i){var s,r,n;return(n=(r=(s=this.yl).hitTest)===null||r===void 0?void 0:r.call(s,e,i))!==null&&n!==void 0?n:null}}function uh(t,e,i,s){t.forEach(r=>{e(r).forEach(n=>{n.ml()===i&&s.push(n)})})}function ch(t){return t.Cn()}function cB(t){return t.Tl()}function hB(t){return t.Pl()}class $m extends sB{constructor(e,i,s,r,n){super(e),this.zt=new oB,this.zh=new Z4(this),this.Dl=[],this.Ol=new z4(this),this.Al=null,this.Vl=null,this.Bl=[],this.Il=[],this.zl=null,this.Ll=[],this._n=i,this.El=s;const o=new X4(this);this.en=[o],this.Lh=new bS(o,this,e),s!=="Area"&&s!=="Line"&&s!=="Baseline"||(this.Al=new U4(this)),this.Nl(),this.Fl(n)}S(){this.zl!==null&&clearTimeout(this.zl)}oh(e){return this._n.priceLineColor||e}Ur(e){const i={qr:!0},s=this.Dt();if(this.$t().St().Ei()||s.Ei()||this.zt.Ei())return i;const r=this.$t().St().qs(),n=this.Ct();if(r===null||n===null)return i;let o,a;if(e){const v=this.zt.Gh();if(v===null)return i;o=v,a=v.ie}else{const v=this.zt.il(r.ui(),-1);if(v===null||(o=this.zt.Uh(v.ie),o===null))return i;a=v.ie}const l=o.Ot[3],c=this.js().Ws(a,{Ot:o}),f=s.Rt(l,n.Ot);return{qr:!1,_t:l,Zt:s.Ni(l,n.Ot),ph:s.Wl(l),mh:s.jl(l,n.Ot),O:c.oe,Si:f,ie:a}}js(){return this.Vl!==null||(this.Vl=new rB(this)),this.Vl}W(){return this._n}Eh(e){const i=e.priceScaleId;i!==void 0&&i!==this._n.priceScaleId&&this.$t().Hl(this,i),Us(this._n,e),e.priceFormat!==void 0&&(this.Nl(),this.$t().$l()),this.$t().Ul(this),this.$t().ql(),this.mn.bt("options")}J(e,i){this.zt.J(e),this.Yl(),this.mn.bt("data"),this.un.bt("data"),this.Al!==null&&(i&&i.Xl?this.Al.Wr():e.length===0&&this.Al.Fr());const s=this.$t()._r(this);this.$t().Kl(s),this.$t().Ul(this),this.$t().ql(),this.$t().Nh()}Zl(e){this.Bl=e,this.Yl();const i=this.$t()._r(this);this.un.bt("data"),this.$t().Kl(i),this.$t().Ul(this),this.$t().ql(),this.$t().Nh()}Gl(){return this.Bl}lh(){return this.Il}Jl(e){const i=new iB(this,e);return this.Dl.push(i),this.$t().Ul(this),i}Ql(e){const i=this.Dl.indexOf(e);i!==-1&&this.Dl.splice(i,1),this.$t().Ul(this)}Yh(){return this.El}Ct(){const e=this.ta();return e===null?null:{Ot:e.Ot[3],ia:e.ot}}ta(){const e=this.$t().St().qs();if(e===null)return null;const i=e.Rs();return this.zt.il(i,1)}Vn(){return this.zt}ah(e){const i=this.zt.Uh(e);return i===null?null:this.El==="Bar"||this.El==="Candlestick"||this.El==="Custom"?{me:i.Ot[0],be:i.Ot[1],we:i.Ot[2],ge:i.Ot[3]}:i.Ot[3]}na(e){const i=[];uh(this.Ll,ch,"top",i);const s=this.Al;return s!==null&&s.yt()&&(this.zl===null&&s.Hr()&&(this.zl=setTimeout(()=>{this.zl=null,this.$t().sa()},0)),s.jr(),i.push(s)),i}Cn(){const e=[];this.ea()||e.push(this.Ol),e.push(this.mn,this.zh,this.un);const i=this.Dl.map(s=>s.Fh());return e.push(...i),uh(this.Ll,ch,"normal",e),e}ra(){return this.ha(ch,"bottom")}la(e){return this.ha(cB,e)}aa(e){return this.ha(hB,e)}oa(e,i){return this.Ll.map(s=>s.pr(e,i)).filter(s=>s!==null)}Gi(e){return[this.Lh,...this.Dl.map(i=>i.Wh())]}Tn(e,i){if(i!==this.qi&&!this.ea())return[];const s=[...this.en];for(const r of this.Dl)s.push(r.jh());return this.Ll.forEach(r=>{s.push(...r.Tn())}),s}Ji(){const e=[];return this.Ll.forEach(i=>{e.push(...i.Ji())}),e}Rl(e,i){if(this._n.autoscaleInfoProvider!==void 0){const s=this._n.autoscaleInfoProvider(()=>{const r=this._a(e,i);return r===null?null:r.Th()});return bu.Ph(s)}return this._a(e,i)}ua(){return this._n.priceFormat.minMove}ca(){return this.da}Rn(){var e;this.mn.bt(),this.un.bt();for(const i of this.en)i.bt();for(const i of this.Dl)i.bt();this.zh.bt(),this.Ol.bt(),(e=this.Al)===null||e===void 0||e.bt(),this.Ll.forEach(i=>i.Rn())}Dt(){return be(super.Dt())}kt(e){if(!((this.El==="Line"||this.El==="Area"||this.El==="Baseline")&&this._n.crosshairMarkerVisible))return null;const i=this.zt.Uh(e);return i===null?null:{_t:i.Ot[3],ht:this.fa(),At:this.va(),Pt:this.pa(),Tt:this.ma(e)}}_h(){return this._n.title}yt(){return this._n.visible}ba(e){this.Ll.push(new uB(e,this))}wa(e){this.Ll=this.Ll.filter(i=>i.Cl()!==e)}ga(){if(this.mn instanceof lh)return e=>this.mn.Ee(e)}Ma(){if(this.mn instanceof lh)return e=>this.mn.Ne(e)}ea(){return!ac(this.Dt().xa())}_a(e,i){if(!El(e)||!El(i)||this.zt.Ei())return null;const s=this.El==="Line"||this.El==="Area"||this.El==="Baseline"||this.El==="Histogram"?[3]:[2,1],r=this.zt.sl(e,i,s);let n=r!==null?new es(r.ul,r.cl):null;if(this.Yh()==="Histogram"){const a=this._n.base,l=new es(a,a);n=n!==null?n.Jn(l):l}let o=this.un.hh();return this.Ll.forEach(a=>{const l=a.Rl(e,i);if(l!=null&&l.priceRange){const I=new es(l.priceRange.minValue,l.priceRange.maxValue);n=n!==null?n.Jn(I):I}var c,f,v,S;l!=null&&l.margins&&(c=o,f=l.margins,o={above:Math.max((v=c==null?void 0:c.above)!==null&&v!==void 0?v:0,f.above),below:Math.max((S=c==null?void 0:c.below)!==null&&S!==void 0?S:0,f.below)})}),new bu(n,o)}fa(){switch(this.El){case"Line":case"Area":case"Baseline":return this._n.crosshairMarkerRadius}return 0}va(){switch(this.El){case"Line":case"Area":case"Baseline":{const e=this._n.crosshairMarkerBorderColor;if(e.length!==0)return e}}return null}pa(){switch(this.El){case"Line":case"Area":case"Baseline":return this._n.crosshairMarkerBorderWidth}return 0}ma(e){switch(this.El){case"Line":case"Area":case"Baseline":{const i=this._n.crosshairMarkerBackgroundColor;if(i.length!==0)return i}}return this.js().Ws(e).oe}Nl(){switch(this._n.priceFormat.type){case"custom":this.da={format:this._n.priceFormat.formatter};break;case"volume":this.da=new _4(this._n.priceFormat.precision);break;case"percent":this.da=new uS(this._n.priceFormat.precision);break;default:{const e=Math.pow(10,this._n.priceFormat.precision);this.da=new lc(e,this._n.priceFormat.minMove*e)}}this.qi!==null&&this.qi.Sa()}Yl(){const e=this.$t().St();if(!e.ka()||this.zt.Ei())return void(this.Il=[]);const i=be(this.zt.Jh());this.Il=this.Bl.map((s,r)=>{const n=be(e.ya(s.time,!0)),o=n<i?1:-1;return{time:be(this.zt.il(n,o)).ie,position:s.position,shape:s.shape,color:s.color,id:s.id,Gr:r,text:s.text,size:s.size,originalTime:s.originalTime}})}Fl(e){switch(this.un=new Q4(this,this.$t()),this.El){case"Bar":this.mn=new k4(this,this.$t());break;case"Candlestick":this.mn=new M4(this,this.$t());break;case"Line":this.mn=new V4(this,this.$t());break;case"Custom":this.mn=new lh(this,this.$t(),Yi(e));break;case"Area":this.mn=new E4(this,this.$t());break;case"Baseline":this.mn=new A4(this,this.$t());break;case"Histogram":this.mn=new L4(this,this.$t());break;default:throw Error("Unknown chart style assigned: "+this.El)}}ha(e,i){const s=[];return uh(this.Ll,e,i,s),s}}class fB{constructor(e){this._n=e}Ca(e,i,s){let r=e;if(this._n.mode===0)return r;const n=s.dn(),o=n.Ct();if(o===null)return r;const a=n.Rt(e,o),l=s.Ta().filter(f=>f instanceof $m).reduce((f,v)=>{if(s.ur(v)||!v.yt())return f;const S=v.Dt(),I=v.Vn();if(S.Ei()||!I.Yr(i))return f;const C=I.Uh(i);if(C===null)return f;const D=Fo(v.Ct());return f.concat([S.Rt(C.Ot[3],D.Ot)])},[]);if(l.length===0)return r;l.sort((f,v)=>Math.abs(f-a)-Math.abs(v-a));const c=l[0];return r=n.fn(c,o),r}}class mB extends Qs{constructor(){super(...arguments),this.zt=null}J(e){this.zt=e}Z({context:e,bitmapSize:i,horizontalPixelRatio:s,verticalPixelRatio:r}){if(this.zt===null)return;const n=Math.max(1,Math.floor(s));e.lineWidth=n,function(o,a){o.save(),o.lineWidth%2&&o.translate(.5,.5),a(),o.restore()}(e,()=>{const o=be(this.zt);if(o.Pa){e.strokeStyle=o.Ra,oo(e,o.Da),e.beginPath();for(const a of o.Oa){const l=Math.round(a.Aa*s);e.moveTo(l,-n),e.lineTo(l,i.height+n)}e.stroke()}if(o.Va){e.strokeStyle=o.Ba,oo(e,o.Ia),e.beginPath();for(const a of o.za){const l=Math.round(a.Aa*r);e.moveTo(-n,l),e.lineTo(i.width+n,l)}e.stroke()}})}}class pB{constructor(e){this.Wt=new mB,this.ft=!0,this.Qi=e}bt(){this.ft=!0}gt(){if(this.ft){const e=this.Qi.$t().W().grid,i={Va:e.horzLines.visible,Pa:e.vertLines.visible,Ba:e.horzLines.color,Ra:e.vertLines.color,Ia:e.horzLines.style,Da:e.vertLines.style,za:this.Qi.dn().La(),Oa:(this.Qi.$t().St().La()||[]).map(s=>({Aa:s.coord}))};this.Wt.J(i),this.ft=!1}return this.Wt}}class gB{constructor(e){this.mn=new pB(e)}Fh(){return this.mn}}const hh={Ea:4,Na:1e-4};function Bo(t,e){const i=100*(t-e)/e;return e<0?-i:i}function vB(t,e){const i=Bo(t.xh(),e),s=Bo(t.Sh(),e);return new es(i,s)}function rl(t,e){const i=100*(t-e)/e+100;return e<0?-i:i}function yB(t,e){const i=rl(t.xh(),e),s=rl(t.Sh(),e);return new es(i,s)}function wu(t,e){const i=Math.abs(t);if(i<1e-15)return 0;const s=Math.log10(i+e.Na)+e.Ea;return t<0?-s:s}function ol(t,e){const i=Math.abs(t);if(i<1e-15)return 0;const s=Math.pow(10,i-e.Ea)-e.Na;return t<0?-s:s}function za(t,e){if(t===null)return null;const i=wu(t.xh(),e),s=wu(t.Sh(),e);return new es(i,s)}function xd(t,e){if(t===null)return null;const i=ol(t.xh(),e),s=ol(t.Sh(),e);return new es(i,s)}function fh(t){if(t===null)return hh;const e=Math.abs(t.Sh()-t.xh());if(e>=1||e<1e-15)return hh;const i=Math.ceil(Math.abs(Math.log10(e))),s=hh.Ea+i;return{Ea:s,Na:1/Math.pow(10,s)}}class mh{constructor(e,i){if(this.Fa=e,this.Wa=i,function(s){if(s<0)return!1;for(let r=s;r>1;r/=10)if(r%10!=0)return!1;return!0}(this.Fa))this.ja=[2,2.5,2];else{this.ja=[];for(let s=this.Fa;s!==1;){if(s%2==0)this.ja.push(2),s/=2;else{if(s%5!=0)throw new Error("unexpected base");this.ja.push(2,2.5),s/=5}if(this.ja.length>100)throw new Error("something wrong with base")}}}Ha(e,i,s){const r=this.Fa===0?0:1/this.Fa;let n=Math.pow(10,Math.max(0,Math.ceil(Math.log10(e-i)))),o=0,a=this.Wa[0];for(;;){const v=Sd(n,r,1e-14)&&n>r+1e-14,S=Sd(n,s*a,1e-14),I=Sd(n,1,1e-14);if(!(v&&S&&I))break;n/=a,a=this.Wa[++o%this.Wa.length]}if(n<=r+1e-14&&(n=r),n=Math.max(1,n),this.ja.length>0&&(l=n,c=1,f=1e-14,Math.abs(l-c)<f))for(o=0,a=this.ja[0];Sd(n,s*a,1e-14)&&n>r+1e-14;)n/=a,a=this.ja[++o%this.ja.length];var l,c,f;return n}}class wv{constructor(e,i,s,r){this.$a=[],this.zi=e,this.Fa=i,this.Ua=s,this.qa=r}Ha(e,i){if(e<i)throw new Error("high < low");const s=this.zi.Bt(),r=(e-i)*this.Ya()/s,n=new mh(this.Fa,[2,2.5,2]),o=new mh(this.Fa,[2,2,2.5]),a=new mh(this.Fa,[2.5,2,2]),l=[];return l.push(n.Ha(e,i,r),o.Ha(e,i,r),a.Ha(e,i,r)),function(c){if(c.length<1)throw Error("array is empty");let f=c[0];for(let v=1;v<c.length;++v)c[v]<f&&(f=c[v]);return f}(l)}Xa(){const e=this.zi,i=e.Ct();if(i===null)return void(this.$a=[]);const s=e.Bt(),r=this.Ua(s-1,i),n=this.Ua(0,i),o=this.zi.W().entireTextOnly?this.Ka()/2:0,a=o,l=s-1-o,c=Math.max(r,n),f=Math.min(r,n);if(c===f)return void(this.$a=[]);let v=this.Ha(c,f),S=c%v;S+=S<0?v:0;const I=c>=f?1:-1;let C=null,D=0;for(let J=c-S;J>f;J-=v){const V=this.qa(J,i,!0);C!==null&&Math.abs(V-C)<this.Ya()||V<a||V>l||(D<this.$a.length?(this.$a[D].Aa=V,this.$a[D].Za=e.Ga(J)):this.$a.push({Aa:V,Za:e.Ga(J)}),D++,C=V,e.Ja()&&(v=this.Ha(J*I,f)))}this.$a.length=D}La(){return this.$a}Ka(){return this.zi.P()}Ya(){return Math.ceil(2.5*this.Ka())}}function xS(t){return t.slice().sort((e,i)=>be(e.Xi())-be(i.Xi()))}var Sv;(function(t){t[t.Normal=0]="Normal",t[t.Logarithmic=1]="Logarithmic",t[t.Percentage=2]="Percentage",t[t.IndexedTo100=3]="IndexedTo100"})(Sv||(Sv={}));const Tv=new uS,xv=new lc(100,1);class _B{constructor(e,i,s,r){this.Qa=0,this.io=null,this.Rh=null,this.no=null,this.so={eo:!1,ro:null},this.ho=0,this.lo=0,this.ao=new ri,this.oo=new ri,this._o=[],this.uo=null,this.co=null,this.do=null,this.fo=null,this.da=xv,this.vo=fh(null),this.po=e,this._n=i,this.mo=s,this.bo=r,this.wo=new wv(this,100,this.Mo.bind(this),this.xo.bind(this))}xa(){return this.po}W(){return this._n}Eh(e){if(Us(this._n,e),this.Sa(),e.mode!==void 0&&this.So({Sr:e.mode}),e.scaleMargins!==void 0){const i=Yi(e.scaleMargins.top),s=Yi(e.scaleMargins.bottom);if(i<0||i>1)throw new Error(`Invalid top margin - expect value between 0 and 1, given=${i}`);if(s<0||s>1)throw new Error(`Invalid bottom margin - expect value between 0 and 1, given=${s}`);if(i+s>1)throw new Error(`Invalid margins - sum of margins must be less than 1, given=${i+s}`);this.ko(),this.co=null}}yo(){return this._n.autoScale}Ja(){return this._n.mode===1}fh(){return this._n.mode===2}Co(){return this._n.mode===3}Sr(){return{Nn:this._n.autoScale,To:this._n.invertScale,Sr:this._n.mode}}So(e){const i=this.Sr();let s=null;e.Nn!==void 0&&(this._n.autoScale=e.Nn),e.Sr!==void 0&&(this._n.mode=e.Sr,e.Sr!==2&&e.Sr!==3||(this._n.autoScale=!0),this.so.eo=!1),i.Sr===1&&e.Sr!==i.Sr&&(function(n,o){if(n===null)return!1;const a=ol(n.xh(),o),l=ol(n.Sh(),o);return isFinite(a)&&isFinite(l)}(this.Rh,this.vo)?(s=xd(this.Rh,this.vo),s!==null&&this.Po(s)):this._n.autoScale=!0),e.Sr===1&&e.Sr!==i.Sr&&(s=za(this.Rh,this.vo),s!==null&&this.Po(s));const r=i.Sr!==this._n.mode;r&&(i.Sr===2||this.fh())&&this.Sa(),r&&(i.Sr===3||this.Co())&&this.Sa(),e.To!==void 0&&i.To!==e.To&&(this._n.invertScale=e.To,this.Ro()),this.oo.m(i,this.Sr())}Do(){return this.oo}P(){return this.mo.fontSize}Bt(){return this.Qa}Oo(e){this.Qa!==e&&(this.Qa=e,this.ko(),this.co=null)}Ao(){if(this.io)return this.io;const e=this.Bt()-this.Vo()-this.Bo();return this.io=e,e}Oh(){return this.Io(),this.Rh}Po(e,i){const s=this.Rh;(i||s===null&&e!==null||s!==null&&!s.gh(e))&&(this.co=null,this.Rh=e)}Ei(){return this.Io(),this.Qa===0||!this.Rh||this.Rh.Ei()}zo(e){return this.To()?e:this.Bt()-1-e}Rt(e,i){return this.fh()?e=Bo(e,i):this.Co()&&(e=rl(e,i)),this.xo(e,i)}Gs(e,i,s){this.Io();const r=this.Bo(),n=be(this.Oh()),o=n.xh(),a=n.Sh(),l=this.Ao()-1,c=this.To(),f=l/(a-o),v=s===void 0?0:s.from,S=s===void 0?e.length:s.to,I=this.Lo();for(let C=v;C<S;C++){const D=e[C],J=D._t;if(isNaN(J))continue;let V=J;I!==null&&(V=I(D._t,i));const se=r+f*(V-o),oe=c?se:this.Qa-1-se;D.st=oe}}ve(e,i,s){this.Io();const r=this.Bo(),n=be(this.Oh()),o=n.xh(),a=n.Sh(),l=this.Ao()-1,c=this.To(),f=l/(a-o),v=s===void 0?0:s.from,S=s===void 0?e.length:s.to,I=this.Lo();for(let C=v;C<S;C++){const D=e[C];let J=D.me,V=D.be,se=D.we,oe=D.ge;I!==null&&(J=I(D.me,i),V=I(D.be,i),se=I(D.we,i),oe=I(D.ge,i));let ee=r+f*(J-o),_e=c?ee:this.Qa-1-ee;D.de=_e,ee=r+f*(V-o),_e=c?ee:this.Qa-1-ee,D._e=_e,ee=r+f*(se-o),_e=c?ee:this.Qa-1-ee,D.ue=_e,ee=r+f*(oe-o),_e=c?ee:this.Qa-1-ee,D.fe=_e}}fn(e,i){const s=this.Mo(e,i);return this.Eo(s,i)}Eo(e,i){let s=e;return this.fh()?s=function(r,n){return n<0&&(r=-r),r/100*n+n}(s,i):this.Co()&&(s=function(r,n){return r-=100,n<0&&(r=-r),r/100*n+n}(s,i)),s}Ta(){return this._o}No(){if(this.uo)return this.uo;let e=[];for(let i=0;i<this._o.length;i++){const s=this._o[i];s.Xi()===null&&s.Ki(i+1),e.push(s)}return e=xS(e),this.uo=e,this.uo}Fo(e){this._o.indexOf(e)===-1&&(this._o.push(e),this.Sa(),this.Wo())}jo(e){const i=this._o.indexOf(e);if(i===-1)throw new Error("source is not attached to scale");this._o.splice(i,1),this._o.length===0&&(this.So({Nn:!0}),this.Po(null)),this.Sa(),this.Wo()}Ct(){let e=null;for(const i of this._o){const s=i.Ct();s!==null&&(e===null||s.ia<e.ia)&&(e=s)}return e===null?null:e.Ot}To(){return this._n.invertScale}La(){const e=this.Ct()===null;if(this.co!==null&&(e||this.co.Ho===e))return this.co.La;this.wo.Xa();const i=this.wo.La();return this.co={La:i,Ho:e},this.ao.m(),i}$o(){return this.ao}Uo(e){this.fh()||this.Co()||this.do===null&&this.no===null&&(this.Ei()||(this.do=this.Qa-e,this.no=be(this.Oh()).Mh()))}qo(e){if(this.fh()||this.Co()||this.do===null)return;this.So({Nn:!1}),(e=this.Qa-e)<0&&(e=0);let i=(this.do+.2*(this.Qa-1))/(e+.2*(this.Qa-1));const s=be(this.no).Mh();i=Math.max(i,.1),s.yh(i),this.Po(s)}Yo(){this.fh()||this.Co()||(this.do=null,this.no=null)}Xo(e){this.yo()||this.fo===null&&this.no===null&&(this.Ei()||(this.fo=e,this.no=be(this.Oh()).Mh()))}Ko(e){if(this.yo()||this.fo===null)return;const i=be(this.Oh()).kh()/(this.Ao()-1);let s=e-this.fo;this.To()&&(s*=-1);const r=s*i,n=be(this.no).Mh();n.Ch(r),this.Po(n,!0),this.co=null}Zo(){this.yo()||this.fo!==null&&(this.fo=null,this.no=null)}ca(){return this.da||this.Sa(),this.da}Ni(e,i){switch(this._n.mode){case 2:return this.Go(Bo(e,i));case 3:return this.ca().format(rl(e,i));default:return this.Ih(e)}}Ga(e){switch(this._n.mode){case 2:return this.Go(e);case 3:return this.ca().format(e);default:return this.Ih(e)}}Wl(e){return this.Ih(e,be(this.Jo()).ca())}jl(e,i){return e=Bo(e,i),this.Go(e,Tv)}Qo(){return this._o}t_(e){this.so={ro:e,eo:!1}}Rn(){this._o.forEach(e=>e.Rn())}Sa(){this.co=null;const e=this.Jo();let i=100;e!==null&&(i=Math.round(1/e.ua())),this.da=xv,this.fh()?(this.da=Tv,i=100):this.Co()?(this.da=new lc(100,1),i=100):e!==null&&(this.da=e.ca()),this.wo=new wv(this,i,this.Mo.bind(this),this.xo.bind(this)),this.wo.Xa()}Wo(){this.uo=null}Jo(){return this._o[0]||null}Vo(){return this.To()?this._n.scaleMargins.bottom*this.Bt()+this.lo:this._n.scaleMargins.top*this.Bt()+this.ho}Bo(){return this.To()?this._n.scaleMargins.top*this.Bt()+this.ho:this._n.scaleMargins.bottom*this.Bt()+this.lo}Io(){this.so.eo||(this.so.eo=!0,this.i_())}ko(){this.io=null}xo(e,i){if(this.Io(),this.Ei())return 0;e=this.Ja()&&e?wu(e,this.vo):e;const s=be(this.Oh()),r=this.Bo()+(this.Ao()-1)*(e-s.xh())/s.kh();return this.zo(r)}Mo(e,i){if(this.Io(),this.Ei())return 0;const s=this.zo(e),r=be(this.Oh()),n=r.xh()+r.kh()*((s-this.Bo())/(this.Ao()-1));return this.Ja()?ol(n,this.vo):n}Ro(){this.co=null,this.wo.Xa()}i_(){const e=this.so.ro;if(e===null)return;let i=null;const s=this.Qo();let r=0,n=0;for(const l of s){if(!l.yt())continue;const c=l.Ct();if(c===null)continue;const f=l.Rl(e.Rs(),e.ui());let v=f&&f.Oh();if(v!==null){switch(this._n.mode){case 1:v=za(v,this.vo);break;case 2:v=vB(v,c.Ot);break;case 3:v=yB(v,c.Ot)}if(i=i===null?v:i.Jn(be(v)),f!==null){const S=f.Ah();S!==null&&(r=Math.max(r,S.above),n=Math.max(r,S.below))}}}if(r===this.ho&&n===this.lo||(this.ho=r,this.lo=n,this.co=null,this.ko()),i!==null){if(i.xh()===i.Sh()){const l=this.Jo(),c=5*(l===null||this.fh()||this.Co()?1:l.ua());this.Ja()&&(i=xd(i,this.vo)),i=new es(i.xh()-c,i.Sh()+c),this.Ja()&&(i=za(i,this.vo))}if(this.Ja()){const l=xd(i,this.vo),c=fh(l);if(o=c,a=this.vo,o.Ea!==a.Ea||o.Na!==a.Na){const f=this.no!==null?xd(this.no,this.vo):null;this.vo=c,i=za(l,c),f!==null&&(this.no=za(f,c))}}this.Po(i)}else this.Rh===null&&(this.Po(new es(-.5,.5)),this.vo=fh(null));var o,a;this.so.eo=!0}Lo(){return this.fh()?Bo:this.Co()?rl:this.Ja()?e=>wu(e,this.vo):null}n_(e,i,s){return i===void 0?(s===void 0&&(s=this.ca()),s.format(e)):i(e)}Ih(e,i){return this.n_(e,this.bo.priceFormatter,i)}Go(e,i){return this.n_(e,this.bo.percentageFormatter,i)}}class bB{constructor(e,i){this._o=[],this.s_=new Map,this.Qa=0,this.e_=0,this.r_=1e3,this.uo=null,this.h_=new ri,this.wl=e,this.Hi=i,this.l_=new gB(this);const s=i.W();this.a_=this.o_("left",s.leftPriceScale),this.__=this.o_("right",s.rightPriceScale),this.a_.Do().l(this.u_.bind(this,this.a_),this),this.__.Do().l(this.u_.bind(this,this.__),this),this.c_(s)}c_(e){if(e.leftPriceScale&&this.a_.Eh(e.leftPriceScale),e.rightPriceScale&&this.__.Eh(e.rightPriceScale),e.localization&&(this.a_.Sa(),this.__.Sa()),e.overlayPriceScales){const i=Array.from(this.s_.values());for(const s of i){const r=be(s[0].Dt());r.Eh(e.overlayPriceScales),e.localization&&r.Sa()}}}d_(e){switch(e){case"left":return this.a_;case"right":return this.__}return this.s_.has(e)?Yi(this.s_.get(e))[0].Dt():null}S(){this.$t().f_().p(this),this.a_.Do().p(this),this.__.Do().p(this),this._o.forEach(e=>{e.S&&e.S()}),this.h_.m()}v_(){return this.r_}p_(e){this.r_=e}$t(){return this.Hi}ji(){return this.e_}Bt(){return this.Qa}m_(e){this.e_=e,this.b_()}Oo(e){this.Qa=e,this.a_.Oo(e),this.__.Oo(e),this._o.forEach(i=>{if(this.ur(i)){const s=i.Dt();s!==null&&s.Oo(e)}}),this.b_()}Ta(){return this._o}ur(e){const i=e.Dt();return i===null||this.a_!==i&&this.__!==i}Fo(e,i,s){const r=s!==void 0?s:this.g_().w_+1;this.M_(e,i,r)}jo(e){const i=this._o.indexOf(e);br(i!==-1,"removeDataSource: invalid data source"),this._o.splice(i,1);const s=be(e.Dt()).xa();if(this.s_.has(s)){const n=Yi(this.s_.get(s)),o=n.indexOf(e);o!==-1&&(n.splice(o,1),n.length===0&&this.s_.delete(s))}const r=e.Dt();r&&r.Ta().indexOf(e)>=0&&r.jo(e),r!==null&&(r.Wo(),this.x_(r)),this.uo=null}dr(e){return e===this.a_?"left":e===this.__?"right":"overlay"}S_(){return this.a_}k_(){return this.__}y_(e,i){e.Uo(i)}C_(e,i){e.qo(i),this.b_()}T_(e){e.Yo()}P_(e,i){e.Xo(i)}R_(e,i){e.Ko(i),this.b_()}D_(e){e.Zo()}b_(){this._o.forEach(e=>{e.Rn()})}dn(){let e=null;return this.Hi.W().rightPriceScale.visible&&this.__.Ta().length!==0?e=this.__:this.Hi.W().leftPriceScale.visible&&this.a_.Ta().length!==0?e=this.a_:this._o.length!==0&&(e=this._o[0].Dt()),e===null&&(e=this.__),e}cr(){let e=null;return this.Hi.W().rightPriceScale.visible?e=this.__:this.Hi.W().leftPriceScale.visible&&(e=this.a_),e}x_(e){e!==null&&e.yo()&&this.O_(e)}A_(e){const i=this.wl.qs();e.So({Nn:!0}),i!==null&&e.t_(i),this.b_()}V_(){this.O_(this.a_),this.O_(this.__)}B_(){this.x_(this.a_),this.x_(this.__),this._o.forEach(e=>{this.ur(e)&&this.x_(e.Dt())}),this.b_(),this.Hi.Nh()}No(){return this.uo===null&&(this.uo=xS(this._o)),this.uo}I_(){return this.h_}z_(){return this.l_}O_(e){const i=e.Qo();if(i&&i.length>0&&!this.wl.Ei()){const s=this.wl.qs();s!==null&&e.t_(s)}e.Rn()}g_(){const e=this.No();if(e.length===0)return{L_:0,w_:0};let i=0,s=0;for(let r=0;r<e.length;r++){const n=e[r].Xi();n!==null&&(n<i&&(i=n),n>s&&(s=n))}return{L_:i,w_:s}}M_(e,i,s){let r=this.d_(i);if(r===null&&(r=this.o_(i,this.Hi.W().overlayPriceScales)),this._o.push(e),!ac(i)){const n=this.s_.get(i)||[];n.push(e),this.s_.set(i,n)}r.Fo(e),e.Zi(r),e.Ki(s),this.x_(r),this.uo=null}u_(e,i,s){i.Sr!==s.Sr&&this.O_(e)}o_(e,i){const s=Object.assign({visible:!0,autoScale:!0},Nn(i)),r=new _B(e,s,this.Hi.W().layout,this.Hi.W().localization);return r.Oo(this.Bt()),r}}class wB{constructor(e,i,s=50){this.Ye=0,this.Xe=1,this.Ke=1,this.Ge=new Map,this.Ze=new Map,this.E_=e,this.N_=i,this.Je=s}F_(e){const i=e.time,s=this.N_.cacheKey(i),r=this.Ge.get(s);if(r!==void 0)return r.W_;if(this.Ye===this.Je){const o=this.Ze.get(this.Ke);this.Ze.delete(this.Ke),this.Ge.delete(Yi(o)),this.Ke++,this.Ye--}const n=this.E_(e);return this.Ge.set(s,{W_:n,nr:this.Xe}),this.Ze.set(this.Xe,s),this.Ye++,this.Xe++,n}}class al{constructor(e,i){br(e<=i,"right should be >= left"),this.j_=e,this.H_=i}Rs(){return this.j_}ui(){return this.H_}U_(){return this.H_-this.j_+1}Yr(e){return this.j_<=e&&e<=this.H_}gh(e){return this.j_===e.Rs()&&this.H_===e.ui()}}function Iv(t,e){return t===null||e===null?t===e:t.gh(e)}class SB{constructor(){this.q_=new Map,this.Ge=null,this.Y_=!1}X_(e){this.Y_=e,this.Ge=null}K_(e,i){this.Z_(i),this.Ge=null;for(let s=i;s<e.length;++s){const r=e[s];let n=this.q_.get(r.timeWeight);n===void 0&&(n=[],this.q_.set(r.timeWeight,n)),n.push({index:s,time:r.time,weight:r.timeWeight,originalTime:r.originalTime})}}G_(e,i){const s=Math.ceil(i/e);return this.Ge!==null&&this.Ge.J_===s||(this.Ge={La:this.Q_(s),J_:s}),this.Ge.La}Z_(e){if(e===0)return void this.q_.clear();const i=[];this.q_.forEach((s,r)=>{e<=s[0].index?i.push(r):s.splice(Ql(s,e,n=>n.index<e),1/0)});for(const s of i)this.q_.delete(s)}Q_(e){let i=[];for(const s of Array.from(this.q_.keys()).sort((r,n)=>n-r)){if(!this.q_.get(s))continue;const r=i;i=[];const n=r.length;let o=0;const a=Yi(this.q_.get(s)),l=a.length;let c=1/0,f=-1/0;for(let v=0;v<l;v++){const S=a[v],I=S.index;for(;o<n;){const C=r[o],D=C.index;if(!(D<I)){c=D;break}o++,i.push(C),f=D,c=1/0}if(c-I>=e&&I-f>=e)i.push(S),f=I;else if(this.Y_)return r}for(;o<n;o++)i.push(r[o])}return i}}class Zo{constructor(e){this.tu=e}iu(){return this.tu===null?null:new al(Math.floor(this.tu.Rs()),Math.ceil(this.tu.ui()))}nu(){return this.tu}static su(){return new Zo(null)}}function TB(t,e){return t.weight>e.weight?t:e}class xB{constructor(e,i,s,r){this.e_=0,this.eu=null,this.ru=[],this.fo=null,this.do=null,this.hu=new SB,this.lu=new Map,this.au=Zo.su(),this.ou=!0,this._u=new ri,this.uu=new ri,this.cu=new ri,this.du=null,this.fu=null,this.vu=[],this._n=i,this.bo=s,this.pu=i.rightOffset,this.mu=i.barSpacing,this.Hi=e,this.N_=r,this.bu(),this.hu.X_(i.uniformDistribution)}W(){return this._n}wu(e){Us(this.bo,e),this.gu(),this.bu()}Eh(e,i){var s;Us(this._n,e),this._n.fixLeftEdge&&this.Mu(),this._n.fixRightEdge&&this.xu(),e.barSpacing!==void 0&&this.Hi.Kn(e.barSpacing),e.rightOffset!==void 0&&this.Hi.Zn(e.rightOffset),e.minBarSpacing!==void 0&&this.Hi.Kn((s=e.barSpacing)!==null&&s!==void 0?s:this.mu),this.gu(),this.bu(),this.cu.m()}vn(e){var i,s;return(s=(i=this.ru[e])===null||i===void 0?void 0:i.time)!==null&&s!==void 0?s:null}$i(e){var i;return(i=this.ru[e])!==null&&i!==void 0?i:null}ya(e,i){if(this.ru.length<1)return null;if(this.N_.key(e)>this.N_.key(this.ru[this.ru.length-1].time))return i?this.ru.length-1:null;const s=Ql(this.ru,this.N_.key(e),(r,n)=>this.N_.key(r.time)<n);return this.N_.key(e)<this.N_.key(this.ru[s].time)?i?s:null:s}Ei(){return this.e_===0||this.ru.length===0||this.eu===null}ka(){return this.ru.length>0}qs(){return this.Su(),this.au.iu()}ku(){return this.Su(),this.au.nu()}yu(){const e=this.qs();if(e===null)return null;const i={from:e.Rs(),to:e.ui()};return this.Cu(i)}Cu(e){const i=Math.round(e.from),s=Math.round(e.to),r=be(this.Tu()),n=be(this.Pu());return{from:be(this.$i(Math.max(r,i))),to:be(this.$i(Math.min(n,s)))}}Ru(e){return{from:be(this.ya(e.from,!0)),to:be(this.ya(e.to,!0))}}ji(){return this.e_}m_(e){if(!isFinite(e)||e<=0||this.e_===e)return;const i=this.ku(),s=this.e_;if(this.e_=e,this.ou=!0,this._n.lockVisibleTimeRangeOnResize&&s!==0){const r=this.mu*e/s;this.mu=r}if(this._n.fixLeftEdge&&i!==null&&i.Rs()<=0){const r=s-e;this.pu-=Math.round(r/this.mu)+1,this.ou=!0}this.Du(),this.Ou()}It(e){if(this.Ei()||!El(e))return 0;const i=this.Au()+this.pu-e;return this.e_-(i+.5)*this.mu-1}Zs(e,i){const s=this.Au(),r=i===void 0?0:i.from,n=i===void 0?e.length:i.to;for(let o=r;o<n;o++){const a=e[o].ot,l=s+this.pu-a,c=this.e_-(l+.5)*this.mu-1;e[o].nt=c}}Vu(e){return Math.ceil(this.Bu(e))}Zn(e){this.ou=!0,this.pu=e,this.Ou(),this.Hi.Iu(),this.Hi.Nh()}ee(){return this.mu}Kn(e){this.zu(e),this.Ou(),this.Hi.Iu(),this.Hi.Nh()}Lu(){return this.pu}La(){if(this.Ei())return null;if(this.fu!==null)return this.fu;const e=this.mu,i=5*(this.Hi.W().layout.fontSize+4)/8*(this._n.tickMarkMaxCharacterLength||8),s=Math.round(i/e),r=be(this.qs()),n=Math.max(r.Rs(),r.Rs()-s),o=Math.max(r.ui(),r.ui()-s),a=this.hu.G_(e,i),l=this.Tu()+s,c=this.Pu()-s,f=this.Eu(),v=this._n.fixLeftEdge||f,S=this._n.fixRightEdge||f;let I=0;for(const C of a){if(!(n<=C.index&&C.index<=o))continue;let D;I<this.vu.length?(D=this.vu[I],D.coord=this.It(C.index),D.label=this.Nu(C),D.weight=C.weight):(D={needAlignCoordinate:!1,coord:this.It(C.index),label:this.Nu(C),weight:C.weight},this.vu.push(D)),this.mu>i/2&&!f?D.needAlignCoordinate=!1:D.needAlignCoordinate=v&&C.index<=l||S&&C.index>=c,I++}return this.vu.length=I,this.fu=this.vu,this.vu}Fu(){this.ou=!0,this.Kn(this._n.barSpacing),this.Zn(this._n.rightOffset)}Wu(e){this.ou=!0,this.eu=e,this.Ou(),this.Mu()}ju(e,i){const s=this.Bu(e),r=this.ee(),n=r+i*(r/10);this.Kn(n),this._n.rightBarStaysOnScroll||this.Zn(this.Lu()+(s-this.Bu(e)))}Uo(e){this.fo&&this.Zo(),this.do===null&&this.du===null&&(this.Ei()||(this.do=e,this.Hu()))}qo(e){if(this.du===null)return;const i=ff(this.e_-e,0,this.e_),s=ff(this.e_-be(this.do),0,this.e_);i!==0&&s!==0&&this.Kn(this.du.ee*i/s)}Yo(){this.do!==null&&(this.do=null,this.$u())}Xo(e){this.fo===null&&this.du===null&&(this.Ei()||(this.fo=e,this.Hu()))}Ko(e){if(this.fo===null)return;const i=(this.fo-e)/this.ee();this.pu=be(this.du).Lu+i,this.ou=!0,this.Ou()}Zo(){this.fo!==null&&(this.fo=null,this.$u())}Uu(){this.qu(this._n.rightOffset)}qu(e,i=400){if(!isFinite(e))throw new RangeError("offset is required and must be finite number");if(!isFinite(i)||i<=0)throw new RangeError("animationDuration (optional) must be finite positive number");const s=this.pu,r=performance.now();this.Hi.qn({Yu:n=>(n-r)/i>=1,Xu:n=>{const o=(n-r)/i;return o>=1?e:s+(e-s)*o}})}bt(e,i){this.ou=!0,this.ru=e,this.hu.K_(e,i),this.Ou()}Ku(){return this._u}Zu(){return this.uu}Gu(){return this.cu}Au(){return this.eu||0}Ju(e){const i=e.U_();this.zu(this.e_/i),this.pu=e.ui()-this.Au(),this.Ou(),this.ou=!0,this.Hi.Iu(),this.Hi.Nh()}Qu(){const e=this.Tu(),i=this.Pu();e!==null&&i!==null&&this.Ju(new al(e,i+this._n.rightOffset))}tc(e){const i=new al(e.from,e.to);this.Ju(i)}Ui(e){return this.bo.timeFormatter!==void 0?this.bo.timeFormatter(e.originalTime):this.N_.formatHorzItem(e.time)}Eu(){const{handleScroll:e,handleScale:i}=this.Hi.W();return!(e.horzTouchDrag||e.mouseWheel||e.pressedMouseMove||e.vertTouchDrag||i.axisDoubleClickReset.time||i.axisPressedMouseMove.time||i.mouseWheel||i.pinch)}Tu(){return this.ru.length===0?null:0}Pu(){return this.ru.length===0?null:this.ru.length-1}ic(e){return(this.e_-1-e)/this.mu}Bu(e){const i=this.ic(e),s=this.Au()+this.pu-i;return Math.round(1e6*s)/1e6}zu(e){const i=this.mu;this.mu=e,this.Du(),i!==this.mu&&(this.ou=!0,this.nc())}Su(){if(!this.ou)return;if(this.ou=!1,this.Ei())return void this.sc(Zo.su());const e=this.Au(),i=this.e_/this.mu,s=this.pu+e,r=new al(s-i+1,s);this.sc(new Zo(r))}Du(){const e=this.ec();if(this.mu<e&&(this.mu=e,this.ou=!0),this.e_!==0){const i=.5*this.e_;this.mu>i&&(this.mu=i,this.ou=!0)}}ec(){return this._n.fixLeftEdge&&this._n.fixRightEdge&&this.ru.length!==0?this.e_/this.ru.length:this._n.minBarSpacing}Ou(){const e=this.rc();this.pu>e&&(this.pu=e,this.ou=!0);const i=this.hc();i!==null&&this.pu<i&&(this.pu=i,this.ou=!0)}hc(){const e=this.Tu(),i=this.eu;return e===null||i===null?null:e-i-1+(this._n.fixLeftEdge?this.e_/this.mu:Math.min(2,this.ru.length))}rc(){return this._n.fixRightEdge?0:this.e_/this.mu-Math.min(2,this.ru.length)}Hu(){this.du={ee:this.ee(),Lu:this.Lu()}}$u(){this.du=null}Nu(e){let i=this.lu.get(e.weight);return i===void 0&&(i=new wB(s=>this.lc(s),this.N_),this.lu.set(e.weight,i)),i.F_(e)}lc(e){return this.N_.formatTickmark(e,this.bo)}sc(e){const i=this.au;this.au=e,Iv(i.iu(),this.au.iu())||this._u.m(),Iv(i.nu(),this.au.nu())||this.uu.m(),this.nc()}nc(){this.fu=null}gu(){this.nc(),this.lu.clear()}bu(){this.N_.updateFormatter(this.bo)}Mu(){if(!this._n.fixLeftEdge)return;const e=this.Tu();if(e===null)return;const i=this.qs();if(i===null)return;const s=i.Rs()-e;if(s<0){const r=this.pu-s-1;this.Zn(r)}this.Du()}xu(){this.Ou(),this.Du()}}class IB{K(e,i,s){e.useMediaCoordinateSpace(r=>this.Z(r,i,s))}fl(e,i,s){e.useMediaCoordinateSpace(r=>this.ac(r,i,s))}ac(e,i,s){}}class EB extends IB{constructor(e){super(),this.oc=new Map,this.zt=e}Z(e){}ac(e){if(!this.zt.yt)return;const{context:i,mediaSize:s}=e;let r=0;for(const o of this.zt._c){if(o.Zt.length===0)continue;i.font=o.R;const a=this.uc(i,o.Zt);a>s.width?o.ju=s.width/a:o.ju=1,r+=o.cc*o.ju}let n=0;switch(this.zt.dc){case"top":n=0;break;case"center":n=Math.max((s.height-r)/2,0);break;case"bottom":n=Math.max(s.height-r,0)}i.fillStyle=this.zt.O;for(const o of this.zt._c){i.save();let a=0;switch(this.zt.fc){case"left":i.textAlign="left",a=o.cc/2;break;case"center":i.textAlign="center",a=s.width/2;break;case"right":i.textAlign="right",a=s.width-1-o.cc/2}i.translate(a,n),i.textBaseline="top",i.font=o.R,i.scale(o.ju,o.ju),i.fillText(o.Zt,0,o.vc),i.restore(),n+=o.cc*o.ju}}uc(e,i){const s=this.mc(e.font);let r=s.get(i);return r===void 0&&(r=e.measureText(i).width,s.set(i,r)),r}mc(e){let i=this.oc.get(e);return i===void 0&&(i=new Map,this.oc.set(e,i)),i}}class DB{constructor(e){this.ft=!0,this.Ft={yt:!1,O:"",_c:[],dc:"center",fc:"center"},this.Wt=new EB(this.Ft),this.jt=e}bt(){this.ft=!0}gt(){return this.ft&&(this.Mt(),this.ft=!1),this.Wt}Mt(){const e=this.jt.W(),i=this.Ft;i.yt=e.visible,i.yt&&(i.O=e.color,i.fc=e.horzAlign,i.dc=e.vertAlign,i._c=[{Zt:e.text,R:ra(e.fontSize,e.fontFamily,e.fontStyle),cc:1.2*e.fontSize,vc:0,ju:0}])}}class kB extends Am{constructor(e,i){super(),this._n=i,this.mn=new DB(this)}Tn(){return[]}Cn(){return[this.mn]}W(){return this._n}Rn(){this.mn.bt()}}var Ev,Dv,kv,Cv,Pv;(function(t){t[t.OnTouchEnd=0]="OnTouchEnd",t[t.OnNextTap=1]="OnNextTap"})(Ev||(Ev={}));class CB{constructor(e,i,s){this.bc=[],this.wc=[],this.e_=0,this.gc=null,this.Mc=new ri,this.xc=new ri,this.Sc=null,this.kc=e,this._n=i,this.N_=s,this.yc=new a4(this),this.wl=new xB(this,i.timeScale,this._n.localization,s),this.vt=new y4(this,i.crosshair),this.Cc=new fB(i.crosshair),this.Tc=new kB(this,i.watermark),this.Pc(),this.bc[0].p_(2e3),this.Rc=this.Dc(0),this.Oc=this.Dc(1)}$l(){this.Ac(Ii.ns())}Nh(){this.Ac(Ii.ts())}sa(){this.Ac(new Ii(1))}Ul(e){const i=this.Vc(e);this.Ac(i)}Bc(){return this.gc}Ic(e){const i=this.gc;this.gc=e,i!==null&&this.Ul(i.zc),e!==null&&this.Ul(e.zc)}W(){return this._n}Eh(e){Us(this._n,e),this.bc.forEach(i=>i.c_(e)),e.timeScale!==void 0&&this.wl.Eh(e.timeScale),e.localization!==void 0&&this.wl.wu(e.localization),(e.leftPriceScale||e.rightPriceScale)&&this.Mc.m(),this.Rc=this.Dc(0),this.Oc=this.Dc(1),this.$l()}Lc(e,i){if(e==="left")return void this.Eh({leftPriceScale:i});if(e==="right")return void this.Eh({rightPriceScale:i});const s=this.Ec(e);s!==null&&(s.Dt.Eh(i),this.Mc.m())}Ec(e){for(const i of this.bc){const s=i.d_(e);if(s!==null)return{Ht:i,Dt:s}}return null}St(){return this.wl}Nc(){return this.bc}Fc(){return this.Tc}Wc(){return this.vt}jc(){return this.xc}Hc(e,i){e.Oo(i),this.Iu()}m_(e){this.e_=e,this.wl.m_(this.e_),this.bc.forEach(i=>i.m_(e)),this.Iu()}Pc(e){const i=new bB(this.wl,this);e!==void 0?this.bc.splice(e,0,i):this.bc.push(i);const s=e===void 0?this.bc.length-1:e,r=Ii.ns();return r.Ln(s,{En:0,Nn:!0}),this.Ac(r),i}y_(e,i,s){e.y_(i,s)}C_(e,i,s){e.C_(i,s),this.ql(),this.Ac(this.$c(e,2))}T_(e,i){e.T_(i),this.Ac(this.$c(e,2))}P_(e,i,s){i.yo()||e.P_(i,s)}R_(e,i,s){i.yo()||(e.R_(i,s),this.ql(),this.Ac(this.$c(e,2)))}D_(e,i){i.yo()||(e.D_(i),this.Ac(this.$c(e,2)))}A_(e,i){e.A_(i),this.Ac(this.$c(e,2))}Uc(e){this.wl.Uo(e)}qc(e,i){const s=this.St();if(s.Ei()||i===0)return;const r=s.ji();e=Math.max(1,Math.min(e,r)),s.ju(e,i),this.Iu()}Yc(e){this.Xc(0),this.Kc(e),this.Zc()}Gc(e){this.wl.qo(e),this.Iu()}Jc(){this.wl.Yo(),this.Nh()}Xc(e){this.wl.Xo(e)}Kc(e){this.wl.Ko(e),this.Iu()}Zc(){this.wl.Zo(),this.Nh()}wt(){return this.wc}Qc(e,i,s,r,n){this.vt.bn(e,i);let o=NaN,a=this.wl.Vu(e);const l=this.wl.qs();l!==null&&(a=Math.min(Math.max(l.Rs(),a),l.ui()));const c=r.dn(),f=c.Ct();f!==null&&(o=c.fn(i,f)),o=this.Cc.Ca(o,a,r),this.vt.xn(a,o,r),this.sa(),n||this.xc.m(this.vt.xt(),{x:e,y:i},s)}td(e,i,s){const r=s.dn(),n=r.Ct(),o=r.Rt(e,be(n)),a=this.wl.ya(i,!0),l=this.wl.It(be(a));this.Qc(l,o,null,s,!0)}nd(e){this.Wc().kn(),this.sa(),e||this.xc.m(null,null,null)}ql(){const e=this.vt.Ht();if(e!==null){const i=this.vt.gn(),s=this.vt.Mn();this.Qc(i,s,null,e)}this.vt.Rn()}sd(e,i,s){const r=this.wl.vn(0);i!==void 0&&s!==void 0&&this.wl.bt(i,s);const n=this.wl.vn(0),o=this.wl.Au(),a=this.wl.qs();if(a!==null&&r!==null&&n!==null){const l=a.Yr(o),c=this.N_.key(r)>this.N_.key(n),f=e!==null&&e>o&&!c,v=this.wl.W().allowShiftVisibleRangeOnWhitespaceReplacement,S=l&&(s!==void 0||v)&&this.wl.W().shiftVisibleRangeOnNewBar;if(f&&!S){const I=e-o;this.wl.Zn(this.wl.Lu()-I)}}this.wl.Wu(e)}Kl(e){e!==null&&e.B_()}_r(e){const i=this.bc.find(s=>s.No().includes(e));return i===void 0?null:i}Iu(){this.Tc.Rn(),this.bc.forEach(e=>e.B_()),this.ql()}S(){this.bc.forEach(e=>e.S()),this.bc.length=0,this._n.localization.priceFormatter=void 0,this._n.localization.percentageFormatter=void 0,this._n.localization.timeFormatter=void 0}ed(){return this.yc}vr(){return this.yc.W()}f_(){return this.Mc}rd(e,i,s){const r=this.bc[0],n=this.hd(i,e,r,s);return this.wc.push(n),this.wc.length===1?this.$l():this.Nh(),n}ld(e){const i=this._r(e),s=this.wc.indexOf(e);br(s!==-1,"Series not found"),this.wc.splice(s,1),be(i).jo(e),e.S&&e.S()}Hl(e,i){const s=be(this._r(e));s.jo(e);const r=this.Ec(i);if(r===null){const n=e.Xi();s.Fo(e,i,n)}else{const n=r.Ht===s?e.Xi():void 0;r.Ht.Fo(e,i,n)}}Qu(){const e=Ii.ts();e.jn(),this.Ac(e)}ad(e){const i=Ii.ts();i.Un(e),this.Ac(i)}Xn(){const e=Ii.ts();e.Xn(),this.Ac(e)}Kn(e){const i=Ii.ts();i.Kn(e),this.Ac(i)}Zn(e){const i=Ii.ts();i.Zn(e),this.Ac(i)}qn(e){const i=Ii.ts();i.qn(e),this.Ac(i)}Hn(){const e=Ii.ts();e.Hn(),this.Ac(e)}od(){return this._n.rightPriceScale.visible?"right":"left"}_d(){return this.Oc}q(){return this.Rc}Vt(e){const i=this.Oc,s=this.Rc;if(i===s)return i;if(e=Math.max(0,Math.min(100,Math.round(100*e))),this.Sc===null||this.Sc.ys!==s||this.Sc.Cs!==i)this.Sc={ys:s,Cs:i,ud:new Map};else{const n=this.Sc.ud.get(e);if(n!==void 0)return n}const r=function(n,o,a){const[l,c,f,v]=_u(n),[S,I,C,D]=_u(o),J=[gs(l+a*(S-l)),gs(c+a*(I-c)),gs(f+a*(C-f)),aS(v+a*(D-v))];return`rgba(${J[0]}, ${J[1]}, ${J[2]}, ${J[3]})`}(s,i,e/100);return this.Sc.ud.set(e,r),r}$c(e,i){const s=new Ii(i);if(e!==null){const r=this.bc.indexOf(e);s.Ln(r,{En:i})}return s}Vc(e,i){return i===void 0&&(i=2),this.$c(this._r(e),i)}Ac(e){this.kc&&this.kc(e),this.bc.forEach(i=>i.z_().Fh().bt())}hd(e,i,s,r){const n=new $m(this,e,i,s,r),o=e.priceScaleId!==void 0?e.priceScaleId:this.od();return s.Fo(n,o),ac(o)||n.Eh(e),n}Dc(e){const i=this._n.layout;return i.background.type==="gradient"?e===0?i.background.topColor:i.background.bottomColor:i.background.color}}function mf(t){return!an(t)&&!Jl(t)}function IS(t){return an(t)}(function(t){t[t.Disabled=0]="Disabled",t[t.Continuous=1]="Continuous",t[t.OnDataUpdate=2]="OnDataUpdate"})(Dv||(Dv={})),function(t){t[t.LastBar=0]="LastBar",t[t.LastVisible=1]="LastVisible"}(kv||(kv={})),function(t){t.Solid="solid",t.VerticalGradient="gradient"}(Cv||(Cv={})),function(t){t[t.Year=0]="Year",t[t.Month=1]="Month",t[t.DayOfMonth=2]="DayOfMonth",t[t.Time=3]="Time",t[t.TimeWithSeconds=4]="TimeWithSeconds"}(Pv||(Pv={}));const Av=t=>t.getUTCFullYear();function PB(t,e,i){return e.replace(/yyyy/g,(s=>Ln(Av(s),4))(t)).replace(/yy/g,(s=>Ln(Av(s)%100,2))(t)).replace(/MMMM/g,((s,r)=>new Date(s.getUTCFullYear(),s.getUTCMonth(),1).toLocaleString(r,{month:"long"}))(t,i)).replace(/MMM/g,((s,r)=>new Date(s.getUTCFullYear(),s.getUTCMonth(),1).toLocaleString(r,{month:"short"}))(t,i)).replace(/MM/g,(s=>Ln((r=>r.getUTCMonth()+1)(s),2))(t)).replace(/dd/g,(s=>Ln((r=>r.getUTCDate())(s),2))(t))}class ES{constructor(e="yyyy-MM-dd",i="default"){this.dd=e,this.fd=i}F_(e){return PB(e,this.dd,this.fd)}}class AB{constructor(e){this.vd=e||"%h:%m:%s"}F_(e){return this.vd.replace("%h",Ln(e.getUTCHours(),2)).replace("%m",Ln(e.getUTCMinutes(),2)).replace("%s",Ln(e.getUTCSeconds(),2))}}const RB={pd:"yyyy-MM-dd",md:"%h:%m:%s",bd:" ",wd:"default"};class MB{constructor(e={}){const i=Object.assign(Object.assign({},RB),e);this.gd=new ES(i.pd,i.wd),this.Md=new AB(i.md),this.xd=i.bd}F_(e){return`${this.gd.F_(e)}${this.xd}${this.Md.F_(e)}`}}function Id(t){return 60*t*60*1e3}function ph(t){return 60*t*1e3}const Ed=[{Sd:(Rv=1,1e3*Rv),kd:10},{Sd:ph(1),kd:20},{Sd:ph(5),kd:21},{Sd:ph(30),kd:22},{Sd:Id(1),kd:30},{Sd:Id(3),kd:31},{Sd:Id(6),kd:32},{Sd:Id(12),kd:33}];var Rv;function Mv(t,e){if(t.getUTCFullYear()!==e.getUTCFullYear())return 70;if(t.getUTCMonth()!==e.getUTCMonth())return 60;if(t.getUTCDate()!==e.getUTCDate())return 50;for(let i=Ed.length-1;i>=0;--i)if(Math.floor(e.getTime()/Ed[i].Sd)!==Math.floor(t.getTime()/Ed[i].Sd))return Ed[i].kd;return 0}function gh(t){let e=t;if(Jl(t)&&(e=Nm(t)),!mf(e))throw new Error("time must be of type BusinessDay");const i=new Date(Date.UTC(e.year,e.month-1,e.day,0,0,0,0));return{yd:Math.round(i.getTime()/1e3),Cd:e}}function Ov(t){if(!IS(t))throw new Error("time must be of type isUTCTimestamp");return{yd:t}}function Nm(t){const e=new Date(t);if(isNaN(e.getTime()))throw new Error(`Invalid date string=${t}, expected format=yyyy-mm-dd`);return{day:e.getUTCDate(),month:e.getUTCMonth()+1,year:e.getUTCFullYear()}}function $v(t){Jl(t.time)&&(t.time=Nm(t.time))}class Nv{options(){return this._n}setOptions(e){this._n=e,this.updateFormatter(e.localization)}preprocessData(e){Array.isArray(e)?function(i){i.forEach($v)}(e):$v(e)}createConverterToInternalObj(e){return be(function(i){return i.length===0?null:mf(i[0].time)||Jl(i[0].time)?gh:Ov}(e))}key(e){return typeof e=="object"&&"yd"in e?e.yd:this.key(this.convertHorzItemToInternal(e))}cacheKey(e){const i=e;return i.Cd===void 0?new Date(1e3*i.yd).getTime():new Date(Date.UTC(i.Cd.year,i.Cd.month-1,i.Cd.day)).getTime()}convertHorzItemToInternal(e){return IS(i=e)?Ov(i):mf(i)?gh(i):gh(Nm(i));var i}updateFormatter(e){if(!this._n)return;const i=e.dateFormat;this._n.timeScale.timeVisible?this.Td=new MB({pd:i,md:this._n.timeScale.secondsVisible?"%h:%m:%s":"%h:%m",bd:"   ",wd:e.locale}):this.Td=new ES(i,e.locale)}formatHorzItem(e){const i=e;return this.Td.F_(new Date(1e3*i.yd))}formatTickmark(e,i){const s=function(n,o,a){switch(n){case 0:case 10:return o?a?4:3:2;case 20:case 21:case 22:case 30:case 31:case 32:case 33:return o?3:2;case 50:return 2;case 60:return 1;case 70:return 0}}(e.weight,this._n.timeScale.timeVisible,this._n.timeScale.secondsVisible),r=this._n.timeScale;if(r.tickMarkFormatter!==void 0){const n=r.tickMarkFormatter(e.originalTime,s,i.locale);if(n!==null)return n}return function(n,o,a){const l={};switch(o){case 0:l.year="numeric";break;case 1:l.month="short";break;case 2:l.day="numeric";break;case 3:l.hour12=!1,l.hour="2-digit",l.minute="2-digit";break;case 4:l.hour12=!1,l.hour="2-digit",l.minute="2-digit",l.second="2-digit"}const c=n.Cd===void 0?new Date(1e3*n.yd):new Date(Date.UTC(n.Cd.year,n.Cd.month-1,n.Cd.day));return new Date(c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate(),c.getUTCHours(),c.getUTCMinutes(),c.getUTCSeconds(),c.getUTCMilliseconds()).toLocaleString(a,l)}(e.time,s,i.locale)}maxTickMarkWeight(e){let i=e.reduce(TB,e[0]).weight;return i>30&&i<50&&(i=30),i}fillWeightsForPoints(e,i){(function(s,r=0){if(s.length===0)return;let n=r===0?null:s[r-1].time.yd,o=n!==null?new Date(1e3*n):null,a=0;for(let l=r;l<s.length;++l){const c=s[l],f=new Date(1e3*c.time.yd);o!==null&&(c.timeWeight=Mv(f,o)),a+=c.time.yd-(n||c.time.yd),n=c.time.yd,o=f}if(r===0&&s.length>1){const l=Math.ceil(a/(s.length-1)),c=new Date(1e3*(s[0].time.yd-l));s[0].timeWeight=Mv(new Date(1e3*s[0].time.yd),c)}})(e,i)}static Pd(e){return Us({localization:{dateFormat:"dd MMM 'yy"}},e??{})}}const oa=typeof window<"u";function Lv(){return!!oa&&window.navigator.userAgent.toLowerCase().indexOf("firefox")>-1}function vh(){return!!oa&&/iPhone|iPad|iPod/.test(window.navigator.platform)}function pf(t){return t+t%2}function yh(t,e){return t.Rd-e.Rd}function _h(t,e,i){const s=(t.Rd-e.Rd)/(t.ot-e.ot);return Math.sign(s)*Math.min(Math.abs(s),i)}class OB{constructor(e,i,s,r){this.Dd=null,this.Od=null,this.Ad=null,this.Vd=null,this.Bd=null,this.Id=0,this.zd=0,this.Ld=e,this.Ed=i,this.Nd=s,this.ss=r}Fd(e,i){if(this.Dd!==null){if(this.Dd.ot===i)return void(this.Dd.Rd=e);if(Math.abs(this.Dd.Rd-e)<this.ss)return}this.Vd=this.Ad,this.Ad=this.Od,this.Od=this.Dd,this.Dd={ot:i,Rd:e}}Pr(e,i){if(this.Dd===null||this.Od===null||i-this.Dd.ot>50)return;let s=0;const r=_h(this.Dd,this.Od,this.Ed),n=yh(this.Dd,this.Od),o=[r],a=[n];if(s+=n,this.Ad!==null){const c=_h(this.Od,this.Ad,this.Ed);if(Math.sign(c)===Math.sign(r)){const f=yh(this.Od,this.Ad);if(o.push(c),a.push(f),s+=f,this.Vd!==null){const v=_h(this.Ad,this.Vd,this.Ed);if(Math.sign(v)===Math.sign(r)){const S=yh(this.Ad,this.Vd);o.push(v),a.push(S),s+=S}}}}let l=0;for(let c=0;c<o.length;++c)l+=a[c]/s*o[c];Math.abs(l)<this.Ld||(this.Bd={Rd:e,ot:i},this.zd=l,this.Id=function(c,f){const v=Math.log(f);return Math.log(1*v/-c)/v}(Math.abs(l),this.Nd))}Xu(e){const i=be(this.Bd),s=e-i.ot;return i.Rd+this.zd*(Math.pow(this.Nd,s)-1)/Math.log(this.Nd)}Yu(e){return this.Bd===null||this.Wd(e)===this.Id}Wd(e){const i=e-be(this.Bd).ot;return Math.min(i,this.Id)}}function ao(t,e){const i=be(t.ownerDocument).createElement("canvas");t.appendChild(i);const s=GF(i,{options:{allowResizeObserver:!1},transform:(r,n)=>({width:Math.max(r.width,n.width),height:Math.max(r.height,n.height)})});return s.resizeCanvasElement(e),s}function lo(t){var e;t.width=1,t.height=1,(e=t.getContext("2d"))===null||e===void 0||e.clearRect(0,0,1,1)}function gf(t,e,i,s){t.fl&&t.fl(e,i,s)}function Jd(t,e,i,s){t.K(e,i,s)}function vf(t,e,i,s){const r=t(i,s);for(const n of r){const o=n.gt();o!==null&&e(o)}}function $B(t){oa&&window.chrome!==void 0&&t.addEventListener("mousedown",e=>{if(e.button===1)return e.preventDefault(),!1})}class Lm{constructor(e,i,s){this.jd=0,this.Hd=null,this.$d={nt:Number.NEGATIVE_INFINITY,st:Number.POSITIVE_INFINITY},this.Ud=0,this.qd=null,this.Yd={nt:Number.NEGATIVE_INFINITY,st:Number.POSITIVE_INFINITY},this.Xd=null,this.Kd=!1,this.Zd=null,this.Gd=null,this.Jd=!1,this.Qd=!1,this.tf=!1,this.if=null,this.nf=null,this.sf=null,this.ef=null,this.rf=null,this.hf=null,this.lf=null,this.af=0,this._f=!1,this.uf=!1,this.cf=!1,this.df=0,this.ff=null,this.vf=!vh(),this.pf=r=>{this.mf(r)},this.bf=r=>{if(this.wf(r)){const n=this.gf(r);if(++this.Ud,this.qd&&this.Ud>1){const{Mf:o}=this.xf(en(r),this.Yd);o<30&&!this.tf&&this.Sf(n,this.yf.kf),this.Cf()}}else{const n=this.gf(r);if(++this.jd,this.Hd&&this.jd>1){const{Mf:o}=this.xf(en(r),this.$d);o<5&&!this.Qd&&this.Tf(n,this.yf.Pf),this.Rf()}}},this.Df=e,this.yf=i,this._n=s,this.Of()}S(){this.if!==null&&(this.if(),this.if=null),this.nf!==null&&(this.nf(),this.nf=null),this.ef!==null&&(this.ef(),this.ef=null),this.rf!==null&&(this.rf(),this.rf=null),this.hf!==null&&(this.hf(),this.hf=null),this.sf!==null&&(this.sf(),this.sf=null),this.Af(),this.Rf()}Vf(e){this.ef&&this.ef();const i=this.Bf.bind(this);if(this.ef=()=>{this.Df.removeEventListener("mousemove",i)},this.Df.addEventListener("mousemove",i),this.wf(e))return;const s=this.gf(e);this.Tf(s,this.yf.If),this.vf=!0}Rf(){this.Hd!==null&&clearTimeout(this.Hd),this.jd=0,this.Hd=null,this.$d={nt:Number.NEGATIVE_INFINITY,st:Number.POSITIVE_INFINITY}}Cf(){this.qd!==null&&clearTimeout(this.qd),this.Ud=0,this.qd=null,this.Yd={nt:Number.NEGATIVE_INFINITY,st:Number.POSITIVE_INFINITY}}Bf(e){if(this.cf||this.Gd!==null||this.wf(e))return;const i=this.gf(e);this.Tf(i,this.yf.zf),this.vf=!0}Lf(e){const i=bh(e.changedTouches,be(this.ff));if(i===null||(this.df=Dd(e),this.lf!==null)||this.uf)return;this._f=!0;const s=this.xf(en(i),be(this.Gd)),{Ef:r,Nf:n,Mf:o}=s;if(this.Jd||!(o<5)){if(!this.Jd){const a=.5*r,l=n>=a&&!this._n.Ff(),c=a>n&&!this._n.Wf();l||c||(this.uf=!0),this.Jd=!0,this.tf=!0,this.Af(),this.Cf()}if(!this.uf){const a=this.gf(e,i);this.Sf(a,this.yf.jf),Po(e)}}}Hf(e){if(e.button!==0)return;const i=this.xf(en(e),be(this.Zd)),{Mf:s}=i;if(s>=5&&(this.Qd=!0,this.Rf()),this.Qd){const r=this.gf(e);this.Tf(r,this.yf.$f)}}xf(e,i){const s=Math.abs(i.nt-e.nt),r=Math.abs(i.st-e.st);return{Ef:s,Nf:r,Mf:s+r}}Uf(e){let i=bh(e.changedTouches,be(this.ff));if(i===null&&e.touches.length===0&&(i=e.changedTouches[0]),i===null)return;this.ff=null,this.df=Dd(e),this.Af(),this.Gd=null,this.hf&&(this.hf(),this.hf=null);const s=this.gf(e,i);if(this.Sf(s,this.yf.qf),++this.Ud,this.qd&&this.Ud>1){const{Mf:r}=this.xf(en(i),this.Yd);r<30&&!this.tf&&this.Sf(s,this.yf.kf),this.Cf()}else this.tf||(this.Sf(s,this.yf.Yf),this.yf.Yf&&Po(e));this.Ud===0&&Po(e),e.touches.length===0&&this.Kd&&(this.Kd=!1,Po(e))}mf(e){if(e.button!==0)return;const i=this.gf(e);if(this.Zd=null,this.cf=!1,this.rf&&(this.rf(),this.rf=null),Lv()&&this.Df.ownerDocument.documentElement.removeEventListener("mouseleave",this.pf),!this.wf(e))if(this.Tf(i,this.yf.Xf),++this.jd,this.Hd&&this.jd>1){const{Mf:s}=this.xf(en(e),this.$d);s<5&&!this.Qd&&this.Tf(i,this.yf.Pf),this.Rf()}else this.Qd||this.Tf(i,this.yf.Kf)}Af(){this.Xd!==null&&(clearTimeout(this.Xd),this.Xd=null)}Zf(e){if(this.ff!==null)return;const i=e.changedTouches[0];this.ff=i.identifier,this.df=Dd(e);const s=this.Df.ownerDocument.documentElement;this.tf=!1,this.Jd=!1,this.uf=!1,this.Gd=en(i),this.hf&&(this.hf(),this.hf=null);{const n=this.Lf.bind(this),o=this.Uf.bind(this);this.hf=()=>{s.removeEventListener("touchmove",n),s.removeEventListener("touchend",o)},s.addEventListener("touchmove",n,{passive:!1}),s.addEventListener("touchend",o,{passive:!1}),this.Af(),this.Xd=setTimeout(this.Gf.bind(this,e),240)}const r=this.gf(e,i);this.Sf(r,this.yf.Jf),this.qd||(this.Ud=0,this.qd=setTimeout(this.Cf.bind(this),500),this.Yd=en(i))}Qf(e){if(e.button!==0)return;const i=this.Df.ownerDocument.documentElement;Lv()&&i.addEventListener("mouseleave",this.pf),this.Qd=!1,this.Zd=en(e),this.rf&&(this.rf(),this.rf=null);{const r=this.Hf.bind(this),n=this.mf.bind(this);this.rf=()=>{i.removeEventListener("mousemove",r),i.removeEventListener("mouseup",n)},i.addEventListener("mousemove",r),i.addEventListener("mouseup",n)}if(this.cf=!0,this.wf(e))return;const s=this.gf(e);this.Tf(s,this.yf.tv),this.Hd||(this.jd=0,this.Hd=setTimeout(this.Rf.bind(this),500),this.$d=en(e))}Of(){this.Df.addEventListener("mouseenter",this.Vf.bind(this)),this.Df.addEventListener("touchcancel",this.Af.bind(this));{const e=this.Df.ownerDocument,i=s=>{this.yf.iv&&(s.composed&&this.Df.contains(s.composedPath()[0])||s.target&&this.Df.contains(s.target)||this.yf.iv())};this.nf=()=>{e.removeEventListener("touchstart",i)},this.if=()=>{e.removeEventListener("mousedown",i)},e.addEventListener("mousedown",i),e.addEventListener("touchstart",i,{passive:!0})}vh()&&(this.sf=()=>{this.Df.removeEventListener("dblclick",this.bf)},this.Df.addEventListener("dblclick",this.bf)),this.Df.addEventListener("mouseleave",this.nv.bind(this)),this.Df.addEventListener("touchstart",this.Zf.bind(this),{passive:!0}),$B(this.Df),this.Df.addEventListener("mousedown",this.Qf.bind(this)),this.sv(),this.Df.addEventListener("touchmove",()=>{},{passive:!1})}sv(){this.yf.ev===void 0&&this.yf.rv===void 0&&this.yf.hv===void 0||(this.Df.addEventListener("touchstart",e=>this.lv(e.touches),{passive:!0}),this.Df.addEventListener("touchmove",e=>{if(e.touches.length===2&&this.lf!==null&&this.yf.rv!==void 0){const i=Vv(e.touches[0],e.touches[1])/this.af;this.yf.rv(this.lf,i),Po(e)}},{passive:!1}),this.Df.addEventListener("touchend",e=>{this.lv(e.touches)}))}lv(e){e.length===1&&(this._f=!1),e.length!==2||this._f||this.Kd?this.av():this.ov(e)}ov(e){const i=this.Df.getBoundingClientRect()||{left:0,top:0};this.lf={nt:(e[0].clientX-i.left+(e[1].clientX-i.left))/2,st:(e[0].clientY-i.top+(e[1].clientY-i.top))/2},this.af=Vv(e[0],e[1]),this.yf.ev!==void 0&&this.yf.ev(),this.Af()}av(){this.lf!==null&&(this.lf=null,this.yf.hv!==void 0&&this.yf.hv())}nv(e){if(this.ef&&this.ef(),this.wf(e)||!this.vf)return;const i=this.gf(e);this.Tf(i,this.yf._v),this.vf=!vh()}Gf(e){const i=bh(e.touches,be(this.ff));if(i===null)return;const s=this.gf(e,i);this.Sf(s,this.yf.uv),this.tf=!0,this.Kd=!0}wf(e){return e.sourceCapabilities&&e.sourceCapabilities.firesTouchEvents!==void 0?e.sourceCapabilities.firesTouchEvents:Dd(e)<this.df+500}Sf(e,i){i&&i.call(this.yf,e)}Tf(e,i){i&&i.call(this.yf,e)}gf(e,i){const s=i||e,r=this.Df.getBoundingClientRect()||{left:0,top:0};return{clientX:s.clientX,clientY:s.clientY,pageX:s.pageX,pageY:s.pageY,screenX:s.screenX,screenY:s.screenY,localX:s.clientX-r.left,localY:s.clientY-r.top,ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey,metaKey:e.metaKey,cv:!e.type.startsWith("mouse")&&e.type!=="contextmenu"&&e.type!=="click",dv:e.type,fv:s.target,vv:e.view,pv:()=>{e.type!=="touchstart"&&Po(e)}}}}function Vv(t,e){const i=t.clientX-e.clientX,s=t.clientY-e.clientY;return Math.sqrt(i*i+s*s)}function Po(t){t.cancelable&&t.preventDefault()}function en(t){return{nt:t.pageX,st:t.pageY}}function Dd(t){return t.timeStamp||performance.now()}function bh(t,e){for(let i=0;i<t.length;++i)if(t[i].identifier===e)return t[i];return null}function kd(t){return{zc:t.zc,mv:{mr:t.bv.externalId},wv:t.bv.cursorStyle}}function NB(t,e,i){for(const s of t){const r=s.gt();if(r!==null&&r.pr){const n=r.pr(e,i);if(n!==null)return{vv:s,mv:n}}}return null}function wh(t,e){return i=>{var s,r,n,o;return((r=(s=i.Dt())===null||s===void 0?void 0:s.xa())!==null&&r!==void 0?r:"")!==e?[]:(o=(n=i.la)===null||n===void 0?void 0:n.call(i,t))!==null&&o!==void 0?o:[]}}class Wv{constructor(e,i,s,r){this.zi=null,this.gv=null,this.Mv=!1,this.xv=new kl(200),this.Zr=null,this.Sv=0,this.kv=!1,this.yv=()=>{this.kv||this.Qi.Cv().$t().Nh()},this.Tv=()=>{this.kv||this.Qi.Cv().$t().Nh()},this.Qi=e,this._n=i,this.mo=i.layout,this.yc=s,this.Pv=r==="left",this.Rv=wh("normal",r),this.Dv=wh("top",r),this.Ov=wh("bottom",r),this.Av=document.createElement("div"),this.Av.style.height="100%",this.Av.style.overflow="hidden",this.Av.style.width="25px",this.Av.style.left="0",this.Av.style.position="relative",this.Vv=ao(this.Av,jt({width:16,height:16})),this.Vv.subscribeSuggestedBitmapSizeChanged(this.yv);const n=this.Vv.canvasElement;n.style.position="absolute",n.style.zIndex="1",n.style.left="0",n.style.top="0",this.Bv=ao(this.Av,jt({width:16,height:16})),this.Bv.subscribeSuggestedBitmapSizeChanged(this.Tv);const o=this.Bv.canvasElement;o.style.position="absolute",o.style.zIndex="2",o.style.left="0",o.style.top="0";const a={tv:this.Iv.bind(this),Jf:this.Iv.bind(this),$f:this.zv.bind(this),jf:this.zv.bind(this),iv:this.Lv.bind(this),Xf:this.Ev.bind(this),qf:this.Ev.bind(this),Pf:this.Nv.bind(this),kf:this.Nv.bind(this),If:this.Fv.bind(this),_v:this.Wv.bind(this)};this.jv=new Lm(this.Bv.canvasElement,a,{Ff:()=>!this._n.handleScroll.vertTouchDrag,Wf:()=>!0})}S(){this.jv.S(),this.Bv.unsubscribeSuggestedBitmapSizeChanged(this.Tv),lo(this.Bv.canvasElement),this.Bv.dispose(),this.Vv.unsubscribeSuggestedBitmapSizeChanged(this.yv),lo(this.Vv.canvasElement),this.Vv.dispose(),this.zi!==null&&this.zi.$o().p(this),this.zi=null}Hv(){return this.Av}P(){return this.mo.fontSize}$v(){const e=this.yc.W();return this.Zr!==e.R&&(this.xv.Qe(),this.Zr=e.R),e}Uv(){if(this.zi===null)return 0;let e=0;const i=this.$v(),s=be(this.Vv.canvasElement.getContext("2d"));s.save();const r=this.zi.La();s.font=this.qv(),r.length>0&&(e=Math.max(this.xv.Mi(s,r[0].Za),this.xv.Mi(s,r[r.length-1].Za)));const n=this.Yv();for(let l=n.length;l--;){const c=this.xv.Mi(s,n[l].Zt());c>e&&(e=c)}const o=this.zi.Ct();if(o!==null&&this.gv!==null){const l=this.zi.fn(1,o),c=this.zi.fn(this.gv.height-2,o);e=Math.max(e,this.xv.Mi(s,this.zi.Ni(Math.floor(Math.min(l,c))+.11111111111111,o)),this.xv.Mi(s,this.zi.Ni(Math.ceil(Math.max(l,c))-.11111111111111,o)))}s.restore();const a=e||34;return pf(Math.ceil(i.C+i.T+i.B+i.I+5+a))}Xv(e){this.gv!==null&&Xr(this.gv,e)||(this.gv=e,this.kv=!0,this.Vv.resizeCanvasElement(e),this.Bv.resizeCanvasElement(e),this.kv=!1,this.Av.style.width=`${e.width}px`,this.Av.style.height=`${e.height}px`)}Kv(){return be(this.gv).width}Zi(e){this.zi!==e&&(this.zi!==null&&this.zi.$o().p(this),this.zi=e,e.$o().l(this.ao.bind(this),this))}Dt(){return this.zi}Qe(){const e=this.Qi.Zv();this.Qi.Cv().$t().A_(e,be(this.Dt()))}Gv(e){if(this.gv===null)return;if(e!==1){this.Jv(),this.Vv.applySuggestedBitmapSize();const s=ro(this.Vv);s!==null&&(s.useBitmapCoordinateSpace(r=>{this.Qv(r),this.Ae(r)}),this.Qi.tp(s,this.Ov),this.ip(s),this.Qi.tp(s,this.Rv),this.np(s))}this.Bv.applySuggestedBitmapSize();const i=ro(this.Bv);i!==null&&(i.useBitmapCoordinateSpace(({context:s,bitmapSize:r})=>{s.clearRect(0,0,r.width,r.height)}),this.sp(i),this.Qi.tp(i,this.Dv))}ep(){return this.Vv.bitmapSize}rp(e,i,s){const r=this.ep();r.width>0&&r.height>0&&e.drawImage(this.Vv.canvasElement,i,s)}bt(){var e;(e=this.zi)===null||e===void 0||e.La()}Iv(e){if(this.zi===null||this.zi.Ei()||!this._n.handleScale.axisPressedMouseMove.price)return;const i=this.Qi.Cv().$t(),s=this.Qi.Zv();this.Mv=!0,i.y_(s,this.zi,e.localY)}zv(e){if(this.zi===null||!this._n.handleScale.axisPressedMouseMove.price)return;const i=this.Qi.Cv().$t(),s=this.Qi.Zv(),r=this.zi;i.C_(s,r,e.localY)}Lv(){if(this.zi===null||!this._n.handleScale.axisPressedMouseMove.price)return;const e=this.Qi.Cv().$t(),i=this.Qi.Zv(),s=this.zi;this.Mv&&(this.Mv=!1,e.T_(i,s))}Ev(e){if(this.zi===null||!this._n.handleScale.axisPressedMouseMove.price)return;const i=this.Qi.Cv().$t(),s=this.Qi.Zv();this.Mv=!1,i.T_(s,this.zi)}Nv(e){this._n.handleScale.axisDoubleClickReset.price&&this.Qe()}Fv(e){this.zi!==null&&(!this.Qi.Cv().$t().W().handleScale.axisPressedMouseMove.price||this.zi.fh()||this.zi.Co()||this.hp(1))}Wv(e){this.hp(0)}Yv(){const e=[],i=this.zi===null?void 0:this.zi;return(s=>{for(let r=0;r<s.length;++r){const n=s[r].Tn(this.Qi.Zv(),i);for(let o=0;o<n.length;o++)e.push(n[o])}})(this.Qi.Zv().No()),e}Qv({context:e,bitmapSize:i}){const{width:s,height:r}=i,n=this.Qi.Zv().$t(),o=n.q(),a=n._d();o===a?rc(e,0,0,s,r,o):lS(e,0,0,s,r,o,a)}Ae({context:e,bitmapSize:i,horizontalPixelRatio:s}){if(this.gv===null||this.zi===null||!this.zi.W().borderVisible)return;e.fillStyle=this.zi.W().borderColor;const r=Math.max(1,Math.floor(this.$v().C*s));let n;n=this.Pv?i.width-r:0,e.fillRect(n,0,r,i.height)}ip(e){if(this.gv===null||this.zi===null)return;const i=this.zi.La(),s=this.zi.W(),r=this.$v(),n=this.Pv?this.gv.width-r.T:0;s.borderVisible&&s.ticksVisible&&e.useBitmapCoordinateSpace(({context:o,horizontalPixelRatio:a,verticalPixelRatio:l})=>{o.fillStyle=s.borderColor;const c=Math.max(1,Math.floor(l)),f=Math.floor(.5*l),v=Math.round(r.T*a);o.beginPath();for(const S of i)o.rect(Math.floor(n*a),Math.round(S.Aa*l)-f,v,c);o.fill()}),e.useMediaCoordinateSpace(({context:o})=>{var a;o.font=this.qv(),o.fillStyle=(a=s.textColor)!==null&&a!==void 0?a:this.mo.textColor,o.textAlign=this.Pv?"right":"left",o.textBaseline="middle";const l=this.Pv?Math.round(n-r.B):Math.round(n+r.T+r.B),c=i.map(f=>this.xv.gi(o,f.Za));for(let f=i.length;f--;){const v=i[f];o.fillText(v.Za,l,v.Aa+c[f])}})}Jv(){if(this.gv===null||this.zi===null)return;let e=this.gv.height/2;const i=[],s=this.zi.No().slice(),r=this.Qi.Zv(),n=this.$v();this.zi===r.cr()&&this.Qi.Zv().No().forEach(l=>{r.ur(l)&&s.push(l)});const o=this.zi.Ta()[0],a=this.zi;s.forEach(l=>{const c=l.Tn(r,a);c.forEach(f=>{f.Oi(null),f.Ai()&&i.push(f)}),o===l&&c.length>0&&(e=c[0].Si())}),i.forEach(l=>l.Oi(l.Si())),this.zi.W().alignLabels&&this.lp(i,n,e)}lp(e,i,s){if(this.gv===null)return;const r=e.filter(o=>o.Si()<=s),n=e.filter(o=>o.Si()>s);r.sort((o,a)=>a.Si()-o.Si()),r.length&&n.length&&n.push(r[0]),n.sort((o,a)=>o.Si()-a.Si());for(const o of e){const a=Math.floor(o.Bt(i)/2),l=o.Si();l>-a&&l<a&&o.Oi(a),l>this.gv.height-a&&l<this.gv.height+a&&o.Oi(this.gv.height-a)}for(let o=1;o<r.length;o++){const a=r[o],l=r[o-1],c=l.Bt(i,!1),f=a.Si(),v=l.Di();f>v-c&&a.Oi(v-c)}for(let o=1;o<n.length;o++){const a=n[o],l=n[o-1],c=l.Bt(i,!0),f=a.Si(),v=l.Di();f<v+c&&a.Oi(v+c)}}np(e){if(this.gv===null)return;const i=this.Yv(),s=this.$v(),r=this.Pv?"right":"left";i.forEach(n=>{n.Vi()&&n.gt(be(this.zi)).K(e,s,this.xv,r)})}sp(e){if(this.gv===null||this.zi===null)return;const i=this.Qi.Cv().$t(),s=[],r=this.Qi.Zv(),n=i.Wc().Tn(r,this.zi);n.length&&s.push(n);const o=this.$v(),a=this.Pv?"right":"left";s.forEach(l=>{l.forEach(c=>{c.gt(be(this.zi)).K(e,o,this.xv,a)})})}hp(e){this.Av.style.cursor=e===1?"ns-resize":"default"}ao(){const e=this.Uv();this.Sv<e&&this.Qi.Cv().$t().$l(),this.Sv=e}qv(){return ra(this.mo.fontSize,this.mo.fontFamily)}}function LB(t,e){var i,s;return(s=(i=t.ra)===null||i===void 0?void 0:i.call(t,e))!==null&&s!==void 0?s:[]}function Cd(t,e){var i,s;return(s=(i=t.Cn)===null||i===void 0?void 0:i.call(t,e))!==null&&s!==void 0?s:[]}function VB(t,e){var i,s;return(s=(i=t.Gi)===null||i===void 0?void 0:i.call(t,e))!==null&&s!==void 0?s:[]}function WB(t,e){var i,s;return(s=(i=t.na)===null||i===void 0?void 0:i.call(t,e))!==null&&s!==void 0?s:[]}class Vm{constructor(e,i){this.gv=jt({width:0,height:0}),this.ap=null,this.op=null,this._p=null,this.up=!1,this.cp=new ri,this.dp=new ri,this.fp=0,this.vp=!1,this.pp=null,this.mp=!1,this.bp=null,this.wp=null,this.kv=!1,this.yv=()=>{this.kv||this.gp===null||this.Hi().Nh()},this.Tv=()=>{this.kv||this.gp===null||this.Hi().Nh()},this.Mp=e,this.gp=i,this.gp.I_().l(this.xp.bind(this),this,!0),this.Sp=document.createElement("td"),this.Sp.style.padding="0",this.Sp.style.position="relative";const s=document.createElement("div");s.style.width="100%",s.style.height="100%",s.style.position="relative",s.style.overflow="hidden",this.kp=document.createElement("td"),this.kp.style.padding="0",this.yp=document.createElement("td"),this.yp.style.padding="0",this.Sp.appendChild(s),this.Vv=ao(s,jt({width:16,height:16})),this.Vv.subscribeSuggestedBitmapSizeChanged(this.yv);const r=this.Vv.canvasElement;r.style.position="absolute",r.style.zIndex="1",r.style.left="0",r.style.top="0",this.Bv=ao(s,jt({width:16,height:16})),this.Bv.subscribeSuggestedBitmapSizeChanged(this.Tv);const n=this.Bv.canvasElement;n.style.position="absolute",n.style.zIndex="2",n.style.left="0",n.style.top="0",this.Cp=document.createElement("tr"),this.Cp.appendChild(this.kp),this.Cp.appendChild(this.Sp),this.Cp.appendChild(this.yp),this.Tp(),this.jv=new Lm(this.Bv.canvasElement,this,{Ff:()=>this.pp===null&&!this.Mp.W().handleScroll.vertTouchDrag,Wf:()=>this.pp===null&&!this.Mp.W().handleScroll.horzTouchDrag})}S(){this.ap!==null&&this.ap.S(),this.op!==null&&this.op.S(),this.Bv.unsubscribeSuggestedBitmapSizeChanged(this.Tv),lo(this.Bv.canvasElement),this.Bv.dispose(),this.Vv.unsubscribeSuggestedBitmapSizeChanged(this.yv),lo(this.Vv.canvasElement),this.Vv.dispose(),this.gp!==null&&this.gp.I_().p(this),this.jv.S()}Zv(){return be(this.gp)}Pp(e){this.gp!==null&&this.gp.I_().p(this),this.gp=e,this.gp!==null&&this.gp.I_().l(Vm.prototype.xp.bind(this),this,!0),this.Tp()}Cv(){return this.Mp}Hv(){return this.Cp}Tp(){if(this.gp!==null&&(this.Rp(),this.Hi().wt().length!==0)){if(this.ap!==null){const e=this.gp.S_();this.ap.Zi(be(e))}if(this.op!==null){const e=this.gp.k_();this.op.Zi(be(e))}}}Dp(){this.ap!==null&&this.ap.bt(),this.op!==null&&this.op.bt()}v_(){return this.gp!==null?this.gp.v_():0}p_(e){this.gp&&this.gp.p_(e)}If(e){if(!this.gp)return;this.Op();const i=e.localX,s=e.localY;this.Ap(i,s,e)}tv(e){this.Op(),this.Vp(),this.Ap(e.localX,e.localY,e)}zf(e){var i;if(!this.gp)return;this.Op();const s=e.localX,r=e.localY;this.Ap(s,r,e);const n=this.pr(s,r);this.Mp.Bp((i=n==null?void 0:n.wv)!==null&&i!==void 0?i:null),this.Hi().Ic(n&&{zc:n.zc,mv:n.mv})}Kf(e){this.gp!==null&&(this.Op(),this.Ip(e))}Pf(e){this.gp!==null&&this.zp(this.dp,e)}kf(e){this.Pf(e)}$f(e){this.Op(),this.Lp(e),this.Ap(e.localX,e.localY,e)}Xf(e){this.gp!==null&&(this.Op(),this.vp=!1,this.Ep(e))}Yf(e){this.gp!==null&&this.Ip(e)}uv(e){if(this.vp=!0,this.pp===null){const i={x:e.localX,y:e.localY};this.Np(i,i,e)}}_v(e){this.gp!==null&&(this.Op(),this.gp.$t().Ic(null),this.Fp())}Wp(){return this.cp}jp(){return this.dp}ev(){this.fp=1,this.Hi().Hn()}rv(e,i){if(!this.Mp.W().handleScale.pinch)return;const s=5*(i-this.fp);this.fp=i,this.Hi().qc(e.nt,s)}Jf(e){this.vp=!1,this.mp=this.pp!==null,this.Vp();const i=this.Hi().Wc();this.pp!==null&&i.yt()&&(this.bp={x:i.Yt(),y:i.Xt()},this.pp={x:e.localX,y:e.localY})}jf(e){if(this.gp===null)return;const i=e.localX,s=e.localY;if(this.pp===null)this.Lp(e);else{this.mp=!1;const r=be(this.bp),n=r.x+(i-this.pp.x),o=r.y+(s-this.pp.y);this.Ap(n,o,e)}}qf(e){this.Cv().W().trackingMode.exitMode===0&&(this.mp=!0),this.Hp(),this.Ep(e)}pr(e,i){const s=this.gp;return s===null?null:function(r,n,o){const a=r.No(),l=function(c,f,v){var S,I;let C,D;for(const se of c){const oe=(I=(S=se.oa)===null||S===void 0?void 0:S.call(se,f,v))!==null&&I!==void 0?I:[];for(const ee of oe)J=ee.zOrder,(!(V=C==null?void 0:C.zOrder)||J==="top"&&V!=="top"||J==="normal"&&V==="bottom")&&(C=ee,D=se)}var J,V;return C&&D?{bv:C,zc:D}:null}(a,n,o);if((l==null?void 0:l.bv.zOrder)==="top")return kd(l);for(const c of a){if(l&&l.zc===c&&l.bv.zOrder!=="bottom"&&!l.bv.isBackground)return kd(l);const f=NB(c.Cn(r),n,o);if(f!==null)return{zc:c,vv:f.vv,mv:f.mv};if(l&&l.zc===c&&l.bv.zOrder!=="bottom"&&l.bv.isBackground)return kd(l)}return l!=null&&l.bv?kd(l):null}(s,e,i)}$p(e,i){be(i==="left"?this.ap:this.op).Xv(jt({width:e,height:this.gv.height}))}Up(){return this.gv}Xv(e){Xr(this.gv,e)||(this.gv=e,this.kv=!0,this.Vv.resizeCanvasElement(e),this.Bv.resizeCanvasElement(e),this.kv=!1,this.Sp.style.width=e.width+"px",this.Sp.style.height=e.height+"px")}qp(){const e=be(this.gp);e.x_(e.S_()),e.x_(e.k_());for(const i of e.Ta())if(e.ur(i)){const s=i.Dt();s!==null&&e.x_(s),i.Rn()}}ep(){return this.Vv.bitmapSize}rp(e,i,s){const r=this.ep();r.width>0&&r.height>0&&e.drawImage(this.Vv.canvasElement,i,s)}Gv(e){if(e===0||this.gp===null)return;if(e>1&&this.qp(),this.ap!==null&&this.ap.Gv(e),this.op!==null&&this.op.Gv(e),e!==1){this.Vv.applySuggestedBitmapSize();const s=ro(this.Vv);s!==null&&(s.useBitmapCoordinateSpace(r=>{this.Qv(r)}),this.gp&&(this.Yp(s,LB),this.Xp(s),this.Kp(s),this.Yp(s,Cd),this.Yp(s,VB)))}this.Bv.applySuggestedBitmapSize();const i=ro(this.Bv);i!==null&&(i.useBitmapCoordinateSpace(({context:s,bitmapSize:r})=>{s.clearRect(0,0,r.width,r.height)}),this.Zp(i),this.Yp(i,WB))}Gp(){return this.ap}Jp(){return this.op}tp(e,i){this.Yp(e,i)}xp(){this.gp!==null&&this.gp.I_().p(this),this.gp=null}Ip(e){this.zp(this.cp,e)}zp(e,i){const s=i.localX,r=i.localY;e.M()&&e.m(this.Hi().St().Vu(s),{x:s,y:r},i)}Qv({context:e,bitmapSize:i}){const{width:s,height:r}=i,n=this.Hi(),o=n.q(),a=n._d();o===a?rc(e,0,0,s,r,a):lS(e,0,0,s,r,o,a)}Xp(e){const i=be(this.gp).z_().Fh().gt();i!==null&&i.K(e,!1)}Kp(e){const i=this.Hi().Fc();this.Qp(e,Cd,gf,i),this.Qp(e,Cd,Jd,i)}Zp(e){this.Qp(e,Cd,Jd,this.Hi().Wc())}Yp(e,i){const s=be(this.gp).No();for(const r of s)this.Qp(e,i,gf,r);for(const r of s)this.Qp(e,i,Jd,r)}Qp(e,i,s,r){const n=be(this.gp),o=n.$t().Bc(),a=o!==null&&o.zc===r,l=o!==null&&a&&o.mv!==void 0?o.mv.br:void 0;vf(i,c=>s(c,e,a,l),r,n)}Rp(){if(this.gp===null)return;const e=this.Mp,i=this.gp.S_().W().visible,s=this.gp.k_().W().visible;i||this.ap===null||(this.kp.removeChild(this.ap.Hv()),this.ap.S(),this.ap=null),s||this.op===null||(this.yp.removeChild(this.op.Hv()),this.op.S(),this.op=null);const r=e.$t().ed();i&&this.ap===null&&(this.ap=new Wv(this,e.W(),r,"left"),this.kp.appendChild(this.ap.Hv())),s&&this.op===null&&(this.op=new Wv(this,e.W(),r,"right"),this.yp.appendChild(this.op.Hv()))}tm(e){return e.cv&&this.vp||this.pp!==null}im(e){return Math.max(0,Math.min(e,this.gv.width-1))}nm(e){return Math.max(0,Math.min(e,this.gv.height-1))}Ap(e,i,s){this.Hi().Qc(this.im(e),this.nm(i),s,be(this.gp))}Fp(){this.Hi().nd()}Hp(){this.mp&&(this.pp=null,this.Fp())}Np(e,i,s){this.pp=e,this.mp=!1,this.Ap(i.x,i.y,s);const r=this.Hi().Wc();this.bp={x:r.Yt(),y:r.Xt()}}Hi(){return this.Mp.$t()}Ep(e){if(!this.up)return;const i=this.Hi(),s=this.Zv();if(i.D_(s,s.dn()),this._p=null,this.up=!1,i.Zc(),this.wp!==null){const r=performance.now(),n=i.St();this.wp.Pr(n.Lu(),r),this.wp.Yu(r)||i.qn(this.wp)}}Op(){this.pp=null}Vp(){if(this.gp){if(this.Hi().Hn(),document.activeElement!==document.body&&document.activeElement!==document.documentElement)be(document.activeElement).blur();else{const e=document.getSelection();e!==null&&e.removeAllRanges()}!this.gp.dn().Ei()&&this.Hi().St().Ei()}}Lp(e){if(this.gp===null)return;const i=this.Hi(),s=i.St();if(s.Ei())return;const r=this.Mp.W(),n=r.handleScroll,o=r.kineticScroll;if((!n.pressedMouseMove||e.cv)&&(!n.horzTouchDrag&&!n.vertTouchDrag||!e.cv))return;const a=this.gp.dn(),l=performance.now();if(this._p!==null||this.tm(e)||(this._p={x:e.clientX,y:e.clientY,yd:l,sm:e.localX,rm:e.localY}),this._p!==null&&!this.up&&(this._p.x!==e.clientX||this._p.y!==e.clientY)){if(e.cv&&o.touch||!e.cv&&o.mouse){const c=s.ee();this.wp=new OB(.2/c,7/c,.997,15/c),this.wp.Fd(s.Lu(),this._p.yd)}else this.wp=null;a.Ei()||i.P_(this.gp,a,e.localY),i.Xc(e.localX),this.up=!0}this.up&&(a.Ei()||i.R_(this.gp,a,e.localY),i.Kc(e.localX),this.wp!==null&&this.wp.Fd(s.Lu(),l))}}class Fv{constructor(e,i,s,r,n){this.ft=!0,this.gv=jt({width:0,height:0}),this.yv=()=>this.Gv(3),this.Pv=e==="left",this.yc=s.ed,this._n=i,this.hm=r,this.lm=n,this.Av=document.createElement("div"),this.Av.style.width="25px",this.Av.style.height="100%",this.Av.style.overflow="hidden",this.Vv=ao(this.Av,jt({width:16,height:16})),this.Vv.subscribeSuggestedBitmapSizeChanged(this.yv)}S(){this.Vv.unsubscribeSuggestedBitmapSizeChanged(this.yv),lo(this.Vv.canvasElement),this.Vv.dispose()}Hv(){return this.Av}Up(){return this.gv}Xv(e){Xr(this.gv,e)||(this.gv=e,this.Vv.resizeCanvasElement(e),this.Av.style.width=`${e.width}px`,this.Av.style.height=`${e.height}px`,this.ft=!0)}Gv(e){if(e<3&&!this.ft||this.gv.width===0||this.gv.height===0)return;this.ft=!1,this.Vv.applySuggestedBitmapSize();const i=ro(this.Vv);i!==null&&i.useBitmapCoordinateSpace(s=>{this.Qv(s),this.Ae(s)})}ep(){return this.Vv.bitmapSize}rp(e,i,s){const r=this.ep();r.width>0&&r.height>0&&e.drawImage(this.Vv.canvasElement,i,s)}Ae({context:e,bitmapSize:i,horizontalPixelRatio:s,verticalPixelRatio:r}){if(!this.hm())return;e.fillStyle=this._n.timeScale.borderColor;const n=Math.floor(this.yc.W().C*s),o=Math.floor(this.yc.W().C*r),a=this.Pv?i.width-n:0;e.fillRect(a,0,n,o)}Qv({context:e,bitmapSize:i}){rc(e,0,0,i.width,i.height,this.lm())}}function Wm(t){return e=>{var i,s;return(s=(i=e.aa)===null||i===void 0?void 0:i.call(e,t))!==null&&s!==void 0?s:[]}}const FB=Wm("normal"),BB=Wm("top"),zB=Wm("bottom");class jB{constructor(e,i){this.am=null,this.om=null,this.k=null,this._m=!1,this.gv=jt({width:0,height:0}),this.um=new ri,this.xv=new kl(5),this.kv=!1,this.yv=()=>{this.kv||this.Mp.$t().Nh()},this.Tv=()=>{this.kv||this.Mp.$t().Nh()},this.Mp=e,this.N_=i,this._n=e.W().layout,this.dm=document.createElement("tr"),this.fm=document.createElement("td"),this.fm.style.padding="0",this.vm=document.createElement("td"),this.vm.style.padding="0",this.Av=document.createElement("td"),this.Av.style.height="25px",this.Av.style.padding="0",this.pm=document.createElement("div"),this.pm.style.width="100%",this.pm.style.height="100%",this.pm.style.position="relative",this.pm.style.overflow="hidden",this.Av.appendChild(this.pm),this.Vv=ao(this.pm,jt({width:16,height:16})),this.Vv.subscribeSuggestedBitmapSizeChanged(this.yv);const s=this.Vv.canvasElement;s.style.position="absolute",s.style.zIndex="1",s.style.left="0",s.style.top="0",this.Bv=ao(this.pm,jt({width:16,height:16})),this.Bv.subscribeSuggestedBitmapSizeChanged(this.Tv);const r=this.Bv.canvasElement;r.style.position="absolute",r.style.zIndex="2",r.style.left="0",r.style.top="0",this.dm.appendChild(this.fm),this.dm.appendChild(this.Av),this.dm.appendChild(this.vm),this.bm(),this.Mp.$t().f_().l(this.bm.bind(this),this),this.jv=new Lm(this.Bv.canvasElement,this,{Ff:()=>!0,Wf:()=>!this.Mp.W().handleScroll.horzTouchDrag})}S(){this.jv.S(),this.am!==null&&this.am.S(),this.om!==null&&this.om.S(),this.Bv.unsubscribeSuggestedBitmapSizeChanged(this.Tv),lo(this.Bv.canvasElement),this.Bv.dispose(),this.Vv.unsubscribeSuggestedBitmapSizeChanged(this.yv),lo(this.Vv.canvasElement),this.Vv.dispose()}Hv(){return this.dm}wm(){return this.am}gm(){return this.om}tv(e){if(this._m)return;this._m=!0;const i=this.Mp.$t();!i.St().Ei()&&this.Mp.W().handleScale.axisPressedMouseMove.time&&i.Uc(e.localX)}Jf(e){this.tv(e)}iv(){const e=this.Mp.$t();!e.St().Ei()&&this._m&&(this._m=!1,this.Mp.W().handleScale.axisPressedMouseMove.time&&e.Jc())}$f(e){const i=this.Mp.$t();!i.St().Ei()&&this.Mp.W().handleScale.axisPressedMouseMove.time&&i.Gc(e.localX)}jf(e){this.$f(e)}Xf(){this._m=!1;const e=this.Mp.$t();e.St().Ei()&&!this.Mp.W().handleScale.axisPressedMouseMove.time||e.Jc()}qf(){this.Xf()}Pf(){this.Mp.W().handleScale.axisDoubleClickReset.time&&this.Mp.$t().Xn()}kf(){this.Pf()}If(){this.Mp.$t().W().handleScale.axisPressedMouseMove.time&&this.hp(1)}_v(){this.hp(0)}Up(){return this.gv}Mm(){return this.um}xm(e,i,s){Xr(this.gv,e)||(this.gv=e,this.kv=!0,this.Vv.resizeCanvasElement(e),this.Bv.resizeCanvasElement(e),this.kv=!1,this.Av.style.width=`${e.width}px`,this.Av.style.height=`${e.height}px`,this.um.m(e)),this.am!==null&&this.am.Xv(jt({width:i,height:e.height})),this.om!==null&&this.om.Xv(jt({width:s,height:e.height}))}Sm(){const e=this.km();return Math.ceil(e.C+e.T+e.P+e.L+e.V+e.ym)}bt(){this.Mp.$t().St().La()}ep(){return this.Vv.bitmapSize}rp(e,i,s){const r=this.ep();r.width>0&&r.height>0&&e.drawImage(this.Vv.canvasElement,i,s)}Gv(e){if(e===0)return;if(e!==1){this.Vv.applySuggestedBitmapSize();const s=ro(this.Vv);s!==null&&(s.useBitmapCoordinateSpace(r=>{this.Qv(r),this.Ae(r),this.Cm(s,zB)}),this.ip(s),this.Cm(s,FB)),this.am!==null&&this.am.Gv(e),this.om!==null&&this.om.Gv(e)}this.Bv.applySuggestedBitmapSize();const i=ro(this.Bv);i!==null&&(i.useBitmapCoordinateSpace(({context:s,bitmapSize:r})=>{s.clearRect(0,0,r.width,r.height)}),this.Tm([...this.Mp.$t().wt(),this.Mp.$t().Wc()],i),this.Cm(i,BB))}Cm(e,i){const s=this.Mp.$t().wt();for(const r of s)vf(i,n=>gf(n,e,!1,void 0),r,void 0);for(const r of s)vf(i,n=>Jd(n,e,!1,void 0),r,void 0)}Qv({context:e,bitmapSize:i}){rc(e,0,0,i.width,i.height,this.Mp.$t()._d())}Ae({context:e,bitmapSize:i,verticalPixelRatio:s}){if(this.Mp.W().timeScale.borderVisible){e.fillStyle=this.Pm();const r=Math.max(1,Math.floor(this.km().C*s));e.fillRect(0,0,i.width,r)}}ip(e){const i=this.Mp.$t().St(),s=i.La();if(!s||s.length===0)return;const r=this.N_.maxTickMarkWeight(s),n=this.km(),o=i.W();o.borderVisible&&o.ticksVisible&&e.useBitmapCoordinateSpace(({context:a,horizontalPixelRatio:l,verticalPixelRatio:c})=>{a.strokeStyle=this.Pm(),a.fillStyle=this.Pm();const f=Math.max(1,Math.floor(l)),v=Math.floor(.5*l);a.beginPath();const S=Math.round(n.T*c);for(let I=s.length;I--;){const C=Math.round(s[I].coord*l);a.rect(C-v,0,f,S)}a.fill()}),e.useMediaCoordinateSpace(({context:a})=>{const l=n.C+n.T+n.L+n.P/2;a.textAlign="center",a.textBaseline="middle",a.fillStyle=this.$(),a.font=this.qv();for(const c of s)if(c.weight<r){const f=c.needAlignCoordinate?this.Rm(a,c.coord,c.label):c.coord;a.fillText(c.label,f,l)}this.Mp.W().timeScale.allowBoldLabels&&(a.font=this.Dm());for(const c of s)if(c.weight>=r){const f=c.needAlignCoordinate?this.Rm(a,c.coord,c.label):c.coord;a.fillText(c.label,f,l)}})}Rm(e,i,s){const r=this.xv.Mi(e,s),n=r/2,o=Math.floor(i-n)+.5;return o<0?i+=Math.abs(0-o):o+r>this.gv.width&&(i-=Math.abs(this.gv.width-(o+r))),i}Tm(e,i){const s=this.km();for(const r of e)for(const n of r.Ji())n.gt().K(i,s)}Pm(){return this.Mp.W().timeScale.borderColor}$(){return this._n.textColor}j(){return this._n.fontSize}qv(){return ra(this.j(),this._n.fontFamily)}Dm(){return ra(this.j(),this._n.fontFamily,"bold")}km(){this.k===null&&(this.k={C:1,N:NaN,L:NaN,V:NaN,Wi:NaN,T:5,P:NaN,R:"",Fi:new kl,ym:0});const e=this.k,i=this.qv();if(e.R!==i){const s=this.j();e.P=s,e.R=i,e.L=3*s/12,e.V=3*s/12,e.Wi=9*s/12,e.N=0,e.ym=4*s/12,e.Fi.Qe()}return this.k}hp(e){this.Av.style.cursor=e===1?"ew-resize":"default"}bm(){const e=this.Mp.$t(),i=e.W();i.leftPriceScale.visible||this.am===null||(this.fm.removeChild(this.am.Hv()),this.am.S(),this.am=null),i.rightPriceScale.visible||this.om===null||(this.vm.removeChild(this.om.Hv()),this.om.S(),this.om=null);const s={ed:this.Mp.$t().ed()},r=()=>i.leftPriceScale.borderVisible&&e.St().W().borderVisible,n=()=>e._d();i.leftPriceScale.visible&&this.am===null&&(this.am=new Fv("left",i,s,r,n),this.fm.appendChild(this.am.Hv())),i.rightPriceScale.visible&&this.om===null&&(this.om=new Fv("right",i,s,r,n),this.vm.appendChild(this.om.Hv()))}}const HB=!!oa&&!!navigator.userAgentData&&navigator.userAgentData.brands.some(t=>t.brand.includes("Chromium"))&&!!oa&&(!((Sh=navigator==null?void 0:navigator.userAgentData)===null||Sh===void 0)&&Sh.platform?navigator.userAgentData.platform==="Windows":navigator.userAgent.toLowerCase().indexOf("win")>=0);var Sh;class UB{constructor(e,i,s){var r;this.Om=[],this.Am=0,this.Qa=0,this.e_=0,this.Vm=0,this.Bm=0,this.Im=null,this.zm=!1,this.cp=new ri,this.dp=new ri,this.xc=new ri,this.Lm=null,this.Em=null,this.Nm=e,this._n=i,this.N_=s,this.dm=document.createElement("div"),this.dm.classList.add("tv-lightweight-charts"),this.dm.style.overflow="hidden",this.dm.style.direction="ltr",this.dm.style.width="100%",this.dm.style.height="100%",(r=this.dm).style.userSelect="none",r.style.webkitUserSelect="none",r.style.msUserSelect="none",r.style.MozUserSelect="none",r.style.webkitTapHighlightColor="transparent",this.Fm=document.createElement("table"),this.Fm.setAttribute("cellspacing","0"),this.dm.appendChild(this.Fm),this.Wm=this.jm.bind(this),Th(this._n)&&this.Hm(!0),this.Hi=new CB(this.kc.bind(this),this._n,s),this.$t().jc().l(this.$m.bind(this),this),this.Um=new jB(this,this.N_),this.Fm.appendChild(this.Um.Hv());const n=i.autoSize&&this.qm();let o=this._n.width,a=this._n.height;if(n||o===0||a===0){const l=e.getBoundingClientRect();o=o||l.width,a=a||l.height}this.Ym(o,a),this.Xm(),e.appendChild(this.dm),this.Km(),this.Hi.St().Gu().l(this.Hi.$l.bind(this.Hi),this),this.Hi.f_().l(this.Hi.$l.bind(this.Hi),this)}$t(){return this.Hi}W(){return this._n}Zm(){return this.Om}Gm(){return this.Um}S(){this.Hm(!1),this.Am!==0&&window.cancelAnimationFrame(this.Am),this.Hi.jc().p(this),this.Hi.St().Gu().p(this),this.Hi.f_().p(this),this.Hi.S();for(const e of this.Om)this.Fm.removeChild(e.Hv()),e.Wp().p(this),e.jp().p(this),e.S();this.Om=[],be(this.Um).S(),this.dm.parentElement!==null&&this.dm.parentElement.removeChild(this.dm),this.xc.S(),this.cp.S(),this.dp.S(),this.Jm()}Ym(e,i,s=!1){if(this.Qa===i&&this.e_===e)return;const r=function(a){const l=Math.floor(a.width),c=Math.floor(a.height);return jt({width:l-l%2,height:c-c%2})}(jt({width:e,height:i}));this.Qa=r.height,this.e_=r.width;const n=this.Qa+"px",o=this.e_+"px";be(this.dm).style.height=n,be(this.dm).style.width=o,this.Fm.style.height=n,this.Fm.style.width=o,s?this.Qm(Ii.ns(),performance.now()):this.Hi.$l()}Gv(e){e===void 0&&(e=Ii.ns());for(let i=0;i<this.Om.length;i++)this.Om[i].Gv(e.Wn(i).En);this._n.timeScale.visible&&this.Um.Gv(e.Fn())}Eh(e){const i=Th(this._n);this.Hi.Eh(e);const s=Th(this._n);s!==i&&this.Hm(s),this.Km(),this.tb(e)}Wp(){return this.cp}jp(){return this.dp}jc(){return this.xc}ib(){this.Im!==null&&(this.Qm(this.Im,performance.now()),this.Im=null);const e=this.nb(null),i=document.createElement("canvas");i.width=e.width,i.height=e.height;const s=be(i.getContext("2d"));return this.nb(s),i}sb(e){return e==="left"&&!this.eb()||e==="right"&&!this.rb()||this.Om.length===0?0:be(e==="left"?this.Om[0].Gp():this.Om[0].Jp()).Kv()}hb(){return this._n.autoSize&&this.Lm!==null}lb(){return this.dm}Bp(e){this.Em=e,this.Em?this.lb().style.setProperty("cursor",e):this.lb().style.removeProperty("cursor")}ab(){return this.Em}ob(){return Yi(this.Om[0]).Up()}tb(e){(e.autoSize!==void 0||!this.Lm||e.width===void 0&&e.height===void 0)&&(e.autoSize&&!this.Lm&&this.qm(),e.autoSize===!1&&this.Lm!==null&&this.Jm(),e.autoSize||e.width===void 0&&e.height===void 0||this.Ym(e.width||this.e_,e.height||this.Qa))}nb(e){let i=0,s=0;const r=this.Om[0],n=(a,l)=>{let c=0;for(let f=0;f<this.Om.length;f++){const v=this.Om[f],S=be(a==="left"?v.Gp():v.Jp()),I=S.ep();e!==null&&S.rp(e,l,c),c+=I.height}};this.eb()&&(n("left",0),i+=be(r.Gp()).ep().width);for(let a=0;a<this.Om.length;a++){const l=this.Om[a],c=l.ep();e!==null&&l.rp(e,i,s),s+=c.height}i+=r.ep().width,this.rb()&&(n("right",i),i+=be(r.Jp()).ep().width);const o=(a,l,c)=>{be(a==="left"?this.Um.wm():this.Um.gm()).rp(be(e),l,c)};if(this._n.timeScale.visible){const a=this.Um.ep();if(e!==null){let l=0;this.eb()&&(o("left",l,s),l=be(r.Gp()).ep().width),this.Um.rp(e,l,s),l+=a.width,this.rb()&&o("right",l,s)}s+=a.height}return jt({width:i,height:s})}_b(){let e=0,i=0,s=0;for(const C of this.Om)this.eb()&&(i=Math.max(i,be(C.Gp()).Uv(),this._n.leftPriceScale.minimumWidth)),this.rb()&&(s=Math.max(s,be(C.Jp()).Uv(),this._n.rightPriceScale.minimumWidth)),e+=C.v_();i=pf(i),s=pf(s);const r=this.e_,n=this.Qa,o=Math.max(r-i-s,0),a=this._n.timeScale.visible;let l=a?Math.max(this.Um.Sm(),this._n.timeScale.minimumHeight):0;var c;l=(c=l)+c%2;const f=0+l,v=n<f?0:n-f,S=v/e;let I=0;for(let C=0;C<this.Om.length;++C){const D=this.Om[C];D.Pp(this.Hi.Nc()[C]);let J=0,V=0;V=C===this.Om.length-1?v-I:Math.round(D.v_()*S),J=Math.max(V,2),I+=J,D.Xv(jt({width:o,height:J})),this.eb()&&D.$p(i,"left"),this.rb()&&D.$p(s,"right"),D.Zv()&&this.Hi.Hc(D.Zv(),J)}this.Um.xm(jt({width:a?o:0,height:l}),a?i:0,a?s:0),this.Hi.m_(o),this.Vm!==i&&(this.Vm=i),this.Bm!==s&&(this.Bm=s)}Hm(e){e?this.dm.addEventListener("wheel",this.Wm,{passive:!1}):this.dm.removeEventListener("wheel",this.Wm)}ub(e){switch(e.deltaMode){case e.DOM_DELTA_PAGE:return 120;case e.DOM_DELTA_LINE:return 32}return HB?1/window.devicePixelRatio:1}jm(e){if(!(e.deltaX!==0&&this._n.handleScroll.mouseWheel||e.deltaY!==0&&this._n.handleScale.mouseWheel))return;const i=this.ub(e),s=i*e.deltaX/100,r=-i*e.deltaY/100;if(e.cancelable&&e.preventDefault(),r!==0&&this._n.handleScale.mouseWheel){const n=Math.sign(r)*Math.min(1,Math.abs(r)),o=e.clientX-this.dm.getBoundingClientRect().left;this.$t().qc(o,n)}s!==0&&this._n.handleScroll.mouseWheel&&this.$t().Yc(-80*s)}Qm(e,i){var s;const r=e.Fn();r===3&&this.cb(),r!==3&&r!==2||(this.fb(e),this.vb(e,i),this.Um.bt(),this.Om.forEach(n=>{n.Dp()}),((s=this.Im)===null||s===void 0?void 0:s.Fn())===3&&(this.Im.Jn(e),this.cb(),this.fb(this.Im),this.vb(this.Im,i),e=this.Im,this.Im=null)),this.Gv(e)}vb(e,i){for(const s of e.Gn())this.Qn(s,i)}fb(e){const i=this.Hi.Nc();for(let s=0;s<i.length;s++)e.Wn(s).Nn&&i[s].V_()}Qn(e,i){const s=this.Hi.St();switch(e.$n){case 0:s.Qu();break;case 1:s.tc(e.Ot);break;case 2:s.Kn(e.Ot);break;case 3:s.Zn(e.Ot);break;case 4:s.Fu();break;case 5:e.Ot.Yu(i)||s.Zn(e.Ot.Xu(i))}}kc(e){this.Im!==null?this.Im.Jn(e):this.Im=e,this.zm||(this.zm=!0,this.Am=window.requestAnimationFrame(i=>{if(this.zm=!1,this.Am=0,this.Im!==null){const s=this.Im;this.Im=null,this.Qm(s,i);for(const r of s.Gn())if(r.$n===5&&!r.Ot.Yu(i)){this.$t().qn(r.Ot);break}}}))}cb(){this.Xm()}Xm(){const e=this.Hi.Nc(),i=e.length,s=this.Om.length;for(let r=i;r<s;r++){const n=Yi(this.Om.pop());this.Fm.removeChild(n.Hv()),n.Wp().p(this),n.jp().p(this),n.S()}for(let r=s;r<i;r++){const n=new Vm(this,e[r]);n.Wp().l(this.pb.bind(this),this),n.jp().l(this.mb.bind(this),this),this.Om.push(n),this.Fm.insertBefore(n.Hv(),this.Um.Hv())}for(let r=0;r<i;r++){const n=e[r],o=this.Om[r];o.Zv()!==n?o.Pp(n):o.Tp()}this.Km(),this._b()}bb(e,i,s){var r;const n=new Map;e!==null&&this.Hi.wt().forEach(f=>{const v=f.Vn().il(e);v!==null&&n.set(f,v)});let o;if(e!==null){const f=(r=this.Hi.St().$i(e))===null||r===void 0?void 0:r.originalTime;f!==void 0&&(o=f)}const a=this.$t().Bc(),l=a!==null&&a.zc instanceof $m?a.zc:void 0,c=a!==null&&a.mv!==void 0?a.mv.mr:void 0;return{wb:o,ie:e??void 0,gb:i??void 0,Mb:l,xb:n,Sb:c,kb:s??void 0}}pb(e,i,s){this.cp.m(()=>this.bb(e,i,s))}mb(e,i,s){this.dp.m(()=>this.bb(e,i,s))}$m(e,i,s){this.xc.m(()=>this.bb(e,i,s))}Km(){const e=this._n.timeScale.visible?"":"none";this.Um.Hv().style.display=e}eb(){return this.Om[0].Zv().S_().W().visible}rb(){return this.Om[0].Zv().k_().W().visible}qm(){return"ResizeObserver"in window&&(this.Lm=new ResizeObserver(e=>{const i=e.find(s=>s.target===this.Nm);i&&this.Ym(i.contentRect.width,i.contentRect.height)}),this.Lm.observe(this.Nm,{box:"border-box"}),!0)}Jm(){this.Lm!==null&&this.Lm.disconnect(),this.Lm=null}}function Th(t){return!!(t.handleScroll.mouseWheel||t.handleScale.mouseWheel)}function DS(t,e){var i={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(i[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function"){var r=0;for(s=Object.getOwnPropertySymbols(t);r<s.length;r++)e.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(t,s[r])&&(i[s[r]]=t[s[r]])}return i}function Bv(t,e,i,s){const r=i.value,n={ie:e,ot:t,Ot:[r,r,r,r],wb:s};return i.color!==void 0&&(n.O=i.color),n}function GB(t,e,i,s){const r=i.value,n={ie:e,ot:t,Ot:[r,r,r,r],wb:s};return i.lineColor!==void 0&&(n.lt=i.lineColor),i.topColor!==void 0&&(n.ys=i.topColor),i.bottomColor!==void 0&&(n.Cs=i.bottomColor),n}function YB(t,e,i,s){const r=i.value,n={ie:e,ot:t,Ot:[r,r,r,r],wb:s};return i.topLineColor!==void 0&&(n.Ce=i.topLineColor),i.bottomLineColor!==void 0&&(n.Te=i.bottomLineColor),i.topFillColor1!==void 0&&(n.Me=i.topFillColor1),i.topFillColor2!==void 0&&(n.xe=i.topFillColor2),i.bottomFillColor1!==void 0&&(n.Se=i.bottomFillColor1),i.bottomFillColor2!==void 0&&(n.ke=i.bottomFillColor2),n}function qB(t,e,i,s){const r={ie:e,ot:t,Ot:[i.open,i.high,i.low,i.close],wb:s};return i.color!==void 0&&(r.O=i.color),r}function KB(t,e,i,s){const r={ie:e,ot:t,Ot:[i.open,i.high,i.low,i.close],wb:s};return i.color!==void 0&&(r.O=i.color),i.borderColor!==void 0&&(r.At=i.borderColor),i.wickColor!==void 0&&(r.Hh=i.wickColor),r}function JB(t,e,i,s,r){const n=Yi(r)(i),o=Math.max(...n),a=Math.min(...n),l=n[n.length-1],c=[l,o,a,l],f=i,{time:v,color:S}=f;return{ie:e,ot:t,Ot:c,wb:s,We:DS(f,["time","color"]),O:S}}function Pd(t){return t.Ot!==void 0}function zv(t,e){return e.customValues!==void 0&&(t.yb=e.customValues),t}function zr(t){return(e,i,s,r,n,o)=>function(a,l){return l?l(a):(c=a).open===void 0&&c.value===void 0;var c}(s,o)?zv({ot:e,ie:i,wb:r},s):zv(t(e,i,s,r,n),s)}function jv(t){return{Candlestick:zr(KB),Bar:zr(qB),Area:zr(GB),Baseline:zr(YB),Histogram:zr(Bv),Line:zr(Bv),Custom:zr(JB)}[t]}function Hv(t){return{ie:0,Cb:new Map,ia:t}}function Uv(t,e){if(t!==void 0&&t.length!==0)return{Tb:e.key(t[0].ot),Pb:e.key(t[t.length-1].ot)}}function Gv(t){let e;return t.forEach(i=>{e===void 0&&(e=i.wb)}),Yi(e)}class QB{constructor(e){this.Rb=new Map,this.Db=new Map,this.Ob=new Map,this.Ab=[],this.N_=e}S(){this.Rb.clear(),this.Db.clear(),this.Ob.clear(),this.Ab=[]}Vb(e,i){let s=this.Rb.size!==0,r=!1;const n=this.Db.get(e);if(n!==void 0)if(this.Db.size===1)s=!1,r=!0,this.Rb.clear();else for(const l of this.Ab)l.pointData.Cb.delete(e)&&(r=!0);let o=[];if(i.length!==0){const l=i.map(I=>I.time),c=this.N_.createConverterToInternalObj(i),f=jv(e.Yh()),v=e.ga(),S=e.Ma();o=i.map((I,C)=>{const D=c(I.time),J=this.N_.key(D);let V=this.Rb.get(J);V===void 0&&(V=Hv(D),this.Rb.set(J,V),r=!0);const se=f(D,V.ie,I,l[C],v,S);return V.Cb.set(e,se),se})}s&&this.Bb(),this.Ib(e,o);let a=-1;if(r){const l=[];this.Rb.forEach(c=>{l.push({timeWeight:0,time:c.ia,pointData:c,originalTime:Gv(c.Cb)})}),l.sort((c,f)=>this.N_.key(c.time)-this.N_.key(f.time)),a=this.zb(l)}return this.Lb(e,a,function(l,c,f){const v=Uv(l,f),S=Uv(c,f);if(v!==void 0&&S!==void 0)return{Xl:v.Pb>=S.Pb&&v.Tb>=S.Tb}}(this.Db.get(e),n,this.N_))}ld(e){return this.Vb(e,[])}Eb(e,i){const s=i;(function(D){D.wb===void 0&&(D.wb=D.time)})(s),this.N_.preprocessData(i);const r=this.N_.createConverterToInternalObj([i])(i.time),n=this.Ob.get(e);if(n!==void 0&&this.N_.key(r)<this.N_.key(n))throw new Error(`Cannot update oldest data, last time=${n}, new time=${r}`);let o=this.Rb.get(this.N_.key(r));const a=o===void 0;o===void 0&&(o=Hv(r),this.Rb.set(this.N_.key(r),o));const l=jv(e.Yh()),c=e.ga(),f=e.Ma(),v=l(r,o.ie,i,s.wb,c,f);o.Cb.set(e,v),this.Nb(e,v);const S={Xl:Pd(v)};if(!a)return this.Lb(e,-1,S);const I={timeWeight:0,time:o.ia,pointData:o,originalTime:Gv(o.Cb)},C=Ql(this.Ab,this.N_.key(I.time),(D,J)=>this.N_.key(D.time)<J);this.Ab.splice(C,0,I);for(let D=C;D<this.Ab.length;++D)xh(this.Ab[D].pointData,D);return this.N_.fillWeightsForPoints(this.Ab,C),this.Lb(e,C,S)}Nb(e,i){let s=this.Db.get(e);s===void 0&&(s=[],this.Db.set(e,s));const r=s.length!==0?s[s.length-1]:null;r===null||this.N_.key(i.ot)>this.N_.key(r.ot)?Pd(i)&&s.push(i):Pd(i)?s[s.length-1]=i:s.splice(-1,1),this.Ob.set(e,i.ot)}Ib(e,i){i.length!==0?(this.Db.set(e,i.filter(Pd)),this.Ob.set(e,i[i.length-1].ot)):(this.Db.delete(e),this.Ob.delete(e))}Bb(){for(const e of this.Ab)e.pointData.Cb.size===0&&this.Rb.delete(this.N_.key(e.time))}zb(e){let i=-1;for(let s=0;s<this.Ab.length&&s<e.length;++s){const r=this.Ab[s],n=e[s];if(this.N_.key(r.time)!==this.N_.key(n.time)){i=s;break}n.timeWeight=r.timeWeight,xh(n.pointData,s)}if(i===-1&&this.Ab.length!==e.length&&(i=Math.min(this.Ab.length,e.length)),i===-1)return-1;for(let s=i;s<e.length;++s)xh(e[s].pointData,s);return this.N_.fillWeightsForPoints(e,i),this.Ab=e,i}Fb(){if(this.Db.size===0)return null;let e=0;return this.Db.forEach(i=>{i.length!==0&&(e=Math.max(e,i[i.length-1].ie))}),e}Lb(e,i,s){const r={Wb:new Map,St:{Au:this.Fb()}};if(i!==-1)this.Db.forEach((n,o)=>{r.Wb.set(o,{We:n,jb:o===e?s:void 0})}),this.Db.has(e)||r.Wb.set(e,{We:[],jb:s}),r.St.Hb=this.Ab,r.St.$b=i;else{const n=this.Db.get(e);r.Wb.set(e,{We:n||[],jb:s})}return r}}function xh(t,e){t.ie=e,t.Cb.forEach(i=>{i.ie=e})}function Fm(t){const e={value:t.Ot[3],time:t.wb};return t.yb!==void 0&&(e.customValues=t.yb),e}function Yv(t){const e=Fm(t);return t.O!==void 0&&(e.color=t.O),e}function ZB(t){const e=Fm(t);return t.lt!==void 0&&(e.lineColor=t.lt),t.ys!==void 0&&(e.topColor=t.ys),t.Cs!==void 0&&(e.bottomColor=t.Cs),e}function XB(t){const e=Fm(t);return t.Ce!==void 0&&(e.topLineColor=t.Ce),t.Te!==void 0&&(e.bottomLineColor=t.Te),t.Me!==void 0&&(e.topFillColor1=t.Me),t.xe!==void 0&&(e.topFillColor2=t.xe),t.Se!==void 0&&(e.bottomFillColor1=t.Se),t.ke!==void 0&&(e.bottomFillColor2=t.ke),e}function kS(t){const e={open:t.Ot[0],high:t.Ot[1],low:t.Ot[2],close:t.Ot[3],time:t.wb};return t.yb!==void 0&&(e.customValues=t.yb),e}function ez(t){const e=kS(t);return t.O!==void 0&&(e.color=t.O),e}function tz(t){const e=kS(t),{O:i,At:s,Hh:r}=t;return i!==void 0&&(e.color=i),s!==void 0&&(e.borderColor=s),r!==void 0&&(e.wickColor=r),e}function yf(t){return{Area:ZB,Line:Yv,Baseline:XB,Histogram:Yv,Bar:ez,Candlestick:tz,Custom:iz}[t]}function iz(t){const e=t.wb;return Object.assign(Object.assign({},t.We),{time:e})}const sz={vertLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},horzLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},mode:1},nz={vertLines:{color:"#D6DCDE",style:0,visible:!0},horzLines:{color:"#D6DCDE",style:0,visible:!0}},rz={background:{type:"solid",color:"#FFFFFF"},textColor:"#191919",fontSize:12,fontFamily:Cm},Ih={autoScale:!0,mode:0,invertScale:!1,alignLabels:!0,borderVisible:!0,borderColor:"#2B2B43",entireTextOnly:!1,visible:!1,ticksVisible:!1,scaleMargins:{bottom:.1,top:.2},minimumWidth:0},oz={rightOffset:0,barSpacing:6,minBarSpacing:.5,fixLeftEdge:!1,fixRightEdge:!1,lockVisibleTimeRangeOnResize:!1,rightBarStaysOnScroll:!1,borderVisible:!0,borderColor:"#2B2B43",visible:!0,timeVisible:!1,secondsVisible:!0,shiftVisibleRangeOnNewBar:!0,allowShiftVisibleRangeOnWhitespaceReplacement:!1,ticksVisible:!1,uniformDistribution:!1,minimumHeight:0,allowBoldLabels:!0},az={color:"rgba(0, 0, 0, 0)",visible:!1,fontSize:48,fontFamily:Cm,fontStyle:"",text:"",horzAlign:"center",vertAlign:"center"};function qv(){return{width:0,height:0,autoSize:!1,layout:rz,crosshair:sz,grid:nz,overlayPriceScales:Object.assign({},Ih),leftPriceScale:Object.assign(Object.assign({},Ih),{visible:!1}),rightPriceScale:Object.assign(Object.assign({},Ih),{visible:!0}),timeScale:oz,watermark:az,localization:{locale:oa?navigator.language:"",dateFormat:"dd MMM 'yy"},handleScroll:{mouseWheel:!0,pressedMouseMove:!0,horzTouchDrag:!0,vertTouchDrag:!0},handleScale:{axisPressedMouseMove:{time:!0,price:!0},axisDoubleClickReset:{time:!0,price:!0},mouseWheel:!0,pinch:!0},kineticScroll:{mouse:!1,touch:!0},trackingMode:{exitMode:1}}}class lz{constructor(e,i){this.Ub=e,this.qb=i}applyOptions(e){this.Ub.$t().Lc(this.qb,e)}options(){return this.zi().W()}width(){return ac(this.qb)?this.Ub.sb(this.qb):0}zi(){return be(this.Ub.$t().Ec(this.qb)).Dt}}function Kv(t,e,i){const s=DS(t,["time","originalTime"]),r=Object.assign({time:e},s);return i!==void 0&&(r.originalTime=i),r}const dz={color:"#FF0000",price:0,lineStyle:2,lineWidth:1,lineVisible:!0,axisLabelVisible:!0,title:"",axisLabelColor:"",axisLabelTextColor:""};class uz{constructor(e){this.Vh=e}applyOptions(e){this.Vh.Eh(e)}options(){return this.Vh.W()}Yb(){return this.Vh}}class cz{constructor(e,i,s,r,n){this.Xb=new ri,this.Is=e,this.Kb=i,this.Zb=s,this.N_=n,this.Gb=r}S(){this.Xb.S()}priceFormatter(){return this.Is.ca()}priceToCoordinate(e){const i=this.Is.Ct();return i===null?null:this.Is.Dt().Rt(e,i.Ot)}coordinateToPrice(e){const i=this.Is.Ct();return i===null?null:this.Is.Dt().fn(e,i.Ot)}barsInLogicalRange(e){if(e===null)return null;const i=new Zo(new al(e.from,e.to)).iu(),s=this.Is.Vn();if(s.Ei())return null;const r=s.il(i.Rs(),1),n=s.il(i.ui(),-1),o=be(s.Jh()),a=be(s.An());if(r!==null&&n!==null&&r.ie>n.ie)return{barsBefore:e.from-o,barsAfter:a-e.to};const l={barsBefore:r===null||r.ie===o?e.from-o:r.ie-o,barsAfter:n===null||n.ie===a?a-e.to:a-n.ie};return r!==null&&n!==null&&(l.from=r.wb,l.to=n.wb),l}setData(e){this.N_,this.Is.Yh(),this.Kb.Jb(this.Is,e),this.Qb("full")}update(e){this.Is.Yh(),this.Kb.tw(this.Is,e),this.Qb("update")}dataByIndex(e,i){const s=this.Is.Vn().il(e,i);return s===null?null:yf(this.seriesType())(s)}data(){const e=yf(this.seriesType());return this.Is.Vn().Qs().map(i=>e(i))}subscribeDataChanged(e){this.Xb.l(e)}unsubscribeDataChanged(e){this.Xb.v(e)}setMarkers(e){this.N_;const i=e.map(s=>Kv(s,this.N_.convertHorzItemToInternal(s.time),s.time));this.Is.Zl(i)}markers(){return this.Is.Gl().map(e=>Kv(e,e.originalTime,void 0))}applyOptions(e){this.Is.Eh(e)}options(){return Nn(this.Is.W())}priceScale(){return this.Zb.priceScale(this.Is.Dt().xa())}createPriceLine(e){const i=Us(Nn(dz),e),s=this.Is.Jl(i);return new uz(s)}removePriceLine(e){this.Is.Ql(e.Yb())}seriesType(){return this.Is.Yh()}attachPrimitive(e){this.Is.ba(e),e.attached&&e.attached({chart:this.Gb,series:this,requestUpdate:()=>this.Is.$t().$l()})}detachPrimitive(e){this.Is.wa(e),e.detached&&e.detached()}Qb(e){this.Xb.M()&&this.Xb.m(e)}}class hz{constructor(e,i,s){this.iw=new ri,this.uu=new ri,this.um=new ri,this.Hi=e,this.wl=e.St(),this.Um=i,this.wl.Ku().l(this.nw.bind(this)),this.wl.Zu().l(this.sw.bind(this)),this.Um.Mm().l(this.ew.bind(this)),this.N_=s}S(){this.wl.Ku().p(this),this.wl.Zu().p(this),this.Um.Mm().p(this),this.iw.S(),this.uu.S(),this.um.S()}scrollPosition(){return this.wl.Lu()}scrollToPosition(e,i){i?this.wl.qu(e,1e3):this.Hi.Zn(e)}scrollToRealTime(){this.wl.Uu()}getVisibleRange(){const e=this.wl.yu();return e===null?null:{from:e.from.originalTime,to:e.to.originalTime}}setVisibleRange(e){const i={from:this.N_.convertHorzItemToInternal(e.from),to:this.N_.convertHorzItemToInternal(e.to)},s=this.wl.Ru(i);this.Hi.ad(s)}getVisibleLogicalRange(){const e=this.wl.ku();return e===null?null:{from:e.Rs(),to:e.ui()}}setVisibleLogicalRange(e){br(e.from<=e.to,"The from index cannot be after the to index."),this.Hi.ad(e)}resetTimeScale(){this.Hi.Xn()}fitContent(){this.Hi.Qu()}logicalToCoordinate(e){const i=this.Hi.St();return i.Ei()?null:i.It(e)}coordinateToLogical(e){return this.wl.Ei()?null:this.wl.Vu(e)}timeToCoordinate(e){const i=this.N_.convertHorzItemToInternal(e),s=this.wl.ya(i,!1);return s===null?null:this.wl.It(s)}coordinateToTime(e){const i=this.Hi.St(),s=i.Vu(e),r=i.$i(s);return r===null?null:r.originalTime}width(){return this.Um.Up().width}height(){return this.Um.Up().height}subscribeVisibleTimeRangeChange(e){this.iw.l(e)}unsubscribeVisibleTimeRangeChange(e){this.iw.v(e)}subscribeVisibleLogicalRangeChange(e){this.uu.l(e)}unsubscribeVisibleLogicalRangeChange(e){this.uu.v(e)}subscribeSizeChange(e){this.um.l(e)}unsubscribeSizeChange(e){this.um.v(e)}applyOptions(e){this.wl.Eh(e)}options(){return Object.assign(Object.assign({},Nn(this.wl.W())),{barSpacing:this.wl.ee()})}nw(){this.iw.M()&&this.iw.m(this.getVisibleRange())}sw(){this.uu.M()&&this.uu.m(this.getVisibleLogicalRange())}ew(e){this.um.m(e.width,e.height)}}function fz(t){if(t===void 0||t.type==="custom")return;const e=t;e.minMove!==void 0&&e.precision===void 0&&(e.precision=function(i){if(i>=1)return 0;let s=0;for(;s<8;s++){const r=Math.round(i);if(Math.abs(r-i)<1e-8)return s;i*=10}return s}(e.minMove))}function Jv(t){return function(e){if(wd(e.handleScale)){const s=e.handleScale;e.handleScale={axisDoubleClickReset:{time:s,price:s},axisPressedMouseMove:{time:s,price:s},mouseWheel:s,pinch:s}}else if(e.handleScale!==void 0){const{axisPressedMouseMove:s,axisDoubleClickReset:r}=e.handleScale;wd(s)&&(e.handleScale.axisPressedMouseMove={time:s,price:s}),wd(r)&&(e.handleScale.axisDoubleClickReset={time:r,price:r})}const i=e.handleScroll;wd(i)&&(e.handleScroll={horzTouchDrag:i,vertTouchDrag:i,mouseWheel:i,pressedMouseMove:i})}(t),t}class mz{constructor(e,i,s){this.rw=new Map,this.hw=new Map,this.lw=new ri,this.aw=new ri,this.ow=new ri,this._w=new QB(i);const r=s===void 0?Nn(qv()):Us(Nn(qv()),Jv(s));this.N_=i,this.Ub=new UB(e,r,i),this.Ub.Wp().l(o=>{this.lw.M()&&this.lw.m(this.uw(o()))},this),this.Ub.jp().l(o=>{this.aw.M()&&this.aw.m(this.uw(o()))},this),this.Ub.jc().l(o=>{this.ow.M()&&this.ow.m(this.uw(o()))},this);const n=this.Ub.$t();this.cw=new hz(n,this.Ub.Gm(),this.N_)}remove(){this.Ub.Wp().p(this),this.Ub.jp().p(this),this.Ub.jc().p(this),this.cw.S(),this.Ub.S(),this.rw.clear(),this.hw.clear(),this.lw.S(),this.aw.S(),this.ow.S(),this._w.S()}resize(e,i,s){this.autoSizeActive()||this.Ub.Ym(e,i,s)}addCustomSeries(e,i){const s=Fo(e),r=Object.assign(Object.assign({},nS),s.defaultOptions());return this.dw("Custom",r,i,s)}addAreaSeries(e){return this.dw("Area",XF,e)}addBaselineSeries(e){return this.dw("Baseline",e4,e)}addBarSeries(e){return this.dw("Bar",QF,e)}addCandlestickSeries(e={}){return function(i){i.borderColor!==void 0&&(i.borderUpColor=i.borderColor,i.borderDownColor=i.borderColor),i.wickColor!==void 0&&(i.wickUpColor=i.wickColor,i.wickDownColor=i.wickColor)}(e),this.dw("Candlestick",JF,e)}addHistogramSeries(e){return this.dw("Histogram",t4,e)}addLineSeries(e){return this.dw("Line",ZF,e)}removeSeries(e){const i=Yi(this.rw.get(e)),s=this._w.ld(i);this.Ub.$t().ld(i),this.fw(s),this.rw.delete(e),this.hw.delete(i)}Jb(e,i){this.fw(this._w.Vb(e,i))}tw(e,i){this.fw(this._w.Eb(e,i))}subscribeClick(e){this.lw.l(e)}unsubscribeClick(e){this.lw.v(e)}subscribeCrosshairMove(e){this.ow.l(e)}unsubscribeCrosshairMove(e){this.ow.v(e)}subscribeDblClick(e){this.aw.l(e)}unsubscribeDblClick(e){this.aw.v(e)}priceScale(e){return new lz(this.Ub,e)}timeScale(){return this.cw}applyOptions(e){this.Ub.Eh(Jv(e))}options(){return this.Ub.W()}takeScreenshot(){return this.Ub.ib()}autoSizeActive(){return this.Ub.hb()}chartElement(){return this.Ub.lb()}paneSize(){const e=this.Ub.ob();return{height:e.height,width:e.width}}setCrosshairPosition(e,i,s){const r=this.rw.get(s);if(r===void 0)return;const n=this.Ub.$t()._r(r);n!==null&&this.Ub.$t().td(e,i,n)}clearCrosshairPosition(){this.Ub.$t().nd(!0)}dw(e,i,s={},r){fz(s.priceFormat);const n=Us(Nn(rS),Nn(i),s),o=this.Ub.$t().rd(e,n,r),a=new cz(o,this,this,this,this.N_);return this.rw.set(a,o),this.hw.set(o,a),a}fw(e){const i=this.Ub.$t();i.sd(e.St.Au,e.St.Hb,e.St.$b),e.Wb.forEach((s,r)=>r.J(s.We,s.jb)),i.Iu()}pw(e){return Yi(this.hw.get(e))}uw(e){const i=new Map;e.xb.forEach((r,n)=>{const o=n.Yh(),a=yf(o)(r);if(o!=="Custom")br(function(l){return l.open!==void 0||l.value!==void 0}(a));else{const l=n.Ma();br(!l||l(a)===!1)}i.set(this.pw(n),a)});const s=e.Mb===void 0?void 0:this.pw(e.Mb);return{time:e.wb,logical:e.ie,point:e.gb,hoveredSeries:s,hoveredObjectId:e.Sb,seriesData:i,sourceEvent:e.kb}}}function pz(t,e,i){let s;if(Jl(t)){const n=document.getElementById(t);br(n!==null,`Cannot find element in DOM with id=${t}`),s=n}else s=t;const r=new mz(s,e,i);return e.setOptions(r.options()),r}function Zl(t,e){return pz(t,new Nv,Nv.Pd(e))}Object.assign(Object.assign({},rS),nS);const gz="/icon/eraser-icon.png",vz={name:"LogItemHistory",components:{DateTimeSelector:_o},props:{logItemID:Number},data:function(){return{metricStore:void 0,chart:void 0,series:[],tableEntries:[],entryCount:20,selectedEntry:void 0,confimDelete:!1}},created:function(){this.metricStore=qn()},mounted(){this.createLogChart()},computed:{logItem(){if(this.metricStore)return this.metricStore.getLogItem(this.logItemID)},metric(){return this.logItem?this.logItem.metric:""},seriesData(){return this.tableEntries?so(this.tableEntries,"dateTime").map(i=>{let s=i.fieldValues[0];return{dateTime:new Date(i.dateTime),time:new Date(i.dateTime)/1e3,value:parseFloat(s.value)}}):[]},totalEntries(){return this.logItem?this.logItem.entries.length:0}},methods:{setTableEntries:yz,createLogChart:_z,initInfiniteScroll:bz,fitChartContent:wz,jsonToDateTimeString:rR,getRowRef:Sz,selectChartPoint:Iz,handleChartClick:Tz,handleChartDoubleClick:xz,setSelectedEntry:Ez,deselectEntries:Dz,updateEntryDateTime:kz,updateEntryField:Cz,updateEntryBlurb:Pz,deleteEntry:Az},watch:{logItem(t){this.setTableEntries(t)},entryCount(){this.setTableEntries(this.logItem)}}};function yz(t){if(t){let e=Ul(t.entries,"dateTime");e=e.slice(0,this.entryCount);let i=e.map(s=>({id:s.id,dateTime:s.dateTime,time:new Date(s.dateTime)/1e3,fieldValues:s.fieldValues,blurb:s.reason,isActive:!1,isSelected:!1}));this.tableEntries=i}else this.tableEntries=[]}function _z(){this.$refs["log-item-chart"].replaceChildren();const t=Zl("log-item-chart",{width:278,height:100});this.series=t.addLineSeries(),this.series.setData(this.seriesData),t.timeScale().fitContent(),t.subscribeClick(this.handleChartClick),t.subscribeDblClick(this.handleChartDoubleClick),t.timeScale(),this.chart=t,this.initInfiniteScroll()}function bz(){let t=this,e=this.chart.timeScale(),i=null;e.subscribeVisibleLogicalRangeChange(()=>{i===null&&(i=setTimeout(()=>{var s=e.getVisibleLogicalRange();if(s!==null&&s.from<5){let r=t.totalEntries-t.entryCount;r>0&&(t.entryCount+=r>20?20:r,t.series.setData(t.seriesData))}i=null},250))})}function wz(){this.chart.timeScale().fitContent()}function Sz(t){return`${new Date(t.dateTime)/1e3}-${t.value}`}function Tz(t){this.selectChartPoint(t)}function xz(){let t=this.tableEntries.find(e=>e.isActive);this.setSelectedEntry(t)}function Iz(t){this.deselectEntries();let e=!1,i=0,s=this.$refs["table-head"].getBoundingClientRect().height;this.tableEntries.forEach(n=>{n.time!=t.time&&!e?(i+=s,s=this.$refs[`entry-${t.time}`][0].getBoundingClientRect().height,n.isActive=!1):n.time==t.time?(n.isActive=!0,e=!0):n.isActive=!1}),this.$refs["value-table"].scrollTo({top:i,left:0,behavior:"smooth"})}function Ez(t){if(t)if(this.selectedEntry&&this.selectedEntry.id==t.id)this.deselectEntries();else{this.deselectEntries();let e={id:t.id,dateTime:t.dateTime,blurb:t.blurb,fields:[]};t.fieldValues.forEach(i=>{let s=this.logItem.fields.find(r=>r.id==i.logItemFieldID);e.fields.push({id:i.logItemFieldID,value:i.value,name:s.name})}),this.selectedEntry=e,t.isActive=!0,t.isSelected=!0}else this.deselectEntries()}function Dz(){this.tableEntries.forEach(t=>{t.isSelected=!1,t.isActive=!1}),this.selectedEntry=void 0}function kz(t){let e={logItemID:this.logItem.id,dateTime:this.selectedEntry.dateTime,updatedDateTime:t,isUpdated:!0};this.selectedEntry.dateTime=t,this.metricStore.logLogItem(e)}function Cz(t){let e={logItemID:this.logItem.id,dateTime:this.selectedEntry.dateTime,fields:[{id:t.id,value:t.value}],isUpdated:!0};this.metricStore.logLogItem(e)}function Pz(){let t={logItemID:this.logItem.id,dateTime:this.selectedEntry.dateTime,reason:{value:this.selectedEntry.blurb,isUpdated:!0},isUpdated:!0};this.metricStore.logLogItem(t)}function Az(t){this.metricStore.deleteLogEntry(t),this.confimDelete=!1}const Rz={class:"log-item-history d-flex flex-column flex-grow-1 overflow-scroll"},Mz={class:"head d-flex flex-row"},Oz={class:"metric text-start ms-1"},$z={class:"name text-start ms-1"},Nz={id:"log-item-chart",class:"mt-2",ref:"log-item-chart"},Lz={class:"value-table d-flex flex-column flex-grow-1 overflow-scroll",ref:"value-table"},Vz={key:0,class:"table table-striped"},Wz={class:"sticky-top",ref:"table-head"},Fz=["onClick"],Bz={scope:"row"},zz={key:0},jz=["colspan"],Hz={class:"additional-values d-flex flex-column"},Uz={class:"fields d-flex flex-column"},Gz=["placeholder","onUpdate:modelValue","onChange"],Yz={key:1,class:"d-flex flex-row mt-2 align-items-center"},qz=["onClick"];function Kz(t,e,i,s,r,n){const o=$("DateTimeSelector");return m(),p("div",Rz,[d("div",Mz,[d("img",{class:"icon-button mt-auto mb-auto",src:Wi,width:"20",height:"20",onClick:e[0]||(e[0]=ye(a=>t.$emit("back"),["prevent"]))}),d("div",Oz,k(n.logItem.metric),1),d("div",$z,k(n.logItem.name),1),d("img",{class:"header-button me-1",src:gz,width:"16",height:"16",onClick:e[1]||(e[1]=ye((...a)=>n.fitChartContent&&n.fitChartContent(...a),["prevent"]))})]),d("div",Nz,null,512),d("div",Lz,[n.logItem?(m(),p("table",Vz,[d("thead",Wz,[d("tr",null,[e[6]||(e[6]=d("th",{scope:"col"},"Time",-1)),(m(!0),p(L,null,G(n.logItem.fields,a=>(m(),p("th",{key:a.id,scope:"col"},k(a.name),1))),128))])]),d("tbody",null,[(m(!0),p(L,null,G(t.tableEntries,a=>(m(),p(L,{key:a.id},[d("tr",{ref_for:!0,ref:`entry-${a.time}`,class:F({active:a.isActive}),onClick:l=>n.setSelectedEntry(a)},[d("th",Bz,k(n.jsonToDateTimeString(a.dateTime)),1),(m(!0),p(L,null,G(a.fieldValues,l=>(m(),p("td",{key:l.id},k(l.value),1))),128))],10,Fz),a.isSelected?(m(),p("tr",zz,[d("td",{colspan:a.fieldValues.length+1},[d("div",Hz,[H(o,{class:"date-selector mt-2",dateTime:t.selectedEntry.dateTime,onOnChange:n.updateEntryDateTime},null,8,["dateTime","onOnChange"]),d("div",Uz,[(m(!0),p(L,null,G(t.selectedEntry.fields,l=>X((m(),p("input",{key:l.id,class:"textbox mt-2",type:"text",placeholder:l.name,"onUpdate:modelValue":c=>l.value=c,spellcheck:"true",onChange:c=>n.updateEntryField(l)},null,40,Gz)),[[Ae,l.value,void 0,{lazy:!0,trim:!0}]])),128))]),X(d("textarea",{id:"blurb",class:"textarea mt-2",type:"text",placeholder:"Blurb","onUpdate:modelValue":e[2]||(e[2]=l=>t.selectedEntry.blurb=l),spellcheck:"true",onChange:e[3]||(e[3]=(...l)=>n.updateEntryBlurb&&n.updateEntryBlurb(...l))},null,544),[[Ae,t.selectedEntry.blurb,void 0,{lazy:!0}]]),t.confimDelete?x("",!0):(m(),p("button",{key:0,type:"button",class:"btn btn-danger mt-2",onClick:e[4]||(e[4]=l=>t.confimDelete=!0)},"Delete")),t.confimDelete?(m(),p("div",Yz,[e[7]||(e[7]=d("span",null,"Are you sure?",-1)),d("button",{type:"button",class:"btn btn-warning ms-2",onClick:e[5]||(e[5]=l=>t.confimDelete=!1)},"Cancel"),d("button",{type:"button",class:"btn btn-danger ms-2",onClick:l=>n.deleteEntry(a.id)},"Delete",8,qz)])):x("",!0)])],8,jz)])):x("",!0)],64))),128))])])):x("",!0)])])}const Jz=Q(vz,[["render",Kz],["__scopeId","data-v-9e89da43"]]),Qz={name:"InventoryPanel",components:{LogItemView:sc,LogItemHistory:Jz,ItemPanelNavbar:Yl},props:{showHead:{type:Boolean,default:!0}},data:function(){return{appStore:void 0,metricStore:void 0,selectedPanel:"list",selectedLogItemID:void 0,inventoryList:[],clearMinutes:60}},created:function(){this.appStore=bt(),this.metricStore=qn(),this.metricStore.initializeLogItems()},computed:{logItems(){return this.metricStore?fe(this.metricStore.getLogItems()):[]},clear(){return this.appStore?this.appStore.itemPanel.inventory.clear:0},showPrimary(){return this.appStore?this.appStore.itemPanel.inventory.showPrimary:!0},showSecondary(){return this.appStore?this.appStore.itemPanel.inventory.showSecondary:!1},showTertiary(){return this.appStore?this.appStore.itemPanel.inventory.showTertiary:!1},primaryToggled(){return this.appStore?this.appStore.itemPanel.inventory.primaryToggled:void 0},secondaryToggled(){return this.appStore?this.appStore.itemPanel.inventory.secondaryToggled:void 0},tertiaryToggled(){return this.appStore?this.appStore.itemPanel.inventory.tertiaryToggled:void 0}},methods:{setInventoryList:Zz,selectLogItem:Xz,back:e3},watch:{logItems:{handler(){this.setInventoryList()},deep:!0},showPrimary(){this.setInventoryList()},showSecondary(){this.setInventoryList()},showTertiary(){this.setInventoryList()},primaryToggled(){this.setInventoryList()},secondaryToggled(){this.setInventoryList()},tertiaryToggled(){this.setInventoryList()}}};function Zz(){let t={};if(this.logItems.length>0){let e=this.logItems.map(r=>r.metric);e=[...new Set(e)],e.forEach(r=>{t[r]=[]});let i=!0,s=!0;this.logItems.forEach(r=>{if(r.fields[0].controlTypeID!=bb.SLIDER)return;let o=r.entries.length>0?r.entries[r.entries.length-1]:void 0;if(o){let a=new Date(o.dateTime),l=Im(this.clearMinutes);+a<+l&&(r.isPrimary?i=!1:r.isSecondary&&(s=!1))}else r.isPrimary?i=!1:r.isSecondary&&(s=!1)}),this.appStore.itemPanel.inventory.showSecondary=i,this.appStore.itemPanel.inventory.showTertiary=s,this.logItems.forEach(r=>{r.isPrimary?this.primaryToggled!=null?this.primaryToggled==!0&&t[r.metric].push(r):this.showPrimary&&t[r.metric].push(r):r.isSecondary&&(this.secondaryToggled!=null?this.secondaryToggled==!0&&t[r.metric].push(r):this.showSecondary&&t[r.metric].push(r)),r.isTertiary&&(this.tertiaryToggled!=null?this.tertiaryToggled==!0&&t[r.metric].push(r):this.showTertiary&&t[r.metric].push(r))})}this.inventoryList=t}function Xz(t){this.selectedLogItemID=t,this.selectedPanel="logItemHistory"}function e3(){this.selectedPanel="list",this.selectedLogItemID=void 0}const t3={class:"row g-0 h-100"},i3={class:"col h-100 d-flex flex-column"},s3={class:"inventory d-flex flex-column flex-grow-1 overflow-hidden"},n3={key:0},r3={class:"label text-start"};function o3(t,e,i,s,r,n){const o=$("ItemPanelNavbar"),a=$("LogItemView"),l=$("LogItemHistory");return m(),p("div",t3,[d("div",i3,[d("div",s3,[X(H(o,null,null,512),[[it,i.showHead]]),d("div",{class:F(["body d-flex flex-column flex-grow-1",{hide:t.selectedPanel!="list"}])},[(m(!0),p(L,null,G(t.inventoryList,(c,f,v)=>(m(),p("div",{key:v,class:"metric mb-2"},[c.length>0?(m(),p("div",n3,[d("div",r3,k(f),1),(m(!0),p(L,null,G(c,(S,I)=>(m(),ie(a,{class:"log-item d-flex flex-row flex-grow-1 mt-1",key:I,logItemID:S.id,clearValues:n.clear,clearMinutes:t.clearMinutes,onSelectLogItem:n.selectLogItem},null,8,["logItemID","clearValues","clearMinutes","onSelectLogItem"]))),128))])):x("",!0)]))),128))],2),t.selectedPanel=="logItemHistory"?(m(),ie(l,{key:0,logItemID:t.selectedLogItemID,onBack:n.back},null,8,["logItemID","onBack"])):x("",!0)])])])}const CS=Q(Qz,[["render",o3],["__scopeId","data-v-66ebc978"]]),a3={name:"NutrientChart",components:{},props:{caloriesRecommended:{type:Number,default:2e3},waterRecommended:{type:Number,default:140}},data:function(){return{physicalStore:void 0,chart:void 0,calorieSeries:void 0,calorieSeriesData:[],waterSeries:void 0,waterSeriesData:[],proteinSeries:void 0}},created:function(){this.physicalStore=Js()},mounted(){this.createNutrientChart()},computed:{startDate(){return na(new Date,-2)},mealHistories(){if(this.physicalStore){let t=[],e=this.physicalStore.mealHistories;if(e.length>0){let i;e=this.sortDateAsc(e,"dateTime");let s=new Date(1970,0,1);e.forEach(r=>{let n=this.startOfDay(new Date(r.dateTime));+n<+this.startDate||(+s==+n?(i.calories+=r.calories,i.carbs+=r.carbs,i.protein+=r.protein,i.fat+=r.fat):(s=n,i={calories:r.calories,carbs:r.carbs,protein:r.protein,fat:r.fat},t.push({date:s,nutrients:i})))})}return t}else return[]},waterHistories(){if(this.physicalStore){let t=[],e=this.physicalStore.waterLogs;if(e.length>0){let i=0;e=this.sortDateAsc(e,"dateTime");let s=new Date(1970,0,1);e.forEach(r=>{let n=this.startOfDay(new Date(r.dateTime));+n<+this.startDate||(+s==+n?t[t.length-1].amount+=r.amount:(s=n,i=r.amount,t.push({date:s,amount:i})))})}return t}else return[]}},methods:{sortDateAsc:so,startOfDay:wl,createChart:Zl,createNutrientChart:l3,setCalorieSeries:d3,setWaterSeries:u3},watch:{mealHistories:{handler(t){t.length&&t.length>0&&this.setCalorieSeries()},deep:!0},waterHistories:{handler(t){t.length&&t.length>0&&this.setWaterSeries()},deep:!0}}};function l3(){let t={rightPriceScale:{visible:!0},leftPriceScale:{visible:!0},localization:{priceFormatter:r=>r.toFixed(0)},width:278,height:100};this.$refs["nutrient-chart"].replaceChildren();const e=Zl("nutrient-chart",t);this.chart=e,this.calorieSeries=e.addLineSeries({priceScaleId:"left",color:"#EA8919",lastValueVisible:!1,priceLineVisible:!1});const i={price:this.caloriesRecommended,color:"#EA8919",lineWidth:2,lineStyle:2,axisLabelVisible:!0};this.calorieSeries.createPriceLine(i),this.waterSeries=e.addLineSeries({priceScaleId:"right",color:"#3B99FC",lastValueVisible:!1,priceLineVisible:!1});const s={price:this.waterRecommended,color:"#3B99FC",lineWidth:2,lineStyle:2,axisLabelVisible:!0};this.waterSeries.createPriceLine(s)}function d3(){let t=0,e=this.mealHistories.map(s=>(s.nutrients.calories>t&&(t=s.nutrients.calories),{datetime:s.date,time:s.date/1e3,value:parseInt(s.nutrients.calories)}));this.calorieSeries.setData(e);let i=t<this.caloriesRecommended?this.caloriesRecommended:t;this.calorieSeries.applyOptions({autoscaleInfoProvider:()=>({priceRange:{minValue:0,maxValue:i}})}),this.chart.timeScale().fitContent(),this.calorieSeriesData=e}function u3(){let t=0,e=this.waterHistories.map(s=>(s.amount>t&&(t=s.amount),{datetime:s.date,time:s.date/1e3,value:s.amount}));this.waterSeries.setData(e);let i=t<this.waterRecommended?this.waterRecommended+10:t+10;this.waterSeries.applyOptions({autoscaleInfoProvider:()=>({priceRange:{minValue:0,maxValue:i}})}),this.chart.timeScale().fitContent(),this.waterSeriesData=e}const c3={id:"nutrient-chart",ref:"nutrient-chart",class:"mt-2"};function h3(t,e,i,s,r,n){return m(),p("div",c3,null,512)}const f3=Q(a3,[["render",h3]]),m3={name:"FoodItemTable",components:{},props:{meal:Object},data:function(){return{physicalStore:void 0,foodItems:[]}},created:function(){this.physicalStore=Js(),this.foodItems=this.meal.foodItems},methods:{float:Zu,onDeleteItem:p3},watch:{meal(t){this.foodItems=t.foodItems}}};function p3(t){this.physicalStore.removeFoodItem(this.meal.id,t.id)}const g3={class:"overflow-scroll"},v3={class:"table"},y3={class:"d-flex justufy-content-center"},_3=["onClick"];function b3(t,e,i,s,r,n){return m(),p("div",g3,[d("table",v3,[e[1]||(e[1]=d("thead",null,[d("tr",null,[d("th",{scope:"col"},"Qty"),d("th",{scope:"col"},"Unit"),d("th",{scope:"col"},"Name"),d("th",{scope:"col"},"Cals"),d("th",{scope:"col"},"Carbs"),d("th",{scope:"col"},"Prot"),d("th",{scope:"col"},"Fat"),d("th",{scope:"col"})])],-1)),d("tbody",null,[(m(!0),p(L,null,G(t.foodItems,o=>(m(),p("tr",{key:o.id},[d("td",null,k(o.quantity),1),d("td",null,k(o.unit),1),d("td",null,k(o.name),1),d("td",null,k(n.float(o.calories,0)),1),d("td",null,k(n.float(o.carbohydrates,0)),1),d("td",null,k(n.float(o.protein,0)),1),d("td",null,k(n.float(o.fat,0)),1),d("td",null,[d("div",y3,[d("button",{class:"delete-btn btn btn-secondary btn-sm float-end",type:"button",onClick:ye(a=>n.onDeleteItem(o),["prevent","stop"])},e[0]||(e[0]=[d("i",{class:"far fa-trash-alt"},null,-1)]),8,_3)])])]))),128))])])])}const w3=Q(m3,[["render",b3],["__scopeId","data-v-0645c167"]]),Gs="/icon/add-button.png",PS="/icon/nutrition/calorie-flame.png",AS="/icon/nutrition/water-droplet.png",S3={name:"",components:{FoodItemTable:w3,DateTimeSelector:_o},props:{meal:Object},data:function(){return{physicalStore:void 0,infoExpanded:!1,itemsExpanded:!1,caloriesRecommeded:400,waterRecommeded:28,waterQuantity:void 0,isEditWater:!1,isTimeValid:!0,editTime:!1,startAt:void 0,endAt:void 0}},created:function(){this.physicalStore=Js(),this.refresh()},computed:{caloriePercentage(){return this.floatString(this.meal.calories/this.caloriesRecommeded*100,0)},waterPercentage(){return this.floatString(this.meal.water/this.waterRecommeded*100,0)},carbs(){return this.meal.macros.carbs},protein(){return this.meal.macros.protein},fat(){return this.meal.macros.fat},waterInputWidth(){return this.waterQuantity<10?"25px":this.waterQuantity<100?"34px":"41px"}},methods:{floatString:EP,toShortTimeString:zn,setTimeFromDate:ic,addFood:I3,editWater:E3,setWater:D3,refresh:T3,refreshTimes:x3,setTime:k3,setTimeNow:C3,validateTimes:P3,saveTime:A3},watch:{meal(){this.refresh()}}};function T3(){this.infoExpanded=this.meal.foodItems.length>0,this.infoExpanded||(this.itemsExpanded=!1),this.waterQuantity=this.meal.water,this.refreshTimes()}function x3(){this.editTime=!1,this.meal.iteration&&this.meal.iteration.startAt?this.startAt=new Date(this.meal.iteration.startAt):this.startAt=void 0,this.meal.iteration&&this.meal.iteration.endAt?this.endAt=new Date(this.meal.iteration.endAt):this.endAt=void 0}function I3(){this.$emit("searchFoodItems",this.meal)}async function E3(){this.isEditWater=!0,await this.$nextTick(),this.$refs.waterQuantity.focus()}function D3(){if(this.isEditWater=!1,this.waterQuantity&&this.waterQuantity!=this.meal.water){var t=new Date(this.meal.dateTime);this.setTimeFromDate(t,new Date),this.physicalStore.logWater(this.waterQuantity,t,this.meal.id)}}function k3(t,e){t&&(e=="start"?(this.startAt=new Date(t),this.endAt=Bw(15,this.startAt)):e=="end"&&(this.endAt=new Date(t)),this.validateTimes())}function C3(){this.startAt=new Date(this.meal.dateTime),this.setTimeFromDate(this.startAt,new Date),this.endAt=Bw(15,this.startAt),this.validateTimes()}function P3(){(this.meal.iteration||void 0)&&(this.startAt&&this.endAt?+this.startAt>+this.endAt?this.isTimeValid=!1:+this.startAt<=+this.endAt&&(this.isTimeValid=!0):this.endAt?this.isTimeValid=!0:this.isTimeValid=!1)}function A3(){this.isTimeValid&&this.physicalStore.setMealTime(this.meal.id,this.startAt,this.endAt)}const R3={class:"meal d-flex flex-column"},M3={class:"d-flex flex-row align-items-center ps-1"},O3={class:"name"},$3={class:"calories d-flex flex-column position-relative align-items-center"},N3={class:"amount d-flex flex-row"},L3={class:"consumed"},V3={class:"recommended"},W3={class:"percent d-flex flex-row"},F3={class:"macros d-flex flex-column justify-content-end"},B3={class:"consumed"},z3={key:0,class:"d-flex flex-row"},j3={class:"water d-flex flex-column position-relative align-items-center"},H3={class:"amount"},U3={class:"consumed"},G3={class:"recommended"},Y3={class:"percent d-flex flex-row"},q3={key:1,class:"d-flex flex-column"},K3={key:0,class:"time mt-1"},J3={key:0,class:"start ms-1"},Q3={key:1,class:"end ms-2"},Z3={key:1,class:"d-flex flex-column"},X3={class:"d-flex flex-row mt-2"};function e8(t,e,i,s,r,n){const o=$("DateTimeSelector"),a=$("FoodItemTable");return m(),p("div",R3,[d("div",M3,[d("span",O3,k(i.meal.name),1),d("img",{class:"icon-button ms-1",src:Gs,width:15,height:15,onClick:e[0]||(e[0]=(...l)=>n.addFood&&n.addFood(...l))})]),t.infoExpanded?(m(),p("div",{key:0,class:"d-flex flex-row justify-content-between p-1",onClick:e[5]||(e[5]=l=>t.itemsExpanded=!t.itemsExpanded)},[d("div",$3,[d("div",N3,[d("span",L3,k(n.floatString(i.meal.calories,0)),1),d("span",V3,"/"+k(t.caloriesRecommeded)+" cal",1)]),e[13]||(e[13]=d("img",{class:"flame",src:PS,width:"33",height:"45"},null,-1)),d("div",W3,[d("span",null,k(n.caloriePercentage),1),e[12]||(e[12]=d("span",null,"%",-1))])]),d("div",F3,[e[14]||(e[14]=ab('<div class="recommended d-flex flex-row mb-1" data-v-6a073fe1><div class="carbs d-flex flex-column" data-v-6a073fe1><span data-v-6a073fe1>Carbs</span><span class="percent" data-v-6a073fe1>50%</span></div><div class="protein d-flex flex-column" data-v-6a073fe1><span data-v-6a073fe1>Prot</span><span class="percent" data-v-6a073fe1>25%</span></div><div class="fat d-flex flex-column" data-v-6a073fe1><span data-v-6a073fe1>Fat</span><span class="percent" data-v-6a073fe1>25%</span></div></div>',1)),d("div",B3,[n.carbs==0&&n.protein==0&&n.fat==0?x("",!0):(m(),p("div",z3,[d("span",{class:"carbs",style:$e({width:`${n.carbs}%`})},k(n.carbs)+"%",5),d("span",{class:"protein",style:$e({width:`${n.protein}%`})},k(n.protein)+"%",5),d("span",{class:"fat",style:$e({width:`${n.fat}%`})},k(n.fat)+"%",5)]))])]),d("div",j3,[d("div",H3,[t.isEditWater?X((m(),p("input",{key:1,class:"water-quantity textbox ms-1",ref:"waterQuantity",type:"number",placeholder:"#","onUpdate:modelValue":e[2]||(e[2]=l=>t.waterQuantity=l),style:$e({width:n.waterInputWidth}),onClick:e[3]||(e[3]=ye(()=>{},["prevent","stop"])),onBlur:e[4]||(e[4]=ye((...l)=>n.setWater&&n.setWater(...l),["prevent","stop"]))},null,36)),[[Ae,t.waterQuantity,void 0,{trim:!0,lazy:!0}]]):(m(),p("div",{key:0,class:"d-flex flex-row",onClick:e[1]||(e[1]=ye((...l)=>n.editWater&&n.editWater(...l),["prevent","stop"]))},[d("span",U3,k(n.floatString(this.meal.water,0)),1),d("span",G3,"/"+k(t.waterRecommeded)+" oz",1)]))]),e[16]||(e[16]=d("img",{class:"droplet",src:AS,width:"28",height:"45"},null,-1)),d("div",Y3,[d("span",null,k(n.waterPercentage),1),e[15]||(e[15]=d("span",null,"%",-1))])])])):x("",!0),t.itemsExpanded?(m(),p("div",q3,[i.meal.iteration?(m(),p("div",K3,[t.editTime?t.editTime?(m(),p("div",Z3,[H(o,{class:F(["date-selector",{invalid:!t.isTimeValid}]),dateTime:t.startAt.toJSON(),onOnChange:e[7]||(e[7]=l=>n.setTime(l,"start"))},null,8,["class","dateTime"]),H(o,{class:F(["date-selector mt-2",{invalid:!t.isTimeValid}]),dateTime:t.endAt.toJSON(),onOnChange:e[8]||(e[8]=l=>n.setTime(l,"end"))},null,8,["class","dateTime"]),d("div",X3,[d("button",{type:"button",class:"btn btn-sm btn-primary mb-1",onClick:e[9]||(e[9]=(...l)=>n.setTimeNow&&n.setTimeNow(...l))},"Now"),d("button",{type:"button",class:"btn btn-sm btn-primary mb-1 ms-1",onClick:e[10]||(e[10]=(...l)=>n.saveTime&&n.saveTime(...l))},"Done"),d("button",{type:"button",class:"btn btn-sm btn-warning mb-1 ms-1",onClick:e[11]||(e[11]=(...l)=>n.refreshTimes&&n.refreshTimes(...l))},"Cancel")])])):x("",!0):(m(),p("div",{key:0,class:"display d-flex flex-row",onClick:e[6]||(e[6]=l=>t.editTime=!0)},[t.startAt?(m(),p("span",J3,k(n.toShortTimeString(t.startAt)),1)):x("",!0),t.endAt?(m(),p("span",Q3,k(n.toShortTimeString(t.endAt)),1)):x("",!0)]))])):x("",!0),H(a,{meal:i.meal},null,8,["meal"])])):x("",!0)])}const t8=Q(S3,[["render",e8],["__scopeId","data-v-6a073fe1"]]),pn="/icon/button/add.png",i8={name:"FoodItemForm",components:{},props:{foodItem:Object},data:function(){return{physicalStore:void 0,item:void 0,idFoodItem2:void 0,nutrients:[{name:"Calories"},{name:"Fat"},{name:"SaturatedFat"},{name:"TransFat"},{name:"MonounsaturatedFat"},{name:"PolyunsaturatedFat"},{name:"Cholesterol"},{name:"Sodium"},{name:"Carbohydrates"},{name:"Fiber"},{name:"Sugars"},{name:"Protein"},{name:"Calcium"},{name:"Iron"},{name:"Potassium"},{name:"Folate"},{name:"Magnesium"},{name:"NiacinB3"},{name:"Phosphorus"},{name:"RiboflavinB2"},{name:"ThiaminB1"},{name:"VitaminE"},{name:"VitaminA"},{name:"VitaminB12"},{name:"VitaminB6"},{name:"VitaminC"},{name:"VitaminD"},{name:"VitaminK"},{name:"TCH"},{name:"CBD"},{name:"Alcohol"}]}},created:async function(){this.physicalStore=Js(),this.foodItem&&this.initializeItem(this.foodItem)},computed:{units(){return this.item.units}},methods:{initializeItem:s8,toCamelCase:gw,setDefaultUnit:n8,createUnit:r8,onChange_Grams:o8,onChange_ServingGrams:a8,onChange_ServingQuantity:l8,save:d8},watch:{foodItem(t){this.initializeItem(t)}}};function s8(t){let e=fe(t);e.units.forEach(i=>{i.servingGrams=i.servingQuantity&&i.grams?i.grams*i.servingQuantity:void 0}),this.item=e}function n8(t){this.item.units.forEach(e=>{e.isDefault=!1}),t.isDefault=!0}function r8(){let t=!1;this.item.units.forEach(i=>{i.isDefault&&(t=!0)});let e={unit:void 0,grams:void 0,servingQuantity:void 0,isDefault:t?void 0:!0};this.item.units.push(e)}function o8(t,e){let i=t.target.value;e.grams=i,e.servingQuantity&&(e.servingGrams=i*e.servingQuantity,e.isValid=!0)}function a8(t,e){let i=t.target.value;e.servingGrams=i,e.servingQuantity&&i?(e.grams=i/e.servingQuantity,e.isValid=!0):!e.servingQuantity&&!e.servingGrams&&(e.isValid=!0)}function l8(t,e){let i=t.target.value;e.servingQuantity=i,e.servingGrams&&i?(e.grams=e.servingGrams/i,e.isValid=!0):!e.servingQuantity&&!e.servingGrams&&(e.isValid=!0)}function d8(){let t=!0;this.item.isOG?this.idFoodItem2&&this.physicalStore.replaceOGFoodItem(this.item.id,this.idFoodItem2).then(()=>{this.$emit("back")}):(this.nutrients.forEach(e=>{this.item[e.name.toCamelCase()]==""&&(this.item[e.name.toCamelCase()]=null)}),this.item.units.forEach(e=>{!e.servingQuantity&&e.servingGrams&&(e.isValid=!1,t=!1),e.servingQuantity&&!e.servingGrams&&(e.isValid=!1,t=!1)}),t&&this.physicalStore.saveFoodItem(this.item).then(e=>{e&&this.$emit("back")}))}const u8={key:0,class:"food-item-form d-flex flex-column p-2 flex-grow-1 overflow-scroll"},c8={class:"d-flex flex-column overflow-scroll"},h8={class:"text-start ms-1 mb-2"},f8={key:0,class:"form-floating mb-2"},m8={class:"form-floating mb-2"},p8={class:"form-floating mb-2"},g8={class:"form-floating mb-2"},v8={class:"form-floating mb-2"},y8=["id","placeholder","onUpdate:modelValue"],_8=["for"],b8={class:"form-floating mb-2"},w8={class:"units d-flex flex-column mb-4"},S8={class:"d-flex"},T8={class:"food-item-unit d-flex flex-column mb-2"},x8={class:"d-flex justify-content-between align-items-center"},I8={class:"text-start ms-2 mb-1"},E8={class:"d-flex flex-row justify-items-start mb-2"},D8=["onClick"],k8={class:"form-floating mb-2"},C8=["id","onUpdate:modelValue"],P8=["for"],A8={class:"form-floating mb-2"},R8=["id","value","onInput"],M8=["for"],O8={class:"d-flex gap-2"},$8={class:"form-floating mb-2"},N8=["id","value","onInput"],L8=["for"],V8={class:"form-floating mb-2"},W8=["id","onUpdate:modelValue","onInput"],F8=["for"],B8={class:"d-flex sticky-bottom"};function z8(t,e,i,s,r,n){return t.item?(m(),p("div",u8,[d("div",c8,[d("span",h8,k(t.item.id),1),t.item.isOG?(m(),p("div",f8,[X(d("input",{type:"number",class:"form-control",id:"food-item-form-fi2-id",placeholder:"Food Item 2 ID","onUpdate:modelValue":e[0]||(e[0]=o=>t.idFoodItem2=o)},null,512),[[Ae,t.idFoodItem2,void 0,{lazy:!0,trim:!0}]]),e[9]||(e[9]=d("label",{for:"food-item-form-fi2-id"},"Food Item 2 ID",-1))])):x("",!0),d("div",m8,[X(d("input",{type:"text",class:"form-control",id:"food-item-form-name",placeholder:"Name","onUpdate:modelValue":e[1]||(e[1]=o=>t.item.name=o)},null,512),[[Ae,t.item.name,void 0,{lazy:!0,trim:!0}]]),e[10]||(e[10]=d("label",{for:"food-item-form-name"},"Name",-1))]),d("div",p8,[X(d("input",{type:"text",class:"form-control",id:"food-item-form-brand-name",placeholder:"Brand Name","onUpdate:modelValue":e[2]||(e[2]=o=>t.item.brandName=o)},null,512),[[Ae,t.item.brandName,void 0,{lazy:!0,trim:!0}]]),e[11]||(e[11]=d("label",{for:"food-item-form-brand-name"},"Brand Name",-1))]),d("div",g8,[X(d("input",{type:"text",class:"form-control",id:"food-item-form-upc",placeholder:"UPC","onUpdate:modelValue":e[3]||(e[3]=o=>t.item.upc=o)},null,512),[[Ae,t.item.upc,void 0,{lazy:!0,trim:!0}]]),e[12]||(e[12]=d("label",{for:"food-item-form-upc"},"UPC",-1))]),d("div",v8,[X(d("input",{type:"number",class:"form-control",id:"food-item-form-grams",placeholder:"Grams","onUpdate:modelValue":e[4]||(e[4]=o=>t.item.grams=o),min:"0"},null,512),[[Ae,t.item.grams,void 0,{lazy:!0,trim:!0}]]),e[13]||(e[13]=d("label",{for:"food-item-form-name"},"Grams",-1))]),(m(!0),p(L,null,G(t.nutrients,(o,a)=>(m(),p("div",{key:a,class:"form-floating mb-2"},[X(d("input",{type:"number",class:"form-control",id:`food-item-form-${n.toCamelCase(o.name)}`,placeholder:o.name,"onUpdate:modelValue":l=>t.item[n.toCamelCase(o.name)]=l,min:"0"},null,8,y8),[[Ae,t.item[n.toCamelCase(o.name)],void 0,{lazy:!0,trim:!0}]]),d("label",{for:`food-item-form-${n.toCamelCase(o.name)}`},k(o.name),9,_8)]))),128)),d("div",b8,[X(d("input",{type:"text",class:"form-control",id:"food-item-form-thumb-url",placeholder:"Thumb URL","onUpdate:modelValue":e[5]||(e[5]=o=>t.item.thumbURL=o)},null,512),[[Ae,t.item.thumbURL,void 0,{lazy:!0,trim:!0}]]),e[14]||(e[14]=d("label",{for:"food-item-form-thumb-url"},"Thumb URL",-1))]),d("div",w8,[d("div",S8,[e[16]||(e[16]=d("span",{class:"units-head text-start"},k("Units"),-1)),d("button",{class:"add-btn my-auto ms-1",type:"button",onClick:e[6]||(e[6]=(...o)=>n.createUnit&&n.createUnit(...o))},e[15]||(e[15]=[d("img",{class:"m-auto",src:pn,width:"10",height:"10"},null,-1)]))]),(m(!0),p(L,null,G(n.units,(o,a)=>(m(),p("div",T8,[d("div",x8,[d("span",I8,k(`Unit ${a+1}`),1),d("div",E8,[d("span",{class:F(["checkbox",{selected:o.isDefault}]),onClick:l=>n.setDefaultUnit(o)}," Default ",10,D8)])]),d("div",k8,[X(d("input",{type:"text",class:"form-control",id:`food-item-form-unit-unit-${a}`,placeholder:"Unit","onUpdate:modelValue":l=>o.unit=l},null,8,C8),[[Ae,o.unit,void 0,{lazy:!0,trim:!0}]]),d("label",{for:`food-item-form-unit-unit-${a}`},"Unit",8,P8)]),d("div",A8,[d("input",{type:"number",class:"form-control",id:`food-item-form-unit-grams-${a}`,placeholder:"Grams",value:o.grams,min:"0",onInput:l=>n.onChange_Grams(l,o)},null,40,R8),d("label",{for:`food-item-form-unit-grams-${a}`},"Grams",8,M8)]),d("div",O8,[d("div",$8,[d("input",{type:"number",class:F(["form-control",{invalid:o.isValid==!1}]),id:`food-item-form-unit-serving-grams-${a}`,placeholder:"Serving Grams",value:o.servingGrams,min:"0",onInput:l=>n.onChange_ServingGrams(l,o)},null,42,N8),d("label",{for:`food-item-form-unit-serving-grams-${a}`},"Serving Grams",8,L8)]),d("div",V8,[X(d("input",{type:"number",class:F(["form-control",{invalid:o.isValid==!1}]),id:`food-item-form-unit-serving-quantity-${a}`,placeholder:"Serving Quantity","onUpdate:modelValue":l=>o.servingQuantity=l,min:"0",onInput:l=>n.onChange_ServingQuantity(l,o)},null,42,W8),[[Ae,o.servingQuantity,void 0,{lazy:!0,trim:!0}]]),d("label",{for:`food-item-form-unit-serving-quantity-${a}`},"Serving Quantity",8,F8)])])]))),256))])]),d("div",B8,[d("button",{type:"button",class:"btn btn-primary btn-sm float-start mb-2 me-1",onClick:e[7]||(e[7]=(...o)=>n.save&&n.save(...o))}," Save "),d("button",{type:"button",class:"btn btn-warning btn-sm float-start mb-2",onClick:e[8]||(e[8]=o=>t.$emit("back"))}," Cancel ")])])):x("",!0)}const j8=Q(i8,[["render",z8],["__scopeId","data-v-f9aa3941"]]),H8={name:"RadioButton",props:{options:Array,initiallySelected:String},data:function(){return{initialized:!1,selected:void 0}},created:function(){this.selected=this.initiallySelected,this.initialized=!0},watch:{selected(){this.initialized&&this.$emit("selectOption",this.selected)}}},U8={class:"btn-group w-100",role:"group","aria-label":"moment"},G8=["id","value"],Y8=["for"];function q8(t,e,i,s,r,n){return m(),p("div",U8,[(m(!0),p(L,null,G(i.options,(o,a)=>(m(),p(L,{key:a+1},[X(d("input",{type:"radio",class:"btn-check",id:o,"onUpdate:modelValue":e[0]||(e[0]=l=>t.selected=l),value:o},null,8,G8),[[Hr,t.selected]]),d("label",{class:"btn btn-outline-primary",for:o},k(o),9,Y8)],64))),128))])}const K8=Q(H8,[["render",q8],["__scopeId","data-v-874c8b42"]]),J8={name:"FoodSearchItem",components:{},props:{item:Object,meal:Object},data:function(){return{physicalStore:void 0,quantity:1,unit:0}},created:async function(){this.physicalStore=Js(),this.quantity=this.item.quantity,this.setUnit()},computed:{units(){let t=[];return this.item.units.forEach(e=>{let i={...e};i.text=`${e.unit} (${e.grams.round()}g)`,t.push(i)}),t}},watch:{units(){this.setUnit()}},methods:{setUnit:Q8,addFoodItem:Z8,float:Zu}};function Q8(){let t=0;for(let e=0;e<this.units.length;e++)if(this.units[e].isDefault){t=e;break}this.unit=t}async function Z8(){var t=new Date(this.meal.dateTime);ic(t,new Date);let e={foodItemID:this.item.id,mealID:this.meal.id>0?this.meal.id:void 0,meal:this.meal.name,foodName:this.item.name,unit:this.units[this.unit].unit,grams:this.units[this.unit].grams,quantity:this.quantity,dateString:t.toLocaleString(),dateTime:t,foodItem:this.item.id?void 0:this.item};this.physicalStore.addFoodItemToMeal(e)}const X8={class:"food-item-search-item item d-flex flex-column align-items-center"},ej=["src"],tj={class:"d-flex flex-column flex-grow-1"},ij={class:"name text-start"},sj={class:"serving d-flex flex-row"},nj={class:"float-end"},rj={class:"input-wrrapper d-flex flex-row w-100 mt-1"},oj=["value"];function aj(t,e,i,s,r,n){return m(),p("div",X8,[d("div",{class:"d-flex flex-row justify-content-between align-items-center w-100",onClick:e[0]||(e[0]=o=>t.$emit("selectFoodItem",i.item))},[d("img",{class:"align-self-start",src:i.item.thumbURL,height:"40",width:"40"},null,8,ej),d("div",tj,[d("span",ij,k(i.item.name),1),d("div",sj,[d("span",null,k(i.item.brandName),1)])]),d("span",nj,k(n.float(i.item.calories,0)),1)]),d("div",rj,[X(d("input",{class:"quantity textbox",type:"number",placeholder:"#","onUpdate:modelValue":e[1]||(e[1]=o=>t.quantity=o)},null,512),[[Ae,t.quantity,void 0,{trim:!0,lazy:!0}]]),X(d("select",{class:"form-select form-select-sm panel-select ms-1","aria-label":"select","onUpdate:modelValue":e[2]||(e[2]=o=>t.unit=o),onClick:e[3]||(e[3]=ye(()=>{},["stop"]))},[(m(!0),p(L,null,G(n.units,(o,a)=>(m(),p("option",{key:a,value:a},k(o.text),9,oj))),128))],512),[[Ts,t.unit]]),d("button",{class:"add-btn my-auto ms-1",type:"button",onClick:e[4]||(e[4]=(...o)=>n.addFoodItem&&n.addFoodItem(...o))},e[5]||(e[5]=[d("img",{class:"m-auto",src:pn,width:"10",height:"10"},null,-1)]))])])}const lj=Q(J8,[["render",aj],["__scopeId","data-v-787b051b"]]),dj={name:"",components:{RadioButton:K8,FoodSearchItem:lj},props:{meal:Object},data:function(){return{physicalStore:void 0,searchTerm:"",quantity:1,tab:"Recent2",tabs:["All","Recent","Recent2","UPC"],recents:[],common:[],branded:[],upc:[],noUPCResult:void 0}},created:async function(){this.physicalStore=Js(),this.recents=await this.physicalStore.getRecentFoodItems()},computed:{recents2(){return this.physicalStore?this.physicalStore.getRecentFoodItems2():[]}},methods:{float:Zu,setTimeFromDate:ic,search:uj,clearResults:cj,searchFoodItem:hj,searchUPC:fj,addRecentItem:pj,createFoodItem:mj,addFoodItem:gj},watch:{searchTerm(){this.search()}}};function uj(){this.searchTerm.trim()!=""?["All","Common","Branded"].includes(this.tab)?this.searchFoodItem():this.tab=="UPC"&&this.searchUPC():this.clearResults()}function cj(){this.common=[],this.branded=[],this.upc=[]}async function hj(){let t=await this.physicalStore.foodSearchAutoComplete(this.searchTerm);this.common=t.common,this.branded=t.branded}async function fj(){let t=await this.physicalStore.searchFoodUPC(this.searchTerm);t?(this.upc=t,this.noUPCResult=!1):(this.upc=[],this.noUPCResult=!0)}function mj(){let t=this.physicalStore.createFoodItem();this.$emit("selectFoodItem",t)}function pj(t){this.recents2.unshift(t)}async function gj(t,e){var i=new Date(this.meal.dateTime);this.setTimeFromDate(i,new Date);let s={mealID:this.meal.id>0?this.meal.id:void 0,meal:this.meal.name,foodName:["upc","recent"].includes(e)?t.name:t.food_name,nutritionixID:e=="branded"?t.nix_item_id:void 0,unit:["upc","recent"].includes(e)?t.unit:t.serving_unit,quantity:this.quantity,dateString:i.toLocaleString(),foodItem:["upc","recent"].includes(e)?t:void 0};this.physicalStore.addFoodItemToMeal(s),this.$emit("back")}const vj={class:"food-item-search d-flex flex-column flex-grow-1 overflow-scroll"},yj={class:"pt-2 ms-2 me-2 mb-2 sticky-top head"},_j={class:"d-flex flex-row mb-2"},bj={key:0,class:"recents d-flex flex-column"},wj=["onClick"],Sj=["src","onClick"],Tj={class:"d-flex flex-column flex-grow-1"},xj={class:"name text-start"},Ij={class:"serving d-flex flex-row"},Ej={class:"ms-1"},Dj={class:"float-end"},kj={key:1,class:"recents d-flex flex-column"},Cj={key:2,class:"common d-flex flex-column"},Pj=["onClick"],Aj=["src"],Rj={class:"d-flex flex-column flex-grow-1"},Mj={class:"name text-start"},Oj={class:"serving d-flex flex-row"},$j={class:"ms-1"},Nj={key:3,class:"branded d-flex flex-column"},Lj=["onClick"],Vj=["src"],Wj={class:"d-flex flex-column flex-grow-1"},Fj={class:"name text-start"},Bj={class:"serving d-flex flex-row"},zj={class:"ms-1"},jj={class:"float-end"},Hj={class:"upc d-flex flex-column"},Uj={key:0,class:"d-flex flex-column"},Gj={key:1};function Yj(t,e,i,s,r,n){const o=$("RadioButton"),a=$("FoodSearchItem");return m(),p("div",vj,[d("div",yj,[d("div",_j,[X(d("input",{id:"food-search-input",class:"title textbox",type:"text",ref:"text",placeholder:"Search","onUpdate:modelValue":e[0]||(e[0]=l=>t.searchTerm=l),onKeyup:e[1]||(e[1]=Ot((...l)=>n.search&&n.search(...l),["enter"]))},null,544),[[Ae,t.searchTerm,void 0,{trim:!0,lazy:!0}]]),X(d("input",{id:"quantity",class:"quantity textbox ms-1",type:"number",placeholder:"#","onUpdate:modelValue":e[2]||(e[2]=l=>t.quantity=l)},null,512),[[Ae,t.quantity,void 0,{trim:!0,lazy:!0}]]),d("button",{class:"add-btn my-auto ms-1",type:"button",onClick:e[3]||(e[3]=(...l)=>n.createFoodItem&&n.createFoodItem(...l))},e[7]||(e[7]=[d("img",{class:"m-auto",src:pn,width:"10",height:"10"},null,-1)]))]),H(o,{initiallySelected:t.tab,options:t.tabs,onSelectOption:e[4]||(e[4]=l=>t.tab=l)},null,8,["initiallySelected","options"])]),["Recent"].includes(t.tab)&&t.recents.length>0?(m(),p("div",bj,[e[8]||(e[8]=d("span",{class:"text-start ms-2"},"Recents",-1)),(m(!0),p(L,null,G(t.recents,(l,c)=>(m(),p("div",{key:c,class:"item d-flex flex-row align-items-center",onClick:f=>n.addFoodItem(l,"recent")},[d("img",{class:"align-self-start",src:l.thumbURL,height:"40",width:"40",onClick:ye(f=>t.$emit("selectFoodItem",l),["prevent","stop"])},null,8,Sj),d("div",Tj,[d("span",xj,k(l.name),1),d("div",Ij,[d("span",null,k(l.brandName),1),d("span",null,k(l.quantity),1),d("span",Ej,k(l.unit),1)])]),d("span",Dj,k(n.float(l.calories,0)),1)],8,wj))),128))])):x("",!0),["Recent2"].includes(t.tab)&&n.recents2.length>0?(m(),p("div",kj,[e[9]||(e[9]=d("span",{class:"text-start ms-2"},"Recents",-1)),(m(!0),p(L,null,G(n.recents2,(l,c)=>(m(),ie(a,{key:c,item:l,meal:i.meal,onSelectFoodItem:e[5]||(e[5]=f=>t.$emit("selectFoodItem",f))},null,8,["item","meal"]))),128))])):x("",!0),["All","Common"].includes(t.tab)&&t.common.length>0?(m(),p("div",Cj,[e[10]||(e[10]=d("span",{class:"text-start ms-2"},"Common",-1)),(m(!0),p(L,null,G(t.common,(l,c)=>(m(),p("div",{key:c,class:"item d-flex flex-row align-items-center",onClick:f=>n.addFoodItem(l,"common")},[d("img",{class:"align-self-start",src:l.photoThumb,height:"40",width:"40"},null,8,Aj),d("div",Rj,[d("span",Mj,k(l.food_name),1),d("div",Oj,[d("span",null,k(l.serving_qty),1),d("span",$j,k(l.serving_unit),1)])])],8,Pj))),128))])):x("",!0),["All","Branded"].includes(t.tab)&&t.branded.length>0?(m(),p("div",Nj,[e[11]||(e[11]=d("span",{class:"text-start ms-2"},"Branded",-1)),(m(!0),p(L,null,G(t.branded,(l,c)=>(m(),p("div",{key:c,class:"item d-flex flex-row align-items-center",onClick:f=>n.addFoodItem(l,"branded")},[d("img",{class:"align-self-start",src:l.photoThumb,height:"40",width:"40"},null,8,Vj),d("div",Wj,[d("span",Fj,k(l.food_name),1),d("div",Bj,[d("span",null,k(l.brand_name),1),d("span",null,k(l.serving_qty),1),d("span",zj,k(l.serving_unit),1)])]),d("span",jj,k(n.float(l.nf_calories,0)),1)],8,Lj))),128))])):x("",!0),d("div",Hj,[["UPC"].includes(t.tab)&&t.upc.length>0?(m(),p("div",Uj,[e[12]||(e[12]=d("span",{class:"text-start ms-2"},"UPC",-1)),(m(!0),p(L,null,G(t.upc,(l,c)=>(m(),ie(a,{key:c,item:l,meal:i.meal,onSelectFoodItem:e[6]||(e[6]=f=>t.$emit("selectFoodItem",f))},null,8,["item","meal"]))),128))])):x("",!0),t.noUPCResult==!0?(m(),p("span",Gj,"No Results")):x("",!0)])])}const qj=Q(dj,[["render",Yj],["__scopeId","data-v-4854e074"]]),Kj={name:"NutritionPanel",components:{MealItem:t8,FoodItemSearch:qj,FoodItemForm:j8,NutrientChart:f3},props:{showHead:{type:Boolean,default:!0}},data:function(){return{plannerStore:void 0,physicalStore:void 0,selectedPanel:"home",activeMeal:void 0,activeFoodItem:void 0,waterQuantity:void 0,isEditWater:!1,isTimeValid:!0}},created:function(){this.plannerStore=bn(),this.physicalStore=Js(),this.refresh()},computed:{date(){return this.plannerStore?this.plannerStore.selectedDate:$t(new Date)},mealsInRange(){if(this.date){let t=ft(this.date),e=this.physicalStore.meals;return e=e.filter(i=>+new Date(i.dateTime)>=this.date&&+new Date(i.dateTime)<=t),fe(e)}else return[]},meals(){let t=this,e=1;return["Breakfast","Lunch","Dinner","Snack"].map(i=>{let s=t.mealsInRange.find(n=>n.name.toLowerCase()==i.toLowerCase()),r={};return s?r={...s}:r={id:-1*e++,name:i,dateTime:t.date,foodItems:[],macros:{carbs:0,protein:0,fat:0},water:0},r})},proteinConsumed(){return this.mealsInRange?this.mealsInRange.reduce((t,e)=>t+e.protein,0):0},caloriesRecommended(){return 2e3},caloriesConsumed(){return this.mealsInRange?this.mealsInRange.reduce((t,e)=>t+e.calories,0):0},caloriesRemaining(){return this.caloriesRecommended-this.caloriesConsumed},waterRecommended(){return 140},waterConsumed(){return this.waterInRange?this.waterInRange.reduce((t,e)=>t+e.amount,0):0},waterRemaining(){return this.waterRecommended-this.waterConsumed},waterInputWidth(){return this.waterQuantity<10?"25px":this.waterQuantity<100?"34px":"41px"},waterInRange(){if(this.date){let t=ft(this.date),e=this.physicalStore.waterLogs;return e=e.filter(i=>+new Date(i.dateTime)>=this.date&&+new Date(i.dateTime)<=t),fe(e)}else return[]}},methods:{refresh:Jj,searchFoodItems:Qj,selectFoodItem:Zj,back:Xj,float:Zu,setTimeFromDate:ic,editWater:eH,cancelEditWater:tH,setWater:iH},watch:{date(){this.refresh()}}};function Jj(){let t=ft(this.date);this.physicalStore.getMealsInRange(this.date,t,!0)}function Qj(t){this.activeMeal=t,this.selectedPanel="foodItemSearch"}function Zj(t){this.activeFoodItem=t,this.selectedPanel="foodItemForm"}function Xj(){this.selectedPanel=="foodItemSearch"?this.selectedPanel="home":this.selectedPanel=="foodItemForm"&&(this.selectedPanel="foodItemSearch")}async function eH(){this.isEditWater=!0,await this.$nextTick(),this.$refs.waterQuantity.focus()}async function tH(){this.waterQuantity=void 0,await this.$nextTick(),this.isEditWater=!1}function iH(){if(this.isEditWater=!1,this.waterQuantity){var t=new Date(this.date);this.setTimeFromDate(t,new Date),this.physicalStore.logWater(this.waterQuantity,t),this.waterQuantity=void 0}}const sH={class:"row g-0 h-100"},nH={class:"col h-100 d-flex flex-column"},rH={class:"nutrition d-flex flex-column flex-grow-1 overflow-hidden"},oH={class:"head align-content-center"},aH={class:"d-flex flex-row justify-content-start ps-2"},lH={class:"info d-flex flex-row"},dH={class:"calories d-flex flex-row"},uH={class:"d-flex flex-column"},cH={class:"amount"},hH={class:"amount"},fH={class:"remaining d-flex flex-column"},mH={class:"calorie-amount"},pH={class:"water d-flex flex-row"},gH={class:"remaining d-flex flex-column"},vH={class:"water-amount"},yH={class:"d-flex flex-column"},_H={class:"amount"},bH={class:"amount"},wH={class:"protein d-flex flex-row mt-1"},SH={class:"ms-2"},TH={class:"meals d-flex flex-column mt-1"};function xH(t,e,i,s,r,n){const o=$("NutrientChart"),a=$("MealItem"),l=$("FoodItemSearch"),c=$("FoodItemForm");return m(),p("div",sH,[d("div",nH,[d("div",rH,[X(d("div",oH,[e[7]||(e[7]=d("span",{class:"label"},"Nutrition",-1)),d("div",aH,[d("img",{class:"icon-button",src:Wi,width:"20",height:"20",onClick:e[0]||(e[0]=ye((...f)=>n.back&&n.back(...f),["prevent"]))})])],512),[[it,i.showHead]]),d("div",{class:F(["body d-flex flex-column flex-grow-1",{hide:t.selectedPanel!="home"}])},[d("div",lH,[d("div",dH,[d("div",uH,[d("span",cH,k(n.caloriesRecommended),1),e[8]||(e[8]=d("span",{class:"label"},"Recommended",-1)),d("span",hH,k(n.float(n.caloriesConsumed,0)),1),e[9]||(e[9]=d("span",{class:"label"},"Consumed",-1))]),e[12]||(e[12]=d("img",{src:PS,width:"33",height:"45"},null,-1)),d("div",fH,[d("span",mH,k(n.float(n.caloriesRemaining,0)),1),e[10]||(e[10]=d("span",{class:"calories-label"},"Calories",-1)),e[11]||(e[11]=d("span",{class:"label"},"Remaining",-1))])]),d("div",pH,[d("div",gH,[d("span",vH,k(n.waterRemaining),1),e[13]||(e[13]=d("span",{class:"water-label"},"Water",-1)),e[14]||(e[14]=d("span",{class:"label"},"Remaining",-1))]),e[17]||(e[17]=d("img",{src:AS,width:"33",height:"45"},null,-1)),d("div",yH,[d("span",_H,k(n.waterRecommended),1),e[16]||(e[16]=d("span",{class:"label"},"Recommended",-1)),t.isEditWater?X((m(),p("input",{key:1,class:"water-quantity textbox ms-1",ref:"waterQuantity",type:"number","onUpdate:modelValue":e[2]||(e[2]=f=>t.waterQuantity=f),style:$e({width:n.waterInputWidth}),onKeyup:[e[3]||(e[3]=Ot(ye(f=>t.$refs.waterQuantity.blur(),["prevent","stop"]),["enter"])),e[4]||(e[4]=Ot(ye((...f)=>n.cancelEditWater&&n.cancelEditWater(...f),["prevent","stop"]),["esc"]))],onClick:e[5]||(e[5]=ye(()=>{},["prevent","stop"])),onBlur:e[6]||(e[6]=ye((...f)=>n.setWater&&n.setWater(...f),["prevent","stop"]))},null,36)),[[Ae,t.waterQuantity,void 0,{trim:!0,lazy:!0}]]):(m(),p("div",{key:0,class:"d-flex flex-column",onClick:e[1]||(e[1]=ye((...f)=>n.editWater&&n.editWater(...f),["prevent","stop"]))},[d("span",bH,k(n.waterConsumed),1),e[15]||(e[15]=d("span",{class:"label"},"Consumed",-1))]))])])]),d("div",wH,[e[18]||(e[18]=d("span",null,"Protein",-1)),d("span",SH,k(n.float(n.proteinConsumed,0)),1)]),H(o),d("div",TH,[(m(!0),p(L,null,G(n.meals,f=>(m(),ie(a,{key:f.id,class:"mb-2",meal:f,onSearchFoodItems:n.searchFoodItems},null,8,["meal","onSearchFoodItems"]))),128))])],2),X(H(l,{meal:t.activeMeal,class:F({hide:t.selectedPanel!="foodItemSearch"}),onSelectFoodItem:n.selectFoodItem,onBack:n.back},null,8,["meal","class","onSelectFoodItem","onBack"]),[[it,t.selectedPanel=="foodItemSearch"]]),X(H(c,{foodItem:t.activeFoodItem,class:F({hide:t.selectedPanel!="foodItemForm"}),onBack:n.back},null,8,["foodItem","class","onBack"]),[[it,t.selectedPanel=="foodItemForm"]])])])])}const RS=Q(Kj,[["render",xH],["__scopeId","data-v-8f5abd0c"]]),IH="/icon/circle-start.png",EH={name:"WorkoutItem",props:{workout:Object},data:function(){return{workoutStore:null,appStore:null,now:Date.now()}},created:function(){this.appStore=bt(),this.workoutStore=mi();var t=this;setInterval(function(){t.now=Date.now()},1e3)},computed:{isActive(){return!!(this.workout&&this.workout&&this.workout.iteration&&this.workout.iteration.startAt&&!this.workout.iteration.endAt)},isComplete(){return!!(this.workout&&this.workout&&this.workout.iteration&&this.workout.iteration.completedAt)},startAt(){if(this.isActive){let t=new Date(this.workout.iteration.startAt);return yr(t)}else return},timeSinceStart(){if(this.isActive){let t=new Date(this.workout.iteration.startAt);return Tm(t,this.now)}else return},completedAt(){if(this.isComplete)return`${yr(this.workout.iteration.startAt)}, ${zn(this.workout.iteration.startAt)}`}},methods:{startWorkout:DH,selectWorkout:kH}};function DH(){this.workoutStore.copyAndStartWorkout(this.workout.id,new Date).then(t=>{this.$emit("selectWorkout",{id:t.id})})}function kH(){this.$emit("selectWorkout",{id:this.workout.id})}const CH={class:"d-flex flex-column flex-grow-1"},PH={key:0,class:"name text-start"},AH={key:1,class:"name text-start"},RH={key:2,class:"d-flex flex-row justify-content-between"},MH={class:"time text-start"},OH={class:"time text-start"},$H={key:3,class:"time text-start"};function NH(t,e,i,s,r,n){return m(),p("div",{class:"workout-item d-flex flex-row align-items-center position-relative",onClick:e[1]||(e[1]=(...o)=>n.selectWorkout&&n.selectWorkout(...o))},[e[2]||(e[2]=d("span",{class:"image flex-shrink-0"},null,-1)),d("div",CH,[i.workout.isTemplate?x("",!0):(m(),p("span",PH,k(`${i.workout.name} - ${i.workout.points}`),1)),i.workout.isTemplate?(m(),p("span",AH,k(`${i.workout.name}`),1)):x("",!0),n.isActive?(m(),p("div",RH,[d("span",MH,k(n.startAt),1),d("span",OH,k(n.timeSinceStart),1)])):x("",!0),n.isComplete?(m(),p("span",$H,k(n.completedAt),1)):x("",!0)]),n.isActive?x("",!0):(m(),p("img",{key:0,class:"start icon-button me-2 position-absolute end-0",src:IH,width:"24",height:"24",onClick:e[0]||(e[0]=ye((...o)=>n.startWorkout&&n.startWorkout(...o),["prevent","stop"]))}))])}const LH=Q(EH,[["render",NH],["__scopeId","data-v-8a6b1c0a"]]),VH="/icon/task-icon.png",WH={name:"ExerciseSet",components:{ItemCheckbox:Sa},props:{index:Number,set:Object,exerciseID:Number,editingSetID:Number,showReps:{type:Boolean,default:!0},showWeight:{type:Boolean,default:!0},showHoldSeconds:{type:Boolean,default:!0},showTimeSeconds:{type:Boolean,default:!0}},created:function(){this.appStore=bt(),this.workoutStore=mi(),this.editingSetID==this.set.id&&(this.isEditing=!0)},data:function(){return{appStore:void 0,workoutStore:null,isEditing:!1,showCheckbox:!1,showVariationSelector:!1,console}},computed:{isExtraSmall(){return this.appStore?this.appStore.isExtraSmall:!0},rest(){if(this.set.restSeconds){let t=0,e=this.set.restSeconds;if(e>60){let r=e/60;t=Math.floor(r),e=e-t*60}let s=Math.floor(e).toLocaleString(void 0,{minimumIntegerDigits:2,useGrouping:!1});return`${t}:${s}`}else return""},isComplete(){return!!(this.set.iteration&&this.set.iteration.completedAt)},potentialVariations(){return this.workoutStore?fe(this.workoutStore.getExercise(this.exerciseID)).variations:[]},variationIDs(){return this.set.variations.map(t=>t.id)},variationString(){if(this.set.variations.length>0)return ya(this.set.variations,"name")}},methods:{inputWidth(t){return t<10?"27px":t<100?"37px":"45px"},editProp(t){let e=this;this.isEditing=!0,this.$nextTick(()=>{e.$refs[t].focus()}),this.$emit("setEditingID",this.set.id)},markComplete(){this.workoutStore.logSet(this.set.id,new Date)},markIncomplete(){this.workoutStore.logSet(this.set.id,void 0)},blur(t){(!t.relatedTarget||!t.relatedTarget.classList.contains("prop"))&&(this.doneEditing(),this.$emit("saveWorkout"))},doneEditing(){this.isEditing=!1,this.$emit("setEditingID",void 0)},variationClicked(t){this.variationIDs.includes(t)?this.$emit("removeVariation",{setID:this.set.id,variationID:t,exerciseID:this.exerciseID}):this.$emit("addVariation",{setID:this.set.id,variationID:t,exerciseID:this.exerciseID})}},watch:{editingSetID(t){t&&t!=this.set.id&&this.doneEditing()}}},FH={class:"variations text-start"},BH={class:"variations picks d-flex flex-row"},zH=["onClick"],jH={key:2,class:"editing d-flex flex-row flex-grow-1"},HH={class:"index"},UH={class:"d-flex flex-row flex-grow-1",style:{gap:"10px"}},GH={key:0,class:"reps d-flex flex-column align-items-center"},YH={key:1,class:"time d-flex flex-column align-items-center"},qH={key:2,class:"weight d-flex flex-column align-items-center"},KH={key:3,class:"hold d-flex flex-column align-items-center"},JH={class:"rest d-flex flex-column align-items-center"},QH={class:"button-group d-flex flex-column"},ZH={class:"d-flex flex-column flex-grow-1"},XH={class:"d-flex flex-row flex-grow-1"},eU={key:0,class:"index"},tU={class:"top d-flex flex-row flex-grow-1",style:{gap:"10px"}},iU={class:"prop"},sU={class:"prop"},nU={class:"prop"},rU={class:"prop"},oU={class:"bottom d-flex flex-row flex-grow-1"},aU={class:"button-group d-flex flex-column"};function lU(t,e,i,s,r,n){const o=$("ItemCheckbox");return m(),p("div",{class:F(["exercise-set-view d-flex flex-column flex-grow-1",{complete:n.isComplete}])},[!t.showVariationSelector&&n.variationString?(m(),p("div",{key:0,class:"d-flex flex-row",onClick:e[0]||(e[0]=a=>t.showVariationSelector=!0)},[d("span",FH,k(n.variationString),1)])):x("",!0),t.showVariationSelector?(m(),p("div",{key:1,class:"d-flex flex-row",onMouseleave:e[1]||(e[1]=a=>t.showVariationSelector=!1)},[d("div",BH,[(m(!0),p(L,null,G(n.potentialVariations,a=>(m(),p("span",{key:a.id,class:F({selected:n.variationIDs.includes(a.id)}),onClick:l=>n.variationClicked(a.id)},k(a.name),11,zH))),128))])],32)):x("",!0),t.isEditing?(m(),p("div",jH,[d("div",HH,k(i.index),1),d("div",UH,[i.showReps?(m(),p("div",GH,[X(d("input",{class:"prop form-control form-control-sm me-1",type:"number",min:"0",ref:"repsInput","onUpdate:modelValue":e[2]||(e[2]=a=>i.set.reps=a),style:$e({width:n.inputWidth(i.set.reps)}),onKeyup:e[3]||(e[3]=Ot((...a)=>n.doneEditing&&n.doneEditing(...a),["enter","esc"])),onBlur:e[4]||(e[4]=(...a)=>n.blur&&n.blur(...a))},null,36),[[Ae,i.set.reps]]),e[28]||(e[28]=d("span",{class:"text"},"REPS",-1))])):x("",!0),i.showTimeSeconds?(m(),p("div",YH,[X(d("input",{class:"prop form-control form-control-sm me-1",type:"number",min:"0",ref:"timeInput","onUpdate:modelValue":e[5]||(e[5]=a=>i.set.timeSeconds=a),style:$e({width:n.inputWidth(i.set.timeSeconds)}),onKeyup:e[6]||(e[6]=Ot((...a)=>n.doneEditing&&n.doneEditing(...a),["enter","esc"])),onBlur:e[7]||(e[7]=(...a)=>n.blur&&n.blur(...a))},null,36),[[Ae,i.set.timeSeconds]]),e[29]||(e[29]=d("span",{class:"text"},"TIME",-1))])):x("",!0),i.showWeight?(m(),p("div",qH,[X(d("input",{class:"prop form-control form-control-sm me-1",type:"number",min:"0",ref:"weightInput","onUpdate:modelValue":e[8]||(e[8]=a=>i.set.weight=a),style:$e({width:n.inputWidth(i.set.weight)}),onKeyup:e[9]||(e[9]=Ot((...a)=>n.doneEditing&&n.doneEditing(...a),["enter","esc"])),onBlur:e[10]||(e[10]=(...a)=>n.blur&&n.blur(...a))},null,36),[[Ae,i.set.weight]]),e[30]||(e[30]=d("span",{class:"text"},"LBS",-1))])):x("",!0),i.showHoldSeconds?(m(),p("div",KH,[X(d("input",{class:"prop form-control form-control-sm me-1",type:"number",min:"0",ref:"holdInput","onUpdate:modelValue":e[11]||(e[11]=a=>i.set.holdSeconds=a),style:$e({width:n.inputWidth(i.set.holdSeconds)}),onKeyup:e[12]||(e[12]=Ot((...a)=>n.doneEditing&&n.doneEditing(...a),["enter","esc"])),onBlur:e[13]||(e[13]=(...a)=>n.blur&&n.blur(...a))},null,36),[[Ae,i.set.holdSeconds]]),e[31]||(e[31]=d("span",{class:"text"},"HOLD",-1))])):x("",!0),d("div",JH,[X(d("input",{class:"prop form-control form-control-sm me-1",type:"number",min:"0",ref:"restInput","onUpdate:modelValue":e[14]||(e[14]=a=>i.set.restSeconds=a),style:$e({width:n.inputWidth(i.set.restSeconds)}),onKeyup:e[15]||(e[15]=Ot((...a)=>n.doneEditing&&n.doneEditing(...a),["enter","esc"])),onBlur:e[16]||(e[16]=(...a)=>n.blur&&n.blur(...a))},null,36),[[Ae,i.set.restSeconds]]),e[32]||(e[32]=d("span",{class:"text"},"REST",-1))])]),d("div",QH,[d("img",{class:"icon-button",src:VH,width:"16",height:"16",onClick:e[17]||(e[17]=(...a)=>n.doneEditing&&n.doneEditing(...a))}),d("img",{class:"icon-button",src:jn,width:"16",height:"16",onClick:e[18]||(e[18]=a=>t.$emit("deleteSet",i.set.id))})])])):(m(),p("div",{key:3,class:"d-flex flex-row flex-grow-1",onMouseover:e[26]||(e[26]=a=>t.showCheckbox=!0),onMouseleave:e[27]||(e[27]=a=>t.showCheckbox=!1)},[d("div",ZH,[d("div",XH,[!n.isExtraSmall||!t.showCheckbox?(m(),p("div",eU,k(i.index),1)):x("",!0),n.isExtraSmall||t.showCheckbox?(m(),ie(o,{key:1,class:"checkbox align-self-start",style:{"margin-top":"-2px"},checked:n.isComplete,width:20,height:20,onOnChecked:n.markComplete,onOnUnchecked:n.markIncomplete},null,8,["checked","onOnChecked","onOnUnchecked"])):x("",!0),d("div",tU,[i.showReps?(m(),p("div",{key:0,class:"reps d-flex flex-row align-items-center",onClick:e[19]||(e[19]=a=>n.editProp("repsInput"))},[d("span",iU,k(i.set.reps),1),e[33]||(e[33]=d("span",{class:"text ms-1"},"REPS",-1))])):x("",!0),i.showTimeSeconds?(m(),p("div",{key:1,class:"time d-flex flex-row align-items-center",onClick:e[20]||(e[20]=a=>n.editProp("timeInput"))},[d("span",sU,k(i.set.timeSeconds),1),e[34]||(e[34]=d("span",{class:"text ms-1"},"SECS",-1))])):x("",!0),i.showWeight?(m(),p("div",{key:2,class:"weight d-flex flex-row align-items-center",onClick:e[21]||(e[21]=a=>n.editProp("weightInput"))},[d("span",nU,k(i.set.weight),1),e[35]||(e[35]=d("span",{class:"text ms-1"},"LBS",-1))])):x("",!0),i.showHoldSeconds?(m(),p("div",{key:3,class:"hold d-flex flex-row align-items-center",onClick:e[22]||(e[22]=a=>n.editProp("holdInput"))},[d("span",rU,k(i.set.holdSeconds),1),e[36]||(e[36]=d("span",{class:"text ms-1"},"HOLD",-1))])):x("",!0)])]),d("div",oU,[d("div",{class:"rest",onClick:e[23]||(e[23]=a=>n.editProp("restInput"))},[d("span",null,k(n.rest)+" REST",1)])])]),d("div",aU,[d("img",{class:"icon-button",src:go,width:"16",height:"16",onClick:e[24]||(e[24]=a=>t.showVariationSelector=!t.showVariationSelector)}),d("img",{class:"icon-button",src:jn,width:"16",height:"16",onClick:e[25]||(e[25]=a=>t.$emit("deleteSet",i.set.id))})])],32))],2)}const dU=Q(WH,[["render",lU],["__scopeId","data-v-e3d71b50"]]),uU={name:"ExerciseItem",components:{ExerciseSetForm:dU},props:{exercise:Object,isActive:Boolean,isComplete:Boolean},data:function(){return{workoutStore:void 0,setsShown:!1,showOptions:!1,showReps:!1,showWeight:!1,showHoldSeconds:!1,showTimeSeconds:!1,editingSetID:void 0,dragPosition:""}},created:function(){this.workoutStore=mi();let t=this;if(this.exercise.sets.value.length==0&&this.$emit("addDefaultSet",this.exercise.exercise.id),this.exercise.sets.value.length==1){let e=this.exercise.sets.value[0];!e.reps&&!e.weight&&!e.holdSeconds&&!e.timeSeconds?(this.editingSetID=e.id,t.showReps=!0,t.showWeight=!0,t.showHoldSeconds=!0,t.showTimeSeconds=!0):(e.reps&&(t.showReps=!0),e.weight&&(t.showWeight=!0),e.holdSeconds&&(t.showHoldSeconds=!0),e.timeSeconds&&(t.showTimeSeconds=!0))}else this.exercise.sets.value.forEach(e=>{e.reps&&(t.showReps=!0),e.weight&&(t.showWeight=!0),e.holdSeconds&&(t.showHoldSeconds=!0),e.timeSeconds&&(t.showTimeSeconds=!0)});this.isComplete&&(this.setsShown=!1)},computed:{setCount(){let t=this.exercise.sets.value.length;return this.isActive?`${this.exercise.sets.value.filter(i=>i.iteration&&i.iteration.completedAt).length}/${t}`:`${t}`},isExerciseComplete(){let t=this.exercise.sets.value.length;return this.isActive?this.exercise.sets.value.filter(i=>i.iteration&&i.iteration.completedAt).length==t:!1}},methods:{addSet(){this.$emit("addSet",this.exercise.exercise.id)},deleteSet(t){this.$emit("deleteSet",{setID:t,exerciseID:this.exercise.exercise.id})},showSets(){this.exercise.sets.value.length==0&&this.$emit("addDefaultSet",this.exercise.exercise.id),this.setsShown=!this.setsShown},onDragStart:cU,onDragOver:hU,onDrop:fU,onDragLeave:mU,onDragEnd:pU}};function cU(t){console.log("Drag Started"),t.target.classList.add("drag"),t.dataTransfer.dropEffect="move",t.dataTransfer.effectAllowed="move",this.workoutStore.setDraggedProps(this.exercise.exercise.id)}function hU(t){if(t.preventDefault(),this.dragPosition="",!t.currentTarget.classList.contains("drag")){t.preventDefault();var e=this.$refs.item.getBoundingClientRect(),i=t.clientY-e.y,s=i/e.height;s<.5?this.dragPosition="before":this.dragPosition="after"}}function fU(t){t.preventDefault();var e=this.workoutStore.getDragged,i=this.dragPosition=="before"?this.exercise.position:this.exercise.position+1;this.$emit("repositionExercise",e.exerciseID,i),this.dragPosition=""}function mU(){this.dragPosition=""}function pU(t){t.target.classList.remove("drag"),this.dragPosition="",this.workoutStore.clearDraggedProps()}const gU={class:"d-flex flex-row flex-grow-1 justify-content-between position-relative"},vU={class:"d-flex flex-row overflow-hidden"},yU={class:"label d-flex flex-column"},_U={class:"name"},bU={class:"d-flex flex-row"},wU={class:"button-group d-flex flex-column"},SU={key:0,class:"d-flex flex-row mt-1"},TU={key:1,class:"sets d-flex flex-column"};function xU(t,e,i,s,r,n){const o=$("ExerciseSetForm");return m(),p("div",{class:F(["exercise-item d-flex flex-column",[{complete:n.isExerciseComplete},t.dragPosition]]),ref:"item",draggable:"true",onDragenter:e[12]||(e[12]=ye(()=>{},["prevent"])),onDragstart:e[13]||(e[13]=a=>n.onDragStart(a)),onDragend:e[14]||(e[14]=a=>n.onDragEnd(a)),onDrop:e[15]||(e[15]=a=>n.onDrop(a)),onDragover:e[16]||(e[16]=a=>n.onDragOver(a)),onDragleave:e[17]||(e[17]=a=>n.onDragLeave(a))},[d("div",gU,[d("div",vU,[e[18]||(e[18]=d("span",{class:"image flex-shrink-0"},null,-1)),d("div",yU,[d("span",_U,k(i.exercise.exercise.name),1),d("div",bU,[d("span",{class:"set-count",onClick:e[0]||(e[0]=(...a)=>n.showSets&&n.showSets(...a))},k(n.setCount)+" Sets ",1),t.setsShown?(m(),p("img",{key:0,class:"icon-button ms-1",src:Gs,width:14,height:14,onClick:e[1]||(e[1]=(...a)=>n.addSet&&n.addSet(...a))})):x("",!0)])])]),d("div",wU,[d("img",{class:"icon-button",src:go,width:"16",height:"16",onClick:e[2]||(e[2]=a=>t.showOptions=!t.showOptions)}),d("img",{class:"icon-button",src:jn,width:"16",height:"16",onClick:e[3]||(e[3]=a=>t.$emit("removeExercise",i.exercise.exercise.id))})])]),t.showOptions?(m(),p("div",SU,[X(d("input",{type:"checkbox",id:"reps","onUpdate:modelValue":e[4]||(e[4]=a=>t.showReps=a)},null,512),[[ji,t.showReps]]),e[19]||(e[19]=d("label",{class:"ms-1",for:"reps"},"Reps",-1)),X(d("input",{class:"ms-2",type:"checkbox",id:"weight","onUpdate:modelValue":e[5]||(e[5]=a=>t.showWeight=a)},null,512),[[ji,t.showWeight]]),e[20]||(e[20]=d("label",{class:"ms-1",for:"weight"},"Weight",-1)),X(d("input",{class:"ms-2",type:"checkbox",id:"hold","onUpdate:modelValue":e[6]||(e[6]=a=>t.showHoldSeconds=a)},null,512),[[ji,t.showHoldSeconds]]),e[21]||(e[21]=d("label",{class:"ms-1",for:"hold"},"Hold",-1)),X(d("input",{class:"ms-2",type:"checkbox",id:"time","onUpdate:modelValue":e[7]||(e[7]=a=>t.showTimeSeconds=a)},null,512),[[ji,t.showTimeSeconds]]),e[22]||(e[22]=d("label",{class:"ms-1",for:"time"},"Time",-1))])):x("",!0),t.setsShown?(m(),p("div",TU,[(m(!0),p(L,null,G(i.exercise.sets.value,(a,l)=>(m(),p("div",{key:a.id},[H(o,{set:a,index:l+1,exerciseID:i.exercise.exercise.id,showReps:t.showReps,showWeight:t.showWeight,showHoldSeconds:t.showHoldSeconds,showTimeSeconds:t.showTimeSeconds,editingSetID:t.editingSetID,onDeleteSet:n.deleteSet,onSetEditingID:e[8]||(e[8]=c=>t.editingSetID=c),onAddVariation:e[9]||(e[9]=c=>t.$emit("addVariation",c)),onRemoveVariation:e[10]||(e[10]=c=>t.$emit("removeVariation",c)),onSaveWorkout:e[11]||(e[11]=c=>t.$emit("saveWorkout"))},null,8,["set","index","exerciseID","showReps","showWeight","showHoldSeconds","showTimeSeconds","editingSetID","onDeleteSet"])]))),128))])):x("",!0)],34)}const IU=Q(uU,[["render",xU],["__scopeId","data-v-196f59a8"]]),EU={name:"MuscleSelector",components:{},props:{selectedGroups:{type:Array,default:function(){return[]}}},data:function(){return{workoutStore:null,muscleGroups:[]}},created:function(){this.workoutStore=mi(),this.setItems()},methods:{setItems(){if(this.workoutStore){let t=fe(this.workoutStore.getMuscleGroups());t.forEach(e=>{let i=this.selectedGroups.find(s=>s.id==e.id);i?(e.isSelected=!0,e.isPrimary=i.isPrimary,e.isSecondary=i.isSecondary):e.isSelected=!1}),this.muscleGroups=t}else this.muscleGroups=[]},muscleGroupClicked(t){t.isSelected?t.isPrimary?(t.isPrimary=!1,t.isSecondary=!0):(t.isSecondary=!1,t.isSelected=!1):(t.isSelected=!0,t.isPrimary=!0)},save(){let t=this.muscleGroups.filter(e=>e.isSelected);this.$emit("setMuscleGroups",t)}}},DU={class:"muscle-selector d-flex flex-column"},kU={class:"label d-flex flex-column flex-grow-1 mb-2"},CU={class:"d-flex flex-row flex-wrap gap-1"},PU=["onClick"],AU={class:"level d-flex justify-content-end"},RU={key:0},MU={class:"label d-flex flex-column flex-grow-1 mb-4"},OU={class:"d-flex flex-row flex-wrap gap-1"},$U=["onClick"],NU={class:"level d-flex justify-content-end"},LU={key:0};function VU(t,e,i,s,r,n){return m(),p("div",DU,[d("img",{class:"icon-button",src:Wi,width:"20",height:"20",onClick:e[0]||(e[0]=ye(o=>t.$emit("back"),["prevent"]))}),d("div",kU,[e[2]||(e[2]=d("span",{class:"mb-2"},"Muscle Groups",-1)),d("div",CU,[(m(!0),p(L,null,G(t.muscleGroups.filter(o=>o.isMain),(o,a)=>(m(),p("div",{key:a,class:F(["muscle-group d-flex flex-column",{selected:o.isSelected}]),onClick:l=>n.muscleGroupClicked(o)},[d("div",AU,[o.isSelected?(m(),p("div",RU,k(o.isPrimary?"P":"S"),1)):x("",!0)]),d("span",null,k(o.name),1)],10,PU))),128))])]),d("div",MU,[e[3]||(e[3]=d("span",{class:"mb-2"},"Accessory Muscle Groups",-1)),d("div",OU,[(m(!0),p(L,null,G(t.muscleGroups.filter(o=>o.isMain==!1),(o,a)=>(m(),p("div",{key:a,class:F(["muscle-group d-flex flex-column",{selected:o.isSelected}]),onClick:l=>n.muscleGroupClicked(o)},[d("div",NU,[o.isSelected?(m(),p("div",LU,k(o.isPrimary?"P":"S"),1)):x("",!0)]),d("span",null,k(o.name),1)],10,$U))),128))])]),d("button",{type:"button",class:"btn btn-primary",onClick:e[1]||(e[1]=o=>n.save())},"Done")])}const MS=Q(EU,[["render",VU],["__scopeId","data-v-c4011335"]]),WU={name:"ExerciseVariationForm",components:{MuscleSelector:MS},props:{exerciseVariation:Object,exercise:Object},data:function(){return{workoutStore:null,variation:void 0,types:fe($2),name:{value:void 0,oldValue:void 0,isUpdated:!1},description:{value:void 0,oldValue:void 0,isUpdated:!1},type:{value:void 0,oldValue:void 0,isUpdated:!1},muscleGroups:{value:[],oldValue:[]},selectedPanel:"form"}},created:function(){this.workoutStore=mi(),this.setProps()},methods:{setProps:FU,setMuscleGroups:BU,save:zU}};function FU(){this.exerciseVariation?this.variation=fe(this.exerciseVariation):this.variation={id:void 0,name:{value:"",oldValue:"",isUpdated:!1},description:{value:"",oldValue:"",isUpdated:!1},muscleGroups:{value:[],oldValue:[],isUpdated:!1},type:{value:{id:148,text:"Misc"},oldValue:{id:0,text:""},isUpdated:!1}},this.name=fe(this.variation.name),this.description=fe(this.variation.description),this.type=fe(this.variation.type),this.muscleGroups=fe(this.variation.muscleGroups)}function BU(t){this.muscleGroups.value=t,this.selectedPanel="form"}function zU(){let t=this,e=[],i=fe(this.variation);i.isUpdated=!1,i.id==null&&(i.isNew=!0),i.name.value=this.name.value.trim(),this.name.value.trim()!=""?this.name.value!=this.name.oldValue?(i.name.isUpdated=!0,i.id&&i.id>0&&(i.isUpdated=!0)):i.name.isUpdated=!1:e.push("Variation must have a name"),i.description.value=this.description.value?this.description.value.trim():null;let s=this.description.oldValue?this.description.oldValue.trim():null;i.description.value!=s?(i.description.isUpdated=!0,i.id&&i.id>0&&(i.isUpdated=!0)):i.description.isUpdated=!1,this.type.value.id?this.type.value.id!=this.type.oldValue.id&&(i.type.value=this.types.find(n=>n.id==this.type.value.id),i.type.isUpdated=!0,i.isUpdated=!0):e.push("Variation must have a type");let r=[];this.muscleGroups.value.forEach(n=>{let o=t.muscleGroups.oldValue.findIndex(a=>a.id==n.id);if(o>-1){let a=this.muscleGroups.oldValue[o];a.isPrimary!=n.isPrimary&&a.isSecondary!=n.isSecondary?(r.push({id:n.id,name:n.name,isPrimary:n.isPrimary,isSecondary:n.isSecondary,isUpdated:!0}),i.isUpdated=!0):r.push(a)}else r.push({id:n.id,name:n.name,isPrimary:n.isPrimary,isSecondary:n.isSecondary,isAdded:!0}),i.isUpdated=!0}),this.muscleGroups.oldValue.forEach(n=>{t.muscleGroups.value.findIndex(a=>a.id==n.id)<0&&r.push({id:n.id,isDeleted:!0})}),i.muscleGroups.value=r,e.length>0?alert(e.toString()):this.$emit("saveExerciseVariation",i)}const jU={class:"d-flex flex-column mt-2"},HU=["value"],UU={class:"d-flex flex-column flex-grow-1"},GU={class:"label d-flex flex-row flex-grow-1"},YU={class:"d-flex flex-row flex-wrap gap-1 mb-2"},qU={class:"d-flex flex-row flex-wrap gap-1"};function KU(t,e,i,s,r,n){const o=$("MuscleSelector");return m(),p("div",null,[d("div",{class:F(["exercise-variation-form d-flex flex-column flex-grow-1",{hide:t.selectedPanel!="form"}])},[d("img",{class:"icon-button mb-2",src:Wi,width:"20",height:"20",onClick:e[0]||(e[0]=ye(a=>t.$emit("back"),["prevent"]))}),X(d("input",{id:"name",class:"textbox mb-2",type:"text",ref:"name",placeholder:"Variation Name","onUpdate:modelValue":e[1]||(e[1]=a=>t.name.value=a),spellcheck:"true"},null,512),[[Ae,t.name.value,void 0,{lazy:!0,trim:!0}]]),X(d("textarea",{id:"description",class:"textarea",type:"text",placeholder:"Variation Description","onUpdate:modelValue":e[2]||(e[2]=a=>t.description.value=a),spellcheck:"true"},null,512),[[Ae,t.description.value]]),d("div",jU,[X(d("select",{class:"form-select panel-select","aria-label":"select","onUpdate:modelValue":e[3]||(e[3]=a=>t.type.value.id=a)},[(m(!0),p(L,null,G(t.types,a=>(m(),p("option",{key:a.id,value:a.id},k(a.text),9,HU))),128))],512),[[Ts,t.type.value.id]])]),d("button",{type:"button",class:"btn btn-primary mt-2",onClick:e[4]||(e[4]=a=>n.save())},"Save"),d("div",UU,[d("div",GU,[e[7]||(e[7]=d("span",null,"Muscle Groups",-1)),d("img",{class:"icon-button",src:Gs,width:20,height:20,onClick:e[5]||(e[5]=a=>t.selectedPanel="muscleSelector")})]),e[8]||(e[8]=d("span",{class:"sm-label"},"Primary",-1)),d("div",YU,[(m(!0),p(L,null,G(t.muscleGroups.value.filter(a=>a.isPrimary),(a,l)=>(m(),p("div",{key:l,class:"muscle-group d-flex"},[d("span",null,k(a.name),1)]))),128))]),e[9]||(e[9]=d("span",{class:"sm-label"},"Secondary",-1)),d("div",qU,[(m(!0),p(L,null,G(t.muscleGroups.value.filter(a=>a.isSecondary),(a,l)=>(m(),p("div",{key:l,class:"muscle-group d-flex"},[d("span",null,k(a.name),1)]))),128))])])],2),t.selectedPanel=="muscleSelector"?(m(),ie(o,{key:0,selectedGroups:t.muscleGroups.value,onSetMuscleGroups:n.setMuscleGroups,onBack:e[6]||(e[6]=a=>t.selectedPanel="form")},null,8,["selectedGroups","onSetMuscleGroups"])):x("",!0)])}const OS=Q(WU,[["render",KU],["__scopeId","data-v-c0efcb31"]]),JU={name:"VariationList",components:{ExerciseVariationForm:OS},props:{exercise:Object,selectedVariations:{type:Array,default:()=>[]}},data:function(){return{workoutStore:void 0,selectedPanel:"list",searchTerm:"",variationList:[]}},created:function(){this.workoutStore=mi()},computed:{variations(){if(this.workoutStore){let t=this,e=fe(this.workoutStore.getVariations());return e.forEach(i=>{let s=t.selectedVariations.findIndex(r=>r.name==i.name&&r.type&&r.type.id==i.type.id);i.isSelected=s>-1}),e}else return[]}},methods:{done(){let t=[];this.variations.forEach(e=>{e.isSelected&&t.push(e)}),this.$emit("setVariations",t)},setVariationList:QU},watch:{variations:{handler(){this.setVariationList()},deep:!0},searchTerm(){this.setVariationList()}}};function QU(){let t={};if(this.variations.length>0){let e=yu(this.variations,"name");if(this.searchTerm&&this.searchTerm!=""){let s=this.searchTerm;e=e.filter(r=>r.name.toLowerCase().includes(s))}let i=e.map(s=>s.type.text);i=[...new Set(i)],i=yu(i),i.forEach(s=>{t[s]=[]}),e.forEach(s=>{t[s.type.text].push(s)})}this.variationList=t}const ZU={class:"d-flex flex-column flex-grow-1"},XU={class:"label d-flex flex-row mb-2"},e5={class:"d-flex flex-column flex-grow-1"},t5={class:"letter text-start"},i5=["onClick"],s5={class:"label d-flex flex-column"},n5={class:"name"};function r5(t,e,i,s,r,n){const o=$("ExerciseVariationForm");return m(),p("div",ZU,[d("div",{class:F(["variation-list d-flex flex-column flex-grow-1",{hide:t.selectedPanel!="list"}])},[d("div",XU,[d("img",{class:"icon-button",src:Wi,width:"20",height:"20",onClick:e[0]||(e[0]=ye(a=>t.$emit("back"),["prevent"]))}),e[6]||(e[6]=d("span",null,"Create Variation",-1)),d("img",{class:"icon-button",src:Gs,width:20,height:20,onClick:e[1]||(e[1]=a=>t.selectedPanel="exerciseVariationForm")})]),X(d("input",{id:"title",class:"textbox mb-2",type:"text",ref:"text",placeholder:"Search","onUpdate:modelValue":e[2]||(e[2]=a=>t.searchTerm=a),spellcheck:"true"},null,512),[[Ae,t.searchTerm,void 0,{trim:!0}]]),d("button",{type:"button",class:"btn btn-primary mb-2",onClick:e[3]||(e[3]=a=>n.done())},"Done"),d("div",e5,[(m(!0),p(L,null,G(t.variationList,(a,l,c)=>(m(),p("div",{key:c},[d("div",t5,k(l),1),(m(!0),p(L,null,G(a,(f,v)=>(m(),p("div",{class:F(["variation-item d-flex flex-row flex-grow-1",{selected:f.isSelected}]),key:v,onClick:S=>f.isSelected=!f.isSelected},[e[7]||(e[7]=d("div",{class:"image flex-shrink-0"},null,-1)),d("div",s5,[d("div",n5,k(f.name),1)])],10,i5))),128))]))),128))])],2),t.selectedPanel=="exerciseVariationForm"?(m(),ie(o,{key:0,exercise:i.exercise,onSaveExerciseVariation:e[4]||(e[4]=a=>t.$emit("saveExerciseVariation",a)),onBack:e[5]||(e[5]=a=>t.selectedPanel="list")},null,8,["exercise"])):x("",!0)])}const o5=Q(JU,[["render",r5],["__scopeId","data-v-27e0279c"]]),a5={name:"ExerciseForm",components:{MuscleSelector:MS,VariationList:o5,ExerciseVariationForm:OS},props:{id:{type:Number,default:-1}},data:function(){return{workoutStore:null,exercise:null,name:{value:void 0,oldValue:void 0,isUpdated:!1},description:{value:void 0,oldValue:void 0,isUpdated:!1},muscleGroups:{value:[],oldValue:[]},variations:{value:[],oldValue:[]},selectedPanel:"form",selectedVariation:void 0}},created:function(){this.workoutStore=mi(),this.setProps()},computed:{selectedVariations(){return this.variations.value.map(t=>({name:t.name.value,type:{id:t.type.value.id,text:t.type.value.text}}))},variationList(){let t={};if(this.variations.value.length>0){let i=fe(this.variations.value).sort((r,n)=>r.name.value.toLowerCase()<n.name.value.toLowerCase()?-1:r.name.value.toLowerCase()>n.name.value.toLowerCase()?1:0),s=i.map(r=>r.type.value.text);s=[...new Set(s)],s=yu(s),s.forEach(r=>{t[r]=[]}),i.forEach(r=>{t[r.type.value.text].push(r)})}return t}},mounted(){this.$refs.name.focus()},methods:{setProps:l5,setMuscleGroups:d5,selectVariation:u5,closeVariationForm:c5,setVariations:h5,saveExerciseVariation:f5,save:m5}};function l5(){if(this.id!=0){let t=this.workoutStore.getExercise(this.id);if(t){this.exercise=fe(t),this.name.value=this.exercise.name,this.name.oldValue=this.exercise.name,this.name.isUpdated=!1,this.description.value=this.exercise.description,this.description.oldValue=this.exercise.description,this.description.isUpdated=!1,this.muscleGroups.value=fe(this.exercise.muscleGroups),this.muscleGroups.oldValue=fe(this.exercise.muscleGroups),this.variations.value=[],this.variations.oldValue=[];let e=this;this.exercise.variations.forEach(i=>{let s=fe(i);s.name={},s.description={},s.muscleGroups={},s.name.value=i.name,s.name.oldValue=i.name,s.name.isUpdated=!1,s.description.value=i.description||"",s.description.oldValue=i.description||"",s.description.isUpdated=!1,s.type={},s.type.value=fe(i.type),s.type.oldValue=fe(i.type),s.type.isUpdated=!1,s.muscleGroups.value=fe(i.muscleGroups),s.muscleGroups.oldValue=fe(i.muscleGroups),e.variations.value.push(s),e.variations.oldValue.push(s)})}}else this.exercise={id:this.id,name:{value:void 0,oldValue:void 0},description:{value:void 0,oldValue:void 0},muscleGroups:{value:[],oldValue:[]},variations:{value:[],oldValue:[]}},this.name.value=this.exercise.name,this.name.oldValue=this.exercise.name,this.name.isUpdated=!1,this.description.value=this.exercise.description,this.description.oldValue=this.exercise.description,this.description.isUpdated=!1,this.muscleGroups.value=[],this.muscleGroups.oldValue=[],this.variations.value=[],this.variations.oldValue=[]}function d5(t){this.muscleGroups.value=t,this.selectedPanel="form"}function u5(t){this.selectedVariation=t,this.selectedPanel="exerciseVariationForm"}function c5(){this.selectedVariation=void 0,this.selectedPanel="form"}function h5(t){let e=this,i=He(this.variations.value.filter(n=>n.id<1)),s=i.length>0?i[0].id-1:-1;t.forEach(n=>{let o=e.variations.oldValue.find(l=>l.name.value==n.name&&l.type.value.id==n.type.id),a=e.variations.value.find(l=>l.name.value==n.name&&l.type.value.id==n.type.id);if(o==null){if(a==null){let l={};l.name={},l.description={},l.muscleGroups={},l.name.value=n.name,l.name.oldValue=null,l.name.isUpdated=!0,l.description.value=null,l.description.oldValue=null,l.description.isUpdated=!1,l.muscleGroups.value=[],l.muscleGroups.oldValue=[],l.type={},l.type.value=fe(n.type),l.type.oldValue={id:void 0,text:void 0},l.type.isUpdated=!0,l.id=s--,e.variations.value.push(l)}}else a==null&&e.variations.value.push(o)});let r=[];this.variations.value.forEach(n=>{t.findIndex(a=>a.name==n.name.value&&a.type.id==n.type.value.id)<0&&r.push({name:n.name.value,typeID:n.type.value.id})}),this.variations.value=this.variations.value.filter(n=>r.findIndex(o=>o.name==n.name.value&&o.typeID==n.type.value.id)==-1),this.selectedPanel="form"}function f5(t){if(t.type.isUpdated&&this.workoutStore.addVariation(t.name.value,t.type.value.id,t.type.value.text),!t.id){let e=He(this.variations.value.filter(i=>i.id<1));t.id=e.length>0?e[0].id-1:-1}gt(t,this.variations.value),this.selectedPanel="form"}async function m5(){let t=this,e={id:this.id,isNew:this.id<1,isUpdated:!1};if(this.name.value.trim()!=""&&this.name.value!=this.name.oldValue){let o={value:this.name.value,isUpdated:!0};e.name=o,e.isUpdated=!0}let i=this.description.value?this.description.value.trim():null,s=this.description.oldValue?this.description.oldValue.trim():null;if(i!=s){let o={value:this.description.value.trim(),isUpdated:!0};e.description=o,e.isUpdated=!0}let r=[];this.muscleGroups.value.forEach(o=>{let a=t.muscleGroups.oldValue.findIndex(l=>l.id==o.id);if(a>-1){let l=this.muscleGroups.oldValue[a];l.isPrimary!=o.isPrimary&&l.isSecondary!=o.isSecondary&&r.push({id:o.id,isPrimary:o.isPrimary,isSecondary:o.isSecondary,isUpdated:!0,name:o.name})}else r.push({id:o.id,isPrimary:o.isPrimary,isSecondary:o.isSecondary,isAdded:!0,name:o.name})}),this.muscleGroups.oldValue.forEach(o=>{t.muscleGroups.value.findIndex(l=>l.id==o.id)<0&&r.push({id:o.id,isDeleted:!0,name:o.name})}),e.muscleGroups=r,e.muscleGroups.length>0&&(e.isUpdated=!0);let n=[];this.variations.value.forEach(o=>{o.id<1?n.push({id:o.id,typeID:o.type.value.id,name:o.name,description:o.description,muscleGroups:o.muscleGroups.value,isNew:!0}):o.isUpdated&&n.push({id:o.id,typeID:o.type.value.id!=o.type.oldValue.id?o.type.value.id:void 0,name:o.name,description:o.description,muscleGroups:o.muscleGroups.value,isUpdated:!0})}),this.variations.oldValue.forEach(o=>{t.variations.value.findIndex(l=>l.id==o.id)<0&&n.push({id:o.id,isDeleted:!0,name:o.name})}),e.variations=n,e.variations.length>0&&(e.isUpdated=!0),this.workoutStore.saveExercise(e).then(()=>{this.$emit("back")})}const p5={class:"d-flex flex-column flex-grow-1"},g5={class:"d-flex flex-column"},v5={class:"label d-flex flex-row"},y5={class:"d-flex flex-row flex-wrap gap-1 mb-2"},_5={class:"d-flex flex-row flex-wrap gap-1"},b5={class:"label d-flex flex-row mb-2"},w5={class:"d-flex flex-column flex-grow-1 gap-2"},S5={class:"letter text-start"},T5={class:"d-flex flex-column gap-2"},x5=["onClick"],I5={class:"d-flex flex-row"},E5={class:"label d-flex flex-column"},D5={class:"name"};function k5(t,e,i,s,r,n){const o=$("MuscleSelector"),a=$("VariationList"),l=$("ExerciseVariationForm");return m(),p("div",p5,[d("div",{class:F(["exercise-form d-flex flex-column flex-grow-1",{hide:t.selectedPanel!="form"}])},[d("img",{class:"icon-button mb-2",src:Wi,width:"20",height:"20",onClick:e[0]||(e[0]=ye(c=>t.$emit("back"),["prevent"]))}),X(d("input",{id:"name",class:"textbox mb-2",type:"text",ref:"name",placeholder:"Exercise Name","onUpdate:modelValue":e[1]||(e[1]=c=>t.name.value=c),spellcheck:"true"},null,512),[[Ae,t.name.value,void 0,{lazy:!0,trim:!0}]]),X(d("textarea",{id:"description",class:"textarea",type:"text",placeholder:"Exercise Description","onUpdate:modelValue":e[2]||(e[2]=c=>t.description.value=c),spellcheck:"true"},null,512),[[Ae,t.description.value]]),d("button",{type:"button",class:"btn btn-primary mt-2",onClick:e[3]||(e[3]=c=>n.save())},"Save"),d("div",g5,[d("div",v5,[e[8]||(e[8]=d("span",null,"Muscle Groups",-1)),d("img",{class:"icon-button",src:Gs,width:20,height:20,onClick:e[4]||(e[4]=c=>t.selectedPanel="muscleSelector")})]),e[9]||(e[9]=d("span",{class:"sm-label"},"Primary",-1)),d("div",y5,[(m(!0),p(L,null,G(t.muscleGroups.value.filter(c=>c.isPrimary),(c,f)=>(m(),p("div",{key:f,class:"muscle-group d-flex"},[d("span",null,k(c.name),1)]))),128))]),e[10]||(e[10]=d("span",{class:"sm-label"},"Secondary",-1)),d("div",_5,[(m(!0),p(L,null,G(t.muscleGroups.value.filter(c=>c.isSecondary),(c,f)=>(m(),p("div",{key:f,class:"muscle-group d-flex"},[d("span",null,k(c.name),1)]))),128))])]),d("div",b5,[e[11]||(e[11]=d("span",null,"Variations",-1)),d("img",{class:"icon-button",src:Gs,width:20,height:20,onClick:e[5]||(e[5]=c=>t.selectedPanel="variationList")})]),d("div",w5,[(m(!0),p(L,null,G(n.variationList,(c,f,v)=>(m(),p("div",{key:v},[d("div",S5,k(f),1),d("div",T5,[(m(!0),p(L,null,G(c,(S,I)=>(m(),p("div",{class:"variation-item d-flex flex-row flex-grow-1",key:I,onClick:C=>n.selectVariation(S)},[d("div",I5,[e[12]||(e[12]=d("div",{class:"image flex-shrink-0"},null,-1)),d("div",E5,[d("div",D5,k(S.name.value),1)])]),e[13]||(e[13]=d("div",{class:"button-group d-flex flex-column"},[d("img",{class:"icon-button",src:jn,width:"16",height:"16"})],-1))],8,x5))),128))])]))),128))])],2),t.selectedPanel=="muscleSelector"?(m(),ie(o,{key:0,selectedGroups:t.muscleGroups.value,onSetMuscleGroups:n.setMuscleGroups,onBack:e[6]||(e[6]=c=>t.selectedPanel="form")},null,8,["selectedGroups","onSetMuscleGroups"])):x("",!0),t.selectedPanel=="variationList"?(m(),ie(a,{key:1,exercise:t.exercise,selectedVariations:n.selectedVariations,onSetVariations:n.setVariations,onSaveExerciseVariation:n.saveExerciseVariation,onBack:e[7]||(e[7]=c=>t.selectedPanel="form")},null,8,["exercise","selectedVariations","onSetVariations","onSaveExerciseVariation"])):x("",!0),t.selectedPanel=="exerciseVariationForm"?(m(),ie(l,{key:2,exerciseVariation:t.selectedVariation,exercise:t.exercise,onSaveExerciseVariation:n.saveExerciseVariation,onBack:n.closeVariationForm},null,8,["exerciseVariation","exercise","onSaveExerciseVariation","onBack"])):x("",!0)])}const C5=Q(a5,[["render",k5],["__scopeId","data-v-92778119"]]),P5={name:"ExerciseList",components:{ExerciseForm:C5},props:{selectedIDs:{type:Array,default:()=>[]}},data:function(){return{appStore:void 0,workoutStore:void 0,searchTerm:"",selectedExerciseID:void 0,exerciseList:[],newlySelectedIDs:[]}},created:function(){this.appStore=bt(),this.workoutStore=mi()},computed:{isSelector(){return this.appStore?this.appStore.itemPanel.workout.exerciseList.isSelector:!1},exercises(){if(this.workoutStore){let t=fe(this.workoutStore.getExercises());return this.isSelector&&t.forEach(e=>{e.isSelected=this.selectedIDs.includes(e.id)||this.newlySelectedIDs.includes(e.id)}),fe(t)}else return[]}},methods:{setExerciseList:A5,createExercise:R5,selectExercise:M5,done:O5,back:$5},watch:{exercises:{handler(){this.setExerciseList()},deep:!0},searchTerm(){this.setExerciseList()}}};function A5(){let t=[];if(this.exercises.length>0){let e=yu(this.exercises,"name");if(this.searchTerm&&this.searchTerm!=""){let r=this.searchTerm;e=e.filter(n=>n.name.toLowerCase().includes(r))}let i=e[0].name.charAt(0).toLowerCase(),s=[];t.push({letter:i.toUpperCase(),exercises:s}),e.forEach(r=>{let n=r.name.charAt(0).toLowerCase();n==i?s.push(r):(i=n,s=[r],t.push({letter:i.toUpperCase(),exercises:s}))})}this.exerciseList=t}function R5(){this.selectedExerciseID=-1,this.$emit("setPanelHeader",{text:"Exercise Form"})}function M5(t){if(this.isSelector)if(t.isSelected){let e=this.newlySelectedIDs.findIndex(i=>i==t.id);e>-1&&this.newlySelectedIDs.splice(e,1)}else this.newlySelectedIDs.push(t.id);else this.selectedExerciseID=t.id,this.$emit("setPanelHeader",{text:"Exercise Form"})}function O5(){let t=this.appStore.itemPanel.workout.selectedWorkoutID,e=this.appStore.itemPanel.workout.exerciseList.selectedSectionID,i=this.appStore.itemPanel.workout.exerciseList.nextExercisePosition;this.workoutStore.addExercisesToSection(t,e,this.newlySelectedIDs,i),this.back()}function $5(){this.appStore.onBackWorkoutPanel(),this.appStore.onDoneExerciseSelection()}const N5={class:"d-flex flex-column flex-grow-1 overflow-scroll"},L5={class:"label d-flex flex-row flex-grow-1 mb-2"},V5={class:"d-flex flex-column"},W5={class:"letter text-start"},F5=["onClick"],B5={class:"label d-flex flex-column"},z5={class:"name"};function j5(t,e,i,s,r,n){const o=$("ExerciseForm");return m(),p("div",N5,[d("div",{class:F(["exercise-list d-flex flex-column",{hide:t.selectedExerciseID}])},[d("div",L5,[d("img",{class:"icon-button",src:Wi,width:"20",height:"20",onClick:e[0]||(e[0]=ye((...a)=>n.back&&n.back(...a),["prevent"]))}),e[4]||(e[4]=d("span",null,"Create Exercise",-1)),d("img",{class:"icon-button",src:Gs,width:20,height:20,onClick:e[1]||(e[1]=(...a)=>n.createExercise&&n.createExercise(...a))})]),X(d("input",{id:"title",class:"textbox mb-2",type:"text",ref:"text",placeholder:"Search","onUpdate:modelValue":e[2]||(e[2]=a=>t.searchTerm=a),spellcheck:"true"},null,512),[[Ae,t.searchTerm,void 0,{trim:!0}]]),d("button",{type:"button",class:"btn btn-primary mb-2",onClick:e[3]||(e[3]=a=>n.done())},"Done"),d("div",V5,[(m(!0),p(L,null,G(t.exerciseList,(a,l)=>(m(),p("div",{key:l},[d("div",W5,k(a.letter),1),(m(!0),p(L,null,G(a.exercises,(c,f)=>(m(),p("div",{class:F(["exercise-item d-flex flex-row flex-grow-1",{selected:c.isSelected}]),key:f,onClick:v=>n.selectExercise(c)},[e[5]||(e[5]=d("div",{class:"image flex-shrink-0"},null,-1)),d("div",B5,[d("div",z5,k(c.name),1)])],10,F5))),128))]))),128))])],2),t.selectedExerciseID?(m(),ie(o,{key:0,id:t.selectedExerciseID,onBack:n.back},null,8,["id","onBack"])):x("",!0)])}const $S=Q(P5,[["render",j5],["__scopeId","data-v-df545e46"]]),NS="/icon/circle-stop.png",H5={name:"WorkoutForm",components:{ExerciseItem:IU,ExerciseList:$S,DateTimeSelector:_o},props:{id:{type:Number,default:-1}},data:function(){return{appStore:null,workoutStore:null,selectedPanel:"form",now:Date.now(),startAt:{value:void 0,oldValue:void 0,isUpdated:!1},endAt:{value:void 0,oldValue:void 0,isUpdated:!1},name:{value:void 0,oldValue:void 0,isUpdated:!1},description:{value:void 0,oldValue:void 0,isUpdated:!1},isTemplate:{value:void 0,oldValue:void 0,isUpdated:!1},exercises:{value:[],oldValue:[]},default:{reps:null,restSeconds:120,weight:null,holdSeconds:null,timeSeconds:null},settings:{isShown:!1,confimDelete:!1},completion:{isActive:!1,isValid:!0,createEvent:!0}}},created:function(){this.appStore=bt(),this.workoutStore=mi();var t=this;setInterval(function(){t.now=Date.now()},1e3)},computed:{workout(){if(this.workoutStore)if(this.id>0){let t=this.workoutStore.getWorkout(this.id);return fe(t)}else this.setProps()},isActive(){return!!(this.startAt.value&&!this.endAt.value||this.completion.isActive)},isComplete(){return!!(this.workout&&this.workout&&this.workout.iteration&&this.workout.iteration.completedAt)},exerciseIDs(){return this.exercises.value.map(t=>t.exercise.id)},timeSinceStart(){if(this.isActive&&this.startAt.value){let t=new Date(this.startAt.value);return Tm(t,this.now)}else return}},methods:{setProps:U5,selectExercises:G5,setExercises:Y5,addDefaultSet:q5,addSet:K5,deleteSet:J5,addVariation:Q5,removeVariation:Z5,stopWorkout:X5,cancelCompletion:e6,completeWorkout:t6,setIterationTime:i6,validateTimes:s6,deleteWorkout:n6,repositionExercise:r6,save:o6,back(){this.appStore.onBackWorkoutPanel()}},watch:{workout(){this.setProps()}}};function U5(){if(this.id>0){if(this.workout){this.name.value=this.workout.name,this.name.oldValue=this.workout.name,this.name.isUpdated=!1,this.description.value=this.workout.description,this.description.oldValue=this.workout.description,this.description.isUpdated=!1,this.isTemplate.value=this.workout.isTemplate,this.isTemplate.oldValue=this.workout.isTemplate,this.isTemplate.isUpdated=!1;let t=[];this.workout.exercises.forEach(e=>{t.push({exercise:fe(e.exercise),position:e.position,sets:{value:fe(e.sets),oldValue:fe(e.sets)}})}),this.exercises.value=t,this.exercises.oldValue=fe(t),this.workout.iteration&&(this.workout.iteration.startAt&&(this.startAt.value=this.workout.iteration.startAt,this.startAt.oldValue=this.workout.iteration.startAt,this.startAt.isUpdated=!1),this.workout.iteration.endAt&&(this.endAt.value=this.workout.iteration.endAt,this.endAt.oldValue=this.workout.iteration.endAt,this.endAt.isUpdated=!1))}}else this.name.value=void 0,this.name.oldValue=void 0,this.name.isUpdated=!1,this.description.value=void 0,this.description.oldValue=void 0,this.description.isUpdated=!1,this.isTemplate.value=!0,this.isTemplate.oldValue=void 0,this.isTemplate.isUpdated=!1,this.exercises.value=[],this.exercises.oldValue=[],this.startAt.value=void 0,this.startAt.oldValue=void 0,this.startAt.isUpdated=!1,this.endAt.value=void 0,this.endAt.oldValue=void 0,this.endAt.isUpdated=!1,this.workout={id:-1,name:void 0,description:void 0,exercises:[]}}function G5(){this.selectedPanel="exerciseList",this.$emit("setPanelHeader",{text:"Select Exercises"})}function Y5(t){this.selectedPanel="form",this.$emit("setPanelHeader",{text:"Workout"});let e=this.workoutStore.getExercises();e=e.filter(r=>t.includes(r.id));let i=0;e.forEach(r=>{i++,this.exercises.value.find(o=>o.exercise.id==r.id)||this.exercises.value.push({exercise:fe(r),position:i,sets:{value:[],oldValue:[]}})});let s=[];this.exercises.value.forEach(r=>{e.findIndex(o=>o.id==r.exercise.id)<0&&s.push(r.exercise.id)}),this.exercises.value=this.exercises.value.filter(r=>!s.includes(r.exercise.id));for(let r=1;r<=this.exercises.value.length;r++)this.exercises.value[r-1].position=r;this.save()}function q5(t){let i=this.exercises.value.flatMap(n=>n.sets.value).map(n=>n.id).sort((n,o)=>n-o),s=i.length==0||i[0]-1>-1?-1:i[0]-1;this.exercises.value.find(n=>n.exercise.id==t).sets.value.push({id:s,reps:this.default.reps,weight:this.default.weight,restSeconds:this.default.restSeconds,holdSeconds:this.default.holdSeconds,timeSeconds:this.default.timeSeconds,variations:[],isAdded:!0})}function K5(t){let i=this.exercises.value.flatMap(n=>n.sets.value).map(n=>n.id).sort((n,o)=>n-o),s=i.length==0||i[0]-1>-1?-1:i[0]-1,r=this.exercises.value.find(n=>n.exercise.id==t);if(r.sets.value==0)r.sets.value.push({id:s,reps:this.default.reps,weight:this.default.weight,restSeconds:this.default.restSeconds,holdSeconds:this.default.holdSeconds,timeSeconds:this.default.timeSeconds,variations:[],isAdded:!0});else{let n=r.sets.value[r.sets.value.length-1],o=fe(n);o.iteration=null,o.id=s,o.isAdded=!0,r.sets.value.push(o)}this.save()}function J5({setID:t,exerciseID:e}){let i=this.exercises.value.find(s=>s.exercise.id==e);on(t,i.sets.value),this.save()}function Q5({setID:t,variationID:e,exerciseID:i}){let r=fe(this.workoutStore.getExercise(i)).variations.find(a=>a.id==e);this.exercises.value.find(a=>a.exercise.id==i).sets.value.find(a=>a.id==t).variations.push({id:e,name:r.name}),this.save()}function Z5({setID:t,variationID:e,exerciseID:i}){let r=this.exercises.value.find(n=>n.exercise.id==i).sets.value.find(n=>n.id==t);r.variations=r.variations.filter(n=>n.id!=e),this.save()}function X5(){if(!this.completion.isActive){let t=this.exercises.value.flatMap(e=>e.sets.value).filter(e=>e.iteration&&e.iteration.completedAt);if(t.length>0){let e=new Date(t[0].iteration.completedAt);t.forEach(i=>{if(i.iteration&&i.iteration.completedAt){let s=new Date(i.iteration.completedAt);+s>+e&&(e=s)}}),this.endAt.value=e.toJSON()}this.validateTimes(),this.completion.isActive=!this.completion.isActive}}function e6(){this.endAt.value=void 0,this.completion.isActive=!1}function t6(){this.completion.isValid&&this.workoutStore.completeWorkout(this.workout.id,this.startAt.value,this.endAt.value,this.completion.createEvent).then(()=>{this.completion.isActive=!1,this.$emit("back")})}function i6(t,e){t&&(e=="start"?this.startAt.value=t:e=="end"&&(this.endAt.value=t),this.validateTimes())}function s6(){(this.workout.iteration||void 0)&&(this.startAt.value&&this.endAt.value?+new Date(this.startAt.value)>+new Date(this.endAt.value)?this.completion.isValid=!1:+new Date(this.startAt.value)<=+new Date(this.endAt.value)&&(this.completion.isValid=!0):this.endAt.value?this.completion.isValid=!0:this.completion.isValid=!1)}function n6(){let t={id:this.id,isDeleted:!0};this.workoutStore.saveWorkout(t).then(()=>this.$emit("back"))}function r6(t,e){this.workoutStore.repositionExercise(this.id,t,e)}function o6(){let t=this,e={id:this.id,isNew:this.id<1,isUpdated:!1};if(this.name.value.trim()!=""&&this.name.value!=this.name.oldValue){let n={value:this.name.value,isUpdated:!0};e.name=n,e.isUpdated=!0}let i=this.description.value?this.description.value.trim():null,s=this.description.oldValue?this.description.oldValue.trim():null;i!=s&&(e.description={value:this.description.value.trim(),isUpdated:!0},e.isUpdated=!0),this.isTemplate.value!=this.isTemplate.oldValue&&(e.isTemplate={value:this.isTemplate.value,isUpdated:!0},e.isUpdated=!0),e.isNew?(this.startAt.value&&(e.startAt={value:this.startAt.value,isUpdated:!0},e.isUpdated=!0),this.endAt.value&&(e.endAt={value:this.endAt.value,isUpdated:!0},e.isUpdated=!0)):(this.startAt.value&&this.startAt.value!=this.startAt.oldValue&&(e.startAt={value:this.startAt.value,isUpdated:!0},e.isUpdated=!0),this.endAt.value&&this.endAt.value!=this.endAt.oldValue&&(e.endAt={value:this.endAt.value,isUpdated:!0},e.isUpdated=!0));let r=[];this.exercises.value.forEach(n=>{let o={id:n.exercise.id},a=t.exercises.oldValue.findIndex(l=>l.exercise.id==n.exercise.id);if(a<0){let l=[];n.sets.value.forEach(c=>{let f={reps:c.reps?c.reps:null,weight:c.weight?c.weight:null,holdSeconds:c.holdSeconds?c.holdSeconds:null,restSeconds:c.restSeconds?c.restSeconds:null,timeSeconds:c.timeSeconds?c.timeSeconds:null,variations:[],isAdded:!0};c.variations.forEach(v=>{f.variations.push({id:v.id,isAdded:!0})}),l.push(f)}),o.position=n.position,o.isAdded=!0,r.push(o),e.isUpdated=!0,o.sets=l}else{let l=[];n.sets.value.forEach(f=>{let v=n.sets.oldValue.find(S=>S.id==f.id);if(v){let S=[];f.variations.forEach(I=>{v.variations.findIndex(D=>D.id==I.id)==-1&&S.push({id:I.id,isAdded:!0})}),v.variations.forEach(I=>{f.variations.findIndex(D=>D.id==I.id)==-1&&S.push({id:I.id,isRemoved:!0})}),(f.reps!=v.reps||f.weight!=v.weight||f.holdSeconds!=v.holdSeconds||f.restSeconds!=v.restSeconds||f.timeSeconds!=v.timeSeconds||S.length>0)&&l.push({id:f.id,reps:f.reps?f.reps:null,holdSeconds:f.holdSeconds?f.holdSeconds:null,weight:f.weight?f.weight:null,restSeconds:f.restSeconds?f.restSeconds:null,timeSeconds:f.timeSeconds?f.timeSeconds:null,variations:S,isUpdated:!0})}else{let S={id:f.id,reps:f.reps?f.reps:null,holdSeconds:f.holdSeconds?f.holdSeconds:null,weight:f.weight?f.weight:null,restSeconds:f.restSeconds?f.restSeconds:null,timeSeconds:f.timeSeconds?f.timeSeconds:null,variations:[],isAdded:!0};f.variations.forEach(I=>{S.variations.push({id:I.id,isAdded:!0})}),l.push(S)}}),n.sets.oldValue.forEach(f=>{n.sets.value.findIndex(S=>S.id==f.id)<0&&l.push({id:f.id,isDeleted:!0})});let c=t.exercises.oldValue[a];(l.length>0||c.position!=n.position)&&(c.position!=n.position&&(o.position=n.position),r.push(o),o.sets=l,o.isUpdated=!0,e.isUpdated=!0)}}),this.exercises.oldValue.forEach(n=>{t.exercises.value.findIndex(a=>a.exercise.id==n.exercise.id)<0&&r.push({id:n.exercise.id,isRemoved:!0})}),e.exercises=r,e.exercises.length>0&&(e.isUpdated=!0),(e.isUpdated||e.isNew)&&this.workoutStore.saveWorkout(e)}const a6={class:"d-flex flex-column flex-grow-1"},l6={class:"d-flex flex-column"},d6={class:"top d-flex flex-column sticky-top"},u6={class:"label d-flex flex-row mb-2"},c6={class:"exercises d-flex flex-column overflow-scroll flex-grow-1"},h6={key:0,class:"d-flex flex-column"},f6={class:"d-flex flex-column"},m6={class:"d-flex flex-row justify-items-start mt-2"},p6={key:1,class:"d-flex flex-row mb-2 align-items-center"},g6={key:0,class:"completion d-flex flex-column justify-content-center position-sticky bottom-0 pb-1"},v6={class:"clock d-flex flex-row justify-content-center align-items-center"},y6={key:0,class:"form-group pb-2"},_6={class:"d-flex flex-row justify-items-start mt-2"},b6={class:"d-flex flex-row mt-2"};function w6(t,e,i,s,r,n){const o=$("ExerciseItem"),a=$("DateTimeSelector"),l=$("ExerciseList");return m(),p("div",a6,[d("div",{class:F(["workout-view d-flex flex-column flex-grow-1 justify-content-between",{hide:t.selectedPanel!="form","is-active":n.isActive}])},[d("div",l6,[d("div",d6,[d("div",u6,[d("img",{class:"icon-button mb-2",src:Wi,width:"20",height:"20",onClick:e[0]||(e[0]=ye((...c)=>n.back&&n.back(...c),["prevent"]))}),e[21]||(e[21]=d("span",null,"Exercises",-1)),d("img",{class:"icon-button",src:Gs,width:20,height:20,onClick:e[1]||(e[1]=(...c)=>n.selectExercises&&n.selectExercises(...c))})]),X(d("input",{id:"name",class:"textbox mb-2",type:"text",ref:"text",placeholder:"Workout Name","onUpdate:modelValue":e[2]||(e[2]=c=>t.name.value=c),spellcheck:"true"},null,512),[[Ae,t.name.value,void 0,{lazy:!0,trim:!0}]])]),d("div",c6,[(m(!0),p(L,null,G(t.exercises.value,c=>(m(),ie(o,{class:"mb-2",key:c.id,exercise:c,isActive:n.isActive,isComplete:n.isComplete,onAddDefaultSet:n.addDefaultSet,onAddSet:n.addSet,onDeleteSet:n.deleteSet,onAddVariation:e[3]||(e[3]=f=>n.addVariation(f)),onRemoveVariation:e[4]||(e[4]=f=>n.removeVariation(f)),onRepositionExercise:n.repositionExercise,onSaveWorkout:n.save},null,8,["exercise","isActive","isComplete","onAddDefaultSet","onAddSet","onDeleteSet","onRepositionExercise","onSaveWorkout"]))),128))]),d("span",{class:"text-start cursor-default",onClick:e[5]||(e[5]=c=>t.settings.isShown=!t.settings.isShown)},"Settings"),t.settings.isShown?(m(),p("div",h6,[d("div",f6,[H(a,{class:F(["date-selector",{invalid:!t.completion.isValid}]),dateTime:t.startAt.value,onOnChange:e[6]||(e[6]=c=>n.setIterationTime(c,"start"))},null,8,["class","dateTime"]),H(a,{class:F(["date-selector mt-2",{invalid:!t.completion.isValid}]),dateTime:t.endAt.value,onOnChange:e[7]||(e[7]=c=>n.setIterationTime(c,"end"))},null,8,["class","dateTime"])]),d("div",m6,[X(d("input",{type:"checkbox",id:"is-template","onUpdate:modelValue":e[8]||(e[8]=c=>t.isTemplate.value=c)},null,512),[[ji,t.isTemplate.value]]),e[22]||(e[22]=d("label",{class:"ms-1",for:"is-template"},"Is Template",-1))]),d("button",{type:"button",class:"btn btn-primary mb-2",onClick:e[9]||(e[9]=c=>n.save())},"Save"),t.settings.confimDelete?x("",!0):(m(),p("button",{key:0,type:"button",class:"btn btn-danger mb-2",onClick:e[10]||(e[10]=c=>t.settings.confimDelete=!0)},"Delete")),t.settings.confimDelete?(m(),p("div",p6,[e[23]||(e[23]=d("span",null,"Are you sure?",-1)),d("button",{type:"button",class:"btn btn-warning ms-2",onClick:e[11]||(e[11]=c=>t.settings.confimDelete=!1)},"Cancel"),d("button",{type:"button",class:"btn btn-danger ms-2",onClick:e[12]||(e[12]=(...c)=>n.deleteWorkout&&n.deleteWorkout(...c))},"Delete")])):x("",!0)])):x("",!0)]),n.isActive?(m(),p("div",g6,[d("div",v6,[d("img",{class:"icon-button me-2",src:NS,width:"24",height:"24",onClick:e[13]||(e[13]=ye((...c)=>n.stopWorkout&&n.stopWorkout(...c),["prevent"]))}),d("div",null,k(n.timeSinceStart),1)]),t.completion.isActive?(m(),p("div",y6,[H(a,{class:F(["date-selector",{invalid:!t.completion.isValid}]),dateTime:t.startAt.value,onOnChange:e[14]||(e[14]=c=>n.setIterationTime(c,"start"))},null,8,["class","dateTime"]),H(a,{class:F(["date-selector mt-2",{invalid:!t.completion.isValid}]),dateTime:t.endAt.value,onOnChange:e[15]||(e[15]=c=>n.setIterationTime(c,"end"))},null,8,["class","dateTime"]),d("div",_6,[X(d("input",{type:"checkbox",id:"create-event","onUpdate:modelValue":e[16]||(e[16]=c=>t.completion.createEvent=c)},null,512),[[ji,t.completion.createEvent]]),e[24]||(e[24]=d("label",{class:"ms-1",for:"create-event"},"Create Event",-1))]),d("div",b6,[d("button",{type:"button",class:"btn btn-primary mb-2",onClick:e[17]||(e[17]=(...c)=>n.completeWorkout&&n.completeWorkout(...c))},"Log"),d("button",{type:"button",class:"btn btn-warning mb-2 ms-2",onClick:e[18]||(e[18]=(...c)=>n.cancelCompletion&&n.cancelCompletion(...c))},"Cancel")])])):x("",!0)])):x("",!0)],2),t.selectedPanel=="exerciseList"?(m(),ie(l,{key:0,isSelector:!0,selectedIDs:n.exerciseIDs,onSetExercises:n.setExercises,onSetPanelHeader:e[19]||(e[19]=c=>t.$emit("setPanelHeader",c)),onBack:e[20]||(e[20]=c=>t.selectedPanel="form")},null,8,["selectedIDs","onSetExercises"])):x("",!0)])}const LS=Q(H5,[["render",w6],["__scopeId","data-v-6cc2d4bc"]]),S6={name:"",components:{},props:{exercise:Object,isActive:Boolean},data:function(){return{appStore:void 0,workoutStore:null,dragPosition:""}},created:function(){this.appStore=bt(),this.workoutStore=mi()},computed:{setCount(){let t=this.exercise.sets.length;return`${this.exercise.sets.filter(i=>i.iteration&&i.iteration.completedAt).length}/${t}`},isExerciseComplete(){let t=this.exercise.sets.length;return this.isActive?this.exercise.sets.filter(i=>i.iteration&&i.iteration.completedAt).length==t:!1}},methods:{setActive(){this.appStore.setActiveExercise(this.exercise.idWorkoutExercise)},removeExercise(){this.workoutStore.removeExerciseFromWorkout(this.exercise.idWorkoutExercise)},onDragStart:T6,onDragOver:x6,onDrop:I6,onDragLeave:E6,onDragEnd:D6}};function T6(t){console.log("Drag Started"),t.target.classList.add("drag"),t.dataTransfer.dropEffect="move",t.dataTransfer.effectAllowed="move",this.workoutStore.setDraggedProps(this.exercise.idWorkoutExercise)}function x6(t){if(t.preventDefault(),this.dragPosition="",!t.currentTarget.classList.contains("drag")){t.preventDefault();var e=this.$refs.item.getBoundingClientRect(),i=t.clientY-e.y,s=i/e.height;s<.5?this.dragPosition="before":this.dragPosition="after"}}function I6(t){t.preventDefault();var e=this.workoutStore.getDragged,i=this.dragPosition=="before"?this.exercise.position:this.exercise.position+1;this.workoutStore.repositionExercise(e.exerciseID,this.exercise.idWorkoutSection,i),this.dragPosition=""}function E6(){this.dragPosition=""}function D6(t){t.target.classList.remove("drag"),this.dragPosition="",this.workoutStore.clearDraggedProps()}const k6={class:"d-flex flex-row flex-grow-1 justify-content-between position-relative"},C6={class:"d-flex flex-row overflow-hidden"},P6={class:"label d-flex flex-column"},A6={class:"name"},R6={class:"d-flex flex-row"},M6={class:"set-count"},O6={class:"button-group d-flex flex-column"};function $6(t,e,i,s,r,n){return m(),p("div",{class:F(["exercise-card",[{complete:n.isExerciseComplete},t.dragPosition]]),ref:"item",draggable:"true",onDragenter:e[2]||(e[2]=ye(()=>{},["prevent"])),onDragstart:e[3]||(e[3]=o=>n.onDragStart(o)),onDragend:e[4]||(e[4]=o=>n.onDragEnd(o)),onDrop:e[5]||(e[5]=o=>n.onDrop(o)),onDragover:e[6]||(e[6]=o=>n.onDragOver(o)),onDragleave:e[7]||(e[7]=o=>n.onDragLeave(o)),onClick:e[8]||(e[8]=o=>t.$emit("selectExercise",i.exercise.idWorkoutExercise))},[d("div",k6,[d("div",C6,[e[9]||(e[9]=d("span",{class:"image flex-shrink-0"},null,-1)),d("div",P6,[d("span",A6,k(i.exercise.name),1),d("div",R6,[d("span",M6,k(n.setCount)+" Sets ",1)])])]),d("button",{class:"set-active btn btn-sm me-4",type:"button",onClick:e[0]||(e[0]=ye((...o)=>n.setActive&&n.setActive(...o),["prevent","stop"]))},"Set"),d("div",O6,[d("img",{class:"icon-button",src:jn,width:"16",height:"16",onClick:e[1]||(e[1]=ye((...o)=>n.removeExercise&&n.removeExercise(...o),["stop"]))})])])],34)}const N6=Q(S6,[["render",$6],["__scopeId","data-v-fe4677ab"]]),L6={name:"WorkoutSection",components:{ExerciseCard:N6},props:{section:Object,isActive:Boolean,settings:Object},data:function(){return{appStore:void 0,workoutStore:null,workoutSectionTypes:fe(L2),addedExercises:[]}},created:function(){this.appStore=bt(),this.workoutStore=mi()},computed:{sectionName(){return this.workoutSectionTypes.find(e=>e.id==this.section.id).text},exercises(){let t=[];return this.workoutStore&&this.section.exercises.forEach(e=>{let i=this.workoutStore.getExercise(e.id),s={...e,...i};t.push(s)}),t}},methods:{selectExercise(t){this.appStore.selectExercise(t)},addExercise(){this.appStore.onAddExerciseToSection(this.section.id)},clickSection(){this.settings.isOpen=!this.settings.isOpen}}},V6={class:"workout-section d-flex flex-column"},W6={class:"name"},F6={key:0,class:"caret mt-auto mb-auto me-2",src:kr,width:"5",height:"8"},B6={key:1,class:"caret mt-auto mb-auto me-2",src:Ta,width:"8",height:"5"},z6={key:0,class:"d-felx flex-column"};function j6(t,e,i,s,r,n){const o=$("ExerciseCard");return m(),p("div",V6,[d("div",{class:"header d-flex flex-row",onClick:e[1]||(e[1]=(...a)=>n.clickSection&&n.clickSection(...a))},[d("span",W6,k(n.sectionName),1),d("img",{class:"icon-button",src:Gs,width:20,height:20,onClick:e[0]||(e[0]=(...a)=>n.addExercise&&n.addExercise(...a))}),i.settings.isOpen?x("",!0):(m(),p("img",F6)),i.settings.isOpen?(m(),p("img",B6)):x("",!0)]),i.settings.isOpen?(m(),p("div",z6,[(m(!0),p(L,null,G(n.exercises,a=>(m(),ie(o,{class:"exercise-card",exercise:a,isActive:i.isActive,onSelectExercise:e[2]||(e[2]=l=>n.selectExercise(l))},null,8,["exercise","isActive"]))),256))])):x("",!0)])}const H6=Q(L6,[["render",j6],["__scopeId","data-v-573eb745"]]),U6="/icon/check-double.png",G6="/icon/check.png",Y6={name:"QuickLogExercise",components:{},props:{},data:function(){return{appStore:void 0,workoutStore:void 0,activeSetID:void 0,isLogged:!1}},created:function(){this.appStore=bt(),this.workoutStore=mi()},computed:{idWorkout(){return this.appStore?this.appStore.itemPanel.workout.selectedWorkoutID:void 0},idActiveExercise(){return this.appStore?this.appStore.itemPanel.workout.activeExerciseID:void 0},activeExercise(){if(this.idActiveExercise)return this.workoutStore.getWorkoutExercise(this.idActiveExercise,this.idWorkout)},sets(){return this.activeExercise?this.activeExercise.sets:[]},activeSet(){if(this.activeSetID){let t=this.sets.findIndex(i=>i.id==this.activeSetID);return this.sets[t]}},variationString(){if(this.activeSet.variations.length>0)return ya(this.activeSet.variations,"name")},reps(){if(this.activeSet&&this.activeSet.reps)return this.activeSet.reps},time(){if(this.activeSet&&this.activeSet.timeSeconds)return this.activeSet.timeSeconds},hold(){if(this.activeSet&&this.activeSet.holdSeconds)return this.activeSet.holdSeconds},weight(){if(this.activeSet&&this.activeSet.weight)return this.activeSet.weight}},methods:{logSet(){if(this.activeSet){this.isLogged=!0;let t=this.activeSet.iteration?void 0:new Date;this.workoutStore.logSet(this.activeSet.id,t)}},logAllSets(){this.isLogged=!0,this.workoutStore.logAllSets(this.activeExercise.idWorkoutExercise)}},watch:{sets(){for(let t=0;t<this.sets.length;t++)if(this.sets[t].iteration==null){this.activeSetID=this.sets[t].id;break}else if(t==this.sets.length-1){let e=this.workoutStore.getNextWorkoutExercise(this.idWorkout,this.activeExercise.id);e&&this.appStore.setActiveExercise(e.idWorkoutExercise)}},activeExercise(){this.isLogged=!1}}},q6={class:"quick-log-exercise ps-1 pt-1"},K6={class:"d-flex flex-row justify-content-between"},J6={class:"d-flex flex-row justify-content-between"},Q6={class:"d-flex flex-row"},Z6={key:0,class:"d-flex flex-column me-3"},X6={class:"exercise-name"},eG={key:0,class:"variation-text"},tG={class:"values d-flex flex-row"},iG={key:0},sG={key:1},nG={key:2},rG={key:3};function oG(t,e,i,s,r,n){return m(),p("div",q6,[d("div",K6,[d("div",J6,[d("div",Q6,[d("img",{class:F({"is-logged":t.isLogged}),src:U6,width:"48",height:"48",onClick:e[0]||(e[0]=(...o)=>n.logAllSets&&n.logAllSets(...o))},null,2),d("img",{class:F({"is-logged":t.isLogged}),src:G6,width:"48",height:"48",onClick:e[1]||(e[1]=(...o)=>n.logSet&&n.logSet(...o))},null,2)])]),n.activeSet?(m(),p("div",Z6,[d("span",X6,k(`${n.activeExercise.exercise.name}`),1),n.variationString?(m(),p("span",eG,k(n.variationString),1)):x("",!0),d("div",tG,[n.reps?(m(),p("span",iG,k(`${n.reps} REPS`),1)):x("",!0),n.time?(m(),p("span",sG,k(`${n.time} SECS`),1)):x("",!0),n.hold?(m(),p("span",nG,k(`${n.hold} SECS`),1)):x("",!0),n.weight?(m(),p("span",rG,k(`${n.weight} SECS`),1)):x("",!0)])])):x("",!0)])])}const aG=Q(Y6,[["render",oG],["__scopeId","data-v-74df7752"]]),lG={name:"WorkoutActive",components:{WorkoutSection:H6,DateTimeSelector:_o,QuickLogExercise:aG},props:{},data:function(){return{appStore:null,workoutStore:null,now:Date.now(),settings:{isShown:!1,confimDelete:!1},completion:{isActive:!1,isValid:!0,createEvent:!0},startAt:void 0,endAt:void 0}},created:function(){this.appStore=bt(),this.workoutStore=mi();var t=this;setInterval(function(){t.now=Date.now()},1e3)},computed:{id(){return this.appStore?this.appStore.itemPanel.workout.selectedWorkoutID:void 0},workout(){if(this.workoutStore&&this.id)return this.workoutStore.getWorkout(this.id)},name(){return this.workout?this.workout.name:"Loading..."},sections(){return this.workout?this.workout.sections:[]},isActive(){return!!(this.startAt&&!this.endAt||this.completion.isActive)},isComplete(){return!!(this.workout&&this.workout&&this.workout.iteration&&this.workout.iteration.completedAt)},timeSinceStart(){if(this.isActive&&this.startAt){let t=new Date(this.startAt);return Tm(t,this.now)}else return},points(){return this.workout?this.workout.points:0},sectionSettings(){if(this.workout){var t=this.workoutStore.getDisplaySettings(this.workout.id);return t.sections}}},methods:{stopWorkout:dG,cancelCompletion:uG,completeWorkout:cG,setIterationTime:hG,validateTimes:fG,deleteWorkout:mG,saveSettings:pG,back(){this.appStore.onBackWorkoutPanel()}},watch:{workout(){this.workout.iteration&&(this.workout.iteration.startAt&&(this.startAt=this.workout.iteration.startAt),this.workout.iteration.endAt&&(this.endAt=this.workout.iteration.endAt))},id(t){let e=this.workoutStore.getActiveExercise(t);this.appStore.setActiveExercise(e.idWorkoutExercise)}}};function dG(){if(!this.completion.isActive){let t=this.sections.flatMap(e=>e.exercises).flatMap(e=>e.sets).filter(e=>e.iteration&&e.iteration.completedAt);if(t.length>0){let e=new Date(t[0].iteration.completedAt);t.forEach(i=>{if(i.iteration&&i.iteration.completedAt){let s=new Date(i.iteration.completedAt);+s>+e&&(e=s)}}),this.endAt=e.toJSON()}this.validateTimes(),this.completion.isActive=!this.completion.isActive,this.settings.isShown=!1}}function uG(){this.endAt=void 0,this.completion.isActive=!1}function cG(){this.completion.isValid&&this.workoutStore.completeWorkout(this.workout.id,this.startAt,this.endAt,this.completion.createEvent).then(()=>{this.completion.isActive=!1,this.back()})}function hG(t,e){t&&(e=="start"?this.startAt=t:e=="end"&&(this.endAt=t),this.validateTimes())}function fG(){(this.workout.iteration||void 0)&&(this.startAt&&this.endAt?+new Date(this.startAt)>+new Date(this.endAt)?this.completion.isValid=!1:+new Date(this.startAt)<=+new Date(this.endAt)&&(this.completion.isValid=!0):this.endAt?this.completion.isValid=!0:this.completion.isValid=!1)}function mG(){let t={id:this.id,isDeleted:!0};this.workoutStore.saveWorkout(t),this.appStore.onDoneWorkout(),this.back()}function pG(){let t={id:this.id,isUpdated:!0,startAt:{isUpdated:this.startAt!=null,value:this.startAt},endAt:{isUpdated:this.endAt!=null,value:this.endAt},isTemplate:{isUpdated:!0,value:this.workout.isTemplate}};this.workoutStore.saveWorkout(t)}const gG={class:"label d-flex flex-row justify-content-between"},vG={class:"d-flex flex-row"},yG={class:"fload-end me-2"},_G={class:"d-flex flex-column"},bG={key:0,class:"settings"},wG={key:0,class:"d-flex flex-column mt-2"},SG={class:"d-flex flex-column"},TG={class:"d-flex flex-row justify-items-start mt-2"},xG={key:1,class:"d-flex flex-row mb-2 align-items-center"},IG={key:1,class:"completion d-flex flex-column justify-content-center position-sticky bottom-0"},EG={key:1,class:"clock d-flex flex-row justify-content-center align-items-center"},DG={key:2,class:"form-group pt-2"},kG={class:"d-flex flex-row justify-items-start mt-2"},CG={class:"d-flex flex-row mt-2"};function PG(t,e,i,s,r,n){const o=$("WorkoutSection"),a=$("DateTimeSelector"),l=$("QuickLogExercise");return m(),p("div",{class:F(["workout-active d-flex flex-column overflow-scroll",{"is-active":n.isActive}])},[d("div",gG,[d("div",vG,[d("img",{class:"icon-button mb-2",src:Wi,width:"20",height:"20",onClick:e[0]||(e[0]=ye((...c)=>n.back&&n.back(...c),["prevent"]))}),d("span",null,k(n.workout.name),1)]),d("span",yG,k(n.points),1)]),d("div",_G,[(m(!0),p(L,null,G(n.sections,c=>(m(),ie(o,{key:c.id,section:c,isActive:n.isActive,settings:n.sectionSettings.find(f=>f.id==c.id),class:"mt-2"},null,8,["section","isActive","settings"]))),128))]),t.completion.isActive?x("",!0):(m(),p("div",bG,[d("span",{class:"text-start cursor-default",onClick:e[1]||(e[1]=c=>t.settings.isShown=!t.settings.isShown)},"Settings"),t.settings.isShown?(m(),p("div",wG,[d("div",SG,[H(a,{class:F(["date-selector",{invalid:!t.completion.isValid}]),dateTime:t.startAt,onOnChange:e[2]||(e[2]=c=>n.setIterationTime(c,"start"))},null,8,["class","dateTime"]),H(a,{class:F(["date-selector mt-2",{invalid:!t.completion.isValid}]),dateTime:t.endAt,onOnChange:e[3]||(e[3]=c=>n.setIterationTime(c,"end"))},null,8,["class","dateTime"])]),d("div",TG,[X(d("input",{type:"checkbox",id:"is-template","onUpdate:modelValue":e[4]||(e[4]=c=>n.workout.isTemplate=c)},null,512),[[ji,n.workout.isTemplate]]),e[15]||(e[15]=d("label",{class:"ms-1",for:"is-template"},"Is Template",-1))]),d("button",{type:"button",class:"btn btn-primary mt-2 mb-2",onClick:e[5]||(e[5]=c=>n.saveSettings())},"Save"),t.settings.confimDelete?x("",!0):(m(),p("button",{key:0,type:"button",class:"btn btn-danger mb-2",onClick:e[6]||(e[6]=c=>t.settings.confimDelete=!0)},"Delete")),t.settings.confimDelete?(m(),p("div",xG,[e[16]||(e[16]=d("span",null,"Are you sure?",-1)),d("button",{type:"button",class:"btn btn-warning ms-2",onClick:e[7]||(e[7]=c=>t.settings.confimDelete=!1)},"Cancel"),d("button",{type:"button",class:"btn btn-danger ms-2",onClick:e[8]||(e[8]=(...c)=>n.deleteWorkout&&n.deleteWorkout(...c))},"Delete")])):x("",!0)])):x("",!0)])),n.isActive?(m(),p("div",IG,[t.completion.isActive?x("",!0):(m(),ie(l,{key:0})),t.completion.isActive?x("",!0):(m(),p("div",EG,[d("img",{class:"icon-button me-2",src:NS,width:"24",height:"24",onClick:e[9]||(e[9]=ye((...c)=>n.stopWorkout&&n.stopWorkout(...c),["prevent"]))}),d("div",null,k(n.timeSinceStart),1)])),t.completion.isActive?(m(),p("div",DG,[H(a,{class:F(["date-selector",{invalid:!t.completion.isValid}]),dateTime:t.startAt,onOnChange:e[10]||(e[10]=c=>n.setIterationTime(c,"start"))},null,8,["class","dateTime"]),H(a,{class:F(["date-selector mt-2",{invalid:!t.completion.isValid}]),dateTime:t.endAt,onOnChange:e[11]||(e[11]=c=>n.setIterationTime(c,"end"))},null,8,["class","dateTime"]),d("div",kG,[d("span",{class:F(["create-event",{selected:t.completion.createEvent}]),onClick:e[12]||(e[12]=c=>t.completion.createEvent=!t.completion.createEvent)}," Create Event ",2)]),d("div",CG,[d("button",{type:"button",class:"btn btn-primary mb-2",onClick:e[13]||(e[13]=(...c)=>n.completeWorkout&&n.completeWorkout(...c))},"Log"),d("button",{type:"button",class:"btn btn-warning mb-2 ms-2",onClick:e[14]||(e[14]=(...c)=>n.cancelCompletion&&n.cancelCompletion(...c))},"Cancel")])])):x("",!0)])):x("",!0)],2)}const VS=Q(lG,[["render",PG],["__scopeId","data-v-2d9dca26"]]),AG={name:"WorkoutList",components:{WorkoutItem:LH,WorkoutForm:LS,WorkoutActive:VS},data:function(){return{appStore:void 0,workoutStore:void 0,selectedPanel:"list",selectedWorkoutID:void 0}},created:async function(){this.appStore=bt();let t=await K(()=>Promise.resolve().then(()=>Gl),void 0);this.workoutStore=t.useWorkoutStore()},computed:{workouts(){return this.workoutStore?this.workoutStore.getWorkouts():[]},templates(){return this.workouts.filter(t=>t.isTemplate)},recents(){let t=this.workouts.filter(e=>e.iteration&&e.iteration.completedAt);return t.sort((e,i)=>new Date(i.iteration.completedAt)-new Date(e.iteration.completedAt)),t},actives(){let t=this.workouts.filter(e=>e.iteration&&e.iteration.startAt&&!e.iteration.endAt);return t.sort((e,i)=>new Date(i.iteration.startAt)-new Date(e.iteration.startAt)),t}},methods:{createWorkout(){this.selectedWorkoutID=-1,this.selectedPanel="workoutForm"},selectWorkout(t){this.appStore.selectWorkout(t)},back(){this.appStore.onBackWorkoutPanel()}}},RG={class:"d-flex flex-column flex-grow-1 overflow-scroll"},MG={class:"label d-flex flex-row mb-2"},OG={key:0,class:"d-flex flex-column"},$G={class:"d-flex flex-column"},NG={class:"d-flex flex-column"},LG={class:"d-flex flex-column"};function VG(t,e,i,s,r,n){const o=$("WorkoutItem");return m(),p("div",RG,[d("div",{class:F(["workout-list d-flex flex-column flex-grow-1",{hide:t.selectedPanel!="list"}])},[d("div",MG,[d("img",{class:"icon-button",src:Wi,width:"20",height:"20",onClick:e[0]||(e[0]=ye((...a)=>n.back&&n.back(...a),["prevent"]))}),e[5]||(e[5]=d("span",null,"Workouts",-1)),d("img",{class:"icon-button",src:Gs,width:20,height:20,onClick:e[1]||(e[1]=(...a)=>n.createWorkout&&n.createWorkout(...a))})]),n.actives.length>0?(m(),p("div",OG,[e[6]||(e[6]=d("span",{class:"text-start mt-1"},"Active",-1)),d("div",$G,[(m(!0),p(L,null,G(n.actives,a=>(m(),ie(o,{key:a.id,workout:a,class:"mb-2",onSelectWorkout:e[2]||(e[2]=l=>n.selectWorkout(l.id))},null,8,["workout"]))),128))])])):x("",!0),e[7]||(e[7]=d("span",{class:"text-start mt-1"},"Templates",-1)),d("div",NG,[(m(!0),p(L,null,G(n.templates,a=>(m(),ie(o,{key:a.id,workout:a,class:"mb-2",onSelectWorkout:e[3]||(e[3]=l=>n.selectWorkout(l.id))},null,8,["workout"]))),128))]),e[8]||(e[8]=d("span",{class:"text-start mt-1"},"Recent",-1)),d("div",LG,[(m(!0),p(L,null,G(n.recents,a=>(m(),ie(o,{key:a.id,workout:a,class:"mb-2",onSelectWorkout:e[4]||(e[4]=l=>n.selectWorkout(l.id))},null,8,["workout"]))),128))])],2)])}const WG=Q(AG,[["render",VG],["__scopeId","data-v-4985c5d6"]]),FG={name:"WorkoutPanelDashboard",components:{},props:{},data:function(){return{appStore:void 0}},created:function(){this.appStore=bt()},methods:{selectView(t){this.appStore.selectWorkoutView(t)}}},BG={class:"workout-panel-dashboard d-flex flex-column"};function zG(t,e,i,s,r,n){return m(),p("div",BG,[d("div",{class:"workout card",onClick:e[0]||(e[0]=o=>n.selectView("workoutList"))},e[3]||(e[3]=[d("span",null,"Workouts",-1)])),d("div",{class:"exercise card",onClick:e[1]||(e[1]=o=>n.selectView("exerciseList"))},e[4]||(e[4]=[d("span",null,"Exercises",-1)])),d("div",{class:"goal card",onClick:e[2]||(e[2]=o=>n.selectView("fitnessGoals"))},e[5]||(e[5]=[d("span",null,"Goals",-1)])),e[6]||(e[6]=d("div",{class:"skill card"},[d("span",null,"Skills")],-1)),e[7]||(e[7]=d("div",{class:"muscle card"},[d("span",null,"Muscles")],-1))])}const jG=Q(FG,[["render",zG],["__scopeId","data-v-9e762e1a"]]),HG={name:"ExerciseSet",components:{},props:{idExercise:Number,set:Object,setNumber:Number,isActive:Boolean},data:function(){return{appStore:void 0,workoutStore:void 0,showVariationSelector:!1,isProcessing:!1}},created:function(){this.appStore=bt(),this.workoutStore=mi()},computed:{variationIDs(){return this.set.variations.map(t=>t.id)},variationString(){if(this.set.variations.length>0)return ya(this.set.variations,"name")},potentialVariations(){return this.workoutStore?fe(this.workoutStore.getExercise(this.idExercise)).variations:[]},isComplete(){return!!this.set.iteration}},methods:{inputWidth(t){return t<10?"27px":t<100?"37px":"45px"},variationClicked(t){if(this.variationIDs.includes(t.id)){let e=this.set.variations.findIndex(s=>s.id==t.id);this.set.variations.splice(e,1);let i={...this.set};i.variations=[{id:t.id,isRemoved:!0}],this.workoutStore.saveSet(i)}else({...this.set}).variations.push({id:t.id,name:t.name}),this.workoutStore.saveSet(this.set)},deleteSet(){this.isProcessing=!0;var t={...this.set,isDeleted:!0};this.$emit("removeActiveSet"),this.workoutStore.saveSet(t).then(e=>{this.isProcessing=!1})},blur(t){(!t.relatedTarget||!t.relatedTarget.classList.contains("prop"))&&this.save()},save(){this.isProcessing=!0,this.workoutStore.saveSet(this.set).then(t=>{this.isProcessing=!1})}}},UG={class:"variations text-start"},GG={class:"variations picks d-flex flex-row"},YG=["onClick"],qG={class:"d-flex flex-row flex-grow-1"},KG={key:0,class:"loader"},JG={class:"reps d-flex flex-column align-items-center"},QG={class:"time d-flex flex-column align-items-center"},ZG={class:"weight d-flex flex-column align-items-center"};function XG(t,e,i,s,r,n){return m(),p("div",{class:F(["exercise-set d-flex flex-column flex-grow-1 mt-2",{complete:n.isComplete}])},[!t.showVariationSelector&&n.variationString?(m(),p("div",{key:0,class:"d-flex flex-row",onClick:e[0]||(e[0]=o=>t.showVariationSelector=!0)},[d("span",UG,k(n.variationString),1)])):x("",!0),t.showVariationSelector?(m(),p("div",{key:1,class:"d-flex flex-row",onMouseleave:e[1]||(e[1]=o=>t.showVariationSelector=!1)},[d("div",GG,[(m(!0),p(L,null,G(n.potentialVariations,o=>(m(),p("span",{key:o.id,class:F({selected:n.variationIDs.includes(o.id)}),onClick:a=>n.variationClicked(o)},k(o.name),11,YG))),128))])],32)):x("",!0),d("div",qG,[t.isProcessing?x("",!0):(m(),p("span",{key:0,class:F(["set-number",{active:i.isActive}]),onClick:e[2]||(e[2]=o=>t.activeSetID=i.set.id)},k(i.setNumber),3)),d("div",null,[t.isProcessing?(m(),p("div",KG)):x("",!0)]),d("div",JG,[X(d("input",{class:"prop form-control form-control-sm me-2",type:"number",min:"0",ref:"repsInput","onUpdate:modelValue":e[3]||(e[3]=o=>i.set.reps=o),style:$e({width:n.inputWidth(i.set.reps)}),onKeyup:e[4]||(e[4]=Ot((...o)=>t.doneEditing&&t.doneEditing(...o),["enter","esc"])),onBlur:e[5]||(e[5]=(...o)=>n.blur&&n.blur(...o))},null,36),[[Ae,i.set.reps]]),e[14]||(e[14]=d("span",{class:"field me-2"},"REPS",-1))]),d("div",QG,[X(d("input",{class:"prop form-control form-control-sm me-2",type:"number",min:"0",ref:"timeInput","onUpdate:modelValue":e[6]||(e[6]=o=>i.set.timeSeconds=o),style:$e({width:n.inputWidth(i.set.timeSeconds)}),onKeyup:e[7]||(e[7]=Ot((...o)=>t.doneEditing&&t.doneEditing(...o),["enter","esc"])),onBlur:e[8]||(e[8]=(...o)=>n.blur&&n.blur(...o))},null,36),[[Ae,i.set.timeSeconds]]),e[15]||(e[15]=d("span",{class:"field me-2"},"TIME",-1))]),d("div",ZG,[X(d("input",{class:"prop form-control form-control-sm me-2",type:"number",min:"0",ref:"weightInput","onUpdate:modelValue":e[9]||(e[9]=o=>i.set.weight=o),style:$e({width:n.inputWidth(i.set.weight)}),onKeyup:e[10]||(e[10]=Ot((...o)=>t.doneEditing&&t.doneEditing(...o),["enter","esc"])),onBlur:e[11]||(e[11]=(...o)=>n.blur&&n.blur(...o))},null,36),[[Ae,i.set.weight]]),e[16]||(e[16]=d("span",{class:"fieldme-2"},"LBS",-1))]),d("div",{class:F(["button-group d-flex flex-column",{active:i.isActive}])},[d("img",{class:"icon-button",src:go,width:"16",height:"16",onClick:e[12]||(e[12]=ye(o=>t.showVariationSelector=!t.showVariationSelector,["stop","prevent"]))}),d("img",{class:"icon-button",src:jn,width:"16",height:"16",onClick:e[13]||(e[13]=ye((...o)=>n.deleteSet&&n.deleteSet(...o),["stop"]))})],2)])],2)}const eY=Q(HG,[["render",XG],["__scopeId","data-v-3ed31c30"]]),tY="/icon/exercise-history.svg",iY={name:"",components:{ExerciseSet:eY},props:{},data:function(){return{appStore:void 0,workoutStore:void 0,activeSetID:void 0,restRemaining:void 0,restIntervalID:void 0,isProcessing:!1}},created:function(){this.appStore=bt(),this.workoutStore=mi()},computed:{id(){return this.appStore?this.appStore.itemPanel.workout.selectedExerciseID:void 0},idWorkout(){return this.appStore?this.appStore.itemPanel.workout.selectedWorkoutID:void 0},name(){return this.exercise?this.exercise.name:"Loading..."},exercise(){if(this.workoutExercise){let t=this.workoutStore.getExercise(this.workoutExercise.idExercise);return{...this.workoutExercise,...t}}},workoutExercise(){if(this.workoutStore&&this.id)return this.workoutStore.getWorkoutExercise(this.id,this.idWorkout)},sets(){return this.workoutExercise?this.workoutExercise.sets.map(e=>({idWorkoutExercise:this.workoutExercise.idWorkoutExercise,...e})):[]},restSeconds(){if(this.workoutExercise)return this.workoutExercise.restSeconds}},methods:{back(){this.appStore.onBackWorkoutPanel()},setActiveSet:sY,addSet(){let t=this.sets.map(i=>i.id).sort((i,s)=>i-s),e=t.length==0||t[0]-1>-1?-1:t[0]-1;if(this.sets.length>0){let i=this.sets.at(-1),s=fe(i);s.iteration=null,s.id=e,this.workoutStore.saveSet(s)}else{let i={id:e,idWorkoutExercise:this.workoutExercise.idWorkoutExercise};this.workoutStore.saveSet(i)}},showHistory(){let t=[];this.appStore.selectExerciseHistory(this.exercise.id,t)},logSet(){this.isProcessing=!0;let t=this.sets.findIndex(r=>r.id==this.activeSetID);if(this.restSeconds){this.restRemaining=this.restSeconds;var e=this;this.restIntervalID=setInterval(function(){e.restRemaining--},1e3)}let i=this.sets[t],s=i.iteration?void 0:new Date;this.activeSetID=void 0,this.workoutStore.logSet(i.id,s).then(r=>{this.isProcessing=!1})},logAllSets(){this.isProcessing=!0,this.activeSetID=void 0,this.workoutStore.logAllSets(this.workoutExercise.idWorkoutExercise).then(t=>{this.isProcessing=!1})}},watch:{restRemaining(t){t!=null&&t==0&&(clearInterval(this.restIntervalID),this.restIntervalID=void 0,this.restRemaining=void 0)},sets(t){t.length>0&&this.setActiveSet()}}};function sY(){if(this.activeSetID)return;let t;this.sets.forEach(e=>{!e.iteration&&!t&&(t=e.id)}),this.activeSetID=t}const nY={class:"workout-exercise d-flex flex-column flex-grow-1 overflow-scroll"},rY={class:"label d-flex flex-row pt-2 pb-2 sticky-top"},oY={class:"media position-relative"},aY={class:"toolbar d-flex flex-row position-absolute bottom-0 end-0 mb-2 me-2"},lY={class:"exercise-sets d-flex flex-column ms-auto me-auto mt-3"},dY={class:"d-flex flex-row mt-1"},uY={key:0,class:"rest-timer d-flex flex-row position-sticky bottom-0"},cY={key:1,class:"d-flex flex-row mt-auto mb-2 justify-content-center position-sticky bottom-0"},hY={key:2,class:"d-flex flex-row mt-auto ps-2 pe-2 position-sticky bottom-0"};function fY(t,e,i,s,r,n){const o=$("ExerciseSet");return m(),p("div",nY,[d("div",rY,[d("img",{class:"icon-button",src:Wi,width:"20",height:"20",onClick:e[0]||(e[0]=ye((...a)=>n.back&&n.back(...a),["prevent"]))}),d("span",null,k(n.name),1)]),d("div",oY,[d("div",aY,[d("img",{class:"history-button",src:tY,width:"24",height:"24",onClick:e[1]||(e[1]=ye((...a)=>n.showHistory&&n.showHistory(...a),["prevent"]))})])]),d("div",lY,[(m(!0),p(L,null,G(n.sets,(a,l)=>(m(),ie(o,{key:a.id,set:a,isActive:a.id==t.activeSetID,setNumber:l+1,idExercise:this.exercise.id,onRemoveActiveSet:e[2]||(e[2]=c=>t.activeSetID=void 0),onClick:c=>t.activeSetID=a.id},null,8,["set","isActive","setNumber","idExercise","onClick"]))),128)),d("div",dY,[d("button",{class:"btn btn-sm ms-4 mb-3",type:"button",onClick:e[3]||(e[3]=(...a)=>n.addSet&&n.addSet(...a))}," Add Set ")])]),t.restRemaining?(m(),p("div",uY,[e[6]||(e[6]=d("img",{src:Tl,width:"40",height:"40"},null,-1)),d("div",null,k(t.restRemaining),1),e[7]||(e[7]=d("img",{src:Tl,width:"40",height:"40"},null,-1))])):x("",!0),t.isProcessing?(m(),p("div",cY,e[8]||(e[8]=[d("div",{class:"loader"},null,-1)]))):x("",!0),!t.isProcessing&&!t.restRemaining?(m(),p("div",hY,[d("button",{type:"button",class:"btn btn-warning mb-2 flex-grow-1",onClick:e[4]||(e[4]=(...a)=>n.logSet&&n.logSet(...a))},"Log Set"),d("button",{type:"button",class:"btn btn-primary mb-2 ms-2",onClick:e[5]||(e[5]=(...a)=>n.logAllSets&&n.logAllSets(...a))},"Log All Sets")])):x("",!0)])}const mY=Q(iY,[["render",fY],["__scopeId","data-v-715de18c"]]),pY={name:"ExerciseChart",components:{},props:{setProp:String,history:Array},data:function(){return{chart:void 0,propSeries:void 0}},created:function(){},mounted(){this.createExerciseChart(),this.setPropSeries()},computed:{name(){return`${this.setProp}-chart`}},methods:{createExerciseChart:gY,setPropSeries:vY,capitalize:wi}};function gY(){let t={rightPriceScale:{visible:!0},leftPriceScale:{visible:!0},localization:{priceFormatter:i=>i.toFixed(0)},width:330,height:100};this.$refs[this.name].replaceChildren();const e=Zl(this.name,t);this.chart=e,this.propSeries=e.addLineSeries({priceScaleId:"left",color:"#EA8919",lastValueVisible:!1,priceLineVisible:!1})}function vY(){let t=wi(this.setProp),e=this.history.filter(s=>s[`max${t}`]);e=so(e,"date");let i=e.map(s=>({datetime:new Date(s.date),time:new Date(s.date)/1e3,value:s[`max${t}`]}));this.propSeries.setData(i),this.chart.timeScale().fitContent()}const yY={class:"exercise-chart d-flex flex-column"},_Y=["id"];function bY(t,e,i,s,r,n){return m(),p("div",yY,[d("h4",null,k(n.capitalize(i.setProp)),1),d("div",{id:n.name,ref:n.name,class:"mt-2"},null,8,_Y)])}const wY=Q(pY,[["render",bY]]),SY={name:"ExerciseHistory",components:{ExerciseChart:wY},props:{},data:function(){return{appStore:void 0,workoutStore:void 0,selectedTab:"results"}},created:function(){this.appStore=bt(),this.workoutStore=mi()},computed:{idExercise(){return this.appStore?this.appStore.itemPanel.workout.exerciseHistory.idExercise:void 0},variationIDs(){return this.appStore?this.appStore.itemPanel.workout.exerciseHistory.variationIDs:void 0},history(){if(this.idExercise&&this.variationIDs){var t=this.workoutStore.getExerciseHistory(this.idExercise,this.variationIDs);return t}}},methods:{dateString(t){return Lw(new Date(t))},back(){this.appStore.onBackWorkoutPanel()}}},TY={class:"exercise-history d-flex flex-column overflow-scroll pt-2"},xY={class:"label d-flex flex-row"},IY={class:"d-flex flex-row justify-content-center"},EY={key:0,class:"trends"},DY={key:1,class:"results"},kY={class:"text-start"},CY={class:"d-flex flex-column mt-1"},PY={class:"set-number"},AY={class:"ps-1"},RY={key:0,class:"ps-1"},MY={class:"text-start mt-1"},OY={class:"text-start mt-1"};function $Y(t,e,i,s,r,n){const o=$("ExerciseChart");return m(),p("div",TY,[d("div",xY,[d("img",{class:"icon-button",src:Wi,width:"20",height:"20",onClick:e[0]||(e[0]=ye((...a)=>n.back&&n.back(...a),["prevent"]))})]),d("div",IY,[d("span",{class:F(["tab p-2",{selected:t.selectedTab=="results"}]),onClick:e[1]||(e[1]=a=>t.selectedTab="results")}," Results ",2),d("span",{class:F(["tab p-2",{selected:t.selectedTab=="trends"}]),onClick:e[2]||(e[2]=a=>t.selectedTab="trends")}," Trends ",2)]),t.selectedTab=="trends"?(m(),p("div",EY,[n.history?(m(),ie(o,{key:0,class:"mt-2",setProp:"weight",history:n.history},null,8,["history"])):x("",!0),n.history?(m(),ie(o,{key:1,class:"mt-2",setProp:"reps",history:n.history},null,8,["history"])):x("",!0)])):x("",!0),t.selectedTab=="results"?(m(),p("div",DY,[(m(!0),p(L,null,G(n.history,(a,l)=>(m(),p("div",{key:l,class:"mt-3 ps-3 d-flex flex-column"},[d("span",kY,k(n.dateString(a.date)),1),d("div",CY,[(m(!0),p(L,null,G(a.sets,(c,f)=>(m(),p("div",{key:f,class:"d-flex flex-row mt-1"},[d("span",PY,k(f+1),1),d("span",AY,k(`${c.reps} reps`),1),c.weight?(m(),p("span",RY,k(`${c.weight} lbs`),1)):x("",!0)]))),128))]),d("span",MY,k(`Reps Volume: ${a.volumeReps}`),1),d("span",OY,k(`Weight Volumn: ${a.volumeWeight} lbs`),1)]))),128))])):x("",!0)])}const NY=Q(SY,[["render",$Y],["__scopeId","data-v-ed0f0354"]]),LY={name:"FitnessGoalTodo",components:{},props:{timePairTodo:Object},data:function(){return{plannerStore:void 0,todoStore:void 0,workoutStore:void 0,showForm:!1}},created:async function(){let t=await K(()=>Promise.resolve().then(()=>ht),void 0);this.plannerStore=t.usePlannerStore();let e=await K(()=>Promise.resolve().then(()=>hi),void 0);this.todoStore=e.useTodoStore();let i=await K(()=>Promise.resolve().then(()=>Gl),void 0);this.workoutStore=i.useWorkoutStore()},computed:{selectedDate(){return this.plannerStore?this.plannerStore.selectedDate:Tt()},start(){return this.plannerStore?CP(this.selectedDate):Tt()},end(){return this.plannerStore?PP(this.selectedDate):Tt()},idTodo(){return this.timePairTodo.todoID},exercise(){if(this.workoutStore)return this.workoutStore.getExerciseForTodo(this.idTodo)},exerciseName(){return this.exercise?this.exercise.name:""},idFitnessGoal(){return this.fitnessGoals.length>0?this.fitnessGoals[0].id:void 0},fitnessGoal(){return this.fitnessGoals.length>0?this.fitnessGoals[0]:{frequency:void 0,sets:void 0,reps:void 0,weight:void 0,time:void 0}},fitnessGoals(){return this.timePairTodo.fitnessGoals},pills(){let t=[];if(!this.fitnessGoal.weight&&!this.fitnessGoal.time){let e=this.fitnessGoal.reps*this.fitnessGoal.sets,i=He(this.setHistory,"volumnReps");for(let s=0;s<this.fitnessGoal.frequency;s++){let r=i.shift();t.push({amount:e,prop:"rep",isMet:r&&r.volumeReps>=e})}}else if(this.fitnessGoal.weight){let e=this.fitnessGoal.reps*this.fitnessGoal.weight*this.fitnessGoal.sets,i=He(this.setHistory,"volumeWeight");for(let s=0;s<this.fitnessGoal.frequency;s++){let r=i.shift();t.push({amount:e,prop:"lbs",isMet:r&&r.volumeWeight>=e})}}else if(this.fitnessGoal.time){let e=this.fitnessGoal.reps*this.fitnessGoal.time*this.fitnessGoal.sets,i=He(this.setHistory,"volumeTime");for(let s=0;s<this.fitnessGoal.frequency;s++){let r=i.shift();t.push({amount:e,prop:"sec",isMet:r&&r.volumeTime>=e})}}return t},setHistory(){let t=[];return this.exercise&&(t=this.workoutStore.getExerciseHistory(this.exercise.id),t=t.filter(e=>{let i=e.date.toDate();return+i>=this.start&&+i<=this.end})),t},volume(){let t={reps:0,weight:0,time:0};if(this.exercise){let e=this.workoutStore.getExerciseHistory(this.exercise.id);e=e.filter(i=>{let s=i.date.toDate();return+s>=this.start&&+s<=this.end}),t.reps=sl(e,"volumeReps"),t.weight=sl(e,"volumeWeight"),t.time=sl(e,"volumeTime")}return t}},methods:{save:VY}};function VY(){let t=this.fitnessGoal.frequency||void 0,e=this.fitnessGoal.sets||void 0,i=this.fitnessGoal.reps||void 0,s=this.fitnessGoal.weight||void 0,r=this.fitnessGoal.time||void 0;this.idFitnessGoal?this.workoutStore.saveFitnessGoal(this.idFitnessGoal,t,e,i,s,r):this.workoutStore.createFitnessGoal(this.timePairTodo.id,t,e,i,s,r),this.showForm=!1}const WY={class:"fitness-goal-todo d-flex flex-column"},FY={class:"d-flex flex-column"},BY={key:0,class:"d-flex gap-2"},zY={key:0,class:"form"},jY={class:"form-floating mb-2"},HY=["id"],UY=["for"],GY={class:"form-floating mb-2"},YY=["id"],qY=["for"],KY={class:"form-floating mb-2"},JY=["id"],QY=["for"],ZY={class:"form-floating mb-2"},XY=["id"],e7=["for"],t7={class:"form-floating mb-2"},i7=["id"],s7=["for"],n7={class:"d-flex"};function r7(t,e,i,s,r,n){return m(),p("div",WY,[d("div",FY,[d("span",{class:"todo-title text-start",onClick:e[0]||(e[0]=o=>t.showForm=!t.showForm)},k(n.exerciseName),1),t.showForm?x("",!0):(m(),p("div",BY,[(m(!0),p(L,null,G(n.pills,(o,a)=>(m(),p("span",{key:a,class:F(["pill",{success:o.isMet}])},k(`${o.amount} ${o.prop}`),3))),128))]))]),t.showForm?(m(),p("div",zY,[d("div",jY,[X(d("input",{type:"number",class:"form-control",id:`fitness-goal-todo-${i.timePairTodo.id}-frequency`,placeholder:"Frequency","onUpdate:modelValue":e[1]||(e[1]=o=>n.fitnessGoal.frequency=o)},null,8,HY),[[Ae,n.fitnessGoal.frequency,void 0,{lazy:!0,trim:!0}]]),d("label",{for:`fitness-goal-todo-${i.timePairTodo.id}-frequency`},"Frequency",8,UY)]),d("div",GY,[X(d("input",{type:"number",class:"form-control",id:`fitness-goal-todo-${i.timePairTodo.id}-sets`,placeholder:"Sets","onUpdate:modelValue":e[2]||(e[2]=o=>n.fitnessGoal.sets=o)},null,8,YY),[[Ae,n.fitnessGoal.sets,void 0,{lazy:!0,trim:!0}]]),d("label",{for:`fitness-goal-todo-${i.timePairTodo.id}-sets`},"Sets",8,qY)]),d("div",KY,[X(d("input",{type:"number",class:"form-control",id:`fitness-goal-todo-${i.timePairTodo.id}-reps`,placeholder:"Reps","onUpdate:modelValue":e[3]||(e[3]=o=>n.fitnessGoal.reps=o)},null,8,JY),[[Ae,n.fitnessGoal.reps,void 0,{lazy:!0,trim:!0}]]),d("label",{for:`fitness-goal-todo-${i.timePairTodo.id}-reps`},"Reps",8,QY)]),d("div",ZY,[X(d("input",{type:"number",class:"form-control",id:`fitness-goal-todo-${i.timePairTodo.id}-weight`,placeholder:"Weight","onUpdate:modelValue":e[4]||(e[4]=o=>n.fitnessGoal.weight=o)},null,8,XY),[[Ae,n.fitnessGoal.weight,void 0,{lazy:!0,trim:!0}]]),d("label",{for:`fitness-goal-todo-${i.timePairTodo.id}-weight`},"Weight",8,e7)]),d("div",t7,[X(d("input",{type:"number",class:"form-control",id:`fitness-goal-todo-${i.timePairTodo.id}-time`,placeholder:"Time","onUpdate:modelValue":e[5]||(e[5]=o=>n.fitnessGoal.time=o)},null,8,i7),[[Ae,n.fitnessGoal.time,void 0,{lazy:!0,trim:!0}]]),d("label",{for:`fitness-goal-todo-${i.timePairTodo.id}-time`},"Time",8,s7)]),d("div",n7,[d("button",{type:"button",class:"btn btn-primary btn-sm float-start mb-2 me-1",onClick:e[6]||(e[6]=(...o)=>n.save&&n.save(...o))}," Save "),d("button",{type:"button",class:"btn btn-warning btn-sm float-start mb-2",onClick:e[7]||(e[7]=o=>t.showForm=!1)}," Cancel ")])])):x("",!0)])}const o7=Q(LY,[["render",r7],["__scopeId","data-v-630f0de5"]]),a7={name:"FitnessGoals",components:{FitnessGoalTodo:o7},props:{},data:function(){return{appStore:void 0,plannerStore:void 0,goalStore:void 0}},created:async function(){let t=await K(()=>Promise.resolve().then(()=>Kn),void 0);this.appStore=t.useAppStore();let e=await K(()=>Promise.resolve().then(()=>ht),void 0);this.plannerStore=e.usePlannerStore();let i=await K(()=>Promise.resolve().then(()=>Ni),void 0);this.goalStore=i.useGoalStore()},computed:{selectedDate(){return this.plannerStore?this.plannerStore.selectedDate:today()},goals(){if(this.goalStore){let t=this.goalStore.getFitnessGoals();return t=t.filter(this.isGoalActive),t}}},methods:{isGoalActive:l7,isTimePairActive:d7,getTimePairTodos:u7,back(){this.appStore.onBackWorkoutPanel()}}};function l7(t){return t.timePairs.some(this.isTimePairActive)}function d7(t){let e=!1;return t.startTime&&+t.startTime.dateTime.toDate()<=+this.selectedDate&&(e=!0),t.endTime&&+t.endTime.dateTime.toDate()<+this.selectedDate&&(e=!1),e}function u7(t){return t.timePairs.flatMap(i=>this.isTimePairActive(i)?i.goalTimePairTodos:[])}const c7={class:"fitness-goals d-flex flex-column p-2 flex-grow-1 overflow-scroll"},h7={class:"label d-flex flex-row mb-2"},f7={class:"goal-title text-start"};function m7(t,e,i,s,r,n){const o=$("FitnessGoalTodo");return m(),p("div",c7,[d("div",h7,[d("img",{class:"icon-button me-2",src:Wi,width:"20",height:"20",onClick:e[0]||(e[0]=ye((...a)=>n.back&&n.back(...a),["prevent"]))}),e[1]||(e[1]=d("span",null,"Fitness Goals",-1))]),(m(!0),p(L,null,G(n.goals,a=>(m(),p("div",{key:a.id,class:"fitness-goal d-flex flex-column mb-2"},[d("span",f7,k(a.text),1),(m(!0),p(L,null,G(n.getTimePairTodos(a),l=>(m(),p("div",{key:l.todoID,class:"fitness-goal-todo d-flex flex-column"},[H(o,{timePairTodo:l},null,8,["timePairTodo"])]))),128))]))),128))])}const p7=Q(a7,[["render",m7],["__scopeId","data-v-30a9865d"]]);var g7=[{id:1,text:"Custom"}];const v7={name:"WorkoutPanel",components:{ItemPanelHeader:tc,WorkoutList:WG,WorkoutForm:LS,WorkoutActive:VS,WorkoutPanelDashboard:jG,ExerciseList:$S,WorkoutExercise:mY,ExerciseHistory:NY,FitnessGoals:p7},props:{selectedDate:Date,showHead:{type:Boolean,default:!0}},data:function(){return{appStore:void 0,workoutStore:void 0,sort:{by:"Custom",items:g7},title:"Workout Dashboard",activePanel:"dashboard",lastPanel:"",panelQueue:[],workoutView:{workout:void 0},exerciseForm:{id:void 0}}},created:function(){this.appStore=bt(),this.workoutStore=mi(),this.workoutStore.initialize();let t=localStorage.getItem("workout-panel-sort-by");t?this.sort.by=t:localStorage.setItem("workout-panel-sort-by",this.sort.by)},computed:{selectedView(){return this.appStore?this.appStore.itemPanel.workout.selectedView:void 0}},methods:{onSortChange:y7,selectView:_7,setPanelHeader:b7,selectWorkout:w7,back:S7}};function y7(t){this.sort.by=t,localStorage.setItem("workout-panel-sort-by",t)}function _7(t){this.activePanel!=t.panel&&this.panelQueue.push(this.activePanel),this.activePanel=t.panel,t&&t.panel&&t.panel=="dashboard"?this.activePanel="Workout Dashboard":t&&t.panel&&t.panel=="workoutList"?this.title="Workout List":t&&t.panel&&t.panel=="workoutForm"?(this.workoutView.workout=t.workout,this.title="Workout"):t&&t.panel&&t.panel=="exerciseList"?this.title=t.panelTitle?t.panelTitle:"Exercises":t&&t.panel&&t.panel=="exerciseForm"&&(this.title="Exercise Form")}function b7(t){this.title=t.text}function w7(t){this.workoutStore.selectWorkout(t)}function S7(){this.activePanel=this.panelQueue.pop()}const T7={class:"row g-0 h-100"},x7={class:"workout-panel col h-100 d-flex flex-column flex-grow-1 overflow-hidden"};function I7(t,e,i,s,r,n){const o=$("ItemPanelHeader"),a=$("WorkoutPanelDashboard"),l=$("WorkoutList"),c=$("WorkoutForm"),f=$("WorkoutActive"),v=$("WorkoutExercise"),S=$("ExerciseList"),I=$("ExerciseHistory"),C=$("FitnessGoals");return m(),p("div",T7,[d("div",x7,[X(H(o,{title:t.title,sort:t.sort,selectedDate:i.selectedDate,onOnSortChange:n.onSortChange},null,8,["title","sort","selectedDate","onOnSortChange"]),[[it,i.showHead]]),n.selectedView=="dashboard"?(m(),ie(a,{key:0,onSelectView:n.selectView},null,8,["onSelectView"])):x("",!0),n.selectedView=="workoutList"?(m(),ie(l,{key:1,onSetPanelHeader:n.setPanelHeader,onSelectWorkout:n.selectWorkout,onBack:n.back},null,8,["onSetPanelHeader","onSelectWorkout","onBack"])):x("",!0),n.selectedView=="workoutForm"?(m(),ie(c,{key:2,onSelectView:n.selectView,onBack:n.back},null,8,["onSelectView","onBack"])):x("",!0),n.selectedView=="workoutActive"?(m(),ie(f,{key:3})):x("",!0),n.selectedView=="workoutExercise"?(m(),ie(v,{key:4})):x("",!0),n.selectedView=="exerciseList"?(m(),ie(S,{key:5})):x("",!0),n.selectedView=="exerciseHistory"?(m(),ie(I,{key:6})):x("",!0),n.selectedView=="fitnessGoals"?(m(),ie(C,{key:7})):x("",!0)])])}const WS=Q(v7,[["render",I7]]),E7={name:"MobileItemTabPanel",components:{DashboardPanel:jw,MetricPanel:Hw,GoalPanel:Yw,TodoPanel:Zw,RoutinePanel:Xw,TaskRoutinePanel:eS,PlannerPanel:ZV,EventPanel:sS,InventoryPanel:CS,NutritionPanel:RS,WorkoutPanel:WS},props:{},data:function(){return{appStore:void 0,eventPanelProps:{},workoutPanelProps:{selectedWorkoutID:void 0}}},created:function(){this.appStore=bt()},computed:{selectedPanel(){return this.appStore?this.appStore.itemPanel.selected:""}},methods:{selectWorkout(){}}},D7={class:"mobile-tab-panel d-flex flex-grow-1"};function k7(t,e,i,s,r,n){const o=$("DashboardPanel"),a=$("MetricPanel"),l=$("GoalPanel"),c=$("TodoPanel"),f=$("RoutinePanel"),v=$("TaskRoutinePanel"),S=$("PlannerPanel"),I=$("EventPanel"),C=$("InventoryPanel"),D=$("NutritionPanel"),J=$("WorkoutPanel");return m(),p("div",D7,[X(H(o,{class:"item-panel",showHead:!1},null,512),[[it,n.selectedPanel=="dashboard"]]),X(H(a,{class:"item-panel",showHead:!1},null,512),[[it,n.selectedPanel=="metric"]]),X(H(l,{class:"item-panel",showHead:!1},null,512),[[it,n.selectedPanel=="goal"]]),X(H(c,{class:"item-panel",showHead:!1},null,512),[[it,n.selectedPanel=="todo"]]),X(H(f,{class:"item-panel",showHead:!1},null,512),[[it,n.selectedPanel=="routine"]]),X(H(v,{class:"item-panel",showHead:!1},null,512),[[it,n.selectedPanel=="task-routine"]]),X(H(S,{class:"item-panel",dayCount:2,showHead:!1},null,512),[[it,n.selectedPanel=="planner"]]),X(H(I,{props:t.eventPanelProps,class:"item-panel",showHead:!1},null,8,["props"]),[[it,n.selectedPanel=="event"]]),X(H(C,{class:"item-panel",showHead:!1},null,512),[[it,n.selectedPanel=="inventory"]]),n.selectedPanel=="nutrition"?(m(),ie(D,{key:0,class:"item-panel",showHead:!1})):x("",!0),X(H(J,{class:"item-panel",showHead:!1,selectedWorkoutID:t.workoutPanelProps.selectedWorkoutID,onSelectWorkout:n.selectWorkout},null,8,["selectedWorkoutID","onSelectWorkout"]),[[it,n.selectedPanel=="workout"]])])}const C7=Q(E7,[["render",k7],["__scopeId","data-v-d00f8e0f"]]),P7={name:"BriefingGoal",components:{},props:{idGoal:Number,idTimeframe:{type:Number,default:()=>55}},data:function(){return{goalStore:void 0,plannerStore:void 0,universalStore:void 0,showBlurbs:!0}},created:async function(){let t=await K(()=>Promise.resolve().then(()=>Ni),void 0);this.goalStore=t.useGoalStore();let e=await K(()=>Promise.resolve().then(()=>ht),void 0);this.plannerStore=e.usePlannerStore();let i=await K(()=>Promise.resolve().then(()=>bo),void 0);this.universalStore=i.useUniversalStore()},computed:{selectedDate(){return this.plannerStore?this.plannerStore.selectedDate:$t()},goal(){if(this.goalStore)return this.goalStore.getItem(this.idGoal)},blurbs(){let t=[];return this.universalStore&&this.goal.blurbs.forEach(e=>{let i=this.universalStore.getBlurb(e.id);i&&t.push(i)}),He([...t],"position")},reasons(){if(this.goal){let t=this.goal.timePairs.filter(i=>{if(i.idTimeframe!=this.idTimeframe)return!1;let s=i.startTime?new Date(i.startTime.dateTime):void 0,r=i.endTime?new Date(i.endTime.dateTime):void 0;return!!(s&&+s<=+this.selectedDate&&r&&+r>=+this.selectedDate)}).map(i=>i.id);return this.blurbs.filter(i=>i.idType==ar.REASON?i.goalTimePairs.length==0?!0:i.goalTimePairs.findIndex(n=>t.includes(n.id))>-1:!1)}}},methods:{}},A7={key:0,class:"briefing-goal d-flex flex-column"},R7={key:0,class:"blurbs"};function M7(t,e,i,s,r,n){return n.goal?(m(),p("div",A7,[d("span",{onClick:e[0]||(e[0]=o=>t.showBlurbs=!t.showBlurbs),class:"text-start goal"},k(n.goal.text),1),t.showBlurbs?(m(),p("div",R7,[d("ul",null,[(m(!0),p(L,null,G(n.reasons,o=>(m(),p("li",{key:o.id,class:"text-start reason mb-2"},k(o.text),1))),128))])])):x("",!0)])):x("",!0)}const O7=Q(P7,[["render",M7],["__scopeId","data-v-7939ee20"]]),$7={name:"BriefingGoals",components:{BriefingGoal:O7},props:{idTimeframe:{type:Number,default:()=>55},goalIDs:{type:Array,default:()=>[]}},data:function(){return{isShown:!0}},created:function(){},methods:{}},N7={class:"briefing-goals d-flex flex-column p-2"};function L7(t,e,i,s,r,n){const o=$("BriefingGoal");return m(),p("div",N7,[d("h4",{class:"text-start",onClick:e[0]||(e[0]=a=>t.isShown=!t.isShown)},"Goals"),t.isShown?(m(!0),p(L,{key:0},G(i.goalIDs,a=>(m(),p("div",{key:i.goalIDs,class:"d-flex flex-column"},[H(o,{class:"mb-1",idGoal:a},null,8,["idGoal"])]))),128)):x("",!0)])}const V7=Q($7,[["render",L7]]),W7={name:"BlurbFormControl",components:{},props:{header:{type:String,default:()=>"Blurb"},blurbs:{type:Array,default:()=>[]},placeholder:{type:String,default:()=>""},showTitle:{type:Boolean,default:()=>!1}},data:function(){return{universalStore:void 0,title:void 0,text:void 0,selectedID:void 0,isShown:!0,showButtons:!1,showTextarea:!1,goalTimePairIDs:[],goalTimePairTodoIDs:[]}},created:async function(){let t=await K(()=>Promise.resolve().then(()=>bo),void 0);this.universalStore=t.useUniversalStore()},computed:{blurbs_Sorted(){let t=[];return this.universalStore&&this.blurbs.forEach(e=>{let i=this.universalStore.getBlurb(e.id);i&&t.push(i)}),He([...t],"position")}},methods:{reset:F7,onAddBlurb:U7,addGoalTimePair:B7,removeGoalTimePair:z7,addGoalTimePairTodo:j7,removeGoalTimePairTodo:H7,editBlurb:G7,cancelBlurb:Y7,saveBlurb:q7,onTextareaBlur:K7,getDateString(t){if(t){let e=new Date(t);return Vw(e)}return""}}};function F7(){this.selectedID=void 0,this.title=void 0,this.text=void 0,this.goalTimePairIDs=[],this.goalTimePairTodoIDs=[]}function B7(t){var e=this.goalTimePairIDs.findIndex(i=>i==t.target.value);e==-1&&this.goalTimePairIDs.push(t.target.value),t.target.value=void 0}function z7(t){let e=this.goalTimePairIDs.findIndex(i=>i==t);this.goalTimePairIDs.splice(e,1)}function j7(t){var e=this.goalTimePairTodoIDs.findIndex(i=>i==t.target.value);e==-1&&this.goalTimePairTodoIDs.push(t.target.value),t.target.value=void 0}function H7(t){let e=this.goalTimePairTodoIDs.findIndex(i=>i==t);this.goalTimePairTodoIDs.splice(e,1)}function U7(){this.reset(),this.showTextarea=!0}function G7(t){this.selectedID=t;let e=this.blurbs_Sorted.findIndex(i=>i.id==t);if(e>-1){let i=this.blurbs_Sorted[e];this.text=i.text,this.title=i.title,this.goalTimePairIDs=[...i.goalTimePairs.map(s=>s.id)],this.goalTimePairTodoIDs=[...i.goalTimePairTodos.map(s=>s.id)],this.showTextarea=!0,this.$refs.textbox.focus()}}function Y7(){this.reset(),this.$refs.textbox.blur(),this.showButtons=!1,this.showTextarea=!1}function q7(){let t={id:void 0,title:this.title,text:this.text,datetime:this.selectedID?void 0:new Date,goalTimePairIDs:this.goalTimePairIDs,goalTimePairTodoIDs:this.goalTimePairTodoIDs};this.selectedID?(t.id=this.selectedID,this.$emit("saveBlurb",t)):this.$emit("addBlurb",t),this.cancelBlurb()}function K7(){this.text||(this.showButtons=!1,this.showTextarea=!1,this.selectedID=void 0)}const J7={class:"blurb-form-control d-flex flex-column"},Q7={class:"d-flex flex-row justify-content-between"},Z7={class:"d-flex flex-row"},X7={class:"form-head text-start"},e9={key:0,class:"caret mt-auto mb-auto me-2",src:kr,width:"5",height:"8"},t9={key:1,class:"caret mt-auto mb-auto me-2",src:Ta,width:"8",height:"5"},i9={key:0,class:"d-flex flex-column"},s9={key:0,class:"d-flex flex-column gap-2"},n9=["placeholder"],r9={class:"d-flex flex-column mt-2"},o9={class:"d-flex flex-column"},a9={class:"goal-time-pair d-flex justify-content-between"},l9=["onClick"],d9={class:"d-flex flex-column mt-2"},u9={class:"d-flex flex-column"},c9={class:"goal-time-pair d-flex justify-content-between"},h9=["onClick"],f9={key:1,class:"d-flex flex-row mt-1 justify-content-end"},m9={class:"d-flex flex-column"},p9=["onClick"],g9={class:"text-start"},v9={key:0,class:"goal-timepair d-flex flex-row gap-2"},y9={key:1,class:"goal-timepair-todos d-flex flex-row gap-2"};function _9(t,e,i,s,r,n){return m(),p("div",J7,[d("div",{class:"header d-flex flex-column",onClick:e[1]||(e[1]=o=>t.isShown=!t.isShown),onMouseover:e[2]||(e[2]=o=>t.hovered=!0)},[d("div",Q7,[d("div",Z7,[d("span",X7,k(i.header),1),d("img",{class:"icon-button ms-1 mt-auto mb-auto",src:Gs,width:14,height:14,onClick:e[0]||(e[0]=ye((...o)=>n.onAddBlurb&&n.onAddBlurb(...o),["stop"]))})]),t.isShown?x("",!0):(m(),p("img",e9)),t.isShown?(m(),p("img",t9)):x("",!0)]),e[13]||(e[13]=d("hr",null,null,-1))],32),t.isShown?(m(),p("div",i9,[t.showTextarea?(m(),p("div",s9,[i.showTitle?X((m(),p("input",{key:0,class:"textbox text",type:"text",placeholder:"Title","onUpdate:modelValue":e[3]||(e[3]=o=>t.title=o),spellcheck:"true"},null,512)),[[Ae,t.title,void 0,{lazy:!0,trim:!0}]]):x("",!0),X(d("textarea",{class:"textarea",ref:"textbox","onUpdate:modelValue":e[4]||(e[4]=o=>t.text=o),onKeyup:[e[5]||(e[5]=Ot(ye((...o)=>n.saveBlurb&&n.saveBlurb(...o),["ctrl"]),["enter"])),e[6]||(e[6]=Ot(ye((...o)=>n.cancelBlurb&&n.cancelBlurb(...o),["stop"]),["esc"]))],placeholder:i.placeholder,spellcheck:"true",onFocus:e[7]||(e[7]=o=>t.showButtons=!0),onBlur:e[8]||(e[8]=(...o)=>n.onTextareaBlur&&n.onTextareaBlur(...o))},"                ",40,n9),[[Ae,t.text,void 0,{trim:!0}]]),d("div",r9,[e[14]||(e[14]=d("span",{class:"label text-start"},"Goal-TimePair IDs",-1)),d("input",{class:"textbox",type:"number",min:"1",onKeyup:e[9]||(e[9]=Ot((...o)=>n.addGoalTimePair&&n.addGoalTimePair(...o),["enter"])),spellcheck:"true"},null,32),d("div",o9,[(m(!0),p(L,null,G(t.goalTimePairIDs,o=>(m(),p("div",{key:o,class:"d-flex flex-column"},[d("div",a9,[d("span",null,k(o),1),d("button",{class:"btn-close mt-auto mb-auto",type:"button","aria-label":"close",onClick:ye(a=>n.removeGoalTimePair(o),["stop"])},null,8,l9)])]))),128))])]),d("div",d9,[e[15]||(e[15]=d("span",{class:"label text-start"},"Goal-TimePair-Todo IDs",-1)),d("input",{class:"textbox",type:"number",min:"1",onKeyup:e[10]||(e[10]=Ot((...o)=>n.addGoalTimePairTodo&&n.addGoalTimePairTodo(...o),["enter"])),spellcheck:"true"},null,32),d("div",u9,[(m(!0),p(L,null,G(t.goalTimePairTodoIDs,o=>(m(),p("div",{key:o,class:"d-flex flex-column"},[d("div",c9,[d("span",null,k(o),1),d("button",{class:"btn-close mt-auto mb-auto",type:"button","aria-label":"close",onClick:ye(a=>n.removeGoalTimePairTodo(o),["stop"])},null,8,h9)])]))),128))])]),t.showButtons?(m(),p("div",f9,[d("button",{type:"button",onClick:e[11]||(e[11]=(...o)=>n.saveBlurb&&n.saveBlurb(...o))},"Save"),d("button",{class:"ms-1",type:"button",onClick:e[12]||(e[12]=(...o)=>n.cancelBlurb&&n.cancelBlurb(...o))},"Cancel")])):x("",!0)])):x("",!0),d("div",m9,[(m(!0),p(L,null,G(n.blurbs_Sorted,o=>(m(),p("div",{key:o.id,class:F(["blurb cursor-default d-flex flex-column mt-2",{selected:o.id==t.selectedID}]),onClick:a=>n.editBlurb(o.id)},[d("span",g9,k(o.text),1),o.goalTimePairs.length>0?(m(),p("div",v9,[(m(!0),p(L,null,G(o.goalTimePairs.map(a=>a.id),a=>(m(),p("span",{key:a},k(a),1))),128))])):x("",!0),o.goalTimePairTodos.length>0?(m(),p("div",y9,[(m(!0),p(L,null,G(o.goalTimePairTodos.map(a=>a.id),a=>(m(),p("span",{key:a},k(a),1))),128))])):x("",!0)],10,p9))),128))])])):x("",!0)])}const FS=Q(W7,[["render",_9],["__scopeId","data-v-825cd90f"]]),b9={name:"BriefingBlurb",components:{TimeframeRadio:yo,MetricSelector:qw,BlurbFormControl:FS},props:{idTimeframe:{type:Number,default:()=>55}},data:function(){return{plannerStore:void 0,universalStore:void 0,METRIC:fe(rr),BLURBTYPE:fe(ar),selectedMetrics:{physical:!1,emotional:!1,mental:!1,social:!1,financial:!1},isShown:!1}},created:async function(){let t=await K(()=>Promise.resolve().then(()=>bo),void 0);this.universalStore=t.useUniversalStore();let e=await K(()=>Promise.resolve().then(()=>ht),void 0);this.plannerStore=e.usePlannerStore(),this.universalStore.getBriefingBlurbs(this.idTimeframe,this.selectedDate)},computed:{selectedDate(){return this.plannerStore?this.plannerStore.selectedDate:Tt()},blurbs(){let t=[];return this.universalStore&&(t=this.universalStore.blurbs),t=t.filter(e=>e.idType==ar.BRIEFING),t=t.filter(e=>+new Date(e.datetime)==+this.selectedDate),t},metrics(){return[{id:this.METRIC.PHYSICAL,title:"Physical",prop:this.physicalBlurbs},{id:this.METRIC.SOCIAL,title:"Social",prop:this.socialBlurbs},{id:this.METRIC.MENTAL,title:"Mental",prop:this.mentalBlurbs},{id:this.METRIC.EMOTIONAL,title:"Emotional",prop:this.emotionalBlurbs},{id:this.METRIC.FINANCIAL,title:"Financial",prop:this.financialBlurbs}]},physicalBlurbs(){return this.blurbs.filter(e=>e.idMetric==rr.PHYSICAL)},socialBlurbs(){return this.blurbs.filter(e=>e.idMetric==rr.SOCIAL)},mentalBlurbs(){return this.blurbs.filter(e=>e.idMetric==rr.MENTAL)},emotionalBlurbs(){return this.blurbs.filter(e=>e.idMetric==rr.EMOTIONAL)},financialBlurbs(){return this.blurbs.filter(e=>e.idMetric==rr.FINANCIAL)},nextPostition(){let t=this.physicalBlurbs.length;return t>0?this.physicalBlurbs[t-1].position+1:1},nextTempID(){let t=He([...this.physicalBlurbs],"id");return t.length>0&&t[0].id<0?t[0].id-1:-1}},methods:{addBlurb(t,e){this.universalStore.addBriefingBlurb(t.text,this.selectedDate,ar.BRIEFING,e,this.idTimeframe)},saveBlurb(t){let e=this.blurbs.findIndex(i=>i.id==t.id);if(e>-1){let i=this.blurbs[e];i.text=t.text}}},watch:{idTimeframe(t){this.universalStore.getBriefingBlurbs(t,this.selectedDate)}}},w9={class:"briefing-blurb d-flex flex-column p-2"},S9={key:0,class:"d-flex flex-column"};function T9(t,e,i,s,r,n){const o=$("MetricSelector"),a=$("BlurbFormControl");return m(),p("div",w9,[d("h4",{class:"text-start",onClick:e[0]||(e[0]=l=>t.isShown=!t.isShown)},"Blurbs"),t.isShown?(m(),p("div",S9,[H(o,{class:"metric-selector mt-1",selected:t.selectedMetrics},null,8,["selected"]),(m(!0),p(L,null,G(n.metrics,l=>(m(),ie(a,{key:l.id,header:l.title,placeholder:`Click to add ${l.title} blurb`,blurbs:l.prop,class:"mt-2",onAddBlurb:c=>n.addBlurb(c,l.id),onSaveBlurb:n.saveBlurb},null,8,["header","placeholder","blurbs","onAddBlurb","onSaveBlurb"]))),128))])):x("",!0)])}const x9=Q(b9,[["render",T9],["__scopeId","data-v-f78881e6"]]),I9={name:"BriefingPanel",components:{ItemPanelNavbar:Yl,TimeframeRadio:yo,BriefingGoals:V7,BriefingBlurb:x9},props:{showHead:{type:Boolean,default:!0}},data:function(){return{plannerStore:void 0,goalStore:void 0,idTimeframe:43,timeframe:"day",timeframes:fe(_r)}},created:async function(){let t=await K(()=>Promise.resolve().then(()=>Ni),void 0);this.goalStore=t.useGoalStore();let e=await K(()=>Promise.resolve().then(()=>ht),void 0);this.plannerStore=e.usePlannerStore()},computed:{selectedDate(){return this.plannerStore?this.plannerStore.selectedDate:Tt()},goalIDs(){return this.goalStore?this.goalStore.getGoalsInTimeframe(this.idTimeframe,this.selectedDate).map(e=>e.id):[]}},methods:{selectTimeframe:E9}};function E9(t){let e=this.timeframes.findIndex(s=>s.text.toLowerCase()==t.toLowerCase()),i=this.timeframes[e];this.idTimeframe=i.id,this.timeframe=t}const D9={class:"row g-0 h-100"},k9={class:"col h-100 d-flex flex-column"},C9={class:"briefing-panel d-flex flex-column flex-grow-1 overflow-hidden"},P9={class:"body d-flex flex-column flex-grow-1 overflow-scroll"};function A9(t,e,i,s,r,n){const o=$("ItemPanelNavbar"),a=$("TimeframeRadio"),l=$("BriefingGoals"),c=$("BriefingBlurb");return m(),p("div",D9,[d("div",k9,[d("div",C9,[X(H(o,null,null,512),[[it,i.showHead]]),d("div",P9,[H(a,{class:"sticky-top",timeframe:t.timeframe,isToggle:!1,container:"briefing-panel",onTimeframeSelected:n.selectTimeframe},null,8,["timeframe","onTimeframeSelected"]),H(l,{idTimeframe:t.idTimeframe,goalIDs:n.goalIDs},null,8,["idTimeframe","goalIDs"]),H(c,{idTimeframe:t.idTimeframe},null,8,["idTimeframe"])])])])])}const R9=Q(I9,[["render",A9]]),M9="/icon/briefing2.png",O9={name:"ItemPanel",components:{DashboardPanel:jw,BriefingPanel:R9,MetricPanel:Hw,GoalPanel:Yw,TodoPanel:Zw,RoutinePanel:Xw,TaskRoutinePanel:eS,EventPanel:sS,InventoryPanel:CS,NutritionPanel:RS,WorkoutPanel:WS},data:function(){return{appStore:void 0}},created:function(){this.appStore=bt();let t=localStorage.getItem("selected-item-panel");t?(t=t=="undefined"?void 0:t,this.$emit("setSelectedPanel",t)):localStorage.setItem("selected-item-panel",this.selectedPanel)},computed:{selectedPanel(){return this.appStore?this.appStore.itemPanel.selected:"todo"}},methods:{setSelectedPanel:$9},watch:{selectedPanel(t){localStorage.setItem("selected-item-panel",t)}}};function $9(t){this.selectedPanel!=t?this.appStore.setSelectedItemPanel(t):this.appStore.setSelectedItemPanel(void 0)}const N9={class:"item-panel-wrapper row g-0"},L9={class:"col h-100",style:{"border-left":"1px solid rgba(220, 220, 220, .5)"}},V9={style:{width:"56px","padding-left":"8px",overflow:"hidden"}},W9={class:"d-flex flex-row mb-1"},F9={key:0},B9={class:"d-flex flex-row mb-1"},z9={key:0},j9={class:"d-flex flex-row mb-1"},H9={key:0},U9={class:"d-flex flex-row mb-1"},G9={key:0},Y9={class:"d-flex flex-row mb-1"},q9={key:0},K9={class:"d-flex flex-row mb-1"},J9={key:0},Q9={class:"d-flex flex-row mb-1"},Z9={key:0},X9={class:"d-flex flex-row mb-1"},eq={key:0},tq={class:"d-flex flex-row mb-1"},iq={key:0},sq={class:"col-auto h-100"};function nq(t,e,i,s,r,n){const o=$("DashboardPanel"),a=$("BriefingPanel"),l=$("MetricPanel"),c=$("GoalPanel"),f=$("TodoPanel"),v=$("RoutinePanel"),S=$("TaskRoutinePanel"),I=$("EventPanel"),C=$("InventoryPanel"),D=$("NutritionPanel"),J=$("WorkoutPanel");return m(),p("div",N9,[d("div",L9,[e[18]||(e[18]=d("div",{style:{width:"100%",height:"64px","border-bottom":"1px solid rgba(220, 220, 220, .5)"}},null,-1)),d("div",V9,[d("div",W9,[d("img",{class:F(["dashboard",[{active:n.selectedPanel=="dashboard"}]]),src:Iw,width:"40",height:"40",style:{"margin-top":"8px"},onClick:e[0]||(e[0]=V=>n.setSelectedPanel("dashboard"))},null,2),n.selectedPanel=="dashboard"?(m(),p("div",F9,e[9]||(e[9]=[d("div",{style:{width:"12px",height:"40px","background-color":"#4285F4","margin-left":"3px","margin-top":"8px","border-radius":"4px"}},null,-1)]))):x("",!0)]),d("div",B9,[d("img",{class:F(["briefing",[{active:n.selectedPanel=="briefing"}]]),src:M9,width:"40",height:"40",onClick:e[1]||(e[1]=V=>n.setSelectedPanel("briefing"))},null,2),n.selectedPanel=="briefing"?(m(),p("div",z9,e[10]||(e[10]=[d("div",{style:{width:"12px",height:"40px","background-color":"#4285F4","margin-left":"3px","border-radius":"4px"}},null,-1)]))):x("",!0)]),d("div",j9,[d("img",{class:F(["todo",[{active:n.selectedPanel=="todo"}]]),src:ql,width:"40",height:"40",onClick:e[2]||(e[2]=V=>n.setSelectedPanel("todo"))},null,2),n.selectedPanel=="todo"?(m(),p("div",H9,e[11]||(e[11]=[d("div",{style:{width:"12px",height:"40px","background-color":"#4285F4","margin-left":"3px","border-radius":"4px"}},null,-1)]))):x("",!0)]),d("div",U9,[d("img",{class:F(["goal",[{active:n.selectedPanel=="goal"}]]),src:Tl,width:"40",height:"40",onClick:e[3]||(e[3]=V=>n.setSelectedPanel("goal"))},null,2),n.selectedPanel=="goal"?(m(),p("div",G9,e[12]||(e[12]=[d("div",{style:{width:"12px",height:"40px","background-color":"#9013FE","margin-left":"3px","border-radius":"4px"}},null,-1)]))):x("",!0)]),d("div",Y9,[d("img",{class:F(["routine",[{active:n.selectedPanel=="routine"}]]),src:Ew,width:"40",height:"40",onClick:e[4]||(e[4]=V=>n.setSelectedPanel("routine"))},null,2),n.selectedPanel=="routine"?(m(),p("div",q9,e[13]||(e[13]=[d("div",{style:{width:"12px",height:"40px","background-color":"#4C6EF5","margin-left":"3px","border-radius":"4px"}},null,-1)]))):x("",!0)]),d("div",K9,[d("img",{class:F(["event",[{active:n.selectedPanel=="event"}]]),src:Dw,width:"40",height:"40",onClick:e[5]||(e[5]=V=>n.setSelectedPanel("event"))},null,2),n.selectedPanel=="event"?(m(),p("div",J9,e[14]||(e[14]=[d("div",{style:{width:"12px",height:"40px","background-color":"#F4511E","margin-left":"3px","border-radius":"4px"}},null,-1)]))):x("",!0)]),d("div",Q9,[d("img",{class:F(["inventory",[{active:n.selectedPanel=="inventory"}]]),src:kw,width:"40",height:"40",onClick:e[6]||(e[6]=V=>n.setSelectedPanel("inventory"))},null,2),n.selectedPanel=="inventory"?(m(),p("div",Z9,e[15]||(e[15]=[d("div",{style:{width:"12px",height:"40px","background-color":"#3B99FC","margin-left":"3px","border-radius":"4px"}},null,-1)]))):x("",!0)]),d("div",X9,[d("img",{class:F(["nutrition",[{active:n.selectedPanel=="nutrition"}]]),src:Cw,width:"40",height:"40",onClick:e[7]||(e[7]=V=>n.setSelectedPanel("nutrition"))},null,2),n.selectedPanel=="nutrition"?(m(),p("div",eq,e[16]||(e[16]=[d("div",{style:{width:"12px",height:"40px","background-color":"#F4511E","margin-left":"3px","border-radius":"4px"}},null,-1)]))):x("",!0)]),d("div",tq,[d("img",{class:F(["workout",[{active:n.selectedPanel=="workout"}]]),src:Pw,width:"40",height:"40",onClick:e[8]||(e[8]=V=>n.setSelectedPanel("workout"))},null,2),n.selectedPanel=="workout"?(m(),p("div",iq,e[17]||(e[17]=[d("div",{style:{width:"12px",height:"40px","background-color":"#F4511E","margin-left":"3px","border-radius":"4px"}},null,-1)]))):x("",!0)])])]),d("div",sq,[X(H(o,{class:"item-panel"},null,512),[[it,n.selectedPanel=="dashboard"]]),X(H(a,{class:"item-panel"},null,512),[[it,n.selectedPanel=="briefing"]]),X(H(l,{class:"item-panel"},null,512),[[it,n.selectedPanel=="metric"]]),X(H(c,{class:"item-panel"},null,512),[[it,n.selectedPanel=="goal"]]),X(H(f,{class:"item-panel"},null,512),[[it,n.selectedPanel=="todo"]]),X(H(v,{class:"item-panel"},null,512),[[it,n.selectedPanel=="routine"]]),X(H(S,{class:"item-panel"},null,512),[[it,n.selectedPanel=="task-routine"]]),X(H(I,{class:"item-panel"},null,512),[[it,n.selectedPanel=="event"]]),X(H(C,{class:"item-panel"},null,512),[[it,n.selectedPanel=="inventory"]]),X(H(D,{class:"item-panel"},null,512),[[it,n.selectedPanel=="nutrition"]]),X(H(J,{class:"item-panel"},null,512),[[it,n.selectedPanel=="workout"]])])])}const BS=Q(O9,[["render",nq],["__scopeId","data-v-62f8d754"]]),rq={name:"CalendarWeekMobile",components:{},props:{},data:function(){return{plannerStore:void 0}},created:function(){this.plannerStore=bn()},computed:{initialDate(){return this.selectedDate},daysOfWeek(){let t=ei(this.initialDate),e=[this.getDayObject(t)];for(let i=1;i<7;i++)t=xs(t),e.push(this.getDayObject(t));return e},selectedDate(){return this.plannerStore?this.plannerStore.selectedDate:$t()},currentDate(){return this.plannerStore?Ei(this.plannerStore.currentTime):$t()}},methods:{getDayObject(t){return{dateObject:t,dow:$w(t),date:`${Nw(t)} ${Ow(t)}`}},selectDate(t){this.plannerStore.selectDate(t)},getPointInTime(t){let e=ft(this.currentDate);if(+t.dateObject<+this.currentDate)return"past";if(+t.dateObject==+this.currentDate)return"present";if(+t.dateObject>+e)return"future"},isSelected(t){return+t.dateObject==+this.selectedDate}}},oq={class:"week-toolbar d-flex flex-row flex-grow-1 justify-content-between"},aq=["onClick"],lq={class:"day"},dq={class:"date"};function uq(t,e,i,s,r,n){return m(),p("div",oq,[(m(!0),p(L,null,G(n.daysOfWeek,(o,a)=>(m(),p("div",{key:a,class:F(["dow d-flex flex-column pt-1 pb-1",[n.getPointInTime(o),{selected:n.isSelected(o)}]]),onClick:l=>n.selectDate(o.dateObject)},[d("span",lq,k(o.dow),1),d("span",dq,k(o.date),1)],10,aq))),128))])}const cq=Q(rq,[["render",uq],["__scopeId","data-v-c3bb9d62"]]),hq={name:"DayPillMobile",props:{day:Object},created:async function(){let t=await K(()=>Promise.resolve().then(()=>Et),void 0);this.iterationStore=t.useIterationStore();let e=await K(()=>Promise.resolve().then(()=>ht),void 0);this.plannerStore=e.usePlannerStore()},data:function(){return{plannerStore:void 0,iterationStore:void 0}},computed:{date(){return new Date(this.day.date)},selectedDate(){return this.plannerStore?this.plannerStore.selectedDate:Tt()},isSelected(){return+this.date==+this.selectedDate}},methods:{selectDate:fq}};function fq(t){this.plannerStore.selectDate(t)}function mq(t,e,i,s,r,n){return m(),p("div",{class:F(["day pill d-flex flex-column position-relative",[i.day.pointInTime,n.isSelected?"selected":""]]),onClick:e[0]||(e[0]=o=>n.selectDate(i.day.date))},[d("span",null,k(i.day.day),1),e[1]||(e[1]=d("span",{class:"status position-absolute"},null,-1))],2)}const pq=Q(hq,[["render",mq],["__scopeId","data-v-0e8341b0"]]),gq=[{id:1,text:"Sunday",altText:"S"},{id:2,text:"Monday",altText:"M"},{id:3,text:"Tuesday",altText:"T"},{id:4,text:"Wednesday",altText:"W"},{id:5,text:"Thursday",altText:"T"},{id:6,text:"Friday",altText:"F"},{id:7,text:"Saturday",altText:"S"}],vq={components:{IconButton:po,DayPillMobile:pq},name:"CalendarMobileMonth",props:{},data:function(){return{plannerStore:void 0,initialDate:void 0,weeks:[],days:[],month:"",year:3e3,daysOfWeek:gq,date:null,date_and_time:Ne,today:Tt(),count:1}},created:async function(){let t=await K(()=>Promise.resolve().then(()=>ht),void 0);this.plannerStore=t.usePlannerStore(),this.initialDate=this.plannerStore.selectedDate,this.initCalendar()},computed:{date1(){return new Date(this.initialDate)},firstDate(){let t=ti(this.date1);return Il(t)},lastDate(){let t=na(this.date1,this.count-1);return t=fi(t),li(t)},firstSunday(){let t=ti(this.initialDate);return Il(t)},lastSaturday(){return xs(this.firstSunday,this.rows*7-1)},rows(){return zw(this.firstDate,this.lastDate)/7}},methods:{initCalendar:yq,refreshCalendar:_q,month_long:_w,year_long:yw,goToday:bq,addMonth:na,subtractMonth:bm,previous:wq,next:Sq},watch:{initialDate(){this.refreshCalendar()}}};function yq(){this.days=[],this.month=this.month_long(this.date1),this.year=this.year_long(this.date1),this.weeks=[];let t=this.firstDate;for(let e=0;e<this.rows;e++){let i={days:[]};for(let s=0;s<7;s++){let r={dow:this.date_and_time.format(t,"ddd"),day:t.getDate(),date:new Date(t.getTime()).toLocaleString(),tasks:[],iterationCompletion:{status:"pending"}};de(t).month()<de(this.date1).month()?r.pointInTime="previous-month":this.today.getTime()==t.getTime()?r.pointInTime="present":de(t).month()>de(this.date1).month()&&(r.pointInTime="next-month"),t=de(t).add(1,"day").toDate(),i.days.push(r)}this.weeks.push(i)}}function _q(){this.initCalendar()}function bq(){this.plannerStore.selectDate(this.today),this.initialDate=this.plannerStore.selectedDate}function wq(){this.initialDate=bm(this.initialDate)}function Sq(){this.initialDate=na(this.initialDate)}const Tq={class:"thumbnail-calendar d-flex flex-column"},xq={class:"d-flex flex-row justify-content-between"},Iq={class:"d-flex flex-row"},Eq={class:"month"},Dq={class:"year"},kq={class:"buttons d-flex flex-row"},Cq={class:"d-flex flex-row"};function Pq(t,e,i,s,r,n){const o=$("icon-button"),a=$("DayPillMobile");return m(),p("div",Tq,[d("div",xq,[d("div",Iq,[d("div",Eq,k(t.month),1),d("div",Dq,k(t.year),1)]),d("div",kq,[H(o,{src:"icon/previous.png",width:22,height:22,onClicked:n.previous},null,8,["onClicked"]),d("button",{class:"today",type:"button",onClick:e[0]||(e[0]=(...l)=>n.goToday&&n.goToday(...l))},"Today"),H(o,{src:"icon/next.png",width:22,height:22,onClicked:n.next},null,8,["onClicked"])])]),d("div",Cq,[(m(!0),p(L,null,G(t.daysOfWeek,l=>(m(),p("div",{key:l.id,class:"dow pill"},k(l.altText),1))),128))]),(m(!0),p(L,null,G(t.weeks,(l,c)=>(m(),p("div",{key:c,class:"week d-flex flex-row"},[(m(!0),p(L,null,G(l.days,(f,v)=>(m(),ie(a,{key:v,day:f,date:f.date},null,8,["day","date"]))),128))]))),128))])}const Aq=Q(vq,[["render",Pq],["__scopeId","data-v-ef5059e1"]]),Rq={name:"CalendarMobile",components:{CalendarWeekMobile:cq,CalendarMonthMobile:Aq},props:{},data:function(){return{appStore:void 0,CALENDAR_TYPES:{...tn}}},created:function(){this.appStore=bt()},computed:{calendarType(){return this.appStore?this.appStore.calendarMobile.type:void 0}},methods:{}};function Mq(t,e,i,s,r,n){const o=$("CalendarWeekMobile"),a=$("CalendarMonthMobile");return m(),p("div",{class:F(["calendar-mobile",{week:n.calendarType==t.CALENDAR_TYPES.WEEK,month:n.calendarType==t.CALENDAR_TYPES.MONTH}])},[n.calendarType==t.CALENDAR_TYPES.WEEK?(m(),ie(o,{key:0})):x("",!0),n.calendarType==t.CALENDAR_TYPES.MONTH?(m(),ie(a,{key:1})):x("",!0)],2)}const Oq=Q(Rq,[["render",Mq],["__scopeId","data-v-7898991b"]]),$q={name:"AppMobile",components:{MobileNavbar:LA,CalendarMobile:Oq,ItemPanelTabBar:sR,MobileItemTabPanel:C7,ItemPanel:BS},data:function(){return{appStore:void 0,initialDate:new Date,selectedDate:Tt().toLocaleString()}},created:async function(){this.appStore=bt()},computed:{showTabBar(){return this.appStore?this.appStore.isTabBarShown:!0},showCalendar(){return this.appStore?this.appStore.calendarMobile.isShown:!1}},methods:{},watch:{}},Nq={class:"navbar-mobile"},Lq={class:"item-panel-tabbar"},Vq={class:"tab-panel d-flex"};function Wq(t,e,i,s,r,n){const o=$("MobileNavbar"),a=$("CalendarMobile"),l=$("ItemPanelTabBar"),c=$("MobileItemTabPanel"),f=$("ItemPanel");return m(),p("div",{class:F(["app-mobile grid-container-mobile",[{"show-tab-bar":n.showTabBar}]])},[d("div",Nq,[H(o)]),d("div",{class:F(["calendar",[{empty:!n.showCalendar}]])},[H(a)],2),d("div",Lq,[H(l)]),d("div",Vq,[H(c)]),X(H(f,{class:"item-panel"},null,512),[[it,!1]])],2)}const Fq=Q($q,[["render",Wq],["__scopeId","data-v-336c0bb3"]]);let Bq=[{id:1,text:"Week",view:"week"},{id:2,text:"Month",view:"month"}],zq=[{id:1,text:"One"},{id:2,text:"Two"},{id:3,text:"Three"},{id:4,text:"Four"},{id:5,text:"Five"},{id:7,text:"Week"}];const jq={name:"PlannerNavbar",components:{IconButton:po},data:function(){return{appStore:void 0,plannerStore:void 0,views:Bq,weekViews:zq}},created:async function(){this.appStore=bt();let t=await K(()=>Promise.resolve().then(()=>ht),void 0);this.plannerStore=t.usePlannerStore()},computed:{selectedDate(){return this.plannerStore?this.plannerStore.selectedDate:Tt()},selectedPage(){return this.appStore?this.appStore.navbar.selectedPage:"planner"},selectedView(){return this.appStore?this.appStore.planner.selectedView:"week"},view:{get(){return this.views.find(t=>t.view==this.selectedView).id},set(t){let e=this.views.find(i=>i.id==t).view;this.appStore.selectPlannerView(e)}},dayCount:{get(){return this.appStore?this.appStore.planner.dayCount:7},set(t){this.appStore.setPlannerDayCount(t)}}},methods:{previous(){this.plannerStore.selectDate(AP(this.selectedDate,this.dayCount))},next(){this.plannerStore.selectDate(bw(this.selectedDate,this.dayCount))},selectPage(t){this.appStore.selectPage(t)},toggleLeftPanel(){this.appStore.toggleLeftPanel()},selectPlanner(){this.$router.push("/planner")},selectItems(){this.$router.push("/items")},selectPhysical(){this.$router.push("/physical-view")},selectPhysical(){this.$router.push("/emotional-view")}}},Hq={id:"navbar",class:"navbar navbar-expand-sm navbar-light"},Uq={class:"container-fluid d-flex flex-row"},Gq={class:"d-flex flex-row"},Yq={class:"d-flex flex-row"},qq={class:"d-flex flex-row"},Kq={key:0,class:"d-flex flex-row me-5"},Jq=["value"],Qq=["value"];function Zq(t,e,i,s,r,n){const o=$("IconButton");return m(),p("nav",Hq,[d("div",Uq,[d("div",Gq,[d("div",Yq,[H(o,{class:"icon menu-button float-left",src:"/icon/menu-button.png",width:48,height:48}),d("img",{class:"icon calendar-button float-left",src:Tw,width:36,height:36,onClick:e[0]||(e[0]=(...a)=>n.toggleLeftPanel&&n.toggleLeftPanel(...a))}),e[8]||(e[8]=d("a",{class:"navbar-brand float-left",href:"#"},"Inventory Planner",-1))]),d("div",qq,[d("button",{class:"btn btn-sm",type:"button",onClick:e[1]||(e[1]=a=>n.selectPage("planner"))},"Planner"),d("button",{class:"btn btn-sm",type:"button",onClick:e[2]||(e[2]=a=>n.selectPage("items"))},"Items"),d("button",{class:"btn btn-sm",type:"button",onClick:e[3]||(e[3]=a=>n.selectPage("timeline"))},"Timeline"),d("button",{class:"btn btn-sm",type:"button",onClick:e[4]||(e[4]=a=>n.selectPage("physical"))},"Physical"),d("button",{class:"btn btn-sm",type:"button",onClick:e[5]||(e[5]=a=>n.selectPage("emotional"))},"Emotional")])]),n.selectedPage=="planner"?(m(),p("div",Kq,[H(o,{class:"arrow",src:"/icon/previous.png",width:24,height:24,onClicked:n.previous},null,8,["onClicked"]),H(o,{class:"arrow",src:"/icon/next.png",width:24,height:24,onClicked:n.next},null,8,["onClicked"]),X(d("select",{"onUpdate:modelValue":e[6]||(e[6]=a=>n.view=a)},[(m(!0),p(L,null,G(t.views,a=>(m(),p("option",{key:a.id,value:a.id},k(a.text),9,Jq))),128))],512),[[Ts,n.view]]),n.view==1?X((m(),p("select",{key:0,"onUpdate:modelValue":e[7]||(e[7]=a=>n.dayCount=a)},[(m(!0),p(L,null,G(t.weekViews,a=>(m(),p("option",{key:a.id,value:a.id},k(a.text),9,Qq))),128))],512)),[[Ts,n.dayCount]]):x("",!0)])):x("",!0)])])}const Xq=Q(jq,[["render",Zq],["__scopeId","data-v-4629a47a"]]),eK={props:{date:Object,rootDate:Object},created:async function(){let t=await K(()=>Promise.resolve().then(()=>ht),void 0);this.plannerStore=t.usePlannerStore();let e=await K(()=>Promise.resolve().then(()=>Et),void 0);this.iterationStore=e.useIterationStore()},data:function(){return{plannerStore:void 0,iterationStore:void 0}},computed:{selectedDate(){return this.plannerStore?this.plannerStore.selectedDate:Tt()},today(){return this.plannerStore?wl(this.plannerStore.currentTime):Tt()},isSelected(){return+this.date==+this.selectedDate},pointInTime(){return this.date.getMonth()<this.rootDate.getMonth()?"previous-month":+this.today==+this.date?"present":de(this.date).month()>de(this.rootDate).month()?"next-month":""}},methods:{selectDate:tK,status:iK,onDrop:sK}};function tK(t){this.plannerStore.selectDate(t)}function iK(t){return new Date(t.datetime).getTime()>Tt().getTime()?"pending":t.percentComplete>=90?"success":t.percentComplete>=50&&t.percentComplete<90?"close":t.percentComplete<50?"fail":""}function sK(t){t.preventDefault();let e=t.dataTransfer.getData("text");e=JSON.parse(e),e.type&&e.type=="task"&&(e.parentType&&e.parentType=="routineEvent"?console.log("this.unmapTaskFromRoutineEvent(data.id, data.parentID, new Date(this.day.date), null, null, this.$apollo)"):this.iterationStore.rescheduleIteration(e.id,new Date(this.date),new Date(this.date)))}function nK(t,e,i,s,r,n){return m(),p("div",{class:F(["day pill d-flex flex-column position-relative",[n.pointInTime,n.isSelected?"selected":""]]),onClick:e[0]||(e[0]=o=>n.selectDate(i.date)),onDrop:e[1]||(e[1]=o=>n.onDrop(o)),onDragover:e[2]||(e[2]=ye(()=>{},["prevent"])),onDragenter:e[3]||(e[3]=ye(()=>{},["prevent"]))},[d("span",null,k(i.date.getDate()),1),e[4]||(e[4]=d("span",{class:"status position-absolute"},null,-1))],34)}const rK=Q(eK,[["render",nK],["__scopeId","data-v-8c689830"]]),oK=[{id:1,text:"Sunday",altText:"S"},{id:2,text:"Monday",altText:"M"},{id:3,text:"Tuesday",altText:"T"},{id:4,text:"Wednesday",altText:"W"},{id:5,text:"Thursday",altText:"T"},{id:6,text:"Friday",altText:"F"},{id:7,text:"Saturday",altText:"S"}],aK={components:{IconButton:po,DayPill:rK},name:"CalendarMonth",props:{initialDate:Date},data:function(){return{plannerStore:void 0,indexDate:void 0,weeks:[],days:[],month:"",year:3e3,daysOfWeek:oK,date:null,date_and_time:Ne,today:Tt(),count:1}},created:async function(){let t=await K(()=>Promise.resolve().then(()=>ht),void 0);this.plannerStore=t.usePlannerStore(),this.indexDate=this.initialDate,this.initCalendar()},computed:{date1(){return new Date(this.initialDate)},firstDate(){let t=ti(this.date1);return Il(t)},lastDate(){let t=na(this.date1,this.count-1);return t=fi(t),li(t)},firstSunday(){let t=ti(this.initialDate);return Il(t)},lastSaturday(){return xs(this.firstSunday,this.rows*7-1)},rows(){return zw(this.firstDate,this.lastDate)/7}},methods:{initCalendar:lK,refreshCalendar:dK,month_long:_w,year_long:yw,goToday:uK,addMonth:na,subtractMonth:bm},watch:{initialDate(){this.initCalendar()}}};function lK(){this.days=[],this.month=this.month_long(this.date1),this.year=this.year_long(this.date1),this.weeks=[];let t=this.firstDate;for(let e=0;e<this.rows;e++){let i={days:[]};for(let s=0;s<7;s++)i.days.push(t),t=de(t).add(1,"day").toDate();this.weeks.push(i)}}function dK(){this.initCalendar()}function uK(){this.plannerStore.selectDate(Tt()),this.refreshCalendar()}const cK={class:"thumbnail-calendar d-flex flex-column"},hK={class:"d-flex flex-row justify-content-between"},fK={class:"d-flex flex-row"},mK={class:"month"},pK={class:"year"},gK={class:"buttons d-flex flex-row"},vK={class:"d-flex flex-row"};function yK(t,e,i,s,r,n){const o=$("icon-button"),a=$("DayPill");return m(),p("div",cK,[d("div",hK,[d("div",fK,[d("div",mK,k(t.month),1),d("div",pK,k(t.year),1)]),d("div",gK,[H(o,{src:"icon/previous.png",width:22,height:22,onClicked:e[0]||(e[0]=l=>t.$emit("previous"))}),d("button",{class:"today",type:"button",onClick:e[1]||(e[1]=(...l)=>n.goToday&&n.goToday(...l))},"Today"),H(o,{src:"icon/next.png",width:22,height:22,onClicked:e[2]||(e[2]=l=>t.$emit("next"))})])]),d("div",vK,[(m(!0),p(L,null,G(t.daysOfWeek,l=>(m(),p("div",{key:l.id,class:"dow pill"},k(l.altText),1))),128))]),(m(!0),p(L,null,G(t.weeks,(l,c)=>(m(),p("div",{key:c,class:"week d-flex flex-row"},[(m(!0),p(L,null,G(l.days,(f,v)=>(m(),ie(a,{key:v,date:f,rootDate:n.date1},null,8,["date","rootDate"]))),128))]))),128))])}const _K=Q(aK,[["render",yK],["__scopeId","data-v-d336e1b6"]]),bK={name:"ThumbnailCalendar",components:{CalendarMonth:_K},props:{initialDate:Date},data:function(){return{plannerStore:void 0,date:this.initialDate,monthCount:1}},created:async function(){let t=await K(()=>Promise.resolve().then(()=>ht),void 0);this.plannerStore=t.usePlannerStore()},computed:{selectedDate(){return this.plannerStore?this.plannerStore.selectedDate:$t()},months(){let t=[];t.push(new Date(this.date));for(let e=1;e<this.monthCount;e++)t.push(rh(this.date,e));return t}},methods:{previousMonth(){this.date=rh(this.date,-1)},nextMonth(){this.date=rh(this.date,1)},addMonth(){this.monthCount++},subtractMonth(){this.monthCount--}},watch:{selectedDate(){this.date=this.selectedDate}}},wK={class:"thumbnail-calendar d-flex flex-column"};function SK(t,e,i,s,r,n){const o=$("CalendarMonth");return m(),p("div",wK,[(m(!0),p(L,null,G(n.months,(a,l)=>(m(),ie(o,{key:l,class:"mt-2",initialDate:a,onPrevious:n.previousMonth,onNext:n.nextMonth},null,8,["initialDate","onPrevious","onNext"]))),128))])}const TK=Q(bK,[["render",SK]]),xK={name:"TypePoints",props:{item:Object,level:Number,iterations:Array},data:function(){return{todoStore:void 0,goalStore:void 0}},created:async function(){let t=await K(()=>Promise.resolve().then(()=>hi),void 0);this.todoStore=t.useTodoStore();let e=await K(()=>Promise.resolve().then(()=>Ni),void 0);this.goalStore=e.useGoalStore()},computed:{points(){if(this.todoStore==null||this.goalStore==null)return 0;if(this.item.type=="iteration")return this.iterations.filter(s=>s.attemptedAt!=null||s.completedAt!=null).filter(s=>s.points!=null).reduce((s,r)=>s+r.points,0);if(["type","goal","metric"].includes(this.item.type)){let e=this;var t=[];return this.iterations.filter(s=>s.attemptedAt!=null||s.completedAt!=null).forEach(s=>{s.todoID&&e.isTodoOfType(s,s.todoID,t)}),t.filter(s=>s.points!=null).reduce((s,r)=>s+r.points,0)}return 10}},methods:{isTodoOfType(t,e,i){let s=this;if(e){var r=this.todoStore.getItem(e);if(r){var n=r[`${s.item.type}s`].map(l=>l.id);let a=!1;if(this.item.id)a=n.includes(this.item.id);else if(this.item.ids)for(let l=0;l<this.item.ids.length&&!a;l++)a=n.includes(this.item.ids[l]);if(a){var o=i.findIndex(l=>l.id==t.id);o==-1&&i.push(t);return}else r.parents.forEach(l=>{s.isTodoOfType(t,l.id,i)}),(s.item.type=="goal"||s.item.type=="metric")&&r.goals.forEach(l=>{s.isGoalOfType(t,l.id,i)})}}},isGoalOfType(t,e,i){let s=this;if(e){var r=this.goalStore.getItem(e);if(r){var n=[];s.item.type=="goal"?n=r.parents.map(l=>l.id):s.item.type=="metric"&&(n=r.metrics.map(l=>l.id));let a=!1;if(this.item.id)a=n.includes(this.item.id);else if(this.item.ids)for(let l=0;l<this.item.ids.length&&!a;l++)a=n.includes(this.item.ids[l]);if(a){var o=i.findIndex(l=>l.id==t.id);o==-1&&i.push(t);return}else r.parents.forEach(l=>{s.isGoalOfType(t,l.id,i)})}}}}},IK={class:"d-flex flex-row flex-grow-1"},EK={key:0,class:"d-flex flex-row justify-content-between flex-grow-1 pe-2"},DK={key:1,class:"points"},kK={key:0,class:"d-flex flex-column"};function CK(t,e,i,s,r,n){const o=$("TypePoints",!0);return m(),p("div",{class:"d-flex flex-column",onClick:e[0]||(e[0]=ye(a=>i.item.isExpanded=!i.item.isExpanded,["prevent","stop"]))},[d("div",IK,[d("span",{class:"label",style:$e({"padding-left":`${i.level*10}px`})},k(i.item.label),5),i.item.showPoints?(m(),p("div",EK,[d("span",{class:"dot",style:$e({"background-color":i.item.color||"gray"})},null,4),d("span",{class:"dot",style:$e({"background-color":i.item.color||"gray"})},null,4)])):x("",!0),i.item.showPoints?(m(),p("span",DK,k(n.points),1)):x("",!0)]),i.item.isExpanded?(m(),p("div",kK,[(m(!0),p(L,null,G(i.item.items,(a,l)=>(m(),ie(o,{key:l,item:a,level:i.level+1,iterations:i.iterations},null,8,["item","level","iterations"]))),128))])):x("",!0)])}const PK=Q(xK,[["render",CK],["__scopeId","data-v-6f99050d"]]),AK={name:"TimeframePoints",components:{TypePoints:PK},props:{selectedDate:Date},data:function(){return{iterationStore:void 0,items:[{category:"All",label:"All",type:"iteration",color:"#FC3B3B",showPoints:!0,isExpanded:!0,id:void 0,ids:void 0,items:[{category:"Year",label:"Year",type:"label",color:void 0,showPoints:!0,isExpanded:!0,items:[{type:"goal",color:"#1EBA31",id:333,ids:void 0,label:"Dopamine",showPoints:!0,isExpanded:!1},{type:"goal",color:"#1EBA31",id:334,ids:void 0,label:"Dating",showPoints:!0,isExpanded:!1},{type:"goal",color:"#1EBA31",id:335,ids:void 0,label:"Frequency",showPoints:!0,isExpanded:!1},{type:"goal",color:"#1EBA31",id:336,ids:void 0,label:"Videos",showPoints:!0,isExpanded:!1},{type:"goal",color:"#1EBA31",id:338,ids:void 0,label:"Mom",showPoints:!0,isExpanded:!1},{type:"goal",color:"#1EBA31",id:48,ids:void 0,label:"Coach",showPoints:!0,isExpanded:!1}]},{category:"Main",label:"Main",type:"label",color:void 0,showPoints:!1,isExpanded:!1,items:[{type:"type",color:"#FC3B3B",id:155,ids:void 0,label:"Nutrition",showPoints:!0,isExpanded:!1},{type:"type",color:"#F4511E",id:158,ids:void 0,label:"Exercise",showPoints:!0,isExpanded:!1},{type:"goal",color:"#4C6EF5",id:80,ids:void 0,label:"Dance",showPoints:!0,isExpanded:!1},{type:"goal",color:"#1EBA31",id:48,ids:void 0,label:"Coach",showPoints:!0,isExpanded:!1},{type:"goal",color:"#1a73e8",id:347,ids:void 0,label:"Memorize",showPoints:!0,isExpanded:!1}]},{category:"Metrics",label:"Metrics",type:"metric",showPoints:!1,isExpanded:!1,id:void 0,ids:[1,2,3,4,5],items:[{type:"metric",color:"#3B99FC",id:1,ids:void 0,label:"Physical",showPoints:!0,isExpanded:!1},{type:"metric",color:"#FC3B3B",id:2,ids:void 0,label:"Social",showPoints:!0,isExpanded:!1},{type:"metric",color:"#F4511E",id:3,ids:void 0,label:"Mental",showPoints:!0,isExpanded:!1},{type:"metric",color:"#4C6EF5",id:4,ids:void 0,label:"Emotional",showPoints:!0,isExpanded:!1},{type:"metric",color:"#1EBA31",id:5,ids:void 0,label:"Financial",showPoints:!0,isExpanded:!1}]}]}]}},created:async function(){let t=await K(()=>Promise.resolve().then(()=>Et),void 0);this.iterationStore=t.useIterationStore()},computed:{start(){return ei(this.selectedDate)},end(){return li(this.selectedDate)},iterations(){let t=[];return this.iterationStore&&(t=this.iterationStore.iterations,t=t.filter(e=>+new Date(e.startAt)>=+this.start&&+new Date(e.endAt)<=+this.end)),t}}},RK={class:"timeframe-points d-flex flex-column"},MK={class:"d-flex flex-column"};function OK(t,e,i,s,r,n){const o=$("TypePoints");return m(),p("div",RK,[d("div",MK,[(m(!0),p(L,null,G(t.items,(a,l)=>(m(),ie(o,{key:l,item:a,level:0,iterations:n.iterations},null,8,["item","iterations"]))),128))])])}const $K=Q(AK,[["render",OK],["__scopeId","data-v-60e4dd6b"]]),NK="/avatar/mood/My%20Face.png",LK={name:"AvatarMood",components:{LogItemView:sc},props:{},data:function(){return{metricStore:void 0}},created:async function(){let t=await K(()=>Promise.resolve().then(()=>no),void 0);this.metricStore=t.useMetricStore()},computed:{moodLogItem(){if(this.metricStore)return this.metricStore.getLogItem(du.EMOTIONAL_MOOD)}},methods:{}},VK={class:"avatar-mood w-100"},WK={class:"d-flex flex-column"};function FK(t,e,i,s,r,n){const o=$("LogItemView");return m(),p("div",VK,[e[0]||(e[0]=d("img",{src:NK,width:"140"},null,-1)),d("div",WK,[n.moodLogItem?(m(),ie(o,{key:0,logItemID:n.moodLogItem.id},null,8,["logItemID"])):x("",!0)])])}const Qv=Q(LK,[["render",FK]]),BK={name:"AvatarEnergy",components:{LogItemView:sc},props:{},data:function(){return{metricStore:void 0,clearMinutes:60}},created:async function(){let t=await K(()=>Promise.resolve().then(()=>no),void 0);this.metricStore=t.useMetricStore()},computed:{energyLogItem(){if(this.metricStore){let t=this.metricStore.getLogItem(du.PHYSICAL_ENERGY);return console.log(t),t}},energyLevel(){if(this.energyLogItem&&this.energyLogItem.entries){let t=this.energyLogItem.entries[this.energyLogItem.entries.length-1];if(t){let e=this.energyLogItem.fields.find(i=>i.name.toLowerCase()=="level");if(+t.dateTime.toDate()>+Im(this.clearMinutes))return t.fieldValues.find(s=>s.logItemFieldID==e.id).value}}},imageSource(){if(this.energyLevel){if(this.energyLevel<=2)return"energy/2.jpg";if(this.energyLevel>2&&this.energyLevel<=4)return"energy/4.jpg";if(this.energyLevel>4&&this.energyLevel<=6)return"energy/6.jpg";if(this.energyLevel>6&&this.energyLevel<=8)return"energy/8.jpg";if(this.energyLevel>8&&this.energyLevel<=10)return"energy/10.jpg"}else return"Avatar (Blue Underwear).jpg"}},methods:{}},zK={class:"avatar-energy w-100"},jK={key:0},HK=["src"],UK={class:"d-flex flex-column"};function GK(t,e,i,s,r,n){const o=$("LogItemView");return m(),p("div",zK,[n.energyLevel?(m(),p("span",jK,k(n.energyLevel),1)):x("",!0),d("img",{src:`/avatar/${n.imageSource}`,height:"416"},null,8,HK),d("div",UK,[n.energyLogItem?(m(),ie(o,{key:0,logItemID:n.energyLogItem.id},null,8,["logItemID"])):x("",!0)])])}const Zv=Q(BK,[["render",GK]]),zS="/avatar/Avatar%20(Blue%20Underwear).jpg",YK={name:"AvatarMental",components:{LogItemView:sc},props:{},data:function(){return{metricStore:void 0}},created:async function(){let t=await K(()=>Promise.resolve().then(()=>no),void 0);this.metricStore=t.useMetricStore()},computed:{energyLogItem(){if(this.metricStore)return this.metricStore.getLogItem(du.MENTAL_ENERGY)},clarityLogItem(){if(this.metricStore)return this.metricStore.getLogItem(du.MENTAL_CLARITY)}},methods:{}},qK={class:"avatar-mood w-100"},KK={class:"d-flex flex-column"};function JK(t,e,i,s,r,n){const o=$("LogItemView");return m(),p("div",qK,[e[0]||(e[0]=d("img",{src:zS,width:"140"},null,-1)),d("div",KK,[n.energyLogItem?(m(),ie(o,{key:0,logItemID:n.energyLogItem.id},null,8,["logItemID"])):x("",!0),n.clarityLogItem?(m(),ie(o,{key:1,logItemID:n.clarityLogItem.id},null,8,["logItemID"])):x("",!0)])])}const Xv=Q(YK,[["render",JK]]),QK={name:"AvatarBody",components:{},props:{},data:function(){return{metricStore:void 0}},created:async function(){let t=await K(()=>Promise.resolve().then(()=>no),void 0);this.metricStore=t.useMetricStore()},computed:{},methods:{}},ZK={class:"avatar-body w-100"};function XK(t,e,i,s,r,n){return m(),p("div",ZK,e[0]||(e[0]=[d("img",{src:zS,width:"140"},null,-1)]))}const ey=Q(QK,[["render",XK]]),eJ={name:"AvatarPanel",components:{AvatarMood:Qv,AvatarEnergy:Zv,AvatarBody:ey,AvatarMental:Xv},props:{},data:function(){return{selectedPanel:"energy",panels:[{text:"mood",name:"Mood",view:Qv},{text:"energy",name:"Energy",view:Zv},{text:"mental",name:"Mental",view:Xv},{text:"body",name:"Body",view:ey}]}},created:function(){},methods:{}},tJ={class:"avatar-panel d-flex flex-column align-items-center mt-2"},iJ={class:"d-flex justify-content-center mb-2 gap-1"},sJ=["onClick"];function nJ(t,e,i,s,r,n){const o=$("AvatarMood"),a=$("AvatarEnergy"),l=$("AvatarMental"),c=$("AvatarBody");return m(),p("div",tJ,[d("div",iJ,[(m(!0),p(L,null,G(t.panels,(f,v)=>(m(),p("span",{key:v,class:F(["app-pill",{selected:t.selectedPanel==f.text}]),onClick:S=>t.selectedPanel=f.text},k(f.name),11,sJ))),128))]),t.selectedPanel=="mood"?(m(),ie(o,{key:0})):x("",!0),t.selectedPanel=="energy"?(m(),ie(a,{key:1})):x("",!0),t.selectedPanel=="mental"?(m(),ie(l,{key:2})):x("",!0),t.selectedPanel=="body"?(m(),ie(c,{key:3})):x("",!0)])}const rJ=Q(eJ,[["render",nJ]]),oJ={name:"LeftPanel",components:{ThumbnailCalendar:TK,AvatarPanel:rJ,TimeframePoints:$K},data:function(){return{appStore:void 0,plannerStore:void 0,firstDay:de().date(1).hour(0).minute(0).second(0).millisecond(0).toDate()}},created:async function(){this.appStore=bt();let t=await K(()=>Promise.resolve().then(()=>ht),void 0);this.plannerStore=t.usePlannerStore()},computed:{selectedDate(){return this.plannerStore?this.plannerStore.selectedDate:$t()},isShown(){return this.appStore?this.appStore.showLeftPanel:!0}},methods:{}};function aJ(t,e,i,s,r,n){const o=$("ThumbnailCalendar"),a=$("TimeframePoints"),l=$("AvatarPanel");return m(),p("div",{class:F(["left-panel d-flex flex-column mt-1 overflow-scroll",{close:!n.isShown}])},[H(o,{initialDate:t.firstDay},null,8,["initialDate"]),H(a,{selectedDate:n.selectedDate},null,8,["selectedDate"]),H(l)],2)}const lJ=Q(oJ,[["render",aJ],["__scopeId","data-v-ed60ada8"]]);var ps=typeof window<"u"?window:null,Bm=ps===null,Pl=Bm?void 0:ps.document,Os="addEventListener",$s="removeEventListener",Eh="getBoundingClientRect",ja="_a",Ns="_b",In="_c",Ad="horizontal",Ls=function(){return!1},dJ=Bm?"calc":["","-webkit-","-moz-","-o-"].filter(function(t){var e=Pl.createElement("div");return e.style.cssText="width:"+t+"calc(9px)",!!e.style.length}).shift()+"calc",jS=function(t){return typeof t=="string"||t instanceof String},ty=function(t){if(jS(t)){var e=Pl.querySelector(t);if(!e)throw new Error("Selector "+t+" did not match a DOM element");return e}return t},Pi=function(t,e,i){var s=t[e];return s!==void 0?s:i},Rd=function(t,e,i,s){if(e){if(s==="end")return 0;if(s==="center")return t/2}else if(i){if(s==="start")return 0;if(s==="center")return t/2}return t},uJ=function(t,e){var i=Pl.createElement("div");return i.className="gutter gutter-"+e,i},cJ=function(t,e,i){var s={};return jS(e)?s[t]=e:s[t]=dJ+"("+e+"% - "+i+"px)",s},hJ=function(t,e){var i;return i={},i[t]=e+"px",i},HS=function(t,e){if(e===void 0&&(e={}),Bm)return{};var i=t,s,r,n,o,a,l;Array.from&&(i=Array.from(i));var c=ty(i[0]),f=c.parentNode,v=getComputedStyle?getComputedStyle(f):null,S=v?v.flexDirection:null,I=Pi(e,"sizes")||i.map(function(){return 100/i.length}),C=Pi(e,"minSize",100),D=Array.isArray(C)?C:i.map(function(){return C}),J=Pi(e,"maxSize",1/0),V=Array.isArray(J)?J:i.map(function(){return J}),se=Pi(e,"expandToMin",!1),oe=Pi(e,"gutterSize",10),ee=Pi(e,"gutterAlign","center"),_e=Pi(e,"snapOffset",30),_=Pi(e,"dragInterval",1),Ee=Pi(e,"direction",Ad),Te=Pi(e,"cursor",Ee===Ad?"col-resize":"row-resize"),Pe=Pi(e,"gutter",uJ),Fe=Pi(e,"elementStyle",cJ),at=Pi(e,"gutterStyle",hJ);Ee===Ad?(s="width",r="clientX",n="left",o="right",a="clientWidth"):Ee==="vertical"&&(s="height",r="clientY",n="top",o="bottom",a="clientHeight");function Xe(W,U,q,he){var Ye=Fe(s,U,q,he);Object.keys(Ye).forEach(function(P){W.style[P]=Ye[P]})}function lt(W,U,q){var he=at(s,U,q);Object.keys(he).forEach(function(Ye){W.style[Ye]=he[Ye]})}function Dt(){return l.map(function(W){return W.size})}function Ft(W){return"touches"in W?W.touches[0][r]:W[r]}function Ze(W){var U=l[this.a],q=l[this.b],he=U.size+q.size;U.size=W/this.size*he,q.size=he-W/this.size*he,Xe(U.element,U.size,this[Ns],U.i),Xe(q.element,q.size,this[In],q.i)}function Le(W){var U,q=l[this.a],he=l[this.b];this.dragging&&(U=Ft(W)-this.start+(this[Ns]-this.dragOffset),_>1&&(U=Math.round(U/_)*_),U<=q.minSize+_e+this[Ns]?U=q.minSize+this[Ns]:U>=this.size-(he.minSize+_e+this[In])&&(U=this.size-(he.minSize+this[In])),U>=q.maxSize-_e+this[Ns]?U=q.maxSize+this[Ns]:U<=this.size-(he.maxSize-_e+this[In])&&(U=this.size-(he.maxSize+this[In])),Ze.call(this,U),Pi(e,"onDrag",Ls)(Dt()))}function et(){var W=l[this.a].element,U=l[this.b].element,q=W[Eh](),he=U[Eh]();this.size=q[s]+he[s]+this[Ns]+this[In],this.start=q[n],this.end=q[o]}function Bt(W){if(!getComputedStyle)return null;var U=getComputedStyle(W);if(!U)return null;var q=W[a];return q===0?null:(Ee===Ad?q-=parseFloat(U.paddingLeft)+parseFloat(U.paddingRight):q-=parseFloat(U.paddingTop)+parseFloat(U.paddingBottom),q)}function Jt(W){var U=Bt(f);if(U===null||D.reduce(function(P,A){return P+A},0)>U)return W;var q=0,he=[],Ye=W.map(function(P,A){var B=U*P/100,ae=Rd(oe,A===0,A===W.length-1,ee),Y=D[A]+ae;return B<Y?(q+=Y-B,he.push(0),Y):(he.push(B-Y),B)});return q===0?W:Ye.map(function(P,A){var B=P;if(q>0&&he[A]-q>0){var ae=Math.min(q,he[A]-q);q-=ae,B=P-ae}return B/U*100})}function wt(){var W=this,U=l[W.a].element,q=l[W.b].element;W.dragging&&Pi(e,"onDragEnd",Ls)(Dt()),W.dragging=!1,ps[$s]("mouseup",W.stop),ps[$s]("touchend",W.stop),ps[$s]("touchcancel",W.stop),ps[$s]("mousemove",W.move),ps[$s]("touchmove",W.move),W.stop=null,W.move=null,U[$s]("selectstart",Ls),U[$s]("dragstart",Ls),q[$s]("selectstart",Ls),q[$s]("dragstart",Ls),U.style.userSelect="",U.style.webkitUserSelect="",U.style.MozUserSelect="",U.style.pointerEvents="",q.style.userSelect="",q.style.webkitUserSelect="",q.style.MozUserSelect="",q.style.pointerEvents="",W.gutter.style.cursor="",W.parent.style.cursor="",Pl.body.style.cursor=""}function Gt(W){if(!("button"in W&&W.button!==0)){var U=this,q=l[U.a].element,he=l[U.b].element;U.dragging||Pi(e,"onDragStart",Ls)(Dt()),W.preventDefault(),U.dragging=!0,U.move=Le.bind(U),U.stop=wt.bind(U),ps[Os]("mouseup",U.stop),ps[Os]("touchend",U.stop),ps[Os]("touchcancel",U.stop),ps[Os]("mousemove",U.move),ps[Os]("touchmove",U.move),q[Os]("selectstart",Ls),q[Os]("dragstart",Ls),he[Os]("selectstart",Ls),he[Os]("dragstart",Ls),q.style.userSelect="none",q.style.webkitUserSelect="none",q.style.MozUserSelect="none",q.style.pointerEvents="none",he.style.userSelect="none",he.style.webkitUserSelect="none",he.style.MozUserSelect="none",he.style.pointerEvents="none",U.gutter.style.cursor=Te,U.parent.style.cursor=Te,Pl.body.style.cursor=Te,et.call(U),U.dragOffset=Ft(W)-U.end}}I=Jt(I);var Nt=[];l=i.map(function(W,U){var q={element:ty(W),size:I[U],minSize:D[U],maxSize:V[U],i:U},he;if(U>0&&(he={a:U-1,b:U,dragging:!1,direction:Ee,parent:f},he[Ns]=Rd(oe,U-1===0,!1,ee),he[In]=Rd(oe,!1,U===i.length-1,ee),S==="row-reverse"||S==="column-reverse")){var Ye=he.a;he.a=he.b,he.b=Ye}if(U>0){var P=Pe(U,Ee,q.element);lt(P,oe,U),he[ja]=Gt.bind(he),P[Os]("mousedown",he[ja]),P[Os]("touchstart",he[ja]),f.insertBefore(P,q.element),he.gutter=P}return Xe(q.element,q.size,Rd(oe,U===0,U===i.length-1,ee),U),U>0&&Nt.push(he),q});function ii(W){var U=W.i===Nt.length,q=U?Nt[W.i-1]:Nt[W.i];et.call(q);var he=U?q.size-W.minSize-q[In]:W.minSize+q[Ns];Ze.call(q,he)}l.forEach(function(W){var U=W.element[Eh]()[s];U<W.minSize&&(se?ii(W):W.minSize=U)});function pi(W){var U=Jt(W);U.forEach(function(q,he){if(he>0){var Ye=Nt[he-1],P=l[Ye.a],A=l[Ye.b];P.size=U[he-1],A.size=q,Xe(P.element,P.size,Ye[Ns],P.i),Xe(A.element,A.size,Ye[In],A.i)}})}function Xt(W,U){Nt.forEach(function(q){if(U!==!0?q.parent.removeChild(q.gutter):(q.gutter[$s]("mousedown",q[ja]),q.gutter[$s]("touchstart",q[ja])),W!==!0){var he=Fe(s,q.a.size,q[Ns]);Object.keys(he).forEach(function(Ye){l[q.a].element.style[Ye]="",l[q.b].element.style[Ye]=""})}})}return{setSizes:pi,getSizes:Dt,collapse:function(U){ii(l[U])},destroy:Xt,parent:f,pairs:Nt}};const fJ={name:"WeekView",components:{TaskList:Dm,DayPoints:tS,HourBlocks:iS},data:function(){return{appStore:void 0,padding:60,days:[],dayModels:[],date:Ne,maxTasks:0,width:0,grid:"",hour:{hours:[],labelWidth:50,blockHeight:48},events:[],tasks:[],firstDay:null,lastDay:null,plannerStore:void 0,eventStore:void 0,iterationStore:void 0}},created:async function(){this.appStore=bt();let t=await K(()=>Promise.resolve().then(()=>mo),void 0);this.eventStore=t.useEventStore();let e=await K(()=>Promise.resolve().then(()=>Et),void 0);this.iterationStore=e.useIterationStore();let i=await K(()=>Promise.resolve().then(()=>ht),void 0);this.plannerStore=i.usePlannerStore(),this.plannerStore.startClock()},beforeMount:function(){},mounted:function(){this.width=this.$refs.weekView.clientWidth,this.initHours()},computed:{selectedDate(){return this.plannerStore?this.plannerStore.selectedDate:this.today},today(){return $t()},startAt(){return ei(this.selectedDate)},endAt(){return li(this.selectedDate)},dayCount(){return this.appStore?this.appStore.planner.dayCount:7}},methods:{initHours:mJ,initTimeline:pJ,newDay:gJ,replaceItem:Hs,removeItem:_a,getHoursObjectArray:km,onScroll:vJ,taskList(t){return t.tasks.filter(e=>!e.isInEvent)},selectDate(t){this.plannerStore.selectDate(t)}},watch:{dayCount(t){this.initTimeline(),localStorage.setItem("week-view-day-count",t)},selectedDate(){this.initTimeline(),this.eventStore.getEvents(this.startAt,this.endAt,!0),this.iterationStore.getIterationsInRange(this.startAt,this.endAt,!0)}}};function mJ(){this.hour.hours=this.getHoursObjectArray()}function pJ(){let t=this.dayCount==7?ei(this.selectedDate):new Date(this.selectedDate);this.firstDay=new Date(t),this.days=[];let e=[];for(let i=0;i<this.dayCount;i++)this.days.push(t),e.push(this.newDay(t)),t=xs(t,1);this.lastDay=new Date(t),this.dayModels=e}function gJ(t){let e=this.tasks.filter(s=>new Date(s.startAt).toDateString()==t.toDateString()&&(s.endAt==null||new Date(s.endAt).toDateString()==t.toDateString()));e=e.filter(s=>s.events.length==0);let i="";return t<this.today?i="past":+t==+this.today?i="present":t>this.today&&(i="future"),{dow:Ne.format(t,"ddd"),day:Ne.format(t,"D"),date:new Date(t.getTime()),dateString:t.toDateString(),tasks:e,pointInTime:i,isSelected:+t==+this.selectedDate}}function vJ(){}const yJ={class:"d-flex h-100"},_J=["onClick"],bJ={class:"dow"},wJ={class:"date-icon"},SJ={class:"body d-flex h-100 overflow-scroll"},TJ={key:0},xJ={class:"hour-label"};function IJ(t,e,i,s,r,n){const o=$("TaskList"),a=$("DayPoints"),l=$("HourBlocks");return m(),p("div",yJ,[d("div",{class:"week-view d-flex flex-column h-100 w-100",ref:"weekView",style:$e({"min-width":`${64*n.dayCount}px`})},[d("div",{class:"header d-flex",style:$e({"padding-left":`${t.hour.labelWidth}px`})},[(m(!0),p(L,null,G(t.dayModels,(c,f)=>(m(),p("div",{key:f,class:F(["head day-view d-flex flex-column flex-grow-1 h-100",[c.pointInTime,{selected:c.isSelected}]]),style:{"flex-basis":0}},[d("div",{class:"date-label cursor-default d-flex flex-column justify-content-between",onClick:v=>n.selectDate(c.date)},[d("div",bJ,k(c.dow),1),d("div",wJ,k(c.day),1)],8,_J),H(o,{date:c.date,taskList:n.taskList(c)},null,8,["date","taskList"]),H(a,{date:c.date},null,8,["date"])],2))),128))],4),d("div",SJ,[d("div",{class:"hour-labels overflow-hidden",style:$e({"min-width":`${t.hour.labelWidth}px`,height:"fit-content"})},[(m(!0),p(L,null,G(t.hour.hours,(c,f)=>(m(),p("div",{key:f,style:$e({"min-height":`${t.hour.blockHeight}px`})},[f!=0?(m(),p("div",TJ,[d("p",xJ,k(c.twelveHourString),1)])):x("",!0)],4))),128))],4),t.dayModels.length>0?(m(),p("div",{key:0,class:"hour-blocks d-flex w-100 overflow-hidden",ref:"hourBlocks",style:{height:"fit-content"},onScroll:e[0]||(e[0]=(...c)=>n.onScroll&&n.onScroll(...c))},[(m(!0),p(L,null,G(t.dayModels,(c,f)=>(m(),ie(l,{key:f,class:"day-view flex-grow-1",date:c.date,style:{"flex-basis":0},blockHeight:t.hour.blockHeight},null,8,["date","blockHeight"]))),128))],544)):x("",!0)])],4)])}const EJ=Q(fJ,[["render",IJ],["__scopeId","data-v-9d605303"]]),DJ={name:"MonthView",components:{TaskList:Dm},props:{},data:function(){return{plannerStore:void 0,rows:5,weeks:[],weekModels:[],moment:de,date:Ne,today:$t(),maxTasks:6}},beforeMount:function(){this.initTimeline()},created:async function(){let t=await K(()=>Promise.resolve().then(()=>ht),void 0);this.plannerStore=t.usePlannerStore()},computed:{dayWidth(){return this.$refs.monthView.clientWidth/7},dayHeight(){return this.$refs.monthView.clientHeight},selectedDate(){return this.plannerStore?this.plannerStore.selectedDate:$t()}},methods:{initTimeline:kJ},watch:{selectedDate(){this.initTimeline()}}};function kJ(){let t=ti(this.selectedDate),e=Il(t);this.weeks=[];let i=e;for(let s=0;s<this.rows;s++){let r={days:[]};for(let n=0;n<7;n++){let o={dow:this.date.format(i,"ddd"),day:i.getDate(),date:new Date(i.getTime()),tasks:[]};i.getTime()<this.selectedDate.getTime()?o.pointInTime="past":i.getTime()==this.selectedDate.getTime()?o.pointInTime="present":i.getTime()>this.selectedDate.getTime()&&(o.pointInTime="future"),i=this.moment(i).add(1,"day").toDate(),r.days.push(o)}this.weeks.push(r)}}const CJ={class:"month d-flex flex-column d-flex flex-column",ref:"monthView"},PJ={class:"head d-flex flex-column"},AJ={class:"date-label d-flex flex-column justify-content-between"},RJ={key:0,class:"dow"},MJ={class:"date-icon"};function OJ(t,e,i,s,r,n){const o=$("TaskList");return m(),p("div",CJ,[(m(!0),p(L,null,G(t.weeks,(a,l)=>(m(),p("div",{key:l,class:F(["week d-flex flex-row",{first:l==0}])},[(m(!0),p(L,null,G(a.days,(c,f)=>(m(),p("div",{key:f,class:F(["day d-flex flex-column flex-fill",c.pointInTime])},[d("div",PJ,[d("div",AJ,[l==0?(m(),p("div",RJ,k(c.dow),1)):x("",!0),d("div",MJ,k(c.day),1)])]),H(o,{date:c.date,taskList:c.tasks},null,8,["date","taskList"])],2))),128))],2))),128))],512)}const $J=Q(DJ,[["render",OJ],["__scopeId","data-v-3c45acbd"]]),NJ={name:"Planner",components:{WeekView:EJ,MonthView:$J},data:function(){return{appStore:void 0,split:null,today:Tt()}},mounted:function(){},created:function(){this.appStore=bt()},computed:{selectedView(){return this.appStore?this.appStore.planner.selectedView:"week"}},methods:{initSplit:LJ}};function LJ(){let t=localStorage.getItem("planner-split-sizes");t&&(t=JSON.parse(t)),this.split=HS(["#left-and-body","#right"],{sizes:t,minSize:[296,296],onDragEnd:e=>localStorage.setItem("planner-split-sizes",JSON.stringify(e))})}const VJ={class:"planner row g-0 h-100"},WJ={id:"left-and-body",class:"col h-100"},FJ={class:"left-wrapper row h-100 g-0"},BJ={class:"col d-flex flex-row h-100"},zJ={class:"body overflow-auto h-100"};function jJ(t,e,i,s,r,n){const o=$("WeekView"),a=$("MonthView");return m(),p("div",VJ,[d("div",WJ,[d("div",FJ,[d("div",BJ,[d("div",zJ,[n.selectedView=="week"?(m(),ie(o,{key:0})):x("",!0),n.selectedView=="month"?(m(),ie(a,{key:1,today:t.today},null,8,["today"])):x("",!0)])])])])])}const _f=Q(NJ,[["render",jJ],["__scopeId","data-v-96ede459"]]);let HJ={itemType:"metric",props:[{id:1,name:"ID",prop:"id",type:"int",isColumn:!0},{id:2,name:"Name",prop:"text",type:"string",isColumn:!0},{id:3,name:"Description",prop:"description",type:"blurd",isColumn:!0},{id:4,name:"Goals",prop:"goals",queryField:"goals",type:"objects",isItem:!0,isColumn:!0,icon:"/icon/goal-icon.png"},{id:5,name:"Routines",prop:"routines",queryField:"routines",type:"objects",isItem:!0,isColumn:!0,icon:"/icon/routine-icon.png"},{id:6,name:"Todos",prop:"todos",queryField:"todos",type:"objects",isItem:!0,isColumn:!0,icon:"/icon/task-icon.png"}],itemModel:{text:"",description:"",parents:[],children:[],goals:[],todos:[],routines:[]}},UJ={itemType:"goal",properties:[{id:0,text:"Order",position:1,isSelected:!0},{id:1,text:"ID",position:2,isSelected:!0},{id:2,text:"Text",position:3,isSelected:!0},{id:3,text:"Description",position:4,isSelected:!0},{id:4,text:"Time",position:5,isSelected:!0},{id:5,text:"Repeat",position:6,isSelected:!0},{id:6,text:"Type",position:7,isSelected:!1},{id:7,text:"Parents",position:8,isSelected:!0},{id:8,text:"Children",position:9,isSelected:!0},{id:9,text:"Metrics",position:10,isSelected:!0},{id:10,text:"Goals",position:11,isSelected:!1},{id:11,text:"Todos",position:12,isSelected:!0},{id:12,position:13,text:"Routines",isSelected:!0},{id:13,position:14,text:"Iterations",isSelected:!1},{id:14,text:"Events",position:15,isSelected:!1}],props:[{id:1,name:"ID",prop:"id",type:"int",isColumn:!0},{id:2,name:"Name",prop:"text",type:"string",isColumn:!0},{id:3,name:"Description",prop:"description",type:"blurd",isColumn:!0},{id:4,name:"Parents",prop:"parents",queryField:"goals",type:"objects",isItem:!0,isColumn:!0,icon:"/icon/parent-icon.png"},{id:5,name:"Children",prop:"children",queryField:"goals",type:"objects",isItem:!0,isColumn:!0,icon:"/icon/child-icon.png"},{id:6,name:"Metrics",prop:"metrics",queryField:"metrics",type:"objects",isItem:!0,isColumn:!0},{id:7,name:"Todos",prop:"todos",queryField:"todos",type:"objects",isItem:!0,isColumn:!0,icon:"/icon/task-icon.png"},{id:8,name:"Routines",prop:"routines",queryField:"routines",type:"objects",isItem:!0,isColumn:!0,icon:"/icon/routine-icon.png"}],itemModel:{__typename:"Goal",text:"",description:null,parents:[],children:[],metrics:[],todos:[],routines:[]}},GJ={itemType:"routine",props:[{id:1,name:"ID",prop:"id",queryField:"id",type:"int",isColumn:!0},{id:2,name:"Name",prop:"text",queryField:"text",type:"string",isColumn:!0},{id:3,name:"Description",prop:"description",queryField:"description",type:"blurd",isColumn:!0},{id:4,name:"Parents",prop:"parents",queryField:"routines",type:"objects",isItem:!0,isColumn:!0,icon:"/icon/parent-icon.png"},{id:5,name:"Children",prop:"children",queryField:"rouitnes",type:"objects",isItem:!0,isColumn:!0,icon:"/icon/child-icon.png"},{id:6,name:"Metrics",prop:"metrics",queryField:"metrics",type:"objects",isItem:!0,isColumn:!0},{id:7,name:"Goals",prop:"goals",queryField:"goals",type:"objects",isItem:!0,isColumn:!0,icon:"/icon/goal-icon.png"},{id:8,name:"Todos",prop:"todos",queryField:"todos",type:"objects",isItem:!0,isColumn:!0,icon:"/icon/task-icon.png"},{id:9,name:"Repeats",prop:"repeats",queryField:"repeats",type:"objects",isItem:!1,isColumn:!1}],itemModel:{text:"",description:null,parents:[],children:[],metrics:[],goals:[],todos:[],repeats:[]}};var Ol;class Md{constructor(e){Qp(this,Ol);this.itemType=e.itemType,this.props=e.props,this.query=e.query,Zp(this,Ol,e.itemModel),e.addItem&&(this.addItem=e.addItem),e.updateItem&&(this.updateItem=e.updateItem),e.deleteItem&&(this.deleteItem=e.deleteItem)}get name(){return this.itemType.charAt(0).toUpperCase()+this.itemType.slice(1)}get namePlural(){return`${this.name}s`}get icon(){return["goal","todo","routine"].includes(this.itemType)?`${this.itemType}-icon.png`:null}get table(){return{columns:this.props.filter(e=>e.isColumn)}}newItem(){return fe(Jp(this,Ol))}}Ol=new WeakMap;let YJ=[{id:0,text:"Order",position:1,isSelected:!0},{id:1,text:"ID",position:2,isSelected:!0},{id:2,text:"Text",position:3,isSelected:!0},{id:3,text:"Description",position:4,isSelected:!0},{id:10,text:"Goals",position:11,isSelected:!0},{id:11,text:"Todos",position:12,isSelected:!0},{id:12,position:13,text:"Routines",isSelected:!0}],qJ=[{id:0,text:"Order",position:1,isSelected:!0},{id:1,text:"ID",position:2,isSelected:!0},{id:2,text:"Text",position:3,isSelected:!0},{id:3,text:"Description",position:4,isSelected:!0},{id:4,text:"Time",position:5,isSelected:!0},{id:5,text:"Repeat",position:6,isSelected:!0},{id:6,text:"Type",position:7,isSelected:!1},{id:7,text:"Parents",position:8,isSelected:!0},{id:8,text:"Children",position:9,isSelected:!0},{id:9,text:"Metrics",position:10,isSelected:!0},{id:11,text:"Todos",position:12,isSelected:!0},{id:12,position:13,text:"Routines",isSelected:!0}],KJ=[{id:0,text:"Order",position:1,isSelected:!0},{id:1,text:"ID",position:2,isSelected:!0},{id:2,text:"Text",position:3,isSelected:!0},{id:3,text:"Description",position:4,isSelected:!0},{id:4,text:"Time",position:5,isSelected:!0},{id:5,text:"Repeat",position:6,isSelected:!0},{id:6,text:"Type",position:7,isSelected:!1},{id:7,text:"Parents",position:8,isSelected:!0},{id:8,text:"Children",position:9,isSelected:!0},{id:9,text:"Metrics",position:10,isSelected:!0},{id:10,text:"Goals",position:11,isSelected:!0},{id:12,position:13,text:"Routines",isSelected:!0},{id:13,position:14,text:"Iterations",isSelected:!1},{id:14,text:"Events",position:15,isSelected:!1}],JJ=[{id:0,text:"Order",position:1,isSelected:!0},{id:1,text:"ID",position:2,isSelected:!0},{id:2,text:"Text",position:3,isSelected:!0},{id:3,text:"Description",position:4,isSelected:!0},{id:4,text:"Time",position:5,isSelected:!0},{id:5,text:"Repeat",position:6,isSelected:!0},{id:6,text:"Type",position:7,isSelected:!1},{id:9,text:"Metrics",position:10,isSelected:!0},{id:10,text:"Goals",position:11,isSelected:!0},{id:11,text:"Todos",position:12,isSelected:!0},{id:13,position:14,text:"Iterations",isSelected:!1},{id:14,text:"Events",position:15,isSelected:!1}],QJ={metricProperties:YJ,goalProperties:qJ,todoProperties:KJ,routineProperties:JJ};const ZJ={name:"ItemTableColumnOptions",props:{itemType:String},data:function(){return{properties:null}},created:function(){let e=QJ[`${this.itemType.toLowerCase()}Properties`].filter(r=>r.text.toLowerCase()!=`${this.itemType.toLowerCase()}s`);var i=`${this.itemType.toLowerCase()}-table-props-new`,s=localStorage.getItem(i);s?this.properties=JSON.parse(s):(localStorage.setItem(i,JSON.stringify(e)),this.properties=e),this.onOptionChanged()},methods:{onOptionChanged:XJ}};function XJ(){localStorage.setItem(`${this.itemType.toLowerCase()}-table-props`,JSON.stringify(this.properties));var t=He(this.properties.filter(i=>i.isSelected==!0),"position");let e=t.map(i=>i.text);this.$emit("setColumns",e)}const eQ={class:"column-options"},tQ={class:"d-flex flex-row"},iQ=["onUpdate:modelValue"];function sQ(t,e,i,s,r,n){return m(),p("ul",eQ,[(m(!0),p(L,null,G(t.properties.filter(o=>o.text.toLowerCase()!=`${i.itemType.toLowerCase()}s`),o=>(m(),p("li",{key:o.id},[d("div",tQ,[e[1]||(e[1]=d("i",{class:"fa-solid fa-grip-dots-vertical"},null,-1)),X(d("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":a=>o.isSelected=a,onChange:e[0]||(e[0]=(...a)=>n.onOptionChanged&&n.onOptionChanged(...a))},null,40,iQ),[[ji,o.isSelected]]),d("span",null,k(o.text),1)])]))),128))])}const nQ=Q(ZJ,[["render",sQ],["__scopeId","data-v-ec1b5af0"]]);let rQ=[{id:1,text:"None"},{id:2,text:"Metric"},{id:3,text:"Timeframe"},{id:4,text:"Type"}];const oQ={components:{ItemTableColumnOptions:nQ},name:"ItemTableToolbar",props:{itemType:String},data:function(){return{sortBy:null,sortOptions:rQ,showColumnOptions:!1,searchTerm:""}},created:function(){this.sortBy="None"},watch:{sortBy(t){this.$emit("setSortBy",t)},searchTerm(t){this.$emit("setSearchTerm",t)}}},aQ={class:"toolbar d-flex flex-row justify-content-between align-content-center"},lQ={class:"left d-flex align-content-center"},dQ={class:"right d-flex flex-row"},uQ={class:"column-options"},cQ=["value"];function hQ(t,e,i,s,r,n){const o=$("ItemTableColumnOptions");return m(),p("div",aQ,[d("div",lQ,[X(d("input",{class:"search textbox",type:"text",placeholder:"Search","onUpdate:modelValue":e[0]||(e[0]=a=>t.searchTerm=a)},null,512),[[Ae,t.searchTerm]])]),d("div",dQ,[d("div",uQ,[d("span",{class:"d-block",onClick:e[1]||(e[1]=a=>t.showColumnOptions=!t.showColumnOptions)},"Column Options"),X(H(o,{itemType:i.itemType,onSetColumns:e[2]||(e[2]=a=>t.$emit("setColumns",a))},null,8,["itemType"]),[[it,t.showColumnOptions]])]),X(d("select",{"onUpdate:modelValue":e[3]||(e[3]=a=>t.sortBy=a),class:"select ms-2"},[e[5]||(e[5]=d("option",{disabled:""},"Sort By",-1)),(m(!0),p(L,null,G(t.sortOptions,a=>(m(),p("option",{key:a.id,value:a.text},k(a.text),9,cQ))),128))],512),[[Ts,t.sortBy]]),d("button",{class:"add-btn my-auto",type:"button",onClick:e[4]||(e[4]=a=>t.$emit("addItem",i.itemType))},e[6]||(e[6]=[d("img",{class:"m-auto",src:pn,width:"10",height:"10"},null,-1)]))])])}const fQ=Q(oQ,[["render",hQ],["__scopeId","data-v-9b2090d6"]]),US=(t,e,i)=>{const s=t[e];return s?typeof s=="function"?s():Promise.resolve(s):new Promise((r,n)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(n.bind(null,new Error("Unknown variable dynamic import: "+e+(e.split("/").length!==i?". Note that variables only represent file names one level deep.":""))))})},mQ={name:"ArrayLengthItemTableCell",props:{column:Object,property:{type:Array,default(t){return t||[]}},isShowZero:{type:Boolean,default:!1}},computed:{text(){let t=this.property.length;return t!=0||this.isShowZero?t:""}}},pQ=["src"];function gQ(t,e,i,s,r,n){return m(),p("td",null,[i.column!=null&&i.column.iconName&&n.text!=""?(m(),p("img",{key:0,src:`/icon/${i.column.iconName}-icon.png`,width:"24",height:"24"},null,8,pQ)):x("",!0),d("span",null,k(n.text),1)])}const vQ=Q(mQ,[["render",gQ]]),yQ={name:"NumberItemTableCell",props:{column:Object,property:{type:Number,default:0},showZero:{type:Boolean,default:!0}},computed:{text(){return!this.showZero&&this.property==0?"":this.property}}},_Q=["src"];function bQ(t,e,i,s,r,n){return m(),p("td",null,[i.column.iconName&&n.text!=""?(m(),p("img",{key:0,src:`/icon/${i.column.iconName}.png`,width:"24",height:"24"},null,8,_Q)):x("",!0),d("span",null,k(n.text),1)])}const wQ=Q(yQ,[["render",bQ],["__scopeId","data-v-ed6ed0f5"]]),SQ={name:"TextItemTableCell",props:{column:Object,property:{type:Object,default(t){return t||{}}},isExpanded:{type:Boolean,default:!1}},inject:["parentItem","isParent","isChild","level","levelPadding","options"],data:function(){return{tdClasss:this.tdClass()}},computed:{text(){return this.property.text}},methods:{iconSource(){return this.isChild?"child-icon":this.isParent?"parent-icon":this.column.iconName},showItems(){this.$emit("showItems","text")},shouldShowExpander(){return!!(this.options.dropItems.items.parents&&this.property.parents&&this.property.parents.length>0||this.options.dropItems.items.children&&this.property.children&&this.property.children.length>0||this.options.dropItems.items.metrics&&this.property.metrics&&this.property.metrics.length>0||this.options.dropItems.items.routines&&this.property.routines&&this.property.routines.length>0||this.options.dropItems.items.todos&&this.property.todos&&this.property.todos.length>0||this.options.dropItems.items.events&&this.property.events&&this.property.events.length>0||this.options.dropItems.items.iterations&&this.property.iterations&&this.property.iterations.length>0)},tdClass(){return this.shouldShowExpander()?this.isExpanded?"column-expanded expandable":"column-collapsed expandable":""},leftPadding(){let t=this.level*this.levelPadding;return this.shouldShowExpander()||(t+=14),t},openItemForm(){this.$emit("openItemForm",{id:this.property.id,itemType:this.property.itemType})}}},TQ=["src"],xQ=["src"];function IQ(t,e,i,s,r,n){return m(),p("td",{class:F(n.tdClass()),style:$e({"padding-left":`${n.leftPadding()}px`})},[n.shouldShowExpander()?(m(),p("img",{key:0,src:i.isExpanded?"/icon/icon-expanded.png":"/icon/icon-collapsed-right.png",width:"14",height:"14",onClick:e[0]||(e[0]=o=>n.showItems())},null,8,TQ)):x("",!0),i.column.iconName&&n.text.toLowerCase()!=""&&i.column.iconName!="metric-icon"?(m(),p("img",{key:1,src:`/icon/${n.iconSource()}.png`,width:"24",height:"24"},null,8,xQ)):x("",!0),d("span",{class:"text",onClick:e[1]||(e[1]=(...o)=>n.openItemForm&&n.openItemForm(...o))},k(n.text),1)],6)}const EQ=Q(SQ,[["render",IQ],["__scopeId","data-v-e1d8672d"]]),DQ={name:"StringItemTableCell",props:{column:Object,property:{type:String,default:""}},computed:{text(){return this.property}}},kQ=["src"];function CQ(t,e,i,s,r,n){return m(),p("td",null,[i.column.iconName&&n.text!=""?(m(),p("img",{key:0,src:`/icon/${i.column.iconName}.png`,width:"24",height:"24"},null,8,kQ)):x("",!0),d("span",null,k(n.text),1)])}const PQ=Q(DQ,[["render",CQ]]),AQ={name:"ObjectArrayItemTableCell",props:{column:Object,property:{type:Array,default(t){return t||[]}},isExpanded:{type:Boolean,default:!1}},inject:["parentItem","isParent","isChild"],computed:{text(){return this.property?ya(this.property,"text"):""},hasIcon(){return this.column.iconName&&this.text.toLowerCase()!=""}},methods:{showItems(){this.$emit("showItems",this.column.text)},shouldShowExpander(){return this.property?this.property.length>0:!1},tdClass(){return this.shouldShowExpander()?this.isExpanded?"column-expanded expandable":"column-collapsed expandable":""}}},RQ=["src"],MQ=["src"];function OQ(t,e,i,s,r,n){return m(),p("td",{class:F([n.tdClass(),i.isExpanded?"expandable":""])},[n.shouldShowExpander()?(m(),p("img",{key:0,class:F(["expander",i.isExpanded?"expanded":"collapsed"]),style:$e({"margin-right":n.hasIcon?"0px":"2px"}),src:i.isExpanded?"/icon/icon-expanded.png":"/icon/icon-collapsed-right.png",width:"14",height:"14",onClick:e[0]||(e[0]=o=>n.showItems())},null,14,RQ)):x("",!0),n.hasIcon?(m(),p("img",{key:1,src:`/icon/${i.column.iconName}.png`,width:"24",height:"24"},null,8,MQ)):x("",!0),d("span",null,k(n.text),1)],2)}const $Q=Q(AQ,[["render",OQ],["__scopeId","data-v-84dfecf9"]]),NQ={name:"ItemTableRow",components:{ArrayLengthItemTableCell:vQ,NumberItemTableCell:wQ,TextItemTableCell:EQ,StringItemTableCell:PQ,ObjectArrayItemTableCell:$Q},props:{item:Object,parent:Object,columns:Array,states:Object},inject:["draggedItem"],data:function(){return{itemTableStore:void 0,position:""}},created:async function(){let t=await K(()=>import("./itemTableStore-dQmyWJIq.js"),[]);this.itemTableStore=t.useItemTableStore()},methods:{toCamelCase:gw,getPosition:WQ,onDragStart:LQ,onDragOver:VQ,onDrop:FQ,onDragLeave:BQ,onDragEnd:zQ,hasSameParent:jQ,property(t){if(t.text=="ID")return this.item.id;if(t.text=="Time")return this.item.timePairs;if(t.text=="Order"){if(this.parent)return this.item.positions.find(e=>e.parentType==this.parent.itemType&&e.parentID==this.parent.id).position}else return t.text=="Repeat"?this.item.repeats?this.item.repeats:[]:this.item[t.text.toLowerCase()]},showItems(t){this.$emit("showItems",this.item.id,t)}}};function LQ(t){console.log("Drag Started"),t.target.classList.add("drag"),t.dataTransfer.dropEffect="move",t.dataTransfer.effectAllowed="move",this.itemTableStore.setDraggedProps(this.item,this.parent)}function VQ(t){if(t.preventDefault(),this.position="",!t.currentTarget.classList.contains("drag")&&(t.preventDefault(),this.hasSameParent())){var e=this.$refs.tr.getBoundingClientRect(),i=t.clientY-e.y,s=i/e.height;s<.5?this.position="before":this.position="after"}}function WQ(t){var e=this.$refs.tr.getBoundingClientRect(),i=t.clientY-e.y,s=i/e.height;s<.5?t.currentTarget.classList.add("before"):t.currentTarget.classList.add("after")}function FQ(t){t.preventDefault();var e=this.itemTableStore.getDragged;this.hasSameParent()&&this.$emit("repositionItem",e.item,this.item,this.position=="before"),this.position=""}function BQ(){this.position=""}function zQ(t){t.target.classList.remove("drag"),this.position="",this.itemTableStore.clearDraggedProps()}function jQ(){var t=this.itemTableStore.getDragged;return!!(this.parent==null&&t.parent==null||this.parent&&t.parent&&this.parent.itemType==t.parent.itemType&&this.parent.id==t.parent.id)}const HQ={class:"d-flex justufy-content-center"};function UQ(t,e,i,s,r,n){const o=$("TextItemTableCell"),a=$("ArrayLengthItemTableCell"),l=$("NumberItemTableCell"),c=$("StringItemTableCell"),f=$("ObjectArrayItemTableCell");return m(),p("tr",{key:i.item.id,ref:"tr",draggable:"true",onDragenter:e[2]||(e[2]=ye(()=>{},["prevent"])),class:F(t.position),onDragstart:e[3]||(e[3]=v=>n.onDragStart(v)),onDragend:e[4]||(e[4]=v=>n.onDragEnd(v)),onDrop:e[5]||(e[5]=v=>n.onDrop(v)),onDragover:e[6]||(e[6]=v=>n.onDragOver(v)),onDragleave:e[7]||(e[7]=v=>n.onDragLeave(v))},[(m(!0),p(L,null,G(i.columns,v=>(m(),p(L,null,[v.type=="Text"?(m(),ie(o,{key:v.position,column:v,property:i.item,isExpanded:i.states.text,onShowItems:n.showItems,onOpenItemForm:e[0]||(e[0]=S=>t.$emit("openItemForm",S))},null,8,["column","property","isExpanded","onShowItems"])):x("",!0),v.type=="ArrayLength"?(m(),ie(a,{key:v.position,column:v,property:n.property(v)},null,8,["column","property"])):x("",!0),v.type=="Number"?(m(),ie(l,{key:v.position,column:v,property:n.property(v),showZero:v.text!="Order"},null,8,["column","property","showZero"])):x("",!0),v.type=="String"?(m(),ie(c,{key:v.position,column:v,property:n.property(v)},null,8,["column","property"])):x("",!0),v.type=="ObjectArray"?(m(),ie(f,{key:v.position,column:v??{iconName:null},property:n.property(v),isExpanded:i.states[v.text.toLowerCase()],onShowItems:n.showItems},null,8,["column","property","isExpanded","onShowItems"])):x("",!0)],64))),256)),d("td",null,[d("div",HQ,[d("button",{class:"delete-btn btn btn-secondary btn-sm float-end",type:"button",onClick:e[1]||(e[1]=ye(v=>t.$emit("deleteItem"),["prevent","stop"]))},e[8]||(e[8]=[d("i",{class:"far fa-trash-alt"},null,-1)]))])])],34)}const GQ=Q(NQ,[["render",UQ],["__scopeId","data-v-913f63f2"]]),YQ=[{propertyText:"Position",text:"Order",type:"Number",width:50,minWidth:50,iconName:null},{propertyText:"ID",text:"ID",type:"Number",width:60,minWidth:60,iconName:null},{propertyText:"Text",text:"Text",type:"Text",width:450,minWidth:150,iconName:"goal-icon"},{propertyText:"Description",text:"Description",type:"String",width:250,minWidth:150,iconName:null},{propertyText:"TimePair",text:"Time",type:"ArrayLength",width:60,minWidth:60,iconName:null},{propertyText:"Repeat",text:"Repeat",type:"ArrayLength",width:60,minWidth:60,iconName:null},{propertyText:"Type",text:"Type",type:"String",width:60,minWidth:60,iconName:null},{propertyText:"Parents",text:"Parents",type:"ObjectArray",width:null,minWidth:150,iconName:"parent-icon"},{propertyText:"Children",text:"Children",type:"ObjectArray",width:null,minWidth:150,iconName:"child-icon"},{propertyText:"Metrics",text:"Metrics",type:"ObjectArray",width:null,minWidth:150,iconName:null},{propertyText:"Goals",text:"Goals",type:"ObjectArray",width:null,minWidth:150,iconName:"goal-icon"},{propertyText:"Todos",text:"Todos",type:"ObjectArray",width:null,minWidth:150,iconName:"todo-icon"},{propertyText:"Routines",text:"Routines",type:"ObjectArray",width:null,minWidth:150,iconName:"routine-icon"},{propertyText:"Iterations",text:"Iterations",type:"ObjectArray",width:null,minWidth:150,iconName:null},{propertyText:"Events",text:"Events",type:"ObjectArray",width:null,minWidth:150,iconName:null}],qQ=X0(()=>K(()=>Promise.resolve().then(()=>fZ),void 0)),KQ={components:{ItemTableRow:GQ,ItemTable:qQ},name:"ItemTableByNone",props:{itemType:String,property:String,selectedColumns:Array,searchTerm:{type:String,default:""},options:{type:Object,default:()=>({showRootOnly:!0,dropItems:{items:{parents:!1,children:!0,metrics:!1,goals:!0,routines:!0,todos:!0},planner:{events:!1,iterations:!1}}})}},provide(){return{options:this.options}},inject:["level","levelPadding","parentItem","isParent","isChild"],data:function(){return{errorMessage:null,isLoading:!1,itemTableVM:null,tableWidth:this.width,shownItems:[],store:null,metricStore:void 0,goalStore:void 0,routineStore:void 0,todoStore:void 0,itemTableStore:void 0}},created:async function(){let t=await K(()=>import("./itemTableStore-dQmyWJIq.js"),[]);this.itemTableStore=t.useItemTableStore();let e=await K(()=>Promise.resolve().then(()=>no),void 0);this.metricStore=e.useMetricStore();let i=await K(()=>Promise.resolve().then(()=>Ni),void 0);this.goalStore=i.useGoalStore();let s=await K(()=>Promise.resolve().then(()=>mn),void 0);this.routineStore=s.useRoutineStore();let r=await K(()=>Promise.resolve().then(()=>hi),void 0);this.todoStore=r.useTodoStore();let o=(await US(Object.assign({"../../../../store/appStore.js":()=>K(()=>Promise.resolve().then(()=>Kn),void 0),"../../../../store/eventStore.js":()=>K(()=>Promise.resolve().then(()=>mo),void 0),"../../../../store/goalStore.js":()=>K(()=>Promise.resolve().then(()=>Ni),void 0),"../../../../store/itemTableStore.js":()=>K(()=>import("./itemTableStore-dQmyWJIq.js"),[]),"../../../../store/iterationStore.js":()=>K(()=>Promise.resolve().then(()=>Et),void 0),"../../../../store/metricStore.js":()=>K(()=>Promise.resolve().then(()=>no),void 0),"../../../../store/physicalStore.js":()=>K(()=>Promise.resolve().then(()=>ww),void 0),"../../../../store/plannerStore.js":()=>K(()=>Promise.resolve().then(()=>ht),void 0),"../../../../store/routineStore.js":()=>K(()=>Promise.resolve().then(()=>mn),void 0),"../../../../store/todoStore.js":()=>K(()=>Promise.resolve().then(()=>hi),void 0),"../../../../store/universalStore.js":()=>K(()=>Promise.resolve().then(()=>bo),void 0),"../../../../store/workoutStore.js":()=>K(()=>Promise.resolve().then(()=>Gl),void 0)}),`../../../../store/${this.itemType}Store.js`,6))[`use${this.itemTypeCapitalized}Store`];this.store=o()},computed:{itemTypeCapitalized(){return wi(this.itemType)},width(){return this.itemTableStore?this.itemTableStore.containerWidth:0},showRootOnly(){return!!(this.options.showRootOnly&&this.searchTerm=="")},columns(){let t=[],e=1,i=this;return this.selectedColumns.forEach(s=>{let r=fe(YQ.find(n=>n.text==s));r.position=e++,s=="Text"&&!i.isParent&&!i.isChild&&(r.iconName=`${this.itemType}-icon`),t.push(r)}),this.setColumnWidths(t),t},items(){if(this.store){let t=this.getStore(this.itemType).getItems();if(this.parentItem){let e=this[`${this.parentItem.itemType}Store`].getItem(this.parentItem.id),i=e[this.property].map(s=>s.id);t=t.filter(s=>i.includes(s.id)),t=t.sort((s,r)=>{let n=s.positions.find(a=>a.parentType==e.itemType&&a.parentID==e.id).position,o=r.positions.find(a=>a.parentType==e.itemType&&a.parentID==e.id).position;return n-o})}else this.showRootOnly&&this.itemType!="metric"&&(t=t.filter(e=>e.parentIDs.length==0)),t=Xu(t,"id");if(this.refreshShownItems(t),this.searchTerm=="")return t;{let e=this;return t.filter(i=>i.text.toLowerCase().includes(e.searchTerm.toLowerCase()))}}else return[]}},methods:{setColumnWidths:JQ,refreshShownItems:QQ,newStateModel:ZQ,getUpdatedSelectedColumns:XQ,getStore(t){return this[`${t}Store`]},states(t){return this.shownItems.find(e=>e.id===t.id).states},showItems(t,e){let i=this.shownItems.find(r=>r.id===t).states,s=!i[e.toLowerCase()];for(let r in i)i[r]=!1;i[e.toLowerCase()]=s},itemPosition(t,e){return t.positions.find(i=>i.parentType==e.itemType&&i.parentID==(e.id||null)).position},repositionItem:eZ,deleteItem:tZ}};function JQ(t){let e=this.width,i=t.map(s=>s.minWidth).reduce((s,r)=>s+r);if(e<=i)t.forEach(s=>{s.setWidth=s.width!=null?s.width:s.minWidth});else if(e>i){let s=t.filter(l=>l.width!=null);s.forEach(l=>l.setWidth=l.width);let r=s.map(l=>l.width).reduce((l,c)=>l+c),n=e-r,o=t.filter(l=>l.width==null),a=n/o.length;o.forEach(l=>l.setWidth=a)}this.tableWidth=t.map(s=>s.setWidth).reduce((s,r)=>s+r)}function QQ(t){if(this.showItems){let e=this;t.forEach(i=>{e.shownItems.find(r=>r.id==i.id)||e.shownItems.push(this.newStateModel(i))})}else{let e=t.map(i=>this.newStateModel(i));this.shownItems=Xu(e,"id")}}function ZQ(t){let e={id:t.id,states:{parents:!1,children:!1,metrics:!1,routines:!1,goals:!1,todos:!1,text:!1}};return delete e[`${this.itemType}s`],e}function XQ(t,e){let i=[...t],s=i.findIndex(r=>r.toLowerCase()==`${e.toLowerCase()}s`);return s>=0&&(i[s]=`${wi(this.itemType)}s`),i}function eZ(t,e,i){var s=this.itemPosition(e,this.parentItem),r=i?s:s+1;this.parentItem&&this.getStore(this.parentItem.itemType).repositionItem(this.parentItem.itemType,this.property,this.parentItem.id,t.id,r)}function tZ(t){this.itemType=="todo"&&this.todoStore.deleteTodo(t)}const iZ={key:0},sZ={key:1},nZ={key:2,class:"row g-0"},rZ={class:"child-row"},oZ=["colspan"];function aZ(t,e,i,s,r,n){const o=$("ItemTableRow"),a=$("ItemTable");return t.errorMessage?(m(),p("div",iZ,k(t.errorMessage),1)):t.isLoading==!0&&!n.parentItem?(m(),p("div",sZ,"Loading...")):(m(),p("div",nZ,[d("div",{class:F([i.itemType,"table col-12"])},[d("table",{class:F(["item table table-sm table-borderless",n.parentItem?"child":""]),style:$e({width:`${t.tableWidth}px`})},[d("thead",{class:F([n.parentItem?"":"sticky-top"])},[d("tr",null,[(m(!0),p(L,null,G(n.columns,l=>(m(),p("th",{key:l.position,style:$e({"min-width":`${l.setWidth}px`,"max-width":`${l.setWidth}px`})},k(l.text),5))),128)),e[7]||(e[7]=d("th",null,null,-1))])],2),d("tbody",null,[(m(!0),p(L,null,G(n.items,l=>(m(),p(L,{key:l.id},[H(o,{item:l,parent:n.parentItem,columns:n.columns,states:n.states(l),onShowItems:n.showItems,onRepositionItem:n.repositionItem,onOpenItemForm:e[0]||(e[0]=c=>t.$emit("openItemForm",c)),onDeleteItem:c=>n.deleteItem(l.id)},null,8,["item","parent","columns","states","onShowItems","onRepositionItem","onDeleteItem"]),d("tr",rZ,[d("td",{colspan:n.columns.length+1},[i.options.dropItems.items.parents&&n.states(l).text||n.states(l).parents?(m(),ie(a,{key:0,itemType:i.itemType,property:"parents",parentItem:l,selectedColumns:i.selectedColumns,isParent:!0,level:n.level+1,onOpenItemForm:e[1]||(e[1]=c=>t.$emit("openItemForm",c))},null,8,["itemType","parentItem","selectedColumns","level"])):x("",!0),i.options.dropItems.items.children&&n.states(l).text||n.states(l).children?(m(),ie(a,{key:1,itemType:i.itemType,property:"children",parentItem:l,selectedColumns:i.selectedColumns,isChild:!0,level:n.level+1,onOpenItemForm:e[2]||(e[2]=c=>t.$emit("openItemForm",c))},null,8,["itemType","parentItem","selectedColumns","level"])):x("",!0),(i.options.dropItems.items.metrics&&n.states(l).text||n.states(l).metrics)&&i.itemType!="metric"?(m(),ie(a,{key:2,itemType:"metric",property:"metrics",parentItem:l,selectedColumns:n.getUpdatedSelectedColumns(i.selectedColumns,"metric"),level:n.level+1,onOpenItemForm:e[3]||(e[3]=c=>t.$emit("openItemForm",c))},null,8,["parentItem","selectedColumns","level"])):x("",!0),(i.options.dropItems.items.goals&&n.states(l).text||n.states(l).goals)&&i.itemType!="goal"?(m(),ie(a,{key:3,itemType:"goal",property:"goals",parentItem:l,selectedColumns:n.getUpdatedSelectedColumns(i.selectedColumns,"goal"),level:n.level+1,onOpenItemForm:e[4]||(e[4]=c=>t.$emit("openItemForm",c))},null,8,["parentItem","selectedColumns","level"])):x("",!0),(i.options.dropItems.items.routines&&n.states(l).text||n.states(l).routines)&&i.itemType!="routine"?(m(),ie(a,{key:4,itemType:"routine",property:"routines",parentItem:l,selectedColumns:n.getUpdatedSelectedColumns(i.selectedColumns,"routine"),level:n.level+1,onOpenItemForm:e[5]||(e[5]=c=>t.$emit("openItemForm",c))},null,8,["parentItem","selectedColumns","level"])):x("",!0),(i.options.dropItems.items.todos&&n.states(l).text||n.states(l).todos)&&i.itemType!="todo"?(m(),ie(a,{key:5,itemType:"todo",property:"todos",parentItem:l,selectedColumns:n.getUpdatedSelectedColumns(i.selectedColumns,"todo"),level:n.level+1,onOpenItemForm:e[6]||(e[6]=c=>t.$emit("openItemForm",c))},null,8,["parentItem","selectedColumns","level"])):x("",!0)],8,oZ)])],64))),128))])],6)],2)]))}const lZ=Q(KQ,[["render",aZ],["__scopeId","data-v-5b4a6d93"]]),dZ={components:{ItemTableByNone:lZ},name:"ItemTable",props:{itemType:String,property:String,selectedColumns:Array,sortBy:{type:String,default:"None"},searchTerm:{type:String,default:""},level:{type:Number,default:0},parentItem:Object,isParent:Boolean,isChild:Boolean},provide(){return{level:this.level,levelPadding:this.levelPadding,parentItem:this.parentItem,isParent:this.isParent,isChild:this.isChild}},data:function(){return{levelPadding:18}}},uZ={ref:"tableContainer"},cZ={key:0,class:"w-100"};function hZ(t,e,i,s,r,n){const o=$("ItemTableByNone");return m(),p("div",uZ,[i.selectedColumns?(m(),p("div",cZ,[i.sortBy=="None"?(m(),ie(o,{key:0,itemType:i.itemType,searchTerm:i.searchTerm,property:i.property,selectedColumns:i.selectedColumns,onOpenItemForm:e[0]||(e[0]=a=>t.$emit("openItemForm",a))},null,8,["itemType","searchTerm","property","selectedColumns"])):x("",!0)])):x("",!0)],512)}const GS=Q(dZ,[["render",hZ]]),fZ=Object.freeze(Object.defineProperty({__proto__:null,default:GS},Symbol.toStringTag,{value:"Module"}));var iy=[{id:87,text:"Date"},{id:88,text:"Time"},{id:89,text:"DateTime"}];const mZ={name:"TimeInput",props:{time:Object,momentID:Number,canRemove:{type:Boolean,default:!0}},data:function(){return{momentTypes:iy,dateTimeString:"",timezoneOffset:""}},created:function(){this.dateTimeString=this.getDateTimeString(),this.timezoneOffset=this.toTimezoneOffset(this.time.dateTime)},computed:{type(){return iy.find(t=>t.id==this.time.idMoment).text}},methods:{getMomentID:pZ,getDateTimeString:gZ,toDateString:ec,toTimeString:DP,toDateTimeString:kP,toTimezoneOffset:vw,onChange:vZ},watch:{momentID(){this.dateTimeString=this.getDateTimeString()},"time.dateTime"(){this.dateTimeString=this.getDateTimeString(),this.timezoneOffset=this.toTimezoneOffset(this.time.dateTime)}}};function pZ(t){return this.momentTypes.find(e=>e.text==t).id}function gZ(){let e=new Date(this.time.dateTime).toJSON();if(this.time.idMoment==87){let s=e.split("T")[0].split("-");return`${s[0]}-${s[1]}-${s[2]}`}else if(this.time.idMoment==88){let s=e.split("T")[1].split(":");return`${s[0]}:${s[1]}`}else if(this.time.idMoment==89){let i=e.split("T"),s=i[0].split("-"),r=i[1].split(":");return`${s[0]}-${s[1]}-${s[2]} ${r[0]}:${r[1]}`}}function vZ(t){t=t.currentTarget.value;let e;if(t=="")this.canRemove&&this.$emit("removeTime");else{if(this.type=="Date")e=new Date(t+" 00:00:00").toJSON();else if(this.type=="Time"){let i=this.toDateString(new Date().toJSON());e=new Date(i+" "+t).toJSON()}else this.type=="DateTime"&&(e=new Date(t).toJSON());this.dateTimeString=t,this.$emit("setTime",e)}}const yZ=["value"],_Z=["value"],bZ=["value"];function wZ(t,e,i,s,r,n){return m(),p("div",null,[n.type=="Date"?(m(),p("input",{key:0,class:"date-picker",type:"date",value:t.dateTimeString,onChange:e[0]||(e[0]=(...o)=>n.onChange&&n.onChange(...o))},null,40,yZ)):x("",!0),n.type=="Time"?(m(),p("input",{key:1,class:"date-picker",type:"time",value:t.dateTimeString,onChange:e[1]||(e[1]=(...o)=>n.onChange&&n.onChange(...o))},null,40,_Z)):x("",!0),n.type=="DateTime"?(m(),p("input",{key:2,class:"date-picker",type:"datetime-local",value:t.dateTimeString,onChange:e[2]||(e[2]=(...o)=>n.onChange&&n.onChange(...o))},null,40,bZ)):x("",!0)])}const SZ=Q(mZ,[["render",wZ],["__scopeId","data-v-43f421fc"]]);var sy=[{id:87,text:"Date"},{id:88,text:"Time"},{id:89,text:"DateTime"}];const TZ={name:"TimeControl",components:{TimeInput:SZ},props:{title:String,time:Object,endpoint:String,type:String,canRemove:{type:Boolean,default:!0},isSet:{type:Boolean,default:!0}},data:function(){return{moment:this.time?fe(sy.find(t=>t.id==this.time.idMoment)):null}},methods:{addTime:function(){this.$emit("addTime",this.endpoint,this.type)},setTime(t){this.$emit("setTime",t,this.endpoint,this.type)},removeTime:function(){this.$emit("removeTime")}},watch:{time(t){this.moment=t?fe(sy.find(e=>e.id==this.time.idMoment)):null}}},xZ={class:"d-flex flex-column"},IZ={class:"d-flex flex-row justify-content-between"};function EZ(t,e,i,s,r,n){const o=$("TimeInput");return m(),p("div",xZ,[d("div",IZ,[d("label",{class:"control-label",for:"description",onClick:e[0]||(e[0]=(...a)=>n.addTime&&n.addTime(...a))},k(i.title?i.title:i.endpoint),1)]),i.time&&i.isSet?(m(),ie(o,{key:0,time:i.time,momentID:i.time.idMoment,canRemove:i.canRemove,onSetTime:n.setTime,onRemoveTime:n.removeTime},null,8,["time","momentID","canRemove","onSetTime","onRemoveTime"])):x("",!0)])}const zm=Q(TZ,[["render",EZ],["__scopeId","data-v-feb82ebb"]]),uc="/icon/calendar-day.png";let ny=[{id:63,text:"Day",isActive:!0},{id:68,text:"Week",isActive:!0},{id:69,text:"Month",isActive:!0},{id:72,text:"Tri",isActive:!1},{id:74,text:"Semi",isActive:!1},{id:75,text:"Year",isActive:!1}],DZ=[{index:1,text:"Sunday",alt:"S",isSelected:!1},{index:2,text:"Monday",alt:"M",isSelected:!1},{index:3,text:"Tuesday",alt:"T",isSelected:!1},{index:4,text:"Wednesday",alt:"W",isSelected:!1},{index:5,text:"Thursday",alt:"T",isSelected:!1},{index:6,text:"Friday",alt:"F",isSelected:!1},{index:7,text:"Saturday",alt:"S",isSelected:!1}],kZ=[{id:140,text:"Self"},{id:141,text:"Children"},{id:142,text:"Descendants"}];const CZ={name:"RepeatControl",components:{TimeControl:zm},props:{repeat:Object,itemID:Number,itemType:String,canEdit:Boolean},data:function(){return{todoStore:void 0,routineStore:void 0,plannerStore:void 0,timeframes:fe(ny),inheritanceTypes:fe(kZ),updatedRepeat:void 0,todoRepeats:[],isEditing:!1,isValid:!0}},created:async function(){let t=await K(()=>Promise.resolve().then(()=>hi),void 0);this.todoStore=t.useTodoStore();let e=await K(()=>Promise.resolve().then(()=>mn),void 0);this.routineStore=e.useRoutineStore();let i=await K(()=>Promise.resolve().then(()=>ht),void 0);this.plannerStore=i.usePlannerStore(),this.repeat.id<0&&(this.isEditing=!0)},computed:{selectedDate(){return this.plannerStore?this.plannerStore.selectedDate:Tt()},isArchived(){return!!(this.repeat.endDate&&+new Date(this.repeat.endDate)<+Tt())},timeframe(){let t=this.isEditing?this.updatedRepeat:this.repeat;return ny.find(i=>i.id==t.idTimeframe).text.toLowerCase()},frequency(){let t=this.isEditing?this.updatedRepeat:this.repeat;return t.frequency==1?"Once":`${t.frequency} times`},daysOfWeek(){let t="";return this.repeat.idTimeframe==68&&this.repeat.dayIndecies.forEach(e=>{let i=this.dow.find(s=>s.index==e).text;t+=`${i} `}),t},daysOfMonth(){let t="";return this.repeat.dayIndecies.forEach(e=>{e==1?t+="1st ":e==2?t+="2nd ":e==3?t+="3rd ":e>3&&(t+=`${e}th `)}),t},dow(){let t=[];return DZ.forEach(e=>{let i=fe(e);t.push(i),this.updatedRepeat&&this.updatedRepeat.idTimeframe==68&&(i.isSelected=this.updatedRepeat.dayIndecies.includes(i.index))}),t},dom(){var t=[];for(let e=1;e<=31;e++){let i={index:e};t.push(i),this.updatedRepeat.idTimeframe==69&&(i.isSelected=this.updatedRepeat.dayIndecies.includes(i.index))}return t},numInputWidth(){return this.updatedRepeat.interval<10?"25px":this.updatedRepeat.interval<100?"34px":"41px"},minFrequency(){return this.updatedRepeat.dayIndecies.length>0?this.updatedRepeat.dayIndecies.length:1},maxFrequency(){return this.updatedRepeat.idTimeframe==68?7:this.updatedRepeat.idTimeframe==69?31:"none"},deleteFutureText(){return this.plannerStore&&this.selectedDate<Tt()?`Delete Future ${Ww(this.selectedDate)}`:"Delete Future"}},methods:{initUpdatedRepeat:PZ,onRepeatClicked:AZ,onDayClicked:RZ,onTimeFrameChanged:MZ,addTime:OZ,setTime:$Z,removeTime:NZ,validateTimes:LZ,toggleTodoRepeat(t){t.isShown=!t.isShown},cancel(){this.isEditing=!1,this.$emit("cancelRepeatEditing",this.repeat.id)},save:VZ,deleteOrArchive:WZ,refreshRepetition:FZ,deleteFutureRepetitions:BZ},watch:{isEditing(t){t==!0&&this.initUpdatedRepeat()}}};function PZ(){this.updatedRepeat=fe(this.repeat),this.updatedRepeat.idTimeframe==68&&this.updatedRepeat.dayIndecies.forEach(e=>{let i=this.dow.find(s=>s.index==e);i.isSelected=!0}),["startRepeat","endRepeat","startIteration","endIteration"].forEach(e=>{this.updatedRepeat[e]={isEdited:!1,isRemoved:!1,isValid:!0,value:this.updatedRepeat[e]?fe(this.updatedRepeat[e]):null,oldValue:this.updatedRepeat[e]?fe(this.updatedRepeat[e]):null}}),this.validateTimes()}function AZ(){this.canEdit&&(this.isEditing=!0,this.$emit("setSelectedRepeat",this.repeat.id))}function RZ(t){if(t.isSelected=!t.isSelected,t.isSelected)this.updatedRepeat.dayIndecies.push(t.index),this.updatedRepeat.frequency<this.updatedRepeat.dayIndecies.length&&(this.updatedRepeat.frequency=this.updatedRepeat.dayIndecies.length);else{let e=this.updatedRepeat.dayIndecies.findIndex(i=>i==t.index);this.updatedRepeat.dayIndecies.splice(e,1),this.updatedRepeat.frequency!=1&&(this.updatedRepeat.frequency-=1)}this.updatedRepeat.dayIndecies=this.updatedRepeat.dayIndecies.sort(function(e,i){return e-i})}function MZ(){this.updatedRepeat.interval=1,this.updatedRepeat.frequency=1,this.updatedRepeat.dayIndecies=[]}function OZ(t,e){var i;t.toLowerCase()=="start"?i=84:t.toLowerCase()=="end"&&(i=85);var s;e.toLowerCase()=="repeat"?s=87:e.toLowerCase()=="iteration"&&(s=88);var r=ec(new Date().toJSON());this.updatedRepeat[`${t.toLowerCase()}${wi(e)}`]={isEdited:!1,isRemoved:!1,isValid:!0,value:{idEndpoint:i,idMoment:s,idType:80,dateTime:r},oldValue:{idEndpoint:i,idMoment:s,idType:80,dateTime:r}}}function $Z(t,e,i){let s=this.updatedRepeat[`${e.toLowerCase()}${wi(i)}`];s.value.dateTime=t,s.oldValue.dateTime!=t&&s.oldValue.id?s.isEdited=!0:s.isEdited=!1,this.validateTimes()}function NZ(t){t.isRemoved=!0}function LZ(){this.updatedRepeat.endRepeat.value&&+new Date(this.updatedRepeat.startRepeat.value.dateTime)>+new Date(this.updatedRepeat.endRepeat.value.dateTime)?(this.isValid=!1,this.updatedRepeat.startRepeat.isValid=!1,this.updatedRepeat.endRepeat.isValid=!1):(this.isValid=!0,this.updatedRepeat.startRepeat.isValid=!0,this.updatedRepeat.endRepeat.isValid=!0),this.updatedRepeat.startIteration.value&&this.updatedRepeat.endIteration.value&&+new Date(this.updatedRepeat.startIteration.value.dateTime)>=+new Date(this.updatedRepeat.endIteration.value.dateTime)?(this.isValid=!1,this.updatedRepeat.startIteration.isValid=!1,this.updatedRepeat.endIteration.isValid=!1):(this.isValid=!0,this.updatedRepeat.startIteration.isValid=!0,this.updatedRepeat.endIteration.isValid=!0)}function VZ(){let t={id:this.updatedRepeat.id,idInheritance:this.updatedRepeat.idInheritance,isOwner:!0,itemID:this.itemID,itemType:this.itemType.toLowerCase(),idTimeframe:this.updatedRepeat.idTimeframe,idType:this.updatedRepeat.idType,points:this.updatedRepeat.points||null,interval:this.updatedRepeat.interval,frequency:this.updatedRepeat.frequency,dayIndecies:this.updatedRepeat.dayIndecies,startRepeat:this.updatedRepeat.startRepeat,endRepeat:this.updatedRepeat.endRepeat.value?this.updatedRepeat.endRepeat:null,startIteration:this.updatedRepeat.startIteration.value?this.updatedRepeat.startIteration:null,endIteration:this.updatedRepeat.endIteration.value?this.updatedRepeat.endIteration:null,isEventVisible:this.updatedRepeat.isEventVisible,isRecommended:this.updatedRepeat.isRecommended};this.itemType.toLowerCase()=="routine"?this.routineStore.saveRepeat(t):this.itemType.toLowerCase()=="todo"&&this.todoStore.saveRepeat(t),this.$emit("saveRepeat",t),this.isEditing=!1}function WZ(){this.todoStore.deleteOrArchiveRepeat(this.repeat.id)}function FZ(){this.$emit("refreshRepetition",this.repeat.id),this.isEditing=!1}function BZ(){this.$emit("deleteFutureRepetitions",this.repeat.id,this.selectedDate),this.isEditing=!1}const zZ={class:"d-flex flex-row"},jZ={class:"d-flex flex-column"},HZ={class:"timeframe d-flex flex-column"},UZ={class:"blue"},GZ={class:"blue"},YZ={key:0},qZ={class:"blue"},KZ={key:1},JZ={class:"blue"},QZ={class:"d-flex flew-rowalign-middle mt-2"},ZZ=["id","value"],XZ=["for"],eX={class:"interval d-flex flew-row mb-1"},tX={class:"d-flex flex-row"},iX={class:"me-1"},sX=["min","max"],nX={key:0},rX=["onClick"],oX={key:1},aX={class:"day-of-month d-flex flex-row flex-wrap"},lX=["onClick"],dX={class:"d-flex flex-column"},uX={class:"d-flex flex-column"},cX={class:"d-flex flex-column"},hX={class:"d-flex flex-column"},fX={class:"d-flex flex-column"},mX={class:"d-flex flex-column"},pX={class:"d-flex flex-column"},gX=["value"],vX={class:"points d-flex flex-row align-items-center mt-1"},yX={class:"form-check"},_X={class:"form-check"},bX={class:"d-flex flex-row justify-content-between"},wX={class:"d-flex justify-content-start"},SX={class:"d-flex justify-content-end"};function TX(t,e,i,s,r,n){const o=$("TimeControl");return m(),p("div",null,[t.isEditing?x("",!0):(m(),p("div",{key:0,class:F(["wrapper d-flex flex-row justify-content-between",{archived:n.isArchived}]),onClick:e[1]||(e[1]=(...a)=>n.onRepeatClicked&&n.onRepeatClicked(...a))},[d("div",zZ,[d("div",jZ,[e[15]||(e[15]=d("img",{src:uc,width:"14",height:"14"},null,-1)),d("span",null,k(i.repeat.id),1)]),d("div",HZ,[d("div",null,[e[16]||(e[16]=d("span",null,"Every",-1)),d("span",null,k(i.repeat.interval==1?" ":` ${i.repeat.interval} `),1),d("span",UZ,k(i.repeat.interval==1?n.timeframe:`${n.timeframe}s`),1)]),d("div",null,[d("span",GZ,k(n.frequency),1),e[17]||(e[17]=d("span",null," a ",-1)),d("span",null,k(n.timeframe),1)]),i.repeat.idTimeframe==68&&i.repeat.dayIndecies.length>0?(m(),p("div",YZ,[e[18]||(e[18]=d("span",null,"On ",-1)),d("span",qZ,k(n.daysOfWeek),1)])):x("",!0),i.repeat.idTimeframe==69&&i.repeat.dayIndecies.length>0?(m(),p("div",KZ,[e[19]||(e[19]=d("span",null,"On the ",-1)),d("span",JZ,k(n.daysOfMonth),1)])):x("",!0)])]),d("button",{class:"btn-close",type:"button","aria-label":"close",onClick:e[0]||(e[0]=ye((...a)=>n.deleteOrArchive&&n.deleteOrArchive(...a),["stop"]))})],2)),t.isEditing?(m(),p("div",{key:1,class:F(["wrapper-edit d-flex flex-row",{isValid:t.isValid}])},[d("div",null,[d("div",QZ,[(m(!0),p(L,null,G(t.timeframes.filter(a=>a.isActive),a=>(m(),p("div",{key:a.id,class:"form-check form-check-inline"},[X(d("input",{class:"form-check-input",type:"radio",id:a.text,value:a.id,"onUpdate:modelValue":e[2]||(e[2]=l=>t.updatedRepeat.idTimeframe=l),onClick:e[3]||(e[3]=(...l)=>n.onTimeFrameChanged&&n.onTimeFrameChanged(...l))},null,8,ZZ),[[Hr,t.updatedRepeat.idTimeframe]]),d("label",{class:"form-check-label",for:a.text},k(a.text),9,XZ)]))),128))]),d("div",eX,[d("div",tX,[e[20]||(e[20]=d("span",{class:"me-1"},"Every",-1)),X(d("input",{class:"form-control form-control-sm me-1",type:"number",min:"1","onUpdate:modelValue":e[4]||(e[4]=a=>t.updatedRepeat.interval=a),style:$e({width:n.numInputWidth}),required:""},null,4),[[Ae,t.updatedRepeat.interval]]),d("span",iX,k(t.updatedRepeat.interval==1?n.timeframe:`${n.timeframe}s`),1),X(d("input",{class:"form-control form-control-sm me-1",type:"number","onUpdate:modelValue":e[5]||(e[5]=a=>t.updatedRepeat.frequency=a),min:n.minFrequency,max:n.maxFrequency,style:$e({width:n.numInputWidth}),required:""},null,12,sX),[[Ae,t.updatedRepeat.frequency]]),e[21]||(e[21]=d("span",{class:"me-1"},"times a",-1)),d("span",null,k(n.timeframe),1)])]),t.updatedRepeat.idTimeframe==68?(m(),p("div",nX,[e[22]||(e[22]=d("span",{class:"head"},"Days of Week",-1)),d("div",null,[(m(!0),p(L,null,G(n.dow,a=>(m(),p("span",{key:a.index,class:F(["day",{selected:a.isSelected}]),onClick:l=>n.onDayClicked(a)},k(a.alt),11,rX))),128))])])):x("",!0),t.updatedRepeat.idTimeframe==69?(m(),p("div",oX,[e[23]||(e[23]=d("span",{class:"head"},"Days of Month",-1)),d("div",aX,[(m(!0),p(L,null,G(n.dom,a=>(m(),p("span",{key:a.index,class:F(["day",{selected:a.isSelected}]),onClick:l=>n.onDayClicked(a)},k(a.index),11,lX))),128))])])):x("",!0),d("div",dX,[d("div",uX,[H(o,{class:F(["time-control",{invalid:!t.updatedRepeat.startRepeat.isValid}]),label:"Repeat Start",time:t.updatedRepeat.startRepeat.value,title:"Repeat Start",endpoint:"Start",type:"repeat",canRemove:!1,onSetTime:n.setTime},null,8,["class","time","onSetTime"])]),d("div",cX,[H(o,{class:F(["time-control",{invalid:!t.updatedRepeat.endRepeat.isValid}]),label:"Repeat End",time:t.updatedRepeat.endRepeat.value,title:"Repeat End",endpoint:"End",type:"repeat",isSet:!t.updatedRepeat.endRepeat.isRemoved,onAddTime:n.addTime,onSetTime:n.setTime,onRemoveTime:e[6]||(e[6]=a=>n.removeTime(t.updatedRepeat.endRepeat))},null,8,["class","time","isSet","onAddTime","onSetTime"])])]),d("div",hX,[d("div",fX,[H(o,{class:F(["time-control",{invalid:!t.updatedRepeat.startIteration.isValid}]),label:"Iteration Start",time:t.updatedRepeat.startIteration.value,canRemove:!1,title:"Iteration Start",type:"iteration",endpoint:"Start",isSet:!t.updatedRepeat.startIteration.isRemoved,onAddTime:n.addTime,onSetTime:n.setTime},null,8,["class","time","isSet","onAddTime","onSetTime"])]),d("div",mX,[H(o,{class:F(["time-control",{invalid:!t.updatedRepeat.endIteration.isValid}]),label:"Iteration End",time:t.updatedRepeat.endIteration.value,canRemove:!1,title:"Iteration End",type:"iteration",endpoint:"End",isSet:!t.updatedRepeat.endIteration.isRemoved,onAddTime:n.addTime,onSetTime:n.setTime},null,8,["class","time","isSet","onAddTime","onSetTime"])])]),d("div",pX,[X(d("select",{class:"form-select panel-select","aria-label":"select","onUpdate:modelValue":e[7]||(e[7]=a=>t.updatedRepeat.idInheritance=a)},[(m(!0),p(L,null,G(t.inheritanceTypes,a=>(m(),p("option",{key:a.id,value:a.id},k(a.text),9,gX))),128))],512),[[Ts,t.updatedRepeat.idInheritance]])]),d("div",vX,[e[24]||(e[24]=d("span",{class:"me-1"},"Points",-1)),X(d("input",{class:"form-control form-control-sm me-1",type:"number",min:"1","onUpdate:modelValue":e[8]||(e[8]=a=>t.updatedRepeat.points=a),style:{width:"41px"},required:""},null,512),[[Ae,t.updatedRepeat.points]])]),d("div",yX,[X(d("input",{class:"form-check-input mt-1",type:"checkbox",value:"",id:"isEventVisible","onUpdate:modelValue":e[9]||(e[9]=a=>t.updatedRepeat.isEventVisible=a)},null,512),[[ji,t.updatedRepeat.isEventVisible]]),e[25]||(e[25]=d("label",{class:"form-check-label float-start",for:"isEventVisible"}," Is Event Visible ",-1))]),d("div",_X,[X(d("input",{class:"form-check-input mt-1",type:"checkbox",value:"",id:"flexCheckDefault","onUpdate:modelValue":e[10]||(e[10]=a=>t.updatedRepeat.isRecommended=a)},null,512),[[ji,t.updatedRepeat.isRecommended]]),e[26]||(e[26]=d("label",{class:"form-check-label float-start",for:"flexCheckDefault"}," Recommended ",-1))]),d("div",bX,[d("div",wX,[d("button",{class:"btn btn-sm btn-link",type:"button",onClick:e[11]||(e[11]=(...a)=>n.refreshRepetition&&n.refreshRepetition(...a))},"Refresh"),d("button",{class:"btn btn-sm btn-link",type:"button",onClick:e[12]||(e[12]=(...a)=>n.deleteFutureRepetitions&&n.deleteFutureRepetitions(...a))},k(n.deleteFutureText),1)]),d("div",SX,[d("button",{class:"btn btn-sm btn-link",type:"button",onClick:e[13]||(e[13]=(...a)=>n.save&&n.save(...a))},"Save"),d("button",{class:"btn btn-sm btn-link",type:"button",onClick:e[14]||(e[14]=(...a)=>n.cancel&&n.cancel(...a))},"Cancel")])])])],2)):x("",!0)])}const jm=Q(CZ,[["render",TX],["__scopeId","data-v-7f337e5b"]]),xX={name:"TodoFormItem",components:{RepeatControl:jm},props:{mapperId:Number,id:Number,parentID:Number,parentType:String,displayedRepeatID:Number,parentRepeatIDs:Array,routineRepeatIDs:Array},data:function(){return{store:null,repeatsShown:!1}},created:async function(){this.store=vr()},computed:{todo(){return this.store?this.store.getItem(this.id):null},metricString(){return ya(this.todo.metrics,"text")},repeats(){let t=[];return["goal","todo"].includes(this.parentType)?t=this.todo.repeats.filter(e=>this.parentRepeatIDs.includes(e.id)):this.parentType=="routine"&&(t=this.todo.repeats.filter(e=>this.routineRepeatIDs.includes(e.routineRepeatID))),t?t.filter(e=>fe(e)):[]},repeat(){if(this.displayedRepeatID){let t;return["goal","todo"].includes(this.parentType)?t=this.todo.repeats.find(e=>e.id==this.displayedRepeatID):this.parentType=="routine"&&(t=this.todo.repeats.find(e=>e.routineRepeatID==this.displayedRepeatID)),t?fe(t):null}else return null}},methods:{}},IX={key:0,class:"wrapper d-flex flex-column"},EX={class:"d-flex flex-column flex-grow-1"},DX={class:"d-flex flex-row justify-content-between flex-grow-1"},kX={class:"d-flex flex-row"},CX={class:"id"},PX={key:0,class:"mapper-id"},AX={class:"text"},RX={key:0};function MX(t,e,i,s,r,n){const o=$("RepeatControl");return n.todo?(m(),p("div",IX,[d("div",{class:"todo-form-item d-flex flex-row",onClick:e[1]||(e[1]=a=>t.repeatsShown=!t.repeatsShown)},[e[2]||(e[2]=d("img",{src:ql,width:"18",height:"18"},null,-1)),d("div",EX,[d("div",DX,[d("div",kX,[d("span",CX,k(n.todo.id),1),i.mapperId?(m(),p("span",PX,k(i.mapperId),1)):x("",!0),d("span",AX,k(n.todo.text),1)]),d("button",{class:"btn-close mt-auto mb-auto",type:"button","aria-label":"close",onClick:e[0]||(e[0]=ye(a=>t.$emit("removeItem"),["stop"]))})])])]),t.repeatsShown?(m(),p("div",RX,[(m(!0),p(L,null,G(n.repeats,a=>(m(),ie(o,{key:a.id,repeat:a,itemID:i.id,itemType:"todo"},null,8,["repeat","itemID"]))),128))])):x("",!0)])):x("",!0)}const YS=Q(xX,[["render",MX],["__scopeId","data-v-8108227d"]]),OX={name:"GoalTimePairControl",components:{TimeControl:zm,TodoFormItem:YS},props:{timePair:Object,itemID:Number,canEdit:Boolean},data:function(){return{goalStore:null,updatedTimePair:void 0,inheritanceTypes:fe(Uw),timeframes:fe(_r),TIMEFRAME:fe(Hi),MOMENT:fe(Jf),TIMETYPE:fe(yb),isEditing:!1,isValid:!0,todoID:void 0}},created:async function(){let t=await K(()=>Promise.resolve().then(()=>Ni),void 0);this.goalStore=t.useGoalStore(),this.timePair.id<0&&(this.isEditing=!0);let e=this;this.inheritanceTypes.forEach(i=>{i.isSelected=e.timePair.idInheritance==i.id})},computed:{timeframe(){let t=this.isEditing?this.updatedTimePair:this.timePair,e=_r.find(i=>i.id==t.idTimeframe);return e?e.text:""}},methods:{initUpdatedTimePair:$X,timeModelToString:Mw,onTimePairClicked:NX,deleteTimePair:KX,toggleInheritance:LX,isInheritanceSelected:FX,toggleTimeframe:VX,isTimeframeSelected:BX,correctTimes:WX,addTime:zX,setTime:jX,removeTime:HX,validateTimes:UX,addTodo:GX,removeTodo:YX,save:qX,cancel:JX},watch:{isEditing(t){t==!0&&this.initUpdatedTimePair()}}};function $X(){this.updatedTimePair=fe(this.timePair),["startTime","endTime"].forEach(e=>{this.updatedTimePair[e]={isEdited:!1,isRemoved:!1,isValid:!0,value:this.updatedTimePair[e]?fe(this.updatedTimePair[e]):null,oldValue:this.updatedTimePair[e]?fe(this.updatedTimePair[e]):null}}),this.validateTimes()}function NX(){this.canEdit&&(this.isEditing=!0,this.$emit("setSelectedTimePair",this.timePair.id))}function LX(t){this.updatedTimePair.idInheritance=t,this.inheritanceTypes.forEach(e=>{e.isSelected=e.id==t})}function VX(t){let e=this;this.timeframes.forEach(i=>{i.id!=t?i.isSelected=!1:e.updatedTimePair.idTimeframe?e.updatedTimePair.idTimeframe!=t?(e.updatedTimePair.idTimeframe=t,i.isSelected=!0):(e.updatedTimePair.idTimeframe=void 0,i.isSelected=!1):(e.updatedTimePair.idTimeframe=t,i.isSelected=!0)}),this.correctTimes()}function WX(){let t=this.updatedTimePair.idTimeframe,e=this.updatedTimePair.startTime.value,i=this.updatedTimePair.endTime.value;t==this.TIMEFRAME.DAY?e?i.dateTime=new Date(e.dateTime).toJSON():i&&(e.dateTime=new Date(i.dateTime).toJSON()):t==this.TIMEFRAME.WEEK?e?(e.dateTime=ei(e.dateTime).toJSON(),i.dateTime=ft(li(e.dateTime)).toJSON()):i&&(e.dateTime=ei(i.dateTime).toJSON(),i.dateTime=ft(li(i.dateTime)).toJSON()):t==this.TIMEFRAME.MONTH?e?(e.dateTime=ti(e.dateTime).toJSON(),i.dateTime=ft(fi(e.dateTime)).toJSON()):i&&(e.dateTime=ti(i.dateTime).toJSON(),i.dateTime=ft(fi(i.dateTime)).toJSON()):t==this.TIMEFRAME.YEAR?e?(e.dateTime=wa(e.dateTime).toJSON(),i.dateTime=ft(Xi(e.dateTime)).toJSON()):i&&(e.dateTime=Xi(i.dateTime).toJSON(),i.dateTime=ft(Xi(i.dateTime)).toJSON()):t==this.TIMEFRAME.MILESTONE&&(this.updatedTimePair.endTime.value=void 0),new Date(e.dateTime)!=new Date(this.updatedTimePair.startTime.oldValue.dateTime)?this.updatedTimePair.startTime.isEdited=!0:this.updatedTimePair.startTime.isEdited=!1,new Date(i.dateTime)!=new Date(this.updatedTimePair.endTime.oldValue.dateTime)?this.updatedTimePair.endTime.isEdited=!0:this.updatedTimePair.endTime.isEdited=!1,this.validateTimes()}function FX(t){return this.updatedTimePair.idInheritance==t}function BX(t){return this.updatedTimePair.idTimeframe==t}function zX(t){var e;t.toLowerCase()=="start"?e=84:t.toLowerCase()=="end"&&(e=85);var i=this.MOMENT.DATETIME,s=$t().toJSON();this.updatedTimePair[`${t.toLowerCase()}Time`]={isEdited:!1,isRemoved:!1,isValid:!0,value:{idEndpoint:e,idMoment:i,idType:80,dateTime:s},oldValue:{idEndpoint:e,idMoment:i,idType:80,dateTime:s}},this.correctTimes()}function jX(t,e){e=e.toLowerCase();let i=this.updatedTimePair[`${e}Time`];i.value.dateTime=t,i.oldValue.dateTime!=t&&i.oldValue.id?i.isEdited=!0:i.isEdited=!1;let s=this.updatedTimePair.startTime.value,r=this.updatedTimePair.endTime.value;this.updatedTimePair.idTimeframe?this.updatedTimePair.idTimeframe==this.TIMEFRAME.DAY?e=="start"?r.dateTime=t:e=="end"&&(s.dateTime=t):this.updatedTimePair.idTimeframe==this.TIMEFRAME.WEEK?e=="start"?(s.dateTime=ei(new Date(t)).toJSON(),r.dateTime=ft(li(new Date(t))).toJSON()):e=="end"&&(s.dateTime=ei(new Date(t)).toJSON(),r.dateTime=ft(li(new Date(t))).toJSON()):this.updatedTimePair.idTimeframe==this.TIMEFRAME.MONTH?e=="start"?(s.dateTime=ti(new Date(t)).toJSON(),r.dateTime=ft(fi(new Date(t))).toJSON()):e=="end"&&(s.dateTime=ti(new Date(t)).toJSON(),r.dateTime=ft(fi(new Date(t))).toJSON()):this.updatedTimePair.idTimeframe==this.TIMEFRAME.YEAR&&(e=="start"?(s.dateTime=wa(new Date(t)).toJSON(),r.dateTime=ft(Xi(new Date(t))).toJSON()):e=="end"&&(s.dateTime=Xi(new Date(t)).toJSON(),r.dateTime=ft(Xi(new Date(t))).toJSON())):e=="start"&&r.dateTime?+new Date(r.dateTime)<+new Date(t)&&(r.dateTime=t):e=="end"&&s.dateTime&&+new Date(s.dateTime)>+new Date(t)&&(s.dateTime=t),this.validateTimes()}function HX(t,e){t.value.id?(t.isEdited=!1,t.isRemoved=!0):this.updatedTimePair.endTime.value=void 0}function UX(){this.updatedTimePair.startTime.value&&this.updatedTimePair.endTime.value&&(+new Date(this.updatedTimePair.startTime.value.dateTime)>+new Date(this.updatedTimePair.endTime.value.dateTime)?(this.isValid=!1,this.updatedTimePair.startTime.isValid=!1,this.updatedTimePair.endTime.isValid=!1):(this.isValid=!0,this.updatedTimePair.startTime.isValid=!0,this.updatedTimePair.endTime.isValid=!0))}function GX(){var t=this.updatedTimePair.todoIDs.findIndex(e=>e==this.todoID);t==-1&&(this.updatedTimePair.todoIDs.push(this.todoID),this.updatedTimePair.goalTimePairTodos.push({id:void 0,timePairID:this.updatedTimePair.id,todoID:this.todoID})),this.todoID=void 0}function YX(t){let e=this.updatedTimePair.todoIDs.findIndex(i=>i==t);this.updatedTimePair.todoIDs.splice(e,1),e=this.updatedTimePair.goalTimePairTodos.findIndex(i=>i.todoID==t),this.updatedTimePair.goalTimePairTodos.splice(e,1)}function qX(){let t={id:this.updatedTimePair.id,idParent:this.updatedTimePair.idParent,idTimeType:this.TIMETYPE.SCHEDULED,idInheritance:this.updatedTimePair.idInheritance,idTimeframe:this.updatedTimePair.idTimeframe,points:this.updatedTimePair.points||null,startTime:this.updatedTimePair.startTime.value?this.updatedTimePair.startTime:null,endTime:this.updatedTimePair.endTime.value?this.updatedTimePair.endTime:null,isOwner:!0,isEventVisible:this.updatedTimePair.isEventVisible,isRecommended:this.updatedTimePair.isRecommended,itemID:this.itemID,itemType:"goal",addedTodoIDs:[],removedTodoIDs:[]},e=this;this.updatedTimePair.todoIDs.forEach(i=>{e.timePair.todoIDs.includes(i)||t.addedTodoIDs.push(i)}),this.timePair.todoIDs.forEach(i=>{e.updatedTimePair.todoIDs.includes(i)||t.removedTodoIDs.push(i)}),this.goalStore.saveTimePair(t),this.$emit("saveTimePair",t),this.isEditing=!1}function KX(){this.goalStore.deleteTimePair(this.timePair.id)}function JX(){this.isEditing=!1,this.$emit("cancelTimePairEditing",this.timePair.id)}const QX={class:"goal-time-pair-control d-flex flex-column"},ZX={class:"d-flex flex-row"},XX={class:"start d-flex flex-column"},eee={class:"blue"},tee={key:0},iee={key:1},see={class:"label text-start"},nee={class:"inheritance d-flex flex-column mt-2"},ree={class:"pills d-flex flex-row justify-content-between gap-1"},oee=["onClick"],aee={class:"timeframe d-flex flex-column mt-2"},lee={class:"pills d-flex flex-row justify-content-between mt-1 gap-1"},dee=["onClick"],uee={class:"pills d-flex flex-row justify-content-between mt-1 gap-1"},cee=["onClick"],hee={class:"pills d-flex flex-row justify-content-between mt-1 gap-1"},fee=["onClick"],mee={class:"start d-flex flex-column mt-2"},pee={class:"d-flex flex-row justify-content-space-between"},gee={class:"end d-flex flex-column"},vee={class:"d-flex flex-row justify-content-space-between"},yee={class:"d-flex flex-column mt-2"},_ee={class:"d-flex flex-column"},bee={class:"d-flex justify-content-end"};function wee(t,e,i,s,r,n){const o=$("TimeControl"),a=$("TodoFormItem");return m(),p("div",QX,[t.isEditing?x("",!0):(m(),p("div",{key:0,class:"wrapper d-flex flex-row justify-content-between",onClick:e[1]||(e[1]=(...l)=>n.onTimePairClicked&&n.onTimePairClicked(...l))},[d("div",ZX,[e[9]||(e[9]=d("div",{class:"d-flex flex-column"},[d("img",{src:uc,width:"14",height:"14"})],-1)),d("div",XX,[d("div",null,[d("span",eee,k(n.timeframe),1)]),i.timePair.startTime?(m(),p("div",tee,[e[7]||(e[7]=d("span",{class:"start-label"},"Start",-1)),d("span",null,k(n.timeModelToString(i.timePair.startTime)),1)])):x("",!0),i.timePair.endTime?(m(),p("div",iee,[e[8]||(e[8]=d("span",{class:"end-label"},"End",-1)),d("span",null,k(n.timeModelToString(i.timePair.endTime)),1)])):x("",!0)])]),d("button",{class:"btn-close",type:"button","aria-label":"close",onClick:e[0]||(e[0]=ye((...l)=>n.deleteTimePair&&n.deleteTimePair(...l),["stop"]))})])),t.isEditing?(m(),p("div",{key:1,class:F(["wrapper-edit d-flex flex-column",{isValid:t.isValid}])},[d("span",see,k(i.timePair.id),1),d("div",nee,[e[10]||(e[10]=d("span",{class:"label text-start"},"Inheritance",-1)),d("div",ree,[(m(!0),p(L,null,G(t.inheritanceTypes,l=>(m(),p("span",{key:l.id,class:F(["pill flex-grow-1",{selected:n.isInheritanceSelected(l.id)}]),onClick:c=>n.toggleInheritance(l.id)},k(l.text),11,oee))),128))])]),d("div",aee,[e[11]||(e[11]=d("span",{class:"label text-start"},"Timeframe",-1)),d("div",lee,[(m(!0),p(L,null,G(t.timeframes.slice(0,3),l=>(m(),p("span",{key:l.id,class:F(["pill flex-grow-1",{selected:n.isTimeframeSelected(l.id)}]),onClick:c=>n.toggleTimeframe(l.id)},k(l.text),11,dee))),128))]),d("div",uee,[(m(!0),p(L,null,G(t.timeframes.slice(3,5),l=>(m(),p("span",{key:l.id,class:F(["pill flex-grow-1",{selected:n.isTimeframeSelected(l.id)}]),onClick:c=>n.toggleTimeframe(l.id)},k(l.text),11,cee))),128))]),d("div",hee,[(m(!0),p(L,null,G(t.timeframes.slice(-3),l=>(m(),p("span",{key:l.id,class:F(["pill flex-grow-1",{selected:n.isTimeframeSelected(l.id)}]),onClick:c=>n.toggleTimeframe(l.id)},k(l.text),11,fee))),128))])]),d("div",mee,[d("div",pee,[H(o,{class:F(["time-control",{invalid:!t.updatedTimePair.startTime.isValid}]),label:"Start",time:t.updatedTimePair.startTime.value,title:"Start",endpoint:"Start",type:"date",canRemove:!1,isSet:!t.updatedTimePair.startTime.isRemoved,onAddTime:n.addTime,onSetTime:n.setTime},null,8,["class","time","isSet","onAddTime","onSetTime"])]),d("div",gee,[d("div",vee,[H(o,{class:F(["time-control",{invalid:!t.updatedTimePair.endTime.isValid}]),label:"End",time:t.updatedTimePair.endTime.value,title:"End",endpoint:"End",type:"date",isSet:!t.updatedTimePair.endTime.isRemoved,onAddTime:n.addTime,onSetTime:n.setTime,onRemoveTime:e[2]||(e[2]=l=>n.removeTime(t.updatedTimePair.endTime))},null,8,["class","time","isSet","onAddTime","onSetTime"])])])]),d("div",yee,[e[12]||(e[12]=d("span",{class:"label text-start"},"Todos",-1)),X(d("input",{class:"textbox",type:"number",min:"1","onUpdate:modelValue":e[3]||(e[3]=l=>t.todoID=l),onKeyup:e[4]||(e[4]=Ot((...l)=>n.addTodo&&n.addTodo(...l),["enter"])),spellcheck:"true"},null,544),[[Ae,t.todoID]]),d("div",_ee,[(m(!0),p(L,null,G(t.updatedTimePair.goalTimePairTodos,l=>(m(),ie(a,{key:l.id,id:l.todoID,"mapper-id":l.id,parentID:i.itemID,parentType:"goal",routineRepeatIDs:[],parentRepeatIDs:[],onRemoveItem:c=>n.removeTodo(l.todoID)},null,8,["id","mapper-id","parentID","onRemoveItem"]))),128))])]),d("div",bee,[d("button",{class:"btn btn-sm btn-link",type:"button",onClick:e[5]||(e[5]=(...l)=>n.save&&n.save(...l))},"Save"),d("button",{class:"btn btn-sm btn-link",type:"button",onClick:e[6]||(e[6]=(...l)=>n.cancel&&n.cancel(...l))},"Cancel")])],2)):x("",!0)])}const See=Q(OX,[["render",wee],["__scopeId","data-v-90fabcff"]]),Tee={name:"GoalFormItem",components:{RepeatControl:jm},props:{id:Number,parentID:Number,parentType:String,displayedRepeatID:Number,routineRepeatIDs:Array},data:function(){return{store:null,repeatsShown:!1}},created:async function(){this.store=fo()},computed:{goal(){return this.store?this.store.getItem(this.id):null},metricString(){return ya(this.goal.metrics,"text")},repeats(){let t=this.goal.repeats.filter(e=>this.routineRepeatIDs.includes(e.routineRepeatID));return t?t.filter(e=>fe(e)):[]},repeat(){if(this.displayedRepeatID){let t=this.goal.repeats.find(e=>e.routineRepeatID==this.displayedRepeatID);return t?fe(t):null}else return null}},methods:{}},xee={key:0,class:"wrapper d-flex flex-column"},Iee={class:"d-flex flex-column"},Eee={class:"d-flex flex-row"},Dee={class:"id"},kee={class:"text"},Cee={key:0};function Pee(t,e,i,s,r,n){const o=$("RepeatControl");return n.goal?(m(),p("div",xee,[d("div",{class:"goal d-flex flex-row",onClick:e[0]||(e[0]=a=>t.repeatsShown=!t.repeatsShown)},[e[1]||(e[1]=d("img",{src:Tl,width:"18",height:"18"},null,-1)),d("div",Iee,[d("div",Eee,[d("span",Dee,k(n.goal.id),1),d("span",kee,k(n.goal.text),1)])])]),t.repeatsShown?(m(),p("div",Cee,[(m(!0),p(L,null,G(n.repeats,a=>(m(),ie(o,{key:a.id,repeat:a,itemID:i.id,itemType:"goal"},null,8,["repeat","itemID"]))),128))])):x("",!0)])):x("",!0)}const Aee=Q(Tee,[["render",Pee],["__scopeId","data-v-952272d4"]]),Ree={name:"FormItemList",components:{GoalFormItem:Aee,TodoFormItem:YS},props:{itemType:String,itemIDs:Array,parentID:Number,parentType:String,repeatIDs:Array,isParent:Boolean,isChild:Boolean},data:function(){return{newItemText:"",isShown:!0}},computed:{title(){return this.isParent?"Parents":this.isChild?"Children":`${this.itemType}s`}},methods:{capitalize:wi,addItem:Mee,addItemClicked:Oee}};function Mee(){let t=this.itemType;this.isParent?t="parent":this.isChild?t="child":t=this.itemType,this.$emit("addItem",t,this.newItemText),this.newItemText=""}function Oee(){let t=this.itemType;this.isParent?t="parent":this.isChild?t="child":t=this.itemType,this.$emit("addItemClicked",t)}const $ee={class:"d-flex flex-column"},Nee={class:"d-flex flex-row justify-content-between"},Lee={class:"form-head"},Vee={key:0,class:"caret mt-auto mb-auto me-2",src:kr,width:"5",height:"8"},Wee={key:1,class:"caret mt-auto mb-auto me-2",src:Ta,width:"8",height:"5"},Fee={key:0,class:"d-flex flex-column"},Bee={class:"d-flex justify-content-between mt-1 mb-1"},zee={class:"d-flex flex-column"},jee={key:0},Hee={key:1};function Uee(t,e,i,s,r,n){const o=$("GoalFormItem"),a=$("TodoFormItem");return m(),p("div",$ee,[d("div",{class:"header d-flex flex-column",onClick:e[0]||(e[0]=l=>t.isShown=!t.isShown),onMouseover:e[1]||(e[1]=l=>t.hovered=!0)},[d("div",Nee,[d("span",Lee,k(n.capitalize(n.title)),1),t.isShown?x("",!0):(m(),p("img",Vee)),t.isShown?(m(),p("img",Wee)):x("",!0)]),e[5]||(e[5]=d("hr",null,null,-1))],32),t.isShown?(m(),p("div",Fee,[d("div",Bee,[d("button",{class:"add-btn my-auto",type:"button",onClick:e[2]||(e[2]=(...l)=>n.addItemClicked&&n.addItemClicked(...l))},e[6]||(e[6]=[d("img",{src:pn,width:"10",height:"10"},null,-1),pr("Add ")])),X(d("input",{class:"add textbox",type:"text","onUpdate:modelValue":e[3]||(e[3]=l=>t.newItemText=l),onKeyup:e[4]||(e[4]=Ot((...l)=>n.addItem&&n.addItem(...l),["enter"])),style:{width:"calc(100% - 55px)"}},null,544),[[Ae,t.newItemText]])]),d("div",zee,[i.itemType=="goal"?(m(),p("div",jee,[(m(!0),p(L,null,G(i.itemIDs,l=>(m(),ie(o,{key:l,id:l,parentID:i.parentID,parentType:i.parentType,routineRepeatIDs:i.repeatIDs},null,8,["id","parentID","parentType","routineRepeatIDs"]))),128))])):x("",!0),i.itemType=="todo"?(m(),p("div",Hee,[(m(!0),p(L,null,G(i.itemIDs,l=>(m(),ie(a,{key:l,id:l,parentID:i.parentID,parentType:i.parentType,routineRepeatIDs:i.parentType=="routine"?i.repeatIDs:[],parentRepeatIDs:i.parentType=="todo"?i.repeatIDs:[]},null,8,["id","parentID","parentType","routineRepeatIDs","parentRepeatIDs"]))),128))])):x("",!0)])])):x("",!0)])}const Hm=Q(Ree,[["render",Uee],["__scopeId","data-v-e7bbeb15"]]),Gee={name:"ItemMapper",props:{itemType:String,selectedIDs:Array},data:function(){return{store:null,items:[],itemList:[],originalIDs:[],addedIDs:[],removedIDs:[],searchTerm:""}},created:async function(){let e=(await US(Object.assign({"../../../../store/appStore.js":()=>K(()=>Promise.resolve().then(()=>Kn),void 0),"../../../../store/eventStore.js":()=>K(()=>Promise.resolve().then(()=>mo),void 0),"../../../../store/goalStore.js":()=>K(()=>Promise.resolve().then(()=>Ni),void 0),"../../../../store/itemTableStore.js":()=>K(()=>import("./itemTableStore-dQmyWJIq.js"),[]),"../../../../store/iterationStore.js":()=>K(()=>Promise.resolve().then(()=>Et),void 0),"../../../../store/metricStore.js":()=>K(()=>Promise.resolve().then(()=>no),void 0),"../../../../store/physicalStore.js":()=>K(()=>Promise.resolve().then(()=>ww),void 0),"../../../../store/plannerStore.js":()=>K(()=>Promise.resolve().then(()=>ht),void 0),"../../../../store/routineStore.js":()=>K(()=>Promise.resolve().then(()=>mn),void 0),"../../../../store/todoStore.js":()=>K(()=>Promise.resolve().then(()=>hi),void 0),"../../../../store/universalStore.js":()=>K(()=>Promise.resolve().then(()=>bo),void 0),"../../../../store/workoutStore.js":()=>K(()=>Promise.resolve().then(()=>Gl),void 0)}),`../../../../store/${this.itemType}Store.js`,6))[`use${wi(this.itemType)}Store`];this.store=e(),this.setItems(),this.setItemList()},methods:{setItems(){let t=[];this.store.getItems().forEach(i=>{t.push({id:i.id,text:i.text,isSelected:!!this.selectedIDs.includes(i.id)})}),this.items=t},setItemList(){this.searchTerm!=""?this.itemList=this.items.filter(t=>t.text.toLowerCase().includes(this.searchTerm.toLowerCase())):this.itemList=this.items},itemClicked(t){if(t.isSelected=!t.isSelected,t.isSelected){let e=this.removedIDs.findIndex(i=>i==t.id);e!=-1&&this.removedIDs.splice(e,1),this.selectedIDs.includes(t.id)||this.addedIDs.push(t.id)}else{let e=this.addedIDs.findIndex(i=>i==t.id);e!=-1&&this.addedIDs.splice(e,1),this.selectedIDs.includes(t.id)&&this.removedIDs.push(t.id)}},save(){this.$emit("select",this.addedIDs,this.removedIDs)}},watch:{searchTerm(){this.setItemList()}}},Yee={class:"d-flex flex-column"},qee=["onClick"],Kee={class:"id"},Jee={class:"text"},Qee={class:"modal-footer footer"};function Zee(t,e,i,s,r,n){return m(),p("div",Yee,[X(d("input",{class:"search textbox mb-2",type:"text",placeholder:"Search","onUpdate:modelValue":e[0]||(e[0]=o=>t.searchTerm=o)},null,512),[[Ae,t.searchTerm]]),(m(!0),p(L,null,G(t.itemList,o=>(m(),p("div",{key:o.id,class:F(["d-flex flex-row",{selected:o.isSelected}]),onClick:a=>n.itemClicked(o)},[d("span",Kee,k(o.id),1),d("span",Jee,k(o.text),1)],10,qee))),128)),d("div",Qee,[d("button",{type:"button",class:"btn btn-secondary",onClick:e[1]||(e[1]=o=>t.$emit("cancel"))},"Cancel"),d("button",{type:"button",class:"btn btn-primary",onClick:e[2]||(e[2]=o=>n.save())},"Save")])])}const Um=Q(Gee,[["render",Zee],["__scopeId","data-v-f6b8ec2a"]]),Xee={name:"GoalFormModal",components:{RepeatControl:jm,GoalTimePairControl:See,ItemMapper:Um,FormItemList:Hm,BlurbFormControl:FS},props:{id:Number},data:function(){return{store:null,plannerStore:null,BLURBTYPE:ar,text:{value:void 0,oldValue:void 0,isUpdated:!1},description:{value:void 0,oldValue:void 0,isUpdated:!1},timeframes:{value:void 0,original:void 0,addedIDs:void 0,removedIDs:void 0},repeats:{value:[],added:[],deletedIDs:[]},timePairs:{value:[],added:[],deletedIDs:[]},children:{ids:[],value:[],newItems:[],addedIDs:[],removedIDs:[]},reasons:[],blurbs:[],selectedRepeatID:void 0,selectedTimePairID:void 0,mapper:{isShown:!1,type:void 0},isRepetitionShown:!0,isTimeShown:!0}},created:async function(){let t=await K(()=>Promise.resolve().then(()=>Ni),void 0);this.store=t.useGoalStore();let e=await K(()=>Promise.resolve().then(()=>ht),void 0);this.plannerStore=e.usePlannerStore();let i=this.store.getItem(this.id);this.setProps(i)},computed:{goal(){if(this.store){let t=this.store.getItem(this.id);return this.setProps(t),t}else return null},parentIDs(){if(this.goal){var t=Zr(this.goal.parents,"goal",this.id);return t.map(e=>e.id)}else return[]},childIDs(){if(this.goal){var t=Zr(this.goal.children,"goal",this.id);return t.map(e=>e.id)}else return[]},todoIDs(){if(this.goal){var t=Zr(this.goal.todos,"goal",this.id);return t.map(e=>e.id)}else return[]},repeatIDs(){var t;return(t=this.repeats)!=null&&t.value?this.repeats.value.map(e=>e.id):[]}},methods:{setProps(t){this.text.value=t.text,this.text.oldValue=t.text,this.text.isUpdated=!1,this.description.value=t.description,this.description.oldValue=t.description,this.description.isUpdated=!1,this.timeframes={value:[],original:[],addedIDs:[],removedIDs:[]},t.timeframes.forEach(e=>{this.timeframes.value.push(e),this.timeframes.original.push(e)}),this.timePairs.value=fe(t.timePairs),this.timePairs.added=[],this.timePairs.updated=[],this.timePairs.deletedIDs=[],this.reasons=t.blurbs.filter(e=>e.idType==this.BLURBTYPE.REASON),this.blurbs=t.blurbs.filter(e=>e.idType==this.BLURBTYPE.BLURB)},setSelectedRepeat(t){this.selectedRepeatID=t},setSelectedTimePair(t){this.selectedTimePairID=t},toggleTimeframe(t){t.isSelected?this.addTimeframe(t):this.removeTimeframe(t)},addTimeframe(t){if(this.timeframes.value.findIndex(s=>s.id==t.id)==-1){this.timeframes.value.push(t),this.timeframes.original.findIndex(s=>s.id==t.id)==-1&&this.timeframes.addedIDs.push(t.id);var i=this.timeframes.removedIDs.findIndex(s=>s==t.id);i>-1&&this.timeframes.removedIDs.splice(i,1)}},removeTimeframe(t){let e=this.timeframes.value.findIndex(s=>s.id==t.id);if(e>-1){this.timeframes.value.splice(e,1),this.timeframes.original.findIndex(s=>s.id==t.id)>-1&&this.timeframes.removedIDs.push(t.id);var i=this.timeframes.addedIDs.findIndex(s=>s==t.id);i>-1&&this.timeframes.addedIDs.splice(i,1)}},selectItems(t,e,i){this.store.mapItems(this.id,t,e,i),this.mapper.isShown=!1,this.mapper.type=void 0},saveDescription(){this.id>0&&this.description.value.trim()!=""&&this.description.value!=this.description.oldValue&&this.store.saveDescription(this.id,this.description.value)},saveRepeat(t){let e=fe(t);e.startRepeat=e.startRepeat.value,e.endRepeat=e.endRepeat?e.endRepeat.value:null,e.startIteration=e.startIteration?e.startIteration.value:null,e.endIteration=e.endIteration?e.endIteration.value:null,Hs(e,this.repeats.value);let i=fe(t);t.id>0?$n(i,this.repeats.updated):$n(i,this.repeats.added),this.selectedRepeatID=void 0},saveTimePair(t){let e=fe(t);e.startAt=e.startAt?e.startAt.value:null,e.endAt=e.endAt?e.endAt.value:null,Hs(e,this.timePairs.value);let i=fe(t);t.id>0?$n(i,this.timePairs.updated):$n(i,this.timePairs.added),this.selectedTimePairID=void 0},save(){let t={id:this.id,text:this.text};this.store.saveGoal(t),this.$emit("closeItemModal")},addItem(t,e){this.store.createAndMapItem(this.id,t,e)},addItemClicked(t){this.mapper.isShown=!0,this.mapper.type=t},addRepeatClicked(){let t=He(this.repeats.value,"id"),e=this.plannerStore.createRepeat();e.id=t.length>0&&t[0].id<0?t[0].id-1:-1,this.repeats.value.unshift(e)},addTimeClicked(){let t=He(this.timePairs.value,"id"),e=this.plannerStore.createTimePair();e.idInheritance=_b.SELF,e.id=t.length>0&&t[0].id<0?t[0].id-1:-1,this.timePairs.value.unshift(e)},addReason(t){this.id>0&&t.text.trim()!=""&&(t.idType=ar.REASON,this.store.addBlurb(this.id,t))},addBlurb(t){this.id>0&&t.text.trim()!=""&&(t.idType=ar.BLURB,this.store.addBlurb(this.id,t))},updateBlurb(t){this.id>0&&t.text.trim()!=""&&(t.idType=ar.BLURB,this.store.updateBlurb(t))},cancelMapping(){this.mapper.isShown=!1,this.mapper.type=void 0},cancelRepeatEditing(t){if(t<0){let e=this.repeats.value.findIndex(i=>i.id==t);this.repeats.value.splice(e,1)}this.selectedRepeatID=void 0},cancelTimePairEditing(t){if(t<0){let e=this.timePairs.value.findIndex(i=>i.id==t);this.timePairs.value.splice(e,1)}this.selectedTimePairID=void 0},getDateString(t){if(t){let e=new Date(t);return Vw(e)}return""}},watch:{"text.value"(t){t!=this.text.oldValue?this.text.isUpdated=!0:this.isUpdated=!1},"description.value"(t){t!=this.description.oldValue?(this.description.isUpdated=!0,this.saveDescription()):this.isUpdated=!1}}},ete=["id"],tte={class:"modal-content"},ite={class:"modal-header"},ste={class:"me-2"},nte={class:"modal-body"},rte={key:0,class:"container-fluid"},ote={class:"label row gx-0"},ate={class:"col"},lte={class:"body row gx-0"},dte={class:"blurb d-flex flex-column col-12 col-sm-12 col-md-4 col-lg-6 mt-2 gap-2"},ute={class:"description d-flex flex-column"},cte={class:"items col-12 col-sm-6 col-md-4 col-lg-3 mt-2 form-column"},hte={class:"time col-12 col-sm-6 col-md-4 col-lg-3 mt-2 d-flex flex-column"},fte={class:"d-flex flex-column"},mte={class:"d-flex flex-row justify-content-between"},pte={key:0,class:"caret mt-auto mb-auto me-2",src:kr,width:"5",height:"8"},gte={key:1,class:"caret mt-auto mb-auto me-2",src:Ta,width:"8",height:"5"},vte={key:0,class:"d-flex flex-column"},yte={class:"d-flex justify-content-between mt-1 mb-1"},_te={class:"d-flex flex-column"},bte={class:"d-flex flex-row justify-content-between"},wte={key:0,class:"caret mt-auto mb-auto me-2",src:kr,width:"5",height:"8"},Ste={key:1,class:"caret mt-auto mb-auto me-2",src:Ta,width:"8",height:"5"},Tte={key:0,class:"d-flex flex-column"},xte={class:"d-flex justify-content-between mt-1 mb-1"},Ite={key:1,class:"container"},Ete={class:"row g-2"},Dte={class:"col-12"},kte={key:0,class:"modal-footer"};function Cte(t,e,i,s,r,n){const o=$("BlurbFormControl"),a=$("FormItemList"),l=$("RepeatControl"),c=$("GoalTimePairControl"),f=$("ItemMapper");return m(),p("div",{id:`goal-form-modal-${i.id}`,class:"modal-dialog modal-xl modal-fullscreen-md-down modal-dialog modal-dialog-centered modal-dialog-scrollable"},[d("div",tte,[d("div",ite,[d("span",ste,"Goal "+k(n.goal?n.goal.id:""),1),e[18]||(e[18]=d("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1))]),d("div",nte,[t.mapper.isShown?x("",!0):(m(),p("div",rte,[d("div",ote,[d("div",ate,[X(d("input",{id:"text",class:"textbox",type:"text",placeholder:"Title","onUpdate:modelValue":e[0]||(e[0]=v=>t.text.value=v),onKeyup:e[1]||(e[1]=Ot(v=>n.save(),["enter"])),spellcheck:"true"},null,544),[[Ae,t.text.value,void 0,{lazy:!0,trim:!0}]])])]),d("div",lte,[d("div",dte,[d("div",ute,[e[19]||(e[19]=d("div",{class:"header d-flex flex-column"},[d("div",{class:"d-flex flex-row justify-content-between"},[d("span",{class:"form-head text-start"},"Description"),d("img",{class:"caret mt-auto mb-auto me-2",src:kr,width:"5",height:"8"})]),d("hr")],-1)),X(d("textarea",{class:"textarea","onUpdate:modelValue":e[2]||(e[2]=v=>t.description.value=v),placeholder:"Click to add Description",spellcheck:"true"},null,512),[[Ae,t.description.value,void 0,{lazy:!0,trim:!0}]])]),H(o,{header:"Reasons",placeholder:"Click to add Reason",blurbs:t.reasons,onAddBlurb:e[3]||(e[3]=v=>n.addReason(v)),onSaveBlurb:e[4]||(e[4]=v=>n.updateBlurb(v))},null,8,["blurbs"]),H(o,{header:"Blurbs",placeholder:"Click to add Blurb",blurbs:t.blurbs,showTitle:!0,onAddBlurb:e[5]||(e[5]=v=>n.addBlurb(v)),onSaveBlurb:e[6]||(e[6]=v=>n.updateBlurb(v))},null,8,["blurbs"])]),d("div",cte,[H(a,{itemType:"goal",itemIDs:n.parentIDs,isParent:!0,parentType:"goal",parentID:i.id,repeatIDs:n.repeatIDs,onAddItemClicked:n.addItemClicked,onAddItem:n.addItem},null,8,["itemIDs","parentID","repeatIDs","onAddItemClicked","onAddItem"]),H(a,{itemType:"goal",itemIDs:n.childIDs,isChild:!0,parentType:"goal",parentID:i.id,repeatIDs:n.repeatIDs,onAddItemClicked:n.addItemClicked,onAddItem:n.addItem},null,8,["itemIDs","parentID","repeatIDs","onAddItemClicked","onAddItem"]),H(a,{itemType:"todo",itemIDs:n.todoIDs,parentType:"goal",parentID:i.id,repeatIDs:n.repeatIDs,onAddItemClicked:n.addItemClicked,onAddItem:n.addItem},null,8,["itemIDs","parentID","repeatIDs","onAddItemClicked","onAddItem"])]),d("div",hte,[d("div",fte,[d("div",{class:"header d-flex flex-column",onClick:e[7]||(e[7]=v=>t.isRepetitionShown=!t.isRepetitionShown)},[d("div",mte,[e[20]||(e[20]=d("span",{class:"form-head text-start"},"Repetition",-1)),t.isRepetitionShown?x("",!0):(m(),p("img",pte)),t.isRepetitionShown?(m(),p("img",gte)):x("",!0)]),e[21]||(e[21]=d("hr",null,null,-1))]),t.isRepetitionShown?(m(),p("div",vte,[d("div",yte,[d("button",{class:"add-btn my-auto",type:"button",onClick:e[8]||(e[8]=(...v)=>n.addRepeatClicked&&n.addRepeatClicked(...v))},e[22]||(e[22]=[d("img",{src:pn,width:"10",height:"10"},null,-1),pr("Add ")]))]),d("div",null,[(m(!0),p(L,null,G(t.repeats.value,v=>(m(),ie(l,{key:v.id,repeat:v,itemID:i.id,itemType:"goal",canEdit:t.selectedRepeatID==null,onSaveRepeat:n.saveRepeat,onSetSelectedRepeat:n.setSelectedRepeat,onCancelRepeatEditing:n.cancelRepeatEditing},null,8,["repeat","itemID","canEdit","onSaveRepeat","onSetSelectedRepeat","onCancelRepeatEditing"]))),128))])])):x("",!0)]),d("div",_te,[d("div",{class:"header d-flex flex-column",onClick:e[9]||(e[9]=v=>t.isTimeShown=!t.isTimeShown)},[d("div",bte,[e[23]||(e[23]=d("span",{class:"form-head text-start"},"Time",-1)),t.isTimeShown?x("",!0):(m(),p("img",wte)),t.isTimeShown?(m(),p("img",Ste)):x("",!0)]),e[24]||(e[24]=d("hr",null,null,-1))]),t.isTimeShown?(m(),p("div",Tte,[d("div",xte,[d("button",{class:"add-btn my-auto",type:"button",onClick:e[10]||(e[10]=(...v)=>n.addTimeClicked&&n.addTimeClicked(...v))},e[25]||(e[25]=[d("img",{src:pn,width:"10",height:"10"},null,-1),pr("Add ")]))]),d("div",null,[(m(!0),p(L,null,G(t.timePairs.value,v=>(m(),ie(c,{key:v.id,timePair:v,itemID:i.id,canEdit:t.selectedTimePairID==null,onSaveTimePair:n.saveTimePair,onSetSelectedTimePair:n.setSelectedTimePair,onCancelTimePairEditing:n.cancelTimePairEditing},null,8,["timePair","itemID","canEdit","onSaveTimePair","onSetSelectedTimePair","onCancelTimePairEditing"]))),128))])])):x("",!0)])])])])),t.mapper.isShown?(m(),p("div",Ite,[d("div",Ete,[d("div",Dte,[t.mapper.type=="parent"?(m(),ie(f,{key:0,itemType:"goal",selectedIDs:n.parentIDs,onClose:e[11]||(e[11]=v=>t.mapper.isShown=!1),onCancel:n.cancelMapping,onSelect:e[12]||(e[12]=(v,S)=>n.selectItems("parent",v,S))},null,8,["selectedIDs","onCancel"])):x("",!0),t.mapper.type=="child"?(m(),ie(f,{key:1,itemType:"goal",selectedIDs:n.childIDs,onClose:e[13]||(e[13]=v=>t.mapper.isShown=!1),onCancel:n.cancelMapping,onSelect:e[14]||(e[14]=(v,S)=>n.selectItems("child",v,S))},null,8,["selectedIDs","onCancel"])):x("",!0),t.mapper.type=="todo"?(m(),ie(f,{key:2,itemType:"todo",selectedIDs:n.todoIDs,onClose:e[15]||(e[15]=v=>t.mapper.isShown=!1),onCancel:n.cancelMapping,onSelect:e[16]||(e[16]=(v,S)=>n.selectItems("todo",v,S))},null,8,["selectedIDs","onCancel"])):x("",!0)])])])):x("",!0)]),t.mapper.isShown?x("",!0):(m(),p("div",kte,[e[26]||(e[26]=d("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close",-1)),d("button",{type:"button",class:"btn btn-primary",onClick:e[17]||(e[17]=v=>n.save())},"Save changes")]))])],8,ete)}const Pte=Q(Xee,[["render",Cte],["__scopeId","data-v-bf90f11f"]]);var ry=[{id:87,text:"Date"},{id:88,text:"Time"},{id:89,text:"DateTime"}];const Ate={name:"TimeInput2",props:{time:String,momentID:Number,canRemove:{type:Boolean,default:!0},isValid:{type:Boolean,default:!0}},data:function(){return{momentTypes:ry}},computed:{moment(){return ry.find(t=>t.id==this.momentID).text}},methods:{onChange:Rte}};function Rte(t){t=t.currentTarget.value;let e=t;t==""?this.canRemove&&this.$emit("removeTime"):(this.moment=="DateTime"&&(e=new Date(t).toJSON()),this.$emit("setTime",e))}const Mte=["value"],Ote=["value"],$te=["value"];function Nte(t,e,i,s,r,n){return m(),p("div",null,[n.moment=="Date"?(m(),p("input",{key:0,class:F(["date-picker",{invalid:!i.isValid}]),type:"date",value:i.time,onChange:e[0]||(e[0]=(...o)=>n.onChange&&n.onChange(...o))},null,42,Mte)):x("",!0),n.moment=="Time"?(m(),p("input",{key:1,class:F(["date-picker",{invalid:!i.isValid}]),type:"time",value:i.time,onChange:e[1]||(e[1]=(...o)=>n.onChange&&n.onChange(...o))},null,42,Ote)):x("",!0),n.moment=="DateTime"?(m(),p("input",{key:2,class:F(["date-picker",{invalid:!i.isValid}]),type:"datetime-local",value:i.time,onChange:e[2]||(e[2]=(...o)=>n.onChange&&n.onChange(...o))},null,42,$te)):x("",!0)])}const Lte=Q(Ate,[["render",Nte],["__scopeId","data-v-204f701f"]]);var Vte=[{id:87,text:"Date"},{id:88,text:"Time"},{id:89,text:"DateTime"}];const Wte={name:"TimeControl2",components:{TimeInput:Lte},props:{title:String,time:String,momentID:Number,endpoint:String,canRemove:{type:Boolean,default:!0},isValid:{type:Boolean,default:!0}},data:function(){return{moment:Vte.find(t=>t.id==this.momentID).text}},methods:{addTime:function(){this.$emit("addTime",this.endpoint,this.moment)},setTime(t){this.$emit("setTime",t,this.endpoint,this.moment)},removeTime:function(){this.$emit("removeTime",this.endpoint,this.moment)}}},Fte={class:"d-flex flex-column"},Bte={class:"d-flex flex-row justify-content-between"};function zte(t,e,i,s,r,n){const o=$("TimeInput");return m(),p("div",Fte,[d("div",Bte,[d("label",{class:F(["control-label",{invalid:!i.isValid}]),for:"description",onClick:e[0]||(e[0]=(...a)=>n.addTime&&n.addTime(...a))},k(i.title?i.title:i.endpoint),3)]),i.time?(m(),ie(o,{key:0,time:i.time,momentID:i.momentID,canRemove:i.canRemove,isValid:i.isValid,onSetTime:n.setTime,onRemoveTime:n.removeTime},null,8,["time","momentID","canRemove","isValid","onSetTime","onRemoveTime"])):x("",!0)])}const jte=Q(Wte,[["render",zte],["__scopeId","data-v-ab8f73a0"]]);let oy=[{id:63,text:"Day",isActive:!0},{id:68,text:"Week",isActive:!0},{id:69,text:"Month",isActive:!0},{id:72,text:"Tri",isActive:!1},{id:74,text:"Semi",isActive:!1},{id:75,text:"Year",isActive:!1}],Hte=[{index:1,text:"Sunday",alt:"S",isSelected:!1},{index:2,text:"Monday",alt:"M",isSelected:!1},{index:3,text:"Tuesday",alt:"T",isSelected:!1},{index:4,text:"Wednesday",alt:"W",isSelected:!1},{index:5,text:"Thursday",alt:"T",isSelected:!1},{index:6,text:"Friday",alt:"F",isSelected:!1},{index:7,text:"Saturday",alt:"S",isSelected:!1}],Ute=[{id:140,text:"Self"},{id:141,text:"Children"},{id:142,text:"Descendants"}];const Gte={name:"RepeatControl",components:{TimeControl:jte},props:{repeat:Object,itemID:Number,itemType:String,canEdit:Boolean},data:function(){return{todoStore:void 0,routineStore:void 0,plannerStore:void 0,timeframes:fe(oy),MOMENT:fe(Jf),inheritanceTypes:fe(Ute),updatedRepeat:void 0,todoRepeats:[],isEditing:!1,isValid:{date:!0,time:!0}}},created:async function(){let t=await K(()=>Promise.resolve().then(()=>hi),void 0);this.todoStore=t.useTodoStore();let e=await K(()=>Promise.resolve().then(()=>mn),void 0);this.routineStore=e.useRoutineStore();let i=await K(()=>Promise.resolve().then(()=>ht),void 0);this.plannerStore=i.usePlannerStore(),this.repeat.id<0&&(this.isEditing=!0)},computed:{selectedDate(){return this.plannerStore?this.plannerStore.selectedDate:Tt()},isArchived(){return!!(this.repeat.endDate&&+new Date(this.repeat.endDate)<+Tt())},timeframe(){let t=this.isEditing?this.updatedRepeat:this.repeat;return oy.find(i=>i.id==t.idTimeframe).text.toLowerCase()},frequency(){let t=this.isEditing?this.updatedRepeat:this.repeat;return t.frequency==1?"Once":`${t.frequency} times`},daysOfWeek(){let t="";return this.repeat.idTimeframe==68&&this.repeat.dayIndecies.forEach(e=>{let i=this.dow.find(s=>s.index==e).text;t+=`${i} `}),t},daysOfMonth(){let t="";return this.repeat.dayIndecies.forEach(e=>{e==1?t+="1st ":e==2?t+="2nd ":e==3?t+="3rd ":e>3&&(t+=`${e}th `)}),t},dow(){let t=[];return Hte.forEach(e=>{let i=fe(e);t.push(i),this.updatedRepeat&&this.updatedRepeat.idTimeframe==68&&(i.isSelected=this.updatedRepeat.dayIndecies.includes(i.index))}),t},dom(){var t=[];for(let e=1;e<=31;e++){let i={index:e};t.push(i),this.updatedRepeat.idTimeframe==69&&(i.isSelected=this.updatedRepeat.dayIndecies.includes(i.index))}return t},numInputWidth(){return this.updatedRepeat.interval<10?"25px":this.updatedRepeat.interval<100?"34px":"41px"},minFrequency(){return this.updatedRepeat.dayIndecies.length>0?this.updatedRepeat.dayIndecies.length:1},maxFrequency(){return this.updatedRepeat.idTimeframe==68?7:this.updatedRepeat.idTimeframe==69?31:"none"},deleteFutureText(){return this.plannerStore&&this.selectedDate<Tt()?`Delete Future ${Ww(this.selectedDate)}`:"Delete Future"}},methods:{initUpdatedRepeat:Yte,onRepeatClicked:qte,onDayClicked:Kte,onTimeFrameChanged:Jte,addTime:Qte,setTime:Zte,removeTime:Xte,validateTimes:eie,toggleTodoRepeat(t){t.isShown=!t.isShown},cancel(){this.isEditing=!1,this.$emit("cancelRepeatEditing",this.repeat.id)},save:tie,deleteOrArchive:iie,refreshRepetition:sie,deleteFutureRepetitions:nie},watch:{isEditing(t){t==!0&&this.initUpdatedRepeat()}}};function Yte(){this.updatedRepeat=fe(this.repeat),this.updatedRepeat.idTimeframe==68&&this.updatedRepeat.dayIndecies.forEach(t=>{let e=this.dow.find(i=>i.index==t);e.isSelected=!0}),this.validateTimes()}function qte(){this.canEdit&&(this.isEditing=!0,this.$emit("setSelectedRepeat",this.repeat.id))}function Kte(t){if(t.isSelected=!t.isSelected,t.isSelected)this.updatedRepeat.dayIndecies.push(t.index),this.updatedRepeat.frequency<this.updatedRepeat.dayIndecies.length&&(this.updatedRepeat.frequency=this.updatedRepeat.dayIndecies.length);else{let e=this.updatedRepeat.dayIndecies.findIndex(i=>i==t.index);this.updatedRepeat.dayIndecies.splice(e,1),this.updatedRepeat.frequency!=1&&(this.updatedRepeat.frequency-=1)}this.updatedRepeat.dayIndecies=this.updatedRepeat.dayIndecies.sort(function(e,i){return e-i})}function Jte(){this.updatedRepeat.interval=1,this.updatedRepeat.frequency=1,this.updatedRepeat.dayIndecies=[]}function Qte(t,e){let i=new Date;e.toLowerCase()=="date"?this.updatedRepeat[`${t.toLowerCase()}${wi(e)}`]=Aw(i):e.toLowerCase()=="time"&&(this.updatedRepeat[`${t.toLowerCase()}${wi(e)}`]="12:00"),this.validateTimes()}function Zte(t,e,i){this.updatedRepeat[`${e.toLowerCase()}${i}`]=t,this.validateTimes()}function Xte(t,e){this.updatedRepeat[`${t.toLowerCase()}${e}`]=void 0}function eie(){this.updatedRepeat.endDate&&+new Date(this.updatedRepeat.startDate)>+new Date(this.updatedRepeat.endDate)?this.isValid.date=!1:this.isValid.date=!0,this.updatedRepeat.startTime&&this.updatedRepeat.endTime&&this.updatedRepeat.startTime>=this.updatedRepeat.endTime?this.isValid.time=!1:this.isValid.time=!0}function tie(){if(!this.isValid.date||!this.isValid.time)return;let t={id:this.updatedRepeat.id,idInheritance:this.updatedRepeat.idInheritance,isOwner:!0,itemID:this.itemID,itemType:this.itemType.toLowerCase(),idTimeframe:this.updatedRepeat.idTimeframe,idType:this.updatedRepeat.idType,points:this.updatedRepeat.points||null,interval:this.updatedRepeat.interval,frequency:this.updatedRepeat.frequency,dayIndecies:this.updatedRepeat.dayIndecies,startDate:this.updatedRepeat.startDate,endDate:this.updatedRepeat.endDate,startTime:this.updatedRepeat.startTime,endTime:this.updatedRepeat.endTime,isEventVisible:this.updatedRepeat.isEventVisible,isRecommended:this.updatedRepeat.isRecommended};this.itemType.toLowerCase()=="routine"?this.routineStore.saveRepeat(t):this.itemType.toLowerCase()=="todo"&&this.todoStore.saveRepeat(t),this.$emit("saveRepeat",t),this.isEditing=!1}function iie(){this.todoStore.deleteOrArchiveRepeat(this.itemID,this.repeat.id)}function sie(){this.$emit("refreshRepetition",this.repeat.id),this.isEditing=!1}function nie(){this.$emit("deleteFutureRepetitions",this.repeat.id,this.selectedDate),this.isEditing=!1}const rie={class:"d-flex flex-row"},oie={class:"d-flex flex-column"},aie={class:"timeframe d-flex flex-column"},lie={class:"blue"},die={class:"blue"},uie={key:0},cie={class:"blue"},hie={key:1},fie={class:"blue"},mie={key:1,class:"wrapper-edit d-flex flex-row"},pie={class:"d-flex flew-rowalign-middle mt-2"},gie=["id","value"],vie=["for"],yie={class:"interval d-flex flew-row mb-1"},_ie={class:"d-flex flex-row"},bie={class:"me-1"},wie=["min","max"],Sie={key:0},Tie=["onClick"],xie={key:1},Iie={class:"day-of-month d-flex flex-row flex-wrap"},Eie=["onClick"],Die={class:"d-flex flex-column"},kie={class:"d-flex flex-column"},Cie={class:"d-flex flex-column"},Pie={class:"d-flex flex-column"},Aie={class:"d-flex flex-column"},Rie={class:"d-flex flex-column"},Mie={class:"d-flex flex-column mt-1"},Oie=["value"],$ie={class:"points d-flex flex-row align-items-center mt-1"},Nie={class:"form-check"},Lie={class:"form-check"},Vie={class:"d-flex flex-row justify-content-between"},Wie={class:"d-flex justify-content-start"},Fie={class:"d-flex justify-content-end"};function Bie(t,e,i,s,r,n){const o=$("TimeControl");return m(),p("div",null,[t.isEditing?x("",!0):(m(),p("div",{key:0,class:F(["wrapper d-flex flex-row justify-content-between",{archived:n.isArchived}]),onClick:e[1]||(e[1]=(...a)=>n.onRepeatClicked&&n.onRepeatClicked(...a))},[d("div",rie,[d("div",oie,[e[15]||(e[15]=d("img",{src:uc,width:"14",height:"14"},null,-1)),d("span",null,k(i.repeat.id),1)]),d("div",aie,[d("div",null,[e[16]||(e[16]=d("span",null,"Every",-1)),d("span",null,k(i.repeat.interval==1?" ":` ${i.repeat.interval} `),1),d("span",lie,k(i.repeat.interval==1?n.timeframe:`${n.timeframe}s`),1)]),d("div",null,[d("span",die,k(n.frequency),1),e[17]||(e[17]=d("span",null," a ",-1)),d("span",null,k(n.timeframe),1)]),i.repeat.idTimeframe==68&&i.repeat.dayIndecies.length>0?(m(),p("div",uie,[e[18]||(e[18]=d("span",null,"On ",-1)),d("span",cie,k(n.daysOfWeek),1)])):x("",!0),i.repeat.idTimeframe==69&&i.repeat.dayIndecies.length>0?(m(),p("div",hie,[e[19]||(e[19]=d("span",null,"On the ",-1)),d("span",fie,k(n.daysOfMonth),1)])):x("",!0)])]),d("button",{class:"btn-close",type:"button","aria-label":"close",onClick:e[0]||(e[0]=ye((...a)=>n.deleteOrArchive&&n.deleteOrArchive(...a),["stop"]))})],2)),t.isEditing?(m(),p("div",mie,[d("div",null,[d("div",pie,[(m(!0),p(L,null,G(t.timeframes.filter(a=>a.isActive),a=>(m(),p("div",{key:a.id,class:"form-check form-check-inline"},[X(d("input",{class:"form-check-input",type:"radio",id:a.text,value:a.id,"onUpdate:modelValue":e[2]||(e[2]=l=>t.updatedRepeat.idTimeframe=l),onClick:e[3]||(e[3]=(...l)=>n.onTimeFrameChanged&&n.onTimeFrameChanged(...l))},null,8,gie),[[Hr,t.updatedRepeat.idTimeframe]]),d("label",{class:"form-check-label",for:a.text},k(a.text),9,vie)]))),128))]),d("div",yie,[d("div",_ie,[e[20]||(e[20]=d("span",{class:"me-1"},"Every",-1)),X(d("input",{class:"form-control form-control-sm me-1",type:"number",min:"1","onUpdate:modelValue":e[4]||(e[4]=a=>t.updatedRepeat.interval=a),style:$e({width:n.numInputWidth}),required:""},null,4),[[Ae,t.updatedRepeat.interval]]),d("span",bie,k(t.updatedRepeat.interval==1?n.timeframe:`${n.timeframe}s`),1),X(d("input",{class:"form-control form-control-sm me-1",type:"number","onUpdate:modelValue":e[5]||(e[5]=a=>t.updatedRepeat.frequency=a),min:n.minFrequency,max:n.maxFrequency,style:$e({width:n.numInputWidth}),required:""},null,12,wie),[[Ae,t.updatedRepeat.frequency]]),e[21]||(e[21]=d("span",{class:"me-1"},"times a",-1)),d("span",null,k(n.timeframe),1)])]),t.updatedRepeat.idTimeframe==68?(m(),p("div",Sie,[e[22]||(e[22]=d("span",{class:"head"},"Days of Week",-1)),d("div",null,[(m(!0),p(L,null,G(n.dow,a=>(m(),p("span",{key:a.index,class:F(["day",{selected:a.isSelected}]),onClick:l=>n.onDayClicked(a)},k(a.alt),11,Tie))),128))])])):x("",!0),t.updatedRepeat.idTimeframe==69?(m(),p("div",xie,[e[23]||(e[23]=d("span",{class:"head"},"Days of Month",-1)),d("div",Iie,[(m(!0),p(L,null,G(n.dom,a=>(m(),p("span",{key:a.index,class:F(["day",{selected:a.isSelected}]),onClick:l=>n.onDayClicked(a)},k(a.index),11,Eie))),128))])])):x("",!0),d("div",Die,[d("div",kie,[H(o,{class:"time-control",isValid:t.isValid.date,label:"Start Date",time:t.updatedRepeat.startDate,momentID:t.MOMENT.DATE,title:"Start Date",endpoint:"Start",canRemove:!1,onSetTime:n.setTime},null,8,["isValid","time","momentID","onSetTime"])]),d("div",Cie,[H(o,{class:"time-control",isValid:t.isValid.date,label:"End Date",time:t.updatedRepeat.endDate,momentID:t.MOMENT.DATE,title:"End Date",endpoint:"End",onAddTime:n.addTime,onSetTime:n.setTime,onRemoveTime:e[6]||(e[6]=a=>n.removeTime(t.updatedRepeat.endDate))},null,8,["isValid","time","momentID","onAddTime","onSetTime"])])]),d("div",Pie,[d("div",Aie,[H(o,{class:"time-control",isValid:t.isValid.time,label:"Start Time",time:t.updatedRepeat.startTime,momentID:t.MOMENT.TIME,title:"Start Time",endpoint:"Start",onAddTime:n.addTime,onSetTime:n.setTime},null,8,["isValid","time","momentID","onAddTime","onSetTime"])]),d("div",Rie,[H(o,{class:"time-control",isValid:t.isValid.time,label:"End Time",time:t.updatedRepeat.endTime,momentID:t.MOMENT.TIME,title:"End Time",endpoint:"End",onAddTime:n.addTime,onSetTime:n.setTime},null,8,["isValid","time","momentID","onAddTime","onSetTime"])])]),d("div",Mie,[X(d("select",{class:"form-select panel-select","aria-label":"select","onUpdate:modelValue":e[7]||(e[7]=a=>t.updatedRepeat.idInheritance=a)},[(m(!0),p(L,null,G(t.inheritanceTypes,a=>(m(),p("option",{key:a.id,value:a.id},k(a.text),9,Oie))),128))],512),[[Ts,t.updatedRepeat.idInheritance]])]),d("div",$ie,[e[24]||(e[24]=d("span",{class:"me-1"},"Points",-1)),X(d("input",{class:"form-control form-control-sm me-1",type:"number",min:"1","onUpdate:modelValue":e[8]||(e[8]=a=>t.updatedRepeat.points=a),style:{width:"41px"},required:""},null,512),[[Ae,t.updatedRepeat.points]])]),d("div",Nie,[X(d("input",{class:"form-check-input mt-1",type:"checkbox",value:"",id:"isEventVisible","onUpdate:modelValue":e[9]||(e[9]=a=>t.updatedRepeat.isEventVisible=a)},null,512),[[ji,t.updatedRepeat.isEventVisible]]),e[25]||(e[25]=d("label",{class:"form-check-label float-start",for:"isEventVisible"}," Is Event Visible ",-1))]),d("div",Lie,[X(d("input",{class:"form-check-input mt-1",type:"checkbox",value:"",id:"flexCheckDefault","onUpdate:modelValue":e[10]||(e[10]=a=>t.updatedRepeat.isRecommended=a)},null,512),[[ji,t.updatedRepeat.isRecommended]]),e[26]||(e[26]=d("label",{class:"form-check-label float-start",for:"flexCheckDefault"}," Recommended ",-1))]),d("div",Vie,[d("div",Wie,[d("button",{class:"btn btn-sm btn-link",type:"button",onClick:e[11]||(e[11]=(...a)=>n.refreshRepetition&&n.refreshRepetition(...a))},"Refresh"),d("button",{class:"btn btn-sm btn-link",type:"button",onClick:e[12]||(e[12]=(...a)=>n.deleteFutureRepetitions&&n.deleteFutureRepetitions(...a))},k(n.deleteFutureText),1)]),d("div",Fie,[d("button",{class:"btn btn-sm btn-link",type:"button",onClick:e[13]||(e[13]=(...a)=>n.save&&n.save(...a))},"Save"),d("button",{class:"btn btn-sm btn-link",type:"button",onClick:e[14]||(e[14]=(...a)=>n.cancel&&n.cancel(...a))},"Cancel")])])])])):x("",!0)])}const qS=Q(Gte,[["render",Bie],["__scopeId","data-v-79f9e077"]]),zie={name:"RoutineFormModal",components:{RepeatControl:qS,ItemMapper:Um,FormItemList:Hm},props:{id:Number},data:function(){return{store:null,initialized:!1,text:void 0,isTaskRoutine:void 0,repeats:{value:[],added:[],deletedIDs:[]},todos:{ids:[],value:[],newItems:[],addedIDs:[],removedIDs:[]},selectedRepeatID:void 0,mapper:{isShown:!1,type:void 0}}},created:async function(){let t=await K(()=>Promise.resolve().then(()=>mn),void 0);this.store=t.useRoutineStore();let e=await K(()=>Promise.resolve().then(()=>ht),void 0);this.plannerStore=e.usePlannerStore();let i=this.store.getItem(this.id);this.setProps(i)},computed:{routine(){if(this.store){let t=this.store.getItem(this.id);return this.setProps(t),t}else return null},todoIDs(){if(this.routine){var t=Zr(this.routine.todos,"routine",this.id);return t.map(e=>e.id)}else return[]},repeatIDs(){var t;return(t=this.repeats)!=null&&t.value?this.repeats.value.map(e=>e.id):[]}},methods:{setProps(t){this.initialized=!1,this.text=t?t.text:"",this.isTaskRoutine=t.isTaskRoutine,this.repeats.value=t?fe(t.repeats):[],this.repeats.added=[],this.repeats.updated=[],this.repeats.deletedIDs=[],this.initialized=!0},setSelectedRepeat(t){this.selectedRepeatID=t},selectTodos(t,e){this.todos.addedIDs=[...t],this.todos.removedIDs=[...e],LP(this.id,t,e),this.mapper.isShown=!1,this.mapper.type=void 0},addRepeatClicked(){let t=He(this.repeats.value,"id"),e=this.plannerStore.createRepeat();e.id=t.length>0&&t[0].id<0?t[0].id-1:-1,this.repeats.value.unshift(e)},saveRepeat(t){let e=fe(t);Hs(e,this.repeats.value);let i=fe(t);$n(i,this.repeats.updated),this.selectedRepeatID=void 0},save(){if(this.text.trim()){let t={id:this.id,text:this.text,isTaskRoutine:this.isTaskRoutine};this.store.saveRoutine(t),this.$emit("closeItemModal")}},addItem(t,e){VP(this.id,t,e)},addTodoClicked(){this.mapper.isShown=!0,this.mapper.type="todo"},cancelMapping(){this.mapper.isShown=!1,this.mapper.type=void 0},cancelRepeatEditing(t){if(t<0){let e=this.repeats.value.findIndex(i=>i.id==t);this.repeats.value.splice(e,1)}this.selectedRepeatID=void 0},refreshRepetitionForRepeat(t){this.store.refreshRepetitionForRepeat(this.id,t)}}},jie=["id"],Hie={class:"modal-content"},Uie={class:"modal-header"},Gie=["id"],Yie={class:"modal-body"},qie={key:0,class:"container-fluid"},Kie={class:"row g-2"},Jie={class:"col-12"},Qie={class:"row g-2"},Zie={class:"col-4"},Xie={class:"form-check"},ese={class:"row g-2"},tse={class:"col-4 form-column"},ise={class:"col-4 d-flex flex-column"},sse={class:"d-flex justify-content-between mt-1 mb-1"},nse={key:1,class:"container"},rse={class:"row g-2"},ose={class:"col-12"},ase={key:0,class:"modal-footer"};function lse(t,e,i,s,r,n){const o=$("FormItemList"),a=$("RepeatControl"),l=$("ItemMapper");return m(),p("div",{id:`routine-form-modal-${i.id}`,class:"modal-dialog modal-xl modal-fullscreen-md-down modal-dialog modal-dialog-centered modal-dialog-scrollable"},[d("div",Hie,[d("div",Uie,[d("h5",{class:"modal-title",id:`routine-${i.id}-ModalLabel`},k(n.routine?n.routine.id:""),9,Gie),e[6]||(e[6]=d("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1))]),d("div",Yie,[t.mapper.isShown?x("",!0):(m(),p("div",qie,[d("div",Kie,[d("div",Jie,[X(d("input",{id:"text",class:"textbox",type:"text",placeholder:"Title","onUpdate:modelValue":e[0]||(e[0]=c=>t.text=c),onKeyup:e[1]||(e[1]=Ot(c=>n.save(),["enter"])),spellcheck:"true"},null,544),[[Ae,t.text,void 0,{lazy:!0,trim:!0}]])])]),d("div",Qie,[d("div",Zie,[d("div",Xie,[X(d("input",{class:"form-check-input mt-1",type:"checkbox",value:"",id:"is-task-routine","onUpdate:modelValue":e[2]||(e[2]=c=>t.isTaskRoutine=c)},null,512),[[ji,t.isTaskRoutine]]),e[7]||(e[7]=d("label",{class:"form-check-label float-start",for:"is-task-routine"}," Task-Routine ",-1))])])]),d("div",ese,[e[10]||(e[10]=d("div",{class:"col-4"},null,-1)),d("div",tse,[H(o,{itemType:"todo",itemIDs:n.todoIDs,parentType:"routine",parentID:i.id,repeatIDs:n.repeatIDs,onAddItemClicked:n.addTodoClicked,onAddItem:n.addItem},null,8,["itemIDs","parentID","repeatIDs","onAddItemClicked","onAddItem"])]),d("div",ise,[e[9]||(e[9]=d("span",{class:"form-head"},"Repetition",-1)),d("div",sse,[d("button",{class:"add-btn my-auto",type:"button",onClick:e[3]||(e[3]=(...c)=>n.addRepeatClicked&&n.addRepeatClicked(...c))},e[8]||(e[8]=[d("img",{src:pn,width:"10",height:"10"},null,-1),pr("Add ")]))]),d("div",null,[(m(!0),p(L,null,G(t.repeats.value,c=>(m(),ie(a,{key:c.id,repeat:c,itemID:i.id,itemType:"routine",canEdit:t.selectedRepeatID==null,onRefreshRepetition:n.refreshRepetitionForRepeat,onSaveRepeat:n.saveRepeat,onSetSelectedRepeat:n.setSelectedRepeat,onCancelRepeatEditing:n.cancelRepeatEditing},null,8,["repeat","itemID","canEdit","onRefreshRepetition","onSaveRepeat","onSetSelectedRepeat","onCancelRepeatEditing"]))),128))])])])])),t.mapper.isShown&&t.mapper.type=="todo"?(m(),p("div",nse,[d("div",rse,[d("div",ose,[H(l,{itemType:"todo",selectedIDs:n.todoIDs,onClose:e[4]||(e[4]=c=>t.mapper.isShown=!1),onCancel:n.cancelMapping,onSelect:n.selectTodos},null,8,["selectedIDs","onCancel","onSelect"])])])])):x("",!0)]),t.mapper.isShown?x("",!0):(m(),p("div",ase,[e[11]||(e[11]=d("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close",-1)),d("button",{type:"button",class:"btn btn-primary",onClick:e[5]||(e[5]=c=>n.save())},"Save")]))])],8,jie)}const dse=Q(zie,[["render",lse],["__scopeId","data-v-a638ebcd"]]),use={name:"TimePairControl",components:{TimeControl:zm},props:{timePair:Object,itemID:Number,itemType:String,canEdit:Boolean},data:function(){return{todoStore:null,goalStore:null,TIMEFRAME:fe(Hi),timeframes:fe(_r),inheritanceTypes:fe(Uw),updatedTimePair:void 0,todoTimePairs:[],isEditing:!1,isValid:!0}},created:async function(){let t=await K(()=>Promise.resolve().then(()=>hi),void 0);this.todoStore=t.useTodoStore();let e=await K(()=>Promise.resolve().then(()=>Ni),void 0);this.goalStore=e.useGoalStore(),this.timePair.id<0&&(this.isEditing=!0)},computed:{timeframe(){let t=this.isEditing?this.updatedTimePair:this.timePair,e=_r.find(i=>i.id==t.idTimeframe);return e?e.text:""}},methods:{initUpdatedTimePair:cse,onTimePairClicked:fse,setTimeframe:hse,timeModelToString:Mw,addTime:mse,setTime:pse,removeTime:gse,validateTimes:vse,cancel(){this.isEditing=!1,this.$emit("cancelTimePairEditing",this.timePair.id)},save:yse,deleteTimePair:_se},watch:{isEditing(t){t==!0&&this.initUpdatedTimePair()}}};function cse(){this.updatedTimePair=fe(this.timePair),["startTime","endTime"].forEach(e=>{this.updatedTimePair[e]={isEdited:!1,isRemoved:!1,isValid:!0,value:this.updatedTimePair[e]?fe(this.updatedTimePair[e]):null,oldValue:this.updatedTimePair[e]?fe(this.updatedTimePair[e]):null}}),this.validateTimes()}function hse(){let t=this.updatedTimePair.idTimeframe,e=this.updatedTimePair.startTime.value,i=this.updatedTimePair.endTime.value;t==this.TIMEFRAME.DAY?e?i.dateTime=e.dateTime.toJSON():i&&(e.dateTime=i.dateTime.toJSON()):t==this.TIMEFRAME.WEEK?e?(e.dateTime=ei(e.dateTime).toJSON(),i.dateTime=ft(li(e.dateTime)).toJSON()):i&&(e.dateTime=ei(i.dateTime).toJSON(),i.dateTime=ft(li(i.dateTime)).toJSON()):t==this.TIMEFRAME.MONTH?e?(e.dateTime=ti(e.dateTime).toJSON(),i.dateTime=ft(fi(e.dateTime)).toJSON()):i&&(e.dateTime=ti(i.dateTime).toJSON(),i.dateTime=ft(fi(i.dateTime)).toJSON()):t==this.TIMEFRAME.YEAR&&(e?(e.dateTime=wa(e.dateTime).toJSON(),i.dateTime=ft(Xi(e.dateTime)).toJSON()):i&&(e.dateTime=Xi(i.dateTime).toJSON(),i.dateTime=ft(Xi(i.dateTime)).toJSON()))}function fse(){this.canEdit&&(this.isEditing=!0,this.$emit("setSelectedTimePair",this.timePair.id))}function mse(t){var e;t.toLowerCase()=="start"?e=84:t.toLowerCase()=="end"&&(e=85);var i=Jf.DATE,s=ec(new Date().toJSON());this.timePair[`${t.toLowerCase()}Time`]={isEdited:!1,isRemoved:!1,isValid:!0,value:{idEndpoint:e,idMoment:i,idType:80,dateTime:s},oldValue:{idEndpoint:e,idMoment:i,idType:80,dateTime:s}}}function pse(t,e){e=e.toLowerCase();let i=this.updatedTimePair[`${e}Time`];i.value.dateTime=t,i.oldValue.dateTime!=t&&i.oldValue.id?i.isEdited=!0:i.isEdited=!1;let s=this.updatedTimePair.startTime.value,r=this.updatedTimePair.endTime.value;this.updatedTimePair.idTimeframe?this.updatedTimePair.idTimeframe==this.TIMEFRAME.DAY?e=="start"?r.dateTime=t:e=="end"&&(s.dateTime=t):this.updatedTimePair.idTimeframe==this.TIMEFRAME.WEEK?e=="start"?(s.dateTime=ei(new Date(t)).toJSON(),r.dateTime=ft(li(new Date(t))).toJSON()):e=="end"&&(s.dateTime=ei(new Date(t)).toJSON(),r.dateTime=ft(li(new Date(t))).toJSON()):this.updatedTimePair.idTimeframe==this.TIMEFRAME.MONTH?e=="start"?(s.dateTime=ti(new Date(t)).toJSON(),r.dateTime=ft(fi(new Date(t))).toJSON()):e=="end"&&(s.dateTime=ti(new Date(t)).toJSON(),r.dateTime=ft(fi(new Date(t))).toJSON()):this.updatedTimePair.idTimeframe==this.TIMEFRAME.YEAR&&(e=="start"?(s.dateTime=wa(new Date(t)).toJSON(),r.dateTime=ft(Xi(new Date(t))).toJSON()):e=="end"&&(s.dateTime=Xi(new Date(t)).toJSON(),r.dateTime=ft(Xi(new Date(t))).toJSON())):e=="start"&&r.dateTime?+new Date(r.dateTime)<+new Date(t)&&(r.dateTime=t):e=="end"&&s.dateTime&&+new Date(s.dateTime)>+new Date(t)&&(s.dateTime=t),this.validateTimes()}function gse(t){t.isRemoved=!0}function vse(){this.updatedTimePair.startTime.value&&this.updatedTimePair.endTime.value&&(+new Date(this.updatedTimePair.startTime.value.dateTime)>+new Date(this.updatedTimePair.endTime.value.dateTime)?(this.isValid=!1,this.updatedTimePair.startTime.isValid=!1,this.updatedTimePair.endTime.isValid=!1):(this.isValid=!0,this.updatedTimePair.startTime.isValid=!0,this.updatedTimePair.endTime.isValid=!0))}function yse(){let t={id:this.updatedTimePair.id,idParent:this.updatedTimePair.idParent,idTimeType:this.updatedTimePair.idTimeType||80,idInheritance:this.updatedTimePair.idInheritance,idTimeframe:this.updatedTimePair.idTimeframe,points:this.updatedTimePair.points||null,startTime:this.updatedTimePair.startTime.value?this.updatedTimePair.startTime:null,endTime:this.updatedTimePair.endTime.value?this.updatedTimePair.endTime:null,isOwner:!0,isEventVisible:this.updatedTimePair.isEventVisible,isRecommended:this.updatedTimePair.isRecommended,itemID:this.itemID,itemType:this.itemType.toLowerCase()};this.itemType.toLowerCase()=="goal"?this.goalStore.saveTimePair(t):this.itemType.toLowerCase()=="todo"&&this.todoStore.saveTimePair(t),this.$emit("saveTimePair",t),this.isEditing=!1}function _se(){this.itemType.toLowerCase()=="goal"?this.goalStore.deleteTimePair(this.timePair.id):this.itemType.toLowerCase()=="todo"&&this.todoStore.deleteTimePair(this.timePair.id)}const bse={class:"d-flex flex-row"},wse={class:"start d-flex flex-column"},Sse={class:"blue"},Tse={key:0},xse={key:1},Ise={class:"d-flex flex-column mb-1"},Ese=["value"],Dse={class:"d-flex flex-column"},kse=["value"],Cse={class:"points d-flex flex-row align-items-center mt-1"},Pse={class:"d-flex flex-column"},Ase={class:"d-flex flex-column"},Rse={class:"d-flex flex-column"},Mse={class:"form-check"},Ose={class:"form-check"},$se={class:"d-flex justify-content-end"};function Nse(t,e,i,s,r,n){const o=$("TimeControl");return m(),p("div",null,[t.isEditing?x("",!0):(m(),p("div",{key:0,class:"wrapper d-flex flex-row justify-content-between",onClick:e[1]||(e[1]=(...a)=>n.onTimePairClicked&&n.onTimePairClicked(...a))},[d("div",bse,[e[14]||(e[14]=d("div",{class:"d-flex flex-column"},[d("img",{src:uc,width:"14",height:"14"})],-1)),d("div",wse,[d("div",null,[d("span",Sse,k(n.timeframe),1)]),i.timePair.startTime?(m(),p("div",Tse,[e[12]||(e[12]=d("span",{class:"start-label"},"Start",-1)),d("span",null,k(n.timeModelToString(i.timePair.startTime)),1)])):x("",!0),i.timePair.endTime?(m(),p("div",xse,[e[13]||(e[13]=d("span",{class:"end-label"},"End",-1)),d("span",null,k(n.timeModelToString(i.timePair.endTime)),1)])):x("",!0)])]),d("button",{class:"btn-close",type:"button","aria-label":"close",onClick:e[0]||(e[0]=ye((...a)=>n.deleteTimePair&&n.deleteTimePair(...a),["stop"]))})])),t.isEditing?(m(),p("div",{key:1,class:F(["wrapper-edit d-flex flex-row",{isValid:t.isValid}])},[d("div",null,[d("div",Ise,[X(d("select",{class:"form-select panel-select","aria-label":"select","onUpdate:modelValue":e[2]||(e[2]=a=>t.updatedTimePair.idTimeframe=a),onChange:e[3]||(e[3]=(...a)=>n.setTimeframe&&n.setTimeframe(...a))},[e[15]||(e[15]=d("option",{value:null},"None",-1)),(m(!0),p(L,null,G(t.timeframes,a=>(m(),p("option",{key:a.id,value:a.id},k(a.text),9,Ese))),128))],544),[[Ts,t.updatedTimePair.idTimeframe]])]),d("div",Dse,[X(d("select",{class:"form-select panel-select","aria-label":"select","onUpdate:modelValue":e[4]||(e[4]=a=>t.updatedTimePair.idInheritance=a)},[(m(!0),p(L,null,G(t.inheritanceTypes,a=>(m(),p("option",{key:a.id,value:a.id},k(a.text),9,kse))),128))],512),[[Ts,t.updatedTimePair.idInheritance]])]),d("div",Cse,[e[16]||(e[16]=d("span",{class:"me-1"},"Points",-1)),X(d("input",{class:"form-control form-control-sm me-1",type:"number",min:"1","onUpdate:modelValue":e[5]||(e[5]=a=>t.updatedTimePair.points=a),style:{width:"41px"},required:""},null,512),[[Ae,t.updatedTimePair.points]])]),d("div",Pse,[d("div",Ase,[H(o,{class:F(["time-control",{invalid:!t.updatedTimePair.startTime.isValid}]),label:"Start",time:t.updatedTimePair.startTime.value,title:"Start",endpoint:"Start",type:"date",canRemove:!1,isSet:!t.updatedTimePair.startTime.isRemoved,onAddTime:n.addTime,onSetTime:n.setTime,onRemoveTime:e[6]||(e[6]=a=>n.removeTime(t.updatedTimePair.startTime))},null,8,["class","time","isSet","onAddTime","onSetTime"])]),d("div",Rse,[H(o,{class:F(["time-control",{invalid:!t.updatedTimePair.endTime.isValid}]),label:"End",time:t.updatedTimePair.endTime.value,title:"End",endpoint:"End",type:"date",isSet:!t.updatedTimePair.endTime.isRemoved,onAddTime:n.addTime,onSetTime:n.setTime,onRemoveTime:e[7]||(e[7]=a=>n.removeTime(t.updatedTimePair.endTime))},null,8,["class","time","isSet","onAddTime","onSetTime"])])]),d("div",Mse,[X(d("input",{class:"form-check-input mt-1",type:"checkbox",value:"",id:"isEventVisible","onUpdate:modelValue":e[8]||(e[8]=a=>t.updatedTimePair.isEventVisible=a)},null,512),[[ji,t.updatedTimePair.isEventVisible]]),e[17]||(e[17]=d("label",{class:"form-check-label float-start",for:"isEventVisible"}," Is Event Visible ",-1))]),d("div",Ose,[X(d("input",{class:"form-check-input mt-1",type:"checkbox",value:"",id:"flexCheckDefault","onUpdate:modelValue":e[9]||(e[9]=a=>t.updatedTimePair.isRecommended=a)},null,512),[[ji,t.updatedTimePair.isRecommended]]),e[18]||(e[18]=d("label",{class:"form-check-label float-start",for:"flexCheckDefault"}," Recommended ",-1))]),d("div",$se,[d("button",{class:"btn btn-sm btn-link",type:"button",onClick:e[10]||(e[10]=(...a)=>n.save&&n.save(...a))},"Save"),d("button",{class:"btn btn-sm btn-link",type:"button",onClick:e[11]||(e[11]=(...a)=>n.cancel&&n.cancel(...a))},"Cancel")])])],2)):x("",!0)])}const Lse=Q(use,[["render",Nse],["__scopeId","data-v-5adb1029"]]),Vse={name:"TodoFormModal",components:{RepeatControl:qS,TimePairControl:Lse,ItemMapper:Um,FormItemList:Hm},props:{id:Number},data:function(){return{store:null,plannerStore:null,metrics:fe(R2),todoTypes:fe(M2),mediums:fe(O2),todoActivityTypes:fe(N2),text:{value:void 0,oldValue:void 0,isUpdated:!1},description:{value:void 0,oldValue:void 0,isUpdated:!1},points:{value:void 0,oldValue:void 0,isUpdated:!1},typeID:{value:void 0,oldValue:void 0,isUpdated:!1},mediumID:{value:void 0,oldValue:void 0,isUpdated:!1},metricIDs:{value:[],oldValue:[],isUpdated:!1},repeats:{value:[],added:[],deletedIDs:[]},timePairs:{value:[],added:[],deletedIDs:[]},todos:{ids:[],value:[],newItems:[],addedIDs:[],removedIDs:[]},selectedRepeatID:void 0,selectedTimePairID:void 0,mapper:{isShown:!1,type:void 0}}},created:async function(){let t=await K(()=>Promise.resolve().then(()=>hi),void 0);this.store=t.useTodoStore();let e=await K(()=>Promise.resolve().then(()=>ht),void 0);this.plannerStore=e.usePlannerStore();let i=this.store.getItem(this.id);this.setProps(i)},computed:{todo(){if(this.store){let t=this.store.getItem(this.id);return this.setProps(t),t}else return null},parentIDs(){if(this.todo){var t=Zr(this.todo.parents,"todo",this.id);return t.map(e=>e.id)}else return[]},childIDs(){if(this.todo){var t=Zr(this.todo.children,"todo",this.id);return t.map(e=>e.id)}else return[]},goalIDs(){if(this.todo){var t=Zr(this.todo.goals,"todo",this.id);return t.map(e=>e.id)}else return[]},repeatIDs(){var t;return(t=this.repeats)!=null&&t.value?this.repeats.value.map(e=>e.id):[]},activityType(){if(this.todo&&this.todo.activityTypeID){let t=this.todoActivityTypes.find(e=>e.id==this.todo.activityTypeID);if(t)return t.text}},activityTypeColor(){if(this.todo&&this.todo.activityTypeID){let t=this.todoActivityTypes.find(e=>e.id==this.todo.activityTypeID);if(t)return t.color}}},methods:{setProps(t){this.text.value=t.text,this.text.oldValue=t.text,this.text.isUpdated=!1,this.description.value=t.description,this.description.oldValue=t.description,this.description.isUpdated=!1,this.points.value=t.points,this.points.oldValue=t.points,this.points.isUpdated=!1,this.typeID.value=t.typeID,this.typeID.oldValue=t.typeID,this.typeID.isUpdated=!1,this.mediumID.value=t.mediumID,this.mediumID.oldValue=t.mediumID,this.mediumID.isUpdated=!1,this.metricIDs.value=fe(t.metricIDs),this.metricIDs.oldValue=fe(t.metricIDs),this.metricIDs.isUpdated=!1,this.repeats.value=fe(t.repeats),this.repeats.added=[],this.repeats.updated=[],this.repeats.deletedIDs=[],this.timePairs.value=fe(t.timePairs),this.timePairs.added=[],this.timePairs.updated=[],this.timePairs.deletedIDs=[]},setSelectedRepeat(t){this.selectedRepeatID=t},setSelectedTimePair(t){this.selectedTimePairID=t},selectItems(t,e,i){this.store.mapItems(this.id,t,e,i),this.mapper.isShown=!1,this.mapper.type=void 0},saveRepeat(t){let e=fe(t);Hs(e,this.repeats.value);let i=fe(t);t.id>0?$n(i,this.repeats.updated):$n(i,this.repeats.added),this.selectedRepeatID=void 0},saveTimePair(t){let e=fe(t);e.startTime=e.startTime?e.startTime.value:null,e.endTime=e.endTime?e.endTime.value:null,Hs(e,this.timePairs.value);let i=fe(t);t.id>0?$n(i,this.timePairs.updated):$n(i,this.timePairs.added),this.selectedTimePairID=void 0},save(){let t={id:this.id,text:this.text};this.store.saveTodo(t),this.$emit("closeItemModal")},saveText(){this.id>0&&this.text.value.trim()!=""&&this.text.value!=this.text.oldValue&&this.store.saveText(this.id,this.text.value)},saveDescription(){this.id>0&&this.description.value.trim()!=""&&this.description.value!=this.description.oldValue&&this.store.saveDescription(this.id,this.description.value)},savePoints(){this.id>0&&this.points.value.trim()!=""&&this.points.value!=this.points.oldValue&&this.store.savePoints(this.id,this.points.value)},saveType(){this.id>0&&this.typeID.value!=this.typeID.oldValue&&this.store.saveType(this.id,this.typeID.value)},saveMedium(){this.id>0&&this.mediumID.value!=this.mediumID.oldValue&&this.store.saveMedium(this.id,this.mediumID.value)},toggleMetric(t){if(!this.metricIDs.value.includes(t))this.metricIDs.value.push(t),this.store.mapItems(this.id,"metric",[t],[]);else{let e=this.metricIDs.value.indexOf(t);this.metricIDs.value.splice(e,1),this.store.mapItems(this.id,"metric",[],[t])}},hasMetric(t){return!!this.metricIDs.value.includes(t)},createTask(){this.store.createTask(this.id,this.plannerStore.selectedDate)},addItem(t,e){this.store.createAndMapItem(this.id,t,e)},addItemClicked(t){this.mapper.isShown=!0,this.mapper.type=t},addTimeClicked(){let t=He(this.timePairs.value,"id"),e=this.plannerStore.createTimePair();e.id=t.length>0&&t[0].id<0?t[0].id-1:-1,this.timePairs.value.unshift(e)},addRepeatClicked(){let t=He(this.repeats.value,"id"),e=this.plannerStore.createRepeat();e.id=t.length>0&&t[0].id<0?t[0].id-1:-1,this.repeats.value.unshift(e)},cancelMapping(){this.mapper.isShown=!1,this.mapper.type=void 0},cancelRepeatEditing(t){if(t<0){let e=this.repeats.value.findIndex(i=>i.id==t);this.repeats.value.splice(e,1)}this.selectedRepeatID=void 0},cancelTimePairEditing(t){if(t<0){let e=this.timePairs.value.findIndex(i=>i.id==t);this.timePairs.value.splice(e,1)}this.selectedTimePairID=void 0},refreshRepetitionForRepeat(t){this.store.refreshRepetitionForRepeat(this.id,t)},deleteFutureRepetitionsForRepeat(t,e){this.store.deleteFutureRepetitionsForRepeat(this.id,t,e)}},watch:{"text.value"(t){t!=this.text.oldValue?(this.text.isUpdated=!0,this.saveText()):this.isUpdated=!1},"description.value"(t){t!=this.description.oldValue?(this.description.isUpdated=!0,this.saveDescription()):this.isUpdated=!1},"points.value"(t){t!=this.points.oldValue?(this.points.isUpdated=!0,this.savePoints()):this.isUpdated=!1},"typeID.value"(t){t!=this.typeID.oldValue?(this.typeID.isUpdated=!0,this.saveType()):this.isUpdated=!1},"mediumID.value"(t){t!=this.mediumID.oldValue?(this.mediumID.isUpdated=!0,this.saveMedium()):this.isUpdated=!1}}},Wse=["id"],Fse={class:"modal-content"},Bse={class:"modal-header"},zse={class:"me-2"},jse={class:"modal-body"},Hse={key:0,class:"container-fluid"},Use={class:"row g-2"},Gse={class:"col-12"},Yse={class:"d-flex flex-column"},qse={class:"text-wrapper"},Kse={class:"toolbar d-flex flex-row mt-1"},Jse={class:"metrics d-flex flex-row"},Qse=["onClick"],Zse={class:"input-wrrapper d-flex flex-row"},Xse=["for"],ene=["id","value"],tne={class:"input-wrrapper d-flex flex-row"},ine=["for"],sne=["id"],nne=["value"],rne={class:"input-wrrapper d-flex flex-row"},one=["for"],ane=["id"],lne=["value"],dne={class:"row g-2 pt-2"},une={class:"col-12 col-sm-4"},cne={class:"d-flex flex-column"},hne={class:"col-6 col-sm-4 form-column"},fne={class:"col-6 col-sm-4 d-flex flex-column"},mne={class:"d-flex justify-content-between mt-1 mb-1"},pne={class:"d-flex justify-content-between mt-1 mb-1"},gne={key:1,class:"container"},vne={class:"row g-2"},yne={class:"col-12"},_ne={key:0,class:"modal-footer"};function bne(t,e,i,s,r,n){const o=$("FormItemList"),a=$("RepeatControl"),l=$("TimePairControl"),c=$("ItemMapper");return m(),p("div",{id:`todo-form-modal-${i.id}`,class:"modal-dialog modal-xl modal-fullscreen-md-down modal-dialog modal-dialog-centered modal-dialog-scrollable"},[d("div",Fse,[d("div",Bse,[d("span",zse,"Todo "+k(n.todo?n.todo.id:""),1),d("span",{class:"activity-type",style:$e({"background-color":n.activityTypeColor||"lightskyblue"})},k(n.activityType),5),e[15]||(e[15]=d("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1))]),e[24]||(e[24]=d("div",null,null,-1)),d("div",jse,[t.mapper.isShown?x("",!0):(m(),p("div",Hse,[d("div",Use,[d("div",Gse,[d("div",Yse,[d("div",qse,[X(d("input",{id:"text",class:"textbox",type:"text",placeholder:"Title","onUpdate:modelValue":e[0]||(e[0]=f=>t.text.value=f),spellcheck:"true"},null,512),[[Ae,t.text.value,void 0,{lazy:!0,trim:!0}]])]),d("div",Kse,[d("div",Jse,[(m(!0),p(L,null,G(t.metrics,f=>(m(),p("span",{key:f.id,class:F(["metric",{active:n.hasMetric(f.id)}]),onClick:v=>n.toggleMetric(f.id)},k(f.text),11,Qse))),128))]),d("div",Zse,[d("label",{class:"me-1",for:`todo-${i.id}-points`},"Points",8,Xse),d("input",{type:"number",class:"form-control form-control-sm",id:`todo-${i.id}-points`,value:t.points.value,onBlur:e[1]||(e[1]=f=>t.points.value=f.target.value)},null,40,ene)]),d("div",tne,[d("label",{class:"me-1",for:`todo-${i.id}-type`},"Type",8,ine),X(d("select",{id:`todo-${i.id}-type`,class:"form-select form-select-sm","aria-label":"select","onUpdate:modelValue":e[2]||(e[2]=f=>t.typeID.value=f)},[e[16]||(e[16]=d("option",{value:null},"None",-1)),(m(!0),p(L,null,G(t.todoTypes,f=>(m(),p("option",{key:f.id,value:f.id},k(f.text),9,nne))),128))],8,sne),[[Ts,t.typeID.value]])]),d("div",rne,[d("label",{class:"me-1",for:`todo-${i.id}-type`},"Meduim",8,one),X(d("select",{id:`todo-${i.id}-type`,class:"form-select form-select-sm","aria-label":"select","onUpdate:modelValue":e[3]||(e[3]=f=>t.mediumID.value=f)},[e[17]||(e[17]=d("option",{value:null},"None",-1)),(m(!0),p(L,null,G(t.mediums,f=>(m(),p("option",{key:f.id,value:f.id},k(f.text),9,lne))),128))],8,ane),[[Ts,t.mediumID.value]])])])])])]),d("div",dne,[d("div",une,[d("div",cne,[e[18]||(e[18]=d("div",{class:"header d-flex flex-column"},[d("div",{class:"d-flex flex-row justify-content-between"},[d("span",{class:"text-start"},"Description"),d("img",{class:"mt-auto mb-auto me-2",src:kr,width:"5",height:"8"})]),d("hr")],-1)),X(d("textarea",{class:"textarea","onUpdate:modelValue":e[4]||(e[4]=f=>t.description.value=f),spellcheck:"true"},null,512),[[Ae,t.description.value,void 0,{lazy:!0,trim:!0}]])])]),d("div",hne,[H(o,{itemType:"todo",itemIDs:n.parentIDs,isParent:!0,parentType:"todo",parentID:i.id,repeatIDs:n.repeatIDs,onAddItemClicked:n.addItemClicked,onAddItem:n.addItem},null,8,["itemIDs","parentID","repeatIDs","onAddItemClicked","onAddItem"]),H(o,{itemType:"todo",itemIDs:n.childIDs,isChild:!0,parentType:"todo",parentID:i.id,repeatIDs:n.repeatIDs,onAddItemClicked:n.addItemClicked,onAddItem:n.addItem},null,8,["itemIDs","parentID","repeatIDs","onAddItemClicked","onAddItem"]),H(o,{itemType:"goal",itemIDs:n.goalIDs,isChild:!1,parentType:"todo",parentID:i.id,repeatIDs:n.repeatIDs,onAddItemClicked:n.addItemClicked,onAddItem:n.addItem},null,8,["itemIDs","parentID","repeatIDs","onAddItemClicked","onAddItem"])]),d("div",fne,[d("div",null,[e[20]||(e[20]=d("span",{class:"form-head"},"Repetition",-1)),d("div",mne,[d("button",{class:"add-btn my-auto",type:"button",onClick:e[5]||(e[5]=(...f)=>n.addRepeatClicked&&n.addRepeatClicked(...f))},e[19]||(e[19]=[d("img",{src:pn,width:"10",height:"10"},null,-1),pr("Add ")]))]),d("div",null,[(m(!0),p(L,null,G(t.repeats.value,f=>(m(),ie(a,{key:f.id,repeat:f,itemID:i.id,itemType:"todo",canEdit:t.selectedRepeatID==null,onSaveRepeat:n.saveRepeat,onSetSelectedRepeat:n.setSelectedRepeat,onCancelRepeatEditing:n.cancelRepeatEditing,onRefreshRepetition:n.refreshRepetitionForRepeat,onDeleteFutureRepetitions:n.deleteFutureRepetitionsForRepeat},null,8,["repeat","itemID","canEdit","onSaveRepeat","onSetSelectedRepeat","onCancelRepeatEditing","onRefreshRepetition","onDeleteFutureRepetitions"]))),128))])]),d("div",null,[e[22]||(e[22]=d("span",{class:"form-head"},"Time",-1)),d("div",pne,[d("button",{class:"add-btn my-auto",type:"button",onClick:e[6]||(e[6]=(...f)=>n.addTimeClicked&&n.addTimeClicked(...f))},e[21]||(e[21]=[d("img",{src:pn,width:"10",height:"10"},null,-1),pr("Add ")]))]),d("div",null,[(m(!0),p(L,null,G(t.timePairs.value,f=>(m(),ie(l,{key:f.id,timePair:f,itemID:i.id,itemType:"todo",canEdit:t.selectedTimePairID==null,onSaveTimePair:n.saveTimePair,onSetSelectedTimePair:n.setSelectedTimePair,onCancelTimePairEditing:n.cancelTimePairEditing},null,8,["timePair","itemID","canEdit","onSaveTimePair","onSetSelectedTimePair","onCancelTimePairEditing"]))),128))])])])])])),t.mapper.isShown?(m(),p("div",gne,[d("div",vne,[d("div",yne,[t.mapper.type=="parent"?(m(),ie(c,{key:0,itemType:"todo",selectedIDs:n.parentIDs,onClose:e[7]||(e[7]=f=>t.mapper.isShown=!1),onCancel:n.cancelMapping,onSelect:e[8]||(e[8]=(f,v)=>n.selectItems("parent",f,v))},null,8,["selectedIDs","onCancel"])):x("",!0),t.mapper.type=="child"?(m(),ie(c,{key:1,itemType:"todo",selectedIDs:n.childIDs,onClose:e[9]||(e[9]=f=>t.mapper.isShown=!1),onCancel:n.cancelMapping,onSelect:e[10]||(e[10]=(f,v)=>n.selectItems("child",f,v))},null,8,["selectedIDs","onCancel"])):x("",!0),t.mapper.type=="goal"?(m(),ie(c,{key:2,itemType:"goal",selectedIDs:n.goalIDs,onClose:e[11]||(e[11]=f=>t.mapper.isShown=!1),onCancel:n.cancelMapping,onSelect:e[12]||(e[12]=(f,v)=>n.selectItems("goal",f,v))},null,8,["selectedIDs","onCancel"])):x("",!0)])])])):x("",!0)]),t.mapper.isShown?x("",!0):(m(),p("div",_ne,[d("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal",onClick:e[13]||(e[13]=(...f)=>n.createTask&&n.createTask(...f))},"Create Task"),e[23]||(e[23]=d("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close",-1)),d("button",{type:"button",class:"btn btn-primary",onClick:e[14]||(e[14]=(...f)=>n.save&&n.save(...f))},"Save")]))])],8,Wse)}const wne=Q(Vse,[["render",bne],["__scopeId","data-v-eedbd8d7"]]);var Ui="top",ds="bottom",us="right",Gi="left",cc="auto",xa=[Ui,ds,us,Gi],uo="start",aa="end",KS="clippingParents",Gm="viewport",$o="popper",JS="reference",bf=xa.reduce(function(t,e){return t.concat([e+"-"+uo,e+"-"+aa])},[]),Ym=[].concat(xa,[cc]).reduce(function(t,e){return t.concat([e,e+"-"+uo,e+"-"+aa])},[]),QS="beforeRead",ZS="read",XS="afterRead",e1="beforeMain",t1="main",i1="afterMain",s1="beforeWrite",n1="write",r1="afterWrite",o1=[QS,ZS,XS,e1,t1,i1,s1,n1,r1];function gn(t){return t?(t.nodeName||"").toLowerCase():null}function cs(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function co(t){var e=cs(t).Element;return t instanceof e||t instanceof Element}function ws(t){var e=cs(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function qm(t){if(typeof ShadowRoot>"u")return!1;var e=cs(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function Sne(t){var e=t.state;Object.keys(e.elements).forEach(function(i){var s=e.styles[i]||{},r=e.attributes[i]||{},n=e.elements[i];!ws(n)||!gn(n)||(Object.assign(n.style,s),Object.keys(r).forEach(function(o){var a=r[o];a===!1?n.removeAttribute(o):n.setAttribute(o,a===!0?"":a)}))})}function Tne(t){var e=t.state,i={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,i.popper),e.styles=i,e.elements.arrow&&Object.assign(e.elements.arrow.style,i.arrow),function(){Object.keys(e.elements).forEach(function(s){var r=e.elements[s],n=e.attributes[s]||{},o=Object.keys(e.styles.hasOwnProperty(s)?e.styles[s]:i[s]),a=o.reduce(function(l,c){return l[c]="",l},{});!ws(r)||!gn(r)||(Object.assign(r.style,a),Object.keys(n).forEach(function(l){r.removeAttribute(l)}))})}}const Km={name:"applyStyles",enabled:!0,phase:"write",fn:Sne,effect:Tne,requires:["computeStyles"]};function un(t){return t.split("-")[0]}var eo=Math.max,Su=Math.min,la=Math.round;function wf(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function a1(){return!/^((?!chrome|android).)*safari/i.test(wf())}function da(t,e,i){e===void 0&&(e=!1),i===void 0&&(i=!1);var s=t.getBoundingClientRect(),r=1,n=1;e&&ws(t)&&(r=t.offsetWidth>0&&la(s.width)/t.offsetWidth||1,n=t.offsetHeight>0&&la(s.height)/t.offsetHeight||1);var o=co(t)?cs(t):window,a=o.visualViewport,l=!a1()&&i,c=(s.left+(l&&a?a.offsetLeft:0))/r,f=(s.top+(l&&a?a.offsetTop:0))/n,v=s.width/r,S=s.height/n;return{width:v,height:S,top:f,right:c+v,bottom:f+S,left:c,x:c,y:f}}function Jm(t){var e=da(t),i=t.offsetWidth,s=t.offsetHeight;return Math.abs(e.width-i)<=1&&(i=e.width),Math.abs(e.height-s)<=1&&(s=e.height),{x:t.offsetLeft,y:t.offsetTop,width:i,height:s}}function l1(t,e){var i=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(i&&qm(i)){var s=e;do{if(s&&t.isSameNode(s))return!0;s=s.parentNode||s.host}while(s)}return!1}function Hn(t){return cs(t).getComputedStyle(t)}function xne(t){return["table","td","th"].indexOf(gn(t))>=0}function Cr(t){return((co(t)?t.ownerDocument:t.document)||window.document).documentElement}function hc(t){return gn(t)==="html"?t:t.assignedSlot||t.parentNode||(qm(t)?t.host:null)||Cr(t)}function ay(t){return!ws(t)||Hn(t).position==="fixed"?null:t.offsetParent}function Ine(t){var e=/firefox/i.test(wf()),i=/Trident/i.test(wf());if(i&&ws(t)){var s=Hn(t);if(s.position==="fixed")return null}var r=hc(t);for(qm(r)&&(r=r.host);ws(r)&&["html","body"].indexOf(gn(r))<0;){var n=Hn(r);if(n.transform!=="none"||n.perspective!=="none"||n.contain==="paint"||["transform","perspective"].indexOf(n.willChange)!==-1||e&&n.willChange==="filter"||e&&n.filter&&n.filter!=="none")return r;r=r.parentNode}return null}function Xl(t){for(var e=cs(t),i=ay(t);i&&xne(i)&&Hn(i).position==="static";)i=ay(i);return i&&(gn(i)==="html"||gn(i)==="body"&&Hn(i).position==="static")?e:i||Ine(t)||e}function Qm(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function ll(t,e,i){return eo(t,Su(e,i))}function Ene(t,e,i){var s=ll(t,e,i);return s>i?i:s}function d1(){return{top:0,right:0,bottom:0,left:0}}function u1(t){return Object.assign({},d1(),t)}function c1(t,e){return e.reduce(function(i,s){return i[s]=t,i},{})}var Dne=function(e,i){return e=typeof e=="function"?e(Object.assign({},i.rects,{placement:i.placement})):e,u1(typeof e!="number"?e:c1(e,xa))};function kne(t){var e,i=t.state,s=t.name,r=t.options,n=i.elements.arrow,o=i.modifiersData.popperOffsets,a=un(i.placement),l=Qm(a),c=[Gi,us].indexOf(a)>=0,f=c?"height":"width";if(!(!n||!o)){var v=Dne(r.padding,i),S=Jm(n),I=l==="y"?Ui:Gi,C=l==="y"?ds:us,D=i.rects.reference[f]+i.rects.reference[l]-o[l]-i.rects.popper[f],J=o[l]-i.rects.reference[l],V=Xl(n),se=V?l==="y"?V.clientHeight||0:V.clientWidth||0:0,oe=D/2-J/2,ee=v[I],_e=se-S[f]-v[C],_=se/2-S[f]/2+oe,Ee=ll(ee,_,_e),Te=l;i.modifiersData[s]=(e={},e[Te]=Ee,e.centerOffset=Ee-_,e)}}function Cne(t){var e=t.state,i=t.options,s=i.element,r=s===void 0?"[data-popper-arrow]":s;r!=null&&(typeof r=="string"&&(r=e.elements.popper.querySelector(r),!r)||l1(e.elements.popper,r)&&(e.elements.arrow=r))}const h1={name:"arrow",enabled:!0,phase:"main",fn:kne,effect:Cne,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function ua(t){return t.split("-")[1]}var Pne={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Ane(t,e){var i=t.x,s=t.y,r=e.devicePixelRatio||1;return{x:la(i*r)/r||0,y:la(s*r)/r||0}}function ly(t){var e,i=t.popper,s=t.popperRect,r=t.placement,n=t.variation,o=t.offsets,a=t.position,l=t.gpuAcceleration,c=t.adaptive,f=t.roundOffsets,v=t.isFixed,S=o.x,I=S===void 0?0:S,C=o.y,D=C===void 0?0:C,J=typeof f=="function"?f({x:I,y:D}):{x:I,y:D};I=J.x,D=J.y;var V=o.hasOwnProperty("x"),se=o.hasOwnProperty("y"),oe=Gi,ee=Ui,_e=window;if(c){var _=Xl(i),Ee="clientHeight",Te="clientWidth";if(_===cs(i)&&(_=Cr(i),Hn(_).position!=="static"&&a==="absolute"&&(Ee="scrollHeight",Te="scrollWidth")),_=_,r===Ui||(r===Gi||r===us)&&n===aa){ee=ds;var Pe=v&&_===_e&&_e.visualViewport?_e.visualViewport.height:_[Ee];D-=Pe-s.height,D*=l?1:-1}if(r===Gi||(r===Ui||r===ds)&&n===aa){oe=us;var Fe=v&&_===_e&&_e.visualViewport?_e.visualViewport.width:_[Te];I-=Fe-s.width,I*=l?1:-1}}var at=Object.assign({position:a},c&&Pne),Xe=f===!0?Ane({x:I,y:D},cs(i)):{x:I,y:D};if(I=Xe.x,D=Xe.y,l){var lt;return Object.assign({},at,(lt={},lt[ee]=se?"0":"",lt[oe]=V?"0":"",lt.transform=(_e.devicePixelRatio||1)<=1?"translate("+I+"px, "+D+"px)":"translate3d("+I+"px, "+D+"px, 0)",lt))}return Object.assign({},at,(e={},e[ee]=se?D+"px":"",e[oe]=V?I+"px":"",e.transform="",e))}function Rne(t){var e=t.state,i=t.options,s=i.gpuAcceleration,r=s===void 0?!0:s,n=i.adaptive,o=n===void 0?!0:n,a=i.roundOffsets,l=a===void 0?!0:a,c={placement:un(e.placement),variation:ua(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:r,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,ly(Object.assign({},c,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:o,roundOffsets:l})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,ly(Object.assign({},c,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const Zm={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:Rne,data:{}};var Od={passive:!0};function Mne(t){var e=t.state,i=t.instance,s=t.options,r=s.scroll,n=r===void 0?!0:r,o=s.resize,a=o===void 0?!0:o,l=cs(e.elements.popper),c=[].concat(e.scrollParents.reference,e.scrollParents.popper);return n&&c.forEach(function(f){f.addEventListener("scroll",i.update,Od)}),a&&l.addEventListener("resize",i.update,Od),function(){n&&c.forEach(function(f){f.removeEventListener("scroll",i.update,Od)}),a&&l.removeEventListener("resize",i.update,Od)}}const Xm={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:Mne,data:{}};var One={left:"right",right:"left",bottom:"top",top:"bottom"};function Qd(t){return t.replace(/left|right|bottom|top/g,function(e){return One[e]})}var $ne={start:"end",end:"start"};function dy(t){return t.replace(/start|end/g,function(e){return $ne[e]})}function ep(t){var e=cs(t),i=e.pageXOffset,s=e.pageYOffset;return{scrollLeft:i,scrollTop:s}}function tp(t){return da(Cr(t)).left+ep(t).scrollLeft}function Nne(t,e){var i=cs(t),s=Cr(t),r=i.visualViewport,n=s.clientWidth,o=s.clientHeight,a=0,l=0;if(r){n=r.width,o=r.height;var c=a1();(c||!c&&e==="fixed")&&(a=r.offsetLeft,l=r.offsetTop)}return{width:n,height:o,x:a+tp(t),y:l}}function Lne(t){var e,i=Cr(t),s=ep(t),r=(e=t.ownerDocument)==null?void 0:e.body,n=eo(i.scrollWidth,i.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),o=eo(i.scrollHeight,i.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0),a=-s.scrollLeft+tp(t),l=-s.scrollTop;return Hn(r||i).direction==="rtl"&&(a+=eo(i.clientWidth,r?r.clientWidth:0)-n),{width:n,height:o,x:a,y:l}}function ip(t){var e=Hn(t),i=e.overflow,s=e.overflowX,r=e.overflowY;return/auto|scroll|overlay|hidden/.test(i+r+s)}function f1(t){return["html","body","#document"].indexOf(gn(t))>=0?t.ownerDocument.body:ws(t)&&ip(t)?t:f1(hc(t))}function dl(t,e){var i;e===void 0&&(e=[]);var s=f1(t),r=s===((i=t.ownerDocument)==null?void 0:i.body),n=cs(s),o=r?[n].concat(n.visualViewport||[],ip(s)?s:[]):s,a=e.concat(o);return r?a:a.concat(dl(hc(o)))}function Sf(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function Vne(t,e){var i=da(t,!1,e==="fixed");return i.top=i.top+t.clientTop,i.left=i.left+t.clientLeft,i.bottom=i.top+t.clientHeight,i.right=i.left+t.clientWidth,i.width=t.clientWidth,i.height=t.clientHeight,i.x=i.left,i.y=i.top,i}function uy(t,e,i){return e===Gm?Sf(Nne(t,i)):co(e)?Vne(e,i):Sf(Lne(Cr(t)))}function Wne(t){var e=dl(hc(t)),i=["absolute","fixed"].indexOf(Hn(t).position)>=0,s=i&&ws(t)?Xl(t):t;return co(s)?e.filter(function(r){return co(r)&&l1(r,s)&&gn(r)!=="body"}):[]}function Fne(t,e,i,s){var r=e==="clippingParents"?Wne(t):[].concat(e),n=[].concat(r,[i]),o=n[0],a=n.reduce(function(l,c){var f=uy(t,c,s);return l.top=eo(f.top,l.top),l.right=Su(f.right,l.right),l.bottom=Su(f.bottom,l.bottom),l.left=eo(f.left,l.left),l},uy(t,o,s));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function m1(t){var e=t.reference,i=t.element,s=t.placement,r=s?un(s):null,n=s?ua(s):null,o=e.x+e.width/2-i.width/2,a=e.y+e.height/2-i.height/2,l;switch(r){case Ui:l={x:o,y:e.y-i.height};break;case ds:l={x:o,y:e.y+e.height};break;case us:l={x:e.x+e.width,y:a};break;case Gi:l={x:e.x-i.width,y:a};break;default:l={x:e.x,y:e.y}}var c=r?Qm(r):null;if(c!=null){var f=c==="y"?"height":"width";switch(n){case uo:l[c]=l[c]-(e[f]/2-i[f]/2);break;case aa:l[c]=l[c]+(e[f]/2-i[f]/2);break}}return l}function ca(t,e){e===void 0&&(e={});var i=e,s=i.placement,r=s===void 0?t.placement:s,n=i.strategy,o=n===void 0?t.strategy:n,a=i.boundary,l=a===void 0?KS:a,c=i.rootBoundary,f=c===void 0?Gm:c,v=i.elementContext,S=v===void 0?$o:v,I=i.altBoundary,C=I===void 0?!1:I,D=i.padding,J=D===void 0?0:D,V=u1(typeof J!="number"?J:c1(J,xa)),se=S===$o?JS:$o,oe=t.rects.popper,ee=t.elements[C?se:S],_e=Fne(co(ee)?ee:ee.contextElement||Cr(t.elements.popper),l,f,o),_=da(t.elements.reference),Ee=m1({reference:_,element:oe,placement:r}),Te=Sf(Object.assign({},oe,Ee)),Pe=S===$o?Te:_,Fe={top:_e.top-Pe.top+V.top,bottom:Pe.bottom-_e.bottom+V.bottom,left:_e.left-Pe.left+V.left,right:Pe.right-_e.right+V.right},at=t.modifiersData.offset;if(S===$o&&at){var Xe=at[r];Object.keys(Fe).forEach(function(lt){var Dt=[us,ds].indexOf(lt)>=0?1:-1,Ft=[Ui,ds].indexOf(lt)>=0?"y":"x";Fe[lt]+=Xe[Ft]*Dt})}return Fe}function Bne(t,e){e===void 0&&(e={});var i=e,s=i.placement,r=i.boundary,n=i.rootBoundary,o=i.padding,a=i.flipVariations,l=i.allowedAutoPlacements,c=l===void 0?Ym:l,f=ua(s),v=f?a?bf:bf.filter(function(C){return ua(C)===f}):xa,S=v.filter(function(C){return c.indexOf(C)>=0});S.length===0&&(S=v);var I=S.reduce(function(C,D){return C[D]=ca(t,{placement:D,boundary:r,rootBoundary:n,padding:o})[un(D)],C},{});return Object.keys(I).sort(function(C,D){return I[C]-I[D]})}function zne(t){if(un(t)===cc)return[];var e=Qd(t);return[dy(t),e,dy(e)]}function jne(t){var e=t.state,i=t.options,s=t.name;if(!e.modifiersData[s]._skip){for(var r=i.mainAxis,n=r===void 0?!0:r,o=i.altAxis,a=o===void 0?!0:o,l=i.fallbackPlacements,c=i.padding,f=i.boundary,v=i.rootBoundary,S=i.altBoundary,I=i.flipVariations,C=I===void 0?!0:I,D=i.allowedAutoPlacements,J=e.options.placement,V=un(J),se=V===J,oe=l||(se||!C?[Qd(J)]:zne(J)),ee=[J].concat(oe).reduce(function(ii,pi){return ii.concat(un(pi)===cc?Bne(e,{placement:pi,boundary:f,rootBoundary:v,padding:c,flipVariations:C,allowedAutoPlacements:D}):pi)},[]),_e=e.rects.reference,_=e.rects.popper,Ee=new Map,Te=!0,Pe=ee[0],Fe=0;Fe<ee.length;Fe++){var at=ee[Fe],Xe=un(at),lt=ua(at)===uo,Dt=[Ui,ds].indexOf(Xe)>=0,Ft=Dt?"width":"height",Ze=ca(e,{placement:at,boundary:f,rootBoundary:v,altBoundary:S,padding:c}),Le=Dt?lt?us:Gi:lt?ds:Ui;_e[Ft]>_[Ft]&&(Le=Qd(Le));var et=Qd(Le),Bt=[];if(n&&Bt.push(Ze[Xe]<=0),a&&Bt.push(Ze[Le]<=0,Ze[et]<=0),Bt.every(function(ii){return ii})){Pe=at,Te=!1;break}Ee.set(at,Bt)}if(Te)for(var Jt=C?3:1,wt=function(pi){var Xt=ee.find(function(W){var U=Ee.get(W);if(U)return U.slice(0,pi).every(function(q){return q})});if(Xt)return Pe=Xt,"break"},Gt=Jt;Gt>0;Gt--){var Nt=wt(Gt);if(Nt==="break")break}e.placement!==Pe&&(e.modifiersData[s]._skip=!0,e.placement=Pe,e.reset=!0)}}const p1={name:"flip",enabled:!0,phase:"main",fn:jne,requiresIfExists:["offset"],data:{_skip:!1}};function cy(t,e,i){return i===void 0&&(i={x:0,y:0}),{top:t.top-e.height-i.y,right:t.right-e.width+i.x,bottom:t.bottom-e.height+i.y,left:t.left-e.width-i.x}}function hy(t){return[Ui,us,ds,Gi].some(function(e){return t[e]>=0})}function Hne(t){var e=t.state,i=t.name,s=e.rects.reference,r=e.rects.popper,n=e.modifiersData.preventOverflow,o=ca(e,{elementContext:"reference"}),a=ca(e,{altBoundary:!0}),l=cy(o,s),c=cy(a,r,n),f=hy(l),v=hy(c);e.modifiersData[i]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:f,hasPopperEscaped:v},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":f,"data-popper-escaped":v})}const g1={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:Hne};function Une(t,e,i){var s=un(t),r=[Gi,Ui].indexOf(s)>=0?-1:1,n=typeof i=="function"?i(Object.assign({},e,{placement:t})):i,o=n[0],a=n[1];return o=o||0,a=(a||0)*r,[Gi,us].indexOf(s)>=0?{x:a,y:o}:{x:o,y:a}}function Gne(t){var e=t.state,i=t.options,s=t.name,r=i.offset,n=r===void 0?[0,0]:r,o=Ym.reduce(function(f,v){return f[v]=Une(v,e.rects,n),f},{}),a=o[e.placement],l=a.x,c=a.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=c),e.modifiersData[s]=o}const v1={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:Gne};function Yne(t){var e=t.state,i=t.name;e.modifiersData[i]=m1({reference:e.rects.reference,element:e.rects.popper,placement:e.placement})}const sp={name:"popperOffsets",enabled:!0,phase:"read",fn:Yne,data:{}};function qne(t){return t==="x"?"y":"x"}function Kne(t){var e=t.state,i=t.options,s=t.name,r=i.mainAxis,n=r===void 0?!0:r,o=i.altAxis,a=o===void 0?!1:o,l=i.boundary,c=i.rootBoundary,f=i.altBoundary,v=i.padding,S=i.tether,I=S===void 0?!0:S,C=i.tetherOffset,D=C===void 0?0:C,J=ca(e,{boundary:l,rootBoundary:c,padding:v,altBoundary:f}),V=un(e.placement),se=ua(e.placement),oe=!se,ee=Qm(V),_e=qne(ee),_=e.modifiersData.popperOffsets,Ee=e.rects.reference,Te=e.rects.popper,Pe=typeof D=="function"?D(Object.assign({},e.rects,{placement:e.placement})):D,Fe=typeof Pe=="number"?{mainAxis:Pe,altAxis:Pe}:Object.assign({mainAxis:0,altAxis:0},Pe),at=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,Xe={x:0,y:0};if(_){if(n){var lt,Dt=ee==="y"?Ui:Gi,Ft=ee==="y"?ds:us,Ze=ee==="y"?"height":"width",Le=_[ee],et=Le+J[Dt],Bt=Le-J[Ft],Jt=I?-Te[Ze]/2:0,wt=se===uo?Ee[Ze]:Te[Ze],Gt=se===uo?-Te[Ze]:-Ee[Ze],Nt=e.elements.arrow,ii=I&&Nt?Jm(Nt):{width:0,height:0},pi=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:d1(),Xt=pi[Dt],W=pi[Ft],U=ll(0,Ee[Ze],ii[Ze]),q=oe?Ee[Ze]/2-Jt-U-Xt-Fe.mainAxis:wt-U-Xt-Fe.mainAxis,he=oe?-Ee[Ze]/2+Jt+U+W+Fe.mainAxis:Gt+U+W+Fe.mainAxis,Ye=e.elements.arrow&&Xl(e.elements.arrow),P=Ye?ee==="y"?Ye.clientTop||0:Ye.clientLeft||0:0,A=(lt=at==null?void 0:at[ee])!=null?lt:0,B=Le+q-A-P,ae=Le+he-A,Y=ll(I?Su(et,B):et,Le,I?eo(Bt,ae):Bt);_[ee]=Y,Xe[ee]=Y-Le}if(a){var ne,ke=ee==="x"?Ui:Gi,xe=ee==="x"?ds:us,Se=_[_e],ge=_e==="y"?"height":"width",ze=Se+J[ke],De=Se-J[xe],Oe=[Ui,Gi].indexOf(V)!==-1,Be=(ne=at==null?void 0:at[_e])!=null?ne:0,st=Oe?ze:Se-Ee[ge]-Te[ge]-Be+Fe.altAxis,St=Oe?Se+Ee[ge]+Te[ge]-Be-Fe.altAxis:De,ct=I&&Oe?Ene(st,Se,St):ll(I?st:ze,Se,I?St:De);_[_e]=ct,Xe[_e]=ct-Se}e.modifiersData[s]=Xe}}const y1={name:"preventOverflow",enabled:!0,phase:"main",fn:Kne,requiresIfExists:["offset"]};function Jne(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function Qne(t){return t===cs(t)||!ws(t)?ep(t):Jne(t)}function Zne(t){var e=t.getBoundingClientRect(),i=la(e.width)/t.offsetWidth||1,s=la(e.height)/t.offsetHeight||1;return i!==1||s!==1}function Xne(t,e,i){i===void 0&&(i=!1);var s=ws(e),r=ws(e)&&Zne(e),n=Cr(e),o=da(t,r,i),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(s||!s&&!i)&&((gn(e)!=="body"||ip(n))&&(a=Qne(e)),ws(e)?(l=da(e,!0),l.x+=e.clientLeft,l.y+=e.clientTop):n&&(l.x=tp(n))),{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function ere(t){var e=new Map,i=new Set,s=[];t.forEach(function(n){e.set(n.name,n)});function r(n){i.add(n.name);var o=[].concat(n.requires||[],n.requiresIfExists||[]);o.forEach(function(a){if(!i.has(a)){var l=e.get(a);l&&r(l)}}),s.push(n)}return t.forEach(function(n){i.has(n.name)||r(n)}),s}function tre(t){var e=ere(t);return o1.reduce(function(i,s){return i.concat(e.filter(function(r){return r.phase===s}))},[])}function ire(t){var e;return function(){return e||(e=new Promise(function(i){Promise.resolve().then(function(){e=void 0,i(t())})})),e}}function sre(t){var e=t.reduce(function(i,s){var r=i[s.name];return i[s.name]=r?Object.assign({},r,s,{options:Object.assign({},r.options,s.options),data:Object.assign({},r.data,s.data)}):s,i},{});return Object.keys(e).map(function(i){return e[i]})}var fy={placement:"bottom",modifiers:[],strategy:"absolute"};function my(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return!e.some(function(s){return!(s&&typeof s.getBoundingClientRect=="function")})}function fc(t){t===void 0&&(t={});var e=t,i=e.defaultModifiers,s=i===void 0?[]:i,r=e.defaultOptions,n=r===void 0?fy:r;return function(a,l,c){c===void 0&&(c=n);var f={placement:"bottom",orderedModifiers:[],options:Object.assign({},fy,n),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},v=[],S=!1,I={state:f,setOptions:function(V){var se=typeof V=="function"?V(f.options):V;D(),f.options=Object.assign({},n,f.options,se),f.scrollParents={reference:co(a)?dl(a):a.contextElement?dl(a.contextElement):[],popper:dl(l)};var oe=tre(sre([].concat(s,f.options.modifiers)));return f.orderedModifiers=oe.filter(function(ee){return ee.enabled}),C(),I.update()},forceUpdate:function(){if(!S){var V=f.elements,se=V.reference,oe=V.popper;if(my(se,oe)){f.rects={reference:Xne(se,Xl(oe),f.options.strategy==="fixed"),popper:Jm(oe)},f.reset=!1,f.placement=f.options.placement,f.orderedModifiers.forEach(function(Fe){return f.modifiersData[Fe.name]=Object.assign({},Fe.data)});for(var ee=0;ee<f.orderedModifiers.length;ee++){if(f.reset===!0){f.reset=!1,ee=-1;continue}var _e=f.orderedModifiers[ee],_=_e.fn,Ee=_e.options,Te=Ee===void 0?{}:Ee,Pe=_e.name;typeof _=="function"&&(f=_({state:f,options:Te,name:Pe,instance:I})||f)}}}},update:ire(function(){return new Promise(function(J){I.forceUpdate(),J(f)})}),destroy:function(){D(),S=!0}};if(!my(a,l))return I;I.setOptions(c).then(function(J){!S&&c.onFirstUpdate&&c.onFirstUpdate(J)});function C(){f.orderedModifiers.forEach(function(J){var V=J.name,se=J.options,oe=se===void 0?{}:se,ee=J.effect;if(typeof ee=="function"){var _e=ee({state:f,name:V,instance:I,options:oe}),_=function(){};v.push(_e||_)}})}function D(){v.forEach(function(J){return J()}),v=[]}return I}}var nre=fc(),rre=[Xm,sp,Zm,Km],ore=fc({defaultModifiers:rre}),are=[Xm,sp,Zm,Km,v1,p1,y1,h1,g1],np=fc({defaultModifiers:are});const _1=Object.freeze(Object.defineProperty({__proto__:null,afterMain:i1,afterRead:XS,afterWrite:r1,applyStyles:Km,arrow:h1,auto:cc,basePlacements:xa,beforeMain:e1,beforeRead:QS,beforeWrite:s1,bottom:ds,clippingParents:KS,computeStyles:Zm,createPopper:np,createPopperBase:nre,createPopperLite:ore,detectOverflow:ca,end:aa,eventListeners:Xm,flip:p1,hide:g1,left:Gi,main:t1,modifierPhases:o1,offset:v1,placements:Ym,popper:$o,popperGenerator:fc,popperOffsets:sp,preventOverflow:y1,read:ZS,reference:JS,right:us,start:uo,top:Ui,variationPlacements:bf,viewport:Gm,write:n1},Symbol.toStringTag,{value:"Module"}));/*!
  * Bootstrap v5.3.1 (https://getbootstrap.com/)
  * Copyright 2011-2023 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */const er=new Map,Dh={set(t,e,i){er.has(t)||er.set(t,new Map);const s=er.get(t);if(!s.has(e)&&s.size!==0){console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(s.keys())[0]}.`);return}s.set(e,i)},get(t,e){return er.has(t)&&er.get(t).get(e)||null},remove(t,e){if(!er.has(t))return;const i=er.get(t);i.delete(e),i.size===0&&er.delete(t)}},lre=1e6,dre=1e3,Tf="transitionend",b1=t=>(t&&window.CSS&&window.CSS.escape&&(t=t.replace(/#([^\s"#']+)/g,(e,i)=>`#${CSS.escape(i)}`)),t),ure=t=>t==null?`${t}`:Object.prototype.toString.call(t).match(/\s([a-z]+)/i)[1].toLowerCase(),cre=t=>{do t+=Math.floor(Math.random()*lre);while(document.getElementById(t));return t},hre=t=>{if(!t)return 0;let{transitionDuration:e,transitionDelay:i}=window.getComputedStyle(t);const s=Number.parseFloat(e),r=Number.parseFloat(i);return!s&&!r?0:(e=e.split(",")[0],i=i.split(",")[0],(Number.parseFloat(e)+Number.parseFloat(i))*dre)},w1=t=>{t.dispatchEvent(new Event(Tf))},Wn=t=>!t||typeof t!="object"?!1:(typeof t.jquery<"u"&&(t=t[0]),typeof t.nodeType<"u"),wr=t=>Wn(t)?t.jquery?t[0]:t:typeof t=="string"&&t.length>0?document.querySelector(b1(t)):null,Ia=t=>{if(!Wn(t)||t.getClientRects().length===0)return!1;const e=getComputedStyle(t).getPropertyValue("visibility")==="visible",i=t.closest("details:not([open])");if(!i)return e;if(i!==t){const s=t.closest("summary");if(s&&s.parentNode!==i||s===null)return!1}return e},Sr=t=>!t||t.nodeType!==Node.ELEMENT_NODE||t.classList.contains("disabled")?!0:typeof t.disabled<"u"?t.disabled:t.hasAttribute("disabled")&&t.getAttribute("disabled")!=="false",S1=t=>{if(!document.documentElement.attachShadow)return null;if(typeof t.getRootNode=="function"){const e=t.getRootNode();return e instanceof ShadowRoot?e:null}return t instanceof ShadowRoot?t:t.parentNode?S1(t.parentNode):null},Tu=()=>{},ed=t=>{t.offsetHeight},T1=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,kh=[],fre=t=>{document.readyState==="loading"?(kh.length||document.addEventListener("DOMContentLoaded",()=>{for(const e of kh)e()}),kh.push(t)):t()},Is=()=>document.documentElement.dir==="rtl",Cs=t=>{fre(()=>{const e=T1();if(e){const i=t.NAME,s=e.fn[i];e.fn[i]=t.jQueryInterface,e.fn[i].Constructor=t,e.fn[i].noConflict=()=>(e.fn[i]=s,t.jQueryInterface)}})},Zi=(t,e=[],i=t)=>typeof t=="function"?t(...e):i,x1=(t,e,i=!0)=>{if(!i){Zi(t);return}const r=hre(e)+5;let n=!1;const o=({target:a})=>{a===e&&(n=!0,e.removeEventListener(Tf,o),Zi(t))};e.addEventListener(Tf,o),setTimeout(()=>{n||w1(e)},r)},rp=(t,e,i,s)=>{const r=t.length;let n=t.indexOf(e);return n===-1?!i&&s?t[r-1]:t[0]:(n+=i?1:-1,s&&(n=(n+r)%r),t[Math.max(0,Math.min(n,r-1))])},mre=/[^.]*(?=\..*)\.|.*/,pre=/\..*/,gre=/::\d+$/,Ch={};let py=1;const I1={mouseenter:"mouseover",mouseleave:"mouseout"},vre=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function E1(t,e){return e&&`${e}::${py++}`||t.uidEvent||py++}function D1(t){const e=E1(t);return t.uidEvent=e,Ch[e]=Ch[e]||{},Ch[e]}function yre(t,e){return function i(s){return op(s,{delegateTarget:t}),i.oneOff&&ve.off(t,s.type,e),e.apply(t,[s])}}function _re(t,e,i){return function s(r){const n=t.querySelectorAll(e);for(let{target:o}=r;o&&o!==this;o=o.parentNode)for(const a of n)if(a===o)return op(r,{delegateTarget:o}),s.oneOff&&ve.off(t,r.type,e,i),i.apply(o,[r])}}function k1(t,e,i=null){return Object.values(t).find(s=>s.callable===e&&s.delegationSelector===i)}function C1(t,e,i){const s=typeof e=="string",r=s?i:e||i;let n=P1(t);return vre.has(n)||(n=t),[s,r,n]}function gy(t,e,i,s,r){if(typeof e!="string"||!t)return;let[n,o,a]=C1(e,i,s);e in I1&&(o=(C=>function(D){if(!D.relatedTarget||D.relatedTarget!==D.delegateTarget&&!D.delegateTarget.contains(D.relatedTarget))return C.call(this,D)})(o));const l=D1(t),c=l[a]||(l[a]={}),f=k1(c,o,n?i:null);if(f){f.oneOff=f.oneOff&&r;return}const v=E1(o,e.replace(mre,"")),S=n?_re(t,i,o):yre(t,o);S.delegationSelector=n?i:null,S.callable=o,S.oneOff=r,S.uidEvent=v,c[v]=S,t.addEventListener(a,S,n)}function xf(t,e,i,s,r){const n=k1(e[i],s,r);n&&(t.removeEventListener(i,n,!!r),delete e[i][n.uidEvent])}function bre(t,e,i,s){const r=e[i]||{};for(const[n,o]of Object.entries(r))n.includes(s)&&xf(t,e,i,o.callable,o.delegationSelector)}function P1(t){return t=t.replace(pre,""),I1[t]||t}const ve={on(t,e,i,s){gy(t,e,i,s,!1)},one(t,e,i,s){gy(t,e,i,s,!0)},off(t,e,i,s){if(typeof e!="string"||!t)return;const[r,n,o]=C1(e,i,s),a=o!==e,l=D1(t),c=l[o]||{},f=e.startsWith(".");if(typeof n<"u"){if(!Object.keys(c).length)return;xf(t,l,o,n,r?i:null);return}if(f)for(const v of Object.keys(l))bre(t,l,v,e.slice(1));for(const[v,S]of Object.entries(c)){const I=v.replace(gre,"");(!a||e.includes(I))&&xf(t,l,o,S.callable,S.delegationSelector)}},trigger(t,e,i){if(typeof e!="string"||!t)return null;const s=T1(),r=P1(e),n=e!==r;let o=null,a=!0,l=!0,c=!1;n&&s&&(o=s.Event(e,i),s(t).trigger(o),a=!o.isPropagationStopped(),l=!o.isImmediatePropagationStopped(),c=o.isDefaultPrevented());const f=op(new Event(e,{bubbles:a,cancelable:!0}),i);return c&&f.preventDefault(),l&&t.dispatchEvent(f),f.defaultPrevented&&o&&o.preventDefault(),f}};function op(t,e={}){for(const[i,s]of Object.entries(e))try{t[i]=s}catch{Object.defineProperty(t,i,{configurable:!0,get(){return s}})}return t}function vy(t){if(t==="true")return!0;if(t==="false")return!1;if(t===Number(t).toString())return Number(t);if(t===""||t==="null")return null;if(typeof t!="string")return t;try{return JSON.parse(decodeURIComponent(t))}catch{return t}}function Ph(t){return t.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`)}const Fn={setDataAttribute(t,e,i){t.setAttribute(`data-bs-${Ph(e)}`,i)},removeDataAttribute(t,e){t.removeAttribute(`data-bs-${Ph(e)}`)},getDataAttributes(t){if(!t)return{};const e={},i=Object.keys(t.dataset).filter(s=>s.startsWith("bs")&&!s.startsWith("bsConfig"));for(const s of i){let r=s.replace(/^bs/,"");r=r.charAt(0).toLowerCase()+r.slice(1,r.length),e[r]=vy(t.dataset[s])}return e},getDataAttribute(t,e){return vy(t.getAttribute(`data-bs-${Ph(e)}`))}};class td{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(e){return e=this._mergeConfigObj(e),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}_configAfterMerge(e){return e}_mergeConfigObj(e,i){const s=Wn(i)?Fn.getDataAttribute(i,"config"):{};return{...this.constructor.Default,...typeof s=="object"?s:{},...Wn(i)?Fn.getDataAttributes(i):{},...typeof e=="object"?e:{}}}_typeCheckConfig(e,i=this.constructor.DefaultType){for(const[s,r]of Object.entries(i)){const n=e[s],o=Wn(n)?"element":ure(n);if(!new RegExp(r).test(o))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${s}" provided type "${o}" but expected type "${r}".`)}}}const wre="5.3.1";class Zs extends td{constructor(e,i){super(),e=wr(e),e&&(this._element=e,this._config=this._getConfig(i),Dh.set(this._element,this.constructor.DATA_KEY,this))}dispose(){Dh.remove(this._element,this.constructor.DATA_KEY),ve.off(this._element,this.constructor.EVENT_KEY);for(const e of Object.getOwnPropertyNames(this))this[e]=null}_queueCallback(e,i,s=!0){x1(e,i,s)}_getConfig(e){return e=this._mergeConfigObj(e,this._element),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}static getInstance(e){return Dh.get(wr(e),this.DATA_KEY)}static getOrCreateInstance(e,i={}){return this.getInstance(e)||new this(e,typeof i=="object"?i:null)}static get VERSION(){return wre}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(e){return`${e}${this.EVENT_KEY}`}}const Ah=t=>{let e=t.getAttribute("data-bs-target");if(!e||e==="#"){let i=t.getAttribute("href");if(!i||!i.includes("#")&&!i.startsWith("."))return null;i.includes("#")&&!i.startsWith("#")&&(i=`#${i.split("#")[1]}`),e=i&&i!=="#"?i.trim():null}return b1(e)},Ge={find(t,e=document.documentElement){return[].concat(...Element.prototype.querySelectorAll.call(e,t))},findOne(t,e=document.documentElement){return Element.prototype.querySelector.call(e,t)},children(t,e){return[].concat(...t.children).filter(i=>i.matches(e))},parents(t,e){const i=[];let s=t.parentNode.closest(e);for(;s;)i.push(s),s=s.parentNode.closest(e);return i},prev(t,e){let i=t.previousElementSibling;for(;i;){if(i.matches(e))return[i];i=i.previousElementSibling}return[]},next(t,e){let i=t.nextElementSibling;for(;i;){if(i.matches(e))return[i];i=i.nextElementSibling}return[]},focusableChildren(t){const e=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(i=>`${i}:not([tabindex^="-"])`).join(",");return this.find(e,t).filter(i=>!Sr(i)&&Ia(i))},getSelectorFromElement(t){const e=Ah(t);return e&&Ge.findOne(e)?e:null},getElementFromSelector(t){const e=Ah(t);return e?Ge.findOne(e):null},getMultipleElementsFromSelector(t){const e=Ah(t);return e?Ge.find(e):[]}},mc=(t,e="hide")=>{const i=`click.dismiss${t.EVENT_KEY}`,s=t.NAME;ve.on(document,i,`[data-bs-dismiss="${s}"]`,function(r){if(["A","AREA"].includes(this.tagName)&&r.preventDefault(),Sr(this))return;const n=Ge.getElementFromSelector(this)||this.closest(`.${s}`);t.getOrCreateInstance(n)[e]()})},Sre="alert",Tre="bs.alert",A1=`.${Tre}`,xre=`close${A1}`,Ire=`closed${A1}`,Ere="fade",Dre="show";class pc extends Zs{static get NAME(){return Sre}close(){if(ve.trigger(this._element,xre).defaultPrevented)return;this._element.classList.remove(Dre);const i=this._element.classList.contains(Ere);this._queueCallback(()=>this._destroyElement(),this._element,i)}_destroyElement(){this._element.remove(),ve.trigger(this._element,Ire),this.dispose()}static jQueryInterface(e){return this.each(function(){const i=pc.getOrCreateInstance(this);if(typeof e=="string"){if(i[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);i[e](this)}})}}mc(pc,"close");Cs(pc);const kre="button",Cre="bs.button",Pre=`.${Cre}`,Are=".data-api",Rre="active",yy='[data-bs-toggle="button"]',Mre=`click${Pre}${Are}`;class gc extends Zs{static get NAME(){return kre}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle(Rre))}static jQueryInterface(e){return this.each(function(){const i=gc.getOrCreateInstance(this);e==="toggle"&&i[e]()})}}ve.on(document,Mre,yy,t=>{t.preventDefault();const e=t.target.closest(yy);gc.getOrCreateInstance(e).toggle()});Cs(gc);const Ore="swipe",Ea=".bs.swipe",$re=`touchstart${Ea}`,Nre=`touchmove${Ea}`,Lre=`touchend${Ea}`,Vre=`pointerdown${Ea}`,Wre=`pointerup${Ea}`,Fre="touch",Bre="pen",zre="pointer-event",jre=40,Hre={endCallback:null,leftCallback:null,rightCallback:null},Ure={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class xu extends td{constructor(e,i){super(),this._element=e,!(!e||!xu.isSupported())&&(this._config=this._getConfig(i),this._deltaX=0,this._supportPointerEvents=!!window.PointerEvent,this._initEvents())}static get Default(){return Hre}static get DefaultType(){return Ure}static get NAME(){return Ore}dispose(){ve.off(this._element,Ea)}_start(e){if(!this._supportPointerEvents){this._deltaX=e.touches[0].clientX;return}this._eventIsPointerPenTouch(e)&&(this._deltaX=e.clientX)}_end(e){this._eventIsPointerPenTouch(e)&&(this._deltaX=e.clientX-this._deltaX),this._handleSwipe(),Zi(this._config.endCallback)}_move(e){this._deltaX=e.touches&&e.touches.length>1?0:e.touches[0].clientX-this._deltaX}_handleSwipe(){const e=Math.abs(this._deltaX);if(e<=jre)return;const i=e/this._deltaX;this._deltaX=0,i&&Zi(i>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(ve.on(this._element,Vre,e=>this._start(e)),ve.on(this._element,Wre,e=>this._end(e)),this._element.classList.add(zre)):(ve.on(this._element,$re,e=>this._start(e)),ve.on(this._element,Nre,e=>this._move(e)),ve.on(this._element,Lre,e=>this._end(e)))}_eventIsPointerPenTouch(e){return this._supportPointerEvents&&(e.pointerType===Bre||e.pointerType===Fre)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const Gre="carousel",Yre="bs.carousel",Pr=`.${Yre}`,R1=".data-api",qre="ArrowLeft",Kre="ArrowRight",Jre=500,Ha="next",Ao="prev",No="left",Zd="right",Qre=`slide${Pr}`,Rh=`slid${Pr}`,Zre=`keydown${Pr}`,Xre=`mouseenter${Pr}`,eoe=`mouseleave${Pr}`,toe=`dragstart${Pr}`,ioe=`load${Pr}${R1}`,soe=`click${Pr}${R1}`,M1="carousel",$d="active",noe="slide",roe="carousel-item-end",ooe="carousel-item-start",aoe="carousel-item-next",loe="carousel-item-prev",O1=".active",$1=".carousel-item",doe=O1+$1,uoe=".carousel-item img",coe=".carousel-indicators",hoe="[data-bs-slide], [data-bs-slide-to]",foe='[data-bs-ride="carousel"]',moe={[qre]:Zd,[Kre]:No},poe={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},goe={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class id extends Zs{constructor(e,i){super(e,i),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=Ge.findOne(coe,this._element),this._addEventListeners(),this._config.ride===M1&&this.cycle()}static get Default(){return poe}static get DefaultType(){return goe}static get NAME(){return Gre}next(){this._slide(Ha)}nextWhenVisible(){!document.hidden&&Ia(this._element)&&this.next()}prev(){this._slide(Ao)}pause(){this._isSliding&&w1(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){if(this._config.ride){if(this._isSliding){ve.one(this._element,Rh,()=>this.cycle());return}this.cycle()}}to(e){const i=this._getItems();if(e>i.length-1||e<0)return;if(this._isSliding){ve.one(this._element,Rh,()=>this.to(e));return}const s=this._getItemIndex(this._getActive());if(s===e)return;const r=e>s?Ha:Ao;this._slide(r,i[e])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(e){return e.defaultInterval=e.interval,e}_addEventListeners(){this._config.keyboard&&ve.on(this._element,Zre,e=>this._keydown(e)),this._config.pause==="hover"&&(ve.on(this._element,Xre,()=>this.pause()),ve.on(this._element,eoe,()=>this._maybeEnableCycle())),this._config.touch&&xu.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const s of Ge.find(uoe,this._element))ve.on(s,toe,r=>r.preventDefault());const i={leftCallback:()=>this._slide(this._directionToOrder(No)),rightCallback:()=>this._slide(this._directionToOrder(Zd)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),Jre+this._config.interval))}};this._swipeHelper=new xu(this._element,i)}_keydown(e){if(/input|textarea/i.test(e.target.tagName))return;const i=moe[e.key];i&&(e.preventDefault(),this._slide(this._directionToOrder(i)))}_getItemIndex(e){return this._getItems().indexOf(e)}_setActiveIndicatorElement(e){if(!this._indicatorsElement)return;const i=Ge.findOne(O1,this._indicatorsElement);i.classList.remove($d),i.removeAttribute("aria-current");const s=Ge.findOne(`[data-bs-slide-to="${e}"]`,this._indicatorsElement);s&&(s.classList.add($d),s.setAttribute("aria-current","true"))}_updateInterval(){const e=this._activeElement||this._getActive();if(!e)return;const i=Number.parseInt(e.getAttribute("data-bs-interval"),10);this._config.interval=i||this._config.defaultInterval}_slide(e,i=null){if(this._isSliding)return;const s=this._getActive(),r=e===Ha,n=i||rp(this._getItems(),s,r,this._config.wrap);if(n===s)return;const o=this._getItemIndex(n),a=I=>ve.trigger(this._element,I,{relatedTarget:n,direction:this._orderToDirection(e),from:this._getItemIndex(s),to:o});if(a(Qre).defaultPrevented||!s||!n)return;const c=!!this._interval;this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(o),this._activeElement=n;const f=r?ooe:roe,v=r?aoe:loe;n.classList.add(v),ed(n),s.classList.add(f),n.classList.add(f);const S=()=>{n.classList.remove(f,v),n.classList.add($d),s.classList.remove($d,v,f),this._isSliding=!1,a(Rh)};this._queueCallback(S,s,this._isAnimated()),c&&this.cycle()}_isAnimated(){return this._element.classList.contains(noe)}_getActive(){return Ge.findOne(doe,this._element)}_getItems(){return Ge.find($1,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(e){return Is()?e===No?Ao:Ha:e===No?Ha:Ao}_orderToDirection(e){return Is()?e===Ao?No:Zd:e===Ao?Zd:No}static jQueryInterface(e){return this.each(function(){const i=id.getOrCreateInstance(this,e);if(typeof e=="number"){i.to(e);return}if(typeof e=="string"){if(i[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);i[e]()}})}}ve.on(document,soe,hoe,function(t){const e=Ge.getElementFromSelector(this);if(!e||!e.classList.contains(M1))return;t.preventDefault();const i=id.getOrCreateInstance(e),s=this.getAttribute("data-bs-slide-to");if(s){i.to(s),i._maybeEnableCycle();return}if(Fn.getDataAttribute(this,"slide")==="next"){i.next(),i._maybeEnableCycle();return}i.prev(),i._maybeEnableCycle()});ve.on(window,ioe,()=>{const t=Ge.find(foe);for(const e of t)id.getOrCreateInstance(e)});Cs(id);const voe="collapse",yoe="bs.collapse",sd=`.${yoe}`,_oe=".data-api",boe=`show${sd}`,woe=`shown${sd}`,Soe=`hide${sd}`,Toe=`hidden${sd}`,xoe=`click${sd}${_oe}`,Mh="show",zo="collapse",Nd="collapsing",Ioe="collapsed",Eoe=`:scope .${zo} .${zo}`,Doe="collapse-horizontal",koe="width",Coe="height",Poe=".collapse.show, .collapse.collapsing",If='[data-bs-toggle="collapse"]',Aoe={parent:null,toggle:!0},Roe={parent:"(null|element)",toggle:"boolean"};class Al extends Zs{constructor(e,i){super(e,i),this._isTransitioning=!1,this._triggerArray=[];const s=Ge.find(If);for(const r of s){const n=Ge.getSelectorFromElement(r),o=Ge.find(n).filter(a=>a===this._element);n!==null&&o.length&&this._triggerArray.push(r)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return Aoe}static get DefaultType(){return Roe}static get NAME(){return voe}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let e=[];if(this._config.parent&&(e=this._getFirstLevelChildren(Poe).filter(a=>a!==this._element).map(a=>Al.getOrCreateInstance(a,{toggle:!1}))),e.length&&e[0]._isTransitioning||ve.trigger(this._element,boe).defaultPrevented)return;for(const a of e)a.hide();const s=this._getDimension();this._element.classList.remove(zo),this._element.classList.add(Nd),this._element.style[s]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const r=()=>{this._isTransitioning=!1,this._element.classList.remove(Nd),this._element.classList.add(zo,Mh),this._element.style[s]="",ve.trigger(this._element,woe)},o=`scroll${s[0].toUpperCase()+s.slice(1)}`;this._queueCallback(r,this._element,!0),this._element.style[s]=`${this._element[o]}px`}hide(){if(this._isTransitioning||!this._isShown()||ve.trigger(this._element,Soe).defaultPrevented)return;const i=this._getDimension();this._element.style[i]=`${this._element.getBoundingClientRect()[i]}px`,ed(this._element),this._element.classList.add(Nd),this._element.classList.remove(zo,Mh);for(const r of this._triggerArray){const n=Ge.getElementFromSelector(r);n&&!this._isShown(n)&&this._addAriaAndCollapsedClass([r],!1)}this._isTransitioning=!0;const s=()=>{this._isTransitioning=!1,this._element.classList.remove(Nd),this._element.classList.add(zo),ve.trigger(this._element,Toe)};this._element.style[i]="",this._queueCallback(s,this._element,!0)}_isShown(e=this._element){return e.classList.contains(Mh)}_configAfterMerge(e){return e.toggle=!!e.toggle,e.parent=wr(e.parent),e}_getDimension(){return this._element.classList.contains(Doe)?koe:Coe}_initializeChildren(){if(!this._config.parent)return;const e=this._getFirstLevelChildren(If);for(const i of e){const s=Ge.getElementFromSelector(i);s&&this._addAriaAndCollapsedClass([i],this._isShown(s))}}_getFirstLevelChildren(e){const i=Ge.find(Eoe,this._config.parent);return Ge.find(e,this._config.parent).filter(s=>!i.includes(s))}_addAriaAndCollapsedClass(e,i){if(e.length)for(const s of e)s.classList.toggle(Ioe,!i),s.setAttribute("aria-expanded",i)}static jQueryInterface(e){const i={};return typeof e=="string"&&/show|hide/.test(e)&&(i.toggle=!1),this.each(function(){const s=Al.getOrCreateInstance(this,i);if(typeof e=="string"){if(typeof s[e]>"u")throw new TypeError(`No method named "${e}"`);s[e]()}})}}ve.on(document,xoe,If,function(t){(t.target.tagName==="A"||t.delegateTarget&&t.delegateTarget.tagName==="A")&&t.preventDefault();for(const e of Ge.getMultipleElementsFromSelector(this))Al.getOrCreateInstance(e,{toggle:!1}).toggle()});Cs(Al);const _y="dropdown",Moe="bs.dropdown",wo=`.${Moe}`,ap=".data-api",Ooe="Escape",by="Tab",$oe="ArrowUp",wy="ArrowDown",Noe=2,Loe=`hide${wo}`,Voe=`hidden${wo}`,Woe=`show${wo}`,Foe=`shown${wo}`,N1=`click${wo}${ap}`,L1=`keydown${wo}${ap}`,Boe=`keyup${wo}${ap}`,Lo="show",zoe="dropup",joe="dropend",Hoe="dropstart",Uoe="dropup-center",Goe="dropdown-center",Gr='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',Yoe=`${Gr}.${Lo}`,Xd=".dropdown-menu",qoe=".navbar",Koe=".navbar-nav",Joe=".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",Qoe=Is()?"top-end":"top-start",Zoe=Is()?"top-start":"top-end",Xoe=Is()?"bottom-end":"bottom-start",eae=Is()?"bottom-start":"bottom-end",tae=Is()?"left-start":"right-start",iae=Is()?"right-start":"left-start",sae="top",nae="bottom",rae={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},oae={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class cn extends Zs{constructor(e,i){super(e,i),this._popper=null,this._parent=this._element.parentNode,this._menu=Ge.next(this._element,Xd)[0]||Ge.prev(this._element,Xd)[0]||Ge.findOne(Xd,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return rae}static get DefaultType(){return oae}static get NAME(){return _y}toggle(){return this._isShown()?this.hide():this.show()}show(){if(Sr(this._element)||this._isShown())return;const e={relatedTarget:this._element};if(!ve.trigger(this._element,Woe,e).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(Koe))for(const s of[].concat(...document.body.children))ve.on(s,"mouseover",Tu);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(Lo),this._element.classList.add(Lo),ve.trigger(this._element,Foe,e)}}hide(){if(Sr(this._element)||!this._isShown())return;const e={relatedTarget:this._element};this._completeHide(e)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(e){if(!ve.trigger(this._element,Loe,e).defaultPrevented){if("ontouchstart"in document.documentElement)for(const s of[].concat(...document.body.children))ve.off(s,"mouseover",Tu);this._popper&&this._popper.destroy(),this._menu.classList.remove(Lo),this._element.classList.remove(Lo),this._element.setAttribute("aria-expanded","false"),Fn.removeDataAttribute(this._menu,"popper"),ve.trigger(this._element,Voe,e)}}_getConfig(e){if(e=super._getConfig(e),typeof e.reference=="object"&&!Wn(e.reference)&&typeof e.reference.getBoundingClientRect!="function")throw new TypeError(`${_y.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return e}_createPopper(){if(typeof _1>"u")throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let e=this._element;this._config.reference==="parent"?e=this._parent:Wn(this._config.reference)?e=wr(this._config.reference):typeof this._config.reference=="object"&&(e=this._config.reference);const i=this._getPopperConfig();this._popper=np(e,this._menu,i)}_isShown(){return this._menu.classList.contains(Lo)}_getPlacement(){const e=this._parent;if(e.classList.contains(joe))return tae;if(e.classList.contains(Hoe))return iae;if(e.classList.contains(Uoe))return sae;if(e.classList.contains(Goe))return nae;const i=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return e.classList.contains(zoe)?i?Zoe:Qoe:i?eae:Xoe}_detectNavbar(){return this._element.closest(qoe)!==null}_getOffset(){const{offset:e}=this._config;return typeof e=="string"?e.split(",").map(i=>Number.parseInt(i,10)):typeof e=="function"?i=>e(i,this._element):e}_getPopperConfig(){const e={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(Fn.setDataAttribute(this._menu,"popper","static"),e.modifiers=[{name:"applyStyles",enabled:!1}]),{...e,...Zi(this._config.popperConfig,[e])}}_selectMenuItem({key:e,target:i}){const s=Ge.find(Joe,this._menu).filter(r=>Ia(r));s.length&&rp(s,i,e===wy,!s.includes(i)).focus()}static jQueryInterface(e){return this.each(function(){const i=cn.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof i[e]>"u")throw new TypeError(`No method named "${e}"`);i[e]()}})}static clearMenus(e){if(e.button===Noe||e.type==="keyup"&&e.key!==by)return;const i=Ge.find(Yoe);for(const s of i){const r=cn.getInstance(s);if(!r||r._config.autoClose===!1)continue;const n=e.composedPath(),o=n.includes(r._menu);if(n.includes(r._element)||r._config.autoClose==="inside"&&!o||r._config.autoClose==="outside"&&o||r._menu.contains(e.target)&&(e.type==="keyup"&&e.key===by||/input|select|option|textarea|form/i.test(e.target.tagName)))continue;const a={relatedTarget:r._element};e.type==="click"&&(a.clickEvent=e),r._completeHide(a)}}static dataApiKeydownHandler(e){const i=/input|textarea/i.test(e.target.tagName),s=e.key===Ooe,r=[$oe,wy].includes(e.key);if(!r&&!s||i&&!s)return;e.preventDefault();const n=this.matches(Gr)?this:Ge.prev(this,Gr)[0]||Ge.next(this,Gr)[0]||Ge.findOne(Gr,e.delegateTarget.parentNode),o=cn.getOrCreateInstance(n);if(r){e.stopPropagation(),o.show(),o._selectMenuItem(e);return}o._isShown()&&(e.stopPropagation(),o.hide(),n.focus())}}ve.on(document,L1,Gr,cn.dataApiKeydownHandler);ve.on(document,L1,Xd,cn.dataApiKeydownHandler);ve.on(document,N1,cn.clearMenus);ve.on(document,Boe,cn.clearMenus);ve.on(document,N1,Gr,function(t){t.preventDefault(),cn.getOrCreateInstance(this).toggle()});Cs(cn);const V1="backdrop",aae="fade",Sy="show",Ty=`mousedown.bs.${V1}`,lae={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},dae={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class W1 extends td{constructor(e){super(),this._config=this._getConfig(e),this._isAppended=!1,this._element=null}static get Default(){return lae}static get DefaultType(){return dae}static get NAME(){return V1}show(e){if(!this._config.isVisible){Zi(e);return}this._append();const i=this._getElement();this._config.isAnimated&&ed(i),i.classList.add(Sy),this._emulateAnimation(()=>{Zi(e)})}hide(e){if(!this._config.isVisible){Zi(e);return}this._getElement().classList.remove(Sy),this._emulateAnimation(()=>{this.dispose(),Zi(e)})}dispose(){this._isAppended&&(ve.off(this._element,Ty),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const e=document.createElement("div");e.className=this._config.className,this._config.isAnimated&&e.classList.add(aae),this._element=e}return this._element}_configAfterMerge(e){return e.rootElement=wr(e.rootElement),e}_append(){if(this._isAppended)return;const e=this._getElement();this._config.rootElement.append(e),ve.on(e,Ty,()=>{Zi(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(e){x1(e,this._getElement(),this._config.isAnimated)}}const uae="focustrap",cae="bs.focustrap",Iu=`.${cae}`,hae=`focusin${Iu}`,fae=`keydown.tab${Iu}`,mae="Tab",pae="forward",xy="backward",gae={autofocus:!0,trapElement:null},vae={autofocus:"boolean",trapElement:"element"};class F1 extends td{constructor(e){super(),this._config=this._getConfig(e),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return gae}static get DefaultType(){return vae}static get NAME(){return uae}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),ve.off(document,Iu),ve.on(document,hae,e=>this._handleFocusin(e)),ve.on(document,fae,e=>this._handleKeydown(e)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,ve.off(document,Iu))}_handleFocusin(e){const{trapElement:i}=this._config;if(e.target===document||e.target===i||i.contains(e.target))return;const s=Ge.focusableChildren(i);s.length===0?i.focus():this._lastTabNavDirection===xy?s[s.length-1].focus():s[0].focus()}_handleKeydown(e){e.key===mae&&(this._lastTabNavDirection=e.shiftKey?xy:pae)}}const Iy=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",Ey=".sticky-top",Ld="padding-right",Dy="margin-right";class Ef{constructor(){this._element=document.body}getWidth(){const e=document.documentElement.clientWidth;return Math.abs(window.innerWidth-e)}hide(){const e=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,Ld,i=>i+e),this._setElementAttributes(Iy,Ld,i=>i+e),this._setElementAttributes(Ey,Dy,i=>i-e)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,Ld),this._resetElementAttributes(Iy,Ld),this._resetElementAttributes(Ey,Dy)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(e,i,s){const r=this.getWidth(),n=o=>{if(o!==this._element&&window.innerWidth>o.clientWidth+r)return;this._saveInitialAttribute(o,i);const a=window.getComputedStyle(o).getPropertyValue(i);o.style.setProperty(i,`${s(Number.parseFloat(a))}px`)};this._applyManipulationCallback(e,n)}_saveInitialAttribute(e,i){const s=e.style.getPropertyValue(i);s&&Fn.setDataAttribute(e,i,s)}_resetElementAttributes(e,i){const s=r=>{const n=Fn.getDataAttribute(r,i);if(n===null){r.style.removeProperty(i);return}Fn.removeDataAttribute(r,i),r.style.setProperty(i,n)};this._applyManipulationCallback(e,s)}_applyManipulationCallback(e,i){if(Wn(e)){i(e);return}for(const s of Ge.find(e,this._element))i(s)}}const yae="modal",_ae="bs.modal",Es=`.${_ae}`,bae=".data-api",wae="Escape",Sae=`hide${Es}`,Tae=`hidePrevented${Es}`,B1=`hidden${Es}`,z1=`show${Es}`,xae=`shown${Es}`,Iae=`resize${Es}`,Eae=`click.dismiss${Es}`,Dae=`mousedown.dismiss${Es}`,kae=`keydown.dismiss${Es}`,Cae=`click${Es}${bae}`,ky="modal-open",Pae="fade",Cy="show",Oh="modal-static",Aae=".modal.show",Rae=".modal-dialog",Mae=".modal-body",Oae='[data-bs-toggle="modal"]',$ae={backdrop:!0,focus:!0,keyboard:!0},Nae={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class Tr extends Zs{constructor(e,i){super(e,i),this._dialog=Ge.findOne(Rae,this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new Ef,this._addEventListeners()}static get Default(){return $ae}static get DefaultType(){return Nae}static get NAME(){return yae}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){this._isShown||this._isTransitioning||ve.trigger(this._element,z1,{relatedTarget:e}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(ky),this._adjustDialog(),this._backdrop.show(()=>this._showElement(e)))}hide(){!this._isShown||this._isTransitioning||ve.trigger(this._element,Sae).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(Cy),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated()))}dispose(){ve.off(window,Es),ve.off(this._dialog,Es),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new W1({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new F1({trapElement:this._element})}_showElement(e){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const i=Ge.findOne(Mae,this._dialog);i&&(i.scrollTop=0),ed(this._element),this._element.classList.add(Cy);const s=()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,ve.trigger(this._element,xae,{relatedTarget:e})};this._queueCallback(s,this._dialog,this._isAnimated())}_addEventListeners(){ve.on(this._element,kae,e=>{if(e.key===wae){if(this._config.keyboard){this.hide();return}this._triggerBackdropTransition()}}),ve.on(window,Iae,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),ve.on(this._element,Dae,e=>{ve.one(this._element,Eae,i=>{if(!(this._element!==e.target||this._element!==i.target)){if(this._config.backdrop==="static"){this._triggerBackdropTransition();return}this._config.backdrop&&this.hide()}})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(ky),this._resetAdjustments(),this._scrollBar.reset(),ve.trigger(this._element,B1)})}_isAnimated(){return this._element.classList.contains(Pae)}_triggerBackdropTransition(){if(ve.trigger(this._element,Tae).defaultPrevented)return;const i=this._element.scrollHeight>document.documentElement.clientHeight,s=this._element.style.overflowY;s==="hidden"||this._element.classList.contains(Oh)||(i||(this._element.style.overflowY="hidden"),this._element.classList.add(Oh),this._queueCallback(()=>{this._element.classList.remove(Oh),this._queueCallback(()=>{this._element.style.overflowY=s},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const e=this._element.scrollHeight>document.documentElement.clientHeight,i=this._scrollBar.getWidth(),s=i>0;if(s&&!e){const r=Is()?"paddingLeft":"paddingRight";this._element.style[r]=`${i}px`}if(!s&&e){const r=Is()?"paddingRight":"paddingLeft";this._element.style[r]=`${i}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(e,i){return this.each(function(){const s=Tr.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof s[e]>"u")throw new TypeError(`No method named "${e}"`);s[e](i)}})}}ve.on(document,Cae,Oae,function(t){const e=Ge.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&t.preventDefault(),ve.one(e,z1,r=>{r.defaultPrevented||ve.one(e,B1,()=>{Ia(this)&&this.focus()})});const i=Ge.findOne(Aae);i&&Tr.getInstance(i).hide(),Tr.getOrCreateInstance(e).toggle(this)});mc(Tr);Cs(Tr);const Lae="offcanvas",Vae="bs.offcanvas",Jn=`.${Vae}`,j1=".data-api",Wae=`load${Jn}${j1}`,Fae="Escape",Py="show",Ay="showing",Ry="hiding",Bae="offcanvas-backdrop",H1=".offcanvas.show",zae=`show${Jn}`,jae=`shown${Jn}`,Hae=`hide${Jn}`,My=`hidePrevented${Jn}`,U1=`hidden${Jn}`,Uae=`resize${Jn}`,Gae=`click${Jn}${j1}`,Yae=`keydown.dismiss${Jn}`,qae='[data-bs-toggle="offcanvas"]',Kae={backdrop:!0,keyboard:!0,scroll:!1},Jae={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class xr extends Zs{constructor(e,i){super(e,i),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return Kae}static get DefaultType(){return Jae}static get NAME(){return Lae}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){if(this._isShown||ve.trigger(this._element,zae,{relatedTarget:e}).defaultPrevented)return;this._isShown=!0,this._backdrop.show(),this._config.scroll||new Ef().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(Ay);const s=()=>{(!this._config.scroll||this._config.backdrop)&&this._focustrap.activate(),this._element.classList.add(Py),this._element.classList.remove(Ay),ve.trigger(this._element,jae,{relatedTarget:e})};this._queueCallback(s,this._element,!0)}hide(){if(!this._isShown||ve.trigger(this._element,Hae).defaultPrevented)return;this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(Ry),this._backdrop.hide();const i=()=>{this._element.classList.remove(Py,Ry),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new Ef().reset(),ve.trigger(this._element,U1)};this._queueCallback(i,this._element,!0)}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const e=()=>{if(this._config.backdrop==="static"){ve.trigger(this._element,My);return}this.hide()},i=!!this._config.backdrop;return new W1({className:Bae,isVisible:i,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:i?e:null})}_initializeFocusTrap(){return new F1({trapElement:this._element})}_addEventListeners(){ve.on(this._element,Yae,e=>{if(e.key===Fae){if(this._config.keyboard){this.hide();return}ve.trigger(this._element,My)}})}static jQueryInterface(e){return this.each(function(){const i=xr.getOrCreateInstance(this,e);if(typeof e=="string"){if(i[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);i[e](this)}})}}ve.on(document,Gae,qae,function(t){const e=Ge.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&t.preventDefault(),Sr(this))return;ve.one(e,U1,()=>{Ia(this)&&this.focus()});const i=Ge.findOne(H1);i&&i!==e&&xr.getInstance(i).hide(),xr.getOrCreateInstance(e).toggle(this)});ve.on(window,Wae,()=>{for(const t of Ge.find(H1))xr.getOrCreateInstance(t).show()});ve.on(window,Uae,()=>{for(const t of Ge.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(t).position!=="fixed"&&xr.getOrCreateInstance(t).hide()});mc(xr);Cs(xr);const Qae=/^aria-[\w-]*$/i,G1={"*":["class","dir","id","lang","role",Qae],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},Zae=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),Xae=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,ele=(t,e)=>{const i=t.nodeName.toLowerCase();return e.includes(i)?Zae.has(i)?!!Xae.test(t.nodeValue):!0:e.filter(s=>s instanceof RegExp).some(s=>s.test(i))};function tle(t,e,i){if(!t.length)return t;if(i&&typeof i=="function")return i(t);const r=new window.DOMParser().parseFromString(t,"text/html"),n=[].concat(...r.body.querySelectorAll("*"));for(const o of n){const a=o.nodeName.toLowerCase();if(!Object.keys(e).includes(a)){o.remove();continue}const l=[].concat(...o.attributes),c=[].concat(e["*"]||[],e[a]||[]);for(const f of l)ele(f,c)||o.removeAttribute(f.nodeName)}return r.body.innerHTML}const ile="TemplateFactory",sle={allowList:G1,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},nle={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},rle={entry:"(string|element|function|null)",selector:"(string|element)"};class ole extends td{constructor(e){super(),this._config=this._getConfig(e)}static get Default(){return sle}static get DefaultType(){return nle}static get NAME(){return ile}getContent(){return Object.values(this._config.content).map(e=>this._resolvePossibleFunction(e)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(e){return this._checkContent(e),this._config.content={...this._config.content,...e},this}toHtml(){const e=document.createElement("div");e.innerHTML=this._maybeSanitize(this._config.template);for(const[r,n]of Object.entries(this._config.content))this._setContent(e,n,r);const i=e.children[0],s=this._resolvePossibleFunction(this._config.extraClass);return s&&i.classList.add(...s.split(" ")),i}_typeCheckConfig(e){super._typeCheckConfig(e),this._checkContent(e.content)}_checkContent(e){for(const[i,s]of Object.entries(e))super._typeCheckConfig({selector:i,entry:s},rle)}_setContent(e,i,s){const r=Ge.findOne(s,e);if(r){if(i=this._resolvePossibleFunction(i),!i){r.remove();return}if(Wn(i)){this._putElementInTemplate(wr(i),r);return}if(this._config.html){r.innerHTML=this._maybeSanitize(i);return}r.textContent=i}}_maybeSanitize(e){return this._config.sanitize?tle(e,this._config.allowList,this._config.sanitizeFn):e}_resolvePossibleFunction(e){return Zi(e,[this])}_putElementInTemplate(e,i){if(this._config.html){i.innerHTML="",i.append(e);return}i.textContent=e.textContent}}const ale="tooltip",lle=new Set(["sanitize","allowList","sanitizeFn"]),$h="fade",dle="modal",Vd="show",ule=".tooltip-inner",Oy=`.${dle}`,$y="hide.bs.modal",Ua="hover",Nh="focus",cle="click",hle="manual",fle="hide",mle="hidden",ple="show",gle="shown",vle="inserted",yle="click",_le="focusin",ble="focusout",wle="mouseenter",Sle="mouseleave",Tle={AUTO:"auto",TOP:"top",RIGHT:Is()?"left":"right",BOTTOM:"bottom",LEFT:Is()?"right":"left"},xle={allowList:G1,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},Ile={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class Da extends Zs{constructor(e,i){if(typeof _1>"u")throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(e,i),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return xle}static get DefaultType(){return Ile}static get NAME(){return ale}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){if(this._isEnabled){if(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()){this._leave();return}this._enter()}}dispose(){clearTimeout(this._timeout),ve.off(this._element.closest(Oy),$y,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!(this._isWithContent()&&this._isEnabled))return;const e=ve.trigger(this._element,this.constructor.eventName(ple)),s=(S1(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(e.defaultPrevented||!s)return;this._disposePopper();const r=this._getTipElement();this._element.setAttribute("aria-describedby",r.getAttribute("id"));const{container:n}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(n.append(r),ve.trigger(this._element,this.constructor.eventName(vle))),this._popper=this._createPopper(r),r.classList.add(Vd),"ontouchstart"in document.documentElement)for(const a of[].concat(...document.body.children))ve.on(a,"mouseover",Tu);const o=()=>{ve.trigger(this._element,this.constructor.eventName(gle)),this._isHovered===!1&&this._leave(),this._isHovered=!1};this._queueCallback(o,this.tip,this._isAnimated())}hide(){if(!this._isShown()||ve.trigger(this._element,this.constructor.eventName(fle)).defaultPrevented)return;if(this._getTipElement().classList.remove(Vd),"ontouchstart"in document.documentElement)for(const r of[].concat(...document.body.children))ve.off(r,"mouseover",Tu);this._activeTrigger[cle]=!1,this._activeTrigger[Nh]=!1,this._activeTrigger[Ua]=!1,this._isHovered=null;const s=()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),ve.trigger(this._element,this.constructor.eventName(mle)))};this._queueCallback(s,this.tip,this._isAnimated())}update(){this._popper&&this._popper.update()}_isWithContent(){return!!this._getTitle()}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(e){const i=this._getTemplateFactory(e).toHtml();if(!i)return null;i.classList.remove($h,Vd),i.classList.add(`bs-${this.constructor.NAME}-auto`);const s=cre(this.constructor.NAME).toString();return i.setAttribute("id",s),this._isAnimated()&&i.classList.add($h),i}setContent(e){this._newContent=e,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(e){return this._templateFactory?this._templateFactory.changeContent(e):this._templateFactory=new ole({...this._config,content:e,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{[ule]:this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(e){return this.constructor.getOrCreateInstance(e.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains($h)}_isShown(){return this.tip&&this.tip.classList.contains(Vd)}_createPopper(e){const i=Zi(this._config.placement,[this,e,this._element]),s=Tle[i.toUpperCase()];return np(this._element,e,this._getPopperConfig(s))}_getOffset(){const{offset:e}=this._config;return typeof e=="string"?e.split(",").map(i=>Number.parseInt(i,10)):typeof e=="function"?i=>e(i,this._element):e}_resolvePossibleFunction(e){return Zi(e,[this._element])}_getPopperConfig(e){const i={placement:e,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:s=>{this._getTipElement().setAttribute("data-popper-placement",s.state.placement)}}]};return{...i,...Zi(this._config.popperConfig,[i])}}_setListeners(){const e=this._config.trigger.split(" ");for(const i of e)if(i==="click")ve.on(this._element,this.constructor.eventName(yle),this._config.selector,s=>{this._initializeOnDelegatedTarget(s).toggle()});else if(i!==hle){const s=i===Ua?this.constructor.eventName(wle):this.constructor.eventName(_le),r=i===Ua?this.constructor.eventName(Sle):this.constructor.eventName(ble);ve.on(this._element,s,this._config.selector,n=>{const o=this._initializeOnDelegatedTarget(n);o._activeTrigger[n.type==="focusin"?Nh:Ua]=!0,o._enter()}),ve.on(this._element,r,this._config.selector,n=>{const o=this._initializeOnDelegatedTarget(n);o._activeTrigger[n.type==="focusout"?Nh:Ua]=o._element.contains(n.relatedTarget),o._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},ve.on(this._element.closest(Oy),$y,this._hideModalHandler)}_fixTitle(){const e=this._element.getAttribute("title");e&&(!this._element.getAttribute("aria-label")&&!this._element.textContent.trim()&&this._element.setAttribute("aria-label",e),this._element.setAttribute("data-bs-original-title",e),this._element.removeAttribute("title"))}_enter(){if(this._isShown()||this._isHovered){this._isHovered=!0;return}this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show)}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(e,i){clearTimeout(this._timeout),this._timeout=setTimeout(e,i)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(e){const i=Fn.getDataAttributes(this._element);for(const s of Object.keys(i))lle.has(s)&&delete i[s];return e={...i,...typeof e=="object"&&e?e:{}},e=this._mergeConfigObj(e),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}_configAfterMerge(e){return e.container=e.container===!1?document.body:wr(e.container),typeof e.delay=="number"&&(e.delay={show:e.delay,hide:e.delay}),typeof e.title=="number"&&(e.title=e.title.toString()),typeof e.content=="number"&&(e.content=e.content.toString()),e}_getDelegateConfig(){const e={};for(const[i,s]of Object.entries(this._config))this.constructor.Default[i]!==s&&(e[i]=s);return e.selector=!1,e.trigger="manual",e}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(e){return this.each(function(){const i=Da.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof i[e]>"u")throw new TypeError(`No method named "${e}"`);i[e]()}})}}Cs(Da);const Ele="popover",Dle=".popover-header",kle=".popover-body",Cle={...Da.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},Ple={...Da.DefaultType,content:"(null|string|element|function)"};class lp extends Da{static get Default(){return Cle}static get DefaultType(){return Ple}static get NAME(){return Ele}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{[Dle]:this._getTitle(),[kle]:this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(e){return this.each(function(){const i=lp.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof i[e]>"u")throw new TypeError(`No method named "${e}"`);i[e]()}})}}Cs(lp);const Ale="scrollspy",Rle="bs.scrollspy",dp=`.${Rle}`,Mle=".data-api",Ole=`activate${dp}`,Ny=`click${dp}`,$le=`load${dp}${Mle}`,Nle="dropdown-item",Ro="active",Lle='[data-bs-spy="scroll"]',Lh="[href]",Vle=".nav, .list-group",Ly=".nav-link",Wle=".nav-item",Fle=".list-group-item",Ble=`${Ly}, ${Wle} > ${Ly}, ${Fle}`,zle=".dropdown",jle=".dropdown-toggle",Hle={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},Ule={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class vc extends Zs{constructor(e,i){super(e,i),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return Hle}static get DefaultType(){return Ule}static get NAME(){return Ale}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const e of this._observableSections.values())this._observer.observe(e)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(e){return e.target=wr(e.target)||document.body,e.rootMargin=e.offset?`${e.offset}px 0px -30%`:e.rootMargin,typeof e.threshold=="string"&&(e.threshold=e.threshold.split(",").map(i=>Number.parseFloat(i))),e}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(ve.off(this._config.target,Ny),ve.on(this._config.target,Ny,Lh,e=>{const i=this._observableSections.get(e.target.hash);if(i){e.preventDefault();const s=this._rootElement||window,r=i.offsetTop-this._element.offsetTop;if(s.scrollTo){s.scrollTo({top:r,behavior:"smooth"});return}s.scrollTop=r}}))}_getNewObserver(){const e={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(i=>this._observerCallback(i),e)}_observerCallback(e){const i=o=>this._targetLinks.get(`#${o.target.id}`),s=o=>{this._previousScrollData.visibleEntryTop=o.target.offsetTop,this._process(i(o))},r=(this._rootElement||document.documentElement).scrollTop,n=r>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=r;for(const o of e){if(!o.isIntersecting){this._activeTarget=null,this._clearActiveClass(i(o));continue}const a=o.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(n&&a){if(s(o),!r)return;continue}!n&&!a&&s(o)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const e=Ge.find(Lh,this._config.target);for(const i of e){if(!i.hash||Sr(i))continue;const s=Ge.findOne(decodeURI(i.hash),this._element);Ia(s)&&(this._targetLinks.set(decodeURI(i.hash),i),this._observableSections.set(i.hash,s))}}_process(e){this._activeTarget!==e&&(this._clearActiveClass(this._config.target),this._activeTarget=e,e.classList.add(Ro),this._activateParents(e),ve.trigger(this._element,Ole,{relatedTarget:e}))}_activateParents(e){if(e.classList.contains(Nle)){Ge.findOne(jle,e.closest(zle)).classList.add(Ro);return}for(const i of Ge.parents(e,Vle))for(const s of Ge.prev(i,Ble))s.classList.add(Ro)}_clearActiveClass(e){e.classList.remove(Ro);const i=Ge.find(`${Lh}.${Ro}`,e);for(const s of i)s.classList.remove(Ro)}static jQueryInterface(e){return this.each(function(){const i=vc.getOrCreateInstance(this,e);if(typeof e=="string"){if(i[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);i[e]()}})}}ve.on(window,$le,()=>{for(const t of Ge.find(Lle))vc.getOrCreateInstance(t)});Cs(vc);const Gle="tab",Yle="bs.tab",So=`.${Yle}`,qle=`hide${So}`,Kle=`hidden${So}`,Jle=`show${So}`,Qle=`shown${So}`,Zle=`click${So}`,Xle=`keydown${So}`,ede=`load${So}`,tde="ArrowLeft",Vy="ArrowRight",ide="ArrowUp",Wy="ArrowDown",Vh="Home",Fy="End",Yr="active",By="fade",Wh="show",sde="dropdown",nde=".dropdown-toggle",rde=".dropdown-menu",Fh=":not(.dropdown-toggle)",ode='.list-group, .nav, [role="tablist"]',ade=".nav-item, .list-group-item",lde=`.nav-link${Fh}, .list-group-item${Fh}, [role="tab"]${Fh}`,Y1='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',Bh=`${lde}, ${Y1}`,dde=`.${Yr}[data-bs-toggle="tab"], .${Yr}[data-bs-toggle="pill"], .${Yr}[data-bs-toggle="list"]`;class ha extends Zs{constructor(e){super(e),this._parent=this._element.closest(ode),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),ve.on(this._element,Xle,i=>this._keydown(i)))}static get NAME(){return Gle}show(){const e=this._element;if(this._elemIsActive(e))return;const i=this._getActiveElem(),s=i?ve.trigger(i,qle,{relatedTarget:e}):null;ve.trigger(e,Jle,{relatedTarget:i}).defaultPrevented||s&&s.defaultPrevented||(this._deactivate(i,e),this._activate(e,i))}_activate(e,i){if(!e)return;e.classList.add(Yr),this._activate(Ge.getElementFromSelector(e));const s=()=>{if(e.getAttribute("role")!=="tab"){e.classList.add(Wh);return}e.removeAttribute("tabindex"),e.setAttribute("aria-selected",!0),this._toggleDropDown(e,!0),ve.trigger(e,Qle,{relatedTarget:i})};this._queueCallback(s,e,e.classList.contains(By))}_deactivate(e,i){if(!e)return;e.classList.remove(Yr),e.blur(),this._deactivate(Ge.getElementFromSelector(e));const s=()=>{if(e.getAttribute("role")!=="tab"){e.classList.remove(Wh);return}e.setAttribute("aria-selected",!1),e.setAttribute("tabindex","-1"),this._toggleDropDown(e,!1),ve.trigger(e,Kle,{relatedTarget:i})};this._queueCallback(s,e,e.classList.contains(By))}_keydown(e){if(![tde,Vy,ide,Wy,Vh,Fy].includes(e.key))return;e.stopPropagation(),e.preventDefault();const i=this._getChildren().filter(r=>!Sr(r));let s;if([Vh,Fy].includes(e.key))s=i[e.key===Vh?0:i.length-1];else{const r=[Vy,Wy].includes(e.key);s=rp(i,e.target,r,!0)}s&&(s.focus({preventScroll:!0}),ha.getOrCreateInstance(s).show())}_getChildren(){return Ge.find(Bh,this._parent)}_getActiveElem(){return this._getChildren().find(e=>this._elemIsActive(e))||null}_setInitialAttributes(e,i){this._setAttributeIfNotExists(e,"role","tablist");for(const s of i)this._setInitialAttributesOnChild(s)}_setInitialAttributesOnChild(e){e=this._getInnerElement(e);const i=this._elemIsActive(e),s=this._getOuterElement(e);e.setAttribute("aria-selected",i),s!==e&&this._setAttributeIfNotExists(s,"role","presentation"),i||e.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(e,"role","tab"),this._setInitialAttributesOnTargetPanel(e)}_setInitialAttributesOnTargetPanel(e){const i=Ge.getElementFromSelector(e);i&&(this._setAttributeIfNotExists(i,"role","tabpanel"),e.id&&this._setAttributeIfNotExists(i,"aria-labelledby",`${e.id}`))}_toggleDropDown(e,i){const s=this._getOuterElement(e);if(!s.classList.contains(sde))return;const r=(n,o)=>{const a=Ge.findOne(n,s);a&&a.classList.toggle(o,i)};r(nde,Yr),r(rde,Wh),s.setAttribute("aria-expanded",i)}_setAttributeIfNotExists(e,i,s){e.hasAttribute(i)||e.setAttribute(i,s)}_elemIsActive(e){return e.classList.contains(Yr)}_getInnerElement(e){return e.matches(Bh)?e:Ge.findOne(Bh,e)}_getOuterElement(e){return e.closest(ade)||e}static jQueryInterface(e){return this.each(function(){const i=ha.getOrCreateInstance(this);if(typeof e=="string"){if(i[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);i[e]()}})}}ve.on(document,Zle,Y1,function(t){["A","AREA"].includes(this.tagName)&&t.preventDefault(),!Sr(this)&&ha.getOrCreateInstance(this).show()});ve.on(window,ede,()=>{for(const t of Ge.find(dde))ha.getOrCreateInstance(t)});Cs(ha);const ude="toast",cde="bs.toast",Ar=`.${cde}`,hde=`mouseover${Ar}`,fde=`mouseout${Ar}`,mde=`focusin${Ar}`,pde=`focusout${Ar}`,gde=`hide${Ar}`,vde=`hidden${Ar}`,yde=`show${Ar}`,_de=`shown${Ar}`,bde="fade",zy="hide",Wd="show",Fd="showing",wde={animation:"boolean",autohide:"boolean",delay:"number"},Sde={animation:!0,autohide:!0,delay:5e3};class yc extends Zs{constructor(e,i){super(e,i),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return Sde}static get DefaultType(){return wde}static get NAME(){return ude}show(){if(ve.trigger(this._element,yde).defaultPrevented)return;this._clearTimeout(),this._config.animation&&this._element.classList.add(bde);const i=()=>{this._element.classList.remove(Fd),ve.trigger(this._element,_de),this._maybeScheduleHide()};this._element.classList.remove(zy),ed(this._element),this._element.classList.add(Wd,Fd),this._queueCallback(i,this._element,this._config.animation)}hide(){if(!this.isShown()||ve.trigger(this._element,gde).defaultPrevented)return;const i=()=>{this._element.classList.add(zy),this._element.classList.remove(Fd,Wd),ve.trigger(this._element,vde)};this._element.classList.add(Fd),this._queueCallback(i,this._element,this._config.animation)}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(Wd),super.dispose()}isShown(){return this._element.classList.contains(Wd)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(e,i){switch(e.type){case"mouseover":case"mouseout":{this._hasMouseInteraction=i;break}case"focusin":case"focusout":{this._hasKeyboardInteraction=i;break}}if(i){this._clearTimeout();return}const s=e.relatedTarget;this._element===s||this._element.contains(s)||this._maybeScheduleHide()}_setListeners(){ve.on(this._element,hde,e=>this._onInteraction(e,!0)),ve.on(this._element,fde,e=>this._onInteraction(e,!1)),ve.on(this._element,mde,e=>this._onInteraction(e,!0)),ve.on(this._element,pde,e=>this._onInteraction(e,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(e){return this.each(function(){const i=yc.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof i[e]>"u")throw new TypeError(`No method named "${e}"`);i[e](this)}})}}mc(yc);Cs(yc);const Tde={name:"ItemTableAndToolbar",components:{ItemTableToolbar:fQ,ItemTable:GS,GoalFormModal:Pte,RoutineFormModal:dse,TodoFormModal:wne},props:{itemType:String},provide(){return{draggedItem:this.draggedItem}},data:function(){return{sortBy:null,searchTerm:"",selectedColumns:null,store:null,draggedItem:null,formItemID:void 0,form:{id:void 0,itemType:void 0},modal:void 0}},methods:{async openItemForm(t){this.form.id=void 0,this.form.itemType=void 0,await this.$nextTick(),this.form.id=t.id,this.form.itemType=t.itemType,await this.$nextTick(),this.modal=new Tr(this.$refs[`${t.itemType}-${t.id}-Modal`]),(t.itemType=="goal"||t.itemType=="todo"||t.itemType=="routine")&&this.modal.show()},async addItem(t){this.form.id=void 0,this.form.itemType=void 0,await this.$nextTick(),this.form.id=-1,this.form.itemType=t,await this.$nextTick(),this.modal=new Tr(this.$refs[`${t}-${this.form.id}-Modal`]),(t=="goal"||t=="todo"||t=="routine")&&this.modal.show()},async closeItemModal(){this.modal.hide(),this.modal=void 0,this.form.id=void 0,this.form.itemType=void 0}}},xde={class:"d-flex flex-column"},Ide=["id","aria-labelledby"];function Ede(t,e,i,s,r,n){const o=$("ItemTableToolbar"),a=$("ItemTable"),l=$("GoalFormModal"),c=$("RoutineFormModal"),f=$("TodoFormModal");return m(),p("div",xde,[H(o,{itemType:i.itemType,onSetColumns:e[0]||(e[0]=v=>t.selectedColumns=v),onSetSortBy:e[1]||(e[1]=v=>t.sortBy=v),onSetSearchTerm:e[2]||(e[2]=v=>t.searchTerm=v),onAddItem:n.addItem},null,8,["itemType","onAddItem"]),H(a,{itemType:i.itemType,sortBy:t.sortBy,searchTerm:t.searchTerm,selectedColumns:t.selectedColumns,onSetDraggedItem:e[3]||(e[3]=v=>t.draggedItem=v),onOpenItemForm:n.openItemForm},null,8,["itemType","sortBy","searchTerm","selectedColumns","onOpenItemForm"]),t.form.id?(m(),p("div",{key:0,class:"item modal fade",id:`${t.form.itemType}-${t.form.id}-Modal`,tabindex:"-1","aria-labelledby":`${t.form.itemType}-${t.form.id}-ModalLabel`,"aria-hidden":"true",ref:`${t.form.itemType}-${t.form.id}-Modal`},[t.form.itemType=="goal"?(m(),ie(l,{key:0,id:t.form.id,onCloseItemModal:n.closeItemModal},null,8,["id","onCloseItemModal"])):x("",!0),t.form.itemType=="routine"?(m(),ie(c,{key:1,id:t.form.id,onCloseItemModal:n.closeItemModal},null,8,["id","onCloseItemModal"])):x("",!0),t.form.itemType=="todo"?(m(),ie(f,{key:2,id:t.form.id,onCloseItemModal:n.closeItemModal},null,8,["id","onCloseItemModal"])):x("",!0)],8,Ide)):x("",!0)])}const Dde=Q(Tde,[["render",Ede]]),kde={components:{ItemTableAndToolbar:Dde},name:"ItemTab",props:{config:Object},data:function(){return{selectedItem:null,split:null}},methods:{itemSelected:Cde,refreshForm:Ade,closeForm:Pde}};function Cde(t){this.selectedItem!=t?(this.split&&this.split.destroy(),this.selectedItem=null,this.selectedItem=t,this.$nextTick(()=>{let e=localStorage.getItem(`${this.config.itemType}-split-sizes`);e?e=JSON.parse(e):e=[75,25],this.split=HS([`#${this.config.itemType}-table`,`#${this.config.itemType}-form`],{sizes:e,minSize:[320,275],gutterSize:10,snapOffset:10,onDragEnd:i=>localStorage.setItem(`${this.config.itemType}-split-sizes`,JSON.stringify(i))})})):this.closeForm()}function Pde(){this.split&&(this.split.destroy(),this.split=null),this.selectedItem=null}function Ade(){this.selectedItem=this.config.newItem()}function Rde(t,e,i,s,r,n){const o=$("ItemTableAndToolbar");return m(),p("div",{class:"item row g-0",tabindex:"0",onKeyup:e[0]||(e[0]=Ot((...a)=>n.closeForm&&n.closeForm(...a),["esc"]))},[d("div",{class:F({split:t.selectedItem})},[i.config.name.toLowerCase()=="goal"||i.config.name.toLowerCase()=="routine"||i.config.name.toLowerCase()=="todo"||i.config.name.toLowerCase()=="metric"?(m(),ie(o,{key:0,itemType:i.config.name.toLowerCase()},null,8,["itemType"])):x("",!0)],2)],32)}const Mde=Q(kde,[["render",Rde]]),Ode={name:"ItemTabs",components:{ItemTab:Mde},data:function(){return{selectedTab:null,metricConfig:null,goalConfig:null,todoConfig:null,routineConfig:null,itemTableStore:void 0}},created:function(){this.metricConfig=new Md(HJ),this.goalConfig=new Md(UJ),this.todoConfig=new Md(Kw),this.routineConfig=new Md(GJ);let t=localStorage.getItem("selected-item-tab");t?this.selectedTab=t:(localStorage.setItem("selected-item-tab",this.selectedTab),this.selectedTab="goal")},async mounted(){let t=await K(()=>import("./itemTableStore-dQmyWJIq.js"),[]);this.itemTableStore=t.useItemTableStore();let e=this;this.itemTableStore.setContainerWidth(e.$refs.itemContainer.clientWidth),window.addEventListener("resize",function(){e.$refs.itemContainer.clientWidth&&e.itemTableStore.setContainerWidth(e.$refs.itemContainer.clientWidth)})},watch:{selectedTab(t){localStorage.setItem("selected-item-tab",t)}}},$de={id:"items",ref:"itemContainer"},Nde={id:"nav-tab"},Lde={class:"nav nav-tabs justify-content-between",role:"tablist"};function Vde(t,e,i,s,r,n){const o=$("ItemTab");return m(),p("div",$de,[d("nav",Nde,[d("div",Lde,[d("button",{id:"item-metric-tab",class:F(["nav-link flex-fill",[{active:t.selectedTab=="metric"}]]),"data-bs-toggle":"tab","data-bs-target":"#nav-metric",type:"button",role:"tab","aria-controls":"nav-home","aria-selected":"true",onClick:e[0]||(e[0]=a=>t.selectedTab="metric")},"Metrics",2),d("button",{id:"item-goal-tab",class:F(["nav-link flex-fill",[{active:t.selectedTab=="goal"}]]),"data-bs-toggle":"tab","data-bs-target":"#nav-goal",type:"button",role:"tab","aria-controls":"nav-goal","aria-selected":"false",onClick:e[1]||(e[1]=a=>t.selectedTab="goal")},"Goals",2),d("button",{id:"item-todo-tab",class:F(["nav-link flex-fill",[{active:t.selectedTab=="todo"}]]),"data-bs-toggle":"tab","data-bs-target":"#nav-todo",type:"button",role:"tab","aria-controls":"nav-todo","aria-selected":"false",onClick:e[2]||(e[2]=a=>t.selectedTab="todo")},"Todos",2),d("button",{id:"item-routine-tab",class:F(["nav-link flex-fill",[{active:t.selectedTab=="routine"}]]),"data-bs-toggle":"tab","data-bs-target":"#nav-routine",type:"button",role:"tab","aria-controls":"nav-routine","aria-selected":"false",onClick:e[3]||(e[3]=a=>t.selectedTab="routine")},"Routines",2)])]),X(H(o,{id:"nav-metric",class:F(["tab-pane fade",[{active:t.selectedTab=="metric",show:t.selectedTab=="metric"}]]),config:t.metricConfig,role:"tabpanel","aria-labelledby":"item-metric-tab"},null,8,["class","config"]),[[it,t.selectedTab=="metric"]]),X(H(o,{id:"nav-goal",class:F(["tab-pane fade",[{active:t.selectedTab=="goal",show:t.selectedTab=="goal"}]]),config:t.goalConfig,role:"tabpanel","aria-labelledby":"item-goal-tab"},null,8,["class","config"]),[[it,t.selectedTab=="goal"]]),X(H(o,{id:"nav-todo",class:F(["tab-pane fade",[{active:t.selectedTab=="todo",show:t.selectedTab=="todo"}]]),config:t.todoConfig,role:"tabpanel","aria-labelledby":"item-todo-tab"},null,8,["class","config"]),[[it,t.selectedTab=="todo"]]),X(H(o,{id:"nav-routine",class:F(["tab-pane fade",[{active:t.selectedTab=="routine",show:t.selectedTab=="routine"}]]),config:t.routineConfig,role:"tabpanel","aria-labelledby":"item-routine-tab"},null,8,["class","config"]),[[it,t.selectedTab=="routine"]])],512)}const q1=Q(Ode,[["render",Vde]]),Wde={name:"BlogTimeline",components:{},props:{},data:function(){return{plannerStore:void 0,universalStore:void 0,blurbs:[],newPost:{isShown:!1,datetime:void 0,title:void 0,text:void 0,isTextValid:void 0}}},created:async function(){this.plannerStore=bn(),this.universalStore=Kl(),this.universalStore.getBlurbs(Hi.MONTH,this.selectedDate)},computed:{selectedDate(){return this.plannerStore?this.plannerStore.selectedDate:$t()},blurbs(){let t=[];return this.universalStore&&(t=this.universalStore.blurbs,t=Ul(t,"datetime"),t=t.map(e=>({id:e.id,date:Sm(e.datetime),time:zn(e.datetime),title:e.title,text:e.text,tags:[]}))),t}},methods:{initBlurbs:Fde,refreshNewPost:Bde,onNewPost:zde,onDateTimeChange:jde,onTextBlur:Hde,saveBlurb:Ude,cancelBlurb:Gde},watch:{selectedDate(){this.initBlurbs()}}};async function Fde(){let t=await this.universalStore.getBlurbs(Hi.MONTH,this.selectedDate);t=Ul(t,"datetime"),t.forEach(e=>{let i={id:e.id,date:Sm(e.datetime),time:zn(e.datetime),title:e.title,text:e.text,tags:[]};this.blurbs.push(i)})}function Bde(){this.newPost.title=void 0,this.newPost.text=void 0,this.newPost.isTextValid=void 0}function zde(){this.refreshNewPost(),this.newPost.datetime=Rw(),this.newPost.isShown=!0}function jde(t){t=t.currentTarget.value,this.newPost.datetime=t}function Hde(){this.newPost.isTextValid=!!this.newPost.text}function Ude(){if(this.newPost.isTextValid){let t=new Date(this.newPost.datetime);this.universalStore.createBlurb(t,this.newPost.text,this.newPost.title),this.newPost.isShown=!1}}function Gde(){this.newPost.isShown=!1}const Yde={class:"blog-timeline"},qde={class:"d-flex flex-column"},Kde={key:1,class:"new-post blurb d-flex flex-column"},Jde={class:"d-flex flex-column"},Qde=["value"],Zde={class:"d-flex flex-row mt-1 justify-content-end"},Xde={class:"date"},eue={class:"time"},tue={key:0,class:"title"},iue={class:"text"},sue={class:"d-flex flex-row"};function nue(t,e,i,s,r,n){return m(),p("div",Yde,[d("div",qde,[t.newPost.isShown?t.newPost.isShown?(m(),p("div",Kde,[d("div",Jde,[d("input",{class:"date-picker mb-2",type:"datetime-local",value:t.newPost.datetime,onChange:e[1]||(e[1]=(...o)=>n.onDateTimeChange&&n.onDateTimeChange(...o))},null,40,Qde),X(d("input",{class:"textbox mb-2",type:"text",placeholder:"Title","onUpdate:modelValue":e[2]||(e[2]=o=>t.newPost.title=o),spellcheck:"true"},null,512),[[Ae,t.newPost.title,void 0,{lazy:!0,trim:!0}]]),X(d("textarea",{class:F(["textarea mb-2",{invalid:t.newPost.isTextValid==!1}]),"onUpdate:modelValue":e[3]||(e[3]=o=>t.newPost.text=o),placeholder:"Click to write post",spellcheck:"true",onBlur:e[4]||(e[4]=(...o)=>n.onTextBlur&&n.onTextBlur(...o))},"                    ",34),[[Ae,t.newPost.text,void 0,{trim:!0}]]),d("div",Zde,[d("button",{type:"button",onClick:e[5]||(e[5]=(...o)=>n.saveBlurb&&n.saveBlurb(...o))},"Save"),d("button",{class:"ms-1",type:"button",onClick:e[6]||(e[6]=(...o)=>n.cancelBlurb&&n.cancelBlurb(...o))},"Cancel")])])])):x("",!0):(m(),p("button",{key:0,type:"button",class:"btn btn-primary mt-3 mb-2",onClick:e[0]||(e[0]=(...o)=>n.onNewPost&&n.onNewPost(...o))}," New Post ")),(m(!0),p(L,null,G(n.blurbs,o=>(m(),p("div",{key:o.id,class:"blurb d-flex flex-column"},[d("span",Xde,k(o.date),1),d("span",eue,k(o.time),1),o.title?(m(),p("span",tue,k(o.title),1)):x("",!0),d("span",iue,k(o.text),1),d("div",sue,[(m(!0),p(L,null,G(o.tags,(a,l)=>(m(),p("span",{key:l,class:"tag"},k(a),1))),128))])]))),128))])])}const rue=Q(Wde,[["render",nue],["__scopeId","data-v-fa442902"]]),oue={name:"MetricTimeline",components:{},props:{idMetric:Number},data:function(){return{plannerStore:void 0,universalStore:void 0,blurbs:[],newPost:{isShown:!1,datetime:void 0,title:void 0,text:void 0,isTextValid:void 0}}},created:async function(){this.plannerStore=bn(),this.universalStore=Kl(),this.initBlurbs()},computed:{selectedDate(){return this.plannerStore?this.plannerStore.selectedDate:today()}},methods:{async initBlurbs(){let t=await this.universalStore.getBlurbsInMetric(this.idMetric,Hi.MONTH,this.selectedDate);t=Ul(t,"datetime"),t.forEach(e=>{let i={id:e.id,date:Sm(e.datetime),time:zn(e.datetime),title:e.title,text:e.text,tags:[]};this.blurbs.push(i)})},refreshNewPost(){this.newPost.title=void 0,this.newPost.text=void 0,this.newPost.isTextValid=void 0},onNewPost(){this.refreshNewPost(),this.newPost.datetime=Rw(),this.newPost.isShown=!0},onDateTimeChange(t){t=t.currentTarget.value,this.newPost.datetime=t},onTextBlur(){this.newPost.isTextValid=!!this.newPost.text},saveBlurb(){if(this.newPost.isTextValid){let t=new Date(this.newPost.datetime);this.universalStore.addMetricBlurb(this.idMetric,t,this.newPost.text,this.newPost.title),this.newPost.isShown=!1}},cancelBlurb(){this.newPost.isShown=!1}}},aue={class:"blog-posts d-flex flex-column"},lue={key:1,class:"new-post blurb d-flex flex-column"},due={class:"d-flex flex-column"},uue=["value"],cue={class:"d-flex flex-row mt-1 justify-content-end"},hue={class:"date"},fue={class:"time"},mue={key:0,class:"title"},pue={class:"text"},gue={class:"d-flex flex-row"};function vue(t,e,i,s,r,n){return m(),p("div",aue,[t.newPost.isShown?t.newPost.isShown?(m(),p("div",lue,[d("div",due,[d("input",{class:"date-picker mb-2",type:"datetime-local",value:t.newPost.datetime,onChange:e[1]||(e[1]=(...o)=>n.onDateTimeChange&&n.onDateTimeChange(...o))},null,40,uue),X(d("input",{class:"textbox mb-2",type:"text",placeholder:"Title","onUpdate:modelValue":e[2]||(e[2]=o=>t.newPost.title=o),spellcheck:"true"},null,512),[[Ae,t.newPost.title,void 0,{lazy:!0,trim:!0}]]),X(d("textarea",{class:F(["textarea mb-2",{invalid:t.newPost.isTextValid==!1}]),"onUpdate:modelValue":e[3]||(e[3]=o=>t.newPost.text=o),placeholder:"Click to write post",spellcheck:"true",onBlur:e[4]||(e[4]=(...o)=>n.onTextBlur&&n.onTextBlur(...o))},"                ",34),[[Ae,t.newPost.text,void 0,{trim:!0}]]),d("div",cue,[d("button",{type:"button",onClick:e[5]||(e[5]=(...o)=>n.saveBlurb&&n.saveBlurb(...o))},"Save"),d("button",{class:"ms-1",type:"button",onClick:e[6]||(e[6]=(...o)=>n.cancelBlurb&&n.cancelBlurb(...o))},"Cancel")])])])):x("",!0):(m(),p("button",{key:0,type:"button",class:"btn btn-primary mt-3 mb-2",onClick:e[0]||(e[0]=(...o)=>n.onNewPost&&n.onNewPost(...o))},"New Post")),(m(!0),p(L,null,G(t.blurbs,o=>(m(),p("div",{key:o.id,class:"blurb d-flex flex-column"},[d("span",hue,k(o.date),1),d("span",fue,k(o.time),1),o.title?(m(),p("span",mue,k(o.title),1)):x("",!0),d("span",pue,k(o.text),1),d("div",gue,[(m(!0),p(L,null,G(o.tags,(a,l)=>(m(),p("span",{key:l,class:"tag"},k(a),1))),128))])]))),128))])}const K1=Q(oue,[["render",vue],["__scopeId","data-v-0f4a592b"]]),yue={name:"",components:{},props:{},data:function(){return{physicalStore:void 0,chart:void 0,weightGoal:185,weightSeries:void 0,caloriesRecommended:2e3,calorieSeries:void 0}},created:function(){this.physicalStore=Js()},mounted(){this.createWeightChart()},computed:{weightHistories(){let t=[];if(this.physicalStore){let e=this.physicalStore.getBodyMeasurements();if(e.length>0){e=so(e,"dateTime");let i=new Date(1970,0,1);e.forEach(s=>{let r=wl(new Date(s.dateTime));if(+i!=+r){let n={date:r,weight:s.weight};t.push(n),i=r}})}}return t},mealHistories(){if(this.physicalStore){let t=[],e=this.physicalStore.mealHistories;if(e.length>0){let i;e=so(e,"dateTime");let s=new Date(1970,0,1);e.forEach(r=>{let n=wl(new Date(r.dateTime));+s==+n?(i.calories+=r.calories,i.carbs+=r.carbs,i.protein+=r.protein,i.fat+=r.fat):(s=n,i={calories:r.calories,carbs:r.carbs,protein:r.protein,fat:r.fat},t.push({date:s,nutrients:i}))})}return t}else return[]}},methods:{createWeightChart:_ue,setWeightSeries:bue,setCalorieSeries:wue},watch:{weightHistories:{handler(t){t.length&&t.length>0},deep:!0}}};function _ue(){let t={rightPriceScale:{visible:!0},leftPriceScale:{visible:!0},localization:{priceFormatter:s=>s.toFixed(0)},height:500};this.$refs["weight-chart"].replaceChildren();const e=Zl("weight-chart",t);this.chart=e,this.weightSeries=e.addLineSeries({priceScaleId:"left",color:"#EA8919",lastValueVisible:!1,priceLineVisible:!1});const i={price:this.weightGoal,color:"#EA8919",lineWidth:2,lineStyle:2,axisLabelVisible:!0};this.weightSeries.createPriceLine(i),this.setWeightSeries()}function bue(){let t=0,e=this.weightHistories.map(s=>(s.weight>t&&(t=s.weight),{datetime:s.date,time:s.date/1e3,value:parseInt(s.weight)}));this.weightSeries.setData(e);let i=t<this.weightGoal?this.weightGoal:t;this.weightSeries.applyOptions({autoscaleInfoProvider:()=>({priceRange:{minValue:120,maxValue:i}})}),this.chart.timeScale().fitContent()}function wue(){let t=0,e=this.mealHistories.map(i=>(i.nutrients.calories>t&&(t=i.nutrients.calories),{datetime:i.date,time:i.date/1e3,value:parseInt(i.nutrients.calories)}));this.calorieSeries.setData(e),this.calorieSeries.applyOptions({autoscaleInfoProvider:()=>({priceRange:{minValue:0,maxValue:1e4}})}),this.chart.timeScale().fitContent()}const Sue={class:"weight-chart"},Tue={id:"weight-chart",ref:"weight-chart",class:"mt-2"};function xue(t,e,i,s,r,n){return m(),p("div",Sue,[d("div",Tue,null,512)])}const Iue=Q(yue,[["render",xue]]),Eue={name:"PhysicalView",components:{MetricTimeline:K1,WeightChart:Iue},props:{},data:function(){return{plannerStore:void 0,universalStore:void 0,idMetric:rr.PHYSICAL,blurbs:[]}},created:async function(){this.plannerStore=bn()},methods:{}},Due={class:"physical-view"},kue={class:"d-flex flex-column flex-grow-1"},Cue={class:"hero"},Pue={class:"blurbs d-flex flex-column"},Aue={class:"date"},Rue={class:"time"},Mue={key:0,class:"title"},Oue={class:"text"},$ue={class:"d-flex flex-row"};function Nue(t,e,i,s,r,n){const o=$("WeightChart"),a=$("MetricTimeline");return m(),p("div",Due,[d("div",kue,[d("div",Cue,[H(o)]),e[0]||(e[0]=ab('<div class="cards d-flex flex-row justify-content-center overflow-scroll" data-v-f37f217f><div class="card" data-v-f37f217f><div class="height d-flex flex-row" data-v-f37f217f><span class="feet" data-v-f37f217f>6</span><span class="ft" data-v-f37f217f>ft</span><span class="inch" data-v-f37f217f>0</span><span class="in" data-v-f37f217f>in</span></div><div class="weight d-flex flex-row" data-v-f37f217f><span data-v-f37f217f>145lbs</span></div></div><div class="card" data-v-f37f217f></div><div class="card" data-v-f37f217f></div><div class="card" data-v-f37f217f></div><div class="card" data-v-f37f217f></div><div class="card" data-v-f37f217f></div></div>',1)),H(a,{class:"posts",idMetric:t.idMetric},null,8,["idMetric"]),d("div",Pue,[(m(!0),p(L,null,G(t.blurbs,l=>(m(),p("div",{key:l.id,class:"blurb d-flex flex-column"},[d("span",Aue,k(l.date),1),d("span",Rue,k(l.time),1),l.title?(m(),p("span",Mue,k(l.title),1)):x("",!0),d("span",Oue,k(l.text),1),d("div",$ue,[(m(!0),p(L,null,G(l.tags,(c,f)=>(m(),p("span",{key:f,class:"tag"},k(c),1))),128))])]))),128))])])])}const J1=Q(Eue,[["render",Nue],["__scopeId","data-v-f37f217f"]]),Lue="/metric/physical/Badass%20Workout%20Photo.jpg",Vue={name:"EmotionalView",components:{MetricTimeline:K1},props:{},data:function(){return{plannerStore:void 0,universalStore:void 0,idMetric:rr.EMOTIONAL,blurbs:[]}},created:async function(){this.plannerStore=bn()},methods:{}},Wue={class:"emotional-view"},Fue={class:"d-flex flex-column flex-grow-1"};function Bue(t,e,i,s,r,n){const o=$("MetricTimeline");return m(),p("div",Wue,[d("div",Fue,[e[0]||(e[0]=d("div",{class:"hero"},[d("img",{class:"img-fluid",src:Lue})],-1)),H(o,{class:"posts",idMetric:t.idMetric},null,8,["idMetric"])])])}const zue=Q(Vue,[["render",Bue],["__scopeId","data-v-be5afc2d"]]),jue={name:"App",components:{AppMobile:Fq,PlannerNavbar:Xq,LeftPanel:lJ,ItemPanel:BS,Planner:_f,ItemTabs:q1,BlogTimeline:rue,PhysicalView:J1,EmotionalView:zue},data:function(){return{itemsPage:{selectPanel:void 0},appStore:void 0,plannerStore:void 0}},created:async function(){await this.initStores()},beforeUnmount(){typeof window<"u"&&window.removeEventListener("resize",this.onResize,{passive:!0})},mounted(){this.onResize(),window.addEventListener("resize",this.onResize,{passive:!0})},computed:{leftPanelVisibility(){return this.showLeftPanel?"show-left-panel":"hide-left-panel"},isExtraSmall(){return this.appStore?this.appStore.isExtraSmall:!0},itemPanelVisibility(){return this.appStore.itemPanel.selected?"show-item-panel":"hide-item-panel"},selectedItemPanel(){return this.appStore?this.appStore.itemPanel.selected:"todo"},selectedPage(){return this.appStore?this.appStore.navbar.selectedPage:"planner"},showLeftPanel(){return this.appStore?this.appStore.showLeftPanel:!0}},methods:{initStores:Hue,onResize:Uue},watch:{selectedPage(t){t=="planner"?this.appStore.setLeftPanelVisibility(!0):t=="items"?this.appStore.setLeftPanelVisibility(!1):t=="physical"&&this.appStore.setLeftPanelVisibility(!1)}}};async function Hue(){Tb("coachHub"),this.appStore=bt(),this.plannerStore=bn();let t=Kl(),e=wm(),i=Sl(),s=Js(),r=qn(),n=fo(),o=vr(),a=ba();t.initialize(),e.initialize(),i.initialize(),s.initialize();let l=r.initialize(),c=n.initialize(),f=o.initialize(),v=a.initialize();await Promise.all([l,c,f,v]).then(()=>{r.initializeItems(),n.initializeItems(),o.initializeItems(),a.initializeItems()})}function Uue(){this.appStore.setWindowSize(window.innerWidth,window.innerHeight),this.appStore.setWindowOuterSize(window.outerWidth,window.outerHeight)}const Gue={id:"app"},Yue={class:"nav-bar overflow-scroll"},que={class:"grid-left-panel"},Kue={class:"grid-body overflow-scroll"},Jue={class:"grid-right-panel"};function Que(t,e,i,s,r,n){const o=$("AppMobile"),a=$("PlannerNavbar"),l=$("LeftPanel"),c=$("Planner"),f=$("ItemTabs"),v=$("BlogTimeline"),S=$("PhysicalView"),I=$("EmotionalView"),C=$("ItemPanel");return m(),p("div",Gue,[n.isExtraSmall?(m(),ie(o,{key:0})):(m(),p("div",{key:1,class:F(["grid-container",n.leftPanelVisibility,n.itemPanelVisibility])},[d("div",Yue,[H(a)]),d("div",que,[H(l)]),d("div",Kue,[X(H(c,null,null,512),[[it,n.selectedPage=="planner"]]),X(H(f,null,null,512),[[it,n.selectedPage=="items"]]),X(H(v,null,null,512),[[it,n.selectedPage=="timeline"]]),X(H(S,null,null,512),[[it,n.selectedPage=="physical"]]),X(H(I,null,null,512),[[it,n.selectedPage=="emotional"]])]),d("div",Jue,[H(C)])],2))])}const Zue=Q(jue,[["render",Que]]);/*!
  * vue-router v4.5.0
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const Vo=typeof document<"u";function Q1(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function Xue(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&Q1(t.default)}const zt=Object.assign;function zh(t,e){const i={};for(const s in e){const r=e[s];i[s]=Ys(r)?r.map(t):t(r)}return i}const ul=()=>{},Ys=Array.isArray,Z1=/#/g,ece=/&/g,tce=/\//g,ice=/=/g,sce=/\?/g,X1=/\+/g,nce=/%5B/g,rce=/%5D/g,eT=/%5E/g,oce=/%60/g,tT=/%7B/g,ace=/%7C/g,iT=/%7D/g,lce=/%20/g;function up(t){return encodeURI(""+t).replace(ace,"|").replace(nce,"[").replace(rce,"]")}function dce(t){return up(t).replace(tT,"{").replace(iT,"}").replace(eT,"^")}function Df(t){return up(t).replace(X1,"%2B").replace(lce,"+").replace(Z1,"%23").replace(ece,"%26").replace(oce,"`").replace(tT,"{").replace(iT,"}").replace(eT,"^")}function uce(t){return Df(t).replace(ice,"%3D")}function cce(t){return up(t).replace(Z1,"%23").replace(sce,"%3F")}function hce(t){return t==null?"":cce(t).replace(tce,"%2F")}function Rl(t){try{return decodeURIComponent(""+t)}catch{}return""+t}const fce=/\/$/,mce=t=>t.replace(fce,"");function jh(t,e,i="/"){let s,r={},n="",o="";const a=e.indexOf("#");let l=e.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(s=e.slice(0,l),n=e.slice(l+1,a>-1?a:e.length),r=t(n)),a>-1&&(s=s||e.slice(0,a),o=e.slice(a,e.length)),s=yce(s??e,i),{fullPath:s+(n&&"?")+n+o,path:s,query:r,hash:Rl(o)}}function pce(t,e){const i=e.query?t(e.query):"";return e.path+(i&&"?")+i+(e.hash||"")}function gce(t,e,i){const s=e.matched.length-1,r=i.matched.length-1;return s>-1&&s===r&&fa(e.matched[s],i.matched[r])&&sT(e.params,i.params)&&t(e.query)===t(i.query)&&e.hash===i.hash}function fa(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function sT(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const i in t)if(!vce(t[i],e[i]))return!1;return!0}function vce(t,e){return Ys(t)?jy(t,e):Ys(e)?jy(e,t):t===e}function jy(t,e){return Ys(e)?t.length===e.length&&t.every((i,s)=>i===e[s]):t.length===1&&t[0]===e}function yce(t,e){if(t.startsWith("/"))return t;if(!t)return e;const i=e.split("/"),s=t.split("/"),r=s[s.length-1];(r===".."||r===".")&&s.push("");let n=i.length-1,o,a;for(o=0;o<s.length;o++)if(a=s[o],a!==".")if(a==="..")n>1&&n--;else break;return i.slice(0,n).join("/")+"/"+s.slice(o).join("/")}const tr={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var Ml;(function(t){t.pop="pop",t.push="push"})(Ml||(Ml={}));var Eu;(function(t){t.back="back",t.forward="forward",t.unknown=""})(Eu||(Eu={}));const Hh="";function _ce(t){if(!t)if(Vo){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),mce(t)}const bce=/^[^#]+#/;function wce(t,e){return t.replace(bce,"#")+e}function Sce(t,e){const i=document.documentElement.getBoundingClientRect(),s=t.getBoundingClientRect();return{behavior:e.behavior,left:s.left-i.left-(e.left||0),top:s.top-i.top-(e.top||0)}}const Tce=()=>({left:window.scrollX,top:window.scrollY});function xce(t){let e;if("el"in t){const i=t.el,s=typeof i=="string"&&i.startsWith("#"),r=typeof i=="string"?s?document.getElementById(i.slice(1)):document.querySelector(i):i;if(!r)return;e=Sce(r,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function Hy(t,e){return(history.state?history.state.position-e:-1)+t}const kf=new Map;function Ice(t,e){kf.set(t,e)}function Ece(t){const e=kf.get(t);return kf.delete(t),e}function Dce(t=""){let e=[],i=[Hh],s=0;t=_ce(t);function r(a){s++,s!==i.length&&i.splice(s),i.push(a)}function n(a,l,{direction:c,delta:f}){const v={direction:c,delta:f,type:Ml.pop};for(const S of e)S(a,l,v)}const o={location:Hh,state:{},base:t,createHref:wce.bind(null,t),replace(a){i.splice(s--,1),r(a)},push(a,l){r(a)},listen(a){return e.push(a),()=>{const l=e.indexOf(a);l>-1&&e.splice(l,1)}},destroy(){e=[],i=[Hh],s=0},go(a,l=!0){const c=this.location,f=a<0?Eu.back:Eu.forward;s=Math.max(0,Math.min(s+a,i.length-1)),l&&n(this.location,c,{direction:f,delta:a})}};return Object.defineProperty(o,"location",{enumerable:!0,get:()=>i[s]}),o}function kce(t){return typeof t=="string"||t&&typeof t=="object"}function nT(t){return typeof t=="string"||typeof t=="symbol"}const rT=Symbol("");var Uy;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(Uy||(Uy={}));function ma(t,e){return zt(new Error,{type:t,[rT]:!0},e)}function En(t,e){return t instanceof Error&&rT in t&&(e==null||!!(t.type&e))}const Gy="[^/]+?",Cce={sensitive:!1,strict:!1,start:!0,end:!0},Pce=/[.+*?^${}()[\]/\\]/g;function Ace(t,e){const i=zt({},Cce,e),s=[];let r=i.start?"^":"";const n=[];for(const c of t){const f=c.length?[]:[90];i.strict&&!c.length&&(r+="/");for(let v=0;v<c.length;v++){const S=c[v];let I=40+(i.sensitive?.25:0);if(S.type===0)v||(r+="/"),r+=S.value.replace(Pce,"\\$&"),I+=40;else if(S.type===1){const{value:C,repeatable:D,optional:J,regexp:V}=S;n.push({name:C,repeatable:D,optional:J});const se=V||Gy;if(se!==Gy){I+=10;try{new RegExp(`(${se})`)}catch(ee){throw new Error(`Invalid custom RegExp for param "${C}" (${se}): `+ee.message)}}let oe=D?`((?:${se})(?:/(?:${se}))*)`:`(${se})`;v||(oe=J&&c.length<2?`(?:/${oe})`:"/"+oe),J&&(oe+="?"),r+=oe,I+=20,J&&(I+=-8),D&&(I+=-20),se===".*"&&(I+=-50)}f.push(I)}s.push(f)}if(i.strict&&i.end){const c=s.length-1;s[c][s[c].length-1]+=.7000000000000001}i.strict||(r+="/?"),i.end?r+="$":i.strict&&!r.endsWith("/")&&(r+="(?:/|$)");const o=new RegExp(r,i.sensitive?"":"i");function a(c){const f=c.match(o),v={};if(!f)return null;for(let S=1;S<f.length;S++){const I=f[S]||"",C=n[S-1];v[C.name]=I&&C.repeatable?I.split("/"):I}return v}function l(c){let f="",v=!1;for(const S of t){(!v||!f.endsWith("/"))&&(f+="/"),v=!1;for(const I of S)if(I.type===0)f+=I.value;else if(I.type===1){const{value:C,repeatable:D,optional:J}=I,V=C in c?c[C]:"";if(Ys(V)&&!D)throw new Error(`Provided param "${C}" is an array but it is not repeatable (* or + modifiers)`);const se=Ys(V)?V.join("/"):V;if(!se)if(J)S.length<2&&(f.endsWith("/")?f=f.slice(0,-1):v=!0);else throw new Error(`Missing required param "${C}"`);f+=se}}return f||"/"}return{re:o,score:s,keys:n,parse:a,stringify:l}}function Rce(t,e){let i=0;for(;i<t.length&&i<e.length;){const s=e[i]-t[i];if(s)return s;i++}return t.length<e.length?t.length===1&&t[0]===80?-1:1:t.length>e.length?e.length===1&&e[0]===80?1:-1:0}function oT(t,e){let i=0;const s=t.score,r=e.score;for(;i<s.length&&i<r.length;){const n=Rce(s[i],r[i]);if(n)return n;i++}if(Math.abs(r.length-s.length)===1){if(Yy(s))return 1;if(Yy(r))return-1}return r.length-s.length}function Yy(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const Mce={type:0,value:""},Oce=/[a-zA-Z0-9_]/;function $ce(t){if(!t)return[[]];if(t==="/")return[[Mce]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(I){throw new Error(`ERR (${i})/"${c}": ${I}`)}let i=0,s=i;const r=[];let n;function o(){n&&r.push(n),n=[]}let a=0,l,c="",f="";function v(){c&&(i===0?n.push({type:0,value:c}):i===1||i===2||i===3?(n.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),n.push({type:1,value:c,regexp:f,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),c="")}function S(){c+=l}for(;a<t.length;){if(l=t[a++],l==="\\"&&i!==2){s=i,i=4;continue}switch(i){case 0:l==="/"?(c&&v(),o()):l===":"?(v(),i=1):S();break;case 4:S(),i=s;break;case 1:l==="("?i=2:Oce.test(l)?S():(v(),i=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?f[f.length-1]=="\\"?f=f.slice(0,-1)+l:i=3:f+=l;break;case 3:v(),i=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,f="";break;default:e("Unknown state");break}}return i===2&&e(`Unfinished custom RegExp for param "${c}"`),v(),o(),r}function Nce(t,e,i){const s=Ace($ce(t.path),i),r=zt(s,{record:t,parent:e,children:[],alias:[]});return e&&!r.record.aliasOf==!e.record.aliasOf&&e.children.push(r),r}function Lce(t,e){const i=[],s=new Map;e=Qy({strict:!1,end:!0,sensitive:!1},e);function r(v){return s.get(v)}function n(v,S,I){const C=!I,D=Ky(v);D.aliasOf=I&&I.record;const J=Qy(e,v),V=[D];if("alias"in v){const ee=typeof v.alias=="string"?[v.alias]:v.alias;for(const _e of ee)V.push(Ky(zt({},D,{components:I?I.record.components:D.components,path:_e,aliasOf:I?I.record:D})))}let se,oe;for(const ee of V){const{path:_e}=ee;if(S&&_e[0]!=="/"){const _=S.record.path,Ee=_[_.length-1]==="/"?"":"/";ee.path=S.record.path+(_e&&Ee+_e)}if(se=Nce(ee,S,J),I?I.alias.push(se):(oe=oe||se,oe!==se&&oe.alias.push(se),C&&v.name&&!Jy(se)&&o(v.name)),aT(se)&&l(se),D.children){const _=D.children;for(let Ee=0;Ee<_.length;Ee++)n(_[Ee],se,I&&I.children[Ee])}I=I||se}return oe?()=>{o(oe)}:ul}function o(v){if(nT(v)){const S=s.get(v);S&&(s.delete(v),i.splice(i.indexOf(S),1),S.children.forEach(o),S.alias.forEach(o))}else{const S=i.indexOf(v);S>-1&&(i.splice(S,1),v.record.name&&s.delete(v.record.name),v.children.forEach(o),v.alias.forEach(o))}}function a(){return i}function l(v){const S=Fce(v,i);i.splice(S,0,v),v.record.name&&!Jy(v)&&s.set(v.record.name,v)}function c(v,S){let I,C={},D,J;if("name"in v&&v.name){if(I=s.get(v.name),!I)throw ma(1,{location:v});J=I.record.name,C=zt(qy(S.params,I.keys.filter(oe=>!oe.optional).concat(I.parent?I.parent.keys.filter(oe=>oe.optional):[]).map(oe=>oe.name)),v.params&&qy(v.params,I.keys.map(oe=>oe.name))),D=I.stringify(C)}else if(v.path!=null)D=v.path,I=i.find(oe=>oe.re.test(D)),I&&(C=I.parse(D),J=I.record.name);else{if(I=S.name?s.get(S.name):i.find(oe=>oe.re.test(S.path)),!I)throw ma(1,{location:v,currentLocation:S});J=I.record.name,C=zt({},S.params,v.params),D=I.stringify(C)}const V=[];let se=I;for(;se;)V.unshift(se.record),se=se.parent;return{name:J,path:D,params:C,matched:V,meta:Wce(V)}}t.forEach(v=>n(v));function f(){i.length=0,s.clear()}return{addRoute:n,resolve:c,removeRoute:o,clearRoutes:f,getRoutes:a,getRecordMatcher:r}}function qy(t,e){const i={};for(const s of e)s in t&&(i[s]=t[s]);return i}function Ky(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:Vce(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function Vce(t){const e={},i=t.props||!1;if("component"in t)e.default=i;else for(const s in t.components)e[s]=typeof i=="object"?i[s]:i;return e}function Jy(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function Wce(t){return t.reduce((e,i)=>zt(e,i.meta),{})}function Qy(t,e){const i={};for(const s in t)i[s]=s in e?e[s]:t[s];return i}function Fce(t,e){let i=0,s=e.length;for(;i!==s;){const n=i+s>>1;oT(t,e[n])<0?s=n:i=n+1}const r=Bce(t);return r&&(s=e.lastIndexOf(r,s-1)),s}function Bce(t){let e=t;for(;e=e.parent;)if(aT(e)&&oT(t,e)===0)return e}function aT({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function zce(t){const e={};if(t===""||t==="?")return e;const s=(t[0]==="?"?t.slice(1):t).split("&");for(let r=0;r<s.length;++r){const n=s[r].replace(X1," "),o=n.indexOf("="),a=Rl(o<0?n:n.slice(0,o)),l=o<0?null:Rl(n.slice(o+1));if(a in e){let c=e[a];Ys(c)||(c=e[a]=[c]),c.push(l)}else e[a]=l}return e}function Zy(t){let e="";for(let i in t){const s=t[i];if(i=uce(i),s==null){s!==void 0&&(e+=(e.length?"&":"")+i);continue}(Ys(s)?s.map(n=>n&&Df(n)):[s&&Df(s)]).forEach(n=>{n!==void 0&&(e+=(e.length?"&":"")+i,n!=null&&(e+="="+n))})}return e}function jce(t){const e={};for(const i in t){const s=t[i];s!==void 0&&(e[i]=Ys(s)?s.map(r=>r==null?null:""+r):s==null?s:""+s)}return e}const Hce=Symbol(""),Xy=Symbol(""),cp=Symbol(""),lT=Symbol(""),Cf=Symbol("");function Ga(){let t=[];function e(s){return t.push(s),()=>{const r=t.indexOf(s);r>-1&&t.splice(r,1)}}function i(){t=[]}return{add:e,list:()=>t.slice(),reset:i}}function or(t,e,i,s,r,n=o=>o()){const o=s&&(s.enterCallbacks[r]=s.enterCallbacks[r]||[]);return()=>new Promise((a,l)=>{const c=S=>{S===!1?l(ma(4,{from:i,to:e})):S instanceof Error?l(S):kce(S)?l(ma(2,{from:e,to:S})):(o&&s.enterCallbacks[r]===o&&typeof S=="function"&&o.push(S),a())},f=n(()=>t.call(s&&s.instances[r],e,i,c));let v=Promise.resolve(f);t.length<3&&(v=v.then(c)),v.catch(S=>l(S))})}function Uh(t,e,i,s,r=n=>n()){const n=[];for(const o of t)for(const a in o.components){let l=o.components[a];if(!(e!=="beforeRouteEnter"&&!o.instances[a]))if(Q1(l)){const f=(l.__vccOpts||l)[e];f&&n.push(or(f,i,s,o,a,r))}else{let c=l();n.push(()=>c.then(f=>{if(!f)throw new Error(`Couldn't resolve component "${a}" at "${o.path}"`);const v=Xue(f)?f.default:f;o.mods[a]=f,o.components[a]=v;const I=(v.__vccOpts||v)[e];return I&&or(I,i,s,o,a,r)()}))}}return n}function e_(t){const e=dn(cp),i=dn(lT),s=ys(()=>{const l=Go(t.to);return e.resolve(l)}),r=ys(()=>{const{matched:l}=s.value,{length:c}=l,f=l[c-1],v=i.matched;if(!f||!v.length)return-1;const S=v.findIndex(fa.bind(null,f));if(S>-1)return S;const I=t_(l[c-2]);return c>1&&t_(f)===I&&v[v.length-1].path!==I?v.findIndex(fa.bind(null,l[c-2])):S}),n=ys(()=>r.value>-1&&Kce(i.params,s.value.params)),o=ys(()=>r.value>-1&&r.value===i.matched.length-1&&sT(i.params,s.value.params));function a(l={}){if(qce(l)){const c=e[Go(t.replace)?"replace":"push"](Go(t.to)).catch(ul);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>c),c}return Promise.resolve()}return{route:s,href:ys(()=>s.value.href),isActive:n,isExactActive:o,navigate:a}}function Uce(t){return t.length===1?t[0]:t}const Gce=Uf({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:e_,setup(t,{slots:e}){const i=Nl(e_(t)),{options:s}=dn(cp),r=ys(()=>({[i_(t.activeClass,s.linkActiveClass,"router-link-active")]:i.isActive,[i_(t.exactActiveClass,s.linkExactActiveClass,"router-link-exact-active")]:i.isExactActive}));return()=>{const n=e.default&&Uce(e.default(i));return t.custom?n:ub("a",{"aria-current":i.isExactActive?t.ariaCurrentValue:null,href:i.href,onClick:i.navigate,class:r.value},n)}}}),Yce=Gce;function qce(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function Kce(t,e){for(const i in e){const s=e[i],r=t[i];if(typeof s=="string"){if(s!==r)return!1}else if(!Ys(r)||r.length!==s.length||s.some((n,o)=>n!==r[o]))return!1}return!0}function t_(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const i_=(t,e,i)=>t??e??i,Jce=Uf({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:i}){const s=dn(Cf),r=ys(()=>t.route||s.value),n=dn(Xy,0),o=ys(()=>{let c=Go(n);const{matched:f}=r.value;let v;for(;(v=f[c])&&!v.components;)c++;return c}),a=ys(()=>r.value.matched[o.value]);zd(Xy,ys(()=>o.value+1)),zd(Hce,a),zd(Cf,r);const l=Uo();return Za(()=>[l.value,a.value,t.name],([c,f,v],[S,I,C])=>{f&&(f.instances[v]=c,I&&I!==f&&c&&c===S&&(f.leaveGuards.size||(f.leaveGuards=I.leaveGuards),f.updateGuards.size||(f.updateGuards=I.updateGuards))),c&&f&&(!I||!fa(f,I)||!S)&&(f.enterCallbacks[v]||[]).forEach(D=>D(c))},{flush:"post"}),()=>{const c=r.value,f=t.name,v=a.value,S=v&&v.components[f];if(!S)return s_(i.default,{Component:S,route:c});const I=v.props[f],C=I?I===!0?c.params:typeof I=="function"?I(c):I:null,J=ub(S,zt({},C,e,{onVnodeUnmounted:V=>{V.component.isUnmounted&&(v.instances[f]=null)},ref:l}));return s_(i.default,{Component:J,route:c})||J}}});function s_(t,e){if(!t)return null;const i=t(e);return i.length===1?i[0]:i}const Qce=Jce;function Zce(t){const e=Lce(t.routes,t),i=t.parseQuery||zce,s=t.stringifyQuery||Zy,r=t.history,n=Ga(),o=Ga(),a=Ga(),l=L0(tr);let c=tr;Vo&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const f=zh.bind(null,W=>""+W),v=zh.bind(null,hce),S=zh.bind(null,Rl);function I(W,U){let q,he;return nT(W)?(q=e.getRecordMatcher(W),he=U):he=W,e.addRoute(he,q)}function C(W){const U=e.getRecordMatcher(W);U&&e.removeRoute(U)}function D(){return e.getRoutes().map(W=>W.record)}function J(W){return!!e.getRecordMatcher(W)}function V(W,U){if(U=zt({},U||l.value),typeof W=="string"){const B=jh(i,W,U.path),ae=e.resolve({path:B.path},U),Y=r.createHref(B.fullPath);return zt(B,ae,{params:S(ae.params),hash:Rl(B.hash),redirectedFrom:void 0,href:Y})}let q;if(W.path!=null)q=zt({},W,{path:jh(i,W.path,U.path).path});else{const B=zt({},W.params);for(const ae in B)B[ae]==null&&delete B[ae];q=zt({},W,{params:v(B)}),U.params=v(U.params)}const he=e.resolve(q,U),Ye=W.hash||"";he.params=f(S(he.params));const P=pce(s,zt({},W,{hash:dce(Ye),path:he.path})),A=r.createHref(P);return zt({fullPath:P,hash:Ye,query:s===Zy?jce(W.query):W.query||{}},he,{redirectedFrom:void 0,href:A})}function se(W){return typeof W=="string"?jh(i,W,l.value.path):zt({},W)}function oe(W,U){if(c!==W)return ma(8,{from:U,to:W})}function ee(W){return Ee(W)}function _e(W){return ee(zt(se(W),{replace:!0}))}function _(W){const U=W.matched[W.matched.length-1];if(U&&U.redirect){const{redirect:q}=U;let he=typeof q=="function"?q(W):q;return typeof he=="string"&&(he=he.includes("?")||he.includes("#")?he=se(he):{path:he},he.params={}),zt({query:W.query,hash:W.hash,params:he.path!=null?{}:W.params},he)}}function Ee(W,U){const q=c=V(W),he=l.value,Ye=W.state,P=W.force,A=W.replace===!0,B=_(q);if(B)return Ee(zt(se(B),{state:typeof B=="object"?zt({},Ye,B.state):Ye,force:P,replace:A}),U||q);const ae=q;ae.redirectedFrom=U;let Y;return!P&&gce(s,he,q)&&(Y=ma(16,{to:ae,from:he}),wt(he,he,!0,!1)),(Y?Promise.resolve(Y):Fe(ae,he)).catch(ne=>En(ne)?En(ne,2)?ne:Jt(ne):et(ne,ae,he)).then(ne=>{if(ne){if(En(ne,2))return Ee(zt({replace:A},se(ne.to),{state:typeof ne.to=="object"?zt({},Ye,ne.to.state):Ye,force:P}),U||ae)}else ne=Xe(ae,he,!0,A,Ye);return at(ae,he,ne),ne})}function Te(W,U){const q=oe(W,U);return q?Promise.reject(q):Promise.resolve()}function Pe(W){const U=ii.values().next().value;return U&&typeof U.runWithContext=="function"?U.runWithContext(W):W()}function Fe(W,U){let q;const[he,Ye,P]=Xce(W,U);q=Uh(he.reverse(),"beforeRouteLeave",W,U);for(const B of he)B.leaveGuards.forEach(ae=>{q.push(or(ae,W,U))});const A=Te.bind(null,W,U);return q.push(A),Xt(q).then(()=>{q=[];for(const B of n.list())q.push(or(B,W,U));return q.push(A),Xt(q)}).then(()=>{q=Uh(Ye,"beforeRouteUpdate",W,U);for(const B of Ye)B.updateGuards.forEach(ae=>{q.push(or(ae,W,U))});return q.push(A),Xt(q)}).then(()=>{q=[];for(const B of P)if(B.beforeEnter)if(Ys(B.beforeEnter))for(const ae of B.beforeEnter)q.push(or(ae,W,U));else q.push(or(B.beforeEnter,W,U));return q.push(A),Xt(q)}).then(()=>(W.matched.forEach(B=>B.enterCallbacks={}),q=Uh(P,"beforeRouteEnter",W,U,Pe),q.push(A),Xt(q))).then(()=>{q=[];for(const B of o.list())q.push(or(B,W,U));return q.push(A),Xt(q)}).catch(B=>En(B,8)?B:Promise.reject(B))}function at(W,U,q){a.list().forEach(he=>Pe(()=>he(W,U,q)))}function Xe(W,U,q,he,Ye){const P=oe(W,U);if(P)return P;const A=U===tr,B=Vo?history.state:{};q&&(he||A?r.replace(W.fullPath,zt({scroll:A&&B&&B.scroll},Ye)):r.push(W.fullPath,Ye)),l.value=W,wt(W,U,q,A),Jt()}let lt;function Dt(){lt||(lt=r.listen((W,U,q)=>{if(!pi.listening)return;const he=V(W),Ye=_(he);if(Ye){Ee(zt(Ye,{replace:!0,force:!0}),he).catch(ul);return}c=he;const P=l.value;Vo&&Ice(Hy(P.fullPath,q.delta),Tce()),Fe(he,P).catch(A=>En(A,12)?A:En(A,2)?(Ee(zt(se(A.to),{force:!0}),he).then(B=>{En(B,20)&&!q.delta&&q.type===Ml.pop&&r.go(-1,!1)}).catch(ul),Promise.reject()):(q.delta&&r.go(-q.delta,!1),et(A,he,P))).then(A=>{A=A||Xe(he,P,!1),A&&(q.delta&&!En(A,8)?r.go(-q.delta,!1):q.type===Ml.pop&&En(A,20)&&r.go(-1,!1)),at(he,P,A)}).catch(ul)}))}let Ft=Ga(),Ze=Ga(),Le;function et(W,U,q){Jt(W);const he=Ze.list();return he.length?he.forEach(Ye=>Ye(W,U,q)):console.error(W),Promise.reject(W)}function Bt(){return Le&&l.value!==tr?Promise.resolve():new Promise((W,U)=>{Ft.add([W,U])})}function Jt(W){return Le||(Le=!W,Dt(),Ft.list().forEach(([U,q])=>W?q(W):U()),Ft.reset()),W}function wt(W,U,q,he){const{scrollBehavior:Ye}=t;if(!Vo||!Ye)return Promise.resolve();const P=!q&&Ece(Hy(W.fullPath,0))||(he||!q)&&history.state&&history.state.scroll||null;return Ru().then(()=>Ye(W,U,P)).then(A=>A&&xce(A)).catch(A=>et(A,W,U))}const Gt=W=>r.go(W);let Nt;const ii=new Set,pi={currentRoute:l,listening:!0,addRoute:I,removeRoute:C,clearRoutes:e.clearRoutes,hasRoute:J,getRoutes:D,resolve:V,options:t,push:ee,replace:_e,go:Gt,back:()=>Gt(-1),forward:()=>Gt(1),beforeEach:n.add,beforeResolve:o.add,afterEach:a.add,onError:Ze.add,isReady:Bt,install(W){const U=this;W.component("RouterLink",Yce),W.component("RouterView",Qce),W.config.globalProperties.$router=U,Object.defineProperty(W.config.globalProperties,"$route",{enumerable:!0,get:()=>Go(l)}),Vo&&!Nt&&l.value===tr&&(Nt=!0,ee(r.location).catch(Ye=>{}));const q={};for(const Ye in tr)Object.defineProperty(q,Ye,{get:()=>l.value[Ye],enumerable:!0});W.provide(cp,U),W.provide(lT,k_(q)),W.provide(Cf,l);const he=W.unmount;ii.add(W),W.unmount=function(){ii.delete(W),ii.size<1&&(c=tr,lt&&lt(),lt=null,l.value=tr,Nt=!1,Le=!1),he()}}};function Xt(W){return W.reduce((U,q)=>U.then(()=>Pe(q)),Promise.resolve())}return pi}function Xce(t,e){const i=[],s=[],r=[],n=Math.max(e.matched.length,t.matched.length);for(let o=0;o<n;o++){const a=e.matched[o];a&&(t.matched.find(c=>fa(c,a))?s.push(a):i.push(a));const l=t.matched[o];l&&(e.matched.find(c=>fa(c,l))||r.push(l))}return[i,s,r]}const hp=CI(Zue),ehe=[{path:"/",component:_f},{path:"/planner",component:_f},{path:"/items",component:q1},{path:"/physical-view",component:J1}],the=Zce({history:Dce(),routes:ehe}),ihe=RI();hp.use(the);hp.use(ihe);hp.mount("#app");Date.prototype.toJSON=function(){return de(this).format().slice(0,-6)};Date.prototype.startOfDay=function(){return de(this).startOf("day").toDate()};Date.prototype.endOfDay=function(){return de(this).endOf("day").millisecond(0).toDate()};Date.prototype.firstDayOfWeek=function(){return de(this).startOf("week").toDate()};Date.prototype.lastDayOfWeek=function(){return de(this).endOf("week").toDate()};String.prototype.startOfDay=function(){return this.toDate().startOfDay()};String.prototype.endOfDay=function(){return this.toDate().endOfDay()};String.prototype.firstDayOfWeek=function(){return this.toDate().firstDayOfWeek()};String.prototype.lastDayOfWeek=function(){return this.toDate().firstDayOfWeek()};String.prototype.toDate=function(){return this.split("T").length==2?new Date(this):new Date(this+"T00:00:00")};String.prototype.toCamelCase=function(){return this.replace(/(?:^\w|[A-Z]|\b\w)/g,function(t,e){return e===0?t.toLowerCase():t.toUpperCase()}).replace(/\s+/g,"")};String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)};Number.prototype.round=function(){return Math.round(this)};export{qs as d};
